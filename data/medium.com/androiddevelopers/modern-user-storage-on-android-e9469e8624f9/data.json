{"url": "https://medium.com/androiddevelopers/modern-user-storage-on-android-e9469e8624f9", "time": 1682993110.750668, "path": "medium.com/androiddevelopers/modern-user-storage-on-android-e9469e8624f9/", "webpage": {"metadata": {"title": "Modern user storage on Android. To protect user data and reduce the\u2026 | by Yacine Rezgui | Android Developers | Medium", "h1": "Modern user storage on Android", "description": "To protect user data and reduce the amount of space consumed by apps, Android 10 introduced changes to the behavior of the external storage permission. Android 11 Developer Preview continues this\u2026"}, "outgoing_paragraph_urls": [{"url": "https://developer.android.com/training/data-storage#scoped-storage", "anchor_text": "behavior of the external storage permission", "paragraph_index": 0}, {"url": "https://android-developers.googleblog.com/2020/02/Android-11-developer-preview.html", "anchor_text": "Android 11 Developer Preview", "paragraph_index": 0}, {"url": "https://developer.android.com/reference/android/Manifest.permission#READ_EXTERNAL_STORAGE", "anchor_text": "storage permission", "paragraph_index": 1}, {"url": "https://developer.android.com/guide/topics/providers/document-provider", "anchor_text": "Storage Access Framework", "paragraph_index": 4}, {"url": "https://developer.android.com/preview/privacy/storage#media-files-raw-paths", "anchor_text": "enabled again", "paragraph_index": 6}, {"url": "https://developer.android.com/preview/privacy/storage#media-file-access", "anchor_text": "several media files at once", "paragraph_index": 8}, {"url": "https://developer.android.com/preview/privacy/storage#file-directory-restrictions", "anchor_text": "updated it to limit visibility", "paragraph_index": 9}, {"url": "https://support.google.com/googleplay/android-developer/answer/9956427", "anchor_text": "here", "paragraph_index": 13}, {"url": "https://developer.android.com/preview/privacy/storage", "anchor_text": "developer documentation", "paragraph_index": 15}, {"url": "https://youtu.be/UnJ3amzJM94", "anchor_text": "talk from the Android Dev Summit 2019", "paragraph_index": 15}, {"url": "http://bit.ly/2vd4wF4", "anchor_text": "issues tracker", "paragraph_index": 16}], "all_paragraphs": ["To protect user data and reduce the amount of space consumed by apps, Android 10 introduced changes to the behavior of the external storage permission. Android 11 Developer Preview continues this effort while adding improvements designed to help developers adapt to the changes.", "Most of the apps published on Google Play that request the storage permission do so for common reasons, such as saving files on SD cards or reading media files. These apps are able to save a large number of files on disk that remain after the app is uninstalled. They can also read potentially sensitive files from other apps.", "With Android 10, we adjusted how storage permission works, to give apps the access they need. This also limits file clutter by encouraging apps to save files in their designated directories which are cleared when an app is deleted.", "The storage changes in Android 10 followed three basic principles:", "Apps targeting Android 10 can contribute to their own external app directories and organize media collections (audio, video, images, and downloads) without needing to request the storage permission. The Storage permission only allows apps to read media files shared by other apps in the audio, video, and image collections. However, it does not give read access to files in the Downloads collection that the app did not create. The only way for apps to access non-media files created by other apps in Android 10 is by using the document picker provided by the Storage Access Framework.", "In Android 11, we will continue to improve the developer experience related to Scoped Storage by introducing the following changes.", "Android 10 required that all apps use MediaStore APIs to access photos, videos, and music files. This will continue to be our recommendation. However, we understand that many apps depend heavily on APIs that use file paths, including third-party libraries, that cannot easily switch to using file descriptors. So in Android 11, APIs and libraries that use file paths will be enabled again. Your app can use the requestLegacyExternalStorage manifest attribute to ensure compatibility for users running Android 10.", "Under the hood, I/O requests using file paths are delegated to the MediaStore API. This redirection has some performance impact when used to read files outside of your isolated storage. Further, using file paths does not provide any feature benefits over the MediaStore APIs, hence our strong recommendation to use the MediaStore directly.", "On Android 10, users were required to confirm each file that an app requested to edit or delete. With Android 11, apps can request to modify or delete several media files at once. The system gallery app will never show these dialogs. We hope that this improvement makes the user experience more streamlined.", "After we limited access to broad storage, several app developers attempted to use the Storage Access framework to traverse the entire file system. However, SAF isn\u2019t a suitable tool to support broad access to shared storage. We therefore updated it to limit visibility to certain paths.", "In Android 11, users will not be able to grant directory access to the root Downloads directory, the root directory of each reliable SD card volume, or external app directories. Apps can still use the Storage Access Framework API and the document picker to ask the user to select individual files from shared storage.", "For apps that require broad access to shared storage, such as file managers or backup apps, Android 11 will introduce a special permission called MANAGE_EXTERNAL_STORAGE. This will grant read and write access to all shared storage, including non-media files. However, the contents of app-specific directories, both within internal and external storage, will not be accessible.", "We want to continue allowing some apps to have broad access to files on external storage, provided they have a use case that truly requires it. In Android 11, these apps can declare MANAGE_EXTERNAL_STORAGE which will allow them to request the user to grant them \u201cAll Files Access\u201d in settings. The following are a couple of app examples that will be allowed:", "However, if your app requires access to a single file, such as a word processor app, you should instead use the Storage Access Framework. You can check out the Google Play policy regarding this permission here.", "On Android 11, if your app requires MANAGE_EXTERNAL_STORAGE or uses APIs that rely on file paths, you can support backwards compatibility on older versions by declaring requestLegacyExternalStorage=true in your Android manifest.", "You can read more about this in the developer documentation and our talk from the Android Dev Summit 2019.", "We value your feedback! You can report issues or feature requests through the issues tracker. Stay tuned for upcoming articles about how to use Scoped Storage with the MediaStore and Storage Access Framework APIs.", "Articles on modern tools and resources to help you build experiences that people love, faster and easier, across every Android device.", "\ud83c\uddeb\ud83c\uddf7\ud83c\uddf9\ud83c\uddf3 Developer Relations Engineer \ud83e\udd51 on Android working on privacy @Google in London. Hacking projects on free time"], "all_outgoing_urls": [{"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/androiddevelopers?source=post_page-----e9469e8624f9--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/androiddevelopers?source=post_page-----e9469e8624f9--------------------------------", "anchor_text": "Android Developers"}, {"url": "https://medium.com/@yrezgui?source=post_page-----e9469e8624f9--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@yrezgui?source=post_page-----e9469e8624f9--------------------------------", "anchor_text": "Yacine Rezgui"}, {"url": "https://medium.com/@VPoltrack", "anchor_text": "Virginia Poltrack"}, {"url": "https://developer.android.com/training/data-storage#scoped-storage", "anchor_text": "behavior of the external storage permission"}, {"url": "https://android-developers.googleblog.com/2020/02/Android-11-developer-preview.html", "anchor_text": "Android 11 Developer Preview"}, {"url": "https://developer.android.com/reference/android/Manifest.permission#READ_EXTERNAL_STORAGE", "anchor_text": "storage permission"}, {"url": "https://developer.android.com/training/data-storage/app-specific", "anchor_text": "app-specific"}, {"url": "https://developer.android.com/guide/topics/providers/document-provider", "anchor_text": "Storage Access Framework"}, {"url": "https://developer.android.com/preview/privacy/storage#media-files-raw-paths", "anchor_text": "enabled again"}, {"url": "https://developer.android.com/preview/privacy/storage#media-file-access", "anchor_text": "several media files at once"}, {"url": "https://developer.android.com/preview/privacy/storage#file-directory-restrictions", "anchor_text": "updated it to limit visibility"}, {"url": "https://support.google.com/googleplay/android-developer/answer/9956427", "anchor_text": "here"}, {"url": "https://developer.android.com/preview/privacy/storage", "anchor_text": "developer documentation"}, {"url": "https://youtu.be/UnJ3amzJM94", "anchor_text": "talk from the Android Dev Summit 2019"}, {"url": "http://bit.ly/2vd4wF4", "anchor_text": "issues tracker"}, {"url": "https://medium.com/tag/android?source=post_page-----e9469e8624f9---------------android-----------------", "anchor_text": "Android"}, {"url": "https://medium.com/tag/scoped-storage?source=post_page-----e9469e8624f9---------------scoped_storage-----------------", "anchor_text": "Scoped Storage"}, {"url": "https://medium.com/tag/file-manager?source=post_page-----e9469e8624f9---------------file_manager-----------------", "anchor_text": "File Manager"}, {"url": "https://medium.com/tag/external-storage?source=post_page-----e9469e8624f9---------------external_storage-----------------", "anchor_text": "External Storage"}, {"url": "https://medium.com/tag/privacy?source=post_page-----e9469e8624f9---------------privacy-----------------", "anchor_text": "Privacy"}, {"url": "https://medium.com/androiddevelopers?source=post_page-----e9469e8624f9--------------------------------", "anchor_text": "More from Android Developers"}, {"url": "https://medium.com/androiddevelopers?source=post_page-----e9469e8624f9--------------------------------", "anchor_text": "Read more from Android Developers"}, {"url": "https://medium.com/?source=post_page-----e9469e8624f9--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----e9469e8624f9--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----e9469e8624f9--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----e9469e8624f9--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----e9469e8624f9--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----e9469e8624f9--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----e9469e8624f9--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/plans?source=upgrade_membership---two_column_layout_sidebar----------------------------------", "anchor_text": "Get unlimited access"}, {"url": "https://medium.com/@yrezgui?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@yrezgui?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Yacine Rezgui"}, {"url": "https://medium.com/@yrezgui/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "1.1K Followers"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F32f7c975ec45&operation=register&redirect=https%3A%2F%2Fmedium.com%2Fandroiddevelopers%2Fmodern-user-storage-on-android-e9469e8624f9&newsletterV3=f51b24785c0d&newsletterV3Id=32f7c975ec45&user=Yacine+Rezgui&userId=f51b24785c0d&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}