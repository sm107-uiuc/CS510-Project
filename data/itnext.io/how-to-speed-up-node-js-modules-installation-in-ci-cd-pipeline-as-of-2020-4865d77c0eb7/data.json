{"url": "https://itnext.io/how-to-speed-up-node-js-modules-installation-in-ci-cd-pipeline-as-of-2020-4865d77c0eb7", "time": 1682993132.093533, "path": "itnext.io/how-to-speed-up-node-js-modules-installation-in-ci-cd-pipeline-as-of-2020-4865d77c0eb7/", "webpage": {"metadata": {"title": "How to speed up Node.js modules installation in CI/CD pipeline as of 2020 | by Jerome Wu | ITNEXT", "h1": "How to speed up Node.js modules installation in CI/CD pipeline as of 2020", "description": "When you use Node.js in your project, you need to take care of node_modules installation in your CI/CD pipeline. You may use npm install, npm ci,yarn install and pnpm install, but what is the fastest\u2026"}, "outgoing_paragraph_urls": [{"url": "https://verdaccio.org/", "anchor_text": "verdaccio", "paragraph_index": 6}, {"url": "https://github.com/jeromewu/npm-vs-yarn-in-cicd", "anchor_text": "https://github.com/jeromewu/npm-vs-yarn-in-cicd", "paragraph_index": 21}], "all_paragraphs": ["When you use Node.js in your project, you need to take care of node_modules installation in your CI/CD pipeline. You may use npm install, npm ci,yarn install and pnpm install, but what is the fastest way of doing so is still a question we are looking for answers. Here in this story I would like to experiment all possibilities I know to find out the final answer.", "If you are in a hurry, what you have to do are:", "The total speed up is around 3x comparing to pure npm install", "It is normal that someone already do it in the past, here are some existing works for your reference.", "To prevent any cache or unexpected behavior, I run the experiment inside a docker container and every time we complete an installation, we run a new container for the next installation.", "The docker image I use is node:12 and the versions of each component are:", "I experiment both remote and local registry (verdaccio) scenario to show the influence of network. In local registry, I assumed the user do something like:", "Which makes the registry url in lock files points to the local registry directly.", "To mimic a real world scenario, I did experiment in an web app that is created using create-react-app.", "There are 5 basic commands I use:", "yarn install --frozen-lockfile is similar to npm ci", "For all of them, I add &> /dev/null to remove stdout output and the execution time is averaged from 3 times of execution. (As the execution time is pretty stable, I believe 3 times is good enough)", "Let\u2019s start the experiment and see where we will achieve. \ud83d\ude03", "There are 4 parameters we are going to tune:", "With local registry, you can prevent stale when the network bandwidth is not enough. It is a good way to speed up but may be painful when someone clone your repostiory but unable to access the local registry you used.", "A common technique to speed up the installation, by zipping node_modules folder and unzipping before installation to eliminate the need of downloading modules again from network.", "There is a global cache folder in ~/.npm for npm and ~/.yarn for yarn, by adding global cache in advance, I would like to know if it is possible to speed up.", "If true, staleness checks for cached data will be bypassed, but missing data will be requested from the server. To force full offline mode, use --offline.", "With this option, we can prevent npm or yarn to check remote data and use local cache directly.", "Below are the result of all configurations:", "The number is the amount of seconds to complete modules installation", "For the source code of this experiment can be found in this repository: https://github.com/jeromewu/npm-vs-yarn-in-cicd", "Hope you find it helpful and if you have any ideas to experiment to speed up even further, please feel free to leave a response or create an issue inside the repository. \ud83d\ude04", "ITNEXT is a platform for IT developers & software engineers to share knowledge, connect, collaborate, learn and experience next-gen technologies.", "A technology enthusiast wishes to make the world better and better. Maintainer of tesseract.js and ffmpeg.wasm"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F4865d77c0eb7&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fitnext.io%2Fhow-to-speed-up-node-js-modules-installation-in-ci-cd-pipeline-as-of-2020-4865d77c0eb7&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Fitnext.io%2Fhow-to-speed-up-node-js-modules-installation-in-ci-cd-pipeline-as-of-2020-4865d77c0eb7&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fitnext.io%2Fhow-to-speed-up-node-js-modules-installation-in-ci-cd-pipeline-as-of-2020-4865d77c0eb7&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Fitnext.io%2Fhow-to-speed-up-node-js-modules-installation-in-ci-cd-pipeline-as-of-2020-4865d77c0eb7&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://itnext.io/?source=post_page-----4865d77c0eb7--------------------------------", "anchor_text": ""}, {"url": "https://itnext.io/?source=post_page-----4865d77c0eb7--------------------------------", "anchor_text": "ITNEXT"}, {"url": "https://jeromewus.medium.com/?source=post_page-----4865d77c0eb7--------------------------------", "anchor_text": ""}, {"url": "https://jeromewus.medium.com/?source=post_page-----4865d77c0eb7--------------------------------", "anchor_text": "Jerome Wu"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F8d7beadc096e&operation=register&redirect=https%3A%2F%2Fitnext.io%2Fhow-to-speed-up-node-js-modules-installation-in-ci-cd-pipeline-as-of-2020-4865d77c0eb7&user=Jerome+Wu&userId=8d7beadc096e&source=post_page-8d7beadc096e----4865d77c0eb7---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F4865d77c0eb7&operation=register&redirect=https%3A%2F%2Fitnext.io%2Fhow-to-speed-up-node-js-modules-installation-in-ci-cd-pipeline-as-of-2020-4865d77c0eb7&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F4865d77c0eb7&operation=register&redirect=https%3A%2F%2Fitnext.io%2Fhow-to-speed-up-node-js-modules-installation-in-ci-cd-pipeline-as-of-2020-4865d77c0eb7&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://github.com/appleboy/npm-vs-yarn", "anchor_text": "https://github.com/appleboy/npm-vs-yarn"}, {"url": "https://winsmarts.com/npm-install-speed-up-by-3-times-almost-25ad416cf77e", "anchor_text": "https://winsmarts.com/npm-install-speed-up-by-3-times-almost-25ad416cf77e"}, {"url": "http://www.tiernok.com/posts/2019/faster-npm-installs-during-ci/", "anchor_text": "http://www.tiernok.com/posts/2019/faster-npm-installs-during-ci/"}, {"url": "https://verdaccio.org/", "anchor_text": "verdaccio"}, {"url": "http://nvy-registry:4873", "anchor_text": "http://nvy-registry:4873"}, {"url": "https://docs.npmjs.com/misc/config#prefer-offline", "anchor_text": "https://docs.npmjs.com/misc/config#prefer-offline"}, {"url": "https://github.com/jeromewu/npm-vs-yarn-in-cicd", "anchor_text": "https://github.com/jeromewu/npm-vs-yarn-in-cicd"}, {"url": "https://medium.com/tag/npm?source=post_page-----4865d77c0eb7---------------npm-----------------", "anchor_text": "NPM"}, {"url": "https://medium.com/tag/yarn?source=post_page-----4865d77c0eb7---------------yarn-----------------", "anchor_text": "Yarn"}, {"url": "https://medium.com/tag/ci-cd-pipeline?source=post_page-----4865d77c0eb7---------------ci_cd_pipeline-----------------", "anchor_text": "Ci Cd Pipeline"}, {"url": "https://medium.com/tag/nodejs?source=post_page-----4865d77c0eb7---------------nodejs-----------------", "anchor_text": "Nodejs"}, {"url": "https://medium.com/tag/javascript?source=post_page-----4865d77c0eb7---------------javascript-----------------", "anchor_text": "JavaScript"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Fitnext%2F4865d77c0eb7&operation=register&redirect=https%3A%2F%2Fitnext.io%2Fhow-to-speed-up-node-js-modules-installation-in-ci-cd-pipeline-as-of-2020-4865d77c0eb7&user=Jerome+Wu&userId=8d7beadc096e&source=-----4865d77c0eb7---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Fitnext%2F4865d77c0eb7&operation=register&redirect=https%3A%2F%2Fitnext.io%2Fhow-to-speed-up-node-js-modules-installation-in-ci-cd-pipeline-as-of-2020-4865d77c0eb7&user=Jerome+Wu&userId=8d7beadc096e&source=-----4865d77c0eb7---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F4865d77c0eb7&operation=register&redirect=https%3A%2F%2Fitnext.io%2Fhow-to-speed-up-node-js-modules-installation-in-ci-cd-pipeline-as-of-2020-4865d77c0eb7&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://itnext.io/?source=post_page-----4865d77c0eb7--------------------------------", "anchor_text": "More from ITNEXT"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Fitnext%2F4865d77c0eb7&operation=register&redirect=https%3A%2F%2Fitnext.io%2Fhow-to-speed-up-node-js-modules-installation-in-ci-cd-pipeline-as-of-2020-4865d77c0eb7&collection=ITNEXT&collectionId=5b301f10ddcd&source=post_page-----4865d77c0eb7---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://itnext.io/?source=post_page-----4865d77c0eb7--------------------------------", "anchor_text": "Read more from ITNEXT"}, {"url": "https://medium.com/?source=post_page-----4865d77c0eb7--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----4865d77c0eb7--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----4865d77c0eb7--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----4865d77c0eb7--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----4865d77c0eb7--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----4865d77c0eb7--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----4865d77c0eb7--------------------------------", "anchor_text": ""}, {"url": "https://jeromewus.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://jeromewus.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Jerome Wu"}, {"url": "https://jeromewus.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "215 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F8d7beadc096e&operation=register&redirect=https%3A%2F%2Fitnext.io%2Fhow-to-speed-up-node-js-modules-installation-in-ci-cd-pipeline-as-of-2020-4865d77c0eb7&user=Jerome+Wu&userId=8d7beadc096e&source=post_page-8d7beadc096e--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F47086e060ce0&operation=register&redirect=https%3A%2F%2Fitnext.io%2Fhow-to-speed-up-node-js-modules-installation-in-ci-cd-pipeline-as-of-2020-4865d77c0eb7&newsletterV3=8d7beadc096e&newsletterV3Id=47086e060ce0&user=Jerome+Wu&userId=8d7beadc096e&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}