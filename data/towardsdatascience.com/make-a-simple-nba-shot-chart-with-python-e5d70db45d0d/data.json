{"url": "https://towardsdatascience.com/make-a-simple-nba-shot-chart-with-python-e5d70db45d0d", "time": 1683009415.5478349, "path": "towardsdatascience.com/make-a-simple-nba-shot-chart-with-python-e5d70db45d0d/", "webpage": {"metadata": {"title": "Make a Simple NBA Shot Chart with Python | by Naveen Venkatesan | Towards Data Science", "h1": "Make a Simple NBA Shot Chart with Python", "description": "Recently, I stumbled on this wonderful Python package called nba_api, which can be found here, that serves as a very simple API client to retrieve stats from www.nba.com. I have personally always\u2026"}, "outgoing_paragraph_urls": [{"url": "https://github.com/swar/nba_api", "anchor_text": "here", "paragraph_index": 0}, {"url": "https://github.com/bttmly/nba", "anchor_text": "here", "paragraph_index": 2}, {"url": "https://github.com/swar/nba_api/blob/master/docs/nba_api/stats/endpoints/shotchartdetail.md", "anchor_text": "here", "paragraph_index": 8}, {"url": "https://github.com/venkatesannaveen/medium-articles", "anchor_text": "Github repository", "paragraph_index": 27}, {"url": "https://twitter.com/naveenv_92", "anchor_text": "Twitter", "paragraph_index": 27}, {"url": "https://www.linkedin.com/in/naveenvenkatesan/", "anchor_text": "LinkedIn", "paragraph_index": 27}], "all_paragraphs": ["Recently, I stumbled on this wonderful Python package called nba_api, which can be found here, that serves as a very simple API client to retrieve stats from www.nba.com. I have personally always wanted to create player shot charts like ones found online, but gathering the shot location data seemed like a daunting task. This is where nba_api comes to the rescue! First, let\u2019s install the package:", "Now that we have installed nba_api we can now import all the packages we will need to produce our own shot chart.", "To make our API request, we will need a player ID number and team ID number, both of which are used to retrieve shot stats. To easily pull these values, we can take advantage of another Github repository here. There are two JSON files, team.json and players.json, that contain all of the player and team ID numbers we need. We will use Python to load these JSON files into arrays of dictionary objects.", "Now that we have all the player and team data loaded, we can create helper functions that take an input of a team name and a player\u2019s name, and return their respective ID numbers. In both cases, if a player or team name cannot be found, the functions return -1:", "Let\u2019s now see our functions in action:", "Now we have all the pieces we need to collect shot data for a particular NBA player. Let\u2019s do an example now \u2014 as a Bay Area native and Golden State Warriors fan, I was interested in creating a shot chart for Stephen Curry\u2019s incredible 2015\u201316 unanimous MVP season. We first structure our JSON request as follows:", "context_measure_simple \u2014 this determined which \u201ccontext\u201d to use for searching for shots. Points (PTS) is default and will results in all made shots. If you wanted all attempts (made and missed), you can use \u201cFGA\u201d as your context.", "season_type_all_star \u2014 which portion of the season we are interested in (Pre Season, Regular Season, Playoffs, All Star)", "The documentation for ShotChartDetail() can be found here \u2014 as you\u2019ll see, I have only touched upon a small fraction of the things you can do with your request and the possibilities are nearly endless!", "Now we can load the JSON data into a dictionary object:", "Our relevant data can be found under the resultSets key, which is an array in itself \u2014 we need the first element of this array.", "The variable relevant_data is a dictionary itself, with the key headers corresponding to the column titles, and rowSet corresponding to the actual rows of data.", "Finally, we can put this data together into a pandas DataFrame, which is as simple as the following:", "There we go \u2014 now we can take a look at what columns we have access to in our newly-created DataFrame!", "Since all of the rows in our DataFrame correspond to made shots, we can use LOC_X and LOC_Y to plot them. From inspection of the data, the x-coordinates go from -250 to 250 (every 1/10 of a foot) and the y-coordinates go from 0 to 940 (also every 1/10 of a foot). We can use this information to plot the shot locations on an overlay of an NBA court. But first, let\u2019s create a basketball court!", "To create our basketball court, we will write a function that takes in a matplotlib axis object and a color (for the court markings) and generates a drawing of a court. I\u2019m going to go through it fairly quickly, but it basically is a practice of mapping the real world dimensions of an NBA court to lines and shapes in our plot. We start with the function definition:", "We now proceed with drawing individual elements. First, we create the short, corner 3-point line, which is 22 feet, and extends 14 feet into the court (remember that we will use the shot coordinates so we are using units of 1/10 of a foot).", "Now, we can connect the rest of the 3-point arc, which sits 23.75 feet away from the center of the rim. The rim itself is 6 feet inside the court \u2014 since we know that the the corner 3-point line extends 14 feet in, we can create an arc that extends vertically 15.75 feet from this point.", "Next up is the lane and the circle at the top of the key. The lane consists of two rectangles, one with a width of 16 feet and the other with a width of 12 feet, both extending 19 feet into the court. The circle at the top of the key has a radius of 6 feet.", "Let\u2019s now add the rim and backboard \u2014 the backboard is 4 feet into the court, and the center of the rim is 6 feet in, with a radius of 0.75 feet.", "Now to check if we did everything correctly, we can create a blank figure and draw our court on top. To keep everything true to scale, we set the figsize such that we have the right aspect ratio:", "To create our shot chart, we will use a plot called hexbin which is built-in with matplotlib. This function will bin all the shots based on location into hexagonally-shaped bins, and then color them based on the number of items in each bin. After drawing the court as we did above, we use the following line to create our hexbin plot. We add 60 to the y-coordinate since all the coordinates in our dataset are relative to the center of the rim, and we know that the rim sits 6 feet inside the baseline:", "gridsize \u2014 the size of the hexagonal bins (x-size, y-size)", "extent \u2014 (xmin, xmax, ymin, ymax) \u2014 we use larger values than the axis limits to ensure that hexagons go all the way to the boundaries of our draw court (hexagons outside the plot area are clipped so we won\u2019t see them)", "Our hexbin plot seems to have worked well, but there is too much contrast \u2014 even though the 3-pointer numbers are large (Curry made over 400 of them), the shots clustered close to the rim dominate the coloring. Since this shot chart is purely a guide for the eyes (we cannot easily make quantitative determinations from looking at the shot chart), we can use logarithmic binning to improve the contrast. To do this, we use the following line:", "Much better! Now the final thing we can do is add a text annotation on top of the chart with the player name and season:", "We can extend this, and plot the shot charts for the 3 MVPs since Curry\u2019s 2015\u201316 season, for our reference.", "Thank you for reading! All the analyses from this article can be found at this Github repository. I appreciate any feedback, and you can find me on Twitter and connect with me on LinkedIn for more updates and articles.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Data Scientist \u2022 Materials Scientist \u2022 Musician \u2022 Golfer"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fe5d70db45d0d&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmake-a-simple-nba-shot-chart-with-python-e5d70db45d0d&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmake-a-simple-nba-shot-chart-with-python-e5d70db45d0d&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmake-a-simple-nba-shot-chart-with-python-e5d70db45d0d&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmake-a-simple-nba-shot-chart-with-python-e5d70db45d0d&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----e5d70db45d0d--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----e5d70db45d0d--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://naveenvenkatesan.medium.com/?source=post_page-----e5d70db45d0d--------------------------------", "anchor_text": ""}, {"url": "https://naveenvenkatesan.medium.com/?source=post_page-----e5d70db45d0d--------------------------------", "anchor_text": "Naveen Venkatesan"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F7779ee5bf58d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmake-a-simple-nba-shot-chart-with-python-e5d70db45d0d&user=Naveen+Venkatesan&userId=7779ee5bf58d&source=post_page-7779ee5bf58d----e5d70db45d0d---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fe5d70db45d0d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmake-a-simple-nba-shot-chart-with-python-e5d70db45d0d&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fe5d70db45d0d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmake-a-simple-nba-shot-chart-with-python-e5d70db45d0d&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@tamarcusbrown?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Tamarcus Brown"}, {"url": "https://towardsdatascience.com/s/photos/basketball-shot?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Unsplash"}, {"url": "https://github.com/swar/nba_api", "anchor_text": "here"}, {"url": "https://github.com/bttmly/nba", "anchor_text": "here"}, {"url": "https://raw.githubusercontent.com/bttmly/nba/master/data/teams.json').text", "anchor_text": "https://raw.githubusercontent.com/bttmly/nba/master/data/teams.json').text"}, {"url": "https://raw.githubusercontent.com/bttmly/nba/master/data/players.json').text", "anchor_text": "https://raw.githubusercontent.com/bttmly/nba/master/data/players.json').text"}, {"url": "https://github.com/swar/nba_api/blob/master/docs/nba_api/stats/endpoints/shotchartdetail.md", "anchor_text": "here"}, {"url": "https://github.com/venkatesannaveen/medium-articles", "anchor_text": "Github repository"}, {"url": "https://twitter.com/naveenv_92", "anchor_text": "Twitter"}, {"url": "https://www.linkedin.com/in/naveenvenkatesan/", "anchor_text": "LinkedIn"}, {"url": "https://medium.com/tag/python?source=post_page-----e5d70db45d0d---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/data-science?source=post_page-----e5d70db45d0d---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/data-visualization?source=post_page-----e5d70db45d0d---------------data_visualization-----------------", "anchor_text": "Data Visualization"}, {"url": "https://medium.com/tag/basketball?source=post_page-----e5d70db45d0d---------------basketball-----------------", "anchor_text": "Basketball"}, {"url": "https://medium.com/tag/towards-data-science?source=post_page-----e5d70db45d0d---------------towards_data_science-----------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fe5d70db45d0d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmake-a-simple-nba-shot-chart-with-python-e5d70db45d0d&user=Naveen+Venkatesan&userId=7779ee5bf58d&source=-----e5d70db45d0d---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fe5d70db45d0d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmake-a-simple-nba-shot-chart-with-python-e5d70db45d0d&user=Naveen+Venkatesan&userId=7779ee5bf58d&source=-----e5d70db45d0d---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fe5d70db45d0d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmake-a-simple-nba-shot-chart-with-python-e5d70db45d0d&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----e5d70db45d0d--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fe5d70db45d0d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmake-a-simple-nba-shot-chart-with-python-e5d70db45d0d&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----e5d70db45d0d---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----e5d70db45d0d--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----e5d70db45d0d--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----e5d70db45d0d--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----e5d70db45d0d--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----e5d70db45d0d--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----e5d70db45d0d--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----e5d70db45d0d--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----e5d70db45d0d--------------------------------", "anchor_text": ""}, {"url": "https://naveenvenkatesan.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://naveenvenkatesan.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Naveen Venkatesan"}, {"url": "https://naveenvenkatesan.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "487 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F7779ee5bf58d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmake-a-simple-nba-shot-chart-with-python-e5d70db45d0d&user=Naveen+Venkatesan&userId=7779ee5bf58d&source=post_page-7779ee5bf58d--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fe736f4929535&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmake-a-simple-nba-shot-chart-with-python-e5d70db45d0d&newsletterV3=7779ee5bf58d&newsletterV3Id=e736f4929535&user=Naveen+Venkatesan&userId=7779ee5bf58d&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}