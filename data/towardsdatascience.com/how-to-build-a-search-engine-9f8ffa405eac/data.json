{"url": "https://towardsdatascience.com/how-to-build-a-search-engine-9f8ffa405eac", "time": 1683012561.117196, "path": "towardsdatascience.com/how-to-build-a-search-engine-9f8ffa405eac/", "webpage": {"metadata": {"title": "How to build a search engine. Creating a robust full text search in\u2026 | by Josh Taylor | Towards Data Science", "h1": "How to build a search engine", "description": "This article outlines one of the most important search algorithms used today and demonstrates how to implement it in Python in just a few lines of code. The ability to search data is something we\u2026"}, "outgoing_paragraph_urls": [{"url": "https://towardsdatascience.com/supercharging-word-vectors-be80ee5513d", "anchor_text": "here", "paragraph_index": 5}, {"url": "https://towardsdatascience.com/fuzzy-matching-at-scale-84f2bfd0c536", "anchor_text": "here", "paragraph_index": 5}, {"url": "https://trec.nist.gov/pubs/trec3/t3_proceedings.html", "anchor_text": "at the third Text Retrieval Conference", "paragraph_index": 7}, {"url": "https://colab.research.google.com/drive/1vtBleNUwj4a29vCjzFMKheaBO1Du0fwq?usp=sharing", "anchor_text": "Colab notebook", "paragraph_index": 21}, {"url": "https://www.linkedin.com/in/josh-taylor-24806975/", "anchor_text": "https://www.linkedin.com/in/josh-taylor-24806975/", "paragraph_index": 23}], "all_paragraphs": ["This article outlines one of the most important search algorithms used today and demonstrates how to implement it in Python in just a few lines of code.", "The ability to search data is something we take for granted. Modern search engines are now so sophisticated that most of our searches \u2018just work\u2019. In fact, we often only notice a search on a website or app when it does not perform. Our expectations in this space have never been higher.", "The intelligence of search engines has been increasing for a very simple reason, the value that an effective search tool can bring to a business is enormous; a key piece of intellectual property. Often a search bar is the main interface between customers and the business. A good search engine can, therefore, create a competitive advantage by delivering an improved user experience.", "MckKinsey estimated that this value, aggregated globally, amounted to $780Bn a year in 2009. This would put the value of each search performed at $0.50[1]. Of course, this value has no doubt increased substantially since 2009\u2026", "With this in mind, you would be forgiven that creating a modern search engine would be out of reach of most development teams, requiring huge resources and complex algorithms. However, somewhat surprisingly, a large number of enterprise business search engines are actually powered by very simple and intuitive rules which can be easily implemented using open source software.", "For example, Uber, Udemy Slack and Shopify (along with 3,000 other business and organisations [2]) all use Elasticsearch. This search engine was powered by incredibly simple term-frequency, inverse document frequency (or tf-idf) word scores up until 2016.[3] (For more details on what this is, I have written about tf-idf here and here).", "After this point, it switched to the more sophisticated (but still very simple) BM25 which is still used today. This is also the algorithm implemented within Azure Cognitive Search[4].", "So what is BM25? It stands for \u2018Best match 25\u2019 (the other 24 attempts were clearly not very successful). It was released in 1994 at the third Text Retrieval Conference, yes there really was a conference dedicated to text retrieval\u2026", "It is probably best thought of as tf-idf \u2018on steroids\u2019, implementing two key refinements:", "These refinements also introduce two hyper-parameters to adjust the impact of these items on the ranking function. \u2018k\u2019 to tune the impact of term saturation and \u2018b\u2019 to tune document length.", "Bringing this all together, BM25 is calculated as:", "Implementing BM25 is incredibly simple. Thanks to the rank-bm25 Python library this can be achieved in a handful of lines of code.", "In our example, we are going to create a search engine to query contract notices that have been published by UK public sector organisations.", "Our starting point is a dateset which contains the title of a contract notice, the description along with the link to the notice itself. To keep things simple, we have combined the title and description together to create the \u2018text\u2019 column in the dataset. It is this column that we will use to search. There are 50,000 documents which we want to search across:", "A link to the data and the code can be found at the bottom of this article.", "The first step in this exercise is to extract all the words within the \u2018text\u2019 column of this dataset to create a \u2018list of lists\u2019 consisting of each document and the words within them. This is known as tokenization and can be handled by the excellent spaCy library:", "Building a BM25 index can be done in a single line of code:", "Querying this index just requires a search input which has also been tokenized:", "This returns the following top 3 results that are clearly highly relevant to the search query of \u2018Flood Defence\u2019:", "We could fine-tune the values for \u2018k\u2019 and \u2018b\u2019 based on the expected preferences of the users performing the searches, however the defaults of k=1.5 and b=0.75 seem to work well here.", "Hopefully this example highlights how simple it is to implement a robust full text search in Python. This could easily be used to power a simple web app or a smart document search tool. There is also significant scope to improve the performance of this further , this is covered in the follow up post below!", "The code and data to this article can be found in this Colab notebook.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "I am a specialist in producing insights through advanced analytics, machine learning and visualisation. https://www.linkedin.com/in/josh-taylor-24806975/"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F9f8ffa405eac&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-build-a-search-engine-9f8ffa405eac&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-build-a-search-engine-9f8ffa405eac&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-build-a-search-engine-9f8ffa405eac&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-build-a-search-engine-9f8ffa405eac&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----9f8ffa405eac--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----9f8ffa405eac--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@thejoshtaylor?source=post_page-----9f8ffa405eac--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@thejoshtaylor?source=post_page-----9f8ffa405eac--------------------------------", "anchor_text": "Josh Taylor"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fb5b5ec923fa3&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-build-a-search-engine-9f8ffa405eac&user=Josh+Taylor&userId=b5b5ec923fa3&source=post_page-b5b5ec923fa3----9f8ffa405eac---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F9f8ffa405eac&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-build-a-search-engine-9f8ffa405eac&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F9f8ffa405eac&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-build-a-search-engine-9f8ffa405eac&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://towardsdatascience.com/supercharging-word-vectors-be80ee5513d", "anchor_text": "here"}, {"url": "https://towardsdatascience.com/fuzzy-matching-at-scale-84f2bfd0c536", "anchor_text": "here"}, {"url": "https://trec.nist.gov/pubs/trec3/t3_proceedings.html", "anchor_text": "at the third Text Retrieval Conference"}, {"url": "https://towardsdatascience.com/how-to-build-a-smart-search-engine-a86fca0d0795", "anchor_text": "How to build a smart search engineCreating an intelligent search service in Pythontowardsdatascience.com"}, {"url": "https://colab.research.google.com/drive/1vtBleNUwj4a29vCjzFMKheaBO1Du0fwq?usp=sharing", "anchor_text": "Colab notebook"}, {"url": "https://www.mckinsey.com/~/media/mckinsey/dotcom/client_service/High%20Tech/PDFs/Impact_of_Internet_technologies_search_final2.aspx", "anchor_text": "https://www.mckinsey.com/~/media/mckinsey/dotcom/client_service/High%20Tech/PDFs/Impact_of_Internet_technologies_search_final2.aspx"}, {"url": "https://stackshare.io/elasticsearch#:~:text=Who%20uses%20Elasticsearch%3F&text=3034%20companies%20reportedly%20use%20Elasticsearch,Uber%2C%20Udemy%2C%20and%20Shopify.", "anchor_text": "According to StackShare, August 2020."}, {"url": "https://www.elastic.co/blog/elasticsearch-5-0-0-released", "anchor_text": "https://www.elastic.co/blog/elasticsearch-5-0-0-released"}, {"url": "https://docs.microsoft.com/en-us/azure/search/index-ranking-similarity", "anchor_text": "https://docs.microsoft.com/en-us/azure/search/index-ranking-similarity"}, {"url": "https://medium.com/tag/search-engines?source=post_page-----9f8ffa405eac---------------search_engines-----------------", "anchor_text": "Search Engines"}, {"url": "https://medium.com/tag/python?source=post_page-----9f8ffa405eac---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/data-science?source=post_page-----9f8ffa405eac---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/towards-data-science?source=post_page-----9f8ffa405eac---------------towards_data_science-----------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/tag/tf-idf?source=post_page-----9f8ffa405eac---------------tf_idf-----------------", "anchor_text": "Tf Idf"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F9f8ffa405eac&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-build-a-search-engine-9f8ffa405eac&user=Josh+Taylor&userId=b5b5ec923fa3&source=-----9f8ffa405eac---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F9f8ffa405eac&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-build-a-search-engine-9f8ffa405eac&user=Josh+Taylor&userId=b5b5ec923fa3&source=-----9f8ffa405eac---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F9f8ffa405eac&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-build-a-search-engine-9f8ffa405eac&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----9f8ffa405eac--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F9f8ffa405eac&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-build-a-search-engine-9f8ffa405eac&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----9f8ffa405eac---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----9f8ffa405eac--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----9f8ffa405eac--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----9f8ffa405eac--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----9f8ffa405eac--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----9f8ffa405eac--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----9f8ffa405eac--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----9f8ffa405eac--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----9f8ffa405eac--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@thejoshtaylor?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@thejoshtaylor?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Josh Taylor"}, {"url": "https://medium.com/@thejoshtaylor/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "852 Followers"}, {"url": "https://www.linkedin.com/in/josh-taylor-24806975/", "anchor_text": "https://www.linkedin.com/in/josh-taylor-24806975/"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fb5b5ec923fa3&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-build-a-search-engine-9f8ffa405eac&user=Josh+Taylor&userId=b5b5ec923fa3&source=post_page-b5b5ec923fa3--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F826db04da2c9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-build-a-search-engine-9f8ffa405eac&newsletterV3=b5b5ec923fa3&newsletterV3Id=826db04da2c9&user=Josh+Taylor&userId=b5b5ec923fa3&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}