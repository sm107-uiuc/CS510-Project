{"url": "https://towardsdatascience.com/exploring-the-sp500-with-r-part-2-asset-analysis-657d3c1caf60", "time": 1682995667.431241, "path": "towardsdatascience.com/exploring-the-sp500-with-r-part-2-asset-analysis-657d3c1caf60/", "webpage": {"metadata": {"title": "Scraping and Exploring The SP500 With R Part 2 | by Bryant Crocker | Towards Data Science", "h1": "Scraping and Exploring The SP500 With R Part 2", "description": "In the first part of this blog post, I walked through scraping a list of SP500 symbols from wikipedia and using that information to pull OHLC (Open, High Low, Close) data for all SP500 tickers from\u2026"}, "outgoing_paragraph_urls": [{"url": "https://medium.com/@Psr1/exploring-the-sp500-with-r-part-1-scraping-data-acquisition-and-functional-programming-56c9498f38e8", "anchor_text": "first part of this blog post,", "paragraph_index": 0}, {"url": "https://www.ccn.com/dow-surges-toward-record-high-after-dowdupont-spinoff", "anchor_text": "Dow INC has only been traded as an independent chemical company since the end of March", "paragraph_index": 10}, {"url": "https://en.wikipedia.org/wiki/Volatility_(finance)", "anchor_text": "Wikipedia", "paragraph_index": 13}, {"url": "https://www.rollingstone.com/politics/politics-news/protesters-flock-to-fox-news-headquarters-to-scare-off-advertisers-807788/", "anchor_text": "March 13th", "paragraph_index": 24}, {"url": "https://finance.yahoo.com/m/380e2aef-0a4c-3fc3-ad63-aab81c74f8cc/twdc-holdco-613-corp.-.html", "anchor_text": "incorrectly report that FOX and FOXA were down 22%", "paragraph_index": 26}, {"url": "https://towardsdatascience.com/questions-96667b06af5", "anchor_text": "rules and guidelines", "paragraph_index": 32}, {"url": "https://towardsdatascience.com/readers-terms-b5d780a700a4", "anchor_text": "Reader Terms", "paragraph_index": 32}], "all_paragraphs": ["In the first part of this blog post, I walked through scraping a list of SP500 symbols from wikipedia and using that information to pull OHLC (Open, High Low, Close) data for all SP500 tickers from the yahoo finance API.", "In the second part of this blog post, I will walk through answering my original question:", "Which SP500 assets had the highest average return over the last 3 months?", "In part 1, we created tickers_df, a dataframe with all 505 SP500 tickers.", "lets take a quick look again at tickers_df:", "This structure makes the data easy to filter and aggregate, and makes it easier to scale. We can easily extract and visualize one of the assets raw prices over time with just a few lines of code:", "We can look at raw price data all day, but it is hard to compare assets that have drastically different prices. Typically, when we analyze assets, we look at the percentage change in prices or returns. Using the tidyquant package, it is extremely easy to calculate returns. In the following snippet, I convert each assets raw adjusted closing prices to returns. This is done using the tq_transmute() function.", "Let\u2019s go ahead and compute the average daily return by security and then sort by this, to answer my question. I will also compute the standard deviation of the returns. In quantitative finance, the standard deviation of returns is generally referred to as volatility.", "From this table we can quickly see that Dow Inc, the famous American chemical company, has had the highest average daily return over the last 3 months. This table answers my original question.", "Let\u2019s visualize this table as a bar graph using ggplot:", "Wow Dow Inc.\u2019s average return is much higher than the rest of the market. There may be something big I\u2019m missing here. A quick google search tells me there\u2019s an obvious reason for this. Dow INC has only been traded as an independent chemical company since the end of March, when it formally split from Dowdupont. The average return is likely only this high because it is a newly traded asset and we don\u2019t have many observations.", "Looking at the other top performers I notice a few things:", "Typically when you answer a question with data, more questions arise. I already know what stocks had the highest return on average over the last few months, but what about volatility? Volatility is one of the most important investment metrics for a security or portfolio.", "According to Wikipedia Investors care about volatility for at least eight reasons:", "Typically, younger investors can take on more volatility, while investors closer to retirement want to be careful about volatility.", "Using ggplot2 we can easily plot the relationship between average return and volatility of returns. I will create a scatter plot, using the asset tickers rather than points in the plot.", "This plot gives a much better idea of what\u2019s happening in the market than our previous bar graph.", "A few tickers really stand out compared to the rest of the market", "Lets highlight Fox Corporation\u2019s tickers on the graph:", "Wow! look at that! I walked into this analysis interested in which companies were performing the best. But, at the end, what really stood out is the Fox Corporation which, appears to be performing quite weak relative to the rest of the market over the last 3 months.", "The Fox Corporation, especially their news station Faux News (did I spell that right?), has been rather controversial over the years. The network takes a unique perspective on many issues and features much more opinion based shows than the average news network.", "Lets get a little more price data for the Fox Corporation tickers:", "Lets zoom in on recent prices:", "We can see that the price drop happened in early March. There was an initial large drop on March 13, followed by a brief rebound. Following the rebound the price, dropped and has continued trending downward.", "Let\u2019s turn to Google to figure out what happened on March 13. A quick Google search tells me that Media Matters organized a large protest against Fox Corporation on March 13th.", "Following the March 13th drop, on March 19, 2019, Fox Corp began trading independently of 21st Century Fox. This made the price of the asset radically drop. This did not though represent weak performance by the asset, as one would initially think.", "What actually happened is that Fox corporation began trading under 21st Century Fox\u2019s tickers, 21st century Fox is now trading under the tickers TFCF and TFCFA. This led many news outlets to incorrectly report that FOX and FOXA were down 22%.", "Finishing Up and Producing a Final Plot:", "Alright now we want to share what we have found in an interactive plot, so that none technical users can have a fun, informative plot that they can interact with.", "R has a lot of great frameworks for interactive data visualization. My Personal favorite interactive graphing library in R is the plotly library. Plotly is an interactive javascript library with APIs for many different programming languages. I am more familiar with the python API (and the python language in general).", "With very similar code to as used in ggplot2 we can produce a beautiful interactive plot. I will embed the plot in this article.", "To recap, in this two part series we:", "Note from Towards Data Science\u2019s editors: While we allow independent authors to publish articles in accordance with our rules and guidelines, we do not endorse each author\u2019s contribution. You should not rely on an author\u2019s works without seeking professional advice. See our Reader Terms for details.", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F657d3c1caf60&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fexploring-the-sp500-with-r-part-2-asset-analysis-657d3c1caf60&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fexploring-the-sp500-with-r-part-2-asset-analysis-657d3c1caf60&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fexploring-the-sp500-with-r-part-2-asset-analysis-657d3c1caf60&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fexploring-the-sp500-with-r-part-2-asset-analysis-657d3c1caf60&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----657d3c1caf60--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----657d3c1caf60--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@Psr1?source=post_page-----657d3c1caf60--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@Psr1?source=post_page-----657d3c1caf60--------------------------------", "anchor_text": "Bryant Crocker"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F93a17102968d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fexploring-the-sp500-with-r-part-2-asset-analysis-657d3c1caf60&user=Bryant+Crocker&userId=93a17102968d&source=post_page-93a17102968d----657d3c1caf60---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F657d3c1caf60&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fexploring-the-sp500-with-r-part-2-asset-analysis-657d3c1caf60&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F657d3c1caf60&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fexploring-the-sp500-with-r-part-2-asset-analysis-657d3c1caf60&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/photos/uJhgEXPqSPk", "anchor_text": "https://unsplash.com/photos/uJhgEXPqSPk"}, {"url": "https://medium.com/@Psr1/exploring-the-sp500-with-r-part-1-scraping-data-acquisition-and-functional-programming-56c9498f38e8", "anchor_text": "first part of this blog post,"}, {"url": "https://www.ccn.com/dow-surges-toward-record-high-after-dowdupont-spinoff", "anchor_text": "Dow INC has only been traded as an independent chemical company since the end of March"}, {"url": "https://www.cnbc.com/2018/02/06/chipotle-has-a-plan-to-regain-customers-it-keeps-losing-to-food-safety-issues.html", "anchor_text": "food poisoning"}, {"url": "https://en.wikipedia.org/wiki/Volatility_(finance)", "anchor_text": "Wikipedia"}, {"url": "https://en.wikipedia.org/wiki/Compound_annual_growth_rate", "anchor_text": "compound annual growth rate"}, {"url": "https://en.wikipedia.org/wiki/Option_(finance)", "anchor_text": "options"}, {"url": "https://en.wikipedia.org/wiki/Black%E2%80%93Scholes_model", "anchor_text": "Black\u2013Scholes model"}, {"url": "https://www.rollingstone.com/politics/politics-news/protesters-flock-to-fox-news-headquarters-to-scare-off-advertisers-807788/", "anchor_text": "March 13th"}, {"url": "https://finance.yahoo.com/m/380e2aef-0a4c-3fc3-ad63-aab81c74f8cc/twdc-holdco-613-corp.-.html", "anchor_text": "incorrectly report that FOX and FOXA were down 22%"}, {"url": "https://towardsdatascience.com/questions-96667b06af5", "anchor_text": "rules and guidelines"}, {"url": "https://towardsdatascience.com/readers-terms-b5d780a700a4", "anchor_text": "Reader Terms"}, {"url": "https://medium.com/tag/data-visualization?source=post_page-----657d3c1caf60---------------data_visualization-----------------", "anchor_text": "Data Visualization"}, {"url": "https://medium.com/tag/data-science?source=post_page-----657d3c1caf60---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/asset-management?source=post_page-----657d3c1caf60---------------asset_management-----------------", "anchor_text": "Asset Management"}, {"url": "https://medium.com/tag/tidyverse?source=post_page-----657d3c1caf60---------------tidyverse-----------------", "anchor_text": "Tidyverse"}, {"url": "https://medium.com/tag/r-programming?source=post_page-----657d3c1caf60---------------r_programming-----------------", "anchor_text": "R Programming"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F657d3c1caf60&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fexploring-the-sp500-with-r-part-2-asset-analysis-657d3c1caf60&user=Bryant+Crocker&userId=93a17102968d&source=-----657d3c1caf60---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F657d3c1caf60&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fexploring-the-sp500-with-r-part-2-asset-analysis-657d3c1caf60&user=Bryant+Crocker&userId=93a17102968d&source=-----657d3c1caf60---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F657d3c1caf60&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fexploring-the-sp500-with-r-part-2-asset-analysis-657d3c1caf60&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----657d3c1caf60--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F657d3c1caf60&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fexploring-the-sp500-with-r-part-2-asset-analysis-657d3c1caf60&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----657d3c1caf60---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----657d3c1caf60--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----657d3c1caf60--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----657d3c1caf60--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----657d3c1caf60--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----657d3c1caf60--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----657d3c1caf60--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----657d3c1caf60--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----657d3c1caf60--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@Psr1?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@Psr1?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Bryant Crocker"}, {"url": "https://medium.com/@Psr1/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "199 Followers"}, {"url": "https://www.linkedin.com/in/bcrocke1/", "anchor_text": "https://www.linkedin.com/in/bcrocke1/"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F93a17102968d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fexploring-the-sp500-with-r-part-2-asset-analysis-657d3c1caf60&user=Bryant+Crocker&userId=93a17102968d&source=post_page-93a17102968d--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F907e19d94c65&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fexploring-the-sp500-with-r-part-2-asset-analysis-657d3c1caf60&newsletterV3=93a17102968d&newsletterV3Id=907e19d94c65&user=Bryant+Crocker&userId=93a17102968d&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}