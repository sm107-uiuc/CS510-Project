{"url": "https://towardsdatascience.com/scraping-us-census-data-via-cenpy-9aeab12c877e", "time": 1682994815.209105, "path": "towardsdatascience.com/scraping-us-census-data-via-cenpy-9aeab12c877e/", "webpage": {"metadata": {"title": "US Census Data via CenPy. Wrangling Census Data with APIs | by Ashley White | Towards Data Science", "h1": "US Census Data via CenPy", "description": "After taking on a team project to examine the economic impact (via wage loss) of natural disasters on a specific locale, our hypothesis was to use a Seasonal Auto Regressive Integrated Moving Average\u2026"}, "outgoing_paragraph_urls": [{"url": "https://machinelearningmastery.com/sarima-for-time-series-forecasting-in-python/", "anchor_text": "Seasonal Auto Regressive Integrated Moving Average (SARIMA)", "paragraph_index": 0}, {"url": "https://github.com/ljwolf/cenpy", "anchor_text": "GitHub", "paragraph_index": 2}, {"url": "https://nbviewer.jupyter.org/github/ljwolf/cenpy/blob/master/demo.ipynb", "anchor_text": "introductory notebook", "paragraph_index": 2}, {"url": "https://www.census.gov/data/developers/data-sets/qwi.html", "anchor_text": "Quarterly Work Indicators", "paragraph_index": 5}, {"url": "http://code.activestate.com/recipes/577775-state-fips-codes-dict/", "anchor_text": "state FIPS codes dictionary", "paragraph_index": 9}], "all_paragraphs": ["After taking on a team project to examine the economic impact (via wage loss) of natural disasters on a specific locale, our hypothesis was to use a Seasonal Auto Regressive Integrated Moving Average (SARIMA) forecast to determine what historical employment, unemployment, and wage levels would have been sans a natural disaster. By comparing our predictions to the actual effects post-disaster, we could approximate the economic impact of that event.", "Given the time crunch, I immediately panicked thinking about the possibility of having to navigate a clunky SQL interface or manually download disparate csvs for each state to pull the information I needed. Furthermore, I was\u2019t even quite sure of the metrics or time frame hat I would ultimately need. With all this uncertainty, I figured my best option would be to leverage an API or webscraper to get the data I would need. However, my API & BeautifulSoup skills still need some work, so I began to search for an alternative.", "Fortunately, the Python community is full of creative developers who have created libraries and wrappers to more easily interact with data like CenPy. According to the creators, \u201cCenPy (sen - pie) is a package that exposes APIs from the US Census Bureau and makes it easy to pull down and work with Census data in Pandas.\u201d While I will explore a couple of features that I used, I would encourage you all to check out their GitHub and introductory notebook for more information.", "The only imports I used for this exercise were CenPy and Pandas:", "By calling explorer.available, you can access a list of the identifiers of all the APIs that cenpy knows about. Fortunately, I knew which API/data series I would want to access, but if you wanted to see all the available APIs you can do so via the dictionary output or convert to a Pandas dataframe for easier readability.", "code is important here, because this will allow you to specify to which database you\u2019d like to establish a connection. The connection class allows you to construct a query string and make requests from the Census server. The result is then parsed into JSON and returned. I began my initial queries with the Quarterly Work Indicators (QWI), a set of 32 economic indicators including employment, job creation/destruction, wages, hires, and other measures of employment flows.", "According to the Census API documentation, there are a couple of parameters / variables requirements you must use when calling their API: Endpoint, Indicator, Geography, and Time. Default values for other categorical variables are assumed if not specified. Here is an example of the minimum requirements for a fully-formed basic query:", "I started by setting some default parameters:", "I wanted to construct a loop that would allow me to iterate over all states and concatenate all the results into one master dataframe. I started by creating a \u2018master\u2019 dataframe upon which I could append the other states, versus creating a blank data frame to ensure the column order would match and the new queries would join appropriately.", "I then leveraged this state FIPS codes dictionary to create a list of state codes over which to iterate:", "Finally, I created a for loop to iterate over all state codes and joined the results with my existing master dataframe:", "Please note you can include up to 50 variables in a single API query and can make up to 500 queries per IP address per day. More than 500 queries per IP address per day requires that you register for a Census key. That key will be part of your data request URL string that you specify with you establish connection.", "I found that my query of all the counties of all the states exceeded the overall IP limit, even after using my API key, and it timed me out of the system. This forced me to split up my query into two parts over two days.", "I hope this has been a helpful primer for you, and that you are able to explore all the possibilities of CenPy!", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Single black female with attention to detail"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F9aeab12c877e&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fscraping-us-census-data-via-cenpy-9aeab12c877e&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fscraping-us-census-data-via-cenpy-9aeab12c877e&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fscraping-us-census-data-via-cenpy-9aeab12c877e&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fscraping-us-census-data-via-cenpy-9aeab12c877e&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----9aeab12c877e--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----9aeab12c877e--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@mswhitetoyou?source=post_page-----9aeab12c877e--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@mswhitetoyou?source=post_page-----9aeab12c877e--------------------------------", "anchor_text": "Ashley White"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fe4a86934f2c7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fscraping-us-census-data-via-cenpy-9aeab12c877e&user=Ashley+White&userId=e4a86934f2c7&source=post_page-e4a86934f2c7----9aeab12c877e---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F9aeab12c877e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fscraping-us-census-data-via-cenpy-9aeab12c877e&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F9aeab12c877e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fscraping-us-census-data-via-cenpy-9aeab12c877e&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://machinelearningmastery.com/sarima-for-time-series-forecasting-in-python/", "anchor_text": "Seasonal Auto Regressive Integrated Moving Average (SARIMA)"}, {"url": "https://github.com/ljwolf/cenpy", "anchor_text": "GitHub"}, {"url": "https://nbviewer.jupyter.org/github/ljwolf/cenpy/blob/master/demo.ipynb", "anchor_text": "introductory notebook"}, {"url": "https://www.census.gov/data/developers/data-sets/qwi.html", "anchor_text": "Quarterly Work Indicators"}, {"url": "http://code.activestate.com/recipes/577775-state-fips-codes-dict/", "anchor_text": "state FIPS codes dictionary"}, {"url": "https://medium.com/tag/data-science?source=post_page-----9aeab12c877e---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/census?source=post_page-----9aeab12c877e---------------census-----------------", "anchor_text": "Census"}, {"url": "https://medium.com/tag/timeseries?source=post_page-----9aeab12c877e---------------timeseries-----------------", "anchor_text": "Timeseries"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F9aeab12c877e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fscraping-us-census-data-via-cenpy-9aeab12c877e&user=Ashley+White&userId=e4a86934f2c7&source=-----9aeab12c877e---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F9aeab12c877e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fscraping-us-census-data-via-cenpy-9aeab12c877e&user=Ashley+White&userId=e4a86934f2c7&source=-----9aeab12c877e---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F9aeab12c877e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fscraping-us-census-data-via-cenpy-9aeab12c877e&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----9aeab12c877e--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F9aeab12c877e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fscraping-us-census-data-via-cenpy-9aeab12c877e&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----9aeab12c877e---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----9aeab12c877e--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----9aeab12c877e--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----9aeab12c877e--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----9aeab12c877e--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----9aeab12c877e--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----9aeab12c877e--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----9aeab12c877e--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----9aeab12c877e--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@mswhitetoyou?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@mswhitetoyou?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Ashley White"}, {"url": "https://medium.com/@mswhitetoyou/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "120 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fe4a86934f2c7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fscraping-us-census-data-via-cenpy-9aeab12c877e&user=Ashley+White&userId=e4a86934f2c7&source=post_page-e4a86934f2c7--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fusers%2Fe4a86934f2c7%2Flazily-enable-writer-subscription&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fscraping-us-census-data-via-cenpy-9aeab12c877e&user=Ashley+White&userId=e4a86934f2c7&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}