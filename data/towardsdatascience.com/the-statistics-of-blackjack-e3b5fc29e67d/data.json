{"url": "https://towardsdatascience.com/the-statistics-of-blackjack-e3b5fc29e67d", "time": 1683011651.285247, "path": "towardsdatascience.com/the-statistics-of-blackjack-e3b5fc29e67d/", "webpage": {"metadata": {"title": "The statistics of Blackjack & optimal strategy | Towards Data Science", "h1": "The statistics of Blackjack", "description": "Exposing Blackjack odds and optimal strategy through data analytics with R"}, "outgoing_paragraph_urls": [{"url": "https://github.com/ArnaudBu/blackjack_simulation", "anchor_text": "Github", "paragraph_index": 3}, {"url": "https://github.com/ArnaudBu/blackjack_simulation/blob/master/run.R", "anchor_text": "run.R", "paragraph_index": 5}, {"url": "https://github.com/ArnaudBu/blackjack_simulation/blob/master/analysis.R", "anchor_text": "analysis.R", "paragraph_index": 7}, {"url": "https://github.com/ArnaudBu/blackjack_simulation/blob/master/analysis.R", "anchor_text": "analysis.R", "paragraph_index": 21}, {"url": "https://github.com/ArnaudBu/blackjack_simulation/blob/master/test_strategy.R", "anchor_text": "test_strategy.R", "paragraph_index": 30}], "all_paragraphs": ["Considered as the casino game with the lowest edge for the house, gamblers are supposed to have more chances at winning at Blackjack than at any other game. But what are the odds? And how do we find the optimal strategy to apply?", "Let\u2019s find out through a simple statistical analysis!", "This article exploits a simulation tool for Blackjack built with R to deduce an optimal strategy and the associated probabilities.", "All codes are available on Github.", "The rules used for the simulations are:", "The script run.R simulates Blackjack games (based on 10,000,000 moves with 8 decks and 3 people playing) to generate a database that will be analyzed with the data.table package.", "The dataset produced follows the format below, with each line representing a move in a round (game_id) with the expected earning in case the player hits, stands, or doubles. The hard_if_hit value indicates if the hand is hard after the move and is necessary for the optimal strategy definition.", "All analyses performed are available in the analysis.R script.", "The most basic strategy one could think about is standing once the score reaches a certain threshold.", "In terms of code, we just need to filter the dataset to retrieve one line by game_id that corresponds to the first score that exceeds the threshold, or the first score_if_hit that does so if the first condition is not met.", "Applying this strategy to the dataset for each threshold from 2 to 21, we get the following results after aggregation.", "The graph above represents the expected earnings for each round (in percent of the gambled amount) with the distribution of outcomes.", "The optimal strategy uses a threshold of 15, for an expected loss of 8.57 % of the gambled amount at each round. Those odds would obviously lead the game to end prematurely for most players.", "It is, fortunately, possible to design a strategy capable of improving these odds by taking into account the dealer\u2019s score and the soft aces in the player\u2019s hand in the decision process.", "To find the optimal strategy, we first need a metric for optimization. We will use the expected earnings after a move.", "Computing this metric for a given hand (score & if the hand is soft), requires knowing:", "We thus have a recursive problem to handle, since we first need to estimate the possible later moves of the round, dealer\u2019s score being constant. This requires implementing a loop going backward on scores. Nevertheless, the possibility to have a hard or soft hand implies to also consider this when ordering the steps.", "The following chart describes the transitions between hands.", "If the player has a hard hand with a score higher than 10, he can only get a hard hand with a higher score when hitting. A soft hand can transform into a soft hand with a higher score or a hard hand with a score higher than 10. Finally, a hard hand with a score lower than 9 can give a soft hand or a hard hand with a higher score. This means that we need to sequence our backward loop with three pivotal steps.", "This will ensure that, at each step, all the future possibilities will have been treated.", "For each category, we loop backward on possible player\u2019s scores and compute expected earnings based on weighted earnings for all future possibilities (that were estimated in the prior steps).", "The code is available in analysis.R.", "Let us now have a look at the computed strategy for both hard and soft hands.", "As expected, it is interesting to double on a score of 9, 10, or 11 because of the high probability to draw a card whose value is 10 (4 chances out of 13). The threshold for hitting seems to increase for a dealer\u2019s score above 7, because of the higher probability for the dealer to get a score of 17 and standing, which makes it necessary to hit to beat him.", "The soft 11 is only possible after splitting and corresponds to a single ace. Thanks to the possibility to not bust after a hit, we can see that the strategy for a soft hand is much more aggressive than the one for a hard hand.", "We can then estimate the cases where splitting is optimal by comparing the expected earnings for a score with the two same cards and the expected earnings for half the score, all other things being equal. If the first value is inferior to twice the second (we bet two hands after splitting), then splitting is the move whose expected earnings are higher, else we can refer to the previous charts.", "The optimal split situations are thus:", "It is always interesting to split aces, because of the higher probability to get a 10. On the contrary, splitting 5s is never recommended, also because of the probability to get a 10 or an ace.", "The case with a hand of two 9s against a dealer\u2019s score of 7 is interesting because the decision to stand seems isolated. It is again because of the impossibility for the dealer to exceed 18 with his next move, putting him either in a position where he has to stand (and draw in the best case) or a situation where he needs to hit with a high risk of busting.", "NB: strategy charts found on the web can be different on a few decisions. Looking at the expected earnings on the strategy file above, we can see that, in those cases, computed earnings are very close for two different decisions, which shows a convergence issue that can be solved with more simulations.", "Testing this strategy against the simulations (with the test_strategy.R script), we can estimate the average accumulated earnings after a certain number of rounds, along with some quantile intervals.", "We can thus estimate that after 1,000 rounds, the average loss is $8.34 considering $1 bets. This means that the estimated house edge against this strategy is 0.834%, which is relatively low compared to the 2.7% of roulette.", "Considering that a round of Blackjack lasts on average 1 minute, the player will lose after 3 hours on average $1.15, betting $1 at a time. The cumulative 5% quantile for loss is $26.5. So, if you arrive at the casino with 26 times your betting amount, you have less than 5% of chances of going broke by the end of your three-hour session.", "But what about the possibility to count cards? With a house edge that small and the importance of 10s in this game, it may be possible to shift the edge from the casino to the player with this technique. Movies say yes, but is the reality up to the fiction? This sure would be an interesting topic for a future post.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Actuary, Wannabe Philosopher & Data Science Enthousiast"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fe3b5fc29e67d&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-statistics-of-blackjack-e3b5fc29e67d&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-statistics-of-blackjack-e3b5fc29e67d&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-statistics-of-blackjack-e3b5fc29e67d&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-statistics-of-blackjack-e3b5fc29e67d&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----e3b5fc29e67d--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----e3b5fc29e67d--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://arnaudbuzzi.medium.com/?source=post_page-----e3b5fc29e67d--------------------------------", "anchor_text": ""}, {"url": "https://arnaudbuzzi.medium.com/?source=post_page-----e3b5fc29e67d--------------------------------", "anchor_text": "Arnaud Buzzi"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F43f2716c5d57&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-statistics-of-blackjack-e3b5fc29e67d&user=Arnaud+Buzzi&userId=43f2716c5d57&source=post_page-43f2716c5d57----e3b5fc29e67d---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fe3b5fc29e67d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-statistics-of-blackjack-e3b5fc29e67d&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fe3b5fc29e67d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-statistics-of-blackjack-e3b5fc29e67d&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@sumekler?utm_source=medium&utm_medium=referral", "anchor_text": "Jaros\u0142aw Kwocza\u0142a"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://github.com/ArnaudBu/blackjack_simulation", "anchor_text": "Github"}, {"url": "https://github.com/arnaudbu/blackjack_simulation", "anchor_text": "ArnaudBu/blackjack_simulationSimulations of blackjack games. Contribute to ArnaudBu/blackjack_simulation development by creating an account on\u2026github.com"}, {"url": "https://github.com/ArnaudBu/blackjack_simulation/blob/master/run.R", "anchor_text": "run.R"}, {"url": "https://github.com/ArnaudBu/blackjack_simulation/blob/master/analysis.R", "anchor_text": "analysis.R"}, {"url": "https://github.com/ArnaudBu/blackjack_simulation/blob/master/analysis.R", "anchor_text": "analysis.R"}, {"url": "https://gist.github.com/ArnaudBu/797094581de3f6703a6c12b994da18c6", "anchor_text": "https://gist.github.com/ArnaudBu/797094581de3f6703a6c12b994da18c6"}, {"url": "https://github.com/ArnaudBu/blackjack_simulation/blob/master/test_strategy.R", "anchor_text": "test_strategy.R"}, {"url": "https://medium.com/tag/r?source=post_page-----e3b5fc29e67d---------------r-----------------", "anchor_text": "R"}, {"url": "https://medium.com/tag/data-analytics?source=post_page-----e3b5fc29e67d---------------data_analytics-----------------", "anchor_text": "Data Analytics"}, {"url": "https://medium.com/tag/blackjack?source=post_page-----e3b5fc29e67d---------------blackjack-----------------", "anchor_text": "Blackjack"}, {"url": "https://medium.com/tag/simulation?source=post_page-----e3b5fc29e67d---------------simulation-----------------", "anchor_text": "Simulation"}, {"url": "https://medium.com/tag/data-visualization?source=post_page-----e3b5fc29e67d---------------data_visualization-----------------", "anchor_text": "Data Visualization"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fe3b5fc29e67d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-statistics-of-blackjack-e3b5fc29e67d&user=Arnaud+Buzzi&userId=43f2716c5d57&source=-----e3b5fc29e67d---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fe3b5fc29e67d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-statistics-of-blackjack-e3b5fc29e67d&user=Arnaud+Buzzi&userId=43f2716c5d57&source=-----e3b5fc29e67d---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fe3b5fc29e67d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-statistics-of-blackjack-e3b5fc29e67d&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----e3b5fc29e67d--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fe3b5fc29e67d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-statistics-of-blackjack-e3b5fc29e67d&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----e3b5fc29e67d---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----e3b5fc29e67d--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----e3b5fc29e67d--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----e3b5fc29e67d--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----e3b5fc29e67d--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----e3b5fc29e67d--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----e3b5fc29e67d--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----e3b5fc29e67d--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----e3b5fc29e67d--------------------------------", "anchor_text": ""}, {"url": "https://arnaudbuzzi.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://arnaudbuzzi.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Arnaud Buzzi"}, {"url": "https://arnaudbuzzi.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "25 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F43f2716c5d57&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-statistics-of-blackjack-e3b5fc29e67d&user=Arnaud+Buzzi&userId=43f2716c5d57&source=post_page-43f2716c5d57--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fusers%2F43f2716c5d57%2Flazily-enable-writer-subscription&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-statistics-of-blackjack-e3b5fc29e67d&user=Arnaud+Buzzi&userId=43f2716c5d57&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}