{"url": "https://towardsdatascience.com/functions-in-r-3648eec4bcf9", "time": 1683014289.1160011, "path": "towardsdatascience.com/functions-in-r-3648eec4bcf9/", "webpage": {"metadata": {"title": "Creating and Using R Functions. It\u2019s a great thing to learn for your\u2026 | by Peter Hui | Towards Data Science", "h1": "Creating and Using R Functions", "description": "Working with R functions. Functions with basics."}, "outgoing_paragraph_urls": [{"url": "https://towardsdatascience.com/functions-in-power-bi-56e9e11e4669?source=friends_link&sk=32f65f6e5196dbd96ed43a53584ad2fc", "anchor_text": "here it is.", "paragraph_index": 3}], "all_paragraphs": ["Have you ever experienced this situation below?", "I always seem to run into it. Maybe it\u2019s just my luck\u2026", "I love functions. I love building them, working with them, and creating them. There is nothing like someone saying a task will take a week but really, you know it can probably be done in 10 mins.", "Functions are great. Like little robots, they can save you from errors and repetitive work. If you haven\u2019t checked out my article about using functions in Power BI, here it is. It will give you basic knowledge of working with functions and it will very likely save you tons of time if you work with flat files.", "A lot of what we use are already functions. We just don\u2019t really think about it.", "Take the mean function in R \u2014 it takes the function name and then the inputs. so mean() is a function. Much like in Power BI \u2014 AVERAGE([Column Name]) is a function.", "In this article, I hope I can show you how to do some work with functions in R.", "I mostly work with a lot of flat files (It would be great if one day I can connect to the data warehouse, but that\u2019s another story).", "I want to perform a set of transformations to a set of flat files in R. How do we do that?", "It\u2019s not hard. It\u2019s very much like how we created Power BI functions. The key is we need to perform a set of transformations on one file and set it up as a prototype to build our function.", "First, let\u2019s set our working directory using setwd and load our packages. We will be using tidyverse and rlist.", "The working directory needs to set because R needs to know the folder it is working on. R needs to know where to export the files and where to read the files. We will assign our working directory to a variable call File_Directory", "Now, let\u2019s use the rlist\u2019s package list.filter function with str_detect to filter for only the \u201c.csv\u201d flat files. We will assign it to the variable All_Files.", "list.files returns the names of all the files in the File_Directory variable. Then list.filter with str_detect filters for the csv files. Also, if you are not familiar with %>% , it is called the \u201cpipe\u201d and it pipes results from one line to another.", "The result of All_Files is a list of file names we want to R to clean.", "Here is the key \u2014 we need to load in one of the files manually and apply our transformation steps.", "I want to group by Year and Sex and summarize by average salary. These are the transformation steps I want to apply to all the files.", "Let\u2019s check if it works. You have to select the script and press cntrl+R which is to run the script.", "Since the prototype worked, let\u2019s turn it into a function.", "Here we added in read_csv because we want our function to read the files we have in the directory and apply the transformations.", "It\u2019s more efficient to do it this way than to load each file into R Studio. We can call this function My_Function. I\u2019m not very imaginative with function names.", "Here this function takes the \u201cX\u201d which is our input, uses read_csv to read the file, then passes the table into the next line which is group_by, and then summarize by average salary.", "Here it reads it takes X, which is the first file in our All Files and performs the set transformations, and so on.", "Now let\u2019s use this function and apply to all our files inside our All_Files variable. Remember the variable All_Files holds the names of our files in a list.", "In R, there is a neat little thing call map, basically, map takes your function and map it to all the inputs you have, also you can choose to either return all the results in a data frame, a list, or other things. Working with map is beyond the scope of this article, but let\u2019s use map_df here. map_df stands for map dataframe.", "Here are the results in a data frame.", "Now you can choose to export the results to your colleague in csv using the write.csv call in R.", "Here is all of it together.", "This is just a very simple example of using functions in R.", "To be honest, things in life never really work out this way. There are always hiccups somewhere. You may try this out today and realize your datasets are all in different columns and you have to clean it first. Perhaps a package won\u2019t load for you. Maybe it\u2019s problems with the computer.", "There will always be bugs somewhere to sort out.", "I hope you stay encouraged, stay safe, and keep moving forward in your journey!", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "I write about Power BI, Power Automate and other cool Microsoft power tools. Microsoft certified data analyst. Constant learner and an aspiring writer. \ud83d\udc4d"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F3648eec4bcf9&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffunctions-in-r-3648eec4bcf9&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffunctions-in-r-3648eec4bcf9&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffunctions-in-r-3648eec4bcf9&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffunctions-in-r-3648eec4bcf9&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----3648eec4bcf9--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----3648eec4bcf9--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://peter-hui.medium.com/?source=post_page-----3648eec4bcf9--------------------------------", "anchor_text": ""}, {"url": "https://peter-hui.medium.com/?source=post_page-----3648eec4bcf9--------------------------------", "anchor_text": "Peter Hui"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F62a43e57781b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffunctions-in-r-3648eec4bcf9&user=Peter+Hui&userId=62a43e57781b&source=post_page-62a43e57781b----3648eec4bcf9---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F3648eec4bcf9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffunctions-in-r-3648eec4bcf9&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F3648eec4bcf9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffunctions-in-r-3648eec4bcf9&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@mina_fc?utm_source=medium&utm_medium=referral", "anchor_text": "Mina FC"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://towardsdatascience.com/functions-in-power-bi-56e9e11e4669?source=friends_link&sk=32f65f6e5196dbd96ed43a53584ad2fc", "anchor_text": "here it is."}, {"url": "https://medium.com/tag/data?source=post_page-----3648eec4bcf9---------------data-----------------", "anchor_text": "Data"}, {"url": "https://medium.com/tag/data-science?source=post_page-----3648eec4bcf9---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/programming?source=post_page-----3648eec4bcf9---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/tag/coding?source=post_page-----3648eec4bcf9---------------coding-----------------", "anchor_text": "Coding"}, {"url": "https://medium.com/tag/data-analysis?source=post_page-----3648eec4bcf9---------------data_analysis-----------------", "anchor_text": "Data Analysis"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F3648eec4bcf9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffunctions-in-r-3648eec4bcf9&user=Peter+Hui&userId=62a43e57781b&source=-----3648eec4bcf9---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F3648eec4bcf9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffunctions-in-r-3648eec4bcf9&user=Peter+Hui&userId=62a43e57781b&source=-----3648eec4bcf9---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F3648eec4bcf9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffunctions-in-r-3648eec4bcf9&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----3648eec4bcf9--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F3648eec4bcf9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffunctions-in-r-3648eec4bcf9&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----3648eec4bcf9---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----3648eec4bcf9--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----3648eec4bcf9--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----3648eec4bcf9--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----3648eec4bcf9--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----3648eec4bcf9--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----3648eec4bcf9--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----3648eec4bcf9--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----3648eec4bcf9--------------------------------", "anchor_text": ""}, {"url": "https://peter-hui.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://peter-hui.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Peter Hui"}, {"url": "https://peter-hui.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "592 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F62a43e57781b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffunctions-in-r-3648eec4bcf9&user=Peter+Hui&userId=62a43e57781b&source=post_page-62a43e57781b--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fd0268e337bf9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffunctions-in-r-3648eec4bcf9&newsletterV3=62a43e57781b&newsletterV3Id=d0268e337bf9&user=Peter+Hui&userId=62a43e57781b&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}