{"url": "https://towardsdatascience.com/mlops-w-dataiku-dss-on-kubernetes-505ee9a2e15a", "time": 1683018154.658762, "path": "towardsdatascience.com/mlops-w-dataiku-dss-on-kubernetes-505ee9a2e15a/", "webpage": {"metadata": {"title": "MLOps w/ Dataiku DSS on Kubernetes | by Tibor Fabian | Towards Data Science", "h1": "MLOps w/ Dataiku DSS on Kubernetes", "description": "On my journey of getting familiarized with a relatively new field, Machine Learning Operations (MLOps), I\u2019ve gained some valuable experience, which I\u2019d like to share with you in a series of articles\u2026"}, "outgoing_paragraph_urls": [{"url": "https://www.dataiku.com/", "anchor_text": "Dataiku Data Science Studio", "paragraph_index": 6}, {"url": "https://www.dataiku.com/wp-content/uploads/2019/10/Analytics-Leader-.png", "anchor_text": "AI-enabled services", "paragraph_index": 7}, {"url": "https://tibor-fabian.medium.com/mlops-on-kubernetes-with-docker-desktop-db38c1b70adb#6ea4", "anchor_text": "MLOps on Kubernetes with Docker Desktop", "paragraph_index": 9}, {"url": "https://en.wikipedia.org/wiki/DevOps", "anchor_text": "DevOps", "paragraph_index": 11}, {"url": "https://blog.dataiku.com/what-is-mlops-why-does-it-matter", "anchor_text": "Dataiku", "paragraph_index": 13}, {"url": "https://aws.amazon.com/de/eks/?whats-new-cards.sort-by=item.additionalFields.postDateTime&whats-new-cards.sort-order=desc&eks-blogs.sort-by=item.additionalFields.createdDate&eks-blogs.sort-order=desc", "anchor_text": "EKS", "paragraph_index": 19}, {"url": "https://tibor-fabian.medium.com/mlops-on-kubernetes-with-docker-desktop-db38c1b70adb", "anchor_text": "MLOps on Kubernetes with Docker Desktop", "paragraph_index": 23}, {"url": "https://tibor-fabian.medium.com/mlops-on-kubernetes-with-docker-desktop-db38c1b70adb", "anchor_text": "MLOps on Kubernetes with Docker Desktop", "paragraph_index": 29}, {"url": "https://tibor-fabian.medium.com/mlops-on-kubernetes-with-docker-desktop-db38c1b70adb", "anchor_text": "MLOps on Kubernetes with Docker Desktop", "paragraph_index": 36}, {"url": "https://tibor-fabian.medium.com/mlops-on-kubernetes-with-docker-desktop-db38c1b70adb", "anchor_text": "MLOps on Kubernetes with Docker Desktop", "paragraph_index": 40}, {"url": "https://de.linkedin.com/in/fabiantibor", "anchor_text": "https://de.linkedin.com/in/fabiantibor", "paragraph_index": 42}], "all_paragraphs": ["On my journey of getting familiarized with a relatively new field, Machine Learning Operations (MLOps), I\u2019ve gained some valuable experience, which I\u2019d like to share with you in a series of articles.", "I couldn\u2019t get the job done successfully without the countless reports, papers, and blogs posted by the community making daily work even feasible. Thank you all.", "This is the first part of the series; each part deals with a particular segment of the complete solution. So you don\u2019t need to read the whole story if you\u2019re only interested in specific details. But to get the whole picture, I\u2019d recommend all of it.", "Establishing a production-ready MLOps architecture is still a great adventure in most companies, even if management is clearly committed to making capital out of data analytics solutions.", "The reasons for that are manifold; to name a few: Rigid organizational structures (silos) are detrimental to draw business intelligence insights from multiple data sources. Management can also be overwhelmed by how fast the tech landscape is changing. That limits the adaptation of modern fast prototyping technologies and blocks forward-looking investments to achieve strategic business objectives.", "To overcome those obstacles, different branches in a company need to work as a team, like business intelligence, data warehousing, and analytics. Various areas of expertise need to be incorporated in one solution. Emerging conflicts of interest between those groups are hindering in accomplishing productive MLOps implementations.", "I\u2019ve been working with Dataiku Data Science Studio (DSS) for some years now, using it mainly for data exploration, data engineering, and building ML models to prove concepts. DSS is a collaboration platform for heterogeneous teams consisting of people with different backgrounds. It helps both so-called clickers and coders who can work together on the same data science project.", "DSS provides an easy working environment, and it supports the entire workflow from gathering data insights to productize AI-enabled services. One can start to use the studio in no time (low entry hurdles), and it has a shallow learning curve, which gives you fast results and a nice learning experience.", "The complete workflow is visually manageable through a GUI. Alternatively, code recipes, Jupyter Notebooks, and Git repositories can also be smoothly integrated as additional coding environments.", "If you are interested in implementing the architecture shown in this post with Docker Desktop, read my post \u201cMLOps on Kubernetes with Docker Desktop\u201d.", "The first step in implementing MLOps successfully is to understand the differences between the requirements for MLOps and DevOps. Those are significant.", "DevOps techniques \u2014 a combination of software development and operations \u2014 were developed to improve project performance and product quality in IT projects as a response to failures and poor success rates.", "There is a similar situation with machine learning projects nowadays. A significant part of them stucks in a premature state of providing some data insight but cannot permanently support business processes in production. They never make it to production.", "\u201cExisting DevOps and DataOps expertise is not enough to put ML models in production at scale, as the fundamental challenges are different.\u201c Dataiku", "In contrast to DevOps approaches, MLOps must consider that machine learning models depend enormously on data. They have different development stages like training, test, and validation on multiple real-world data sets to fulfill performance expectations. Generally, this process is not finished once a model was put into production. Rather, continuous adaptation to changing data via re-training and performance monitoring are necessary to keep ML products valuable.", "MLOps is a young area but has a huge potential to take a crucial role or be the main accelerator in digitization and in the company\u2019s value-added chain. Therefore, it is imperative to have an operations infrastructure that is modern and flexible to follow new trends/features without much effort.", "Below is a list of requirements on a modern MLOps infrastructure from the ML modeling process perspective to guarantee that all modeling/design phase achievements are brought into production with minimal effort.", "Dataiku\u2019s MLOps pipeline meets all the above expectations and implements the whole workflow from data exploration to operationalization by providing the following components.", "ML models\u2019 productization often goes hand in hand with making the model prediction available through a Web service API (e.g., in a RESTful manner).", "Consider the architecture of the DSS MLOps pipeline in the picture below. It shows an EKS cluster with several Kubernetes (K8S) pods of different Docker containers.", "The DSS nodes \u2014 Design, Automation, and API Deployer \u2014 are installed in their own K8s pods, the blue circles on the top of the picture. The API nodes, on the other hand, the green pods, are managed by the API Deployer. Therefore, they don\u2019t need to be installed explicitly. The Docker image dku-api-eks/apimodel for the API node pods needs to be built during DSS installation.", "Similarly, the pods for containerized execution, filled w/ blue in the picture, are orchestrated by the Design and Automation nodes. They allow the outsourcing of computationally intensive tasks like distributed in-memory computing via Spark, Jupyter Notebook kernels, or training of machine learning models. The Docker images for containerized execution, dku-spark-base and dku-exec-base, are also built during DSS installation.", "I implemented the MLOps pipeline on an EKS cluster with 4 nodes of m5.2xlarge EC2 instances for my use case. But the possibility of distributing the pods over any number of EKS nodes makes this architecture very flexible. It is easily adaptable to changing hardware requirements (CPU/GPU) for heavy computational tasks.", "The following concepts are described in full in my article \u201cMLOps on Kubernetes with Docker Desktop\u201d. This shows how easily the implementation of the architecture can be migrated from EKS to a Mac and vice versa.", "It\u2019s not necessary to use multiple private Docker registries to implement the architecture proposed in this article. It can help, however, to adapt to changing environmental setups.", "Partly for historical reason, feeling my way forward to develop the solution, I decided to use two different Docker registries to store my images:", "GitLab CR stores images of the DSS host containers, dku-design-node, dku-automation-node, and dku-apideployer-node. Pods created from those images host the actual DSS installations on persistent volumes.", "ECR, on the other hand, is used to store images for containerized execution, dku-exec-base and dku-spark-base. Pods created from these images are dynamically managed by DSS to outsource computation resources from the host containers. Additionally, ECR stores the Docker image dku-api-eks/apimodel used by DSS API Deployer to create multiple DSS API pods.", "Upon DSS pod start, three containers are created:", "Having Docker daemon available in the environment for DSS is a prerequisite for the DSS installation. DSS uses Docker\u2019s CLI to build base images dku-*-base for containerized execution or Spark on K8s; see DSS installation details in my post \u201cMLOps on Kubernetes with Docker Desktop\u201d.", "In this solution, the DSS container has the Docker\u2019s CLI installed and connected via port forwarding to Docker daemon, which is, on the other hand, running in the DinD sidecar container.", "Once DSS built its base images, it pushes them to a Docker registry \u2014 ECR in this case \u2014 making them available for additional computation pods started on demand; follow the green dotted line in the picture above.", "This section is about committing a running Docker container to an image on a pod using the DooD sidecar container.", "First, a word about persistence: DSS is a multi-user collaboration platform with the continuously changing status of different workflows stored in it. Consequently, persistence is the main requirement to permanently store the users\u2019 activities. Therefore, DSS itself is installed on a persistence volume.", "On the other hand, if some system libraries need to be installed or updated, or even certain DSS security features are installed, those installations update the host container. The latter, especially, requires the DSS already running and mounted on a volume. Consequently, building an updated DSS image based on a Dockerfile is not possible. The host\u2019s updates will not persist upon pod restart until changes are committed to a new Docker image. This is where the DooD sidecar container comes in handy.", "The DSS container\u2019s installation status is committed to a new Docker image from inside the DooD container. It grants access to the Docker daemon of the EKS node, where the DSS pod is running. The new DSS image is then pushed to GitLab CR (follow the blue dotted line in the picture above).", "See my article \u201cMLOps on Kubernetes with Docker Desktop\u201d for details on how this is exactly implemented.", "What is this word game anyway, Docker in Docker on Kubernetes in Kubernetes?", "As mentioned already, the installation of all DSS nodes was carried out on EKS. This means that a DSS node runs in a Docker container and uses Docker CLI (docker) to build images for containerized execution (see DinD above). On the other hand, the DSS node cluster is distributed in EKS on multiple K8s pods and use K8s CLI (kubectl) themselves inside the Docker container on the K8s pod for orchestrating containerized execution, i.e., to start additional pods.", "So it\u2019s a kind of Docker in Docker on Kubernetes in Kubernetes blending; on funny days, I call it DinDonKinK.", "The main takeaway from this article is how to use K8s to host a complete MLOps pipeline. Although the solution described here refers to a particular implementation in AWS EKS, it could be implemented to meet other requirements. For example, I migrated the architecture to Docker Desktop on a MacBook Pro as described in my post \u201cMLOps on Kubernetes with Docker Desktop\u201d.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Lead Data Scientist @ Telef\u00f3nica; Visit my LinkedIn profile: https://de.linkedin.com/in/fabiantibor"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F505ee9a2e15a&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmlops-w-dataiku-dss-on-kubernetes-505ee9a2e15a&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmlops-w-dataiku-dss-on-kubernetes-505ee9a2e15a&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmlops-w-dataiku-dss-on-kubernetes-505ee9a2e15a&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmlops-w-dataiku-dss-on-kubernetes-505ee9a2e15a&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----505ee9a2e15a--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----505ee9a2e15a--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://tibor-fabian.medium.com/?source=post_page-----505ee9a2e15a--------------------------------", "anchor_text": ""}, {"url": "https://tibor-fabian.medium.com/?source=post_page-----505ee9a2e15a--------------------------------", "anchor_text": "Tibor Fabian"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F41751d3c5caf&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmlops-w-dataiku-dss-on-kubernetes-505ee9a2e15a&user=Tibor+Fabian&userId=41751d3c5caf&source=post_page-41751d3c5caf----505ee9a2e15a---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F505ee9a2e15a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmlops-w-dataiku-dss-on-kubernetes-505ee9a2e15a&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F505ee9a2e15a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmlops-w-dataiku-dss-on-kubernetes-505ee9a2e15a&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@selimarda?utm_source=medium&utm_medium=referral", "anchor_text": "SEL\u0130M ARDA ERYILMAZ"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://www.dataiku.com/", "anchor_text": "Dataiku Data Science Studio"}, {"url": "https://www.dataiku.com/wp-content/uploads/2019/10/Analytics-Leader-.png", "anchor_text": "AI-enabled services"}, {"url": "https://tibor-fabian.medium.com/mlops-on-kubernetes-with-docker-desktop-db38c1b70adb#6ea4", "anchor_text": "MLOps on Kubernetes with Docker Desktop"}, {"url": "https://en.wikipedia.org/wiki/DevOps", "anchor_text": "DevOps"}, {"url": "https://blog.dataiku.com/what-is-mlops-why-does-it-matter", "anchor_text": "Dataiku"}, {"url": "https://aws.amazon.com/de/eks/?whats-new-cards.sort-by=item.additionalFields.postDateTime&whats-new-cards.sort-order=desc&eks-blogs.sort-by=item.additionalFields.createdDate&eks-blogs.sort-order=desc", "anchor_text": "EKS"}, {"url": "https://tibor-fabian.medium.com/mlops-on-kubernetes-with-docker-desktop-db38c1b70adb", "anchor_text": "MLOps on Kubernetes with Docker Desktop"}, {"url": "https://tibor-fabian.medium.com/mlops-on-kubernetes-with-docker-desktop-db38c1b70adb", "anchor_text": "MLOps on Kubernetes with Docker Desktop"}, {"url": "https://tibor-fabian.medium.com/mlops-on-kubernetes-with-docker-desktop-db38c1b70adb", "anchor_text": "MLOps on Kubernetes with Docker Desktop"}, {"url": "https://tibor-fabian.medium.com/mlops-on-kubernetes-with-docker-desktop-db38c1b70adb", "anchor_text": "MLOps on Kubernetes with Docker Desktop"}, {"url": "https://medium.com/tag/kubernetes?source=post_page-----505ee9a2e15a---------------kubernetes-----------------", "anchor_text": "Kubernetes"}, {"url": "https://medium.com/tag/data-science?source=post_page-----505ee9a2e15a---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/dataiku?source=post_page-----505ee9a2e15a---------------dataiku-----------------", "anchor_text": "Dataiku"}, {"url": "https://medium.com/tag/docker?source=post_page-----505ee9a2e15a---------------docker-----------------", "anchor_text": "Docker"}, {"url": "https://medium.com/tag/mlops?source=post_page-----505ee9a2e15a---------------mlops-----------------", "anchor_text": "Mlops"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F505ee9a2e15a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmlops-w-dataiku-dss-on-kubernetes-505ee9a2e15a&user=Tibor+Fabian&userId=41751d3c5caf&source=-----505ee9a2e15a---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F505ee9a2e15a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmlops-w-dataiku-dss-on-kubernetes-505ee9a2e15a&user=Tibor+Fabian&userId=41751d3c5caf&source=-----505ee9a2e15a---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F505ee9a2e15a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmlops-w-dataiku-dss-on-kubernetes-505ee9a2e15a&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----505ee9a2e15a--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F505ee9a2e15a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmlops-w-dataiku-dss-on-kubernetes-505ee9a2e15a&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----505ee9a2e15a---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----505ee9a2e15a--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----505ee9a2e15a--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----505ee9a2e15a--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----505ee9a2e15a--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----505ee9a2e15a--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----505ee9a2e15a--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----505ee9a2e15a--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----505ee9a2e15a--------------------------------", "anchor_text": ""}, {"url": "https://tibor-fabian.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://tibor-fabian.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Tibor Fabian"}, {"url": "https://tibor-fabian.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "26 Followers"}, {"url": "https://de.linkedin.com/in/fabiantibor", "anchor_text": "https://de.linkedin.com/in/fabiantibor"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F41751d3c5caf&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmlops-w-dataiku-dss-on-kubernetes-505ee9a2e15a&user=Tibor+Fabian&userId=41751d3c5caf&source=post_page-41751d3c5caf--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F819017a298e1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmlops-w-dataiku-dss-on-kubernetes-505ee9a2e15a&newsletterV3=41751d3c5caf&newsletterV3Id=819017a298e1&user=Tibor+Fabian&userId=41751d3c5caf&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}