{"url": "https://towardsdatascience.com/create-a-coronavirus-app-using-r-shiny-and-plotly-6a6abf66091d", "time": 1683004755.943647, "path": "towardsdatascience.com/create-a-coronavirus-app-using-r-shiny-and-plotly-6a6abf66091d/", "webpage": {"metadata": {"title": "Visualize COVID-19 case data in a blink of an eye \u2014 using R, Shiny & Plotly | by Meinhard Ploner | Towards Data Science", "h1": "Visualize COVID-19 case data in a blink of an eye \u2014 using R, Shiny & Plotly", "description": "This walkthrough explains how to create the web application plus the interactive plots. The open-source technology stack based on R & Shiny is very slim. About 120 lines is all you need to code."}, "outgoing_paragraph_urls": [{"url": "https://rstudio.com/products/rstudio/download/#download", "anchor_text": "https://rstudio.com/products/rstudio/download/#download", "paragraph_index": 4}, {"url": "https://rstudio.com/products/rstudio/download/#download", "anchor_text": "https://rstudio.com/products/rstudio/download/#download", "paragraph_index": 5}, {"url": "https://shiny.rstudio.com", "anchor_text": "framework Shiny", "paragraph_index": 9}, {"url": "https://plot.ly/r/", "anchor_text": "documentation", "paragraph_index": 17}, {"url": "https://github.com/CSSEGISandData/COVID-19/tree/master/csse_covid_19_data/csse_covid_19_time_series", "anchor_text": "Link", "paragraph_index": 24}, {"url": "https://shiny.rstudio.com/articles/reactivity-overview.html", "anchor_text": "reactive function", "paragraph_index": 26}, {"url": "https://plot.ly/r/bar-charts/", "anchor_text": "bar charts of the R package plotly", "paragraph_index": 30}, {"url": "https://www.shinyapps.io", "anchor_text": "shinyapps", "paragraph_index": 34}, {"url": "https://medium.com/@meinhard.ploner/visualise-covid-19-case-data-using-python-dash-and-plotly-e58feb34f70f", "anchor_text": "Visualize COVID-19 data using Python, Dash & Plotly", "paragraph_index": 38}, {"url": "http://www.r-bloggers.com", "anchor_text": "r-bloggers", "paragraph_index": 40}], "all_paragraphs": ["At the latest since the Coronavirus COVID-19 is a pandemic, half of the world is paying attention to the case statistics. Me, too. As a Data Scientist, I am curious and so I accessed the case statistics data and created some visualization. With this report, I will tell you how you can do the same by yourself. No magic!", "This walkthrough explains how to create the web application plus the interactive plots. The open-source technology stack based on R & Shiny is very slim. About 120 lines are all you need to code.", "The code can also be downloaded from GitHub. The link can be found at the bottom of this article.", "The goal of this article is to be able to create a running web application which updates its data every 30 minutes and shows this data on a dashboard. The features of the app are:", "First, download the base version of R from https://rstudio.com/products/rstudio/download/#download, start the installer and go through.", "Then, download the free version of RStudio Desktop from https://rstudio.com/products/rstudio/download/#download. Start again the installer and complete the steps.", "Now install the packages we need. Launch the RStudio application and go to the console (the window which resides usually on the bottom-left). Install the packages by typing:", "In RStudio, click on the drop-down menu \u201cProject: (None)\u201d on the top-right and then select \u201cNew Project\u2026\u201d.", "Click on \u201cNew Directory\u201d, then on \u201cShiny Web Application\u201d. Now choose an arbitrary new directory name for your project, e.g. \u201ccorona-app\u201d. Further, choose a subdirectory where you want your app to be located. Click on the button \u201cCreate Project\u201d to create the folder with 2 files:", "The framework Shiny allows R users to create reactive web applications with minimal coding effort. Small apps need only 2 files: ui.R for the user interface layout, and server.R for the server and rendering logic.", "Go to RStudio. On the top-left of the user interface, there is a plus button to create new files. Click on it, and choose \u201cR Script\u201d. Create a file and name it \u201cui.R\u201d by saving it, and start editing.", "First load the packages we need:", "Then, set up an empty page using the bootstrap scheme (12 columns per row), and create the title using the element titlePanel:", "Altogether, the screen is divided into different rows (fluidRow\u2019s). The fluidRow with the controls is composed of three column\u2019s of a width of 4 each, which sums up to 12 again. The plots occupy the whole width (12):", "Now add the code for the controls. Insert the following code immediately after the line which defines the titlePanel (before the 2 closing brackets!):", "As you see, there is a fluidRow having 3 column elements, with each having a width of 4. The first two columns hold the drop-down menu elements (selectizeInput) to let the user select the country and the state.", "The third column holds a group of checkbox elements (checkboxGroupInput). This allows the user to choose which metrics to be shown in the two plots.", "For the two plots, we use the R package plotly (documentation). The following code lines add one plotly-style plot in each of the next two fluidRow\u2019s:", "The app needs some logic to download and parse the data. This happens on the server. Create again a new file and name it \u201cserver.R\u201d and add these lines to load the respective R packages:", "Then define a baseURL from which we download the case data of the Coronavirus by country and region. The data is located on a server of the Johns Hopkins Center for Systems Science and Engineering (JHU/CSSE). Further, define a font (f1) to be used later, plus a short-hand function to measure how old a file is (to avoid too many reloadings):", "Now, define the main function to load a specific dataset (e.g. number of confirmed cases by day and country).", "The function first checks if the data is already available, and not older than 10 minutes. If this is not the case, read.csv downloads the file from the web. Geo-coordinates are omitted, then pivot_longer (from package tidyr) converts the data.frame from the wide to the long format. The method mutate parses the dates and inserts the text <all> if no region is available (true for countries other than US, Canada, China and Australia).", "This next block is called immediately on app start. As explained above, it loads the data from the web or cache:", "The code block loads Confirmed Cases, Recovered Cases and Deaths, and joins these 3 data sets to get one big data set.", "Update [2020-Mar-27]: the file names were changed to reflect the new data structure of the Johns Hopkins University (see Link).", "The last section covered static code on the server. Now the main part starts, i.e. the reactive server code. All the code which is added in this section resides within the brackets of the server function:", "First let us add a reactive function that returns a subset of the overall data, i.e. only a specified country and region. Whenever the user changes the selection, the function is called and the filters update:", "Additionally, the function aggregates the data (using summarise_if) if the user chooses <all> for a country having states (e.g. US). Further, from cumulated statistics, the differences are calculated and saved into new columns, prefixed with \u201cNew\u201d.", "Next the server observes for changes in the country selection. If that happens, the server must update the selectable States. Also, <all> is added as an option in the State dropdown menu:", "The next two lines are not reactive. Instead, they are called at app start. The first line extracts all countries by lexicographical order. The other line selects Italy on the drop-down menu (selectizeInput):", "For the plots, we use the bar charts of the R package plotly. The following code defines a function to be used for both the plots (New and Cumulated cases). The first part of the function defines the basics of the bar chart (style, axes, legend). The second part loops through the selected metrics (e.g. Recovered, \u2026) and adds the bars. A bit tricky is the composition of the column name using the varPrefix (\u201cNew\u201d or \u201cCum\u201d) and metric.", "The last lines of code use the previously defined function. The two plots are assigned to the UI elements by:", "That is all, you can run the code by pressing \u201cRun App\u201d, the button on the top-right of the editor window.", "All the code above can be found on GitHub. After all, it\u2019s only two files, plus the project file:", "The easiest way to publish the Shiny application to a web server is to use shinyapps. After creating an account on shinyapps, go to RStudio and click on the publish icon on the upper-right corner, then on \u201cPublish Application\u2026\u201d:", "Connect with your account, then select the files you need (only ui.R and server.R!):", "That\u2019s it! Your application is running on the webserver, and you can access it through the internet.", "[Update 19-Mar-2020] There is a follow-up article on the very same use case. Instead if R + Shiny + Plotly it goes through the Python-based stack:", "Link: Visualize COVID-19 data using Python, Dash & Plotly", "My name is Meinhard Ploner. I am not new to Statistics and Data Science, but this is my very first article on Medium. I hope you enjoyed reading it and welcome any feedback.", "For more examples of R in action, check out r-bloggers.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Manager Digital & AI @ GKN Hydrogen. Strong statistics and Machine Learning background. Loves excellent UI & UX. Creative and always open to new ideas."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F6a6abf66091d&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreate-a-coronavirus-app-using-r-shiny-and-plotly-6a6abf66091d&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreate-a-coronavirus-app-using-r-shiny-and-plotly-6a6abf66091d&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreate-a-coronavirus-app-using-r-shiny-and-plotly-6a6abf66091d&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreate-a-coronavirus-app-using-r-shiny-and-plotly-6a6abf66091d&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----6a6abf66091d--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----6a6abf66091d--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://meinhard-ploner.medium.com/?source=post_page-----6a6abf66091d--------------------------------", "anchor_text": ""}, {"url": "https://meinhard-ploner.medium.com/?source=post_page-----6a6abf66091d--------------------------------", "anchor_text": "Meinhard Ploner"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fae87c0a3a798&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreate-a-coronavirus-app-using-r-shiny-and-plotly-6a6abf66091d&user=Meinhard+Ploner&userId=ae87c0a3a798&source=post_page-ae87c0a3a798----6a6abf66091d---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F6a6abf66091d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreate-a-coronavirus-app-using-r-shiny-and-plotly-6a6abf66091d&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F6a6abf66091d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreate-a-coronavirus-app-using-r-shiny-and-plotly-6a6abf66091d&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://go.aws/3aoYsIW", "anchor_text": "https://go.aws/3aoYsIW"}, {"url": "https://rstudio.com/products/rstudio/download/#download", "anchor_text": "https://rstudio.com/products/rstudio/download/#download"}, {"url": "https://rstudio.com/products/rstudio/download/#download", "anchor_text": "https://rstudio.com/products/rstudio/download/#download"}, {"url": "https://shiny.rstudio.com", "anchor_text": "framework Shiny"}, {"url": "https://plot.ly/r/", "anchor_text": "documentation"}, {"url": "https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series", "anchor_text": "https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series"}, {"url": "https://github.com/CSSEGISandData/COVID-19/tree/master/csse_covid_19_data/csse_covid_19_time_series", "anchor_text": "Link"}, {"url": "https://shiny.rstudio.com/articles/reactivity-overview.html", "anchor_text": "reactive function"}, {"url": "https://plot.ly/r/bar-charts/", "anchor_text": "bar charts of the R package plotly"}, {"url": "https://github.com/ploner/coronavirus-r", "anchor_text": "https://github.com/ploner/coronavirus-r"}, {"url": "https://www.shinyapps.io", "anchor_text": "shinyapps"}, {"url": "https://medium.com/@meinhard.ploner/visualise-covid-19-case-data-using-python-dash-and-plotly-e58feb34f70f", "anchor_text": "Visualize COVID-19 data using Python, Dash & Plotly"}, {"url": "http://www.r-bloggers.com", "anchor_text": "r-bloggers"}, {"url": "https://medium.com/tag/r?source=post_page-----6a6abf66091d---------------r-----------------", "anchor_text": "R"}, {"url": "https://medium.com/tag/shiny?source=post_page-----6a6abf66091d---------------shiny-----------------", "anchor_text": "Shiny"}, {"url": "https://medium.com/tag/coronavirus?source=post_page-----6a6abf66091d---------------coronavirus-----------------", "anchor_text": "Coronavirus"}, {"url": "https://medium.com/tag/covit-19?source=post_page-----6a6abf66091d---------------covit_19-----------------", "anchor_text": "Covit 19"}, {"url": "https://medium.com/tag/plotly?source=post_page-----6a6abf66091d---------------plotly-----------------", "anchor_text": "Plotly"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F6a6abf66091d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreate-a-coronavirus-app-using-r-shiny-and-plotly-6a6abf66091d&user=Meinhard+Ploner&userId=ae87c0a3a798&source=-----6a6abf66091d---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F6a6abf66091d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreate-a-coronavirus-app-using-r-shiny-and-plotly-6a6abf66091d&user=Meinhard+Ploner&userId=ae87c0a3a798&source=-----6a6abf66091d---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F6a6abf66091d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreate-a-coronavirus-app-using-r-shiny-and-plotly-6a6abf66091d&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----6a6abf66091d--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F6a6abf66091d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreate-a-coronavirus-app-using-r-shiny-and-plotly-6a6abf66091d&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----6a6abf66091d---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----6a6abf66091d--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----6a6abf66091d--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----6a6abf66091d--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----6a6abf66091d--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----6a6abf66091d--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----6a6abf66091d--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----6a6abf66091d--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----6a6abf66091d--------------------------------", "anchor_text": ""}, {"url": "https://meinhard-ploner.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://meinhard-ploner.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Meinhard Ploner"}, {"url": "https://meinhard-ploner.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "167 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fae87c0a3a798&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreate-a-coronavirus-app-using-r-shiny-and-plotly-6a6abf66091d&user=Meinhard+Ploner&userId=ae87c0a3a798&source=post_page-ae87c0a3a798--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F9c47c0da75ae&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreate-a-coronavirus-app-using-r-shiny-and-plotly-6a6abf66091d&newsletterV3=ae87c0a3a798&newsletterV3Id=9c47c0da75ae&user=Meinhard+Ploner&userId=ae87c0a3a798&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}