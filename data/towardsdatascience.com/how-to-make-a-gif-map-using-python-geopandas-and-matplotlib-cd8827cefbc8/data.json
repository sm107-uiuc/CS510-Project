{"url": "https://towardsdatascience.com/how-to-make-a-gif-map-using-python-geopandas-and-matplotlib-cd8827cefbc8", "time": 1682993791.2675562, "path": "towardsdatascience.com/how-to-make-a-gif-map-using-python-geopandas-and-matplotlib-cd8827cefbc8/", "webpage": {"metadata": {"title": "How to make a gif map using Python, Geopandas and Matplotlib | by Ben Dexter Cooley | Towards Data Science", "h1": "How to make a gif map using Python, Geopandas and Matplotlib", "description": "Update: I added a normalise function to keep the colorbar legend range the same for each map. Code updated below and in Jupyter Notebook on Github. See notes on weird rendering further down. As a\u2026"}, "outgoing_paragraph_urls": [{"url": "https://towardsdatascience.com/lets-make-a-map-using-geopandas-pandas-and-matplotlib-to-make-a-chloropleth-map-dddc31c1983d", "anchor_text": "my previous write-up", "paragraph_index": 3}, {"url": "http://geopandas.org/", "anchor_text": "Geopandas", "paragraph_index": 3}, {"url": "https://matplotlib.org/contents.html", "anchor_text": "Matplotlib", "paragraph_index": 3}, {"url": "https://towardsdatascience.com/lets-make-a-map-using-geopandas-pandas-and-matplotlib-to-make-a-chloropleth-map-dddc31c1983d", "anchor_text": "here", "paragraph_index": 3}, {"url": "https://github.com/bendoesdata/make-a-map-geopandas", "anchor_text": "Jupyter notebook on Github", "paragraph_index": 3}, {"url": "https://github.com/bendoesdata/make-a-map-geopandas", "anchor_text": "previous tutorial", "paragraph_index": 9}, {"url": "https://stackoverflow.com/questions/8827016/matplotlib-savefig-in-jpeg-format", "anchor_text": "this Stack Overflow thread", "paragraph_index": 21}, {"url": "https://robservatory.com/use-sips-to-quickly-easily-and-freely-convert-image-files/", "anchor_text": "here", "paragraph_index": 21}, {"url": "https://imagemagick.org/script/convert.php", "anchor_text": "installation and docs page", "paragraph_index": 24}, {"url": "https://github.com/bendoesdata/make-a-gif-map-in-python", "anchor_text": "Github", "paragraph_index": 32}, {"url": "https://twitter.com/bendoesdata", "anchor_text": "on twitter", "paragraph_index": 32}, {"url": "https://mailchi.mp/7029eac7f34a/data-curious-signup", "anchor_text": "signup here.", "paragraph_index": 33}, {"url": "http://bendoesdataviz.com", "anchor_text": "bendoesdataviz.com", "paragraph_index": 35}, {"url": "http://bdexter.com", "anchor_text": "bdexter.com", "paragraph_index": 35}], "all_paragraphs": ["Update: I added a normalise function to keep the colorbar legend range the same for each map. Code updated below and in Jupyter Notebook on Github. See notes on weird rendering further down.", "As a language, Python is enormously flexible. Which makes it possible to make lots of different visualisations in, at times, only a few lines of code. But with all the different charting websites and software available now, why bother writing code? Can\u2019t we just use a GUI to upload a csv file, adjust the range, hit export png and call it a day?", "Yes. You certainly can. And sometimes, this is the best choice if you need a quick, one-time chart or map. But the real power of using Python comes into play when you need to make lots of maps \u2014 lots and lots of maps.", "In this tutorial, I\u2019ll build off of my previous write-up on how to make a choropleth map using Geopandas and Matplotlib. We\u2019ll be using this as a starting point, so if you want to catch up check out the post here or view my Jupyter notebook on Github.", "This time I\u2019ll be going through how to create an animated gif choropleth that shows both geographic data (cause it\u2019s a map) and change over time. Best of all, this tutorial will from start to finish using only Python and a few command line tools. No need to look for the right menu/dropdown/window in Photoshop.", "As I mentioned in my previous tutorial, this may not be the best workflow for all use cases. But if speed, reproducibility and consistency are your priorities, I think this a good way to go.", "In the past few years, gif charts seem to have become hugely popular on social media. Publishers like the Financial Times and the Economist have spent more time streamlining and perfecting their data viz production for formats that receive more engagement on platforms like Twitter and Instagram. And perhaps more importantly, gif charts allow for a new layer of storytelling on top of what the static chart is showing.", "This can be used a couple of different ways:", "The list is by no means exhaustive, and the use cases are continuing to expand. In summary: moving charts are both cool and useful (when used correctly).", "Without having to recap every single step of the previous tutorial, here\u2019s what you should have to start:", "Now, we will use the power of for() loops in Python to crank out the same map using multiple different columns. Because we want to show change over time, we will need to make sure our data contains multiple years as variables. For ease of labelling, let\u2019s make sure that each column header of data is a year number.", "In order to iterate through the columns, we will need a list of strings to call the name of each column. Let\u2019s create a list variable containing the year of each column (formatted as a string). Let\u2019s also set an output path so that all of our maps are saved to one folder.", "Finally, before we create the maps we want to set a consistent global variable for the vmin and max values. This sets the value for the colour range. If you don\u2019t set this beforehand, Matplotlib will change the range of the choropleth each time the for loop iterates, so it will be harder to see how values have increased or decreased over time.", "Once you start using them, for() loops are fairly simple. The syntax of our for() loop will say this:", "Here\u2019s what that looks like in the code using the basemap gist from the previous tutorial:", "If you run this code and open the output path folder you just set, you should see lots of maps, each with a slightly different shade to them representing the data from the different years. But this could be confusing to the viewer: how will they know the year increments once the map animates?", "We could set a simple date range at the bottom (2007\u20132015), but for() loops give us a better solution. Since we already have the years of each column saved as strings in a variable, we can add a different annotation to each map (which corresponds to the year of the data).", "According to our for() loop, the variable \u2018year\u2019 will be the column year for each time the for loop runs. Using this logic, we can insert \u2018year\u2019 as a variable for the fig.annotate() argument.", "Now each time the for loop runs, a different year will be inserted onto the map as an annotation. Using the same logic, we can also set the filename to start with each year so it\u2019s easy to find which map corresponds to each year. Adding this code inside your for() loop will add a year annotation.", "Rerun the code, and your maps should be replaced with new maps, each with a year annotation in the bottom left corner. If you flip through the maps in from top to bottom, you can start to get a sense of what your gif will look like.", "For the final step (gif-making), we will leave Python and pop open the Terminal (or whatever command line editor you use). Navigate to the directory where you saved all the files in the terminal.", "Sadly I couldn\u2019t find a way to get ImageMagick to batch convert my png maps into jpg format. And I couldn\u2019t seem to get matplotlib to save my charts as .jpg by default (got an error described on this Stack Overflow thread). So I found a workaround using a Mac program called sips (tutorial and explainer here). But essentially, it\u2019s a command line tool to do batch conversions of files. To non-Mac users, I\u2019m sure there\u2019s a similar solution out there as well!", "Copy/paste this snippet into your terminal to convert all the pngs to jpgs.", "There are numerous ways to make gifs, but I\u2019m using ImageMagick for a few reasons:", "The documentation for ImageMagick is pretty thorough. If you haven\u2019t already installed it, check out their installation and docs page.", "To check to see if you installed ImageMagick properly:", "2. If ImageMagick is already installed, a message will be displayed with the version and copyright notices. Once you have ImageMagick installed on your system, navigate to the directory that has all the maps we just made. Now we need to run one line of code to create our gif. Here\u2019s what it does in a nutshell:", "And here\u2019s the code to use in Terminal:", "Now check out the new file you created \u201cnew_map_normal.gif\u201d and you should see something like this:", "That\u2019s it! We have a gif map.", "Now of course, this starts to raise a set of new questions: why do the colours get darker in recent years? Has violent crime risen significantly? Gif maps in this format have the limitation of being hard to read the actual figures behind each borough.", "For that, more complex combo charts may be more useful rather than including a legend to the right (one to tackle for next time!). However, as a method for giving a teaser to the story behind your data, using a gif map can be a good entry point to deeper analysis. Plus, you can turn any kind of chart that has time series data into a gif chart \u2014 I just chose maps cause they\u2019re cool.", "As always you can find all the code needed to replicate this tutorial (Jupyter notebook, shapefiles and data) on Github. If you have any questions, find me on twitter.", "Thanks for reading! I also publish a weekly newsletter about the intersection of data visualisation, data science and technology. Each edition contains articles to read, visualisations to explore, datasets to analyse and more tutorials to learn from. You can signup here.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Visualization Software Engineer @ Pattern (Broad Institute). Designer, developer, data artist. Portfolio: bendoesdataviz.com | Art: bdexter.com"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fcd8827cefbc8&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-make-a-gif-map-using-python-geopandas-and-matplotlib-cd8827cefbc8&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-make-a-gif-map-using-python-geopandas-and-matplotlib-cd8827cefbc8&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-make-a-gif-map-using-python-geopandas-and-matplotlib-cd8827cefbc8&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-make-a-gif-map-using-python-geopandas-and-matplotlib-cd8827cefbc8&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----cd8827cefbc8--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----cd8827cefbc8--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@bendextercooley?source=post_page-----cd8827cefbc8--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@bendextercooley?source=post_page-----cd8827cefbc8--------------------------------", "anchor_text": "Ben Dexter Cooley"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F37240f6b6698&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-make-a-gif-map-using-python-geopandas-and-matplotlib-cd8827cefbc8&user=Ben+Dexter+Cooley&userId=37240f6b6698&source=post_page-37240f6b6698----cd8827cefbc8---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fcd8827cefbc8&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-make-a-gif-map-using-python-geopandas-and-matplotlib-cd8827cefbc8&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fcd8827cefbc8&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-make-a-gif-map-using-python-geopandas-and-matplotlib-cd8827cefbc8&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://towardsdatascience.com/lets-make-a-map-using-geopandas-pandas-and-matplotlib-to-make-a-chloropleth-map-dddc31c1983d", "anchor_text": "my previous write-up"}, {"url": "http://geopandas.org/", "anchor_text": "Geopandas"}, {"url": "https://matplotlib.org/contents.html", "anchor_text": "Matplotlib"}, {"url": "https://towardsdatascience.com/lets-make-a-map-using-geopandas-pandas-and-matplotlib-to-make-a-chloropleth-map-dddc31c1983d", "anchor_text": "here"}, {"url": "https://github.com/bendoesdata/make-a-map-geopandas", "anchor_text": "Jupyter notebook on Github"}, {"url": "https://github.com/bendoesdata/make-a-map-geopandas", "anchor_text": "previous tutorial"}, {"url": "https://stackoverflow.com/questions/8827016/matplotlib-savefig-in-jpeg-format", "anchor_text": "this Stack Overflow thread"}, {"url": "https://robservatory.com/use-sips-to-quickly-easily-and-freely-convert-image-files/", "anchor_text": "here"}, {"url": "https://imagemagick.org/script/convert.php", "anchor_text": "installation and docs page"}, {"url": "https://github.com/bendoesdata/make-a-gif-map-in-python", "anchor_text": "Github"}, {"url": "https://twitter.com/bendoesdata", "anchor_text": "on twitter"}, {"url": "https://mailchi.mp/7029eac7f34a/data-curious-signup", "anchor_text": "signup here."}, {"url": "https://medium.com/tag/python?source=post_page-----cd8827cefbc8---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/data-visualization?source=post_page-----cd8827cefbc8---------------data_visualization-----------------", "anchor_text": "Data Visualization"}, {"url": "https://medium.com/tag/maps?source=post_page-----cd8827cefbc8---------------maps-----------------", "anchor_text": "Maps"}, {"url": "https://medium.com/tag/data-analysis?source=post_page-----cd8827cefbc8---------------data_analysis-----------------", "anchor_text": "Data Analysis"}, {"url": "https://medium.com/tag/data-science?source=post_page-----cd8827cefbc8---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fcd8827cefbc8&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-make-a-gif-map-using-python-geopandas-and-matplotlib-cd8827cefbc8&user=Ben+Dexter+Cooley&userId=37240f6b6698&source=-----cd8827cefbc8---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fcd8827cefbc8&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-make-a-gif-map-using-python-geopandas-and-matplotlib-cd8827cefbc8&user=Ben+Dexter+Cooley&userId=37240f6b6698&source=-----cd8827cefbc8---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fcd8827cefbc8&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-make-a-gif-map-using-python-geopandas-and-matplotlib-cd8827cefbc8&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----cd8827cefbc8--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fcd8827cefbc8&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-make-a-gif-map-using-python-geopandas-and-matplotlib-cd8827cefbc8&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----cd8827cefbc8---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----cd8827cefbc8--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----cd8827cefbc8--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----cd8827cefbc8--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----cd8827cefbc8--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----cd8827cefbc8--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----cd8827cefbc8--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----cd8827cefbc8--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----cd8827cefbc8--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@bendextercooley?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@bendextercooley?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Ben Dexter Cooley"}, {"url": "https://medium.com/@bendextercooley/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "4.3K Followers"}, {"url": "http://bendoesdataviz.com", "anchor_text": "bendoesdataviz.com"}, {"url": "http://bdexter.com", "anchor_text": "bdexter.com"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F37240f6b6698&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-make-a-gif-map-using-python-geopandas-and-matplotlib-cd8827cefbc8&user=Ben+Dexter+Cooley&userId=37240f6b6698&source=post_page-37240f6b6698--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F728a8e7d040c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-make-a-gif-map-using-python-geopandas-and-matplotlib-cd8827cefbc8&newsletterV3=37240f6b6698&newsletterV3Id=728a8e7d040c&user=Ben+Dexter+Cooley&userId=37240f6b6698&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}