{"url": "https://towardsdatascience.com/https-medium-com-orian-sharoni-videothat-6849277c301b", "time": 1683000644.386691, "path": "towardsdatascience.com/https-medium-com-orian-sharoni-videothat-6849277c301b/", "webpage": {"metadata": {"title": "VideoThat!. Automagically Generate a Music Video\u2026 | by Orian Sharoni | Towards Data Science", "h1": "VideoThat!", "description": "2nd place DataHack winner \ud83e\udd48, September 2019"}, "outgoing_paragraph_urls": [{"url": "https://github.com/Sharonio/VideoThat", "anchor_text": "VideoThat", "paragraph_index": 0}, {"url": "https://www.meimadix.com/videos/videoThat_snippet.mp4", "anchor_text": "Click here", "paragraph_index": 1}, {"url": "http://librosa.github.io/librosa/generated/librosa.onset.onset_strength.html", "anchor_text": "librosa.onset.onset_strength", "paragraph_index": 8}, {"url": "https://musicinformationretrieval.com/novelty_functions.html", "anchor_text": "Reference with code examples", "paragraph_index": 9}, {"url": "https://librosa.github.io/librosa/_modules/librosa/onset.html#onset_strength_multi", "anchor_text": "The source code for onset_strength", "paragraph_index": 9}, {"url": "https://pypi.org/project/scenedetect/", "anchor_text": "scenedetect", "paragraph_index": 11}, {"url": "https://librosa.github.io/librosa/", "anchor_text": "librosa", "paragraph_index": 12}, {"url": "https://librosa.github.io/librosa/generated/librosa.onset.onset_detect.html#librosa.onset.onset_detect", "anchor_text": "onset", "paragraph_index": 12}, {"url": "https://www.datahack.org.il/", "anchor_text": "DataHack", "paragraph_index": 20}, {"url": "https://github.com/Sharonio/VideoThat", "anchor_text": "VideoThat", "paragraph_index": 22}, {"url": "https://www.youtube.com/taylorswift", "anchor_text": "Taylor Swift", "paragraph_index": 22}, {"url": "https://www.youtube.com/watch?v=bpOSxM0rNPM", "anchor_text": "Do I Wanna Know", "paragraph_index": 22}, {"url": "https://www.facebook.com/datahackil/photos/a.427954734076246/1196000310605014/?type=3&theater", "anchor_text": "won second place", "paragraph_index": 23}, {"url": "https://github.com/yooli3", "anchor_text": "GitHub", "paragraph_index": 24}, {"url": "https://www.linkedin.com/in/yael-daihes/", "anchor_text": "LinkedIn", "paragraph_index": 24}, {"url": "https://github.com/yaarasegre", "anchor_text": "GitHub", "paragraph_index": 24}, {"url": "https://www.linkedin.com/in/yaara-arkin-86706013/", "anchor_text": "LinkedIn", "paragraph_index": 24}, {"url": "https://github.com/Sharonio", "anchor_text": "GitHub", "paragraph_index": 24}, {"url": "https://www.linkedin.com/in/orian-sharoni/", "anchor_text": "LinkedIn", "paragraph_index": 24}, {"url": "https://github.com/shenberg", "anchor_text": "GitHub", "paragraph_index": 24}, {"url": "https://www.linkedin.com/in/roeeshenberg/", "anchor_text": "LinkedIn", "paragraph_index": 24}, {"url": "https://github.com/DalyaG", "anchor_text": "GitHub", "paragraph_index": 24}, {"url": "https://www.linkedin.com/in/dalya-gar/", "anchor_text": "LinkedIn", "paragraph_index": 24}, {"url": "https://medium.com/u/8cb8e88c4f51?source=post_page-----6849277c301b--------------------------------", "anchor_text": "Dalya Gartzman", "paragraph_index": 25}, {"url": "https://medium.com/u/3d4847f568f?source=post_page-----6849277c301b--------------------------------", "anchor_text": "Orian Sharoni", "paragraph_index": 25}, {"url": "https://medium.com/u/f6d919af8841?source=post_page-----6849277c301b--------------------------------", "anchor_text": "Roee Shenberg", "paragraph_index": 25}, {"url": "https://medium.com/u/b78663b78e1b?source=post_page-----6849277c301b--------------------------------", "anchor_text": "Yaara Arkin", "paragraph_index": 25}, {"url": "https://medium.com/u/2aa98abfade8?source=post_page-----6849277c301b--------------------------------", "anchor_text": "Yael Daihes", "paragraph_index": 25}], "all_paragraphs": ["VideoThat will automagically generate the perfect video compilation that fits impeccably to the theme song of your choice. The algorithm\u2019s default choice is to create a video clip from Taylor Swift\u2019s videos to an Arctic Monkeys song.", "Click here for a demo of the outcome \ud83c\udfac", "It\u2019s your best friend\u2019s wedding, and you want to make something nice for them. You gathered all of your mutual friends and recorded a personal song full of inside jokes and memorable stories. Everything is almost ready! Now all you have to do is manually edit all the party videos you have to fit perfectly to the song!", "Yup, sounds like a rather tedious task\u2026 Well, luckily, no need to do it manually anymore!", "The underlying assumption for this project is that the input videos already have an audio that fits perfectly to them. Therefore, we can match between video segments and audio snippets from your theme song, by finding correlated audio patterns.", "Our premise, then, is that matching the beat between the source material and the target song will yield a video that works well with the target song. The question is how to define beat matching, and our choice is to try to align as many note starts as possible.", "When a note is played, intuitively, we\u2019re adding sound. The na\u00efve way to quantify this is to look at the amount of energy (RMSE) added to the signal. Or, in algorithmic terms, calculate the energy in short windows of time, then calculate the difference between the amounts of energy (delta RMSE), and only keep positive values as we\u2019re looking for note starts (energy novelty).", "This works well if we only have one instrument playing one note at a time. Fortunately, that\u2019s not usually the case in real music, so we extend the principle, by looking at energy in different frequency bands: if we play a new note while the old one is still fading away, we might be keeping the total amount of energy in the song the same, but the new note is higher or lower in frequency, so we\u2019ll be able to detect the energy being added now.", "Librosa wraps this logic into librosa.onset.onset_strength, which yields a good signal for the task of detecting note onsets. If you want to be fun at parties, you can describe what it does as computing half-wave rectified spectral flux.", "More resources: Reference with code examples, The source code for onset_strength", "Before we can match between input videos segments and audio segments, we would first need to find those segments\u2026", "Segmenting videos can be done automatically, using the scenedetect python package.", "Then, to generate a fingerprint for each audio segment at hand, we use librosa python package to discover onset patterns.", "Finally, working in a greedy manner, we match video segments to the theme song, by finding the unused video who\u2019s audio is best correlated with the next segment in our theme song. To compute the correlation, we used a scoring function.", "The scoring function we chose is based on the correlation between the spectral novelty of each clip and the spectral novelty of the target song. However, choosing the raw correlation is a poor choice in practice, because the spectral novelty is a non-negative quantity, which biases us towards longer clips since they have more chances of having notes align even if the beat doesn\u2019t match.", "To combat this, we can look at the rate of correlation, or \u2018correlation per second\u2019, by dividing the total correlation by the length of the clip we correlate to. This is also not the best, since it biases us towards short clips that align perfectly, while we do want longer matches that aren\u2019t 100% on-beat for a more satisfying result.", "In the end we chose to use a balanced approach of dividing the correlation by the square root of the length of the clip, which still biases towards longer clips, but gives short-but-good matches a fighting chance:", "You might ask yourself, why greedy? There has to be a better way to do this! And indeed there is. There are in fact. Many better ways. As you can read on the next section, this project was tight in time, and quick wins were the expected result. But still, we did try some different approaches, and thought of future ones:", "Greedy search makes locally-good decisions that may be globally poor. A simple approach to rectifying this issue is to use a beam search in order to take more options into account. Another alternative would be to use a search strategy which is not sequential. For example, try to find globally good matching clips (e.g. \u201cclip 7 matches the middle of the song well\u201d) and then fill in the spaces left.", "There\u2019s plenty of room to fudge around with the score (e.g. subtract a small amount from the spectral novelty so that a note compared with silence will actively penalize the score, and silence on silence will add to it)", "This project was conceived, born and matured, during a 40 hour long Data Science Hackathon called DataHack (or as we like to call it in Israel \u2014 the yearly field trip of Data Science), held in Jerusalem every year, 2019 being the 5th event \ud83e\udd13", "Our team was formed out of previously random loose connections, and we were all taking a leap of faith hoping this will be a great match. Luckily, the chemistry was quick to manifest! We had a great time taking this idea from \u201cwhat are we going to do\u201d to \u201comg this is going to be amazing\u201d to \u201cok here are the steps we should take.\u2019\u2019", "To demonstrate the VideoThat ability, we took the top 30 videos of Taylor Swift on YouTube to stand for our video data set, and as the theme song we chose \u201c Do I Wanna Know \u201c by Arctic Monkeys.", "We each learned a lot, enjoyed our time interchanging ideas, held fruitful and insightful conversations, practiced a good work life balance during those 40 hours, and even won second place!", "Yael Daihes GitHub LinkedInYaara Arkin GitHub LinkedInOrian Sharoni GitHub LinkedInRoee Shenberg GitHub LinkedInDalya Gartzman GitHub LinkedIn", "Written and edited by Dalya Gartzman, Orian Sharoni, Roee Shenberg, Yaara Arkin and Yael Daihes", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F6849277c301b&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhttps-medium-com-orian-sharoni-videothat-6849277c301b&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhttps-medium-com-orian-sharoni-videothat-6849277c301b&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhttps-medium-com-orian-sharoni-videothat-6849277c301b&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhttps-medium-com-orian-sharoni-videothat-6849277c301b&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----6849277c301b--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----6849277c301b--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@orian.sharoni?source=post_page-----6849277c301b--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@orian.sharoni?source=post_page-----6849277c301b--------------------------------", "anchor_text": "Orian Sharoni"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F3d4847f568f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhttps-medium-com-orian-sharoni-videothat-6849277c301b&user=Orian+Sharoni&userId=3d4847f568f&source=post_page-3d4847f568f----6849277c301b---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F6849277c301b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhttps-medium-com-orian-sharoni-videothat-6849277c301b&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F6849277c301b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhttps-medium-com-orian-sharoni-videothat-6849277c301b&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://www.datahack.org.il/", "anchor_text": "DataHack"}, {"url": "https://github.com/Sharonio/VideoThat", "anchor_text": "VideoThat"}, {"url": "https://www.meimadix.com/videos/videoThat_snippet.mp4", "anchor_text": "Click here"}, {"url": "https://github.com/Sharonio/VideoThat", "anchor_text": "VideoThat"}, {"url": "http://librosa.github.io/librosa/generated/librosa.onset.onset_strength.html", "anchor_text": "librosa.onset.onset_strength"}, {"url": "https://musicinformationretrieval.com/novelty_functions.html", "anchor_text": "Reference with code examples"}, {"url": "https://librosa.github.io/librosa/_modules/librosa/onset.html#onset_strength_multi", "anchor_text": "The source code for onset_strength"}, {"url": "https://pypi.org/project/scenedetect/", "anchor_text": "scenedetect"}, {"url": "https://librosa.github.io/librosa/", "anchor_text": "librosa"}, {"url": "https://librosa.github.io/librosa/generated/librosa.onset.onset_detect.html#librosa.onset.onset_detect", "anchor_text": "onset"}, {"url": "https://www.datahack.org.il/", "anchor_text": "DataHack"}, {"url": "https://github.com/Sharonio/VideoThat", "anchor_text": "VideoThat"}, {"url": "https://www.youtube.com/taylorswift", "anchor_text": "Taylor Swift"}, {"url": "https://www.youtube.com/watch?v=bpOSxM0rNPM", "anchor_text": "Do I Wanna Know"}, {"url": "https://www.facebook.com/datahackil/photos/a.427954734076246/1196000310605014/?type=3&theater", "anchor_text": "won second place"}, {"url": "https://github.com/yooli3", "anchor_text": "GitHub"}, {"url": "https://www.linkedin.com/in/yael-daihes/", "anchor_text": "LinkedIn"}, {"url": "https://github.com/yaarasegre", "anchor_text": "GitHub"}, {"url": "https://www.linkedin.com/in/yaara-arkin-86706013/", "anchor_text": "LinkedIn"}, {"url": "https://github.com/Sharonio", "anchor_text": "GitHub"}, {"url": "https://www.linkedin.com/in/orian-sharoni/", "anchor_text": "LinkedIn"}, {"url": "https://github.com/shenberg", "anchor_text": "GitHub"}, {"url": "https://www.linkedin.com/in/roeeshenberg/", "anchor_text": "LinkedIn"}, {"url": "https://github.com/DalyaG", "anchor_text": "GitHub"}, {"url": "https://www.linkedin.com/in/dalya-gar/", "anchor_text": "LinkedIn"}, {"url": "https://medium.com/u/8cb8e88c4f51?source=post_page-----6849277c301b--------------------------------", "anchor_text": "Dalya Gartzman"}, {"url": "https://medium.com/u/3d4847f568f?source=post_page-----6849277c301b--------------------------------", "anchor_text": "Orian Sharoni"}, {"url": "https://medium.com/u/f6d919af8841?source=post_page-----6849277c301b--------------------------------", "anchor_text": "Roee Shenberg"}, {"url": "https://medium.com/u/b78663b78e1b?source=post_page-----6849277c301b--------------------------------", "anchor_text": "Yaara Arkin"}, {"url": "https://medium.com/u/2aa98abfade8?source=post_page-----6849277c301b--------------------------------", "anchor_text": "Yael Daihes"}, {"url": "https://www.meimadix.com/posts/videothat.html", "anchor_text": "https://www.meimadix.com"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----6849277c301b---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/tag/data-science?source=post_page-----6849277c301b---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/algorithms?source=post_page-----6849277c301b---------------algorithms-----------------", "anchor_text": "Algorithms"}, {"url": "https://medium.com/tag/hackathons?source=post_page-----6849277c301b---------------hackathons-----------------", "anchor_text": "Hackathons"}, {"url": "https://medium.com/tag/python?source=post_page-----6849277c301b---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F6849277c301b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhttps-medium-com-orian-sharoni-videothat-6849277c301b&user=Orian+Sharoni&userId=3d4847f568f&source=-----6849277c301b---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F6849277c301b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhttps-medium-com-orian-sharoni-videothat-6849277c301b&user=Orian+Sharoni&userId=3d4847f568f&source=-----6849277c301b---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F6849277c301b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhttps-medium-com-orian-sharoni-videothat-6849277c301b&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----6849277c301b--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F6849277c301b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhttps-medium-com-orian-sharoni-videothat-6849277c301b&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----6849277c301b---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----6849277c301b--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----6849277c301b--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----6849277c301b--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----6849277c301b--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----6849277c301b--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----6849277c301b--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----6849277c301b--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----6849277c301b--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@orian.sharoni?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@orian.sharoni?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Orian Sharoni"}, {"url": "https://medium.com/@orian.sharoni/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "20 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F3d4847f568f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhttps-medium-com-orian-sharoni-videothat-6849277c301b&user=Orian+Sharoni&userId=3d4847f568f&source=post_page-3d4847f568f--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fusers%2F3d4847f568f%2Flazily-enable-writer-subscription&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhttps-medium-com-orian-sharoni-videothat-6849277c301b&user=Orian+Sharoni&userId=3d4847f568f&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}