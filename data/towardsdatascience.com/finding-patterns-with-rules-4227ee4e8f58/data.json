{"url": "https://towardsdatascience.com/finding-patterns-with-rules-4227ee4e8f58", "time": 1683007374.4188328, "path": "towardsdatascience.com/finding-patterns-with-rules-4227ee4e8f58/", "webpage": {"metadata": {"title": "Finding patterns with rules, using Knowledge Graphs and Semantic Reasoning | by Peter Crocker | Towards Data Science", "h1": "Finding patterns with rules, using Knowledge Graphs and Semantic Reasoning", "description": "Machine learning algorithms are now synonymous with finding patterns in data but not all patterns are suitable for statistics based data-driven techniques, for example when these patterns don\u2019t have\u2026"}, "outgoing_paragraph_urls": [{"url": "https://www.oxfordsemantic.tech/product", "anchor_text": "RDFox", "paragraph_index": 2}, {"url": "https://www.w3.org/RDF/", "anchor_text": "RDF", "paragraph_index": 2}, {"url": "https://www.w3.org/TR/rdf-sparql-query/", "anchor_text": "SPARQL", "paragraph_index": 2}, {"url": "https://towardsdatascience.com/the-intuitions-behind-knowledge-graphs-and-reasoning-59df2f1ad054", "anchor_text": "here", "paragraph_index": 2}, {"url": "https://www.oxfordsemantic.tech/importing-data-into-rdfox", "anchor_text": "tutorial", "paragraph_index": 2}, {"url": "https://www.oxfordsemantic.tech/product", "anchor_text": "RDFox\u2019s", "paragraph_index": 43}, {"url": "https://www.oxfordsemantic.tech/team", "anchor_text": "Oxford Semantic Technologies", "paragraph_index": 44}, {"url": "https://www.samsungventure.co.kr/english_main.do", "anchor_text": "SVIC", "paragraph_index": 44}, {"url": "https://www.oxfordsciencesinnovation.com/", "anchor_text": "OSI", "paragraph_index": 44}, {"url": "https://innovation.ox.ac.uk/", "anchor_text": "OUI", "paragraph_index": 44}, {"url": "https://unsplash.com/@pawel_czerwinski?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Pawe\u0142 Czerwi\u0144ski", "paragraph_index": 45}, {"url": "https://unsplash.com/s/photos/fractal?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Unsplash", "paragraph_index": 45}], "all_paragraphs": ["Machine learning algorithms are now synonymous with finding patterns in data but not all patterns are suitable for statistics based data-driven techniques, for example when these patterns don\u2019t have explicitly labelled targets to learn from.", "In some cases, these patterns can be expressed precisely as a rule. Reasoning is the process of matching rule-based patterns or verifying that they don\u2019t exist in a graph. Because these patterns are found with deductive logic they can be found more efficiently and interpreted more easily than Machine Learning patterns which are induced from the data.", "This article will introduce some common patterns and how you can express them in the rule language, Datalog, using RDFox, a knowledge graph and semantic reasoning engine developed by Oxford Semantic Technologies. RDFox is a standards based, RDF-triple store which we will query with SPARQL. If you are not yet familiar with knowledge graphs and reasoning, you can read an introduction published on Towards Data Science here. If you don\u2019t have RDF data, read our simple tutorial for importing CSVs and SQL data into an RDF graph.", "The \u201clocated in\u201d relation is intuitively transitive but might not be completely expressed in the graph. For example, a graph might contain the following triples:", "A SPARQL query will not return that Oxford is located in England because it is missing the triple:", "This triple could be added on a one-off basis, but this would soon become impractical on larger graphs where other towns located in Oxfordshire might also be missing the located in England edge.", "In this case, a transitive relation rule can effortlessly draw the relevant :located_in edges automatically:", "The first part is the head of the rule which will materialise ?x :located_in ?z triples if the pattern following the symbol :- is found in the graph.", "In our example, the rule will bind the variable ?x to :oxford, variable ?y to :oxfordshire and variable ?z to :england, and then as a logical consequence of the rule being satisfied, create the :oxford :located_in :england triple by replacing ?x with :oxford and ?z with :england.", "RDFox will materialise the rule incrementally on the fly whenever new data points are added or removed from the graph which makes it an efficient solution for dynamic data sources.", "Transitive closure patterns help materialise transitive relations which don\u2019t yet exist in the graph but could potentially. For example, some Twitter followers can be represented in the following graph:", "When recommending follow suggestions to the users we might wish to compute the missing connections as :follows_closure edges using the following rules:", "The first rule specifies that the new relation :follows_closure is an extension of the relation :follows. The second rule implements the closure by saying that if a person ?x directly follows ?y and ?y (directly or indirectly) follows person ?z, then ?x (indirectly) follows ?z.", "The new :follows_closure relations which were not originally a :follows relation are therefore:", "These simple rules can be enhanced to include user interests, geography, language, common followers etc.", "An important practical use of knowledge graphs is to power Open Query Answering (Open QA) applications or chatbots, where the user asks a question in natural language, which is then automatically answered against the graph. Open QA systems often struggle to interpret questions that involve several \u201chops\u201d in the graph. For instance, consider the graph consisting of the triples given next.", "A user may ask in which country Douglas Adams was born. To obtain this information, the system would need to construct a query involving two hops in the graph. In particular, the SPARQL query", "would return :uk as an answer.", "The results of the open QA system would be greatly enhanced if the desired information had been available in just a single hop. RDFox rules can be used to provide a clean solution in this situation. In particular, we can use rules to define a new :country_of_birth relation that provides a \u201cshortcut\u201d for directly accessing the desired information.", "The rule says that, if a person ?x is born in a place ?y, and that place ?y is a :country, then ?y is the country of birth of ?x.", "As a result, RDFox would derive that Douglas Adams\u2019 country of birth is the UK. The Open QA system would now only need to construct the following simpler query, which involves a single hop in the graph, to obtain the desired information.", "As we have already seen rules can build on the results of other rules so this pattern combined with the the first, transitive relation, can cater for data which includes more the full detail of where Douglas Adams was born. Such as:", "When the rules are applied to this data they produce the graph visualised below.", "A common task in knowledge graphs is to identify cyclic relationships. For instance, partonomy relations are typically acyclic (e.g., if an engine is part of a car, we wouldn\u2019t expect the car to be part of the engine as well!). In these cases, cycle detection may be needed to detect errors in the graph and thus provide data validation. Cycle detection is also useful for detecting fraud or insider trading by identifying for example communication relations in the network which shouldn\u2019t exist.", "Consider the following graph with \u201cpart of\u201d relations:", "The graph contains a cyclic path :piston -> :engine -> :car -> :piston. via the :part_of relation.", "The relationship is naturally transitive and can be define with the following rule:", "The following SPARQL query will return the elements which are part of others (directly or indirectly)", "Which gives us the following results", "A cycle manifests itself by the presence of self-loops (e.g. :piston is derived to be a part of itself).", "Hence, it is possible to detect cyclic part of relations with the following SPARQL query.", "Alternatively, we could define cyclic relations with the following rule:", "Which tells us that if any object is determined to be a part of itself, then the partonomy relation is cyclic.", "We can now easily retrieve the list of cyclic relations in the graph.", "To obtain :part_of as a result.", "Many relations naturally imply some sort of order, and in such cases, we might be interested in finding the first and last elements of such orders.", "For instance, consider the managerial structure of a company.", "We would like to recognise which individuals in the company are \u201ctop-level managers\u201d. We can use a rule to define a top-level manager as a person who manages someone and is not managed by anyone else.", "asking for the list of top level managers gives :alice as the answer.", "We can now use a rule to define \u201cjunior employees\u201d as those who have a manager but who themselves do not manage anyone else.", "The query for junior employees is then", "This returns :monica and :david as answers.", "This was a short introduction to a sample of rule-based patterns which will be expanded with more examples and applications in my next articles. Imagine what is possible with the combination of these with other rules and when run at scale over your data.", "If you would like to search for rule-based patterns yourself visit RDFox\u2019s getting started guide.", "The team behind Oxford Semantic Technologies started working on RDFox in 2011 at the Computer Science Department of the University of Oxford with the conviction that flexible and high-performance reasoning was a possibility for data extensive applications without jeopardising the correctness of the results. RDFox is the first market-ready knowledge graph designed from ground up with reasoning in mind. Oxford Semantic Technologies is a spin out of the University of Oxford and is backed by leading investors including Samsung Venture Investment Corporation (SVIC), Oxford Sciences Innovation (OSI) and Oxford University\u2019s investment arm (OUI). The author is proud to be a member of this team.", "Photo by Pawe\u0142 Czerwi\u0144ski on Unsplash", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F4227ee4e8f58&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffinding-patterns-with-rules-4227ee4e8f58&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffinding-patterns-with-rules-4227ee4e8f58&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffinding-patterns-with-rules-4227ee4e8f58&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffinding-patterns-with-rules-4227ee4e8f58&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----4227ee4e8f58--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----4227ee4e8f58--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@peter.crocker?source=post_page-----4227ee4e8f58--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@peter.crocker?source=post_page-----4227ee4e8f58--------------------------------", "anchor_text": "Peter Crocker"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F2ef284cfaf5b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffinding-patterns-with-rules-4227ee4e8f58&user=Peter+Crocker&userId=2ef284cfaf5b&source=post_page-2ef284cfaf5b----4227ee4e8f58---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F4227ee4e8f58&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffinding-patterns-with-rules-4227ee4e8f58&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F4227ee4e8f58&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffinding-patterns-with-rules-4227ee4e8f58&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://www.oxfordsemantic.tech/product", "anchor_text": "RDFox"}, {"url": "https://www.w3.org/RDF/", "anchor_text": "RDF"}, {"url": "https://www.w3.org/TR/rdf-sparql-query/", "anchor_text": "SPARQL"}, {"url": "https://towardsdatascience.com/the-intuitions-behind-knowledge-graphs-and-reasoning-59df2f1ad054", "anchor_text": "here"}, {"url": "https://www.oxfordsemantic.tech/importing-data-into-rdfox", "anchor_text": "tutorial"}, {"url": "https://www.oxfordsemantic.tech/product", "anchor_text": "RDFox\u2019s"}, {"url": "https://www.oxfordsemantic.tech/team", "anchor_text": "Oxford Semantic Technologies"}, {"url": "https://www.samsungventure.co.kr/english_main.do", "anchor_text": "SVIC"}, {"url": "https://www.oxfordsciencesinnovation.com/", "anchor_text": "OSI"}, {"url": "https://innovation.ox.ac.uk/", "anchor_text": "OUI"}, {"url": "https://unsplash.com/@pawel_czerwinski?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Pawe\u0142 Czerwi\u0144ski"}, {"url": "https://unsplash.com/s/photos/fractal?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Unsplash"}, {"url": "https://medium.com/tag/rdfox?source=post_page-----4227ee4e8f58---------------rdfox-----------------", "anchor_text": "Rdfox"}, {"url": "https://medium.com/tag/knowledge-graph?source=post_page-----4227ee4e8f58---------------knowledge_graph-----------------", "anchor_text": "Knowledge Graph"}, {"url": "https://medium.com/tag/semanticweb?source=post_page-----4227ee4e8f58---------------semanticweb-----------------", "anchor_text": "Semanticweb"}, {"url": "https://medium.com/tag/ai?source=post_page-----4227ee4e8f58---------------ai-----------------", "anchor_text": "AI"}, {"url": "https://medium.com/tag/data-science?source=post_page-----4227ee4e8f58---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F4227ee4e8f58&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffinding-patterns-with-rules-4227ee4e8f58&user=Peter+Crocker&userId=2ef284cfaf5b&source=-----4227ee4e8f58---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F4227ee4e8f58&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffinding-patterns-with-rules-4227ee4e8f58&user=Peter+Crocker&userId=2ef284cfaf5b&source=-----4227ee4e8f58---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F4227ee4e8f58&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffinding-patterns-with-rules-4227ee4e8f58&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----4227ee4e8f58--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F4227ee4e8f58&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffinding-patterns-with-rules-4227ee4e8f58&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----4227ee4e8f58---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----4227ee4e8f58--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----4227ee4e8f58--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----4227ee4e8f58--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----4227ee4e8f58--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----4227ee4e8f58--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----4227ee4e8f58--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----4227ee4e8f58--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----4227ee4e8f58--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@peter.crocker?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@peter.crocker?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Peter Crocker"}, {"url": "https://medium.com/@peter.crocker/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "90 Followers"}, {"url": "https://www.oxfordsemantic.tech/", "anchor_text": "https://www.oxfordsemantic.tech/"}, {"url": "https://twitter.com/petecrocker", "anchor_text": "https://twitter.com/petecrocker"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F2ef284cfaf5b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffinding-patterns-with-rules-4227ee4e8f58&user=Peter+Crocker&userId=2ef284cfaf5b&source=post_page-2ef284cfaf5b--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F94ffcb10e23f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffinding-patterns-with-rules-4227ee4e8f58&newsletterV3=2ef284cfaf5b&newsletterV3Id=94ffcb10e23f&user=Peter+Crocker&userId=2ef284cfaf5b&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}