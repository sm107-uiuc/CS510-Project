{"url": "https://towardsdatascience.com/index-tracking-portfolio-optimization-8250d27449e6", "time": 1683006221.783385, "path": "towardsdatascience.com/index-tracking-portfolio-optimization-8250d27449e6/", "webpage": {"metadata": {"title": "Index Replication using Portfolio Optimization Methods | by Jason Yip | Towards Data Science", "h1": "Index Replication using Portfolio Optimization Methods", "description": "It\u2019s been a whole year since I last posted and I thought to write about a project I\u2019ve done recently during the stay-home period. It was difficult finding practical resources online. There were many\u2026"}, "outgoing_paragraph_urls": [{"url": "https://etfdb.com/history-of-the-s-and-p-500/#1984", "anchor_text": "Standard Oil of Indiana was among the largest companies in the U.S by market cap", "paragraph_index": 6}, {"url": "https://www.ftserussell.com/press/ftse-russell-announces-schedule-annual-russell-us-index-reconstitution https://www.ftserussell.com/press/ftse-russell-announces-2018-russell-us-indexes-reconstitution-schedule", "anchor_text": "annual reconstitution schedules", "paragraph_index": 7}, {"url": "https://content.ftserussell.com/sites/default/files/support_document/2018-russell-us-index-reconstitution-recap_0.pdf", "anchor_text": "2018", "paragraph_index": 7}, {"url": "https://content.ftserussell.com/sites/default/files/support_document/2017_russell_reconstitution_recap_final.pdf", "anchor_text": "2017", "paragraph_index": 7}, {"url": "https://research.ftserussell.com/products/downloads/Russell_Index_Calculation_Methodology.pdf?_ga=2.110735813.1991880057.1587129456-1914712361.1587129456", "anchor_text": "Price Return Index from Russell", "paragraph_index": 8}, {"url": "https://research.ftserussell.com/products/downloads/Russell-US-equity-indexes-IOSCO.pdf?_ga=2.110735813.1991880057.1587129456-1914712361.1587129456", "anchor_text": "Index value", "paragraph_index": 8}, {"url": "http://www.linkedin.com/in/jasonyip184", "anchor_text": "www.linkedin.com/in/jasonyip184", "paragraph_index": 35}], "all_paragraphs": ["It\u2019s been a whole year since I last posted and I thought to write about a project I\u2019ve done recently during the stay-home period. It was difficult finding practical resources online. There were many math-heavy and theoretical academic papers, but I wanted to support others out there who were looking out for code and a layman\u2019s understanding since I\u2019ve already spent the past 4 days researching and working on this project.", "I will leave most of the code out from this post but you can access everything here:", "is a passive investment strategy that attempts to re-create a portfolio that generates returns similar to a broad market index. This can be achieved in these ways:", "A Full Replication of an index requires the fund to hold the shares of all the assets in the index and replicate as close as possible each asset\u2019s weight in the index. Trading illiquid assets in the index could add to higher transaction costs for the fund, resulting in higher expense ratios and a poorer fund performance.", "The aim of this project is to replicate the index using an optimal portfolio selection of the largest assets in the index by reducing Tracking Error. Ultimately, we will produce a weight for each of the largest assets in the portfolio to replicate the performance of the index with only a few assets.", "Russell 1000 is a stock market index maintained by FTSE Russell that tracks the highest-ranking 1,000 stocks in the entire U.S stock market that we aim to replicate for the following. Test Period: 2019\u201304\u201301 to 2019\u201304\u201330.", "Market indices go through periodic rebalancing to ensure they keep up with the current market. Back when FTSE Russell started the index in 1984, Standard Oil of Indiana was among the largest companies in the U.S by market cap. Today, the company doesn\u2019t exist as it had been dissolved.", "According to the annual reconstitution schedules, there is a \u2018rank day\u2019 where the rankings for the top 1000 companies by market cap are computed at market close. This is followed by a transition period before the reconstitution takes place on the \u2018effect day\u2019, where markets open with the newly reconstituted index. We should be careful to account for this in approximating the index with the top companies because they (or their weights) might change across the years. I used the Top 10 components of the index published by FTSE\u2019s reconstitution recap report in 2018 and 2017. The training data is taken from 2018\u201306\u201325 to 2019\u201302\u201328.", "We will reconstruct the Index with the Top 10 components using the Price Return Index from Russell (page 4). The Index value (page 34) is then obtained by compounding the daily return percentages of the Price Return Index. The starting value of the index is equal to the base and this was set as 100 on 12/31/78. Therefore on our base date: 2017\u201306\u201327 and we will use the ^RUI\u2019s Close = 1341.03 (from Yahoo Finance) as our base value. The results don\u2019t look close at all using only the Top 10.", "The idea is to fit a linear combination of the current top 10 components against index prices in a constrained linear least squares model for the training period. The coeffs obtained will then be non-negative since it is a Long only portfolio.", "Each coeff is taken over the sum of coeffs as weightings for each component to be taken in the test period. The sum of weightings will be the amount of leverage that the portfolio requires to replicate the index price.", "The optimization called from the library is essentially:", "The coeffs are then used as weights in this linear combination, where the leverage factor is the sum of coefficients:", "While I have validated the model on a holdout period of 1 month before the test period as well, I will only show the results on the test set.", "The replicated index seems to visually match up well to the actual index in terms of price and daily returns. The Tracking Error is 43 basis points (0.43%) and RMSE (from the actual) seems pretty low.", "The idea is to allocate more weight to a component if it is more correlated with the index\u2019s actual close. Partial correlation correlates the residuals from 1) least-squares regression of Index on the other IVs & 2) least-squares regression of individual IV on other IVs. This accounts for confounding & 3rd party effects. I also ignored negatively correlated components by setting it to 0. Similarly, we will take each correlation over the sum to get the weightings", "The optimization called from the library is essentially (where train includes both the historic component & actual index prices:", "As above, the similar linear combination approach will be used to simulate the actual.", "Tracking Error and Returns RMSE are higher than the benchmark. However, the Price RMSE is a lot lower. This is probably due to the oversimplification made by this model in considering the effects of each component independently.", "Pearson correlation is unable to capture shape similarity and will determine that a pair of timeseries are uncorrelated with each other even though they maybe are very similar and simply out of phase. This could be apparent between leading/lagging variables and their counterparts. The idea is to allocate more weight to a component if it has a relatively shorter DTW distance with the index and thus, a more similar shape.", "The goal is to optimize this for each component (x) and the actual index (y):", "The optimization called from the library is essentially:", "The Tracking error, Price RMSE & Returns RMSE performed worse than the Partial Correlation Model. This could mean that the shape similarity might not have been a huge factor in differentiating each component from each other.", "While NNLS is a supervised learning approach, the unsupervised NMF method is able to learn the representation of the data via a single principal component. The principal component will be a linear combination of the assets such that the coeffs will be non-negative due to the constraints in this algo. The idea is to find the relative importance of each asset in contributing to the overall variation in the data and use that as our weightings in a linear combination again.", "The optimization called from the library is essentially:", "The problem with this approach is that the prices cannot be properly replicated as we will not know the leverage factor in an unsupervised learning method, thus the price RMSE is very high.", "PSO emulates \u2018social creatures\u2019 that are scattered around the search space and moving to find the optima. The optimization function here is to minimize Tracking Error.", "Bounds = [0,1] since coeffs are non-negative and the value of the component cannot be more than the index.", "Grid search is performed over c1, c2, w. The code for the grid search is almost the same as the chunk below and it will give you best_pos to be used in the chunk below to for the final optimization.", "The particle (set of coefficients) with the lowest cost (Tracking Error) will be used as coefficients, taken over the sum of coefficients as weights, and used in a linear combination to reconstruct the index.", "Tracking Error for the PSO model is the lowest.", "The following quantitative methods were used on prices of the Top 10 components and the actual Index price in the training period:", "The weights obtained were then used to allocate a portfolio to simulate the index prices and daily returns in the test period. The performance was then measured by the Tracking Error and Price/Daily Returns RMSE from the actual index.", "I have learnt a lot from this project in such a short amount of time and it has really opened my eyes up to more applications of quantitative methods in finance. Hope you\u2019ve enjoyed reading this as much as I\u2019ve enjoyed creating it.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Commodities Trader at J.P. Morgan | Financial Analytics Major, Math & Economics Minor from NUS | www.linkedin.com/in/jasonyip184"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F8250d27449e6&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Findex-tracking-portfolio-optimization-8250d27449e6&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Findex-tracking-portfolio-optimization-8250d27449e6&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Findex-tracking-portfolio-optimization-8250d27449e6&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Findex-tracking-portfolio-optimization-8250d27449e6&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----8250d27449e6--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----8250d27449e6--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@jasonyip184?source=post_page-----8250d27449e6--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@jasonyip184?source=post_page-----8250d27449e6--------------------------------", "anchor_text": "Jason Yip"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fd2f66e48b4d5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Findex-tracking-portfolio-optimization-8250d27449e6&user=Jason+Yip&userId=d2f66e48b4d5&source=post_page-d2f66e48b4d5----8250d27449e6---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F8250d27449e6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Findex-tracking-portfolio-optimization-8250d27449e6&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F8250d27449e6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Findex-tracking-portfolio-optimization-8250d27449e6&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://htmlpreview.github.io/?https://github.com/jasonyip184/Index-Tracking-Portfolio-Optimization/blob/master/Index-Tracking-Portfolio-Optimization.html", "anchor_text": "Link to Code / Notebook"}, {"url": "https://github.com/jasonyip184/Index-Tracking-Portfolio-Optimization", "anchor_text": "Link to Repo"}, {"url": "https://etfdb.com/history-of-the-s-and-p-500/#1984", "anchor_text": "Standard Oil of Indiana was among the largest companies in the U.S by market cap"}, {"url": "https://www.ftserussell.com/press/ftse-russell-announces-schedule-annual-russell-us-index-reconstitution https://www.ftserussell.com/press/ftse-russell-announces-2018-russell-us-indexes-reconstitution-schedule", "anchor_text": "annual reconstitution schedules"}, {"url": "https://content.ftserussell.com/sites/default/files/support_document/2018-russell-us-index-reconstitution-recap_0.pdf", "anchor_text": "2018"}, {"url": "https://content.ftserussell.com/sites/default/files/support_document/2017_russell_reconstitution_recap_final.pdf", "anchor_text": "2017"}, {"url": "https://research.ftserussell.com/products/downloads/Russell_Index_Calculation_Methodology.pdf?_ga=2.110735813.1991880057.1587129456-1914712361.1587129456", "anchor_text": "Price Return Index from Russell"}, {"url": "https://research.ftserussell.com/products/downloads/Russell-US-equity-indexes-IOSCO.pdf?_ga=2.110735813.1991880057.1587129456-1914712361.1587129456", "anchor_text": "Index value"}, {"url": "https://medium.com/tag/portfolio-optimisation?source=post_page-----8250d27449e6---------------portfolio_optimisation-----------------", "anchor_text": "Portfolio Optimisation"}, {"url": "https://medium.com/tag/index-funds?source=post_page-----8250d27449e6---------------index_funds-----------------", "anchor_text": "Index Funds"}, {"url": "https://medium.com/tag/quantitative-finance?source=post_page-----8250d27449e6---------------quantitative_finance-----------------", "anchor_text": "Quantitative Finance"}, {"url": "https://medium.com/tag/portfolio-management?source=post_page-----8250d27449e6---------------portfolio_management-----------------", "anchor_text": "Portfolio Management"}, {"url": "https://medium.com/tag/data-science?source=post_page-----8250d27449e6---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F8250d27449e6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Findex-tracking-portfolio-optimization-8250d27449e6&user=Jason+Yip&userId=d2f66e48b4d5&source=-----8250d27449e6---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F8250d27449e6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Findex-tracking-portfolio-optimization-8250d27449e6&user=Jason+Yip&userId=d2f66e48b4d5&source=-----8250d27449e6---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F8250d27449e6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Findex-tracking-portfolio-optimization-8250d27449e6&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----8250d27449e6--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F8250d27449e6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Findex-tracking-portfolio-optimization-8250d27449e6&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----8250d27449e6---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----8250d27449e6--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----8250d27449e6--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----8250d27449e6--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----8250d27449e6--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----8250d27449e6--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----8250d27449e6--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----8250d27449e6--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----8250d27449e6--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@jasonyip184?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@jasonyip184?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Jason Yip"}, {"url": "https://medium.com/@jasonyip184/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "599 Followers"}, {"url": "http://www.linkedin.com/in/jasonyip184", "anchor_text": "www.linkedin.com/in/jasonyip184"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fd2f66e48b4d5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Findex-tracking-portfolio-optimization-8250d27449e6&user=Jason+Yip&userId=d2f66e48b4d5&source=post_page-d2f66e48b4d5--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F5dd55ba2910e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Findex-tracking-portfolio-optimization-8250d27449e6&newsletterV3=d2f66e48b4d5&newsletterV3Id=5dd55ba2910e&user=Jason+Yip&userId=d2f66e48b4d5&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}