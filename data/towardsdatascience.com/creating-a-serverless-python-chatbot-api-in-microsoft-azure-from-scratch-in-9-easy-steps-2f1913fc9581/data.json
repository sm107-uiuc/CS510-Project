{"url": "https://towardsdatascience.com/creating-a-serverless-python-chatbot-api-in-microsoft-azure-from-scratch-in-9-easy-steps-2f1913fc9581", "time": 1683004267.29699, "path": "towardsdatascience.com/creating-a-serverless-python-chatbot-api-in-microsoft-azure-from-scratch-in-9-easy-steps-2f1913fc9581/", "webpage": {"metadata": {"title": "Creating a Serverless Python Chatbot API in Microsoft Azure from Scratch in 9 Easy Steps | by Christiano Christakou | Towards Data Science", "h1": "Creating a Serverless Python Chatbot API in Microsoft Azure from Scratch in 9 Easy Steps", "description": "Chatbots and serverless are two tech trends that have completely dominated the corporate world in 2020: Why not kill two birds with one stone and learn how to build your own serverless chatbot? We\u2026"}, "outgoing_paragraph_urls": [], "all_paragraphs": ["Chatbots and serverless are two tech trends that have completely dominated the corporate world in 2020: Why not kill two birds with one stone and learn how to build your own serverless chatbot?", "By the end of this article you will know how to:", "We all know by now that in years to come chatbots will become increasingly prominent in organisations around the world. From optimising the exchange of information between companies and costumers to completely replacing sales teams.", "According to a paper published by Juniper Research, we can expect that up to 75% of queries in the customer service sector will be handled by bots by 2022 driving business costs of $8 billion dollars per year.", "Serverless applications are another huge trend in tech, they allow for the deployment of simple applications online without the need to set up or manage any sort of server infrastructure. Moreover, with the great cloud services now made available companies such as Microsoft and Amazon, it is possible (and very easy) to scale your application completely in accordance to usage, so you only pay for how much you use, and never have to worry about not having enough bandwidth!", "Now we will go through a few steps to get your bot built and set up. What you will need is simply an Azure Subscription, Visual Studio Code (VSCode) installed in your machine alongside some version of Python!", "First login to the Azure portal and look for Web App Bot on the search bar, this should allow you to navigate to the Bot Services page where you can create a new Web App Bot on Azure Portal.", "Click on add to create a new service, this will take you to the following page where you will have to choose a bunch of configurations, you might need to create a new resource group, and make sure you choose the S1 pricing tier, (all we will need for now).", "Choose the Echo Bot C# template, we will modify the template slightly to connect the bot to our API later.", "At this point, we will create the back-end that our bot will interact with. There are multiple ways of doing this, you could create an API in Flask, Django or any other framework.", "We will use the Azure Function App since it makes it very simple to set up a serverless API that scales beautifully with demand.", "First, create a new folder and open it on VSCode:", "Now we need to install a few extensions that will help us create a Function App and push it to Azure, namely we want Azure CLI Tools and Azure Functions.", "Once you\u2019ve installed the extensions to VSCode you can log in to your Azure subscription through VSCode to manage resources from there!", "Press CTRL+SHIFT+P to open the VSCode command pallet, then type in Azure Sign in.", "Once you\u2019ve signed in you should see this on the bottom bar of VSCode:", "Navigate to the Azure function tab in VSCode and create a new project:", "Follow the prompt that will appear on VSCode command pallet:", "Select the language to use (in this case Python) and create a new virtual environment:", "As our template we will be using the HTTP Trigger:", "We will make our security option Anonymous, this means that anyone can access your API without the need for an API key, you can read more about the authentication settings here:", "Finally, choose a name for the folder holding your serverless Function App and press enter.", "Now that you\u2019ve created your function app, a folder structure should have been automatically generated for your project. You should see a folder with the same name as you\u2019ve just passed when creating your project in Step 3.", "In this folder there should be a python file called __init__.py, looking something like this:", "The syntax for the main function definition can look a little daunting at first even for experienced Python programmers:", "This piece of code is simply specifying that the function will execute upon receiving an a request object, and will return an HTTP response.", "From here we can easily modify this template to add the functionality we want to serve through our bot interface, this could include for instance querying data from a SQL database, triggering other functions or whatever other jobs you might need your bot to do.", "For this use case, we will be using open UK government data: our serverless function will get an HTTP request containing the name of a city in the UK and it will return a list of all the libraries in that city.", "Let's create a folder in our application called modules and a new file inside it called library_finder.py .", "Your project at this point should be looking something like this:", "Inside library_finder.py paste the following code snippet:", "You will need to install pandas in the virtual environment that was created for us by the azure function.", "If you\u2019re unfamiliar with virtual environments, check out this link:", "Our virtual environment has already been set-up, we just need to activate it now. This can easily be done in vscode by typing", "into the terminal window in VSCode.", "If your environment has been successfully activated, you will see (.venv) in the beginning of the path.", "Now we can install pandas, simply type \u2018pip install pandas\u2019 into your console", "(the same process can be repeated for any other external library you wish to install through pip).", "Its very important to now add pandas to your requirements.txt file which should look something like this:", "Now we can go back to __init__.py (our main file for the serverless application) and modify the code so that upon receiving an HTTP request (a) we will look for a text field on the json attached to the body of the request, (b) we will read the text and parse it, (c) we will call the function we have just defined and return the data requested.", "The following code will work for our purposes:", "We have now created a basic serverless API using Azure Functions, it\u2019s time to test if we have everything working as intended!", "We can start our Azure function app locally. To do so type the following command into the terminal in VS Code:", "Your function will be initialised and you should see the iconic Azure Function App logo!", "If everything worked, you should expect to see no errors and a message like this at the end of the prompt:", "This message contains the URL to communicate to the serverless application we started locally. This can easily be done using a free software called Postman. In Postman you can debug your API by sending a request and viewing the response.", "Alternatively, you can test whether the API is working by opening Python in a command prompt window and sending a request to the specified URL, and checking that we get the expected response.", "Now that your server-less application is working and you have successfully created an HTTP trigger, it is time to deploy it to Azure so you can access it from outside your local network.", "To deploy it, simply navigate to your Azure tab in VScode and scroll to the functions window.", "Right click your Azure subscription and press Create Function App in Azure.", "The prompt will ask you to name your function, provide a location and a version of Python. Follow the steps as required and wait until your Azure function has been created. You should be able to find it in the Azure Functions tab, once again right click on the function and select Deploy to Function App.", "A prompt will come up asking to confirm the deployment, then after a few minutes, a message should come up to indicate the deployment has been successful.", "When that happens you can check if your deployment worked by opening a browser window and navigating to:", "You can also find this link if you navigate to your Function App in the Azure Portal page.", "Once you access the link you should see this page:", "That means that you have successfully deployed your Function App to the internet, now anyone can access your server-less API! (depending on the authentication setting you chose when you created the HTTP trigger)", "For this step, we will go back to the Bot APP Service we created in Azure portal in Step 1 of this tutorial!", "Navigate to the web bot service homepage and go to the build tab, then click on \u201cOpen online code editor\u201d.", "From the online code editor navigate to Bots > EchoBot.cs", "This will allow you to make some slight modifications to the C# code for the bot, this is what you should see initially:", "Replace the code on this page by the code provided below:", "Remember to replace the URL for the URL access point of the Azure Function App we created in the last step!", "Now we just need to build the modification we\u2019ve made to the C# code, this can easily be done by right clicking the build.cmd file on the page", "We can test our bot and check if it it\u2019s all working as intended. Open Azure Portal and navigate to your Web App Bot main page.", "Select the option Test in Web chat:", "If everything works as intended you are ready to add this bot to any of the supported channels.", "Configure the Microsoft Teams channel by pressing save and accepting the terms of use.", "Next, we can provide someone the link to talk to our bot by pressing the \u2018get bot embed codes\u2019 link and copying the URL inside the HTML tag.", "Anyone that accesses the URL will be invited to add the bot on MS Teams as such:", "MS Teams will open up and our Bot should be listed as one of your chats.", "This might be enough to satisfy your bot needs, if you\u2019d wish to publish the bot, so it can be added to a group chat in MS Teams, you can do so by opening MS Teams and clicking on the \u2018\u2026\u2019 icon, and opening the App Studio:", "Click on Create a new app:", "You will have to fill in the registration form. Importantly, once you\u2019ve filled in all the required information, navigate to the Bots tab and press the Set up button:", "In the Existing Bot tab, the bot we\u2019ve just created should be listed on the drop down menu", "The last step is to navigate to the test and distribute tab on the manifest editor and install your app in teams.", "You\u2019ve configured your MS Teams app all you need to do is invite the bot to a particular team and enjoy your new server-less bot app.", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F2f1913fc9581&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreating-a-serverless-python-chatbot-api-in-microsoft-azure-from-scratch-in-9-easy-steps-2f1913fc9581&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreating-a-serverless-python-chatbot-api-in-microsoft-azure-from-scratch-in-9-easy-steps-2f1913fc9581&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreating-a-serverless-python-chatbot-api-in-microsoft-azure-from-scratch-in-9-easy-steps-2f1913fc9581&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreating-a-serverless-python-chatbot-api-in-microsoft-azure-from-scratch-in-9-easy-steps-2f1913fc9581&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----2f1913fc9581--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----2f1913fc9581--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@christiano.christakou?source=post_page-----2f1913fc9581--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@christiano.christakou?source=post_page-----2f1913fc9581--------------------------------", "anchor_text": "Christiano Christakou"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fb45f1b576b62&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreating-a-serverless-python-chatbot-api-in-microsoft-azure-from-scratch-in-9-easy-steps-2f1913fc9581&user=Christiano+Christakou&userId=b45f1b576b62&source=post_page-b45f1b576b62----2f1913fc9581---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F2f1913fc9581&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreating-a-serverless-python-chatbot-api-in-microsoft-azure-from-scratch-in-9-easy-steps-2f1913fc9581&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F2f1913fc9581&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreating-a-serverless-python-chatbot-api-in-microsoft-azure-from-scratch-in-9-easy-steps-2f1913fc9581&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://docs.microsoft.com/en-us/azure/azure-functions/", "anchor_text": "Azure Functions documentationAzure Functions is a serverless compute service that lets you run event-triggered code without having to explicitly\u2026docs.microsoft.com"}, {"url": "https://docs.python.org/3/tutorial/venv.html", "anchor_text": "12. Virtual Environments and Packages - Python 3.8.2 documentationPython applications will often use packages and modules that don't come as part of the standard library. Applications\u2026docs.python.org"}, {"url": "https://towardsdatascience.com/[name_of_your_functionapp].azurewebsites.net/", "anchor_text": "https://[name_of_your_functionapp].azurewebsites.net/"}, {"url": "https://medium.com/tag/data-science?source=post_page-----2f1913fc9581---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/chatbots?source=post_page-----2f1913fc9581---------------chatbots-----------------", "anchor_text": "Chatbots"}, {"url": "https://medium.com/tag/python?source=post_page-----2f1913fc9581---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/azure?source=post_page-----2f1913fc9581---------------azure-----------------", "anchor_text": "Azure"}, {"url": "https://medium.com/tag/software-development?source=post_page-----2f1913fc9581---------------software_development-----------------", "anchor_text": "Software Development"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F2f1913fc9581&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreating-a-serverless-python-chatbot-api-in-microsoft-azure-from-scratch-in-9-easy-steps-2f1913fc9581&user=Christiano+Christakou&userId=b45f1b576b62&source=-----2f1913fc9581---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F2f1913fc9581&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreating-a-serverless-python-chatbot-api-in-microsoft-azure-from-scratch-in-9-easy-steps-2f1913fc9581&user=Christiano+Christakou&userId=b45f1b576b62&source=-----2f1913fc9581---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F2f1913fc9581&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreating-a-serverless-python-chatbot-api-in-microsoft-azure-from-scratch-in-9-easy-steps-2f1913fc9581&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----2f1913fc9581--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F2f1913fc9581&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreating-a-serverless-python-chatbot-api-in-microsoft-azure-from-scratch-in-9-easy-steps-2f1913fc9581&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----2f1913fc9581---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----2f1913fc9581--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----2f1913fc9581--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----2f1913fc9581--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----2f1913fc9581--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----2f1913fc9581--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----2f1913fc9581--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----2f1913fc9581--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----2f1913fc9581--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@christiano.christakou?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@christiano.christakou?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Christiano Christakou"}, {"url": "https://medium.com/@christiano.christakou/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "12 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fb45f1b576b62&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreating-a-serverless-python-chatbot-api-in-microsoft-azure-from-scratch-in-9-easy-steps-2f1913fc9581&user=Christiano+Christakou&userId=b45f1b576b62&source=post_page-b45f1b576b62--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fusers%2Fb45f1b576b62%2Flazily-enable-writer-subscription&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreating-a-serverless-python-chatbot-api-in-microsoft-azure-from-scratch-in-9-easy-steps-2f1913fc9581&user=Christiano+Christakou&userId=b45f1b576b62&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}