{"url": "https://towardsdatascience.com/a-data-science-approach-to-stockholms-apartment-prices-part-2-13e51772b528", "time": 1683002309.647561, "path": "towardsdatascience.com/a-data-science-approach-to-stockholms-apartment-prices-part-2-13e51772b528/", "webpage": {"metadata": {"title": "A Data Science approach to Stockholms Apartment Prices | by Gustaf Halvardsson | Towards Data Science", "h1": "A Data Science approach to Stockholms Apartment Prices", "description": "In the previous story, we explored how we could acquire and clean data. While the cleaning and filtering took a lot longer than expected, we ended up with a sparkly clean dataset. To jock your\u2026"}, "outgoing_paragraph_urls": [{"url": "https://medium.com/@gustaf.halvardsson/a-data-science-approach-to-stockholms-apartment-prices-part-1-dcee0212596d", "anchor_text": "the previous story", "paragraph_index": 0}, {"url": "https://scikit-learn.org/stable/modules/generated/sklearn.ensemble.RandomForestRegressor.html", "anchor_text": "Random Forest Tree Regressor", "paragraph_index": 4}, {"url": "http://medium.com/p/dcee0212596d/", "anchor_text": "Acquiring and cleaning data with Web Scraping.", "paragraph_index": 26}], "all_paragraphs": ["In the previous story, we explored how we could acquire and clean data. While the cleaning and filtering took a lot longer than expected, we ended up with a sparkly clean dataset. To jock your memory, we now have this as our dataset:", "We have roughly 14 000 entries in our dataset which will serve great to train our ML-model. To train our model, we need a lot of data, so-called training data. But to check the performance of our model we will also require data, so-called, validation data. Here the balance is important since if we have too few lines of training data, our model will not be able to train on enough data and be accurate. On the flip side, if we do not have enough lines of validation data we can\u2019t be as certain of our model's accuracy when we later test it. Note: We could also use Cross-Validation but because we have a good amount of data, the gain would be minimal.", "For these reasons I chose to do a 3/4 split of the data, meaning 75% of lines go towards training and 25% towards validation.", "The first step to training my Machine Learning (ML) model is considering the features I should include which is also important. From intuition and previous knowledge of apartments I decided to choose: \u2018Date\u2018, Size\u2019, \u2018NearbyPOIs\u2019, \u2018Rooms\u2019, \u2018Latitude\u2019, and \u2018Longitude\u2019. Choosing the correct features to include and exclude will be very important for our model's performance so we will return to tune this later. But let's start with this and see where we end up.", "This problem will be a regression-task and is probably very prone to overfitting. Therefore I ultimately decided to use a Random Forest Tree Regressor. Because it\u2019s an ensemble method (a method that uses the average of different evaluations) it works very well to counter overfitting and usually produces a very good result with little tuning of its hyperparameters.", "Because it\u2019s a decision-tree model, we also do not need to normalize the data to avoid that certain features take more precedence than others.", "We now train the model with our training-data and let's test it against the validation data.", "Hmm not exactly a great predictor for apartment pricing. What this means is that our model's predictions will be, on average, 24% or over 1 000 000 million SEK off. We can definitely improve this. So how do we optimize this?", "I plotted the correlations of the features to discover which features are best to include using our trained model and its features.", "I ultimately decided to choose: \u2018Size\u2019, \u2018NearbyPOIs\u2019, \u2018Latitude\u2019, and \u2018Longitude\u2019 because they had the biggest impact on the Price which you can see in the graph here.", "I left out Rent since where a situation where we know the Rent but not the Price, or vice-versa, did not seem necessary to include.", "There are a ton of optimizations to be made that I used in this instance, but that is out-of-scope for this article. However, after these optimizations, we ended up with the following performance:", "Much better, where our model can predict the sale price, on average 390 000 SEK or 8.4 % within the actual price.", "Something interest to note here is that for this accuracy, we only use 4 features: \u2018Size\u2019, \u2018NearbyPOIs\u2019, \u2018Latitude\u2019 and \u2018Longitude\u2019 to get this good of an accuracy. Since NearbyPOIs, Latitude, and Longitude all come from the Adress, we only in reality need 2 features. Why is this impressive? It means our model only needs apartments Size and Adress to have an accuracy of 91.6%.", "Why don't we just give the model all of the features? The more the better, right?No, doing this usually causes overfitting \u2014 where the model learns the training data too well, meaning noise and outliers is also included in its predictions, rather than learning a general formula, which is what we are looking for.", "At this point, we have clean and organized data and an ML-model that predicts the sale price. To conclude this study, I want to summarize what useful insights that gave us.", "Let's start with the actual data. This is a summarization of all rows of data we have. It shows amongst other things the mean, standard deviation, max- and min value in our data for all 9 features.", "With the assumption that the data available from Hemnet is representative of the apartment market in Stockholm, we can conclude that for apartments in Stockholm:", "Furthermore, we can compare the relationship between all the features (their correlations) to learn even more how each feature affects each other, not just the pricing.", "From this graph, we can see things that might not be surprising, that Rooms is very dependent on Size. But we can also conclude some things we may not have known before about apartments in Stockholm:", "There are tons, of course, more connections to be made but these were my personal favorites.", "Lastly, I would like to return to this correlation graph again, which showed how much of an impact each feature has on Price.", "An insight that I found the most surprising is just how small of an impact Number of Rooms has on the pricing. Meaning:", "We can also conclude from this graph that Size, NearbyPOIs and Latitude, and Longitude are the features that affect the Price the most. Three of these are all entirely dependent on the location. Meaning:", "To show just how the pricing varies in Stockholm I decided to show this visually.", "As you can see, a pattern does exist. The highest point (yellow) as you can see there are coordinates for in the middle of \u00d6stermalm.", "Read the previous story here:Acquiring and cleaning data with Web Scraping.", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F13e51772b528&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-data-science-approach-to-stockholms-apartment-prices-part-2-13e51772b528&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-data-science-approach-to-stockholms-apartment-prices-part-2-13e51772b528&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-data-science-approach-to-stockholms-apartment-prices-part-2-13e51772b528&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-data-science-approach-to-stockholms-apartment-prices-part-2-13e51772b528&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----13e51772b528--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----13e51772b528--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@gustaf.halvardsson?source=post_page-----13e51772b528--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@gustaf.halvardsson?source=post_page-----13e51772b528--------------------------------", "anchor_text": "Gustaf Halvardsson"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F4cd4e8d2b9b9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-data-science-approach-to-stockholms-apartment-prices-part-2-13e51772b528&user=Gustaf+Halvardsson&userId=4cd4e8d2b9b9&source=post_page-4cd4e8d2b9b9----13e51772b528---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F13e51772b528&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-data-science-approach-to-stockholms-apartment-prices-part-2-13e51772b528&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F13e51772b528&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-data-science-approach-to-stockholms-apartment-prices-part-2-13e51772b528&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://medium.com/tag/se-apartment-project", "anchor_text": "SE Apartment Project"}, {"url": "https://medium.com/@gustaf.halvardsson/a-data-science-approach-to-stockholms-apartment-prices-part-1-dcee0212596d", "anchor_text": "the previous story"}, {"url": "https://scikit-learn.org/stable/modules/generated/sklearn.ensemble.RandomForestRegressor.html", "anchor_text": "Random Forest Tree Regressor"}, {"url": "https://en.wikipedia.org/wiki/Mean_absolute_error", "anchor_text": "Mean Absolute Error"}, {"url": "https://en.wikipedia.org/wiki/Mean_absolute_percentage_error", "anchor_text": "Mean Absolute Error Percentage"}, {"url": "http://medium.com/p/dcee0212596d/", "anchor_text": "Acquiring and cleaning data with Web Scraping."}, {"url": "https://github.com/gustafvh/Apartment-ML-Predictor-Stockholm_-with-WebScraper-and-Data-Insights", "anchor_text": "https://github.com/gustafvh/Apartment-ML-Predictor-Stockholm_-with-WebScraper-and-Data-Insights"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----13e51772b528---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/tag/data-visualization?source=post_page-----13e51772b528---------------data_visualization-----------------", "anchor_text": "Data Visualization"}, {"url": "https://medium.com/tag/data-science?source=post_page-----13e51772b528---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/stockholm?source=post_page-----13e51772b528---------------stockholm-----------------", "anchor_text": "Stockholm"}, {"url": "https://medium.com/tag/se-apartment-project?source=post_page-----13e51772b528---------------se_apartment_project-----------------", "anchor_text": "Se Apartment Project"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F13e51772b528&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-data-science-approach-to-stockholms-apartment-prices-part-2-13e51772b528&user=Gustaf+Halvardsson&userId=4cd4e8d2b9b9&source=-----13e51772b528---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F13e51772b528&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-data-science-approach-to-stockholms-apartment-prices-part-2-13e51772b528&user=Gustaf+Halvardsson&userId=4cd4e8d2b9b9&source=-----13e51772b528---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F13e51772b528&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-data-science-approach-to-stockholms-apartment-prices-part-2-13e51772b528&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----13e51772b528--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F13e51772b528&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-data-science-approach-to-stockholms-apartment-prices-part-2-13e51772b528&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----13e51772b528---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----13e51772b528--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----13e51772b528--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----13e51772b528--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----13e51772b528--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----13e51772b528--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----13e51772b528--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----13e51772b528--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----13e51772b528--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@gustaf.halvardsson?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@gustaf.halvardsson?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Gustaf Halvardsson"}, {"url": "https://medium.com/@gustaf.halvardsson/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "24 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F4cd4e8d2b9b9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-data-science-approach-to-stockholms-apartment-prices-part-2-13e51772b528&user=Gustaf+Halvardsson&userId=4cd4e8d2b9b9&source=post_page-4cd4e8d2b9b9--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F2040421b38f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-data-science-approach-to-stockholms-apartment-prices-part-2-13e51772b528&newsletterV3=4cd4e8d2b9b9&newsletterV3Id=2040421b38f&user=Gustaf+Halvardsson&userId=4cd4e8d2b9b9&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}