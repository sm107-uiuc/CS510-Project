{"url": "https://towardsdatascience.com/how-to-use-tensorflow-on-the-gpu-of-your-laptop-with-ubuntu-18-04-554e1d5ea189", "time": 1682993763.13968, "path": "towardsdatascience.com/how-to-use-tensorflow-on-the-gpu-of-your-laptop-with-ubuntu-18-04-554e1d5ea189/", "webpage": {"metadata": {"title": "How to dedicate your laptop GPU to TensorFlow only, on Ubuntu 18.04. | by Manu NALEPA | Towards Data Science", "h1": "How to dedicate your laptop GPU to TensorFlow only, on Ubuntu 18.04.", "description": "This code will list all your PCI devices and will filter NVIDIA ones. In my case, the result of the previous command is: If nothing appears, sorry but it seems you don\u2019t have any NVIDIA GPU, so you\u2026"}, "outgoing_paragraph_urls": [], "all_paragraphs": ["This post is divided in three parts:", "Head to your terminal and type in:", "This code will list all your PCI devices and will filter NVIDIA ones.In my case, the result of the previous command is:", "(My laptop is a XIAOMI NoteBook Air 13\u2033 with a graphic card NVIDIA GeForce 940MX.)", "If nothing appears, sorry but it seems you don\u2019t have any NVIDIA GPU, so you won\u2019t be able to use TensorFlow with it (but it is still possible with your CPU!).", "If a line appears, then let\u2019s go!", "Modern laptops with NVIDIA graphic cards are often provided with Optimus Technology. Optimus Technology means that your laptop has actually 2 graphic chips: The first one is located on the mother board, close to the CPU. The second one is on your NVIDIA card. By default, on Ubuntu 18.04, the NVIDIA card is not used. You have to install specific drivers to use it.", "To install them, it is quite simple:", "We can see that the NVIDIA binary driver is not used. To fix it:", "After your computer is restarted, open a terminal an write :", "On my computer, I have the following result:", "It shows that NVIDIA graphic card is in used.", "TensorFlow needs CUDA 9.0 to use your GPU. Let\u2019s install it.You should not install an other version of CUDA, because TensorFlow won\u2019t accept it.", "Don\u2019t forget the \u201c \u2014 override\u201d option, else the installer will complain that it is not compatible with GCC 7.3 (the GCC version provided with Ubuntu 18.04).The \u201c \u2014 override\u201d option will force the installer to use the available GCC version, which is fine.", "Congratulations ! You just installed CUDA 9.0 on Ubuntu 18.04 !", "TensorFlow also needs NVIDIA cuDNN to use your GPU. Let\u2019s install it.", "Congratulations ! You just installed NVIDIA cuDNN on Ubuntu 18.04 !", "If you install only TensorFlow, TensorFlow will use CPU.TensorFlow will only use GPU after the installation TensorFlow GPU.", "Congratulations ! You just installed TensorFlow and TensorFlow GPU on Ubuntu 18.04 !", "This script will train for 5 epochs (this means that each example of the training set will be seen 5 times by the algorithm during the training).", "For some reason, the first epoch of the first training you do after installing all these stuff is quite long (5 minutes on my computer). Maybe there is some compilation because during this time, one of my CPU is fully used.Training timing are more \u201cusual\u201d for all other trainings.", "In an other console, you can write:", "It will refresh the output of nvidia-smi every second. When the Python script runs, you should see at the bottom a line with Process name: Python with a certain amount of memory allocated to it. Furthermore, Volatile GPU-Util should show a working GPU.", "Congratulations ! You just trained your first model with TensorFlow and your GPU, on your laptop with Ubuntu 18.04 !", "Unfortunately, as the output of $ nvidia-smi shows, a lot of the memory of your GPU is used for others things than training your model.", "In this part, we will see how to dedicate 100% of your GPU memory to TensorFlow. Basically, we will use the NVIDIA chip for TensorFlow, and the Intel chip for the rest (including graphical display).", "Temporary, we need to switch off the X Server, which means that you won\u2019t have access to the windowed interface of Ubuntu (and so to this post \u2026).", "So please print, write down or open this post on an other device as your mobile phone.", "You will also need your login, so if you don\u2019t know it, just write in the console:", "This command line will install the driver without handling X server (so this driver won\u2019t be used for graphical display purpose).", "The installation of the driver should now begin.", "If, after a while (let\u2019s say 5 minutes), the installer is stuck onBuilding module. (This may take a while)then just press Enter several times. If pressing Enter several times does not do anything, just open a new terminal (with Ctrl + Alt +F3 for example) and re-do the protocol from the line \u201cEnter your login and you password\u201d. It should work now.", "Now, we have to tell to the NVIDIA configuration tool to switch on Intel graphic card, then we have to tell to the NVIDIA configuration tool to switch on NVIDIA graphic card, then we have to reboot. It is unclear why we should do that, but if we don\u2019t, we may be stuck on \u201cStarted Login Service\u201d on the next reboot. Then we have to switch the X Server back on.", "These last four steps are summarized below:", "As we can see, no process uses the NVIDIA GPU.", "Now, if we re-run the MNIST python file (this time again, the first epoch could take several minutes), the same NVIDIA SMI command should show:", "Here we are ! Only TensorFlow uses the GPU memory !", "After the python script is finished, the message \u201cNo running processes found\u201d should be displayed again.", "One more thing: If by mistake you forgot the step\u201csudo prime-select intel/nvidia\u201dand if during the reboot you\u2019r stuck in the strange state \u201cStarted Login Service\u201d, then just wait for 5 minutes to get the login/password command/prompt, then write again.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Data Scientist / Data Engineer @ Clustree \u2014 Sousaphone & saxophone player"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F554e1d5ea189&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-use-tensorflow-on-the-gpu-of-your-laptop-with-ubuntu-18-04-554e1d5ea189&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-use-tensorflow-on-the-gpu-of-your-laptop-with-ubuntu-18-04-554e1d5ea189&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-use-tensorflow-on-the-gpu-of-your-laptop-with-ubuntu-18-04-554e1d5ea189&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-use-tensorflow-on-the-gpu-of-your-laptop-with-ubuntu-18-04-554e1d5ea189&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----554e1d5ea189--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----554e1d5ea189--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@manunalepa?source=post_page-----554e1d5ea189--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@manunalepa?source=post_page-----554e1d5ea189--------------------------------", "anchor_text": "Manu NALEPA"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fff657b06f225&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-use-tensorflow-on-the-gpu-of-your-laptop-with-ubuntu-18-04-554e1d5ea189&user=Manu+NALEPA&userId=ff657b06f225&source=post_page-ff657b06f225----554e1d5ea189---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F554e1d5ea189&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-use-tensorflow-on-the-gpu-of-your-laptop-with-ubuntu-18-04-554e1d5ea189&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F554e1d5ea189&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-use-tensorflow-on-the-gpu-of-your-laptop-with-ubuntu-18-04-554e1d5ea189&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://developer.nvidia.com/cuda-90-download-archive", "anchor_text": "CUDA Toolkit 9.0 Downloads page"}, {"url": "https://developer.nvidia.com/cudnn", "anchor_text": "NVIDIA cuDNN page"}, {"url": "https://www.nvidia.com/Download/index.aspx", "anchor_text": "NVIDIA driver installation page"}, {"url": "https://medium.com/tag/ubuntu?source=post_page-----554e1d5ea189---------------ubuntu-----------------", "anchor_text": "Ubuntu"}, {"url": "https://medium.com/tag/tensorflow?source=post_page-----554e1d5ea189---------------tensorflow-----------------", "anchor_text": "TensorFlow"}, {"url": "https://medium.com/tag/laptop?source=post_page-----554e1d5ea189---------------laptop-----------------", "anchor_text": "Laptop"}, {"url": "https://medium.com/tag/gpu?source=post_page-----554e1d5ea189---------------gpu-----------------", "anchor_text": "Gpu"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F554e1d5ea189&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-use-tensorflow-on-the-gpu-of-your-laptop-with-ubuntu-18-04-554e1d5ea189&user=Manu+NALEPA&userId=ff657b06f225&source=-----554e1d5ea189---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F554e1d5ea189&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-use-tensorflow-on-the-gpu-of-your-laptop-with-ubuntu-18-04-554e1d5ea189&user=Manu+NALEPA&userId=ff657b06f225&source=-----554e1d5ea189---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F554e1d5ea189&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-use-tensorflow-on-the-gpu-of-your-laptop-with-ubuntu-18-04-554e1d5ea189&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----554e1d5ea189--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F554e1d5ea189&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-use-tensorflow-on-the-gpu-of-your-laptop-with-ubuntu-18-04-554e1d5ea189&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----554e1d5ea189---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----554e1d5ea189--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----554e1d5ea189--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----554e1d5ea189--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----554e1d5ea189--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----554e1d5ea189--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----554e1d5ea189--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----554e1d5ea189--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----554e1d5ea189--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@manunalepa?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@manunalepa?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Manu NALEPA"}, {"url": "https://medium.com/@manunalepa/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "144 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fff657b06f225&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-use-tensorflow-on-the-gpu-of-your-laptop-with-ubuntu-18-04-554e1d5ea189&user=Manu+NALEPA&userId=ff657b06f225&source=post_page-ff657b06f225--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fusers%2Fff657b06f225%2Flazily-enable-writer-subscription&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-use-tensorflow-on-the-gpu-of-your-laptop-with-ubuntu-18-04-554e1d5ea189&user=Manu+NALEPA&userId=ff657b06f225&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}