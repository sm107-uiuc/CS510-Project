{"url": "https://towardsdatascience.com/driving-distance-between-two-or-more-places-in-python-89779d691def", "time": 1683017400.0172648, "path": "towardsdatascience.com/driving-distance-between-two-or-more-places-in-python-89779d691def/", "webpage": {"metadata": {"title": "Driving distance between two or more places in python | by Vaclav Dekanovsky | Towards Data Science", "h1": "Driving distance between two or more places in python", "description": "Surface or driving distance and an optimal route between two or more places and how to display it on a map in python."}, "outgoing_paragraph_urls": [{"url": "https://github.com/vaclavdekanovsky/data-analysis-in-examples/blob/master/Maps/Driving%20Distance/Driving%20Distance%20between%20two%20places.ipynb", "anchor_text": "GitHub repository", "paragraph_index": 2}, {"url": "https://www.kaggle.com/nikitagrec/world-capitals-gps", "anchor_text": "the capital cities in the world", "paragraph_index": 3}, {"url": "https://geopy.readthedocs.io/en/stable/", "anchor_text": "geopy", "paragraph_index": 4}, {"url": "https://en.wikipedia.org/wiki/Great-circle_distance", "anchor_text": "great_circle", "paragraph_index": 4}, {"url": "https://en.wikipedia.org/wiki/Geodesics_on_an_ellipsoid", "anchor_text": "geodesics", "paragraph_index": 4}, {"url": "https://en.wikipedia.org/wiki/Oblate_ellipsoid", "anchor_text": "an oblate ellipsoid", "paragraph_index": 4}, {"url": "https://www.openstreetmap.org/directions?engine=fossgis_osrm_car&route=48.867%2C2.333%3B41.900%2C12.484#map=7/45.518/7.460", "anchor_text": "OpenStreetMap", "paragraph_index": 7}, {"url": "https://developers.google.com/maps/documentation/directions/overview", "anchor_text": "google maps", "paragraph_index": 7}, {"url": "https://www.openstreetmap.org/directions?engine=fossgis_osrm_car&route=48.867%2C2.333%3B41.900%2C12.484#map=7/45.518/7.460", "anchor_text": "Paris and Rome", "paragraph_index": 7}, {"url": "http://project-osrm.org/docs/v5.5.1/api/#route-service", "anchor_text": "documentation", "paragraph_index": 10}, {"url": "https://github.com/Project-OSRM/osrm-backend/wiki/Api-usage-policy", "anchor_text": "API policy", "paragraph_index": 11}, {"url": "https://developers.google.com/maps/documentation/directions/overview", "anchor_text": "google map\u2019s direction API", "paragraph_index": 11}, {"url": "https://github.com/vaclavdekanovsky/data-analysis-in-examples/blob/master/Maps/Driving%20Distance/Driving%20Distance%20between%20two%20places.ipynb", "anchor_text": "complete notebook on the github", "paragraph_index": 15}, {"url": "https://en.wikipedia.org/wiki/Travelling_salesman_problem", "anchor_text": "Travelling salesman problem", "paragraph_index": 17}, {"url": "https://towardsdatascience.com/solving-travelling-salesperson-problems-with-python-5de7e883d847", "anchor_text": "mlrose library in her article", "paragraph_index": 18}, {"url": "https://towardsdatascience.com/python-genetic-algorithms-and-the-traveling-salesman-problem-f65542fae5d", "anchor_text": "Jaboc Moore", "paragraph_index": 18}, {"url": "https://github.com/gkhayes/mlrose", "anchor_text": "mlrose algorithm", "paragraph_index": 19}, {"url": "https://github.com/vaclavdekanovsky/data-analysis-in-examples/blob/master/Maps/Driving%20Distance/Driving%20Distance%20between%20two%20places.ipynb", "anchor_text": "github notebook", "paragraph_index": 25}, {"url": "https://towardsdatascience.com/visualization-with-plotly-express-comprehensive-guide-eb5ee4b50b57", "anchor_text": "Plotly library", "paragraph_index": 26}, {"url": "https://github.com/vaclavdekanovsky/data-analysis-in-examples/blob/master/Maps/Driving%20Distance/Driving%20Distance%20between%20two%20places.ipynb", "anchor_text": "Driving Distance between two places.ipynb", "paragraph_index": 28}], "all_paragraphs": ["Many business cases require knowing the distance between some places. It\u2019s a key in the logistics and energy industry, but it is also important when you plan your holidays.", "In this tutorial we will see how to get several types of distances:", "You can see the complete code in this GitHub repository.", "For this tutorial, I\u2019ll use a small dataset from kaggle containing names and locations of all the capital cities in the world.", "Earth is not flat like our ancestors though. It\u2019s not even a giant sphere levitating in the Universe. It\u2019s considered being an ellipsoid. You can define the distance between two places on the surface of such a shape mathematically. We don\u2019t have to do the calculation ourselves though, we can get help from the popular geopy library which offers many functions to calculate the distance on a great_circle or geodesics distance on the surface of an oblate ellipsoid.", "Using geopy.distance.distance((lat_1, lon_1), (lat_2, lon_2)) returns the distance on the surface of a space object like Earth. You can choose whether you want the distance in kilometers, miles, nautical miles or feet.", "Unfortunately, such a distance is merely academic. Even the airplanes circle around the airfields, ascend, and land thus traveling much further. We usually need a driving distance, how far the car, bike or a walking person needs to travel.", "Getting this information is also easy. You can use APIs of free services like OpenStreetMap or paid API like google maps. By checking the distance between Paris and Rome you will realize the driver must journey over 1400 km to reach the city which was supposed to be 1100 km away. The car must cross the Alps and avoid the sea.", "Often it\u2019s not crucial how far the car must go, but how long does it take. The OSRM API provides that information as well.", "In order to get the route_1 variable you need to call the API using the requests library:", "Besides the latitude and longitude, the API call can contain other parameters described in the documentation.", "OSRM router is not meant for excessive use (see the API policy) so in case you plan a commercial application, consider services like google map\u2019s direction API. In that case, you start by calling a different API endpoint. You also need the API key to access the Google API and you are billed accordingly. Google offers $200 monthly which cover 40000 basic route requests (as of Dec-2020)", "Also, the structure of the answer is a bit different.", "Finding the optimal route between several places is quite a complex task. First, you need to gather the distances/duration between all the cities. That\u2019s (numberof_places choose 2) combinations of pairs of places.", "Let\u2019s look at the central European region containing 9 states. There are 36 unique combinations of distances between the 9 capitals of these countries.", "In the complete notebook on the github you can see all the 36 combinations and their distances processed into a pandas data frame. Actually, all 72 combinations, because each route is there twice, for example, Prague-Vienna and Vienna-Prague. (disregarding, minor differences which can occur taking the other direction)", "We\u2019re having 9 places. We can start in any of the nice. From your starting point, you can head to any of the 8 remaining places. Then to any of the 7 from the rest. The mean that between 9 cities we have 181440 possible routes in total:", "If we would have one place more, it would be 1814400. With 11 addresses we reach almost 20 million combinations and the number skyrocket really fast. To find an optimal route from all those combinations is the task for the Travelling salesman problem.", "In this example, we will consider the collected duration of the car routes between our 9 central European cities. I haven\u2019t found the ideal python implementation for this problem. Genevieve Hayes describes the use of her mlrose library in her article. Jaboc Moore suggests another approach also using genetic algorithms. There are many more TPS solvers available online.", "In the gist below you can see the mlrose algorithm and because we have relatively few options (~200K) we can confirm that the results are accurate using brute force, by simply calculating the total duration of all of these twenty thousand paths.", "On the picture in the previous chapter, you could see that each city has an ID. 1 \u2192Vienna, 2 \u2192Prague etc. The dist_list variable contains the travel time between each combination, e.g. (0,1,13949). A journey from Vienna to Prague takes 13949 seconds or 3:44:54.", "Because we have 9 cities, we can create all possible roads between them using itertools.", "Then we iterate over the list of all path permutations. We add the starting point to the end, to get back home.", "If we do it for all the possible combinations we find out, that there are 9 shortest cyclical routes that start and end at the same place. These paths are just shifted, depending on where you start. One of them is also the path found by the TPS algorithm.", "Usually, you cannot choose, because your truck or the postman must return home at the end of the shift. If you consider your vacation, you also come back home, eventually. But, if it would be possible, start in Bern and end in Prague (or v.v.) to avoid the longest route on the path.", "In the github notebook you can check how to order or reverse the list of the cities in pandas. For example, if you need to start in Ljubljana.", "You can also plot the chart using Plotly library.", "We have review how to get the distance between two points or the list of places. We can decide if we need the shortest distance, the driving distance, or time. Knowing this information we can find the shortest route between the locations by solving the Travelling Salesman problem or if we don\u2019t have many places by force.", "See the complete code on github - Driving Distance between two places.ipynb", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Data scientist who loves to explore everything and write about the topics from multiple points of view."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F89779d691def&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdriving-distance-between-two-or-more-places-in-python-89779d691def&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdriving-distance-between-two-or-more-places-in-python-89779d691def&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdriving-distance-between-two-or-more-places-in-python-89779d691def&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdriving-distance-between-two-or-more-places-in-python-89779d691def&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----89779d691def--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----89779d691def--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://vdekanovsky.medium.com/?source=post_page-----89779d691def--------------------------------", "anchor_text": ""}, {"url": "https://vdekanovsky.medium.com/?source=post_page-----89779d691def--------------------------------", "anchor_text": "Vaclav Dekanovsky"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fed473176733b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdriving-distance-between-two-or-more-places-in-python-89779d691def&user=Vaclav+Dekanovsky&userId=ed473176733b&source=post_page-ed473176733b----89779d691def---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F89779d691def&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdriving-distance-between-two-or-more-places-in-python-89779d691def&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F89779d691def&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdriving-distance-between-two-or-more-places-in-python-89779d691def&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://towardsdatascience.com/tagged/hands-on-tutorials", "anchor_text": "Hands-on Tutorials"}, {"url": "https://github.com/vaclavdekanovsky/data-analysis-in-examples/blob/master/Maps/Driving%20Distance/Driving%20Distance%20between%20two%20places.ipynb", "anchor_text": "GitHub repository"}, {"url": "https://www.kaggle.com/nikitagrec/world-capitals-gps", "anchor_text": "the capital cities in the world"}, {"url": "https://geopy.readthedocs.io/en/stable/", "anchor_text": "geopy"}, {"url": "https://en.wikipedia.org/wiki/Great-circle_distance", "anchor_text": "great_circle"}, {"url": "https://en.wikipedia.org/wiki/Geodesics_on_an_ellipsoid", "anchor_text": "geodesics"}, {"url": "https://en.wikipedia.org/wiki/Oblate_ellipsoid", "anchor_text": "an oblate ellipsoid"}, {"url": "https://www.openstreetmap.org/directions?engine=fossgis_osrm_car&route=48.867%2C2.333%3B41.900%2C12.484#map=7/45.518/7.460", "anchor_text": "OpenStreetMap"}, {"url": "https://developers.google.com/maps/documentation/directions/overview", "anchor_text": "google maps"}, {"url": "https://www.openstreetmap.org/directions?engine=fossgis_osrm_car&route=48.867%2C2.333%3B41.900%2C12.484#map=7/45.518/7.460", "anchor_text": "Paris and Rome"}, {"url": "http://router.project-osrm.org/route/v1/car/{cities.loc[0", "anchor_text": "http://router.project-osrm.org/route/v1/car/{"}, {"url": "http://project-osrm.org/docs/v5.5.1/api/#route-service", "anchor_text": "documentation"}, {"url": "https://github.com/Project-OSRM/osrm-backend/wiki/Api-usage-policy", "anchor_text": "API policy"}, {"url": "https://developers.google.com/maps/documentation/directions/overview", "anchor_text": "google map\u2019s direction API"}, {"url": "https://maps.googleapis.com/maps/api/directions/json?origin={origin_coor}&destination={destination_coor}&mode=driving&key={API_KEY", "anchor_text": "https://maps.googleapis.com/maps/api/directions/json?origin={origin_coor}&destination={destination_coor}&mode=driving&key={API_KEY"}, {"url": "https://github.com/vaclavdekanovsky/data-analysis-in-examples/blob/master/Maps/Driving%20Distance/Driving%20Distance%20between%20two%20places.ipynb", "anchor_text": "complete notebook on the github"}, {"url": "https://en.wikipedia.org/wiki/Travelling_salesman_problem", "anchor_text": "Travelling salesman problem"}, {"url": "https://towardsdatascience.com/solving-travelling-salesperson-problems-with-python-5de7e883d847", "anchor_text": "mlrose library in her article"}, {"url": "https://towardsdatascience.com/python-genetic-algorithms-and-the-traveling-salesman-problem-f65542fae5d", "anchor_text": "Jaboc Moore"}, {"url": "https://github.com/gkhayes/mlrose", "anchor_text": "mlrose algorithm"}, {"url": "https://github.com/vaclavdekanovsky/data-analysis-in-examples/blob/master/Maps/Driving%20Distance/Driving%20Distance%20between%20two%20places.ipynb", "anchor_text": "github notebook"}, {"url": "https://towardsdatascience.com/visualization-with-plotly-express-comprehensive-guide-eb5ee4b50b57", "anchor_text": "Plotly library"}, {"url": "https://github.com/vaclavdekanovsky/data-analysis-in-examples/blob/master/Maps/Driving%20Distance/Driving%20Distance%20between%20two%20places.ipynb", "anchor_text": "Driving Distance between two places.ipynb"}, {"url": "https://towardsdatascience.com/pythons-geocoding-convert-a-list-of-addresses-into-a-map-f522ef513fd6", "anchor_text": "How to turn a list of addreses into a map with geocoding"}, {"url": "https://towardsdatascience.com/visualization-with-plotly-express-comprehensive-guide-eb5ee4b50b57", "anchor_text": "Plotly Express comphrehensive tutorial"}, {"url": "https://towardsdatascience.com/unzip-update-and-zip-again-xmls-in-a-folder-7d57f9710ddb", "anchor_text": "How to unzip and process bunch of XML in a folder"}, {"url": "https://towardsdatascience.com/upsample-with-an-average-in-pandas-c029032c57ca", "anchor_text": "Unusual but useful upsampling with pandas"}, {"url": "https://medium.com/tag/python?source=post_page-----89779d691def---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/maps?source=post_page-----89779d691def---------------maps-----------------", "anchor_text": "Maps"}, {"url": "https://medium.com/tag/travelling-salesman?source=post_page-----89779d691def---------------travelling_salesman-----------------", "anchor_text": "Travelling Salesman"}, {"url": "https://medium.com/tag/pandas?source=post_page-----89779d691def---------------pandas-----------------", "anchor_text": "Pandas"}, {"url": "https://medium.com/tag/hands-on-tutorials?source=post_page-----89779d691def---------------hands_on_tutorials-----------------", "anchor_text": "Hands On Tutorials"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F89779d691def&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdriving-distance-between-two-or-more-places-in-python-89779d691def&user=Vaclav+Dekanovsky&userId=ed473176733b&source=-----89779d691def---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F89779d691def&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdriving-distance-between-two-or-more-places-in-python-89779d691def&user=Vaclav+Dekanovsky&userId=ed473176733b&source=-----89779d691def---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F89779d691def&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdriving-distance-between-two-or-more-places-in-python-89779d691def&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----89779d691def--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F89779d691def&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdriving-distance-between-two-or-more-places-in-python-89779d691def&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----89779d691def---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----89779d691def--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----89779d691def--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----89779d691def--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----89779d691def--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----89779d691def--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----89779d691def--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----89779d691def--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----89779d691def--------------------------------", "anchor_text": ""}, {"url": "https://vdekanovsky.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://vdekanovsky.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Vaclav Dekanovsky"}, {"url": "https://vdekanovsky.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "623 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fed473176733b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdriving-distance-between-two-or-more-places-in-python-89779d691def&user=Vaclav+Dekanovsky&userId=ed473176733b&source=post_page-ed473176733b--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F41f38caa0bb5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdriving-distance-between-two-or-more-places-in-python-89779d691def&newsletterV3=ed473176733b&newsletterV3Id=41f38caa0bb5&user=Vaclav+Dekanovsky&userId=ed473176733b&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}