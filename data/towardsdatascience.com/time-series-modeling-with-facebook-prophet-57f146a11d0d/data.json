{"url": "https://towardsdatascience.com/time-series-modeling-with-facebook-prophet-57f146a11d0d", "time": 1683003226.575812, "path": "towardsdatascience.com/time-series-modeling-with-facebook-prophet-57f146a11d0d/", "webpage": {"metadata": {"title": "Time series modeling with Facebook Prophet | by JR Kreiger | Towards Data Science", "h1": "Time series modeling with Facebook Prophet", "description": "When trying to understand time series, there\u2019s so much to think about. What\u2019s the overall trend in the data? Is it affected by seasonality? What kind of model should I use, and how well will it\u2026"}, "outgoing_paragraph_urls": [{"url": "https://facebook.github.io/prophet/", "anchor_text": "Facebook Prophet", "paragraph_index": 1}, {"url": "https://en.wikipedia.org/wiki/Autoregressive_integrated_moving_average", "anchor_text": "ARIMA", "paragraph_index": 4}, {"url": "https://www.statsmodels.org/dev/generated/statsmodels.tsa.statespace.sarimax.SARIMAX.html", "anchor_text": "ARIMA model in Statsmodels", "paragraph_index": 5}, {"url": "https://facebook.github.io/prophet/", "anchor_text": "Facebook Prophet", "paragraph_index": 6}, {"url": "https://www.statsmodels.org/devel/datasets/generated/co2.html", "anchor_text": "dataset from Statsmodels recording CO2 levels at the Mauna Loa Observatory", "paragraph_index": 8}, {"url": "https://github.com/jrkreiger/or-real-estate", "anchor_text": "check out the code on GitHub", "paragraph_index": 24}], "all_paragraphs": ["When trying to understand time series, there\u2019s so much to think about. What\u2019s the overall trend in the data? Is it affected by seasonality? What kind of model should I use, and how well will it perform?", "All these questions can make time series modeling kind of intimidating, but it doesn\u2019t have to be that bad. While working on a project for my data science bootcamp recently, I tried Facebook Prophet, an open-source package for time series modeling developed by \u2026 y\u2019know, Facebook. I found it super quick and easy to get it running with my data, so in this post, I\u2019ll show you how to do it and share a function I wrote to do modeling and validation with Prophet all-in-one. Read on!", "In a nutshell, time series modeling is about looking for the relationships between your dependent variable and time. Lots of real-world data can come in time series form: stock prices, temperatures, CO2 levels, number of treats I eat per hour on Halloween, etc. If you want to predict what will happen next in a time series, then you need to identify and remove the effects of time on your data so that you can focus your predictive energies on any underlying, non-time-based patterns.", "In practice, this means you should:", "What comes next is often some form of ARIMA (autoregressive integrated moving average) modeling. ARIMA is similar to linear regression, but our explanatory features are past points in time to which we compare each datapoint.", "To run an ARIMA model in Statsmodels, you would need to figure out how many and which past points in time to use for comparison, and that can get tricky and time-consuming. To find the best combination, you would want to run your model many times, each with a different combination of terms (using a grid search or random search), then pick the one that yielded the best results. The time needed to do this can increase exponentially as you consider more options!", "Facebook Prophet automates some of these processes behind the scenes, so there\u2019s less preprocessing and parameter selection for you to do (and fewer opportunities for you to mess up). As you can imagine, Facebook is very interested in time-based patterns in their users\u2019 activity, so they built Prophet to be especially strong at handling seasonality on multiple scales. Prophet was also designed to be usable by developers and non-developers alike, meaning that it is easy and concise to code, and it can give you attractive plots and convenient tables of forecast data with little effort on your part. All Prophet really wants from you is data in a specific format, which I will cover in the next section.", "Keep in mind that I use Prophet in Python, so things may work a little differently if you\u2019re using it in R. To get ready to run Prophet, you will need to format your data in a very specific way. When Prophet reads your DataFrame it looks for two specific columns. One must be called \u201cds\u201d and contain your datetime objects, and the other must be called \u201cy\u201d and contain your dependent variable. Make sure that your data is in \u201clong\u201d format, i.e., each row represents a single point in time.", "To make it easier to follow along, I\u2019ll use a dataset from Statsmodels recording CO2 levels at the Mauna Loa Observatory from 1958 through 2001. As you\u2019ll see, this data has both an upward trend and strong seasonal patterning.", "Note above that I\u2019m not putting my DataFrame in the right format for Prophet right away; I want to do some things with it first.", "The CO2 level was recorded once a week, but let\u2019s say I\u2019m more interested in monthly intervals. I\u2019ll resample it to be monthly:", "Have a look at the trend and seasonality:", "Ok, that\u2019s a terrifying escalation of CO2 levels, but let\u2019s move on. Before using Prophet, we need to create the \u201cds\u201d and \u201cy\u201d columns.", "Now we\u2019re ready for some prophecy!", "I want to predict how CO2 will rise over time, but I also want to know how well my model performs. I can do that with the data I have by splitting off some part of it, predicting values for that part, and then comparing the predictions to the actual values. In this case, I\u2019ll shave off the last 10% of the data (53 months) to use for validation:", "I wrote myself a function that can take in my training data, my validation data, and the whole dataset and return the following:", "My function prints these plots and also returns DataFrames containing the predictions to be compared to the validation data and the long-term predictions. These are useful if you want to analyze the exact values the model predicts.", "Note that my function is set up to treat the data as monthly, and the plots will have titles that reflect that. You could refactor the function to handle data on different scales, but this suited my purposes.", "Let\u2019s run this function on our three datasets (training, validation, and whole). Since I arbitrarily reserved the last 10% (53 months) of the data for validation, I\u2019ll also arbitrarily forecast over 10 times that, or 530 months, which is a little over 44 years.", "The function will now start printing out plots. Here\u2019s the first 90% of the dataset with predictions for the last 10%:", "Now we can compare the predicted values with the actual values for the last 53 months:", "Now for the long-term prediction using all the available data. Naturally, the 95% confidence interval expands dramatically over time. CO2 levels could get lower \u2026 but they could also get waaaaay higher.", "These are Prophet\u2019s \u201ccomponent plots,\u201d which break down trend and seasonality in the data. It looks like CO2 levels tend to hit their annual high in the spring and their low in the fall.", "I can now visually analyze these pretty plots, and if I want to look at the predicted values themselves, I have those on hand, too.", "That\u2019s all there is to it! I used this function in a project about predicting how home prices will rise in Oregon over the next few years. You can check out the code on GitHub.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Data scientist with a background in archaeology, museums, and libraries. On Twitter @j_re."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F57f146a11d0d&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftime-series-modeling-with-facebook-prophet-57f146a11d0d&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftime-series-modeling-with-facebook-prophet-57f146a11d0d&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftime-series-modeling-with-facebook-prophet-57f146a11d0d&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftime-series-modeling-with-facebook-prophet-57f146a11d0d&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----57f146a11d0d--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----57f146a11d0d--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@jrkreiger?source=post_page-----57f146a11d0d--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@jrkreiger?source=post_page-----57f146a11d0d--------------------------------", "anchor_text": "JR Kreiger"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F612d3a26f7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftime-series-modeling-with-facebook-prophet-57f146a11d0d&user=JR+Kreiger&userId=612d3a26f7&source=post_page-612d3a26f7----57f146a11d0d---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F57f146a11d0d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftime-series-modeling-with-facebook-prophet-57f146a11d0d&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F57f146a11d0d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftime-series-modeling-with-facebook-prophet-57f146a11d0d&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://facebook.github.io/prophet/", "anchor_text": "Facebook Prophet"}, {"url": "https://en.wikipedia.org/wiki/Autoregressive_integrated_moving_average", "anchor_text": "ARIMA"}, {"url": "https://www.statsmodels.org/dev/generated/statsmodels.tsa.statespace.sarimax.SARIMAX.html", "anchor_text": "ARIMA model in Statsmodels"}, {"url": "https://facebook.github.io/prophet/", "anchor_text": "Facebook Prophet"}, {"url": "https://www.statsmodels.org/devel/datasets/generated/co2.html", "anchor_text": "dataset from Statsmodels recording CO2 levels at the Mauna Loa Observatory"}, {"url": "https://github.com/jrkreiger/or-real-estate", "anchor_text": "check out the code on GitHub"}, {"url": "http://jrkreiger.net", "anchor_text": "jrkreiger.net"}, {"url": "https://medium.com/tag/data-science?source=post_page-----57f146a11d0d---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/data-visualization?source=post_page-----57f146a11d0d---------------data_visualization-----------------", "anchor_text": "Data Visualization"}, {"url": "https://medium.com/tag/facebook?source=post_page-----57f146a11d0d---------------facebook-----------------", "anchor_text": "Facebook"}, {"url": "https://medium.com/tag/time-series-analysis?source=post_page-----57f146a11d0d---------------time_series_analysis-----------------", "anchor_text": "Time Series Analysis"}, {"url": "https://medium.com/tag/towards-data-science?source=post_page-----57f146a11d0d---------------towards_data_science-----------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F57f146a11d0d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftime-series-modeling-with-facebook-prophet-57f146a11d0d&user=JR+Kreiger&userId=612d3a26f7&source=-----57f146a11d0d---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F57f146a11d0d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftime-series-modeling-with-facebook-prophet-57f146a11d0d&user=JR+Kreiger&userId=612d3a26f7&source=-----57f146a11d0d---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F57f146a11d0d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftime-series-modeling-with-facebook-prophet-57f146a11d0d&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----57f146a11d0d--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F57f146a11d0d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftime-series-modeling-with-facebook-prophet-57f146a11d0d&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----57f146a11d0d---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----57f146a11d0d--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----57f146a11d0d--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----57f146a11d0d--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----57f146a11d0d--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----57f146a11d0d--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----57f146a11d0d--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----57f146a11d0d--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----57f146a11d0d--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@jrkreiger?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@jrkreiger?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "JR Kreiger"}, {"url": "https://medium.com/@jrkreiger/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "146 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F612d3a26f7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftime-series-modeling-with-facebook-prophet-57f146a11d0d&user=JR+Kreiger&userId=612d3a26f7&source=post_page-612d3a26f7--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F1ffcf7fdc01f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftime-series-modeling-with-facebook-prophet-57f146a11d0d&newsletterV3=612d3a26f7&newsletterV3Id=1ffcf7fdc01f&user=JR+Kreiger&userId=612d3a26f7&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}