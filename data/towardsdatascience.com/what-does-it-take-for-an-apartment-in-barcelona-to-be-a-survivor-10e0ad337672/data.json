{"url": "https://towardsdatascience.com/what-does-it-take-for-an-apartment-in-barcelona-to-be-a-survivor-10e0ad337672", "time": 1683001974.1458209, "path": "towardsdatascience.com/what-does-it-take-for-an-apartment-in-barcelona-to-be-a-survivor-10e0ad337672/", "webpage": {"metadata": {"title": "What does it take for an apartment in Barcelona to be a \u2018survivor\u2019? | by Elliott Coyne | Towards Data Science", "h1": "What does it take for an apartment in Barcelona to be a \u2018survivor\u2019?", "description": "The property market in Barcelona is said by some to be in a bubble. That includes both commercial and residential property. The residential property market has two major segments, catering to\u2026"}, "outgoing_paragraph_urls": [{"url": "https://opendata-ajuntament.barcelona.cat/data/en/dataset/est-mercat-immobiliari-lloguer-mitja-mensual", "anchor_text": "OpenData BCN", "paragraph_index": 5}, {"url": "http://insideairbnb.com/get-the-data.html", "anchor_text": "Insideairbnb", "paragraph_index": 12}, {"url": "https://pypi.org/project/wget/", "anchor_text": "W Get", "paragraph_index": 12}], "all_paragraphs": ["The property market in Barcelona is said by some to be in a bubble. That includes both commercial and residential property.", "The residential property market has two major segments, catering to different audiences. These are the short term rental (one night up to 11 months) and long term rentals (one year and over).", "One of the most well known platforms for short term rentals is Airbnb. Almost every resident of the city I speak to has a view and/ or story about Airbnb listed apartments. Given there is so much said about the platform and the apartments listed on it, a more analytical investigation is warranted.", "Before taking a deep dive into the topic, it felt important to understand a little bit more about the long term residential property market. Price is always a good gauge of demand and therefore understanding what the average rental prices for these types of property have done in the recent past could prove useful.", "What goes up, must come down?", "The first stop for this part of the investigation was OpenData BCN. Luckily the site provides information on the average rental prices for each suburb (or barrio) across the city, over the last 4 years. The data was normalised by using a \u2018price per square meter\u2019 metric.", "The data was available in CSV files, with one file per year (2014\u20132018). The files were downloaded manually, as the site had a dynamic link (meaning they couldn\u2019t be scraped using a Python script).", "Once downloaded, each CSV was listed into a dataframe \u2014 after importing the libraries relevant for this project.", "There were a number of steps in the Exploratory Data Analysis however it all started by renaming the dataframe headers from Catalan (the language of Catalonia, in which Barcelona is found) into English. The next step identified null values and these were dropped, as couldn\u2019t be inserted/ updated/ estimated using other methods. The process also uncovered that two different metrics were provided within the \u2018measure\u2019 column. For the purpose of this analysis, the rental price per meter square was identified and used to filter and create a new dataframe.", "The clean dataframe was then exported to CSV for charting in Tableau. Upon import it became apparent that there was an issue with the Quarter (as in Year and Quarter) dimensions, required for the X axis. This issue was overcome by creating a new calculated field with the formula below:", "Now that there was a suitable axis for time ,it was possible the chart the rental prices, per district. The graph below shows the average rental price (Euro per meter square) by district by year (2014\u20132018.", "The correlation was surprisingly high \u2014 however given the only variables were time and price, it was not possible to draw any conclusions given that other factors influence the rental market in any city.", "Now it\u2019s time to turn our attention to the short term rental market \u2014 namely properties listed on Airbnb. Luckily, there is a website that routines scrapes Airbnb listings on a semi regular basis and makes the data available online. Insideairbnb had 39 listing scrape files spanning as far back as April 2015. The data file are very comprehensive \u2014 and fortunately published in a consistent with a consistent naming convention meaning they could be downloaded automatically using W Get, after a touch of web scraping to get the exact name.", "The URLs of files of interest were added into a list named ibnbdts (in the YYYY-MM-DD format), having removed the duplicates. The files of interest were then downloaded one at a time, unzipped and added as a dataframe into a dictionary as a value. The corresponding key being an element from the ibnbdts list.", "Once this was done the shape was investigated and column headers identified. Given the number of columns it was decided to create a smaller dataframe with only the columns of interest.", "The following other steps were taken to filter and clean the data:", "5. Filter out properties that do not have either 2 bedrooms, or 1.5\u20132 bathrooms.", "6. Remove duplicates from this filtered dataframe (before first sorting by property_id (id) ascending and last appearance date (as a string) on the platform (\u2018import_dt\u2019) descending.", "The filtered dataframe (prior to duplicate removal as described above) is used to create a new slimline dataframe (df_slim) which will only contain property_id (id) and last appearance date (as a string) on the platform (\u2018import_dt\u2019), these are sorted ascending and descending, respectively.", "The string import date is then converted into a datetime field using a custom function and apply.", "A group by is then used to create a smaller subset, with each property (id) only appearing once, with the min and max date that they appeared as 2 separate columns.", "A new colum is then crated to determine if the property is still active on the platform.", "The number of days that the property was listed on the platform were then calculated using a custom function and apply.", "The slimine and filtered dataframes are then merged before column dropping (id double up) and renaming.", "Next the clean dataframe needs to have the price (as a float) normalised so that a +/-1.5 StdDev of the mean an be used to filter out outliers.", "A new Box Plot to see how the remaining price data is looking.", "Now prices are normalised, they will be banded for ease of interpretation on the survival plot.", "Conversion of datetime fields to integers so that calculations may be performed.", "The recently calculated \u2018days_online\u2019 value needs to be converted into months.", "The resulting dataframe is then exported to CSV to analysis using Survival Analysis in another Jupyter Notebook file.", "Survival analysis requires a custom function to be defined.", "The outputs of the Survival Analysis provided some interesting graphs.", "Three data sets were created:1. Total population of 2 bedroom, 1.5\u20132 bathroom apartments ever listed on Airbnb (April 2015 \u2014 September 2019).2. Subset of 1 (above), filtered to only contain apartments in Eixample3. Subset of 1 (above), filtered to only contain apartments in Gr\u00e0cia", "The following graphs were subsequently generated (in Plotly).", "All in all, it would appear that when it comes to 2 bedroom apartments in Barcelona \u2014 the moderately priced ones will stay on the Airbnb platform for the longest amount of time. This means that these apartments will not be available on the long term rental market; therefore decreasing supply in that segment of the market \u2014 which, it seems, leads (in part at least) to the seemingly ever increasing long term rental prices in the city.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Data Analyst | Inspired by Technology & Innovation | Python | SQL | Tableau"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F10e0ad337672&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-does-it-take-for-an-apartment-in-barcelona-to-be-a-survivor-10e0ad337672&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-does-it-take-for-an-apartment-in-barcelona-to-be-a-survivor-10e0ad337672&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-does-it-take-for-an-apartment-in-barcelona-to-be-a-survivor-10e0ad337672&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-does-it-take-for-an-apartment-in-barcelona-to-be-a-survivor-10e0ad337672&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----10e0ad337672--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----10e0ad337672--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@elliottcoyne?source=post_page-----10e0ad337672--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@elliottcoyne?source=post_page-----10e0ad337672--------------------------------", "anchor_text": "Elliott Coyne"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fca3f7e957347&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-does-it-take-for-an-apartment-in-barcelona-to-be-a-survivor-10e0ad337672&user=Elliott+Coyne&userId=ca3f7e957347&source=post_page-ca3f7e957347----10e0ad337672---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F10e0ad337672&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-does-it-take-for-an-apartment-in-barcelona-to-be-a-survivor-10e0ad337672&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F10e0ad337672&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-does-it-take-for-an-apartment-in-barcelona-to-be-a-survivor-10e0ad337672&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://opendata-ajuntament.barcelona.cat/data/en/dataset/est-mercat-immobiliari-lloguer-mitja-mensual", "anchor_text": "OpenData BCN"}, {"url": "http://insideairbnb.com/get-the-data.html", "anchor_text": "Insideairbnb"}, {"url": "https://pypi.org/project/wget/", "anchor_text": "W Get"}, {"url": "http://data.insideairbnb.com/spain/catalonia/barcelona/{}/visualisations/listings.csv'", "anchor_text": "http://data.insideairbnb.com/spain/catalonia/barcelona/{}/visualisations/listings.csv'"}, {"url": "https://medium.com/tag/data-science?source=post_page-----10e0ad337672---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/python3?source=post_page-----10e0ad337672---------------python3-----------------", "anchor_text": "Python3"}, {"url": "https://medium.com/tag/survival-analysis?source=post_page-----10e0ad337672---------------survival_analysis-----------------", "anchor_text": "Survival Analysis"}, {"url": "https://medium.com/tag/barcelona?source=post_page-----10e0ad337672---------------barcelona-----------------", "anchor_text": "Barcelona"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F10e0ad337672&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-does-it-take-for-an-apartment-in-barcelona-to-be-a-survivor-10e0ad337672&user=Elliott+Coyne&userId=ca3f7e957347&source=-----10e0ad337672---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F10e0ad337672&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-does-it-take-for-an-apartment-in-barcelona-to-be-a-survivor-10e0ad337672&user=Elliott+Coyne&userId=ca3f7e957347&source=-----10e0ad337672---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F10e0ad337672&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-does-it-take-for-an-apartment-in-barcelona-to-be-a-survivor-10e0ad337672&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----10e0ad337672--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F10e0ad337672&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-does-it-take-for-an-apartment-in-barcelona-to-be-a-survivor-10e0ad337672&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----10e0ad337672---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----10e0ad337672--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----10e0ad337672--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----10e0ad337672--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----10e0ad337672--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----10e0ad337672--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----10e0ad337672--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----10e0ad337672--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----10e0ad337672--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@elliottcoyne?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@elliottcoyne?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Elliott Coyne"}, {"url": "https://medium.com/@elliottcoyne/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "2 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fca3f7e957347&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-does-it-take-for-an-apartment-in-barcelona-to-be-a-survivor-10e0ad337672&user=Elliott+Coyne&userId=ca3f7e957347&source=post_page-ca3f7e957347--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fusers%2Fca3f7e957347%2Flazily-enable-writer-subscription&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-does-it-take-for-an-apartment-in-barcelona-to-be-a-survivor-10e0ad337672&user=Elliott+Coyne&userId=ca3f7e957347&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}