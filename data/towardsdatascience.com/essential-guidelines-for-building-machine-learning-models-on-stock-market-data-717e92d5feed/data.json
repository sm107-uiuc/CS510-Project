{"url": "https://towardsdatascience.com/essential-guidelines-for-building-machine-learning-models-on-stock-market-data-717e92d5feed", "time": 1683014289.918855, "path": "towardsdatascience.com/essential-guidelines-for-building-machine-learning-models-on-stock-market-data-717e92d5feed/", "webpage": {"metadata": {"title": "Machine learning and stock market data guidelines | Towards Data Science", "h1": "Essential Guidelines for Building Machine Learning Models on Stock Market Data", "description": "The three essential guidelines that need to be followed when building machine learning models for stock market investing."}, "outgoing_paragraph_urls": [{"url": "https://towardsdatascience.com/questions-96667b06af5", "anchor_text": "rules and guidelines", "paragraph_index": 0}, {"url": "https://towardsdatascience.com/readers-terms-b5d780a700a4", "anchor_text": "Reader Terms", "paragraph_index": 0}, {"url": "https://www.sec.gov/edgar/searchedgar/companysearch.html", "anchor_text": "https://www.sec.gov/edgar/searchedgar/companysearch.html", "paragraph_index": 9}], "all_paragraphs": ["Note from Towards Data Science\u2019s editors: While we allow independent authors to publish articles in accordance with our rules and guidelines, we do not endorse each author\u2019s contribution. You should not rely on an author\u2019s works without seeking professional advice. See our Reader Terms for details.", "Building a machine learning model for stock market investing might seem like an excellent idea. If the model works, it\u2019ll make you rich. If it doesn\u2019t, you\u2019ll at least learn what it takes to build a machine learning model. The other reason why stock markets are so welcoming for machine learning is the availability of historical data.", "But just because data is widely available doesn\u2019t mean you can use it without much consideration. In fact, there are three essential things to consider when building machine learning models on historical fundamental stock data. Ignoring them will render your model useless for real-world applications. Below, I will discuss three essential guidelines that need to be followed when dealing with stock market data for machine learning.", "Can I use Netflix\u2019s fundamental data from Q4 when training and backtesting my model for January 1, 2020? No, you shouldn\u2019t \u2014 unless you want to cheat of course.", "Imagine you\u2019re building a machine learning model that will predict the quarterly performance of stocks at the beginning of each quarter. Such a model should give investors accurate guidance e.g. on January 1, 2020, whether a stock will go up, down, or sideways by the end of March 30, 2020. When building such a model, you need to ensure that you\u2019re not using data from the future. In our example, this would mean that your training set can\u2019t include data from January 1, 2020, and later.", "To make historical stock market data a bit more complex, you also need to take into account when the data was made available. Let\u2019s go back to our example and look at Netflix\u2019s fourth-quarter results ended December 31, 2020. Can I use Netflix\u2019s fundamental data from Q4 when training and backtesting my model for January 1, 2020? No, you shouldn\u2019t \u2014 unless you want to cheat of course. The reason is that the Q4 results were published on January 21, 2020. That\u2019s 20 days after the cut-off date for testing and training your model. Using Q4 results in your model would thus mean that you either have insider information or a magic crystal ball. Below is a timeline that illustrates the issue of market data availability.", "What can I do about this? How can I make sure I\u2019m not using future data in my model?", "There are three ways how to solve this. The first solution is to use what\u2019s called point-in-time market data. Point-in-time data takes into consideration when data was made publicly available. It ensures that when you check e.g. Netflix\u2019s most recent revenues on January 1, 2020, you will get the Q3 numbers and not Q4\u2019s because they weren\u2019t available then. Most major paid market data providers give you access to such point-in-time data. Bloomberg, for example, allows you to retrieve point-in-time data using their BQL API.", "If you don\u2019t have access to point-in-time market data, then you can use lagged market data. The SEC mandates that companies have to file their earnings reports no later than 35 days after the end of their first three quarters and no later than 60 days after the end of their final quarter. In our example, we could force the model to use Q3 results which were released on October 16, 2019.", "The third option is to create your own point-in-time market database with the help of SEC\u2019s EDGAR website https://www.sec.gov/edgar/searchedgar/companysearch.html. The EDGAR website includes the filing date information for every annual and quarterly report. And thanks to several great free Python packages, this information can be scraped with relative ease.", "Using lagged market data or building your own point-in-time database by scraping SEC\u2019s EDGAR website, however, will not beat the accuracy of a dedicated point-in-time data provider. It will not account for restatements and lagged data might be \u201ctoo lagged\u201d. Even your carefully build point-in-time database will include inaccuracies. Netflix, for example, released their Q4 results on January 21, 2020, but filed them 8 days later on January 29, 2020. But if you don\u2019t have access to a point-in-time market data provider, using lagged data or building your own point-in-time database are the next best things to do.", "Using a static list of equities for backtesting means that you\u2019re ignoring all the companies that went bust or were delisted for other reasons.", "Whenever you build a machine learning model for stock market investing, you have to decide on which equities you want to consider. This can be an index, such as the S&P 500 or all publicly traded equities in the US. No matter what universe of equities you choose, you need to be aware of it\u2019s changing composition. Let\u2019s take the S&P 500 index as our stock universe that we will use for our machine learning model. The S&P 500 index currently comprises 505 companies. In 2015, only 75% of the companies that currently make up the S&P 500 index were part of it. The remaining 25% are companies that have been either delisted or simply removed from the S&P 500 index because of poor results. In 2010, the number was 65% and in 2000 only 45% of the current S&P 500 constituents made up the index.", "Ignoring the changing stock market universe introduces your model to what\u2019s called survivorship bias. Using a static list of equities for backtesting means that you\u2019re ignoring all the companies that went bust or were delisted for other reasons. Additionally, you\u2019re considering \u201cwinners\u201d before they actually became \u201cwinners\u201d. Let\u2019s look at AMD. In 2016, AMD\u2019s share price went from 2.10 to 11.30. Then in March 2017, AMD joined the S&P 500 index replacing Urban Outfitters. Having AMD in your S&P 500 universe in 2016 would thus be considered cheating.", "The solution to this is simple. Don\u2019t use a static list of equities for your stock market universe. Make sure you adjust it for each period to reflect the true constituents at any given point in time.", "The final important thing to consider when dealing with stock market data for machine learning is straightforward. Use adjusted stock prices. For experienced or even novice stock market traders this may seem obvious. But for data scientists with no experience with stock markets, adjusted prices might be a new concept. Here is a short explanation why we use adjusted stock prices.", "Companies may, for example, decide to do a 2-for-1 stock split. This means that if you owned 100 shares, after the stock split, you would own 200. How would such a stock split affect the stock price? Naturally, the price would halve since there was no change in the value of the company. Adjusted stock prices take into consideration stock splits and other similar events that affect the price but not the underlying value and adjust them to reflect a more accurate value of the stock.", "Thankfully, most major stock market data providers use adjusted prices by default so the chances of using non-adjusted prices are low. Just double-check whether you\u2019re really using adjusted prices and you shouldn\u2019t worry about it afterward.", "These are the three basic guidelines that you should consider when building machine learning models on stock market data. Will following them ensure a successful machine learning model? Definitely not! There are countless possibilities when it comes to building a model. Knowing which one will work and which one won\u2019t, is next to impossible. However, following these guidelines will make sure that your model is built on solid foundations.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "AI and game developer with a background in business."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F717e92d5feed&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fessential-guidelines-for-building-machine-learning-models-on-stock-market-data-717e92d5feed&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fessential-guidelines-for-building-machine-learning-models-on-stock-market-data-717e92d5feed&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fessential-guidelines-for-building-machine-learning-models-on-stock-market-data-717e92d5feed&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fessential-guidelines-for-building-machine-learning-models-on-stock-market-data-717e92d5feed&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----717e92d5feed--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----717e92d5feed--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@martin.racko?source=post_page-----717e92d5feed--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@martin.racko?source=post_page-----717e92d5feed--------------------------------", "anchor_text": "Martin Racko"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fa5f297785ef2&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fessential-guidelines-for-building-machine-learning-models-on-stock-market-data-717e92d5feed&user=Martin+Racko&userId=a5f297785ef2&source=post_page-a5f297785ef2----717e92d5feed---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F717e92d5feed&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fessential-guidelines-for-building-machine-learning-models-on-stock-market-data-717e92d5feed&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F717e92d5feed&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fessential-guidelines-for-building-machine-learning-models-on-stock-market-data-717e92d5feed&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://towardsdatascience.com/questions-96667b06af5", "anchor_text": "rules and guidelines"}, {"url": "https://towardsdatascience.com/readers-terms-b5d780a700a4", "anchor_text": "Reader Terms"}, {"url": "https://www.sec.gov/edgar/searchedgar/companysearch.html", "anchor_text": "https://www.sec.gov/edgar/searchedgar/companysearch.html"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----717e92d5feed---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/tag/stock-market?source=post_page-----717e92d5feed---------------stock_market-----------------", "anchor_text": "Stock Market"}, {"url": "https://medium.com/tag/fintech?source=post_page-----717e92d5feed---------------fintech-----------------", "anchor_text": "Fintech"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F717e92d5feed&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fessential-guidelines-for-building-machine-learning-models-on-stock-market-data-717e92d5feed&user=Martin+Racko&userId=a5f297785ef2&source=-----717e92d5feed---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F717e92d5feed&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fessential-guidelines-for-building-machine-learning-models-on-stock-market-data-717e92d5feed&user=Martin+Racko&userId=a5f297785ef2&source=-----717e92d5feed---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F717e92d5feed&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fessential-guidelines-for-building-machine-learning-models-on-stock-market-data-717e92d5feed&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----717e92d5feed--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F717e92d5feed&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fessential-guidelines-for-building-machine-learning-models-on-stock-market-data-717e92d5feed&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----717e92d5feed---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----717e92d5feed--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----717e92d5feed--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----717e92d5feed--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----717e92d5feed--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----717e92d5feed--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----717e92d5feed--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----717e92d5feed--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----717e92d5feed--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@martin.racko?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@martin.racko?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Martin Racko"}, {"url": "https://medium.com/@martin.racko/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "16 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fa5f297785ef2&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fessential-guidelines-for-building-machine-learning-models-on-stock-market-data-717e92d5feed&user=Martin+Racko&userId=a5f297785ef2&source=post_page-a5f297785ef2--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fusers%2Fa5f297785ef2%2Flazily-enable-writer-subscription&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fessential-guidelines-for-building-machine-learning-models-on-stock-market-data-717e92d5feed&user=Martin+Racko&userId=a5f297785ef2&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}