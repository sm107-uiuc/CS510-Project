{"url": "https://towardsdatascience.com/how-machine-learning-could-help-on-horse-racing-betting-part-1-7aa363f75ca2", "time": 1683004112.2998881, "path": "towardsdatascience.com/how-machine-learning-could-help-on-horse-racing-betting-part-1-7aa363f75ca2/", "webpage": {"metadata": {"title": "How to Make Money with Machine Learning on Sport Betting | by Andrewngai | Towards Data Science", "h1": "How to Make Money with Machine Learning on Sport Betting", "description": "Note from the editor: This article is for educational and entertainment purposes only. If you want to use the presented model for real money bets, you do it at your own risk. Please make sure that it\u2026"}, "outgoing_paragraph_urls": [{"url": "https://www.linkedin.com/in/andrewngai9255/", "anchor_text": "Linkedin", "paragraph_index": 13}], "all_paragraphs": ["Note from the editor: This article is for educational and entertainment purposes only. If you want to use the presented model for real money bets, you do it at your own risk. Please make sure that it is in alignment with the terms and conditions of your bookmaker.", "Machine learning has been widely used in many time series analysis and forecasting. With the help of a large amount of historical data and computing power nowadays, ML models can sometimes produce extremely useful insight and guidance to sports betting decision making.", "This article illustrates how machine learning could help with horse racing betting strategy. We will use the data crawled from the Hong Kong Jockey Club home page, one of the oldest and largest horse racing institutes in the world. To avoid data leakage and evaluate the real performance of the model, we will be only using the matching data from the beginning of 2007 to fall 2019 to build the model and use it to bet on new upcoming matches. We\u2019ve utilized the model and build a unique investment strategy to bet for a two-month period(2019/09\u20132019/11) and achieve a positive return in the experiment.", "As we mentioned earlier, we will be using all the games from 2007 to 2019 in Hong Kong as training and validation sets. And 2019 winter data for test set to evaluate the overall betting portfolio performance. There are 109085 rows and 61 columns in the training data containing various information about each game.", "indexRdate: Race dateRid: Race IDHid: Horse IDVenue: Race venue (HV, ST)Track: Race track (TURF, AWT)Going: Race track conditionCourse: Race course (AWT will have no specific race course description)Class: Race class of the matchDistanceRfinishm: Race finish time in centi second (1/100 second)Rm1: 1st section finish time of the race in centi secondRm2: 2nd section finish time of the race in centi secondRm3: 3rd section finish time of the race in centi secondRm4: 4th section finish time of the race in centi secondRm5: 5th section finish time of the race in centi second Rm6: 6th section finish time of the race in centi secondHorsenum: the horse ID of the horseJname: JockeyTname: TrainerExweight: the handicapped weight carried by the horseBardraw: drawGear: Gear putting on the horseRating: Horse RatingRatechg: Rating change of the horse from previous raceHorseweight: Horse\u2019s weightHorseweightchg: The Horse\u2019s weight change from previous raceBesttime: The best finishing time of the horse on the race with same venue, distance and track (minute. second. centi second)Age: age of horsePriority: Priority of the horse for race given by the trainer.Lastsix: the rank from previous 6 racesRank: rank in current matchRunpos: The rank in each section of the horse in the race.P1: The rank in 1st section of the horseP2: The rank in 2nd section of the horseP3: The rank in 3rd section of the horseP4: The rank in 4th section of the horseP5: The rank in 5th section of the horseP6: The rank in 6th section of the horseM1: The finish time of the 1st section of the horse in centi secondM2: The finish time of the 2nd section of the horse in centi secondM3: The finish time of the 3rd section of the horse in centi secondM4: The finish time of the 4th section of the horse in centi secondM5: The finish time of the 5th section of the horse in centi secondM6: The finish time of the 6th section of the horse in centi secondFinishm: The race finish time of the horse in centi secondD1: The distance from the rank 1 horse in the 1st section (0.25 meant the distance is within 1 horse distance)D2: The distance from the rank 1 horse in the 2nd section (0.25 meant the distance is within 1 horse distance)D3: The distance from the rank 1 horse in the 3rd section (0.25 meant the distance is within 1 horse distance)D4: The distance from the rank 1 horse in the 4th section (0.25 meant the distance is within 1 horse distance)D5: The distance from the rank 1 horse in the 5th section (0.25 meant the distance is within 1 horse distance)D6: The distance from the rank 1 horse in the 6th section (0.25 meant the distance is within 1 horse distance)Datediff: the date difference between the previous match and current match of the horsePricemoney: price money of the raceWindist: The distance from the Rank1 horse.Win_t5: win odds of the horse 5 minutes before the raceWin: final win odds of the horsePlace_t5: place odds of the horse 5 minutes before the racePlace: final place odds of the horseInd_win: indicator of the winner of the race (1 for winner, 0 otherwise)Ind_pla: indicator of top 3 places in the race (1 for top 3, 0 otherwise)", "The original data comes with a lot of information, we need to filter out which of them are useful and also try building new features from the data to help predicting the results. I will not provide too much detail on feature engineering, but here are some key insights if you would like to try by yourself.", "After building a relatively useful model prediction the top 1 and top 3 winning probability of each race. I\u2019ve spent a lot of time experimenting and researching on how to achieve positive returns from the models. Horse racing has a lot of uncertainties and human effort to remove any potential unfair advantages. The betting strategy becomes extremely important. After many experiments on running models against real matches, I\u2019ve come up with a strategy with three essential concepts.", "First, let\u2019s talk about the expected return ratio. The most common simplest betting strategy is setting a return threshold, and only bet when the return ratio(win odd * winning probability) is higher than the threshold. We just need to calculate the winning probability and return ratio of each horse on a single match using model prediction results and bet when the return ratio is higher than the threshold. However, how to choose the threshold becomes a large problem, a low threshold usually leads to aggressive betting and large gain/loss on capital. Due to the large uncertainty of horse racing, the result on both low and high threshold varies a lot.", "Only using the return ratio is not good enough, as a racing game we also need to consider each horse\u2019s performance comparing with other horses in the same race. In other words, we need to find a horse that has the highest chance of winning comparing with all other horses in the same game. To extend this concept, we could also find the horses with the highest chance winning not only in a single game but among all the matches in a single day. And we only bet on those horses to largely reduce the risk. I called this lowest risk betting. you could find those horses by building another model on the log transformed sum observation of the original prediction result.", "Now we have all the low-risk horse and their return ratio, how much money should we bet on each horse. It turns out that, Kelly Criterion produces the best result.", "For simple bets with two outcomes, one involving losing the entire amount bet, and the other involving winning the bet amount multiplied by the payoff odds, the Kelly bet is:", "Finally, we combine those three concepts together. First, filter out all the low-risk horses of the day, and calculate their return ratio. Based on simulated past investment results to set an optimal return threshold. When the return ratio is higher than the threshold, using the Kelly Criterion to determine what percentage of the fund should bet on.", "We took a two month period and apply the finalized model and betting strategy on real games. And the result is quite satisfying, we\u2019ve made a bet on 76% of all the games and achieve a positive return at the end of the two month period. I will not expose the detail of the implementation, but if you have any questions or interested in my findings, feel free to leave a message below.", "Thanks for reading and I am looking forward to hearing your questions and thoughts. If you want to learn more about Data Science and Cloud Computing, you can find me on Linkedin.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Big Data Specialist, AWS Certified Solution Architect , Experienced Project Manager specializing in AWS/Azure Cloud infrastructure and Big Data Project"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F7aa363f75ca2&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-machine-learning-could-help-on-horse-racing-betting-part-1-7aa363f75ca2&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-machine-learning-could-help-on-horse-racing-betting-part-1-7aa363f75ca2&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-machine-learning-could-help-on-horse-racing-betting-part-1-7aa363f75ca2&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-machine-learning-could-help-on-horse-racing-betting-part-1-7aa363f75ca2&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----7aa363f75ca2--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----7aa363f75ca2--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://andrewngai9255.medium.com/?source=post_page-----7aa363f75ca2--------------------------------", "anchor_text": ""}, {"url": "https://andrewngai9255.medium.com/?source=post_page-----7aa363f75ca2--------------------------------", "anchor_text": "Andrewngai"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fa9b59d3719b5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-machine-learning-could-help-on-horse-racing-betting-part-1-7aa363f75ca2&user=Andrewngai&userId=a9b59d3719b5&source=post_page-a9b59d3719b5----7aa363f75ca2---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F7aa363f75ca2&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-machine-learning-could-help-on-horse-racing-betting-part-1-7aa363f75ca2&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F7aa363f75ca2&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-machine-learning-could-help-on-horse-racing-betting-part-1-7aa363f75ca2&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@vitreous_macula?utm_source=medium&utm_medium=referral", "anchor_text": "Julia Joppien"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://unsplash.com/@alexandermils?utm_source=medium&utm_medium=referral", "anchor_text": "Alexander Mils"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://www.linkedin.com/in/andrewngai9255/", "anchor_text": "Linkedin"}, {"url": "https://unsplash.com/@alfonsmc10?utm_source=medium&utm_medium=referral", "anchor_text": "Alfons Morales"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----7aa363f75ca2---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/tag/sports-betting?source=post_page-----7aa363f75ca2---------------sports_betting-----------------", "anchor_text": "Sports Betting"}, {"url": "https://medium.com/tag/programming?source=post_page-----7aa363f75ca2---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/tag/data-science?source=post_page-----7aa363f75ca2---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/sklearn?source=post_page-----7aa363f75ca2---------------sklearn-----------------", "anchor_text": "Sklearn"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F7aa363f75ca2&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-machine-learning-could-help-on-horse-racing-betting-part-1-7aa363f75ca2&user=Andrewngai&userId=a9b59d3719b5&source=-----7aa363f75ca2---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F7aa363f75ca2&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-machine-learning-could-help-on-horse-racing-betting-part-1-7aa363f75ca2&user=Andrewngai&userId=a9b59d3719b5&source=-----7aa363f75ca2---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F7aa363f75ca2&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-machine-learning-could-help-on-horse-racing-betting-part-1-7aa363f75ca2&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----7aa363f75ca2--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F7aa363f75ca2&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-machine-learning-could-help-on-horse-racing-betting-part-1-7aa363f75ca2&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----7aa363f75ca2---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----7aa363f75ca2--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----7aa363f75ca2--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----7aa363f75ca2--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----7aa363f75ca2--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----7aa363f75ca2--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----7aa363f75ca2--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----7aa363f75ca2--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----7aa363f75ca2--------------------------------", "anchor_text": ""}, {"url": "https://andrewngai9255.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://andrewngai9255.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Andrewngai"}, {"url": "https://andrewngai9255.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "160 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fa9b59d3719b5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-machine-learning-could-help-on-horse-racing-betting-part-1-7aa363f75ca2&user=Andrewngai&userId=a9b59d3719b5&source=post_page-a9b59d3719b5--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Ffa824db741a3&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-machine-learning-could-help-on-horse-racing-betting-part-1-7aa363f75ca2&newsletterV3=a9b59d3719b5&newsletterV3Id=fa824db741a3&user=Andrewngai&userId=a9b59d3719b5&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}