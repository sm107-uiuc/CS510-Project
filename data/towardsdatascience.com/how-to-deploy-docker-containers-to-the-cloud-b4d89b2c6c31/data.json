{"url": "https://towardsdatascience.com/how-to-deploy-docker-containers-to-the-cloud-b4d89b2c6c31", "time": 1683014048.805582, "path": "towardsdatascience.com/how-to-deploy-docker-containers-to-the-cloud-b4d89b2c6c31/", "webpage": {"metadata": {"title": "How to Deploy Docker Containers to The Cloud | Towards Data Science", "h1": "How to Deploy Docker Containers to The Cloud", "description": "Learn how to deploy Docker containers around the globe with Google Cloud Platform (GCP). Including an in-depth description of how to use Dockerfiles."}, "outgoing_paragraph_urls": [{"url": "https://github.com/jamescalam/gcp-api/blob/master/app.py", "anchor_text": "here\u2019s something I made earlier", "paragraph_index": 5}, {"url": "https://docs.docker.com/docker-for-windows/install/", "anchor_text": "here", "paragraph_index": 7}, {"url": "https://hub.docker.com/_/python", "anchor_text": "available here", "paragraph_index": 19}, {"url": "https://cloud.google.com/sdk/docs/downloads-interactive", "anchor_text": "SDK installer here", "paragraph_index": 39}, {"url": "https://console.cloud.google.com/projectselector2/home/dashboard", "anchor_text": "project selector page in the GCP console", "paragraph_index": 43}, {"url": "https://console.cloud.google.com/gcr", "anchor_text": "Container Registry", "paragraph_index": 45}, {"url": "https://console.cloud.google.com/gcr", "anchor_text": "GCR", "paragraph_index": 50}, {"url": "https://console.cloud.google.com/cloud-build/dashboard", "anchor_text": "Cloud Build dashboard", "paragraph_index": 50}, {"url": "https://console.cloud.google.com/run", "anchor_text": "Cloud Run", "paragraph_index": 51}, {"url": "https://twitter.com/jamescalam", "anchor_text": "Twitter", "paragraph_index": 58}, {"url": "https://www.youtube.com/c/jamesbriggs", "anchor_text": "https://www.youtube.com/c/jamesbriggs", "paragraph_index": 61}], "all_paragraphs": ["Docker containers are brilliant little things. They are essentially self-contained applications that can run across any OS.", "Imagine you have a Python application, you bundle it, along with everything you need to run it into a Docker container \u2014 that container can now be run on any Windows, Linux, or macOS system, without installing anything!", "Another great benefit of Docker is the level of support for containers on Cloud platforms, such as Google Cloud (GCP), which we will be using in this article.", "We can quickly build an application, package it into a container with Docker, and deploy it across the globe with GCP.", "That is what we will do in this article. We will take a simple Python API, package it with Docker, and deploy it with GCP, covering:", "We won\u2019t be focusing on the Python code simply because that is not the purpose of the article. Instead, bring-your-own-code \u2014 or, here\u2019s something I made earlier.", "We store our code in a directory called gcp-api (call this anything you like) under the name app.py. Alongside our script, we need:", "Of course, we\u2019re using Docker, so; we need Docker too. It can be installed from here.", "If you have any OS-specific issues installing Docker, the 1:46:21 mark in this video explains Windows installation, followed by the 1:53:22 mark for macOS.", "The Dockerfile is our container building blueprint. It tells Docker exactly how to rearrange our scripts and files in a way that produces a self-contained application.", "Our scripts and files are raw materials (timber, bricks, etc.). We create a set of instructions for what we want our house to be like (the Dockerfile), which we then give to our architect (Docker), who then does all the technical stuff to produce a house blueprint (the image).", "Later, we will also give the blueprint to our builder (Google Build), who will construct the house (container) for us \u2014 but not yet.", "So, our Dockerfile. It looks like this:", "Initially, it may look confusing \u2014 but it\u2019s incredibly simple.", "The very first line of our Dockerfile initializes our container image with another pre-built Docker image.", "This pre-built image is, in essence, nothing more than a lightweight Linux OS containing Python 3.6.", "But why \u2018slim-buster\u2019? Well, buster is the codename for all version 10 variations of Debian (a Linux Distribution).", "As for why they chose the word \u2018buster\u2019 \u2014 I think someone opens a dictionary and picks the first word they see.", "Slim, on the other hand, does make sense. As you may have guessed, it means Debian 10.x \u2014 but trimmed down, resulting in a smaller package size.", "A full list of official Python images is available here.", "Warning: It\u2019s also worth noting that we\u2019re using Python 3.6 here; you don\u2019t need to stick to this unless you will be using Google Firebase (which we won\u2019t be using here, but it\u2019s good to be aware of this).", "If you do happen to use Google Firebase with Python, you will likely use the python-firebase module, which contains an import called async.", "Unfortunately, Python 3.7 introduced that exact word as a keyword. We avoid the resultant SyntaxError by sticking with Python 3.6.", "Next up is WORKDIR and COPY.", "We use WORKDIR to set the active directory inside our image (the construction site of our container) to /app. From now on, . outside of our image refers to our current directory (eg /gcp-api) and . inside our image refers to /app.", "After WORKDIR , we COPY everything from our local directory /gcp-api to our internal active directory /app.", "The reason we copy app.py to /app inside our image is because this is the structure that our Google Cloud instance will expect. We can change this, but this is what we will use here.", "Now, we have our pip install instructions. We use RUN to tell Docker to run the following command. That following command is pip install -r requirements.txt.", "By writing pip install -r requirements.txt we are telling Docker to run pip install recursively -r over every line contained within requirements.txt.", "So what does requirements.txt look like?", "When that is fed into our recursive pip install instruction, it is translated into:", "Which I\u2019m sure is something everyone recognizes.", "Our final instruction is, depending on our app, not necessarily required. In this case, it is used to host our API using the gunicorn Python package.", "Nonetheless, the CMD instruction is the equivalent to opening our computer\u2019s command-line interface CLI and typing whatever commands we provide, in this case exec gunicorn \u2014 bind :$PORT --workers 1 --threads 8 --timeout 0 app:app.", "Earlier in the article, we described the house building metaphor for Docker containers. So far, we\u2019ve acquired our raw materials (scripts and files) and written a set of instructions explaining what we want our house to be like (the Dockerfile).", "Now, it\u2019s time to create our blueprint \u2014 the Docker image.", "We can create this by executing the command:", "At this point, we have our blueprint, and all we need now is our builder, the Cloud \u2014 so let\u2019s begin setting it up.", "There are three steps we need to take to deploy our container to the Cloud. First we:", "We can find the SDK installer here. Once it\u2019s installed, we need to authenticate our GCloud SDK by opening CMD prompt (or your equivalent CLI) and typing:", "This command opens our web browser and allows us to log in to Google Cloud as usual. We configure Docker to used our GCP credentials with:", "Finally, set the active project to your project ID (mine is medium-286319) with:", "Google\u2019s Container Registry (GCR) service allows us to store Docker containers, which we can use as a launchpad for our deployments.", "Before we can use GCR (or any other GCP services), we need to create a project. We can do this by navigating to the project selector page in the GCP console and clicking Create Project.", "All we need to do here is give our project a name. I use medium.", "Now we have our project setup; we should be able to access Container Registry. Here, we should be able to see the name of our newly created project in the top bar.", "To use GCR, we need to click Enable Container Registry API in the center of the console window.", "Finally, we can upload our container to GCR by submitting it to Cloud Build \u2014 the GCP service that builds Docker containers.", "To do this, we open our CLI in our project directory (gcp-api) and type:", "Our Container Registry location is provided to the --tag flag, where:", "If we go back to our GCR window, we should be able to see our newly uploaded Docker image. If it isn\u2019t there yet, it\u2019s likely still in the build process \u2014 which we can find in our Cloud Build dashboard.", "Now we have our Docker container ready; we can deploy it with Cloud Run.", "In the Cloud Run interface, we deploy by (1) clicking Create Service, (2) configuring our deployment, (3\u20134) selecting the container, and (5) creating our deployment!", "We will see the deployment status in the Cloud Run console, which should take no longer than a few minutes.", "Once complete, we will see a green tick next to our deployment name and our deployment URL next to that.", "That\u2019s it, we\u2019ve taken our Python app, packaged it into a Docker container, and deployed it to the web with Google Cloud!", "Thanks to some brilliant tools \u2014 namely Docker and GCP \u2014 the process is painless and (typically) results in flawless deployments time after time.", "Now, more than ever before in the history of humanity. We can take the ideas and concepts in our minds and give them a tangible presence in the real world \u2014 which can result in some genuinely awe-inspiring creations.", "I hope this article will help some of you out there \u2014 if you have any questions, feedback, or ideas, feel free to reach out via Twitter or in the comments below. Thanks for reading!", "Interested in learning about SQL on the Cloud? Try Google\u2019s brilliant MySQL, PostgreSQL, and SQL Server database services:", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Freelance ML engineer learning and writing about everything. I post a lot on YT https://www.youtube.com/c/jamesbriggs"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fb4d89b2c6c31&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-deploy-docker-containers-to-the-cloud-b4d89b2c6c31&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-deploy-docker-containers-to-the-cloud-b4d89b2c6c31&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-deploy-docker-containers-to-the-cloud-b4d89b2c6c31&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-deploy-docker-containers-to-the-cloud-b4d89b2c6c31&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----b4d89b2c6c31--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----b4d89b2c6c31--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://jamescalam.medium.com/?source=post_page-----b4d89b2c6c31--------------------------------", "anchor_text": ""}, {"url": "https://jamescalam.medium.com/?source=post_page-----b4d89b2c6c31--------------------------------", "anchor_text": "James Briggs"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fb9d77a4ca1d1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-deploy-docker-containers-to-the-cloud-b4d89b2c6c31&user=James+Briggs&userId=b9d77a4ca1d1&source=post_page-b9d77a4ca1d1----b4d89b2c6c31---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fb4d89b2c6c31&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-deploy-docker-containers-to-the-cloud-b4d89b2c6c31&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fb4d89b2c6c31&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-deploy-docker-containers-to-the-cloud-b4d89b2c6c31&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@zoltantasi?utm_source=medium&utm_medium=referral", "anchor_text": "Zoltan Tasi"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://github.com/jamescalam/gcp-api/blob/master/app.py", "anchor_text": "here\u2019s something I made earlier"}, {"url": "https://docs.docker.com/docker-for-windows/install/", "anchor_text": "here"}, {"url": "https://unsplash.com/@randyfath?utm_source=medium&utm_medium=referral", "anchor_text": "Randy Fath"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://hub.docker.com/_/python", "anchor_text": "available here"}, {"url": "https://firebase.google.com/brand-guidelines", "anchor_text": "Image source"}, {"url": "https://cloud.google.com/sdk/docs/downloads-interactive", "anchor_text": "SDK installer here"}, {"url": "https://console.cloud.google.com/projectselector2/home/dashboard", "anchor_text": "project selector page in the GCP console"}, {"url": "https://console.cloud.google.com/gcr", "anchor_text": "Container Registry"}, {"url": "https://cloud.google.com/container-registry/docs/pushing-and-pulling#tag_the_local_image_with_the_registry_name", "anchor_text": "GCR hostname"}, {"url": "https://console.cloud.google.com/gcr", "anchor_text": "GCR"}, {"url": "https://console.cloud.google.com/cloud-build/dashboard", "anchor_text": "Cloud Build dashboard"}, {"url": "https://console.cloud.google.com/run", "anchor_text": "Cloud Run"}, {"url": "https://twitter.com/jamescalam", "anchor_text": "Twitter"}, {"url": "https://towardsdatascience.com/sql-on-the-cloud-with-python-c08a30807661", "anchor_text": "SQL on The Cloud With PythonA straightforward guide to SQL on Google Cloud and Pythontowardsdatascience.com"}, {"url": "https://medium.com/tag/technology?source=post_page-----b4d89b2c6c31---------------technology-----------------", "anchor_text": "Technology"}, {"url": "https://medium.com/tag/software-development?source=post_page-----b4d89b2c6c31---------------software_development-----------------", "anchor_text": "Software Development"}, {"url": "https://medium.com/tag/web-development?source=post_page-----b4d89b2c6c31---------------web_development-----------------", "anchor_text": "Web Development"}, {"url": "https://medium.com/tag/programming?source=post_page-----b4d89b2c6c31---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/tag/cloud-computing?source=post_page-----b4d89b2c6c31---------------cloud_computing-----------------", "anchor_text": "Cloud Computing"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fb4d89b2c6c31&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-deploy-docker-containers-to-the-cloud-b4d89b2c6c31&user=James+Briggs&userId=b9d77a4ca1d1&source=-----b4d89b2c6c31---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fb4d89b2c6c31&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-deploy-docker-containers-to-the-cloud-b4d89b2c6c31&user=James+Briggs&userId=b9d77a4ca1d1&source=-----b4d89b2c6c31---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fb4d89b2c6c31&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-deploy-docker-containers-to-the-cloud-b4d89b2c6c31&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----b4d89b2c6c31--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fb4d89b2c6c31&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-deploy-docker-containers-to-the-cloud-b4d89b2c6c31&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----b4d89b2c6c31---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----b4d89b2c6c31--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----b4d89b2c6c31--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----b4d89b2c6c31--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----b4d89b2c6c31--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----b4d89b2c6c31--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----b4d89b2c6c31--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----b4d89b2c6c31--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----b4d89b2c6c31--------------------------------", "anchor_text": ""}, {"url": "https://jamescalam.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://jamescalam.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "James Briggs"}, {"url": "https://jamescalam.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "9.6K Followers"}, {"url": "https://www.youtube.com/c/jamesbriggs", "anchor_text": "https://www.youtube.com/c/jamesbriggs"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fb9d77a4ca1d1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-deploy-docker-containers-to-the-cloud-b4d89b2c6c31&user=James+Briggs&userId=b9d77a4ca1d1&source=post_page-b9d77a4ca1d1--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F75e31c56d187&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-deploy-docker-containers-to-the-cloud-b4d89b2c6c31&newsletterV3=b9d77a4ca1d1&newsletterV3Id=75e31c56d187&user=James+Briggs&userId=b9d77a4ca1d1&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}