{"url": "https://towardsdatascience.com/exploratory-data-analysis-passport-numbers-in-pandas-4ccb567115b6", "time": 1683010432.7987578, "path": "towardsdatascience.com/exploratory-data-analysis-passport-numbers-in-pandas-4ccb567115b6/", "webpage": {"metadata": {"title": "Exploratory Data Analysis \u2014 Passport Numbers in Pandas | by Vaclav Dekanovsky | Towards Data Science", "h1": "Exploratory Data Analysis \u2014 Passport Numbers in Pandas", "description": "According to the ICAO standard, the passport number should be up to 9 characters long and can contain numbers and letters. During your work as an analyst, you can come along a data set containing the\u2026"}, "outgoing_paragraph_urls": [{"url": "https://github.com/vaasha/Data-Analysis_in-Examples/blob/master/EDA_Passport_Numbers/data.csv", "anchor_text": "github", "paragraph_index": 2}, {"url": "https://github.com/vaasha/Data-Analysis_in-Examples/blob/master/EDA_Passport_Numbers/Passport%20Numbers%20Statistics.ipynb", "anchor_text": "Jupiter notebook", "paragraph_index": 2}], "all_paragraphs": ["According to the ICAO standard, the passport number should be up to 9 characters long and can contain numbers and letters. During your work as an analyst, you can come along a data set containing the passports and you will be asked to explore it.", "I have recently worked with one such set and I\u2019d like to share the steps of this analysis with you, including:", "You can go through the steps with me. Get the (randomized data) from github. It also contains the Jupiter notebook with all the steps.", "First, let\u2019s load the data. Since the dataset contains only one column, it\u2019s quite straightforward.", "The .info() command will tell us that we have 10902 passports in the dataset and all are imported as \u201cobject\u201d which means that the format is string.", "As an initial step of any analysis should be the check if there are some duplicated values. In our case, there are, so we will remove them using pandas\u2019s .drop_duplicates() method.", "Usually, you continue with the check of the longest and the shortest passport.", "You might become happy, that all the passports are 9 characters long, but you would be misled. The data are having string format so that the lowest \u201cstring\u201d value is the one which starts with the highest number of zeros and the largest the one which has the most zeds at the beginning.", "In order to see the length of the passports let\u2019s look at their length.", "In the contracts to our initial belief, the shortest passport contains only 3 characters while the longest is 17 (way over the expected maximum of 9) characters long.", "Let\u2019s expand our data frame with the 'len'column so that we can have a look at examples:", "The 3 digit passport numbers look suspicious, but they meet the ICAO criteria, but the longest ones are obviously too long, however, they contain quite many trailing zeros. Maybe someone just added the zeros in order to meet some data storage requirements.", "Let\u2019s have a look at the overall length distribution of our data sample.", "We see, that the most passports number in our sample, are 7, 8 or 9 characters long. Quite a few are however 10 or 12 characters long, which is unexpected.", "Maybe the long passports are having leading or trailing zeros, like our example with 17 characters.", "In order to explore these zero-pads let\u2019s add two more columns to our data set \u2014 \u2018leading_zeros\u2019 and \u2018trailing_zeros\u2019 to contain the number of leading and trailing zeros.", "Then we can easily display the passport which has more than 9 characters to check if the have any leading or trailing zeros:", "Most of the passports in the set don\u2019t have any zeros and still, they are longer than 9 characters. Just for the sake of displaying it, let\u2019s have a look at the distribution of zeros on each position of the passport numbers.", "We know that the shortest passport fills in 3 positions and the longest have 17. Let\u2019s iterate through all the passport numbers and then iterate through all their characters to see where are zeros.", "The output of this operation is the new data frame 'zeros_distribution' which contains True on each position where there is zero in the passport number", "Notice that I have highlighted the True with yellow background. Styling in pandas can be done using .style method, but you must be careful. Styling will plot the whole dataset, which can be time-consuming, so specify how many rows you want to display \u2014 e.g. by sample(5). You can apply the style to some columns only using subset parameter.", "By summing the zeros at each position we can see how many zeros appear there. By counting all values at the position we will see, how many times this position is filled in in the dataset (e.g. position 17 is rarely filled in), because count(N/A) is 0. We run these aggregations only, over columns 1\u201317 by range(1,18)", "We see that except for positions 16 and 17, the values are not trailing zeros. It\u2019s obviously possible that these values are combinations of both leading and trailing zeros, but that\u2019s not very probable. We have also already seen the examples of passport numbers longer than 9 characters before.", "We can simply .strip(\"0\") to remove both leading and trailing zeros and we will see, that there are still invalid passport numbers longer than 9 characters:", "To review string patterns it is helpful to use the power of the regular expression. Even though their syntax is a bit cumbersome, once used correctly, they can be very quick and efficient.", "For the beginning let\u2019s add a column which is True in case the passport number starts with a letter and False otherwise.", "I like to display the results, not as a Serie only, but as a dataFrame, because I usually want to show more information, for example, the count and the percentage like in the case of passports starting with a letter.", "One might also be interested if there are letters only at the beginning or if they also appear in the middle of the passport number (after at least 1 number). This can again be easily solved by the regular expressions:", "If we display the count and the percentage using the same code as above, we will see that the majority of the passports don\u2019t have any letter in the middle.", "Another question, when we were designing the passport pattern for our system was how many letters can appear on the beginning of the string. In order to find out let\u2019s devise a simple function using regex.", "^[a-zA-z]+ mean that there are one or more letters at the beginning. .group(0) method of the re.match returns the first group which matches this regular expression. So in case of ABC123 it would return ABC and we will simply count its length. The only issue is that re.match returns None and group() fails in case the pattern is not met, so we have to handle it for occasions when the passport contains only numbers.", "Once we have our function, it\u2019s only a matter of apply ing it to the passportNumber column:", "In this case, let\u2019s not show the statistics, but let\u2019s list the values based on the length of letter sequence at the beginning:", "You are sometimes asked to provide example values, and it\u2019s easily done, by the sample() method.", "There\u2019s a chance that the data supplier has added a prefix to the values, which was not originally included in the passport number. For most purposes, such a prefix must be removed. But how to find it?", "Let\u2019s first assume, that our prefix would have 3 characters. Then we can easily slice the first 3 characters and value_counts to see those which are the most common:", "We can see that of the values appear much more often than the average occurrence of the 3 letter prefix (.mean() applied to the code above is 2.3). 009 appears 37 times which is much more often than 2.3 times.", "You can expand your analysis and check if the prefix appears only for certain lengths. We can assume that passports having 12 characters have at least 3 letter prefix. The following code will disguise that prefix 932 is much more common for 12 characters long passports than usual.", "The values 932 appears 27 times, while the average for 12 character longs is only 1.3. You can rerun these simple size-counts to shorter or longer prefixes or limit to any other characteristics.", "If you have sensitive data, but you need to share them with a data scientist, most clients would agree to share the anonymized data or randomized sample. In our case, let\u2019s try simple randomization, which:", "Such a function goes character by character and changes the values to new random ones. The result is a dictionary {\"old value\": \"new value\"}", "This method keeps the leading/trailing zeros for an analysis of the randomized data, however, it would reset any repeating prefix, such a method would be more complex and you can try that at home.", "Having the mapping of the old to new values, we can simply .map() it to the list of passports to receive a new randomized list, which keeps most of the characteristics of our original set.", "The function is applied to the .unique() passports to avoid the same duplicated passport being turned into two different new random values. It\u2019s still possible that two different passports would become the same. To avoid that risk, you would have to check if the new random value is not already used in the existing mapping during the creation of each new string.", "In this article, we have reviewed how to analyze a list of alphanumeric strings to reveal their patterns. The techniques we have used are the most common requirements in each data analysis or data cleaning procedure and the can be tweaked to cover a huge range of similar tasks like:", "Feel free to play with the data yourself:", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Data scientist who loves to explore everything and write about the topics from multiple points of view."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F4ccb567115b6&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fexploratory-data-analysis-passport-numbers-in-pandas-4ccb567115b6&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fexploratory-data-analysis-passport-numbers-in-pandas-4ccb567115b6&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fexploratory-data-analysis-passport-numbers-in-pandas-4ccb567115b6&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fexploratory-data-analysis-passport-numbers-in-pandas-4ccb567115b6&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----4ccb567115b6--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----4ccb567115b6--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://vdekanovsky.medium.com/?source=post_page-----4ccb567115b6--------------------------------", "anchor_text": ""}, {"url": "https://vdekanovsky.medium.com/?source=post_page-----4ccb567115b6--------------------------------", "anchor_text": "Vaclav Dekanovsky"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fed473176733b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fexploratory-data-analysis-passport-numbers-in-pandas-4ccb567115b6&user=Vaclav+Dekanovsky&userId=ed473176733b&source=post_page-ed473176733b----4ccb567115b6---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F4ccb567115b6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fexploratory-data-analysis-passport-numbers-in-pandas-4ccb567115b6&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F4ccb567115b6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fexploratory-data-analysis-passport-numbers-in-pandas-4ccb567115b6&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@mana5280?utm_source=medium&utm_medium=referral", "anchor_text": "mana5280"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://github.com/vaasha/Data-Analysis_in-Examples/blob/master/EDA_Passport_Numbers/data.csv", "anchor_text": "github"}, {"url": "https://github.com/vaasha/Data-Analysis_in-Examples/blob/master/EDA_Passport_Numbers/Passport%20Numbers%20Statistics.ipynb", "anchor_text": "Jupiter notebook"}, {"url": "https://github.com/vaasha/Data-Analysis_in-Examples/blob/master/EDA_Passport_Numbers/data.csv", "anchor_text": "data.csv on github"}, {"url": "https://github.com/vaasha/Data-Analysis_in-Examples/blob/master/EDA_Passport_Numbers/Passport%20Numbers%20Statistics.ipynb", "anchor_text": "Passport Numbers Statistics.ipynb on github"}, {"url": "https://towardsdatascience.com/dealing-with-extra-white-spaces-while-reading-csv-in-pandas-67b0c2b71e6a", "anchor_text": "Dealing with extra white spaces while reading CSV in PandasWhy do we care about blank spaces? Build-in pandas functions, and custom handling. Creation of 1M test data and\u2026towardsdatascience.com"}, {"url": "https://medium.com/tag/pandas?source=post_page-----4ccb567115b6---------------pandas-----------------", "anchor_text": "Pandas"}, {"url": "https://medium.com/tag/data-analysis?source=post_page-----4ccb567115b6---------------data_analysis-----------------", "anchor_text": "Data Analysis"}, {"url": "https://medium.com/tag/dataset?source=post_page-----4ccb567115b6---------------dataset-----------------", "anchor_text": "Dataset"}, {"url": "https://medium.com/tag/exploratory-data-analysis?source=post_page-----4ccb567115b6---------------exploratory_data_analysis-----------------", "anchor_text": "Exploratory Data Analysis"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F4ccb567115b6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fexploratory-data-analysis-passport-numbers-in-pandas-4ccb567115b6&user=Vaclav+Dekanovsky&userId=ed473176733b&source=-----4ccb567115b6---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F4ccb567115b6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fexploratory-data-analysis-passport-numbers-in-pandas-4ccb567115b6&user=Vaclav+Dekanovsky&userId=ed473176733b&source=-----4ccb567115b6---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F4ccb567115b6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fexploratory-data-analysis-passport-numbers-in-pandas-4ccb567115b6&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----4ccb567115b6--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F4ccb567115b6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fexploratory-data-analysis-passport-numbers-in-pandas-4ccb567115b6&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----4ccb567115b6---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----4ccb567115b6--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----4ccb567115b6--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----4ccb567115b6--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----4ccb567115b6--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----4ccb567115b6--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----4ccb567115b6--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----4ccb567115b6--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----4ccb567115b6--------------------------------", "anchor_text": ""}, {"url": "https://vdekanovsky.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://vdekanovsky.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Vaclav Dekanovsky"}, {"url": "https://vdekanovsky.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "623 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fed473176733b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fexploratory-data-analysis-passport-numbers-in-pandas-4ccb567115b6&user=Vaclav+Dekanovsky&userId=ed473176733b&source=post_page-ed473176733b--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F41f38caa0bb5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fexploratory-data-analysis-passport-numbers-in-pandas-4ccb567115b6&newsletterV3=ed473176733b&newsletterV3Id=41f38caa0bb5&user=Vaclav+Dekanovsky&userId=ed473176733b&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}