{"url": "https://towardsdatascience.com/doing-yelp-better-fdc11c20362a", "time": 1683001357.531008, "path": "towardsdatascience.com/doing-yelp-better-fdc11c20362a/", "webpage": {"metadata": {"title": "Doing Yelp Better. Using Vader and LDA to provide\u2026 | by Hamilton Chang | Towards Data Science", "h1": "Doing Yelp Better", "description": "Welcome to a project i\u2019m calling the Yelp Report Cards. In this project, it is my aim to produce a business value-add to Yelp\u2019s current business owner services. Using NLTK\u2019s Vader Sentiment Analysis\u2026"}, "outgoing_paragraph_urls": [{"url": "https://desolate-ocean-14363.herokuapp.com/", "anchor_text": "click here", "paragraph_index": 2}, {"url": "https://towardsdatascience.com/mo-data-mo-money-a1272f653046", "anchor_text": "here", "paragraph_index": 12}, {"url": "https://github.com/hamiltonchangcodes/yelp_report_cards", "anchor_text": "Github", "paragraph_index": 31}, {"url": "http://shorturl.at/aBGY5", "anchor_text": "shorturl.at/aBGY5", "paragraph_index": 33}], "all_paragraphs": ["Edit: Updated app to include snapshots of good and bad reviews.", "Welcome to a project i\u2019m calling the Yelp Report Cards. In this project, it is my aim to produce a business value-add to Yelp\u2019s current business owner services. Using NLTK\u2019s Vader Sentiment Analysis and combining it with Genism\u2019s LDA library, I created a quantitative report card for restaurants to determine areas in which they are doing well, and areas in which they can improve on.", "To skip straight to the app, click here.", "Yelp is quite possibly the largest review site in the world for local businesses, encompassing all sorts of businesses from doctor\u2019s offices to cleaning services. At its core however, Yelp began as a crowd-sourced review site, democratizing the restaurant review process and bringing greater exposure to restaurants all over the world by soliciting user-generated content for the restaurants in its database.", "Over time, the popularity of Yelp as a restaurant information resource has led to the creation of millions of points of data. This has somewhat diluted the impact of Yelp reviews for a restaurant and led to some discontent from restaurant owners. Below are 3 of many points that lead to dissatisfaction with Yelp by business owners.", "Due to the sheer volume of reviews, every review that goes into a restaurant ends up stabilizing their rating. There it stays forever, usually at a 4. At this point, most restaurants shoot for a 4, and only the truly best like Le Bernadin (3 Michelin Stars), manage to get a 4.5. Restaurants with a 5 star review typically are newer restaurants with less than 30 reviews, and a lot of chefs believe those mostly come from friends of the restaurant. You can see the distribution in reviews in the below graph. It is assumed 1 and 2 star restaurants usually end up closing, but I can assure you, my local Chinese take out is open and busy as ever. This may also be bias from Yelp\u2019s API feeding me restaurants with a higher review count.", "Yelp being the designated ground for people looking to respond in some way or another leads to a lot of praise, or angry passive aggressive content. People who use Yelp for the first time or the thousandth time are usually motivated by extreme experiences, either positive or negative, and as such their reviews tend to reflect those experiences, without taking into account the remainder of the dining experience.", "As described above, due to the focus on a single issue we see a large range of positive and negative reviews that aren\u2019t properly reflective of the entire dining experience. These are not reviews as we have come to commonly expect, noting positives and deficiencies. As such, many restaurants see a lot of 5 star or 1 star reviews which they feel is unbalanced and affects their total score.", "Given that we have established some of the issues many restaurants face when it comes to dealing with online reviews, is there a way in which Yelp can add value for these restaurants and provide workable feedback?", "Yelp holds millions of user reviews, and using NLP we can take this data and provide comprehensive quantitative metrics for a restaurant without having to spend hours hand sorting reviews. Using this metric, restaurants can hone in on problems and work to improve their business.", "The process for creating these metrics are quite simple, and outlined in the below graph:", "Using Yelp\u2019s API, I obtained the information and more importantly, the restaurant_id for each restaurant in a given borough. This provided me with a list of 1000 restaurant_ids that I could then use to scrape 5 pages or at least 100 reviews for restaurants that had that many reviews. Some restaurants scraped did not have 100 reviews, and other restaurants had more than 100 reviews due to users updating their reviews. Some of these updated reviews were positive, and some were negative.", "Both Staten Island and the Bronx were the least responsive on Yelp. I believe this has something to do with my belief (discussed here) that most people tend not to leave Yelp reviews unless they have a significant dining experience. These restaurants, being in home territory, are providing daily meals for the residents, and thus they are largely ignored by locals on Yelp. Dining in Manhattan is widely considered to be an experience, or special occasion and thus is more likely to garner a response on Yelp. In addition, consulting with a local Staten Island expert, I was informed that possibly due to Staten Island\u2019s largely residential nature, most residents either drive across the bridge into Brooklyn for unique dining experiences, or stay home to eat. This may contribute to Staten Island\u2019s low response rate.", "After gathering the data, the first step I took was to run the data through NLTK\u2019s Vader Sentiment Analysis. Vader is an extremely simple library to use, trained on Twitter Data. As such, it does not require much data preparation as things like punctuation, capitalization and random stop words help it determine sentiment score.", "I did not focus on the number of stars given for the review, because I feel the star rating is arbitrary, and there are no guidelines. Its simply a representation of how mad or happy the reviewer is without providing us with a measurable metric to identify specific problems. For example, a 3 star rating is ambiguous, a person could praise the food, but mention 2\u20133 things that they were unhappy with at the same time.", "Vader was done using a simple lambda function that returned to us a set of 4 scores for each review, a positive, neutral, negative and compound score. The compound score is what we are focusing on, which range from -1 to 1 reflecting negative to positive. The distributions were a little lopsided due to the nature of responses one typically sees on Yelp. The below graph is a sampling of the frequency of average compound sentiment scores.", "As we can see, there are more reviews featuring positive sentiment than negative. That\u2019s ok. So long as we work within this acknowledged framework, we can comprehend the eventual scores.", "For those unfamiliar with Vader, below is a snapshot of some of our restaurant reviews that have been \u201cvaderized\u201d:", "To illustrate how Vader sentiment analysis works, below are sample reviews from the restaurant with the highest average compound score, Fish Cheeks (.945), and the lowest, Di Fara Pizza (.511).", "As you can see, there are a lot of superlatives associated with the food at Fish Cheeks, people are effusive in their praise. For Di Fara Pizza on the other hand, one of the most famous pizza restaurants in NYC, many people praise the food, but are also dissatisfied with the lines, as the wait is typically 45 minutes to 1.5 hours for a slice of pizza. This also lends weight to my assertion that stars are too ambiguous. There are clearly problems with service at DiFara, but many of the reviews are 5 stars, and in fact the overall score for the restaurant is 4 stars. Using the star system on individual reviews thus would give us a false positive on identifying service problems to determine sentiment.", "The next step in our process is using Latent Dirichlet Allocation. This is an unsupervised machine learning tool that samples the corpus (all the text) of our data and attempts to derive common topics. I trained this model on restaurants where service was mentioned, as service related reviews comprised only 30% of my overall data. I instructed the LDA to find 15 topics, since service was underrepresented in my data, so I was looking for at least 2 topics that represented service, and the rest I needed to ensure that the broad array of cuisines on offer in NYC was adequately represented. It would have been an epic failure if my model were to come across a review mentioning food and failed to identify it.", "LDA is an exhaustive process that requires constant tuning and rerunning in order to ensure the model is trained sufficiently. In addition to cleaning, lemmatizing, and tokenizing, I also needed to remove a multitude of stop words beyond those found in the standard stopword library. In the end, I needed to add over 1000 additional stop words per borough in order to ensure my model was sufficiently prepared. Words I added to the stop list included all parts of speech that were not relevant to the process like \u201cbrother\u201d, \u201csister\u201d, \u201csteve\u201d, \u201cdelicious\u201d, \u201cmaybe\u201d, \u201cbomb\u201d, and \u201cscrumptious\u201d. I wanted to ensure food and service oriented words were included, but did make sure to leave off the stop list service related adjectives in order to expand the range of service. My final topic list is below:", "Once the topic list was finalized, I was able to apply the model to the entirety of my reviews and assign a topic number to the highest scoring topic for each review, as seen below:", "The final part of the project involved loading the Vader and LDA data frames and writing a function to tally each one and create a score. The code is below:", "The final result is stored in a dictionary that we can then convert to a json file and export to use in other applications. I assembled the score as a percentage of total reviews, such that we can tell restaurants:", "\u201cOf the people who left a review, 60% said they loved your food, but 30% said they hated it.\u201d", "Further distillation can be done to simplify the score, but I feel this provides a sufficient snap shot for restaurant owners to discern where they are relative to the baseline as time goes on.", "All this data was put in a streamlit front end wrapper that allows users to select a restaurant from a dropdown menu and see the scores for each restaurant below:", "This app was successfully uploaded to Heroku at the below link.", "This project was a fun exercise that combines my passion for food and restaurants in general with my budding data science skills. There were also some valuable lessons learned. I now know that LDA is not a model that I want to use in a limited time frame, and could possibly have better sped things up using TF-IDF and using a machine learning classifier. In this case, I used LDA because I wanted to stretch my capabilities and venture into unsupervised learning. I also enjoyed the easy interpretability of LDA that gave me greater control on fine tuning the model. In the end, I ended up using TF-IDF in combination with LDA in order to better bubble up service as my topic.", "Further expansion of this project will include review snapshots so that restaurant owners can get a sampling of specific events they may want to address, in addition, it may help them better understand the data. In addition, I\u2019d like to compile an overall report card by borough to determine if each borough has specific deficiencies. Lastly, I\u2019d like to refine my data a little more and explore if overall rating is affected by these topics.", "All code for this is available in my Github.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Data Scientist, Financial Planner. Trying to educate and make information accessible to EVERYONE. Let\u2019s Connect! shorturl.at/aBGY5"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Ffdc11c20362a&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdoing-yelp-better-fdc11c20362a&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdoing-yelp-better-fdc11c20362a&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdoing-yelp-better-fdc11c20362a&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdoing-yelp-better-fdc11c20362a&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----fdc11c20362a--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----fdc11c20362a--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://hammychang.medium.com/?source=post_page-----fdc11c20362a--------------------------------", "anchor_text": ""}, {"url": "https://hammychang.medium.com/?source=post_page-----fdc11c20362a--------------------------------", "anchor_text": "Hamilton Chang"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F4ab754b22f04&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdoing-yelp-better-fdc11c20362a&user=Hamilton+Chang&userId=4ab754b22f04&source=post_page-4ab754b22f04----fdc11c20362a---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ffdc11c20362a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdoing-yelp-better-fdc11c20362a&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ffdc11c20362a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdoing-yelp-better-fdc11c20362a&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://desolate-ocean-14363.herokuapp.com/", "anchor_text": "click here"}, {"url": "https://towardsdatascience.com/mo-data-mo-money-a1272f653046", "anchor_text": "here"}, {"url": "https://desolate-ocean-14363.herokuapp.com/", "anchor_text": "https://desolate-ocean-14363.herokuapp.com/"}, {"url": "https://github.com/hamiltonchangcodes/yelp_report_cards", "anchor_text": "Github"}, {"url": "http://www.linkedin.com/in/hamilton-chang", "anchor_text": "www.linkedin.com/in/hamilton-chang"}, {"url": "https://medium.com/tag/data-science?source=post_page-----fdc11c20362a---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/yelp?source=post_page-----fdc11c20362a---------------yelp-----------------", "anchor_text": "Yelp"}, {"url": "https://medium.com/tag/yelp-review?source=post_page-----fdc11c20362a---------------yelp_review-----------------", "anchor_text": "Yelp Review"}, {"url": "https://medium.com/tag/nlp?source=post_page-----fdc11c20362a---------------nlp-----------------", "anchor_text": "NLP"}, {"url": "https://medium.com/tag/data-analytics?source=post_page-----fdc11c20362a---------------data_analytics-----------------", "anchor_text": "Data Analytics"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Ffdc11c20362a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdoing-yelp-better-fdc11c20362a&user=Hamilton+Chang&userId=4ab754b22f04&source=-----fdc11c20362a---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Ffdc11c20362a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdoing-yelp-better-fdc11c20362a&user=Hamilton+Chang&userId=4ab754b22f04&source=-----fdc11c20362a---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ffdc11c20362a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdoing-yelp-better-fdc11c20362a&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----fdc11c20362a--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Ffdc11c20362a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdoing-yelp-better-fdc11c20362a&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----fdc11c20362a---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----fdc11c20362a--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----fdc11c20362a--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----fdc11c20362a--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----fdc11c20362a--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----fdc11c20362a--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----fdc11c20362a--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----fdc11c20362a--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----fdc11c20362a--------------------------------", "anchor_text": ""}, {"url": "https://hammychang.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://hammychang.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Hamilton Chang"}, {"url": "https://hammychang.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "219 Followers"}, {"url": "http://shorturl.at/aBGY5", "anchor_text": "shorturl.at/aBGY5"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F4ab754b22f04&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdoing-yelp-better-fdc11c20362a&user=Hamilton+Chang&userId=4ab754b22f04&source=post_page-4ab754b22f04--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F2ed0d50247b6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdoing-yelp-better-fdc11c20362a&newsletterV3=4ab754b22f04&newsletterV3Id=2ed0d50247b6&user=Hamilton+Chang&userId=4ab754b22f04&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}