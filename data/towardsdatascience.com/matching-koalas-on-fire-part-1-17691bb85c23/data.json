{"url": "https://towardsdatascience.com/matching-koalas-on-fire-part-1-17691bb85c23", "time": 1683010332.330513, "path": "towardsdatascience.com/matching-koalas-on-fire-part-1-17691bb85c23/", "webpage": {"metadata": {"title": "Matching: Koalas On Fire \u2014 Part 1 | by Svitlana Midianko | Towards Data Science", "h1": "Matching: Koalas On Fire \u2014 Part 1", "description": "Koalas may soon be extinct, due to recent forest fires. But how much do these natural disasters really impact this cute species\u2019 livelihood? Well, we can use data to quantify the effect of living in\u2026"}, "outgoing_paragraph_urls": [{"url": "https://edition.cnn.com/2020/03/05/australia/koala-status-new-south-wales-trnd/index.html", "anchor_text": "soon be extinct", "paragraph_index": 1}, {"url": "https://www.answers.com/Q/Do_koalas_and_pandas_eat_the_same_food", "anchor_text": "not bamboo \u2014 that\u2019s pandas!", "paragraph_index": 5}, {"url": "https://medium.com/@debruynmagali/matching-koalas-on-fire-part-2-71083b81b50b", "anchor_text": "Part 2", "paragraph_index": 19}, {"url": "https://stats.stackexchange.com/questions/129885/why-does-increasing-the-sample-size-lower-the-sampling-variance", "anchor_text": "reduce variability", "paragraph_index": 22}, {"url": "https://medium.com/@debruynmagali/matching-koalas-on-fire-part-2-71083b81b50b", "anchor_text": "here", "paragraph_index": 23}, {"url": "https://ascpt.onlinelibrary.wiley.com/doi/pdf/10.1111/cts.12178", "anchor_text": "here", "paragraph_index": 24}, {"url": "https://medium.com/@viniciusmss", "anchor_text": "Vinicius Miranda", "paragraph_index": 25}], "all_paragraphs": ["TL;DR: Matching is a computational tool used to improve the robustness, or trustworthiness, of causal inference. To do so, it pairs up data points from the treatment group with data points from the control group \u2014 based on their similarity on chosen characteristics. So what? Matching makes it more likely that the uncovered cause-effect relationship in observational studies reflects reality and consequently might lead to better informed decision making and policies.", "Koalas may soon be extinct, due to recent forest fires. But how much do these natural disasters really impact this cute species\u2019 livelihood?", "Well, we can use data to quantify the effect of living in an area with fires on koalas\u2019 lifespan. Framing it as a problem of causal inference, we are interested in inferring the treatment effect of an intervention \u2014 the fires \u2014 on an outcome we care about \u2014 the livelihood of koalas.", "Of course, a randomized control trial (RCT) and accompanying experimental data would be ideal to understand such a causal relationship. However, we don\u2019t want to start any more forest fires just for experimental purposes.", "So, we\u2019re left with (hypothetical) observational data.", "Unfortunately, observational data comes with many limitations that can affect the measured treatment effect. For example, koalas who eat less eucalyptus (not bamboo \u2014 that\u2019s pandas!) might be more likely to die earlier and also live in a \u201cfiery\u201d forest. This is a case of selection bias: our units (the koalas) with certain characteristics (covariates) have a higher likelihood to be \u201cassigned\u201d treatment: living in a forest fire.", "Lucky for us, we have some tools to correct for this. Introducing (*drumroll, please*): matching!", "Matching is exactly what it sounds like. We \u201cmatch\u201d our treated units with control units that have the same background characteristics. This \u201cprocessing\u201d of the data allows us to draw more reliable causal inference.", "When we want to understand the effect of a cause on an outcome, we usually have a control and a treatment group \u2014 in our case: koalas from safe and fiery forests. We assume that the groups are the same except for their treatment. Subtracting the mean of the outcome variable of the control group from the same mean of the treatment group will therefore hint at the potential treatment effect. When we compare the longevity (the outcome) of the \u201cfiery\u201d koalas with the \u201csafe\u201d koalas and assume that other than that they are completely the same sample populations (either that (1) they are completely the same along background characteristics or (2) they are sampled from the same population), we can presume that the difference in longevity is caused by living in forest affected by the fires (the treatment). But this perfect balance of the covariates is too good to be true in most observational studies. More often than not, the treatment and control groups do not share exactly the same characteristics. For example, we might select koalas from two different regions and who hence have different diets. Such confounding variables impact our measured treatment effect, limiting the robustness of our conclusions.", "Matching therefore tries to create a control group that closely resembles the treated group on the selected characteristics. In our case, we are trying to have a \u201csafe\u201d koala sample population that eats about the same amount of eucalyptus per year as the \u201cfiery\u201d koala sample population.", "How do we know that the groups are similar on the selected characteristic? Right now, the most accepted practice is to measure balance based on a distance metric. This is done through a statistical significance test comparing the mean values of the background characteristic of the control group and the treated group: the mean amount of food eaten by \u201csafe\u201d koalas versus the mean amount of food eaten by \u201cfiery\u201d koalas. The output is a p-value: the higher the p-value, the greater the similarity in the means of the two groups. And matching optimizes exactly for that! It selects the pairs of \u201cfiery\u201d and \u201csafe\u201d koalas that result in the highest possible p-value.", "Data pre-processing through matching methods is increasingly popular and useful, especially when measuring the impact of social policy. Here are some recent examples:", "Cool, so we want to match. But\u2026", "Which \u201csafe\u201d koalas do we use as matches for the treated koalas? Usually, we choose the control units that most closely resemble the treated units on the selected important characteristics. For our koala case (and the sake of simplicity), we are just considering one covariate to match on: the amount of eucalyptus eaten per year. We\u2019ll want to make sure to match the treated and control units on their food consumption prior to the fires (for example in 2018). Otherwise, their respective covariate values might be affected by the treatment (the fires in 2019) and introduce biases.", "How do we go about deciding which control unit is most like the treated unit? We simply pair the \u201csafe\u201d koala who eats the same or closest amount of food (in kilograms) with the \u201cfiery\u201d koala.", "If we have two control koalas whose food consumption is the same or equidistant to that of the \u201cfiery\u201d koala we are matching for, the parameter \u201cmatching with ties\u201d allows us to use both and get an average of the two (same goes for three, four, etc.).", "But what if we do not have any control units (\u201csafe\u201d koalas) who eat about the same as the treated unit (\u201cfiery\u201d koala)? We have to use this bad match or we can altogether exclude the treated unit (the \u201cfiery\u201d koala with no \u201csafe\u201d koala with the same appetite) from our final dataset.", "Or \u2014 we can use multiple matching. Multiple matching involves pairing the treated unit with multiple control units. In practice, we decide on a number (M) of \u201csafe\u201d koalas we want to use as a composite match for our \u201cfiery\u201d koala. If we decide on two matches per \u201cfiery\u201d koala (M = 2), then the food consumption of the two \u201csafe\u201d koalas who most closely resemble that of the \u201cfiery\u201d koala are averaged (assigned a 0.5 weight).", "(1) we may achieve better balance.How? Well, if we don\u2019t have an exact match in the control group for the treated unit, then our composite match from multiple matching can actually approximate the treated value better than the closest one match. Let\u2019s say we want to match for a koala who eats 200 kg per year and are considering two potential koalas who eat 179 and 220 kg. One-to-one matching (M=1) would match the \u201csafe\u201d koala with the \u201cfiery\u201d koala who eats 220 kg (as this is the closest to 200 kg). Now let\u2019s consider multiple-to-one matching, specifically two-to-one (M=2): the composite match would \u201ceat\u201d an average of 179 and 220 kg \u2014 returning a much closer match (on the food consumption covariate) of 199.5 kg. We could get better matches like this not just for this one average-eating koala but for many other \u201csafe\u201d koalas, greatly improving the balance between the treated and post-matching control group.", "Cool, right?! We explore more examples in Part 2.", "But it gets even better; not only can we have better balance thanks to multiple-to-one matching but also\u2026", "(2) we use more data.Often we have more control units than treated units in our dataset. Indeed, as of now, despite the increasing number of fires, there\u2019s thankfully still more koalas whose homes are not burning. Thus, we (potentially) have many more \u201csafe\u201d koalas than \u201cfiery\u201d koalas in our dataset. And that\u2019s great! (Not just for the koalas and species preservation.)", "Usually, the more data we use, the better.\u00b9 The law of large numbers ensures that the more units we incorporate \u2014 the bigger the sample size, the more likely it is that our results are not due to randomness or idiosyncrasies of the data (variance). Multiple matching, by using multiple (two, three, four, \u2026, depending on what you set M too) units from the control group for each treated unit, maximizes the use of the sample dataset and can reduce variability.", "Ready to see how? In the next part, we will further explore multiple matching. Check out Part 2 here! We try to understand when and how multiple matching might be better. We will seek to uncover an optimal matching ratio.", "\u00b9 However, when our datasets get very big (i.e. we\u2019re dealing with \u201cbig data\u201d), this generalization does not hold well. See here for more info, for example.", "Thank you to Vinicius Miranda for working through our thoughts with us and sharing his nuanced knowledge on causal inference and matching, notably, on the topic of common support. We also extend gratitude to Alexis Diamond for encouraging and guiding us on the structure of our analysis of multiple-to-one matching versus one-to-one matching.", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F17691bb85c23&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmatching-koalas-on-fire-part-1-17691bb85c23&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmatching-koalas-on-fire-part-1-17691bb85c23&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmatching-koalas-on-fire-part-1-17691bb85c23&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmatching-koalas-on-fire-part-1-17691bb85c23&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----17691bb85c23--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----17691bb85c23--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@svitlana_78975?source=post_page-----17691bb85c23--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@svitlana_78975?source=post_page-----17691bb85c23--------------------------------", "anchor_text": "Svitlana Midianko"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F4f904fbe39bd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmatching-koalas-on-fire-part-1-17691bb85c23&user=Svitlana+Midianko&userId=4f904fbe39bd&source=post_page-4f904fbe39bd----17691bb85c23---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F17691bb85c23&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmatching-koalas-on-fire-part-1-17691bb85c23&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F17691bb85c23&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmatching-koalas-on-fire-part-1-17691bb85c23&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://medium.com/u/cbf0012f471c?source=post_page-----17691bb85c23--------------------------------", "anchor_text": "Magali de Bruyn"}, {"url": "https://unsplash.com/@jwwhitt", "anchor_text": "Jordan Whitt"}, {"url": "https://unsplash.com/photos/EerxztHCjM8", "anchor_text": "Unsplash"}, {"url": "https://edition.cnn.com/2020/03/05/australia/koala-status-new-south-wales-trnd/index.html", "anchor_text": "soon be extinct"}, {"url": "https://www.answers.com/Q/Do_koalas_and_pandas_eat_the_same_food", "anchor_text": "not bamboo \u2014 that\u2019s pandas!"}, {"url": "https://www.cambridge.org/core/journals/american-political-science-review/article/international-peacebuilding-a-theoretical-and-quantitative-analysis/2E28FC5F7DD0F30B097D83553312C023", "anchor_text": "Effect of the UN peacebuilding operations on peacekeeping success;"}, {"url": "https://siteresources.worldbank.org/EXTHDOFFICE/Resources/5485726-1295455628620/Impact_Evaluation_in_Practice.pdf", "anchor_text": "Effects of Argentinean workfare program \u2018A Trabajar\u2019 on income;"}, {"url": "https://siteresources.worldbank.org/EXTHDOFFICE/Resources/5485726-1295455628620/Impact_Evaluation_in_Practice.pdf", "anchor_text": "Effect of piper water and child health in India."}, {"url": "https://medium.com/@debruynmagali/matching-koalas-on-fire-part-2-71083b81b50b", "anchor_text": "Part 2"}, {"url": "https://stats.stackexchange.com/questions/129885/why-does-increasing-the-sample-size-lower-the-sampling-variance", "anchor_text": "reduce variability"}, {"url": "https://medium.com/@debruynmagali/matching-koalas-on-fire-part-2-71083b81b50b", "anchor_text": "here"}, {"url": "https://ascpt.onlinelibrary.wiley.com/doi/pdf/10.1111/cts.12178", "anchor_text": "here"}, {"url": "https://medium.com/@viniciusmss", "anchor_text": "Vinicius Miranda"}, {"url": "https://medium.com/tag/data-science?source=post_page-----17691bb85c23---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/causality?source=post_page-----17691bb85c23---------------causality-----------------", "anchor_text": "Causality"}, {"url": "https://medium.com/tag/statistics?source=post_page-----17691bb85c23---------------statistics-----------------", "anchor_text": "Statistics"}, {"url": "https://medium.com/tag/observational-studies?source=post_page-----17691bb85c23---------------observational_studies-----------------", "anchor_text": "Observational Studies"}, {"url": "https://medium.com/tag/tds-narrated?source=post_page-----17691bb85c23---------------tds_narrated-----------------", "anchor_text": "Tds Narrated"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F17691bb85c23&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmatching-koalas-on-fire-part-1-17691bb85c23&user=Svitlana+Midianko&userId=4f904fbe39bd&source=-----17691bb85c23---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F17691bb85c23&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmatching-koalas-on-fire-part-1-17691bb85c23&user=Svitlana+Midianko&userId=4f904fbe39bd&source=-----17691bb85c23---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F17691bb85c23&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmatching-koalas-on-fire-part-1-17691bb85c23&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----17691bb85c23--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F17691bb85c23&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmatching-koalas-on-fire-part-1-17691bb85c23&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----17691bb85c23---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----17691bb85c23--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----17691bb85c23--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----17691bb85c23--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----17691bb85c23--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----17691bb85c23--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----17691bb85c23--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----17691bb85c23--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----17691bb85c23--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@svitlana_78975?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@svitlana_78975?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Svitlana Midianko"}, {"url": "https://medium.com/@svitlana_78975/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "23 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F4f904fbe39bd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmatching-koalas-on-fire-part-1-17691bb85c23&user=Svitlana+Midianko&userId=4f904fbe39bd&source=post_page-4f904fbe39bd--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fusers%2F4f904fbe39bd%2Flazily-enable-writer-subscription&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmatching-koalas-on-fire-part-1-17691bb85c23&user=Svitlana+Midianko&userId=4f904fbe39bd&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}