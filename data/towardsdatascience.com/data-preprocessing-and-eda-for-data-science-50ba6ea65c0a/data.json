{"url": "https://towardsdatascience.com/data-preprocessing-and-eda-for-data-science-50ba6ea65c0a", "time": 1683002239.9829519, "path": "towardsdatascience.com/data-preprocessing-and-eda-for-data-science-50ba6ea65c0a/", "webpage": {"metadata": {"title": "Data Preprocessing & Exploratory Data Analysis (EDA) for Data Science: Tackling the Taarifa Challenge | by Antonio Stark | Towards Data Science", "h1": "Data Preprocessing & Exploratory Data Analysis (EDA) for Data Science: Tackling the Taarifa Challenge", "description": "How can we use different data preprocessing and exploratory data analysis (EDA) techniques to prepare data for predictive modeling?"}, "outgoing_paragraph_urls": [{"url": "https://github.com/AntonioStark/Taarifa-Water-Pumps", "anchor_text": "this GitHub link", "paragraph_index": 2}, {"url": "http://www.drivendata.org", "anchor_text": "Drivendata.org", "paragraph_index": 3}, {"url": "https://www.drivendata.org/competitions/7/pump-it-up-data-mining-the-water-table", "anchor_text": "Pump it Up: Data Mining the Water Table", "paragraph_index": 4}, {"url": "http://taarifa.org/", "anchor_text": "Taarifa", "paragraph_index": 5}, {"url": "https://github.com/taarifa/TaarifaAPI", "anchor_text": "GitHub", "paragraph_index": 5}, {"url": "https://medium.com/@antoniostark/a4d2c428a2eb?", "anchor_text": "that article here", "paragraph_index": 41}], "all_paragraphs": ["Data preprocessing and exploratory data analysis (EDA) are essential tasks for any data science projects. In this article, we\u2019re going to look at a sample dataset and challenge and apply a few data preprocessing and EDA techniques.", "Do note that data preprocessing and EDA are distinct terms, but have many overlapping subtasks and are usually used interchangeably.", "The dataset and original code can be accessed through this GitHub link.", "The challenge I\u2019ll use for this article is taken from Drivendata.org. You can think of it as a Kaggle for social impact challenges. You still get the same perks for winning and pretty well-formatted datasets, with the additional benefit that you\u2019ll be making a positive impact on the world!", "The particular challenge that we\u2019re using for this article is called \u201cPump it Up: Data Mining the Water Table.\u201d The challenge is to create a model that will predict the condition of a particular water pump (\u201cwaterpoint\u201d) given its many attributes.", "The data is provided by Taarifa, an open-source API that gathers this data and presents it to the world. If you\u2019re curious about their work and what their datapoints represent, make sure to check out their website (and GitHub!)", "The datasets describe over 74,000 data points, which represent a waterpoint in the Taarifa data catalog. 59,400 data points (80% of the entire dataset) are in the training group, while 14,850 data points (20%) are in the testing group.", "The training data points have 40 features, one feature being the label for its current functionality. All data points have one feature that is the ID of the water point.", "There are three datasets, two for the training group and one for the testing group.", "The training dataset comes with three labels: \u2018functional,\u2019 \u2018functional-needs-repair,\u2019\u2019, and \u2018non-functional.\u2019 The label indicates the condition of that water point. Our job is to predict the condition of the water points in the testing dataset.", "As you can see above, the \u2018functional\u2019 takes up 54.3% of the training dataset, \u2018functional-needs-repair\u2019 7.3%, and \u2018non-functional\u2019 38.4%. The output seems to be slightly imbalanced, but we\u2019re not sure (yet) if this imbalance will be significant. We\u2019ll come back to this in the modeling section.", "To efficiently preprocess data, and to apply the preprocessing measures to all data points, we combine the training and testing datasets.", "Now that we have a combined dataset, we can do some EDA magic on it.", "One of the first tasks in any dataset is to find if there are missing values. As this dataset has more features than we\u2019d like, we\u2019re going to drop features that have too many missing values. Let\u2019s see how many missing values each feature has.", "There seem to be quite a few features with missing data points! Let\u2019s see what percentage they take up in the whole dataset.", "It seems like the features that have any missing values have a significant number of missing values. For \u2018scheme_name\u2019, it\u2019s missing almost half of the data! Hence, it is safe to eliminate entire features if they contain any missing values. We can note this by marking how=\u2018any\u2019 in the dropna function.", "A dirty way to identify categorical features is to check if its values are non-numerical. But there are some features whose categories are numerical values. This would mean that the magnitude of the numerical value has no innate meaning, i.e. the feature is categorical rather than ordinal (i.e. has an order).", "A lot of times, we can\u2019t be sure whether or not a numerical feature is ordinal or categorical. We\u2019d have to ask the people who actually assigned the number to the datapoint to see if they have innate meaning.", "But by looking at how many \u201cunique\u201d numbers come up per feature, we can guess whether or not a numerical feature may be categorical.", "Here, we can see that there are five features that have an abnormally low number of unique values. That is indicative that those numerical values actually stand for categorical values.", "Looking at the dataset documentation, we find that three of the five features: \u2018num_private\u2019, \u2018region_code\u2019, \u2018district_code\u2019 are geographic codes whose numerical values aren\u2019t relevant for our challenge. Let\u2019s convert these into strings so that we can play with them in the next sections.", "Categorical features with too many categories are usually not useful for predictive models. Let\u2019s find how many categories each categorical features have.", "We have a few features whose number of categories do not justify them to be a \u201ccategorical\u201d variable. Given that we have over 74,000 data points, a feature that has more than 740 categories will have less than 100 data points per category on average. Let\u2019s find which features have more than 740 unique categories.", "There are only two features that have more than 740 categories: \u2018wpt_name\u2019 and \u2018ward.\u2019 We can simply drop them with the Pandas drop function.", "We still have a lot of features left. We want to cut down on categorical features as they will blow up the number of features once we apply one-hot encoding.", "Another type of categorical features that are usually useless are features with categories that show up too infrequently. Let\u2019s find such features.", "In the above section, we removed features whose \u201caverage\u201d data points per category are less than 100 data points. Here, we\u2019ll remove features whose \u201cminimum\u201d data points per category are less than 100.", "There are 10 features whose minimum data points per category was less than 100. Let\u2019s quickly check back to see which nonnumerical features have remained, and how many categories each have:", "Okay let\u2019s quickly check which features we have left:", "To be honest, we can\u2019t quite be sure which features will be \u201cirrelevant\u201d when we haven\u2019t run any models (and seen their results) yet. This is especially true when combination of features, not individual features, may be the key to finding the right categorization scheme.", "Let\u2019s see if there are \u201ccompletely uncorrelated\u201d features that, when deleted, might not affect the other features. This still doesn\u2019t guarantee that the feature is useless when combined with other features, but could direct us to a few hopefuls.", "As in, let\u2019s draw some correlation heatmaps!", "Note that we can draw correlation heatmaps only to numerical features for now. There is a way to draw correlation heatmaps for categorical variables but it\u2019s a lot dirtier.", "There seem to be a few features that may hold no value in relation to other features. Let\u2019s sort the features to find out which ones.", "So the features \u2018amount_tsh\u2019 and \u2018id\u2019 seems to be relatively uncorrelated with the other features, and may be safely disregarded. To note, \u2018amount_tsh\u2019 is the \u2018amount of water available to waterpoint\u2019 and \u2018id\u2019 is, you know, the ID of the waterpoint. Neither seems particularly valuable so let\u2019s get rid of them.", "Looking at the number of categories, we also see that the feature \u2018recorded_by\u2019 is a categorical feature with only ONE category. That\u2019s bound to be useless, so we can get rid of that too.", "Also recognize that the feature \u2018train\u2019 is there for us to just keep track of dataset groupings, so we don\u2019t have to care about that.", "Now that we think all the features left are \u201cvaluable\u201d ones, we can go ahead and one-hot encode it! Remember this will blow up the total number of features of the dataset.", "After one-hot encoding, we see that our number of features has increased from 20 to 114.", "One last thing to do is to provide ordinality to the \u2018status_group\u2019 feature. While this is a categorical feature, it has ordinance. I.e., there\u2019s a ordinal relationship of functional > functional needs repair > non functional. A quick and dirty way to do this is by substituting the string values with numerical values.", "Pandas does support an in-house ordering feature for Category type series, but it does get a bit hairy, so we\u2019ll not do that here. But to be strict, using the ordinance method given by Pandas is more accurate, especially when the \u201cdistance\u201d between the categories may not be equal. As in, by giving the numbers, we\u2019re saying that the magnitude of difference between \u2018functional\u2019 and \u2018functional needs repair\u2019 is the same as that of \u2018functional needs repair\u2019 and \u2018non functional\u2019.", "That\u2019s it! Now we have a beautifully formatted dataset that we can now put into some models to churn out some predictions. If you were only curious about data preprocessing and EDA, you can end it here. If you want to look at how this cleaned dataset can be used for predictive modeling and multiclass classification, you can check out that article here.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Data scientist, business consultant, space policy advisor"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F50ba6ea65c0a&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdata-preprocessing-and-eda-for-data-science-50ba6ea65c0a&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdata-preprocessing-and-eda-for-data-science-50ba6ea65c0a&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdata-preprocessing-and-eda-for-data-science-50ba6ea65c0a&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdata-preprocessing-and-eda-for-data-science-50ba6ea65c0a&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----50ba6ea65c0a--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----50ba6ea65c0a--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@antoniostark?source=post_page-----50ba6ea65c0a--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@antoniostark?source=post_page-----50ba6ea65c0a--------------------------------", "anchor_text": "Antonio Stark"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fe3638f6f8ccf&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdata-preprocessing-and-eda-for-data-science-50ba6ea65c0a&user=Antonio+Stark&userId=e3638f6f8ccf&source=post_page-e3638f6f8ccf----50ba6ea65c0a---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F50ba6ea65c0a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdata-preprocessing-and-eda-for-data-science-50ba6ea65c0a&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F50ba6ea65c0a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdata-preprocessing-and-eda-for-data-science-50ba6ea65c0a&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://github.com/AntonioStark/Taarifa-Water-Pumps", "anchor_text": "this GitHub link"}, {"url": "http://www.drivendata.org", "anchor_text": "Drivendata.org"}, {"url": "https://www.drivendata.org/competitions/7/pump-it-up-data-mining-the-water-table", "anchor_text": "Pump it Up: Data Mining the Water Table"}, {"url": "http://taarifa.org/", "anchor_text": "Taarifa"}, {"url": "http://taarifa.org/", "anchor_text": "Taarifa"}, {"url": "https://github.com/taarifa/TaarifaAPI", "anchor_text": "GitHub"}, {"url": "https://medium.com/@antoniostark/a4d2c428a2eb?", "anchor_text": "that article here"}, {"url": "https://medium.com/tag/data-science?source=post_page-----50ba6ea65c0a---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/data-preprocessing?source=post_page-----50ba6ea65c0a---------------data_preprocessing-----------------", "anchor_text": "Data Preprocessing"}, {"url": "https://medium.com/tag/eda?source=post_page-----50ba6ea65c0a---------------eda-----------------", "anchor_text": "Eda"}, {"url": "https://medium.com/tag/data-analysis?source=post_page-----50ba6ea65c0a---------------data_analysis-----------------", "anchor_text": "Data Analysis"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F50ba6ea65c0a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdata-preprocessing-and-eda-for-data-science-50ba6ea65c0a&user=Antonio+Stark&userId=e3638f6f8ccf&source=-----50ba6ea65c0a---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F50ba6ea65c0a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdata-preprocessing-and-eda-for-data-science-50ba6ea65c0a&user=Antonio+Stark&userId=e3638f6f8ccf&source=-----50ba6ea65c0a---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F50ba6ea65c0a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdata-preprocessing-and-eda-for-data-science-50ba6ea65c0a&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----50ba6ea65c0a--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F50ba6ea65c0a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdata-preprocessing-and-eda-for-data-science-50ba6ea65c0a&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----50ba6ea65c0a---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----50ba6ea65c0a--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----50ba6ea65c0a--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----50ba6ea65c0a--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----50ba6ea65c0a--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----50ba6ea65c0a--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----50ba6ea65c0a--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----50ba6ea65c0a--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----50ba6ea65c0a--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@antoniostark?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@antoniostark?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Antonio Stark"}, {"url": "https://medium.com/@antoniostark/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "28 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fe3638f6f8ccf&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdata-preprocessing-and-eda-for-data-science-50ba6ea65c0a&user=Antonio+Stark&userId=e3638f6f8ccf&source=post_page-e3638f6f8ccf--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Ff39081d987c2&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdata-preprocessing-and-eda-for-data-science-50ba6ea65c0a&newsletterV3=e3638f6f8ccf&newsletterV3Id=f39081d987c2&user=Antonio+Stark&userId=e3638f6f8ccf&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}