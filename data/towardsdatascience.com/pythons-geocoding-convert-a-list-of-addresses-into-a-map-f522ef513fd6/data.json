{"url": "https://towardsdatascience.com/pythons-geocoding-convert-a-list-of-addresses-into-a-map-f522ef513fd6", "time": 1683011005.001348, "path": "towardsdatascience.com/pythons-geocoding-convert-a-list-of-addresses-into-a-map-f522ef513fd6/", "webpage": {"metadata": {"title": "Python\u2019s geocoding \u2014 Convert a list of addresses into a map | by Vaclav Dekanovsky | Towards Data Science", "h1": "Python\u2019s geocoding \u2014 Convert a list of addresses into a map", "description": "Every one of us has a database of clients with addresses, a list of factories or stores, regions we sell our products to or cooperate with. Displaying these data on a map is a must in the modern\u2026"}, "outgoing_paragraph_urls": [{"url": "https://github.com/vaclavdekanovsky/data-analysis-in-examples/blob/master/Maps/Geocoding/Address%20to%20Location.ipynb", "anchor_text": "Address to Location.ipynb", "paragraph_index": 2}, {"url": "https://developers.google.com/maps/documentation/geocoding/get-api-key", "anchor_text": "guideline", "paragraph_index": 6}, {"url": "https://geopy.readthedocs.io/en/stable/", "anchor_text": "GeoPy", "paragraph_index": 9}, {"url": "https://nominatim.openstreetmap.org/", "anchor_text": "Nominatim", "paragraph_index": 10}, {"url": "https://www.openstreetmap.org/#map=7/49.817/15.478", "anchor_text": "OpenStreetMap", "paragraph_index": 10}, {"url": "https://operations.osmfoundation.org/policies/nominatim/", "anchor_text": "usage policies", "paragraph_index": 10}, {"url": "https://en.wikipedia.org/wiki/Tuscany", "anchor_text": "Tuscany", "paragraph_index": 13}, {"url": "https://en.wikipedia.org/wiki/Apple_Park", "anchor_text": "headquarter of Apple", "paragraph_index": 15}], "all_paragraphs": ["Every one of us has a database of clients with addresses, a list of factories or stores, regions we sell our products to or cooperate with. Displaying these data on a map is a must in the modern dashboards. In order to do so, we have to transform the addresses (city names or regions) into geospatial data \u2014 latitudes and longitudes. Then we can present them on compelling maps.", "In this tutorial, we will explore how to:", "You can follow along with me using this jupyter notebook downloadable from Github - Address to Location.ipynb.", "To transform addresses into coordinates you can either buy a database of addresses with the geographical position or you have to query some geolocation service provider. Anyone who offers maps usually provides a geolocation API (often for a price). Let\u2019s review some of the major providers:", "This article review some of the major providers:", "Most APIs allow direct calls. You send your address to an URL and receive the geolocation. For years we use python requests library to do it. Let\u2019s explore requests to Google API.", "To connect to Google API you need an API key. You have to ask for it (guideline) and then keep secret, because you pay for the service. Google gives $200 free each month which is enough to do 40000 geocoding requests.", "Geocoding calls are usually quite simple:", "You prepare the data you want to search for. With the help of urllib you easily turn parameters into an URL and you call requests.get(). The response is either XML, but more often a json which you process by json.loads", "You can struggle with the documentation of mapping provider API to get the most of it, but it is easier to take advantage of an existing library like GeoPy. With Geopy you can do the same as above with only a few lines of code.", "Geopy provides a class for popular mapping services. Nominatim is the service behind the popular OpenStreetMap that allows you to geocode for free. But you should comply with the usage policies in order to allow everyone to use it:", "As a general rule, bulk geocoding of larger amounts of data is not encouraged. smaller one-time bulk tasks may be permissible, if these additional rules are followed", "Do you have a small project or just want to impress your boss? Let\u2019s geocode with Geopy.Nominatim. First, we initialize Nominatim into geolocator variable:", "Then you request information about a region, I\u2019ve picked Tuscany in Italy:", "From the response, you can get the latitude and the longitude", "Similarly, you can request geolocation from a full address, for example, the headquarter of Apple.", "Geopy allow geocode operation to turn an address into the coordinates and the opposite reverse to turn the locations into an address:", "You can use many map services with Geopy, only you will have to provide an API key or user credentials. For example, using Google Maps API:", "Requesting the geolocation uses the same code as above:", "Though the structure of the response JSON will reflect the service used. Lat and Lon in the Google response are stored in the \"geometry\".\"location\" . But Geopy did the work for you and you just read the .point attribute.", "Before you can display a dataset with addresses on a map you need to find the geolocations of these points. Let\u2019s have a look at this shortlist of addresses:", "We know that we can use GeoPy\u2019s geolocator.geocode but what is the most effective way of turning a pandas dataFrame to coordinates. I like the approach of Abdishakur describes in this article", "2. Apply geolocator.geocode to the address column", "3. Get .point containing latitude and longitude from the geocode\u2019s response, if it\u2019s not None.", "4. Split the .point into separate columns 'lat' 'lon' and 'altitude'", "Having 'lat' and 'loc' columns in the dataset is sufficient to display the points on any background map.", "The geographical coordinates are useless unless you display them on a map. Python offers several libraries to make this task easy enough as well.", "Folium maps are interactive, they contain markers with popups that can be clustered in areas with a high density of points, you can use layers and pick different source maps. And it\u2019s all pretty easy to code:", "Plotly is gaining more and more popularity. Since it has introduced the Plotly express interface, creating a chart is a single liner and that applies to map charts as well. Let\u2019s have a look at how to create a similar map with Plotly.", ".scatter_geo(df) creates the points on the map based on the data in the df dataFrame, like position or popups. We can set different size or color for each data point, but we didn\u2019t do that in df dataFrame, so we can specify the same for all using .update_traces() .", "You don\u2019t have to determine the ideal zoom like in folium, but you just set fitbounds to \u2018locations\u2019. You can also show countries, rivers, oceans, lakes and specify their color with .update_geos .", "Finally, let\u2019s add a title using .update_layout and display the final chart-map by fig.show() .", "Admiring the map in the notebook can be satisfying, but occasionally you want to share your work with people who don't have python installed. Luckily exporting the map into .html is only one line of code.", "Folium\u2019s .save method creates a file that gets all the necessary resources like jquery, bootstrap, leaflet from CDN and the file has only 8 KB.", "Plotly works with .write_html command which has a few optional parameters. The most important is include_plotlyjs . You can set if the output file will contain over 3 MB of plotly library which allows those beautiful chart effects or whether you want only your data points which can be included in another plotly project. In the second case, the size will be 9 KB.", "Displaying data on a map can be an effective way of how to present the company\u2019s data. Python\u2019s libraries help us to quickly gather the necessary geospatial data and use them to plot the maps. You can use open-source data or paid services to achieve this task.", "Do you search for more inspiration, try plotly and folium map galleries", "Did you like this tutorial, check my other articles dealing with various data-related topics:", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Data scientist who loves to explore everything and write about the topics from multiple points of view."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Ff522ef513fd6&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpythons-geocoding-convert-a-list-of-addresses-into-a-map-f522ef513fd6&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpythons-geocoding-convert-a-list-of-addresses-into-a-map-f522ef513fd6&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpythons-geocoding-convert-a-list-of-addresses-into-a-map-f522ef513fd6&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpythons-geocoding-convert-a-list-of-addresses-into-a-map-f522ef513fd6&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----f522ef513fd6--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----f522ef513fd6--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://vdekanovsky.medium.com/?source=post_page-----f522ef513fd6--------------------------------", "anchor_text": ""}, {"url": "https://vdekanovsky.medium.com/?source=post_page-----f522ef513fd6--------------------------------", "anchor_text": "Vaclav Dekanovsky"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fed473176733b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpythons-geocoding-convert-a-list-of-addresses-into-a-map-f522ef513fd6&user=Vaclav+Dekanovsky&userId=ed473176733b&source=post_page-ed473176733b----f522ef513fd6---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ff522ef513fd6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpythons-geocoding-convert-a-list-of-addresses-into-a-map-f522ef513fd6&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ff522ef513fd6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpythons-geocoding-convert-a-list-of-addresses-into-a-map-f522ef513fd6&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@dead____artist?utm_source=medium&utm_medium=referral", "anchor_text": "Capturing the human heart."}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://github.com/vaclavdekanovsky/data-analysis-in-examples/blob/master/Maps/Geocoding/Address%20to%20Location.ipynb", "anchor_text": "Address to Location.ipynb"}, {"url": "https://developers.google.com/maps/documentation", "anchor_text": "Google Maps Platform"}, {"url": "https://docs.mapbox.com/api/", "anchor_text": "Mapbox API"}, {"url": "https://docs.microsoft.com/en-us/bingmaps/rest-services/", "anchor_text": "Bing API"}, {"url": "https://nominatim.openstreetmap.org/", "anchor_text": "Nominatim, OpenStreetMap API"}, {"url": "https://tech.yandex.com/maps/", "anchor_text": "Yandex Map API"}, {"url": "https://medium.com/rakuten-rapidapi/top-10-map-apis-google-maps-bing-maps-mapbox-and-other-geolocation-apis-cb442fec07ed", "anchor_text": "Top 10 Map APIs: Google Maps, BING Maps, Mapbox and other geolocation APIsMaps have become an essential tracking tool that you can\u2019t do without. They\u2019re an integral part of any company\u2019s\u2026medium.com"}, {"url": "https://developers.google.com/maps/documentation/geocoding/get-api-key", "anchor_text": "guideline"}, {"url": "https://maps.googleapis.com/maps/api/geocode/json", "anchor_text": "https://maps.googleapis.com/maps/api/geocode/json"}, {"url": "https://geopy.readthedocs.io/en/stable/", "anchor_text": "GeoPy"}, {"url": "https://nominatim.openstreetmap.org/", "anchor_text": "Nominatim"}, {"url": "https://www.openstreetmap.org/#map=7/49.817/15.478", "anchor_text": "OpenStreetMap"}, {"url": "https://operations.osmfoundation.org/policies/nominatim/", "anchor_text": "usage policies"}, {"url": "https://en.wikipedia.org/wiki/Tuscany", "anchor_text": "Tuscany"}, {"url": "https://osm.org/copyright',", "anchor_text": "https://osm.org/copyright',"}, {"url": "https://en.wikipedia.org/wiki/Apple_Park", "anchor_text": "headquarter of Apple"}, {"url": "https://towardsdatascience.com/geocode-with-python-161ec1e62b89", "anchor_text": "Geocode with PythonHow to Convert physical addresses to Geographic locations \u2192 Latitude and Longitudetowardsdatascience.com"}, {"url": "https://python-visualization.github.io/folium/", "anchor_text": "folium"}, {"url": "https://leafletjs.com/", "anchor_text": "leaflet.js"}, {"url": "https://www.openstreetmap.org/", "anchor_text": "OpenStreetMap"}, {"url": "https://plotly.com/", "anchor_text": "plotly"}, {"url": "https://plotly.com/python/maps/", "anchor_text": "MapsPlotly's Python graphing library makes interactive, publication-quality maps online. Examples of how to make maps with\u2026plotly.com"}, {"url": "https://nbviewer.jupyter.org/github/python-visualization/folium/tree/master/examples/", "anchor_text": "Jupyter Notebook ViewerEdit descriptionnbviewer.jupyter.org"}, {"url": "https://towardsdatascience.com/complete-guide-to-pythons-cross-validation-with-examples-a9676b5cac12", "anchor_text": "Complete guide to python\u2019s cross-validation with examplesExamples and use cases of sklearn\u2019s cross-validation explaining KFold, shuffling, stratification and how it impacts\u2026towardsdatascience.com"}, {"url": "https://towardsdatascience.com/dealing-with-extra-white-spaces-while-reading-csv-in-pandas-67b0c2b71e6a", "anchor_text": "Dealing with extra white spaces while reading CSV in PandasWhy do we care about blank spaces? Build-in pandas functions, and custom handling. Creation of 1M test data and\u2026towardsdatascience.com"}, {"url": "https://medium.com/tag/python?source=post_page-----f522ef513fd6---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/maps?source=post_page-----f522ef513fd6---------------maps-----------------", "anchor_text": "Maps"}, {"url": "https://medium.com/tag/plotly?source=post_page-----f522ef513fd6---------------plotly-----------------", "anchor_text": "Plotly"}, {"url": "https://medium.com/tag/folium?source=post_page-----f522ef513fd6---------------folium-----------------", "anchor_text": "Folium"}, {"url": "https://medium.com/tag/data-analysis?source=post_page-----f522ef513fd6---------------data_analysis-----------------", "anchor_text": "Data Analysis"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Ff522ef513fd6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpythons-geocoding-convert-a-list-of-addresses-into-a-map-f522ef513fd6&user=Vaclav+Dekanovsky&userId=ed473176733b&source=-----f522ef513fd6---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Ff522ef513fd6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpythons-geocoding-convert-a-list-of-addresses-into-a-map-f522ef513fd6&user=Vaclav+Dekanovsky&userId=ed473176733b&source=-----f522ef513fd6---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ff522ef513fd6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpythons-geocoding-convert-a-list-of-addresses-into-a-map-f522ef513fd6&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----f522ef513fd6--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Ff522ef513fd6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpythons-geocoding-convert-a-list-of-addresses-into-a-map-f522ef513fd6&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----f522ef513fd6---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----f522ef513fd6--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----f522ef513fd6--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----f522ef513fd6--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----f522ef513fd6--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----f522ef513fd6--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----f522ef513fd6--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----f522ef513fd6--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----f522ef513fd6--------------------------------", "anchor_text": ""}, {"url": "https://vdekanovsky.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://vdekanovsky.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Vaclav Dekanovsky"}, {"url": "https://vdekanovsky.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "623 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fed473176733b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpythons-geocoding-convert-a-list-of-addresses-into-a-map-f522ef513fd6&user=Vaclav+Dekanovsky&userId=ed473176733b&source=post_page-ed473176733b--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F41f38caa0bb5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpythons-geocoding-convert-a-list-of-addresses-into-a-map-f522ef513fd6&newsletterV3=ed473176733b&newsletterV3Id=41f38caa0bb5&user=Vaclav+Dekanovsky&userId=ed473176733b&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}