{"url": "https://towardsdatascience.com/understanding-hierarchies-in-oracle-43f85561f3d9", "time": 1683007921.0433831, "path": "towardsdatascience.com/understanding-hierarchies-in-oracle-43f85561f3d9/", "webpage": {"metadata": {"title": "Understanding Hierarchies in Oracle | by Gaurav Goel | Towards Data Science", "h1": "Understanding Hierarchies in Oracle", "description": "In real life, there are many cases where a particular set of data is dependent on another data which itself is dependent on another one and so forth. Thus, the logical structuring of such kind of\u2026"}, "outgoing_paragraph_urls": [], "all_paragraphs": ["In real life, there are many cases where a particular set of data is dependent on another data which itself is dependent on another one and so forth. Thus, the logical structuring of such kind of data forms a tree structure. A relational database does not store data in a hierarchical way. So, it is usually difficult to navigate through such data in a relational database. Oracle provides a number of hierarchical querying features which enable us to deal with such data.", "Oracle\u2019s \u201cSTART WITH CONNECT BY\u201d clause, allows to traverse hierarchal data very effectively. To understand its working, let\u2019s take a sample table and sample data in it as follows:", "Now insert some sample values in it.", "The data hierarchy looks as follows:", "To traverse such kind of data, the SQL query in Oracle can be written as:", "START WITH: It specifies the root rows of the hierarchy i.e where to start the \u2018walk\u2019 from.", "CONNECT BY: It specifies the relationship between parent rows and child rows of the hierarchy.", "PRIOR: It\u2019s a unary operator and it is used to achieve the recursive condition i.e the actual walking.", "The results of the above query will be as follows:", "The execution takes place as follows:", "a.> START WITH conditions determines the point of start. In our case, we have specified the start condition as parent_entity is NULL. So, it will mark those rows where parent_entity is NULL.", "b.> The condition CONNECT BY PRIOR child_entity= parent_entity, will cause the child entity values to become parent till the whole branch is traversed. So, in our case, the value \u2018a\u2019 will become parent and it will search for its children. The first row returned will be:", "The children for a are ab,af,ax. It will now make ab as the parent and search for its children. So, the result set till this point will be:", "The children of \u2018ab\u2019 are abc and abd and abe. It will now search for the children of abc. Since", "\u2018abc\u2019 does not have any child, it will return it in the result set and will search for the children of abd. It also does not have any child, so it will return this also in the result set. The result set till this point is:", "It will now search for the children of \u2018abe\u2019. It has 2 children: abes and abet. It will now search for children of abes and then for abet. Both abes and abet don\u2019t have any children. So, the result set will now look as follows:", "It will now search for the children of af. It does not has any child, so it will be returned in the result set. Similarly, ax will be returned in the result set.", "This completes the traversal of the first row returned in step a. Now the same process will be repeated for the second row returned in step 1. The final result set will look as:", "A hierarchy can be traversed in 2 directions: either top-down or bottom-up. The condition in CONNECT BY clause and the placement of the operator \u2018PRIOR\u2019 determines the direction traversal.", "The query below traverses the rows in top-down direction.", "If we place the PRIOR to the right side of the condition, it will traverse the rows from bottom-up:", "The output of this query will be:", "This will try to find out the parents of the returned rows in START WITH condition. Since there are no parent records for the above rows, this is the result set returned. If you change the above query as follows:", "So, it is traversing data from bottom to top starting where child_entity=\u2019abet\u2019", "The same result can be achieved by changing the position of the columns child_entity and parent_entity while keeping PRIOR to the left hand side. So, the following query will also result in the above result-set:", "LEVEL is an Oracle pseudo column which shows the level or rank of the particular row in the hierarchical tree. It can be used only if CONNECT BY clause is present in the query. If we execute the below query:", "The results will be as follows:", "Using function LPAD and LEVEL, we can return a tree-like structure in the result set as follows:", "There might be business requirements to partially retrieve a hierarchical tree and to prune branches. Let us say, in our data, we don\u2019t need the branch starting with \u2018ab\u2019 and below.", "To achieve this, we will modify the query to:", "The result will be as follows:", "There may be a possibility if the hierarchal data contains a loop i.e if the current row has a child which is also its ancestor. E.g execute the below Insert statement on entities table:", "It adds a row in which \u2018abet\u2019 is the parent for \u2018a\u2019. However, \u2018a\u2019 is also the ancestor of \u2018abet\u2019. This will result in a loop. If you execute the below query:", "It adds a row in which \u2018abet\u2019 is the parent for \u2018a\u2019. However, \u2018a\u2019 is also the ancestor of \u2018abet\u2019. This will result in a loop. If you execute the below query:", "Then, the following error will pop up:", "To return rows from a query even if a CONNECT BY LOOP exists in the data, NOCYCLE parameter is used as follows:", "This will not return the error. If, we need to know at which row, the loop exists, we can use a pseudo column CONNECT_BY_ISCYCLE. It returns 1 if the current row has a child which is also its ancestor. Otherwise, it returns 0. So, if you run the below query:", "If you want to see the complete path from root node to the current node, SYS_CONNECT_BY_PATH can be used as follows:", "For each row, it shows the complete path from the top node to current node.", "Traversing a hierarchy often poses challenge while working on getting information from database. Using Oracle\u2019s built-in functions can come to rescue. Hoping this articles has shed some light on how to get this done. Happy Reading!", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Storyteller, learner, thinker and a Software Professional dealing with Science and Engineering of Data"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F43f85561f3d9&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Funderstanding-hierarchies-in-oracle-43f85561f3d9&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Funderstanding-hierarchies-in-oracle-43f85561f3d9&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Funderstanding-hierarchies-in-oracle-43f85561f3d9&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Funderstanding-hierarchies-in-oracle-43f85561f3d9&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----43f85561f3d9--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----43f85561f3d9--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://gauravkantgoel.medium.com/?source=post_page-----43f85561f3d9--------------------------------", "anchor_text": ""}, {"url": "https://gauravkantgoel.medium.com/?source=post_page-----43f85561f3d9--------------------------------", "anchor_text": "Gaurav Goel"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fd7b2d2242cc8&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Funderstanding-hierarchies-in-oracle-43f85561f3d9&user=Gaurav+Goel&userId=d7b2d2242cc8&source=post_page-d7b2d2242cc8----43f85561f3d9---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F43f85561f3d9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Funderstanding-hierarchies-in-oracle-43f85561f3d9&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F43f85561f3d9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Funderstanding-hierarchies-in-oracle-43f85561f3d9&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@edvardr?utm_source=medium&utm_medium=referral", "anchor_text": "Edvard Alexander R\u00f8lvaag"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://medium.com/tag/oracle-database?source=post_page-----43f85561f3d9---------------oracle_database-----------------", "anchor_text": "Oracle Database"}, {"url": "https://medium.com/tag/hierarchy?source=post_page-----43f85561f3d9---------------hierarchy-----------------", "anchor_text": "Hierarchy"}, {"url": "https://medium.com/tag/sql?source=post_page-----43f85561f3d9---------------sql-----------------", "anchor_text": "Sql"}, {"url": "https://medium.com/tag/query?source=post_page-----43f85561f3d9---------------query-----------------", "anchor_text": "Query"}, {"url": "https://medium.com/tag/database?source=post_page-----43f85561f3d9---------------database-----------------", "anchor_text": "Database"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F43f85561f3d9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Funderstanding-hierarchies-in-oracle-43f85561f3d9&user=Gaurav+Goel&userId=d7b2d2242cc8&source=-----43f85561f3d9---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F43f85561f3d9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Funderstanding-hierarchies-in-oracle-43f85561f3d9&user=Gaurav+Goel&userId=d7b2d2242cc8&source=-----43f85561f3d9---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F43f85561f3d9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Funderstanding-hierarchies-in-oracle-43f85561f3d9&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----43f85561f3d9--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F43f85561f3d9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Funderstanding-hierarchies-in-oracle-43f85561f3d9&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----43f85561f3d9---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----43f85561f3d9--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----43f85561f3d9--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----43f85561f3d9--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----43f85561f3d9--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----43f85561f3d9--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----43f85561f3d9--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----43f85561f3d9--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----43f85561f3d9--------------------------------", "anchor_text": ""}, {"url": "https://gauravkantgoel.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://gauravkantgoel.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Gaurav Goel"}, {"url": "https://gauravkantgoel.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "513 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fd7b2d2242cc8&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Funderstanding-hierarchies-in-oracle-43f85561f3d9&user=Gaurav+Goel&userId=d7b2d2242cc8&source=post_page-d7b2d2242cc8--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fa1fbc4bdb78f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Funderstanding-hierarchies-in-oracle-43f85561f3d9&newsletterV3=d7b2d2242cc8&newsletterV3Id=a1fbc4bdb78f&user=Gaurav+Goel&userId=d7b2d2242cc8&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}