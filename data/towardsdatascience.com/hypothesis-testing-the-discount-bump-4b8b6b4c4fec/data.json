{"url": "https://towardsdatascience.com/hypothesis-testing-the-discount-bump-4b8b6b4c4fec", "time": 1683003880.710146, "path": "towardsdatascience.com/hypothesis-testing-the-discount-bump-4b8b6b4c4fec/", "webpage": {"metadata": {"title": "Hypothesis-testing the discount bump | by JR Kreiger | Towards Data Science", "h1": "Hypothesis-testing the discount bump", "description": "I bet you know this feeling: an item you need is on sale, so you gleefully add it to your cart and start thinking, \u201cWhat else can I buy with all this money I just saved?\u201d A few clicks (or turns\u2026"}, "outgoing_paragraph_urls": [{"url": "https://docs.microsoft.com/en-us/dotnet/framework/data/adonet/sql/linq/downloading-sample-databases", "anchor_text": "the Northwind database", "paragraph_index": 2}, {"url": "https://en.wikipedia.org/wiki/Welch%27s_t-test", "anchor_text": "Welch\u2019s t-test", "paragraph_index": 3}, {"url": "https://rpsychologist.com/d3/cohend/", "anchor_text": "calculate a standardized effect size (Cohen\u2019s d )", "paragraph_index": 23}, {"url": "https://www.statsmodels.org/dev/generated/generated/statsmodels.stats.power.TTestIndPower.solve_power.html#statsmodels.stats.power.TTestIndPower.solve_power", "anchor_text": "a power analysis", "paragraph_index": 23}, {"url": "https://github.com/jrkreiger/evaluating-discount-strategy", "anchor_text": "in my GitHub repo", "paragraph_index": 27}, {"url": "https://rpsychologist.com/d3/NHST/", "anchor_text": "a really excellent visualization to help you understand how sample size, effect size, alpha, and power are connected", "paragraph_index": 27}], "all_paragraphs": ["I bet you know this feeling: an item you need is on sale, so you gleefully add it to your cart and start thinking, \u201cWhat else can I buy with all this money I just saved?\u201d A few clicks (or turns around the store) later, and you\u2019ve got a lot more in your cart than you came for.", "This is such a common phenomenon that some retailers openly exploit it. Amazon has those \u201cadd-on\u201d items that are cheaper (or only available) if you add them to an order of a certain size. I\u2019m pretty sure I\u2019ve heard Target ads that crack jokes about the experience of coming to the store for something essential and leaving with a cartful of things you didn\u2019t need but wanted once you saw what a great deal you were getting.", "For a project in my data science bootcamp, I was asked to form and test some hypotheses using a database containing product and sales data from a fictional-but-realistic dealer in fine food products. It\u2019s the Northwind database, and Microsoft created it as a sample for learning how to use some of their database products. While the data isn\u2019t really real, it\u2019s realistic, so most of the time it behaves the way you would expect real sales data to behave. It\u2019s also really, really clean, which is unusual in data science.", "In this post I\u2019ll walk you through a hypothesis test using Welch\u2019s t-test to determine whether customers spend more once they have been offered a discount (spoiler alert: they do!), and if so, how much more they spend.", "If the \u201cdiscount bump\u201d is such a widely known phenomenon, you may ask, why do I even need to test the hypothesis that it exists? Well, if you were a business, and your discounts weren\u2019t getting people to spend more, wouldn\u2019t you want to know? What if your customers were actually taking advantage of discounts as an opportunity to save money, not to spend the same amount or more on more products? For my project I defined a business case where the Northwind company\u2019s entire discount strategy is under examination; executives want to know what\u2019s working and how well it\u2019s working so they can make changes if necessary.", "Before going any further, I want to state my hypotheses explicitly.", "My null hypothesis is that the mean total dollar amount of orders with no discounted items is equal to the mean total dollar amount of orders where at least one item is discounted.", "My alternative hypothesis is that the mean total dollar amount of orders with no discounted items is less than the mean total dollar amount of orders where at least one item is discounted.", "Because I am trying to determine whether the mean of one distribution is greater than the mean of another, this will be a one-tailed test.", "Now let\u2019s get that data ready to roll.", "In the data I collected from the Northwind database, each observation represents a unique product in a customer\u2019s order. Each row of my table includes an identifier for the order, the identifier of the product, the quantity and unit price of that product, the percent discount applied (if any), the product\u2019s name, its category (e.g., \u201cBeverages\u201d), and a number representing the category. I added on a boolean column to record the presence or absence of a discount (for easy sorting later) and a column that calculates the product\u2019s unit price times quantity times discount (if any) to get the total price of that product in that order. Take a look:", "For my analysis, I need to group the observations by order number and then sort the orders into two groups: orders with one or more discounted items, and orders with no discounted items.", "This leaves me with two one-dimensional arrays (orders_discount and orders_no_discount) containing the total dollar values of orders with and without discounts, respectively. The purpose of my hypothesis test is to determine whether the means of these two arrays are significantly different.", "But before I do that, let\u2019s take a look at the distributions themselves.", "That\u2019s some mighty positive skew! It looks like most orders total under $5,000, but a few massive ones are giving both distributions long right tails. I worry that these huge orders may not be representative of most customers\u2019 behavior.", "Let\u2019s examine the distributions in greater detail to see what\u2019s going on.", "The kernel density estimation plots (right column) show me that both distributions do indeed have very long right tails. The box-and-whisker plots (left column) make it a little easier to see where these extreme values fall. I want to eliminate these mega-orders so I can focus my analysis on the buying behavior of the vast majority of customers.", "To trim the distributions, I am going to remove values that fall beyond the right whisker, which represents 1.5 times the interquartile range (distance between 25th and 75th percentiles) of each distribution. In the case of these distributions, this trimming amounts to 7\u20138% of the available values. That\u2019s a sacrifice I\u2019m willing to make.", "That\u2019s better. There are now far fewer (and less extreme) outliers, and while the distributions are still positively skewed, they are much more normal-looking than before.", "A quick Levene\u2019s test indicates that the variances of these two samples are not statistically different. That\u2019s good news for when I\u2019ll want to calculate the power of my statistical test later on, but a Welch\u2019s t-test would work either way.", "Unfortunately, there\u2019s not a handy Python package for performing a Welch\u2019s t-test, so I wrote my own and wrapped it in another that compares the t-statistic to my chosen alpha value and lets me know if I can reject (or fail to reject) the null hypothesis.", "This yielded a p-value of 0.00000355, which is well below my chosen alpha value of 0.05. I reject the null hypothesis! Assuming there are no lurking variables at play, I can feel confident that there is a statistically significant difference between the average total dollar amount of orders with discounts and those without.", "Now we know that orders containing discounted items tend to be larger than orders with no discounted items \u2014 but how different are they? To find out, let\u2019s take a look at effect size, or the difference between the average order with discounts and the average one without.", "I wrote myself some functions to calculate a raw effect size, use that to calculate a standardized effect size (Cohen\u2019s d ), and then pass that to a power analysis. Note that my function for Cohen\u2019s d accounts for the possibility that the two samples may have different lengths and variances, and my power analysis takes the average length of the two samples as the number of observations (\u201cnobs1\u201d). Here\u2019s the code:", "And here it is in action:", "The raw effect size of 286.68 means that the difference between the mean order total with discounts and the mean order total without discounts is $286.68. The power of 0.995 means I have only a 0.05% chance of committing a Type II error (a.k.a a false negative). I was hoping for a power of at least 0.8, so I\u2019m happy with this result. It is very likely that I have correctly detected a phenomenon that really exists \u2014 woohoo!", "If we wanted to know whether $286.68 is a big difference, we could run my cohen_d() function on the two samples, which gives a value of 0.33. In the world of Cohen\u2019s d values, we typically say that 0.2 is a small effect, 0.5 is a medium-sized effect, and 0.8 and up is a big effect, but this is all relative. If we run this test every year and always get a Cohen\u2019s d value around 0.2, then one year get 0.33, we might consider that a big effect in our particular circumstances.", "You can check out the rest of my project on the Northwind database in my GitHub repo. Because I found it both helpful and beautiful, here\u2019s a really excellent visualization to help you understand how sample size, effect size, alpha, and power are connected.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Data scientist with a background in archaeology, museums, and libraries. On Twitter @j_re."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F4b8b6b4c4fec&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhypothesis-testing-the-discount-bump-4b8b6b4c4fec&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhypothesis-testing-the-discount-bump-4b8b6b4c4fec&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhypothesis-testing-the-discount-bump-4b8b6b4c4fec&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhypothesis-testing-the-discount-bump-4b8b6b4c4fec&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----4b8b6b4c4fec--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----4b8b6b4c4fec--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@jrkreiger?source=post_page-----4b8b6b4c4fec--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@jrkreiger?source=post_page-----4b8b6b4c4fec--------------------------------", "anchor_text": "JR Kreiger"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F612d3a26f7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhypothesis-testing-the-discount-bump-4b8b6b4c4fec&user=JR+Kreiger&userId=612d3a26f7&source=post_page-612d3a26f7----4b8b6b4c4fec---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F4b8b6b4c4fec&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhypothesis-testing-the-discount-bump-4b8b6b4c4fec&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F4b8b6b4c4fec&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhypothesis-testing-the-discount-bump-4b8b6b4c4fec&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://docs.microsoft.com/en-us/dotnet/framework/data/adonet/sql/linq/downloading-sample-databases", "anchor_text": "the Northwind database"}, {"url": "https://en.wikipedia.org/wiki/Welch%27s_t-test", "anchor_text": "Welch\u2019s t-test"}, {"url": "https://rpsychologist.com/d3/cohend/", "anchor_text": "calculate a standardized effect size (Cohen\u2019s d )"}, {"url": "https://www.statsmodels.org/dev/generated/generated/statsmodels.stats.power.TTestIndPower.solve_power.html#statsmodels.stats.power.TTestIndPower.solve_power", "anchor_text": "a power analysis"}, {"url": "https://github.com/jrkreiger/evaluating-discount-strategy", "anchor_text": "in my GitHub repo"}, {"url": "https://rpsychologist.com/d3/NHST/", "anchor_text": "a really excellent visualization to help you understand how sample size, effect size, alpha, and power are connected"}, {"url": "http://jrkreiger.net", "anchor_text": "jrkreiger.net"}, {"url": "https://medium.com/tag/statistics?source=post_page-----4b8b6b4c4fec---------------statistics-----------------", "anchor_text": "Statistics"}, {"url": "https://medium.com/tag/data-science?source=post_page-----4b8b6b4c4fec---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/python?source=post_page-----4b8b6b4c4fec---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/hypothesis-testing?source=post_page-----4b8b6b4c4fec---------------hypothesis_testing-----------------", "anchor_text": "Hypothesis Testing"}, {"url": "https://medium.com/tag/sales?source=post_page-----4b8b6b4c4fec---------------sales-----------------", "anchor_text": "Sales"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F4b8b6b4c4fec&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhypothesis-testing-the-discount-bump-4b8b6b4c4fec&user=JR+Kreiger&userId=612d3a26f7&source=-----4b8b6b4c4fec---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F4b8b6b4c4fec&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhypothesis-testing-the-discount-bump-4b8b6b4c4fec&user=JR+Kreiger&userId=612d3a26f7&source=-----4b8b6b4c4fec---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F4b8b6b4c4fec&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhypothesis-testing-the-discount-bump-4b8b6b4c4fec&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----4b8b6b4c4fec--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F4b8b6b4c4fec&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhypothesis-testing-the-discount-bump-4b8b6b4c4fec&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----4b8b6b4c4fec---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----4b8b6b4c4fec--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----4b8b6b4c4fec--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----4b8b6b4c4fec--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----4b8b6b4c4fec--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----4b8b6b4c4fec--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----4b8b6b4c4fec--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----4b8b6b4c4fec--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----4b8b6b4c4fec--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@jrkreiger?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@jrkreiger?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "JR Kreiger"}, {"url": "https://medium.com/@jrkreiger/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "146 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F612d3a26f7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhypothesis-testing-the-discount-bump-4b8b6b4c4fec&user=JR+Kreiger&userId=612d3a26f7&source=post_page-612d3a26f7--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F1ffcf7fdc01f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhypothesis-testing-the-discount-bump-4b8b6b4c4fec&newsletterV3=612d3a26f7&newsletterV3Id=1ffcf7fdc01f&user=JR+Kreiger&userId=612d3a26f7&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}