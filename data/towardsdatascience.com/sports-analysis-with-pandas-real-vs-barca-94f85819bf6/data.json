{"url": "https://towardsdatascience.com/sports-analysis-with-pandas-real-vs-barca-94f85819bf6", "time": 1683005469.8100321, "path": "towardsdatascience.com/sports-analysis-with-pandas-real-vs-barca-94f85819bf6/", "webpage": {"metadata": {"title": "Sports analysis with Pandas. How to calculate odds for a soccer\u2026 | by Roman Orac | Towards Data Science", "h1": "Sports analysis with Pandas", "description": "Have you ever wondered how are odds calculated for soccer matches? What are those 2.2 vs 3.1 odds based on? I was expecting a complex procedure, but to my surprise, the probabilities and odds can be\u2026"}, "outgoing_paragraph_urls": [{"url": "https://stats.areppim.com/calc/calc_poisson.php", "anchor_text": "calculator", "paragraph_index": 24}, {"url": "https://github.com/romanorac/romanorac.github.io/blob/master/assets/notebooks/Sport%20analysis%20pandas.ipynb", "anchor_text": "Jupyter Notebook", "paragraph_index": 30}, {"url": "https://twitter.com/romanorac", "anchor_text": "Twitter", "paragraph_index": 31}, {"url": "https://twitter.com/romanorac/status/1328952374447267843", "anchor_text": "tweet", "paragraph_index": 31}], "all_paragraphs": ["Have you ever wondered how are odds calculated for soccer matches? What are those 2.2 vs 3.1 odds based on? I was expecting a complex procedure, but to my surprise, the probabilities and odds can be calculated without writing any code. I use pandas in the examples below because I am well versed with it, but you can do the same in Excel or even with a calculator.", "I write extensively about Data Analysis with pandas. Take a look at my pandas series:", "The probability of a certain number of goals is calculated with the Poisson Distribution, named after French mathematician Sim\u00e9on Denis Poisson.", "Poisson Distribution is a discrete probability distribution that expresses the probability of a given number of events occurring in a fixed time interval if these events occur with a known constant mean rate and independently of the time since the last event.", "Let\u2019s translate this to layman\u2019s terms. The discrete probability distribution gives probabilities between 0 and 1 for discrete events, like the number of goals in the example of soccer. A Soccer match has a fixed time interval (90 minutes of play) and goals occur with a known constant mean rate (we can calculate the expected number of goals). A goal is also independent of the previous goal.", "The image below is a probability mass function (PMF) for Poisson Distribution, which shows probabilities of events with 1, 5 and 10 expected number of occurrences. In simplified terms, a soccer team that scores 1 goal on average, there is a:", "Let\u2019s calculate the probabilities for a potential matchup between eternal rivals Barcelona and Real Madrid. The game would be played on Santiago Bernabeu, meaning that Real Madrid would be playing at home.", "Before we can use Poisson distribution to estimate the probabilities, we need to calculate the expected number of goals each team is likely to score in a match.", "The expected number of goals each team is likely to score calculated by determining the attack strength and defense strength of the team.", "I composed the dataset from online statistics data for Spanish LaLiga for the 2019/2020 season. There are two datasets, one for home and one for away matches, where:", "In the first step of calculating the attack strength, we calculate the average number of goals for home and away teams in the league. This is total number of goals scored divided by total number of matches for home and away.", "The average number of goals scored home: 1.50.", "The average number of goals scored away: 1.02.", "In the second step, we need to determine how strong a team\u2019s attack strength is. We calculate the average number of goals scored per team and divide it by the average number of goals in the season.", "Remember the match is on Santiago Bernabeu, so Real plays at home and Barcelona away. Real scored 27 goals and played 13 home matches. The attack strength for Real is 1.37.", "Barca scored 18 goals and played 13 away matches, so attack strength is 1.34.", "Attack strength focuses on the goal scored, while the defense strength focuses on goals conceded. The averages are simply inverted from the attack strength above:", "The average number of goals conceded home: 1.02.", "The average number of goals conceded away: 1.50.", "The competitors were able to score 9 goals against Real Madrid in 13 home matches. Real\u2019s home defense strength is 0.67, while Barca\u2019s away defense strength is 0.96.", "By putting the number together, we can calculate the expected number of goals for Real Madrid. We simply multiple Real\u2019s home attack strength with Barca\u2019s away defense strength with the average number of goals when playing home in LaLiga.", "Real Madrid is expected to score 2.01 goals.", "Using the same procedure as above, only changing home with away. We multiply Barca\u2019s away attack strength with Real\u2019s home defense strength with the average number of goals when playing away in LaLiga.", "Barcelona is expected to score 0.93 goals.", "You can use an online calculator for Poisson Distribution to determine the probability of an event. Set the average rate of occurrence to 0.93 goals for Barca, then set the number of occurrences from 0 to 5. I used pandas to calculate the probabilities for multiple outcomes.", "The table below shows that Real Madrid has a 26% chance to score 2 goals.", "The probabilities in the table above are independent, meaning that we can multiply them and calculate the probabilities of multiple outcomes. The goals in rows are for Real and columns for Barca. Results 2:0 for Real Madrid has a 10% chance.", "To calculate the odds we need to calculate every outcome with a draw (0:0, 1:1, etc.) and them sum those probabilities. The odds for a draw are simply:", "To calculate Real wins odds \u2014 we repeat the process for every outcome where Real wins (1:0, 2:0, etc.) and the same for Barca.", "Note, these odds are without bookmaker margins.", "In case you would like to run these examples by yourself, you can download this Jupyter Notebook.", "Follow me on Twitter, where I regularly tweet about Data Science and Machine Learning.", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F94f85819bf6&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsports-analysis-with-pandas-real-vs-barca-94f85819bf6&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsports-analysis-with-pandas-real-vs-barca-94f85819bf6&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsports-analysis-with-pandas-real-vs-barca-94f85819bf6&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsports-analysis-with-pandas-real-vs-barca-94f85819bf6&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----94f85819bf6--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----94f85819bf6--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://romanorac.medium.com/?source=post_page-----94f85819bf6--------------------------------", "anchor_text": ""}, {"url": "https://romanorac.medium.com/?source=post_page-----94f85819bf6--------------------------------", "anchor_text": "Roman Orac"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F68bf0657a0cd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsports-analysis-with-pandas-real-vs-barca-94f85819bf6&user=Roman+Orac&userId=68bf0657a0cd&source=post_page-68bf0657a0cd----94f85819bf6---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F94f85819bf6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsports-analysis-with-pandas-real-vs-barca-94f85819bf6&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F94f85819bf6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsports-analysis-with-pandas-real-vs-barca-94f85819bf6&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@jesusance?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Thomas Serer"}, {"url": "https://unsplash.com/s/photos/football?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Unsplash"}, {"url": "https://medium.com/@romanorac/pandas-data-analysis-series-b8cec5b38b22", "anchor_text": "Pandas Data Analysis SeriesA curated list of pandas articles from Tips & Tricks, How NOT to guides to Tips related to Big Data analysis.medium.com"}, {"url": "https://unsplash.com/@viennachanges?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Vienna Reyes"}, {"url": "https://unsplash.com/s/photos/real-madrid?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Unsplash"}, {"url": "https://giphy.com/gifs/televisadeportes-real-madrid-liverpool-sRGEZCqd1q02ieKokd", "anchor_text": "giphy"}, {"url": "https://giphy.com/gifs/messi-goal-fk-8cyro9Vo2FNhZ5mucq", "anchor_text": "giphy"}, {"url": "https://www.danielsoper.com/statcalc/calculator.aspx?id=79", "anchor_text": "calculator"}, {"url": "https://stats.areppim.com/calc/calc_poisson.php", "anchor_text": "calculator"}, {"url": "https://github.com/romanorac/romanorac.github.io/blob/master/assets/notebooks/Sport%20analysis%20pandas.ipynb", "anchor_text": "Jupyter Notebook"}, {"url": "https://twitter.com/romanorac", "anchor_text": "Twitter"}, {"url": "https://twitter.com/romanorac/status/1328952374447267843", "anchor_text": "tweet"}, {"url": "https://unsplash.com/@cmhedger?utm_source=medium&utm_medium=referral", "anchor_text": "Courtney Hedger"}, {"url": "https://unsplash.com/?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://medium.com/tag/data-science?source=post_page-----94f85819bf6---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/analytics?source=post_page-----94f85819bf6---------------analytics-----------------", "anchor_text": "Analytics"}, {"url": "https://medium.com/tag/sports?source=post_page-----94f85819bf6---------------sports-----------------", "anchor_text": "Sports"}, {"url": "https://medium.com/tag/sports-betting?source=post_page-----94f85819bf6---------------sports_betting-----------------", "anchor_text": "Sports Betting"}, {"url": "https://medium.com/tag/statistics?source=post_page-----94f85819bf6---------------statistics-----------------", "anchor_text": "Statistics"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F94f85819bf6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsports-analysis-with-pandas-real-vs-barca-94f85819bf6&user=Roman+Orac&userId=68bf0657a0cd&source=-----94f85819bf6---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F94f85819bf6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsports-analysis-with-pandas-real-vs-barca-94f85819bf6&user=Roman+Orac&userId=68bf0657a0cd&source=-----94f85819bf6---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F94f85819bf6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsports-analysis-with-pandas-real-vs-barca-94f85819bf6&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----94f85819bf6--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F94f85819bf6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsports-analysis-with-pandas-real-vs-barca-94f85819bf6&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----94f85819bf6---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----94f85819bf6--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----94f85819bf6--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----94f85819bf6--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----94f85819bf6--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----94f85819bf6--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----94f85819bf6--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----94f85819bf6--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----94f85819bf6--------------------------------", "anchor_text": ""}, {"url": "https://romanorac.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://romanorac.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Roman Orac"}, {"url": "https://romanorac.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "7.7K Followers"}, {"url": "https://romanorac.medium.com/membership", "anchor_text": "https://romanorac.medium.com/membership"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F68bf0657a0cd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsports-analysis-with-pandas-real-vs-barca-94f85819bf6&user=Roman+Orac&userId=68bf0657a0cd&source=post_page-68bf0657a0cd--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fa69c18dd3c04&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsports-analysis-with-pandas-real-vs-barca-94f85819bf6&newsletterV3=68bf0657a0cd&newsletterV3Id=a69c18dd3c04&user=Roman+Orac&userId=68bf0657a0cd&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}