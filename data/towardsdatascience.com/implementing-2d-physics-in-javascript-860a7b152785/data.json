{"url": "https://towardsdatascience.com/implementing-2d-physics-in-javascript-860a7b152785", "time": 1683003426.92595, "path": "towardsdatascience.com/implementing-2d-physics-in-javascript-860a7b152785/", "webpage": {"metadata": {"title": "Implementing 2D Physics in JavaScript | by Martin Heinz | Towards Data Science", "h1": "Implementing 2D Physics in JavaScript", "description": "Let\u2019s have some fun with JavaScript while implementing 2D physics algorithms for realistic simulations and visualization!"}, "outgoing_paragraph_urls": [{"url": "https://martinheinz.github.io/physics-visual/", "anchor_text": "https://martinheinz.github.io/physics-visual/", "paragraph_index": 2}, {"url": "https://github.com/MartinHeinz/physics-visual", "anchor_text": "https://github.com/MartinHeinz/physics-visual", "paragraph_index": 3}, {"url": "https://martinheinz.github.io/physics-visual/", "anchor_text": "https://martinheinz.github.io/physics-visual/", "paragraph_index": 23}, {"url": "https://github.com/MartinHeinz/physics-visual", "anchor_text": "here", "paragraph_index": 26}, {"url": "https://martinheinz.github.io/physics-visual/", "anchor_text": "here", "paragraph_index": 26}, {"url": "https://martinheinz.dev/blog/15", "anchor_text": "martinheinz.dev", "paragraph_index": 27}, {"url": "https://martinheinz.dev/", "anchor_text": "https://martinheinz.dev/", "paragraph_index": 29}, {"url": "https://ko-fi.com/martinheinz", "anchor_text": "https://ko-fi.com/martinheinz", "paragraph_index": 29}], "all_paragraphs": ["Physics and implementations of real looking animations might seem very complex and difficult, but it\u2019s actually not the case. These algorithms can be very simple and can produce realistic simulations of various physics concepts, including velocity, acceleration or gravity.", "So, let\u2019s see how those algorithms work while implementing 2D physics simulation in JavaScript!", "You can check out the animations and examples here: https://martinheinz.github.io/physics-visual/", "TL;DR: Source code is available in my repository here: https://github.com/MartinHeinz/physics-visual", "Let\u2019s start with the most basic thing \u2014 moving stuff around.", "If we want just uniform movement, then we can use code like this:", "In the code above x and y are coordinates of an object, e.g ellipse, next vx and vy are velocities in horizontal and vertical axis respectively and dt (time delta) is a time between 2 ticks of a timer, which in the case of JavaScript are 2 calls to requestAnimationFrame.", "As an example \u2014 if we wanted to move object sitting at (150, 50) and moving southwest, then we would have the following (movement after single tick):", "Moving uniformly is pretty boring though, so let\u2019s accelerate the movement of our objects:", "In this piece of code we added ax and ay which represent acceleration on x and y axis respectively. We use the acceleration to calculate the change in velocity or speed ( vx/vy), which we then use to move objects like before. Now, if we copy the previous example and add acceleration only on x-axis (going west), we get:", "Now that we can move things around, how about moving objects towards other objects? Well, that\u2019s just called gravity. What do we need to add, to implement that?", "Just so you know what we are trying to get to:", "First things first, let\u2019s recall a few equations from high school:", "If we now want to extend this to force of 2 objects acting on each other, we get:", "It\u2019s getting little complicated (for me at least), so let\u2019s break it down. In this equation |F| is the magnitude of force, which is same for both objects, just in the opposite direction. These objects are represented by their mass - m_1 and m_2. k here is a gravitational constant and r is the distance of centers of gravity of these object. If it still doesn't make much sense, then here's a picture:", "If we want to create some visualization we will end up with more than 2 objects, right? So, what happens when we have more objects acting on each other?", "Looking at the picture above, we can see 2 orange objects pulling black one with forces F_1 and F_2, what we are interested in though is final force F, which we can calculate like this:", "Alright, we have all the math we need, now how will the code look? I will spare you all the steps and just show you final code with comments, if you need more information, feel free to reach out to me. \ud83d\ude42", "When things move around they will also collide at some point. We have two options for solving collisions \u2014 push objects out of collision or bounce away, let\u2019s look at the pushing solution first:", "Before we can resolve collision we need to first check whether 2 objects are actually colliding:", "We first declare Collision class which represents 2 colliding objects. In the checkCollision function we first compute x and y components of distances of objects and then compute their actual distance d. If the sum of their radii is lower than their distance d, then they must be in collision so we return new Collision object.", "Now, to resolve their collision, we need to know the direction of displacement and it\u2019s magnitude:", "So, in JavaScript code that would be:", "You can view an interactive example of this collision resolution at https://martinheinz.github.io/physics-visual/ (Click on Pushing Through Objects)", "Aaaaand the final piece of the puzzle \u2014 resolving collisions by bouncing objects. In this case, it\u2019s better to omit all the math as it would make the article twice as long, so all I\u2019m gonna tell you is that we need to account for the law of momentum conservation and the law of energy conservation which helps us build and solve following magical equation:", "Well, how does this magical k help us? We know the direction in which the objects will move (we can compute that using eigenvectors like before with n_x and n_y), but we don't know by how much and that's the k. So, this is how we compute vector ( z), that tells us where to move those objects:", "This post includes lots of math, but most of it is pretty simple, so I hope this helped you understand and familiarize yourself with these physical concepts. If you want to see more details, then you can check out code in my repository here and interactive demo here.", "This article was originally posted at martinheinz.dev", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "CKA | RHCE | DevOps Engineer at IBM | Working with Python, Kubernetes, Linux and more | https://martinheinz.dev/ | https://ko-fi.com/martinheinz"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F860a7b152785&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fimplementing-2d-physics-in-javascript-860a7b152785&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fimplementing-2d-physics-in-javascript-860a7b152785&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fimplementing-2d-physics-in-javascript-860a7b152785&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fimplementing-2d-physics-in-javascript-860a7b152785&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----860a7b152785--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----860a7b152785--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@martin.heinz?source=post_page-----860a7b152785--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@martin.heinz?source=post_page-----860a7b152785--------------------------------", "anchor_text": "Martin Heinz"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F4cbd6b36e62a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fimplementing-2d-physics-in-javascript-860a7b152785&user=Martin+Heinz&userId=4cbd6b36e62a&source=post_page-4cbd6b36e62a----860a7b152785---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F860a7b152785&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fimplementing-2d-physics-in-javascript-860a7b152785&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F860a7b152785&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fimplementing-2d-physics-in-javascript-860a7b152785&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@mohdali_31?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Mohdammed Ali"}, {"url": "https://unsplash.com/s/photos/energy?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Unsplash"}, {"url": "https://martinheinz.github.io/physics-visual/", "anchor_text": "https://martinheinz.github.io/physics-visual/"}, {"url": "https://github.com/MartinHeinz/physics-visual", "anchor_text": "https://github.com/MartinHeinz/physics-visual"}, {"url": "https://martinheinz.github.io/physics-visual/", "anchor_text": "https://martinheinz.github.io/physics-visual/"}, {"url": "https://github.com/MartinHeinz/physics-visual", "anchor_text": "here"}, {"url": "https://martinheinz.github.io/physics-visual/", "anchor_text": "here"}, {"url": "https://martinheinz.dev/blog/15", "anchor_text": "martinheinz.dev"}, {"url": "https://medium.com/tag/javascript?source=post_page-----860a7b152785---------------javascript-----------------", "anchor_text": "JavaScript"}, {"url": "https://medium.com/tag/programming?source=post_page-----860a7b152785---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/tag/software-engineering?source=post_page-----860a7b152785---------------software_engineering-----------------", "anchor_text": "Software Engineering"}, {"url": "https://medium.com/tag/web-development?source=post_page-----860a7b152785---------------web_development-----------------", "anchor_text": "Web Development"}, {"url": "https://medium.com/tag/algorithms?source=post_page-----860a7b152785---------------algorithms-----------------", "anchor_text": "Algorithms"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F860a7b152785&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fimplementing-2d-physics-in-javascript-860a7b152785&user=Martin+Heinz&userId=4cbd6b36e62a&source=-----860a7b152785---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F860a7b152785&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fimplementing-2d-physics-in-javascript-860a7b152785&user=Martin+Heinz&userId=4cbd6b36e62a&source=-----860a7b152785---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F860a7b152785&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fimplementing-2d-physics-in-javascript-860a7b152785&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----860a7b152785--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F860a7b152785&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fimplementing-2d-physics-in-javascript-860a7b152785&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----860a7b152785---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----860a7b152785--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----860a7b152785--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----860a7b152785--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----860a7b152785--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----860a7b152785--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----860a7b152785--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----860a7b152785--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----860a7b152785--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@martin.heinz?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@martin.heinz?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Martin Heinz"}, {"url": "https://medium.com/@martin.heinz/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "5.4K Followers"}, {"url": "https://martinheinz.dev/", "anchor_text": "https://martinheinz.dev/"}, {"url": "https://ko-fi.com/martinheinz", "anchor_text": "https://ko-fi.com/martinheinz"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F4cbd6b36e62a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fimplementing-2d-physics-in-javascript-860a7b152785&user=Martin+Heinz&userId=4cbd6b36e62a&source=post_page-4cbd6b36e62a--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Ff723091181e3&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fimplementing-2d-physics-in-javascript-860a7b152785&newsletterV3=4cbd6b36e62a&newsletterV3Id=f723091181e3&user=Martin+Heinz&userId=4cbd6b36e62a&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}