{"url": "https://towardsdatascience.com/getting-started-with-airflow-locally-and-remotely-d068df7fcb4", "time": 1683006836.33956, "path": "towardsdatascience.com/getting-started-with-airflow-locally-and-remotely-d068df7fcb4/", "webpage": {"metadata": {"title": "Getting started with Airflow locally and remotely | by Tuan Nguyen | Towards Data Science", "h1": "Getting started with Airflow locally and remotely", "description": "Airflow is a workflow management platform developed and open-source by AirBnB in 2014 to help the company manage its complicated workflows. Fast forward to today, hundreds of companies are utilizing\u2026"}, "outgoing_paragraph_urls": [{"url": "https://github.com/apache/airflow#who-uses-apache-airflow", "anchor_text": "companies", "paragraph_index": 0}, {"url": "https://docs.docker.com/compose/reference/", "anchor_text": "documentation", "paragraph_index": 20}, {"url": "https://tuanchris.com", "anchor_text": "https://tuanchris.com", "paragraph_index": 26}], "all_paragraphs": ["Airflow is a workflow management platform developed and open-source by AirBnB in 2014 to help the company manage its complicated workflows. Fast forward to today, hundreds of companies are utilizing Airflow to manage their software engineering, data engineering, ML engineering pipelines.", "Airflow was developed with four principles in mind, which are scalable, dynamic, extendable, and elegant. Scalable means you can effortlessly scale your pipeline horizontally. Dynamic means dynamic pipeline generation, extensible means you can easily write your custom operators/integrations. Finally, elegant means you can have your pipeline lean and explicit with parameters and Jinja templating.", "Here are some features of Airflow:", "You can build and automate all sorts of systems using Airflow, and it is especially popular amongst data professionals. I started using Airflow to orchestrate ETL processes for our company\u2019s data lake on GCP a couple of years back. It has seen been an essential part of my toolkit.", "In Layman\u2019s term, Airflow is an orchestration tool, which means it will trigger tasks on schedule, or when certain events happen (such as an API call or when a sensor operator senses an action). Here are some possible use cases of Airflow:", "Before we go on to setting up Airflow, let\u2019s look at some basic terminologies.", "DAG is an acronym for a directed acyclic graph, which is a fancy way of describing a graph that is direct and does not form a cycle (a later node never point to an earlier one). Think of DAG in Airflow as a pipeline with nodes (tasks in a DAG, such as \u201cstart\u201d, \u201csection-1-task-1\u201d, \u2026) and edges (arrows).", "You define a DAG with Python, and you can set all sorts of properties for a dag (pipeline). For example start_date, end_date, execution_schedule, etc.", "An operator defines what gets done within a task. Some example operators are PythonOperator (execute a python script), BashOperator(run a bash script)\u2026", "A sensor is an operator that waits for a specific event to happen. For instance, a file is written to an S3 bucket, a database row is inserted, or an API call happens.", "A task is simply an instantiated operator. In your dag definition, you can define task dependency with Python code. That is which execute B, C after task A, and D after task B, C.", "Airflow is quite complicated, as you can see from the architecture above. For local development, we don\u2019t need all the components in the architecture, but for deployment to a server, we certainly need all of them. Let\u2019s look at installing Airflow locally first", "3. Create a folder and set it as Airflow home", "4. Init airflow. After init, you can adjust airflow settings in airflow.cfg", "6. Start airflow webserver in a new terminal window", "Now if you go to your web browser at localhost:8080, you will be able to see the Airflow UI loaded with many examples. You can trigger some of the DAGs, and it will run on your local machine. Referencing the example DAGs will help in developing a new one.", "Now you can define a new DAG file in the directory ~/airflow/dags/ , and Airflow will render your DAG to the UI. I will save the instructions to define a DAG for the next post. Now let\u2019s look at how you can deploy Airflow to a server.", "As mentioned earlier, Airflow\u2019s architecture is complicated, and setting all the components from scratch is cumbersome and error-prone. Fortunately, we can use Docker to deploy all of the components in Airflow architecture to a server effortlessly.", "3. Config Airflow: in the repo, you will find a file named docker-compose-CeleryExecutor.yml, this is the file that docker-compose config file for your Airflow deployment.", "4. Create .env and requirements.txt (optional): You can create those two files in the repo. You can store environment variables in .env and .requirements.txt for your Airflow deployment. Make sure that you expose them to your containers by adding the following to volumes for webserver, worker, and scheduler.", "5. Start your containers: now that we are done with all the configurations, you can start the containers with the following command. Have a look at the docker-compose documentation for more commands that you can do.", "6. Create a Makefile for easy management (optional): You can create a Makefile to issue long and repetitive commands. Take a look at mine below:", "With this, you can simply run make up to start the containers, make down to stop, and make restart to restart.", "In this post, I walk you through what Airflow is, why, and how we can use Airflow. I also show how you can install and run Airflow locally as well as configure it for a remote server.", "Hope you learned something today :)", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "CTO & Board member @Joon Solutions. Check out my website https://tuanchris.com"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fd068df7fcb4&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgetting-started-with-airflow-locally-and-remotely-d068df7fcb4&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgetting-started-with-airflow-locally-and-remotely-d068df7fcb4&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgetting-started-with-airflow-locally-and-remotely-d068df7fcb4&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgetting-started-with-airflow-locally-and-remotely-d068df7fcb4&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----d068df7fcb4--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----d068df7fcb4--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://tuanchris.medium.com/?source=post_page-----d068df7fcb4--------------------------------", "anchor_text": ""}, {"url": "https://tuanchris.medium.com/?source=post_page-----d068df7fcb4--------------------------------", "anchor_text": "Tuan Nguyen"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F2ff2caa6bbf9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgetting-started-with-airflow-locally-and-remotely-d068df7fcb4&user=Tuan+Nguyen&userId=2ff2caa6bbf9&source=post_page-2ff2caa6bbf9----d068df7fcb4---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fd068df7fcb4&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgetting-started-with-airflow-locally-and-remotely-d068df7fcb4&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fd068df7fcb4&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgetting-started-with-airflow-locally-and-remotely-d068df7fcb4&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://en.wikipedia.org/wiki/Apache_Airflow", "anchor_text": "Image credit"}, {"url": "https://github.com/apache/airflow#who-uses-apache-airflow", "anchor_text": "companies"}, {"url": "https://blog.invivoo.com/apache-airflow-what-it-is/", "anchor_text": "source"}, {"url": "https://docs.anaconda.com/anaconda/install/", "anchor_text": "Anaconda"}, {"url": "https://github.com/puckel/docker-airflow", "anchor_text": "repo"}, {"url": "https://github.com/puckel/docker-airflow", "anchor_text": "https://github.com/puckel/docker-airflow"}, {"url": "https://github.com/salt-formulas/salt-formula-airflow/blob/master/airflow/files/create_user.py", "anchor_text": "script"}, {"url": "https://docs.docker.com/compose/reference/", "anchor_text": "documentation"}, {"url": "https://medium.com/tag/data-science?source=post_page-----d068df7fcb4---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/data-engineering?source=post_page-----d068df7fcb4---------------data_engineering-----------------", "anchor_text": "Data Engineering"}, {"url": "https://medium.com/tag/airflow?source=post_page-----d068df7fcb4---------------airflow-----------------", "anchor_text": "Airflow"}, {"url": "https://medium.com/tag/big-data?source=post_page-----d068df7fcb4---------------big_data-----------------", "anchor_text": "Big Data"}, {"url": "https://medium.com/tag/infrastructure?source=post_page-----d068df7fcb4---------------infrastructure-----------------", "anchor_text": "Infrastructure"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fd068df7fcb4&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgetting-started-with-airflow-locally-and-remotely-d068df7fcb4&user=Tuan+Nguyen&userId=2ff2caa6bbf9&source=-----d068df7fcb4---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fd068df7fcb4&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgetting-started-with-airflow-locally-and-remotely-d068df7fcb4&user=Tuan+Nguyen&userId=2ff2caa6bbf9&source=-----d068df7fcb4---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fd068df7fcb4&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgetting-started-with-airflow-locally-and-remotely-d068df7fcb4&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----d068df7fcb4--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fd068df7fcb4&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgetting-started-with-airflow-locally-and-remotely-d068df7fcb4&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----d068df7fcb4---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----d068df7fcb4--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----d068df7fcb4--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----d068df7fcb4--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----d068df7fcb4--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----d068df7fcb4--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----d068df7fcb4--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----d068df7fcb4--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----d068df7fcb4--------------------------------", "anchor_text": ""}, {"url": "https://tuanchris.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://tuanchris.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Tuan Nguyen"}, {"url": "https://tuanchris.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "911 Followers"}, {"url": "https://tuanchris.com", "anchor_text": "https://tuanchris.com"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F2ff2caa6bbf9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgetting-started-with-airflow-locally-and-remotely-d068df7fcb4&user=Tuan+Nguyen&userId=2ff2caa6bbf9&source=post_page-2ff2caa6bbf9--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fede7beaf3570&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgetting-started-with-airflow-locally-and-remotely-d068df7fcb4&newsletterV3=2ff2caa6bbf9&newsletterV3Id=ede7beaf3570&user=Tuan+Nguyen&userId=2ff2caa6bbf9&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}