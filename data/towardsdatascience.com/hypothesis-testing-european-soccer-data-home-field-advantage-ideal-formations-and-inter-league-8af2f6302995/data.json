{"url": "https://towardsdatascience.com/hypothesis-testing-european-soccer-data-home-field-advantage-ideal-formations-and-inter-league-8af2f6302995", "time": 1682996143.797376, "path": "towardsdatascience.com/hypothesis-testing-european-soccer-data-home-field-advantage-ideal-formations-and-inter-league-8af2f6302995/", "webpage": {"metadata": {"title": "Hypothesis Testing European Soccer Data Using Python | by Alexander Shropshire | Towards Data Science", "h1": "Hypothesis Testing European Soccer Data Using Python", "description": "Does the traditional belief in the existence of an underlying advantage for European soccer teams playing at home have statistical significance? What formation has a better overall rate of victory\u2026"}, "outgoing_paragraph_urls": [{"url": "https://www.kaggle.com/hugomathien/soccer", "anchor_text": "European Soccer Database from Kaggle.com", "paragraph_index": 2}, {"url": "http://sofifa.com/", "anchor_text": "EA Sports", "paragraph_index": 2}, {"url": "https://pgloader.readthedocs.io/en/latest/ref/sqlite.html", "anchor_text": "move the data to a PostgreSQL database", "paragraph_index": 12}, {"url": "https://github.com/ConnorAnderson29/mod2-final-project", "anchor_text": "Connor", "paragraph_index": 25}, {"url": "https://github.com/kevintheduu/Hypothesis-Testing-European-Soccer-Data", "anchor_text": "Kevin", "paragraph_index": 25}, {"url": "https://github.com/as6140/hypothesis-testing-european-soccer-data", "anchor_text": "Alex", "paragraph_index": 25}, {"url": "https://www.linkedin.com/in/connor-anderson29/", "anchor_text": "Connor", "paragraph_index": 26}, {"url": "https://www.linkedin.com/in/kevinrexisvelasco/", "anchor_text": "Kevin", "paragraph_index": 26}, {"url": "https://www.linkedin.com/in/alexshropshire/", "anchor_text": "Alex", "paragraph_index": 26}], "all_paragraphs": ["by Connor Anderson, Kevin Velasco, and Alex Shropshire", "Does the traditional belief in the existence of an underlying advantage for European soccer teams playing at home have statistical significance? What formation has a better overall rate of victory, the 4\u20134\u20132 or the 4\u20133\u20133? When comparing the attributes of teams in English Premier League and the French Ligue 1, which league, on average, has the higher defensive aggressiveness? Which, on average, has the greater ability to get players into a shooting position? Will our hypotheses tests yield valuable, statistically significant conclusions, or simply leave us with more unanswered questions?", "We used a European Soccer Database from Kaggle.com to explore these hypotheses, given a sqlite3 database with 7 data tables covering over 25,000 historical soccer matches, 10,000 players, and teams (player & team ratings assessed by EA Sports) from 11 European countries from 2008\u20132016. To summarize our approach in terms of individual statistical hypotheses, we\u2019re running four 2-tailed 2-sample T-tests, at a threshold for rejecting or not rejecting each null hypothesis (alpha=0.05). In order to run these tests, our data must be sampled at random, approximately normally distributed, and independent. Our tests yielded a variety of descriptive result metrics and helpful visualizations which can be viewed in more detail in our GitHub repositories linked at the end of this article, but I will stick to the most vital points below for the sake of brevity.", "H0 (Null Hypothesis): there is no statistically significant difference between the avg. win rate for home teams and the avg. win rate for away teams", "HA (Alternative Hyp.): there exists a statistically significant difference between the avg. win rate for home teams and the avg. win rate for away teams", "H0: there is no statistically significant difference between the 4\u20134\u20132 win rate and the 4\u20133\u20133 win rate", "HA: there exists a statistically significant difference between the 4\u20134\u20132 win rate and the 4\u20133\u20133 win rate", "H0: there is no statistically significant difference between the avg. defensive aggression rating of English teams and the avg. defensive aggression rating of French teams", "HA: there exists a statistically significant difference between the avg. defensive aggression rating of English teams and the avg. defensive aggression rating of French teams", "H0: there is no statistically significant difference between the avg. shooting chance creation rating of English teams and the avg. shooting chance creation rating of French teams", "HA: there exists a statistically significant difference between the avg. shooting chance creation rating of English teams and the avg. shooting chance creation rating of French teams", "SQLite \u2192 PostgreSQL \u2192 Pandas DataFrames", "Kaggle provides the 7 data tables in the SQLite database format, and to improve team collaboration we chose to move the data to a PostgreSQL database by instructing pgloader to load data from a SQLite file, which worked almost perfectly. The Player table presented an error, so we worked around that by first transforming it to a csv, and loading directly into a DataFrame separately with the following code:", "For tables that made it cleanly into PostgreSQL, we loaded them into Pandas DataFrames in the following way:", "Home Goals & Away Goals columns \u2192 Binary Home Win & Away Win columns \u2192 Home Win Rates & Away Win Rates", "We decided to use our knowledge of how many goals each team scored in each match to create 2 binary columns, where 1\u2019s represent the home or away team winning and 0\u2019s represent \u201cnot wins\u201d, or the team drawing or losing. Our win rate is essentially capturing wins over total matches, which is solely based on the chance of a particular team achieving a win given a played match, and does not penalize a loss and a tie differently (traditionally, leagues award 3 points for a win, 1 point for a draw, and 0 for a loss). Win rates, as described, would be computed by taking the mean of these binary columns.", "Reckoning test power, effect size, and sample size", "To arrive at our ideal sample size in each test, we calculated the effect size (Cohen\u2019s d), which takes into account the difference between averages and the pooled variances of the sample data. We use this to feed into a calculation of our minimum sample size needed to achieve a desired alpha level (0.05) and a desired power level (typically around 0.8). In sum, these decisions help to achieve a balance in the tradeoff between a test\u2019s risk of returning a Type I error (rejecting a true H0 \u2014 a false positive) or a Type II error (failure to reject a false H0 \u2014 a false negative). To our surprise, due to a rather slim difference between sample means, the calculations indicate that we would actually want far more samples to utilize in our analysis than we have available. Because of this, the power of our test is significantly reduced in hypothesis tests 2,3, and 4, increasing the risk of a Type II error. We moved forward in running the tests despite this fact, but a more ideal scenario would allow us to achieve a larger statistical power before we could conclude the tests with confidence.", "One goal of inferential statistics is to determine the value of a parameter of a population, which is often expensive or impossible to measure directly. Statistical sampling helps us overcome this challenge. We sample a population, measure a statistic about it, and use this to hopefully say something meaningful about the corresponding population. In the case of our first hypothesis test, we want to be certain that home teams have a particular mean win rate. It\u2019s not easy to collect results from every European soccer game ever played, so we sample 25K matches from 2008\u20132016 and say that the mean win rate of the population falls within a margin of error from what the mean win rate of our sample is.", "Suppose we want to know with greater accuracy what the mean home team win rate is for that period, but all we have to utilize are those samples. It seems that the margin of error from before is likely indicative of our best guess. However, we can use bootstrapping to improve that guess. To do this, we randomly sample with replacement from the 25K known matches. We call this a bootstrap sample. With replacement, this bootstrap sample is most likely not identical to our initial sample. Some matches may appear in our sample more than once, and others may be omitted. Using Python, we can create thousands of iterations of these bootstrap samples quickly. The bootstrap method yields a resulting sample of estimations that often form a normal distribution, which we can summarize with measures of central tendency and variance. Loosely based on the law of large numbers, if we sample over and over again we can arrive at a sort of \u201cmini population\u201d. This applies even when you\u2019re using a single sample to generate the data, thanks to bootstrapping and with the help of fast computers.", "Conclusion: Reject H0 in favor of the HA. There is a significant difference in win rate for home teams vs. away teams. Home-field advantage definitely exists! Below is a simple visualization we created aside from our hypothesis test to illustrate this by team and for the overall data:", "Conclusion: Reject H0 in favor of the HA. There is a significant difference in win rate for 4\u20134\u20132 and 4\u20133\u20133. Based on our data, 4\u20134\u20132 is the better formation in terms of win rate, though we would be able to run a stronger test with more samples and/or a larger difference between the formations\u2019 avg. win rates.", "Conclusion: Reject the H0, with caveats. There seems to be a difference in the avg. defensive aggression rating (EA Sports) of English teams over French teams, but our test lacks power (risking Type II error). We can\u2019t confidently say that there is a true difference in avg. defensive aggression between leagues. We would be able to run a stronger test with more samples and/or a larger difference between league averages.", "Conclusion: Reject the H0, with caveats. There seems to be a difference in the avg. shooting chance creation rating (EA Sports) of English teams over French teams, but our test lacks power (risking Type II error). We can\u2019t confidently say that there is a true difference in the avg. shooting chance creation aptitude between leagues. We would be able to run a stronger test with more samples and/or a larger difference between league averages.", "Thank you for reading our brief, hopefully digestible overview of our European Soccer hypothesis tests!", "To dive into the details of our data, code, and statistical tests, explore our GitHub repositories: Connor \u2014 Kevin \u2014 Alex", "Connect with us on LinkedIn to share your thoughts and questions, or to follow our data science journeys: Connor \u2014 Kevin \u2014 Alex", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Finance x Data @ Brex | Past: Legendary Entertainment, VEVO, AOL | Let\u2019s Connect!"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F8af2f6302995&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhypothesis-testing-european-soccer-data-home-field-advantage-ideal-formations-and-inter-league-8af2f6302995&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhypothesis-testing-european-soccer-data-home-field-advantage-ideal-formations-and-inter-league-8af2f6302995&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhypothesis-testing-european-soccer-data-home-field-advantage-ideal-formations-and-inter-league-8af2f6302995&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhypothesis-testing-european-soccer-data-home-field-advantage-ideal-formations-and-inter-league-8af2f6302995&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----8af2f6302995--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----8af2f6302995--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@as6140?source=post_page-----8af2f6302995--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@as6140?source=post_page-----8af2f6302995--------------------------------", "anchor_text": "Alexander Shropshire"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F993feda9902d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhypothesis-testing-european-soccer-data-home-field-advantage-ideal-formations-and-inter-league-8af2f6302995&user=Alexander+Shropshire&userId=993feda9902d&source=post_page-993feda9902d----8af2f6302995---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F8af2f6302995&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhypothesis-testing-european-soccer-data-home-field-advantage-ideal-formations-and-inter-league-8af2f6302995&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F8af2f6302995&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhypothesis-testing-european-soccer-data-home-field-advantage-ideal-formations-and-inter-league-8af2f6302995&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://medium.com/towards-data-science/in-depth-analysis/home", "anchor_text": "In-Depth Analysis"}, {"url": "https://www.kaggle.com/hugomathien/soccer", "anchor_text": "European Soccer Database from Kaggle.com"}, {"url": "http://sofifa.com/", "anchor_text": "EA Sports"}, {"url": "https://pgloader.readthedocs.io/en/latest/ref/sqlite.html", "anchor_text": "move the data to a PostgreSQL database"}, {"url": "https://github.com/ConnorAnderson29/mod2-final-project", "anchor_text": "Connor"}, {"url": "https://github.com/kevintheduu/Hypothesis-Testing-European-Soccer-Data", "anchor_text": "Kevin"}, {"url": "https://github.com/as6140/hypothesis-testing-european-soccer-data", "anchor_text": "Alex"}, {"url": "https://www.linkedin.com/in/connor-anderson29/", "anchor_text": "Connor"}, {"url": "https://www.linkedin.com/in/kevinrexisvelasco/", "anchor_text": "Kevin"}, {"url": "https://www.linkedin.com/in/alexshropshire/", "anchor_text": "Alex"}, {"url": "https://medium.com/tag/data-science?source=post_page-----8af2f6302995---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/towards-data-science?source=post_page-----8af2f6302995---------------towards_data_science-----------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/tag/hypothesis-testing?source=post_page-----8af2f6302995---------------hypothesis_testing-----------------", "anchor_text": "Hypothesis Testing"}, {"url": "https://medium.com/tag/fifa?source=post_page-----8af2f6302995---------------fifa-----------------", "anchor_text": "FIFA"}, {"url": "https://medium.com/tag/in-depth-analysis?source=post_page-----8af2f6302995---------------in_depth_analysis-----------------", "anchor_text": "In Depth Analysis"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F8af2f6302995&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhypothesis-testing-european-soccer-data-home-field-advantage-ideal-formations-and-inter-league-8af2f6302995&user=Alexander+Shropshire&userId=993feda9902d&source=-----8af2f6302995---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F8af2f6302995&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhypothesis-testing-european-soccer-data-home-field-advantage-ideal-formations-and-inter-league-8af2f6302995&user=Alexander+Shropshire&userId=993feda9902d&source=-----8af2f6302995---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F8af2f6302995&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhypothesis-testing-european-soccer-data-home-field-advantage-ideal-formations-and-inter-league-8af2f6302995&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----8af2f6302995--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F8af2f6302995&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhypothesis-testing-european-soccer-data-home-field-advantage-ideal-formations-and-inter-league-8af2f6302995&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----8af2f6302995---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----8af2f6302995--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----8af2f6302995--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----8af2f6302995--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----8af2f6302995--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----8af2f6302995--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----8af2f6302995--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----8af2f6302995--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----8af2f6302995--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@as6140?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@as6140?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Alexander Shropshire"}, {"url": "https://medium.com/@as6140/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "188 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F993feda9902d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhypothesis-testing-european-soccer-data-home-field-advantage-ideal-formations-and-inter-league-8af2f6302995&user=Alexander+Shropshire&userId=993feda9902d&source=post_page-993feda9902d--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F6afb749b7ed1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhypothesis-testing-european-soccer-data-home-field-advantage-ideal-formations-and-inter-league-8af2f6302995&newsletterV3=993feda9902d&newsletterV3Id=6afb749b7ed1&user=Alexander+Shropshire&userId=993feda9902d&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}