{"url": "https://towardsdatascience.com/aws-sagemaker-batch-transform-design-pattern-fa1d60618fa8", "time": 1683017839.526695, "path": "towardsdatascience.com/aws-sagemaker-batch-transform-design-pattern-fa1d60618fa8/", "webpage": {"metadata": {"title": "AWS SageMaker Batch Transform Design Pattern | by Marco Susilo | Towards Data Science", "h1": "AWS SageMaker Batch Transform Design Pattern", "description": "An organisation\u2019s team of data scientists have spent significant time and resources into fine tuning and training a machine learning model to solve a business problem. Finally they have settled on\u2026"}, "outgoing_paragraph_urls": [{"url": "https://docs.aws.amazon.com/sagemaker/latest/APIReference/API_CreateTransformJob.html", "anchor_text": "here", "paragraph_index": 8}, {"url": "https://www.passionit.tech", "anchor_text": "https://www.passionit.tech", "paragraph_index": 16}], "all_paragraphs": ["A common scenario I encounter goes like the following:", "An organisation\u2019s team of data scientists have spent significant time and resources into fine tuning and training a machine learning model to solve a business problem. Finally they have settled on the one (or an ensemble/stack ensemble).", "The business are thrilled to hear the great news. News spreads that a revolutionary technology is going to radically transform the business by improving profit by x% or improve efficiency by y% etc etc. Soon the news reaches the senior executives and they want it available now now now.", "The team of data scientists are now in a predicament as they have done their part (creating a model) but the business cannot make use of just a model artifact, they need the model integrated into business applications. How can this be done?", "The above scenario is often the result of a skills gap in the organisation where they have not planned how to deploy and integrate machine learning models into business applications in their tech environment. Luckily cloud vendors are picking up on this gap and are providing services and design patterns to fill this gap.", "Below is a design pattern I have used, with great success, for scenarios where online prediction is not required and an application can get away with doing batch prediction in an AWS environment.", "There are 3 main stages which I will go into more detail below:", "The process is triggered by 1 of 2 possible triggers. A time based trigger where you know that new input data that requires prediction will be available at a regular time interval OR a S3 trigger where data is loaded into an S3 bucket which can then trigger a lambda function.", "The lambda function simply creates a transform job in SageMaker using the final model that the team of data scientist\u2019s have agreed to be used for the business application. As part of the create_transform_job api call you can provide various parameters in order to scale up or down as required. Things that I tweak include InstanceType, InstanceCount, MaxConcurrentTransforms and the MaxPayloadInMB parameters. You can read more about what these parameters do as well as other parameters here.", "When the API call is successful SageMaker will then process the input data and make predictions using the chosen model and output the model predictions into an S3 bucket that was specified which in turn will trigger the second lambda function that will process the prediction output.", "When predictions start landing into the \u201cModel Predictions\u201d bucket in the diagram above it will trigger a second lambda function that I usually use to process the predictions. In this second lambda function you can do some post processing and output the model predictions into the organisation\u2019s datalake and/or a database/data warehouse.", "Some things I have experienced with is to experiment with reserved concurrency values in the lambda function. If it is too low you will be waiting a long time to process the model prediction results, too many and you may start getting errors with other AWS services eg. too many connections to RDS etc.", "If you have reached this stage you are near the end of the tunnel. This stage is where users of the business application can consume the result of the new revolutionary machine learning technology.", "The above design pattern is a small part of the architecture of a business application with embedded advanced analytics. There will be processes prior to this that extracts the data, transforms the data, enriches the data, move data through various systems etc. I have only focused on the relevant services to deploy a machine learning model.", "Please leave a comment below sharing any other design patterns you have used to solve similar problems or wish to discuss the design pattern above further.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "A Kaggle expert, certified Machine Learning Specialist AWS, passionate about cloud, analytics and technology. Founder of PassionIT (https://www.passionit.tech)"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Ffa1d60618fa8&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Faws-sagemaker-batch-transform-design-pattern-fa1d60618fa8&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Faws-sagemaker-batch-transform-design-pattern-fa1d60618fa8&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Faws-sagemaker-batch-transform-design-pattern-fa1d60618fa8&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Faws-sagemaker-batch-transform-design-pattern-fa1d60618fa8&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----fa1d60618fa8--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----fa1d60618fa8--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://marco-susilo.medium.com/?source=post_page-----fa1d60618fa8--------------------------------", "anchor_text": ""}, {"url": "https://marco-susilo.medium.com/?source=post_page-----fa1d60618fa8--------------------------------", "anchor_text": "Marco Susilo"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Ff90f31c1f244&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Faws-sagemaker-batch-transform-design-pattern-fa1d60618fa8&user=Marco+Susilo&userId=f90f31c1f244&source=post_page-f90f31c1f244----fa1d60618fa8---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ffa1d60618fa8&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Faws-sagemaker-batch-transform-design-pattern-fa1d60618fa8&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ffa1d60618fa8&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Faws-sagemaker-batch-transform-design-pattern-fa1d60618fa8&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@heyerlein?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "h heyerlein"}, {"url": "https://unsplash.com/s/photos/machine-learning?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Unsplash"}, {"url": "https://docs.aws.amazon.com/sagemaker/latest/APIReference/API_CreateTransformJob.html", "anchor_text": "here"}, {"url": "https://medium.com/tag/aws?source=post_page-----fa1d60618fa8---------------aws-----------------", "anchor_text": "AWS"}, {"url": "https://medium.com/tag/analytics?source=post_page-----fa1d60618fa8---------------analytics-----------------", "anchor_text": "Analytics"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----fa1d60618fa8---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/tag/cloud-computing?source=post_page-----fa1d60618fa8---------------cloud_computing-----------------", "anchor_text": "Cloud Computing"}, {"url": "https://medium.com/tag/data-science?source=post_page-----fa1d60618fa8---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Ffa1d60618fa8&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Faws-sagemaker-batch-transform-design-pattern-fa1d60618fa8&user=Marco+Susilo&userId=f90f31c1f244&source=-----fa1d60618fa8---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Ffa1d60618fa8&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Faws-sagemaker-batch-transform-design-pattern-fa1d60618fa8&user=Marco+Susilo&userId=f90f31c1f244&source=-----fa1d60618fa8---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ffa1d60618fa8&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Faws-sagemaker-batch-transform-design-pattern-fa1d60618fa8&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----fa1d60618fa8--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Ffa1d60618fa8&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Faws-sagemaker-batch-transform-design-pattern-fa1d60618fa8&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----fa1d60618fa8---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----fa1d60618fa8--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----fa1d60618fa8--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----fa1d60618fa8--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----fa1d60618fa8--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----fa1d60618fa8--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----fa1d60618fa8--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----fa1d60618fa8--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----fa1d60618fa8--------------------------------", "anchor_text": ""}, {"url": "https://marco-susilo.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://marco-susilo.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Marco Susilo"}, {"url": "https://marco-susilo.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "135 Followers"}, {"url": "https://www.passionit.tech", "anchor_text": "https://www.passionit.tech"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Ff90f31c1f244&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Faws-sagemaker-batch-transform-design-pattern-fa1d60618fa8&user=Marco+Susilo&userId=f90f31c1f244&source=post_page-f90f31c1f244--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fe2b7602777d5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Faws-sagemaker-batch-transform-design-pattern-fa1d60618fa8&newsletterV3=f90f31c1f244&newsletterV3Id=e2b7602777d5&user=Marco+Susilo&userId=f90f31c1f244&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}