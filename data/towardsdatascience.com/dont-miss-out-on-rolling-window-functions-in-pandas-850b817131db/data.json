{"url": "https://towardsdatascience.com/dont-miss-out-on-rolling-window-functions-in-pandas-850b817131db", "time": 1683013665.205892, "path": "towardsdatascience.com/dont-miss-out-on-rolling-window-functions-in-pandas-850b817131db/", "webpage": {"metadata": {"title": "Don\u2019t Miss Out on Rolling Window Functions in Pandas | by Byron Dolon | Towards Data Science", "h1": "Don\u2019t Miss Out on Rolling Window Functions in Pandas", "description": "The Pandas library lets you perform many different built-in aggregate calculations, define your functions and apply them across a DataFrame, and even work with multiple columns in a DataFrame\u2026"}, "outgoing_paragraph_urls": [], "all_paragraphs": ["Window calculations can add a lot of depth to your data analysis.", "The Pandas library lets you perform many different built-in aggregate calculations, define your functions and apply them across a DataFrame, and even work with multiple columns in a DataFrame simultaneously. A feature in Pandas you might not have heard of before is the built-in Window functions.", "Window functions are useful because you can perform many different kinds of operations on subsets of your data. Rolling window functions specifically let you calculate new values over each row in a DataFrame. This might sound a bit abstract, so let\u2019s just dive into the explanations and examples.", "Examples in this piece will use some old Tesla stock price data from Yahoo Finance. Feel free to run the code below if you want to follow along. For more information on pd.read_html and df.sort_values, check out the links at the end of this piece.", "So what is a rolling window calculation?", "You\u2019ll typically use rolling calculations when you work with time-series data. Again, a window is a subset of rows that you perform a window calculation on. After you\u2019ve defined a window, you can perform operations like calculating running totals, moving averages, ranks, and much more!", "Let\u2019s clear this up with some examples.", "The moving average calculation creates an updated average value for each row based on the window we specify. The calculation is also called a \u201crolling mean\u201d because it\u2019s calculating an average of values within a specified range for each row as you go along the DataFrame.", "That sounds a bit abstract, so let\u2019s calculate the rolling mean for the \u201cClose\u201d column price over time. To do so, we\u2019ll run the following code:", "We\u2019re creating a new column \u201cRolling Close Average\u201d which takes the moving average of the close price within a window. To do this, we simply write .rolling(2).mean(), where we specify a window of \u201c2\u201d and calculate the mean for every window along the DataFrame. Each row gets a \u201cRolling Close Average\u201d equal to its \u201cClose*\u201d value plus the previous row\u2019s \u201cClose*\u201d divided by 2 (the window). In essence, it\u2019s Moving Avg = ([t] + [t-1]) / 2.", "In practice, this means the first calculated value (62.44 + 62.58) / 2 = 62.51, which is the \u201cRolling Close Average\u201d value for February 4. There is no rolling mean for the first row in the DataFrame, because there is no available [t-1] or prior period \u201cClose*\u201d value to use in the calculation, which is why Pandas fills it with a NaN value.", "To further see the difference between a regular calculation and a rolling calculation, let\u2019s check out the rolling standard deviation of the \u201cOpen\u201d price. To do so, we\u2019ll run the following code:", "I also included a new column \u201cOpen Standard Deviation\u201d for the standard deviation that simply calculates the standard deviation for the whole \u201cOpen\u201d column. Beside it, you\u2019ll see the \u201cRolling Open Standard Deviation\u201d column, in which I\u2019ve defined a window of 2 and calculated the standard deviation for each row.", "Just as with the previous example, the first non-null value is at the second row of the DataFrame, because that\u2019s the first row that has both [t] and [t-1]. You can see how the moving standard deviation varies as you move down the table, which can be useful to track volatility over time.", "Pandas uses N-1 degrees of freedom when calculating the standard deviation. You can pass an optional argument to ddof, which in the std function is set to \u201c1\u201d by default.", "As a final example, let\u2019s calculate the rolling sum for the \u201cVolume\u201d column. To do so, we run the following code:", "We\u2019ve defined a window of \u201c3\u201d, so the first calculated value appears on the third row. The sum calculation then \u201crolls\u201d over every row, so that you can track the sum of the current row and the two prior row\u2019s values over time.", "It\u2019s important to emphasize here that these rolling (moving) calculations should not be confused with running calculations. Rolling calculations, as you can see int he diagram above, have a moving window. So with our moving sum, the calculated value for February 6 (the fourth row) does not include the value for February 1 (the first row), because the specified window (3) does not go that far back. In contrast, a running calculation would take continually add each row value to a running total value across the whole DataFrame. You can check out the cumsum function for that.", "I hope you found this very basic introduction to logical comparisons in Pandas using the wrappers useful. Remember to only compare data that can be compared (i.e. don\u2019t try to compare a string to a float) and manually double-check the results to make sure your calculations are producing the intended results.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Medium has become a place to store my \u201chow to do tech stuff\u201d type guides. Come check out my notes on data-related shenanigans!"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F850b817131db&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdont-miss-out-on-rolling-window-functions-in-pandas-850b817131db&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdont-miss-out-on-rolling-window-functions-in-pandas-850b817131db&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdont-miss-out-on-rolling-window-functions-in-pandas-850b817131db&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdont-miss-out-on-rolling-window-functions-in-pandas-850b817131db&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----850b817131db--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----850b817131db--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://byrondolon.medium.com/?source=post_page-----850b817131db--------------------------------", "anchor_text": ""}, {"url": "https://byrondolon.medium.com/?source=post_page-----850b817131db--------------------------------", "anchor_text": "Byron Dolon"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F6b5d063df5dd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdont-miss-out-on-rolling-window-functions-in-pandas-850b817131db&user=Byron+Dolon&userId=6b5d063df5dd&source=post_page-6b5d063df5dd----850b817131db---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F850b817131db&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdont-miss-out-on-rolling-window-functions-in-pandas-850b817131db&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F850b817131db&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdont-miss-out-on-rolling-window-functions-in-pandas-850b817131db&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://www.instagram.com/bythanproductions/", "anchor_text": "bythanproductions"}, {"url": "https://finance.yahoo.com/quote/TSLA/history?period1=1546300800&period2=1550275200&interval=1d&filter=history&frequency=1d", "anchor_text": "https://finance.yahoo.com/quote/TSLA/history?period1=1546300800&period2=1550275200&interval=1d&filter=history&frequency=1d"}, {"url": "https://finance.yahoo.com/quote/TSLA/history?period1=1546300800&period2=1550275200&interval=1d&filter=history&frequency=1d", "anchor_text": "Yahoo Finance"}, {"url": "https://towardsdatascience.com/2-easy-ways-to-get-tables-from-a-website-with-pandas-b92fc835e741?source=friends_link&sk=9981ddaf0785a79be893b5a1dd3e03dd", "anchor_text": "2 Easy Ways to Get Tables From a Website"}, {"url": "https://towardsdatascience.com/4-different-ways-to-efficiently-sort-a-pandas-dataframe-9aba423f12db?source=friends_link&sk=97821818c45f0bdbdbc8d341a14ecddd", "anchor_text": "4 Different Ways to Efficiently Sort a Pandas DataFrame"}, {"url": "https://towardsdatascience.com/top-4-repositories-on-github-to-learn-pandas-1008cb769f77?source=friends_link&sk=d3acc38062490a86ecb46875342224e6", "anchor_text": "Top 4 Repositories on GitHub to Learn Pandas"}, {"url": "https://towardsdatascience.com/how-to-quickly-create-and-unpack-lists-with-pandas-d0e78e487c75?source=friends_link&sk=32ea67b35fe90382dc719c1c78c5900c", "anchor_text": "How to Quickly Create and Unpack Lists with Pandas"}, {"url": "https://towardsdatascience.com/learning-to-forecast-effectively-with-tableau-in-6-minutes-or-less-3d77a55930a0?source=friends_link&sk=9abdfd7533ee9a31ab8a036413450059", "anchor_text": "Learning to Forecast With Tableau in 5 Minutes Or Less"}, {"url": "https://medium.com/tag/data-science?source=post_page-----850b817131db---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/programming?source=post_page-----850b817131db---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/tag/python?source=post_page-----850b817131db---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/technology?source=post_page-----850b817131db---------------technology-----------------", "anchor_text": "Technology"}, {"url": "https://medium.com/tag/pandas?source=post_page-----850b817131db---------------pandas-----------------", "anchor_text": "Pandas"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F850b817131db&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdont-miss-out-on-rolling-window-functions-in-pandas-850b817131db&user=Byron+Dolon&userId=6b5d063df5dd&source=-----850b817131db---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F850b817131db&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdont-miss-out-on-rolling-window-functions-in-pandas-850b817131db&user=Byron+Dolon&userId=6b5d063df5dd&source=-----850b817131db---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F850b817131db&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdont-miss-out-on-rolling-window-functions-in-pandas-850b817131db&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----850b817131db--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F850b817131db&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdont-miss-out-on-rolling-window-functions-in-pandas-850b817131db&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----850b817131db---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----850b817131db--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----850b817131db--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----850b817131db--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----850b817131db--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----850b817131db--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----850b817131db--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----850b817131db--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----850b817131db--------------------------------", "anchor_text": ""}, {"url": "https://byrondolon.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://byrondolon.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Byron Dolon"}, {"url": "https://byrondolon.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "1.2K Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F6b5d063df5dd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdont-miss-out-on-rolling-window-functions-in-pandas-850b817131db&user=Byron+Dolon&userId=6b5d063df5dd&source=post_page-6b5d063df5dd--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fb2ea4b269407&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdont-miss-out-on-rolling-window-functions-in-pandas-850b817131db&newsletterV3=6b5d063df5dd&newsletterV3Id=b2ea4b269407&user=Byron+Dolon&userId=6b5d063df5dd&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}