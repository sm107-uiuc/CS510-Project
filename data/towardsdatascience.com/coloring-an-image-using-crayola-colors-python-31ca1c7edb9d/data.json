{"url": "https://towardsdatascience.com/coloring-an-image-using-crayola-colors-python-31ca1c7edb9d", "time": 1683010125.633051, "path": "towardsdatascience.com/coloring-an-image-using-crayola-colors-python-31ca1c7edb9d/", "webpage": {"metadata": {"title": "Coloring an Image using Crayola Colors (Python) | by Pranay Sameer | Towards Data Science", "h1": "Coloring an Image using Crayola Colors (Python)", "description": "Creating an array of colors. Firstly, I picked the corresponding RGB values for a 120 crayons Crayola box and copied them into a list. Secondly, I started by picking an image and resizing it to a\u2026"}, "outgoing_paragraph_urls": [{"url": "http://www.jennyscrayoncollection.com/2017/10/complete-list-of-current-crayola-crayon.html", "anchor_text": "Crayola", "paragraph_index": 0}, {"url": "https://www.geeksforgeeks.org/python-bilateral-filtering/", "anchor_text": "bilateral filter", "paragraph_index": 2}, {"url": "https://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_imgproc/py_thresholding/py_thresholding.html", "anchor_text": "adaptive threshold", "paragraph_index": 3}, {"url": "https://stackoverflow.com/questions/1847092/given-an-rgb-value-what-would-be-the-best-way-to-find-the-closest-match-in-the-d", "anchor_text": "stack overflow solution provided here", "paragraph_index": 5}, {"url": "https://en.wikipedia.org/wiki/Color_difference", "anchor_text": "suggestions", "paragraph_index": 5}, {"url": "https://docs.python.org/3/c-api/init.html#thread-state-and-the-global-interpreter-lock", "anchor_text": "Global Interpreter Lock", "paragraph_index": 6}], "all_paragraphs": ["Creating an array of colors. Firstly, I picked the corresponding RGB values for a 120 crayons Crayola box and copied them into a list.", "Secondly, I started by picking an image and resizing it to a smaller size. This is mainly to reduce the runtime. Also, I noticed that smaller pictures seemed to better bring out the intended effect.", "Next, I ran a bilateral filter that smoothens images but preserves the edges. Edges are important because most crayon drawings have strong, very present, and well-defined edges. The bilateral filter in OpenCV is controlled by 2 main factors, sigmaColor (Higher the value, more distant colors will mix) and sigmaSpace(Higher the value, more distant pixels will mix).", "After running the Bilateral Filter, I identified the edges in the image. First I converted the image to grayscale. Mainly because we are going to identify the edges using the adaptive threshold method- which works only with grayscale. We are basically making a binary image where every pixel is either black or white. Setting a single threshold for creating this binary image will run into troubles in situations like non-uniform lighting across the image. So it would be preferable to use a localized threshold that will bring out better results. Tweaking the blockSize based on the image produces better results.", "Then, I put the solid edges back on our image. We can do this using the bitwise-and arithmetic operator, pixel to pixel for the image with edges, and the RGB image.", "I then replaced the color of each of the pixel with the closest available color in our palette. It took me time to get this right and is easily the core step of this module. I first used a pure Euclidean distance between the current color and every color in the palette. The output wasn\u2019t as realistic as I hoped. It would often exhibit significant deviations from the expected color. This was alleviated using the stack overflow solution provided here which augments the formula with the sensitivity we perceive colors. Other suggestions were based on hue distance, however, I felt it didn\u2019t represent any better than Euclidean. So initially, I wrote a for-loop in python to manipulate each of the pixels.", "This was however really slow, I then tried to use Threading. That didn\u2019t help much either. Python has this thing called Global Interpreter Lock that doesn't allow concurrent runs on an array. After a little more searching, I found cython could help speed up the process significantly. In my case, moving the pixel manipulation logic to cython helped speed it up by a whopping 20x.", "Cython is like a superset of Python that has functions from C. Since I was relatively new to cython, I only moved simple components like the distance calculator which is purely calculation to cython. Converting the python image object to an array would probably help speed it up further.", "As you can see, the most suitable color is not always picked across the image. But still, a pretty good cartoonized effect is produced.", "Here are some more pictures that I ran the code against,", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Site Reliability Engineer. (C#, Python and C++) Love technology, sleep and short stories."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F31ca1c7edb9d&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcoloring-an-image-using-crayola-colors-python-31ca1c7edb9d&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcoloring-an-image-using-crayola-colors-python-31ca1c7edb9d&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcoloring-an-image-using-crayola-colors-python-31ca1c7edb9d&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcoloring-an-image-using-crayola-colors-python-31ca1c7edb9d&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----31ca1c7edb9d--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----31ca1c7edb9d--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@pranaysameer.ps?source=post_page-----31ca1c7edb9d--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@pranaysameer.ps?source=post_page-----31ca1c7edb9d--------------------------------", "anchor_text": "Pranay Sameer"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F9998571d730&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcoloring-an-image-using-crayola-colors-python-31ca1c7edb9d&user=Pranay+Sameer&userId=9998571d730&source=post_page-9998571d730----31ca1c7edb9d---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F31ca1c7edb9d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcoloring-an-image-using-crayola-colors-python-31ca1c7edb9d&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F31ca1c7edb9d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcoloring-an-image-using-crayola-colors-python-31ca1c7edb9d&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "http://www.jennyscrayoncollection.com/2017/10/complete-list-of-current-crayola-crayon.html", "anchor_text": "Crayola"}, {"url": "https://www.geeksforgeeks.org/python-bilateral-filtering/", "anchor_text": "bilateral filter"}, {"url": "https://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_imgproc/py_thresholding/py_thresholding.html", "anchor_text": "adaptive threshold"}, {"url": "https://stackoverflow.com/questions/1847092/given-an-rgb-value-what-would-be-the-best-way-to-find-the-closest-match-in-the-d", "anchor_text": "stack overflow solution provided here"}, {"url": "https://en.wikipedia.org/wiki/Color_difference", "anchor_text": "suggestions"}, {"url": "https://docs.python.org/3/c-api/init.html#thread-state-and-the-global-interpreter-lock", "anchor_text": "Global Interpreter Lock"}, {"url": "https://medium.com/tag/programming?source=post_page-----31ca1c7edb9d---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/tag/opencv?source=post_page-----31ca1c7edb9d---------------opencv-----------------", "anchor_text": "Opencv"}, {"url": "https://medium.com/tag/image-processing?source=post_page-----31ca1c7edb9d---------------image_processing-----------------", "anchor_text": "Image Processing"}, {"url": "https://medium.com/tag/python?source=post_page-----31ca1c7edb9d---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/filters?source=post_page-----31ca1c7edb9d---------------filters-----------------", "anchor_text": "Filters"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F31ca1c7edb9d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcoloring-an-image-using-crayola-colors-python-31ca1c7edb9d&user=Pranay+Sameer&userId=9998571d730&source=-----31ca1c7edb9d---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F31ca1c7edb9d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcoloring-an-image-using-crayola-colors-python-31ca1c7edb9d&user=Pranay+Sameer&userId=9998571d730&source=-----31ca1c7edb9d---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F31ca1c7edb9d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcoloring-an-image-using-crayola-colors-python-31ca1c7edb9d&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----31ca1c7edb9d--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F31ca1c7edb9d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcoloring-an-image-using-crayola-colors-python-31ca1c7edb9d&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----31ca1c7edb9d---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----31ca1c7edb9d--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----31ca1c7edb9d--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----31ca1c7edb9d--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----31ca1c7edb9d--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----31ca1c7edb9d--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----31ca1c7edb9d--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----31ca1c7edb9d--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----31ca1c7edb9d--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@pranaysameer.ps?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@pranaysameer.ps?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Pranay Sameer"}, {"url": "https://medium.com/@pranaysameer.ps/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "9 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F9998571d730&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcoloring-an-image-using-crayola-colors-python-31ca1c7edb9d&user=Pranay+Sameer&userId=9998571d730&source=post_page-9998571d730--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fusers%2F9998571d730%2Flazily-enable-writer-subscription&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcoloring-an-image-using-crayola-colors-python-31ca1c7edb9d&user=Pranay+Sameer&userId=9998571d730&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}