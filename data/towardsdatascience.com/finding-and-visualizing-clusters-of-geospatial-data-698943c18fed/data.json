{"url": "https://towardsdatascience.com/finding-and-visualizing-clusters-of-geospatial-data-698943c18fed", "time": 1683010038.996972, "path": "towardsdatascience.com/finding-and-visualizing-clusters-of-geospatial-data-698943c18fed/", "webpage": {"metadata": {"title": "Finding and Visualizing Clusters of Geospatial Data | by Claudia Ng | Towards Data Science", "h1": "Finding and Visualizing Clusters of Geospatial Data", "description": "When working with geospatial data, it is often useful to find clusters of latitude and longitude coordinates either as a data preprocessing step for your machine learning model or as part of\u2026"}, "outgoing_paragraph_urls": [{"url": "https://www.kaggle.com/c/nyc-taxi-trip-duration", "anchor_text": "Kaggle competition", "paragraph_index": 1}, {"url": "https://medium.com/analytics-vidhya/feature-engineering-with-geospatial-data-predicting-nyc-cab-trip-duration-a121ec16021b", "anchor_text": "here", "paragraph_index": 1}, {"url": "https://data.cityofnewyork.us/City-Government/Borough-Boundaries/tqmj-j8zm", "anchor_text": "NYC OpenData", "paragraph_index": 10}, {"url": "https://matplotlib.org/tutorials/colors/colormaps.html", "anchor_text": "matplotlib\u2019s colormaps", "paragraph_index": 13}, {"url": "https://medium.com/analytics-vidhya/feature-engineering-with-geospatial-data-predicting-nyc-cab-trip-duration-a121ec16021b", "anchor_text": "Feature Engineering with Geospatial Data: Predicting NYC Cab Trip Duration", "paragraph_index": 20}, {"url": "https://medium.com/python-in-plain-english/creating-a-time-lapsed-heatmap-of-nyc-cab-pickup-locations-in-python-fef773b31427", "anchor_text": "Creating a Time-Lapsed Heatmap of NYC Cab Pickup Locations in Python", "paragraph_index": 21}], "all_paragraphs": ["When working with geospatial data, it is often useful to find clusters of latitude and longitude coordinates either as a data preprocessing step for your machine learning model or as part of segmentation analysis. However, some frequently asked questions related to finding geospatial clusters include:", "I recently worked on an Kaggle competition from 2017 to predict Taxi trip durations from mainly geospatial and temporal features (see post here). One of the preprocessing steps I did was to group locations into 20 clusters and find the number of pickups and dropoffs in each cluster to get a proxy for cluster density/traffic.", "In this article, I will showcase how to visualize latitude and longitude coordinates and cluster centers on a map using matplotlib and geopandas. Below is what the different clusters look like for my dataset with different values of k ranging from 2 to 25 clusters. The different colored dots represent the pickup locations and which clusters they belong to as identified using K-Means clustering, and the red crosses represent the cluster centers.", "There are several unsupervised learning approaches to find clusters with similar attributes from your dataset, including K-Means clustering, agglomerative clustering and DBSCAN. Since I was working with a large dataset with almost 1.5 million data points, I chose to use scikit-learn\u2019sMiniBatchKMeans, a version of K-Means clustering that uses minibatches to speed up the process.", "One of the parameters in K-Means clustering is to specify the number of clusters (k). A popular method to find the optimal value of k is the elbow method, where you plot the sum of squared distances against values of k and choose the inflection point (point of diminishing returns).", "The elbow method suggests that the optimal value of k for this dataset is 6. As NYC is a large city, is 6 clusters granular enough? To check, I will move on to visualize clusters with different values of k applied to this geospatial dataset.", "To visualize geolocation clusters on a map of New York City, I wrote a function that allows you to plot your latitude and longitude coordinates and cluster centers on top of a map of NYC. Here is a breakdown of the function:", "The geolocations in this dataset come from a .csv file, which I imported using pandas in python. In order to plot this onto a map, we have to first transform this regular pandas dataframe into a geopandas dataframe", "2. Import shape files of city or region", "Geopandas has shape files that you can import on the country level, but for more granular details, you would have to download a shape file and import it manually using geopandas.", "In my case, I went to NYC OpenData and downloaded the shapefile under Export > Download > Download Geospatial Data > Shapefile. You may want to move the shape files to a directory that you can easily access from Python, but remember to move the whole directory, because geopandas would not be able to import it with just the .shp file!", "After obtaining the shape files, you can import them using geopandas and add it to your plot. I set the zorder of the shapefile to 1 to indicate that it should be behind datapoints that I will plot later with a higher zorder.", "3. Plot Coordinates on top of city map", "With the city map plotted, we can now add our latitude and longitude coordinates onto our plot! All we have to do is call .plot() on our geopandas dataframe, and set the zorder to 2 in order for our coordinates to be on top of the city map. You can customize the color scheme of the map and there are many to choose from in matplotlib\u2019s colormaps.", "In order to plot cluster centers, you have to first transform the cluster centers column in our geopandas dataframe into a GeoSeries of Points. After this, we can plot this on the map and set the zorder to 3, so that the cluster centers are visible and on top of everything else.", "5. Show and Save the Plot", "Lastly, show the plot by calling plt.show() and add labels to the chart. Also, don\u2019t forget to save it!", "That is it! Below is the code snippet for the entire function.", "Here is a quick recap of the steps to find and visualize clusters of geolocation data:", "Visualizing clusters of geolocations is a great way to understand your data. You could also use the plot_geolocation_by_cluster function to visualize how different clustering algorithms segment your dataset. To access the full source code, please click on the \u201cfull notebook\u201d option under References below.", "Feature Engineering with Geospatial Data: Predicting NYC Cab Trip Duration", "Creating a Time-Lapsed Heatmap of NYC Cab Pickup Locations in Python", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Data Scientist | FinTech | Harvard MPP | Language Enthusiast"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F698943c18fed&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffinding-and-visualizing-clusters-of-geospatial-data-698943c18fed&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffinding-and-visualizing-clusters-of-geospatial-data-698943c18fed&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffinding-and-visualizing-clusters-of-geospatial-data-698943c18fed&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffinding-and-visualizing-clusters-of-geospatial-data-698943c18fed&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----698943c18fed--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----698943c18fed--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://ds-claudia.medium.com/?source=post_page-----698943c18fed--------------------------------", "anchor_text": ""}, {"url": "https://ds-claudia.medium.com/?source=post_page-----698943c18fed--------------------------------", "anchor_text": "Claudia Ng"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fba2da7b3b9c8&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffinding-and-visualizing-clusters-of-geospatial-data-698943c18fed&user=Claudia+Ng&userId=ba2da7b3b9c8&source=post_page-ba2da7b3b9c8----698943c18fed---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F698943c18fed&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffinding-and-visualizing-clusters-of-geospatial-data-698943c18fed&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F698943c18fed&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffinding-and-visualizing-clusters-of-geospatial-data-698943c18fed&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://www.kaggle.com/c/nyc-taxi-trip-duration", "anchor_text": "Kaggle competition"}, {"url": "https://medium.com/analytics-vidhya/feature-engineering-with-geospatial-data-predicting-nyc-cab-trip-duration-a121ec16021b", "anchor_text": "here"}, {"url": "https://data.cityofnewyork.us/City-Government/Borough-Boundaries/tqmj-j8zm", "anchor_text": "NYC OpenData"}, {"url": "https://matplotlib.org/tutorials/colors/colormaps.html", "anchor_text": "matplotlib\u2019s colormaps"}, {"url": "https://github.com/claudian37/DS_Portfolio/blob/master/NYC_cab_dataset/03_visualizing_kmeans_clusters_geospatial_data.ipynb", "anchor_text": "Full Notebook"}, {"url": "https://medium.com/analytics-vidhya/feature-engineering-with-geospatial-data-predicting-nyc-cab-trip-duration-a121ec16021b", "anchor_text": "Feature Engineering with Geospatial Data: Predicting NYC Cab Trip Duration"}, {"url": "https://medium.com/python-in-plain-english/creating-a-time-lapsed-heatmap-of-nyc-cab-pickup-locations-in-python-fef773b31427", "anchor_text": "Creating a Time-Lapsed Heatmap of NYC Cab Pickup Locations in Python"}, {"url": "https://medium.com/tag/geospatial-data?source=post_page-----698943c18fed---------------geospatial_data-----------------", "anchor_text": "Geospatial Data"}, {"url": "https://medium.com/tag/k-means?source=post_page-----698943c18fed---------------k_means-----------------", "anchor_text": "K Means"}, {"url": "https://medium.com/tag/geopandas?source=post_page-----698943c18fed---------------geopandas-----------------", "anchor_text": "Geopandas"}, {"url": "https://medium.com/tag/visualization?source=post_page-----698943c18fed---------------visualization-----------------", "anchor_text": "Visualization"}, {"url": "https://medium.com/tag/editors-pick?source=post_page-----698943c18fed---------------editors_pick-----------------", "anchor_text": "Editors Pick"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F698943c18fed&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffinding-and-visualizing-clusters-of-geospatial-data-698943c18fed&user=Claudia+Ng&userId=ba2da7b3b9c8&source=-----698943c18fed---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F698943c18fed&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffinding-and-visualizing-clusters-of-geospatial-data-698943c18fed&user=Claudia+Ng&userId=ba2da7b3b9c8&source=-----698943c18fed---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F698943c18fed&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffinding-and-visualizing-clusters-of-geospatial-data-698943c18fed&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----698943c18fed--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F698943c18fed&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffinding-and-visualizing-clusters-of-geospatial-data-698943c18fed&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----698943c18fed---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----698943c18fed--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----698943c18fed--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----698943c18fed--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----698943c18fed--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----698943c18fed--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----698943c18fed--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----698943c18fed--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----698943c18fed--------------------------------", "anchor_text": ""}, {"url": "https://ds-claudia.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://ds-claudia.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Claudia Ng"}, {"url": "https://ds-claudia.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "305 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fba2da7b3b9c8&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffinding-and-visualizing-clusters-of-geospatial-data-698943c18fed&user=Claudia+Ng&userId=ba2da7b3b9c8&source=post_page-ba2da7b3b9c8--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fe45964ac2d06&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffinding-and-visualizing-clusters-of-geospatial-data-698943c18fed&newsletterV3=ba2da7b3b9c8&newsletterV3Id=e45964ac2d06&user=Claudia+Ng&userId=ba2da7b3b9c8&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}