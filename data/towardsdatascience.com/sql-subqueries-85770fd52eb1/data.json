{"url": "https://towardsdatascience.com/sql-subqueries-85770fd52eb1", "time": 1682997416.877253, "path": "towardsdatascience.com/sql-subqueries-85770fd52eb1/", "webpage": {"metadata": {"title": "SQL Subqueries. Queries Within Queries to Find More\u2026 | by Randy Macaraeg | Towards Data Science", "h1": "SQL Subqueries", "description": "Every time I learn something new about SQL I start to find that there are so many applications that I am unaware of. After learning the basic syntax of queries and a few basic tools, I moved onto\u2026"}, "outgoing_paragraph_urls": [{"url": "https://github.com/rmacaraeg/SQL_lessons/tree/master/SQL_subqueries", "anchor_text": "GitHub", "paragraph_index": 0}, {"url": "https://medium.com/better-programming/a-gentle-introduction-to-sql-basics-in-python-b137651ed1ff", "anchor_text": "SQL Basics blog", "paragraph_index": 4}], "all_paragraphs": ["The code I used for this blog can be found on my GitHub.", "Every time I learn something new about SQL I start to find that there are so many applications that I am unaware of. After learning the basic syntax of queries and a few basic tools, I moved onto subqueries in SQL.", "Subqueries (aka inner queries or nested queries) are useful tools when you\u2019re performing multiple steps. It\u2019s feels Inception-like, since you\u2019re querying into queries.", "Subqueries can be used in several areas within the query, so today we\u2019ll cover using them in the most common areas: SELECT, FROM, and WHERE clauses.", "For these examples, we\u2019ll use the Chinook database which is also used in the SQL Basics blog.", "Let\u2019s set up the database file, libraries, and functions:", "The database is loaded and now we\u2019re ready to work with subqueries!", "Let\u2019s start with an example query and break down what\u2019s going on inside of it.", "First, the database runs the inner query, or the part within the parenthesis:", "This query goes into the genres table and pulls all rows whose name starts with \u201cr\u201d.", "You might notice that this subquery can stand on its own, and this is very important: your subquery must run on its own. Once this runs, the output acts as the underlying table for the outer query.", "Also, subqueries should almost always have names, which are added after the parenthesis. In this section we named the subquery thisisaname.", "After the subquery/inner query runs, the outer query takes action:", "This query looks just like a regular basic query now! Using the new thisisaname table, the outer query now searches for all data where the genreid is above 6. The end query will output two rows: Reggae and R&B/Soul.", "Side-note: In the SELECT and WHERE statements, since this is only one table we\u2019re working on we don\u2019t necessarily need to add the thisisaname name to the query and it would still output the same thing. It\u2019s still good form to use them, and this will make much more sense when using JOIN statements where you\u2019d be interacting between multiple tables.", "Now that we have a better understanding of subqueries in the WHERE statement, let\u2019s see what happens in the SELECT statement!", "Now let\u2019s see what we can do when we put nested queries in the SELECT statement. Here is the example of what one might look like:", "Similar to the example above, we\u2019ll start with the inner query and move outward.", "This subquery will take a full count of all rows in the tracks dataset, which is a total of 3503 rows.", "The COUNT functions in the outer query act differently from the one in the subquery. The COUNT in the outer query is counting the frequency of each individual composer using the GROUP BY clause. It also collects only the rows whose counts are above 30 and ignores any rows with missing composer names.", "The final output will give four rows with the composer name, the total count of each individual composer, and the frequency of each individual composer in comparison to the total table count of 3503.", "Hopefully I explained this well and that it makes sense. Lastly, let\u2019s see a subquery in the WHERE statement!", "Like the last examples, let\u2019s start with our full query:", "And as always, we start with the inner query:", "This query orders all of the hire dates in ascending order (by default) and takes the earliest 5 hire dates. Now, let\u2019s bring it back to the original query!", "The outer query now searches all the rows in the employees table and returns only the rows whose hire date is within the 5 hire dates found in the subquery. This returns 6 employees, some of the earliest in the company!", "I do appreciate you sticking around till the end and I hope you found some of this useful. Stay tuned for another SQL blog post coming soon!", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F85770fd52eb1&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsql-subqueries-85770fd52eb1&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsql-subqueries-85770fd52eb1&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsql-subqueries-85770fd52eb1&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsql-subqueries-85770fd52eb1&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----85770fd52eb1--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----85770fd52eb1--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@randysm?source=post_page-----85770fd52eb1--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@randysm?source=post_page-----85770fd52eb1--------------------------------", "anchor_text": "Randy Macaraeg"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F41571626b7fd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsql-subqueries-85770fd52eb1&user=Randy+Macaraeg&userId=41571626b7fd&source=post_page-41571626b7fd----85770fd52eb1---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F85770fd52eb1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsql-subqueries-85770fd52eb1&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F85770fd52eb1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsql-subqueries-85770fd52eb1&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@d3cima?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Henri L."}, {"url": "https://unsplash.com/?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Unsplash"}, {"url": "https://github.com/rmacaraeg/SQL_lessons/tree/master/SQL_subqueries", "anchor_text": "GitHub"}, {"url": "https://medium.com/better-programming/a-gentle-introduction-to-sql-basics-in-python-b137651ed1ff", "anchor_text": "SQL Basics blog"}, {"url": "https://medium.com/tag/sql?source=post_page-----85770fd52eb1---------------sql-----------------", "anchor_text": "Sql"}, {"url": "https://medium.com/tag/python?source=post_page-----85770fd52eb1---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/data-science?source=post_page-----85770fd52eb1---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/data-analysis?source=post_page-----85770fd52eb1---------------data_analysis-----------------", "anchor_text": "Data Analysis"}, {"url": "https://medium.com/tag/database?source=post_page-----85770fd52eb1---------------database-----------------", "anchor_text": "Database"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F85770fd52eb1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsql-subqueries-85770fd52eb1&user=Randy+Macaraeg&userId=41571626b7fd&source=-----85770fd52eb1---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F85770fd52eb1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsql-subqueries-85770fd52eb1&user=Randy+Macaraeg&userId=41571626b7fd&source=-----85770fd52eb1---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F85770fd52eb1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsql-subqueries-85770fd52eb1&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----85770fd52eb1--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F85770fd52eb1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsql-subqueries-85770fd52eb1&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----85770fd52eb1---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----85770fd52eb1--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----85770fd52eb1--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----85770fd52eb1--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----85770fd52eb1--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----85770fd52eb1--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----85770fd52eb1--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----85770fd52eb1--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----85770fd52eb1--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@randysm?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@randysm?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Randy Macaraeg"}, {"url": "https://medium.com/@randysm/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "276 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F41571626b7fd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsql-subqueries-85770fd52eb1&user=Randy+Macaraeg&userId=41571626b7fd&source=post_page-41571626b7fd--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F6290336f38d1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsql-subqueries-85770fd52eb1&newsletterV3=41571626b7fd&newsletterV3Id=6290336f38d1&user=Randy+Macaraeg&userId=41571626b7fd&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}