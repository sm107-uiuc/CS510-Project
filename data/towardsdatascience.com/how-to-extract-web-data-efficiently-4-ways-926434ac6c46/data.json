{"url": "https://towardsdatascience.com/how-to-extract-web-data-efficiently-4-ways-926434ac6c46", "time": 1683007271.1121368, "path": "towardsdatascience.com/how-to-extract-web-data-efficiently-4-ways-926434ac6c46/", "webpage": {"metadata": {"title": "How to Extract Web Data Efficiently: 4 Ways | by Melina Mackey | Towards Data Science", "h1": "How to Extract Web Data Efficiently: 4 Ways", "description": "As a programmer and frequent data user, I often struggle to find nice complete datasets to work with. Open-source databases are limited, and APIs can be expensive to use \u2014 not to mention the\u2026"}, "outgoing_paragraph_urls": [{"url": "http://tennisabstract.com/reports/atpRankings.html", "anchor_text": "tennisabstract.com", "paragraph_index": 4}, {"url": "https://pandas.pydata.org/pandas-docs/version/0.23.4/generated/pandas.read_html.html", "anchor_text": "read_html", "paragraph_index": 6}, {"url": "https://www.atptour.com/en/rankings/singles", "anchor_text": "website", "paragraph_index": 11}, {"url": "https://www.crummy.com/software/BeautifulSoup/bs4/doc/", "anchor_text": "here", "paragraph_index": 11}, {"url": "https://www.crummy.com/software/BeautifulSoup/bs4/doc/", "anchor_text": "docs", "paragraph_index": 12}, {"url": "https://www.ultimatetennisstatistics.com/rankingsTable", "anchor_text": "ultimatetennisstatistics.com", "paragraph_index": 14}, {"url": "http://tennisabstract.com/reports/atpRankings.html", "anchor_text": "tennisabstract.com", "paragraph_index": 18}], "all_paragraphs": ["As a programmer and frequent data user, I often struggle to find nice complete datasets to work with. Open-source databases are limited, and APIs can be expensive to use \u2014 not to mention the restrictions on the number of calls per minute, day, month etc.", "Over the course of several projects, I\u2019ve put together some essential ways to extract and import web data for Python (and Excel) users. I heavily rely on these methods for any project which requires sourcing my own data and importing it into a workspace.", "Finally, for non-coding projects, I\u2019ll demonstrate a valuable Excel tool which allows you to scrape formatted data from a webpage, automatically filling the values into a spreadsheet.", "Below are the four methods. I\u2019ll be illustrating each of them with the same target dataset in mind: ATP tennis player rankings, as of March 2020.", "One fantastic source for tennis data is tennisabstract.com. This is what the webpage looks like for official ATP rankings.", "Upon inspecting the HTML, the construction seems quite simple \u2014 there are four table tags, the last of which contains the player rankings listed row by row.", "When the data is already formatted nicely into an HTML table, the quickest way to retrieve it is using Pandas\u2019 read_html. This method simply reads a set of HTML tables into a list of DataFrame objects.", "Note: there is a string parameter, match, which ensures that only the tables containing text that matches the given string will be returned. This is useful for pages containing numerous HTML tables.", "Here are the top 200 players.", "However, it\u2019s not always that straightforward. Depending on the configuration, some websites forbid direct access using the read_html function, resulting in HTTP Error 403. In any case, what if you wanted to scrape data that are not formatted in a table?", "This is where a HTML parser like Beautiful Soup comes in handy.", "Let\u2019s try extracting the rankings from the official ATP website using Beautiful Soup. Installation instructions can be found here.", "With this short code, we now have the HTML of the webpage. We can get a list of all the tables using soup.find_all(\u201ctable\u201d). It\u2019s possible to locate one particular table by passing in its id \u2014 for that matter, any object on the page can be accessed via its HTML tag and by passing in unique attributes (see docs).", "After a bit of cleaning, we can organise the data into one list for the header and another for the player rows. All that remains is to store the info in a DataFrame.", "A third method is to extract data in JSON format. As an example, we\u2019ll retrieve the rankings from ultimatetennisstatistics.com.", "If you care to right-click and inspect the page, you\u2019ll see under the \u201cNetwork\u201d tab that a GET request is being made of type JSON.", "Simply clicking on the associated link yields the following page of JSON output.", "The JSON data can be read easily into Python using the requests and json libraries, and subsequently imported into a Pandas DataFrame. This simple function does the trick.", "Without a single line of code, you can download any HTML file into an Excel spreadsheet. I\u2019ll demonstrate this using the same rankings dataset from tennisabstract.com.", "And that\u2019s it! The data has now been imported and formatted neatly, with each value in its separate cell.", "These methods are essential for scraping web data and importing it into a more disposable format \u2014 from which you can clean, filter, model and visualise the data as seen fit.", "So if you\u2019re first instinct is to use an API, you might want to think again. Although in some cases it may be unavoidable, much online data can be accessed without using an API, sparing you the effort and expense of attaining an API key and wading through the documentation.", "I hope you find these tools useful in your next data analysis project.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Data explorer \ud83c\udf0f | Finance + CompSci undergrad"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F926434ac6c46&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-extract-web-data-efficiently-4-ways-926434ac6c46&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-extract-web-data-efficiently-4-ways-926434ac6c46&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-extract-web-data-efficiently-4-ways-926434ac6c46&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-extract-web-data-efficiently-4-ways-926434ac6c46&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----926434ac6c46--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----926434ac6c46--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@mackey.melina?source=post_page-----926434ac6c46--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@mackey.melina?source=post_page-----926434ac6c46--------------------------------", "anchor_text": "Melina Mackey"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fb6f0b758cb70&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-extract-web-data-efficiently-4-ways-926434ac6c46&user=Melina+Mackey&userId=b6f0b758cb70&source=post_page-b6f0b758cb70----926434ac6c46---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F926434ac6c46&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-extract-web-data-efficiently-4-ways-926434ac6c46&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F926434ac6c46&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-extract-web-data-efficiently-4-ways-926434ac6c46&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@goumbik?utm_source=medium&utm_medium=referral", "anchor_text": "Lukas Blazek"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "http://tennisabstract.com/reports/atpRankings.html", "anchor_text": "tennisabstract.com"}, {"url": "http://tennisabstract.com/reports/atpRankings.html", "anchor_text": "tennisabstract.com"}, {"url": "https://pandas.pydata.org/pandas-docs/version/0.23.4/generated/pandas.read_html.html", "anchor_text": "read_html"}, {"url": "http://tennisabstract.com/reports/atpRankings.html", "anchor_text": "http://tennisabstract.com/reports/atpRankings.html"}, {"url": "http://tennisabstract.com/reports/atpRankings.html", "anchor_text": "http://tennisabstract.com"}, {"url": "https://www.atptour.com/en/rankings/singles", "anchor_text": "website"}, {"url": "https://www.crummy.com/software/BeautifulSoup/bs4/doc/", "anchor_text": "here"}, {"url": "https://www.atptour.com/en/rankings/singles", "anchor_text": "https://www.atptour.com/en/rankings/singles\""}, {"url": "https://www.crummy.com/software/BeautifulSoup/bs4/doc/", "anchor_text": "docs"}, {"url": "https://www.atptour.com/en/rankings/singles", "anchor_text": "https://www.atptour.com"}, {"url": "https://www.ultimatetennisstatistics.com/rankingsTable", "anchor_text": "ultimatetennisstatistics.com"}, {"url": "https://www.ultimatetennisstatistics.com/rankingsTableTable?current=1&rowCount=-1&sort%5Brank%5D=asc&searchPhrase=&rankType=RANK&season=&date=&_=1589249780003", "anchor_text": "\"https://www.ultimatetennisstatistics.com/rankingsTableTable?current=1&rowCount=-1&sort%5Brank%5D=asc&searchPhrase=&rankType=RANK&season=&date=&_=1589249780003"}, {"url": "https://www.ultimatetennisstatistics.com/rankingsTable", "anchor_text": "ultimatetennisstatistics.com"}, {"url": "http://tennisabstract.com/reports/atpRankings.html", "anchor_text": "tennisabstract.com"}, {"url": "http://tennisabstract.com/reports/atpRankings.html", "anchor_text": "(tennisabstract.com"}, {"url": "http://tennisabstract.com/reports/atpRankings.html", "anchor_text": "(tennisabstract.com"}, {"url": "https://medium.com/tag/data-science?source=post_page-----926434ac6c46---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/python?source=post_page-----926434ac6c46---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/programming?source=post_page-----926434ac6c46---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/tag/technology?source=post_page-----926434ac6c46---------------technology-----------------", "anchor_text": "Technology"}, {"url": "https://medium.com/tag/data?source=post_page-----926434ac6c46---------------data-----------------", "anchor_text": "Data"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F926434ac6c46&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-extract-web-data-efficiently-4-ways-926434ac6c46&user=Melina+Mackey&userId=b6f0b758cb70&source=-----926434ac6c46---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F926434ac6c46&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-extract-web-data-efficiently-4-ways-926434ac6c46&user=Melina+Mackey&userId=b6f0b758cb70&source=-----926434ac6c46---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F926434ac6c46&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-extract-web-data-efficiently-4-ways-926434ac6c46&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----926434ac6c46--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F926434ac6c46&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-extract-web-data-efficiently-4-ways-926434ac6c46&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----926434ac6c46---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----926434ac6c46--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----926434ac6c46--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----926434ac6c46--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----926434ac6c46--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----926434ac6c46--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----926434ac6c46--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----926434ac6c46--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----926434ac6c46--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@mackey.melina?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@mackey.melina?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Melina Mackey"}, {"url": "https://medium.com/@mackey.melina/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "177 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fb6f0b758cb70&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-extract-web-data-efficiently-4-ways-926434ac6c46&user=Melina+Mackey&userId=b6f0b758cb70&source=post_page-b6f0b758cb70--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F2469c6db7e86&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-extract-web-data-efficiently-4-ways-926434ac6c46&newsletterV3=b6f0b758cb70&newsletterV3Id=2469c6db7e86&user=Melina+Mackey&userId=b6f0b758cb70&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}