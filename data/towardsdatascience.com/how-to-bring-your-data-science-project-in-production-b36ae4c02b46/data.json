{"url": "https://towardsdatascience.com/how-to-bring-your-data-science-project-in-production-b36ae4c02b46", "time": 1682994724.057361, "path": "towardsdatascience.com/how-to-bring-your-data-science-project-in-production-b36ae4c02b46/", "webpage": {"metadata": {"title": "How to bring your Data Science Project in production | by Ren\u00e9 Bremer | Towards Data Science", "h1": "How to bring your Data Science Project in production", "description": "A lot of companies struggle to bring their data science projects into production. A common issue is that the closer the model is to production, the harder it is to answer the following question\u2026"}, "outgoing_paragraph_urls": [{"url": "https://www.linkedin.com/in/pardeepsingla87", "anchor_text": "Pardeep Singla", "paragraph_index": 3}, {"url": "https://towardsdatascience.com/how-to-embed-security-in-your-azure-data-science-project-55ef3f2ab47", "anchor_text": "here", "paragraph_index": 8}, {"url": "https://towardsdatascience.com/how-to-troubleshoot-your-azure-data-science-project-in-production-5382b66cbaf9", "anchor_text": "blog", "paragraph_index": 8}, {"url": "https://cloudarchitected.com/2019/04/devops-in-azure-with-databricks-and-data-factory/", "anchor_text": "blog", "paragraph_index": 8}, {"url": "https://towardsdatascience.com/how-to-create-your-own-deep-learning-project-in-azure-509660d8297", "anchor_text": "deep learning", "paragraph_index": 10}, {"url": "https://docs.microsoft.com/en-us/azure/devops/organizations/projects/create-project?view=azure-devops&tabs=new-nav&viewFallbackFrom=vsts", "anchor_text": "this", "paragraph_index": 35}, {"url": "https://docs.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#secret-variables", "anchor_text": "secret variables", "paragraph_index": 40}, {"url": "https://towardsdatascience.com/how-to-embed-security-in-your-azure-data-science-project-55ef3f2ab47", "anchor_text": "tutorial", "paragraph_index": 40}, {"url": "https://www.getpostman.com/", "anchor_text": "Postman", "paragraph_index": 51}, {"url": "https://towardsdatascience.com/how-to-embed-security-in-your-azure-data-science-project-55ef3f2ab47", "anchor_text": "this", "paragraph_index": 54}], "all_paragraphs": ["A lot of companies struggle to bring their data science projects into production. A common issue is that the closer the model is to production, the harder it is to answer the following question:", "Having a build/release pipeline for data science projects can help to answer this question. It enables you to trace back that:", "This audit trail is essential for every model running in production and is required in a lot of industries, e.g. finance.", "Last update of blog/git repo: July 21, 2021. Credits to Pardeep Singla for fixing some breaking changes in Azure ML.", "I have learned that this blog/repo is regularly used in demos, tutorials, etc. Don\u2019t hesitate to contact me if you do so as well, I would love to know.", "In this tutorial, a build/release pipeline for a machine learning project is created as follows:", "The project can be depicted in the following high level overview:", "In the remainder of this blog, the following steps will be executed:", "The follow-up of the blog can be found here in which security is embedded in the build/release pipeline. Furthermore, the details of the audit trail are discussed in this blog. Finally, if you interested how to use Azure Databricks with Azure Data Factory, refer to this blog.", "The following resources are required in this tutorial:", "Azure Databricks is an Apache Spark-based analytics platform optimized for Azure. It can be used for many analytical workloads, amongst others machine learning and deep learning. In this step, the following is done:", "Start your Azure Databricks workspace and go to Cluster. Create a new cluster with the following settings (edit September 2020: in devOps pipeline, Databricks Runtime 6.6. is used, recommended to use this runtime version for interactive analysis in Databricks as well):", "Go to your Azure Databricks workspace, right-click and then select import. In the radio button, select to import the following notebook using URL:", "Select the notebook you imported in 4b and attach the notebook to the cluster you created in 4a. Make sure that the cluster is running and otherwise start it. Read the steps in the notebook, in which the data is explored and several settings and algorithms are tried to create a model that predicts the income class of a person. Walk through the notebook cell by cell by using shortcut SHIFT+ENTER.", "Azure Machine Learning Service (Azure ML) is a cloud service that you use to train, deploy, automate, and manage machine learning models. In this context, the model that was created in previous step will be added to your Azuere ML instance. The following steps will be executed", "Right click in your workspace and select to \u201ccreate library\u201d", "Select PyPi and then fill in: azureml-sdk[databricks]", "Finally, attach the library to the cluster.", "In the prevous part of this tutorial, a model was created in Azure Databricks. In this part you are going to add the created model to Azure Machine Learning Service.", "Go to your Databricks Service again, right click, select import and import the a notebook using the following URL:", "Again, make sure it is attached to a cluster and the cluster is running", "Subsequently, fill in the correct values for workspace, subscription_id and resource_grp. All values can be found in the overview tab of your Azure Machine Learning Service Workspace in the Azure Portal.", "Now run the notebook cell for cell by using shortcut SHIFT+ENTER.", "In cell 6, you will need to authenticate to Azure Machine Learning Service in the notebook. Follow the instruction in the notebook by opening the URL and enter the generated code to authenticate.", "In step 5b, a notebook was run in which the results were written to Azure Machine Learning Service. In this, the following was done:", "Go to you Azure ML instance. Select the experiment name that was used in the notebook (e.g. experiment_model_int).", "Now click on the experiment, click on the run and childrun you want to see the metrics.", "When you go to output, you will find the model artifact, which you can also download. The model artifact of the best run will be used as the base of the containter that is deployed using Azure DevOps in the next part of this tutorial.", "Azure DevOps is the tool to continuously build, test, and deploy your code to any platform and cloud. In chapter 6, an Azure DevOps will be created and prepared. The project will be prepared using the following steps:", "In chapter 7, the actual build-release pipeline will be created and run to create an endpoint of the model.", "To run Notebooks in Azure Databricks triggered from Azure DevOps (using REST APIs), a Databrics Access Token (PAT) is required for authentication.", "Go to Azure Databricks and click to the person icon in the upper right corner. Select User Settings and then generate a new token.", "Make sure to copy the token now. You won\u2019t be able to see it again. Token is needed to access Databricks from the Azure DevOps build pipeline later", "In this step, a test and production environment is created in Azure Kubernetes Services (AKS). Typically, these are 2 separate AKS environments, however, for simplicity and cost savings only environment is created. First, go to to you Azure ML Service Workspace and select Compute. Take as compute name blog-devai-aks and select Kubernetes Service as compute type, see also below.", "Creating an AKS cluster takes approximately 10 minutes. Continue to the next step.", "Create a new project in Azure DevOps by following this tutorial. Once you create a new project, click on the repository folder and select to import the following repository:", "A Service connection is needed to access the resources in the resource group from Azure DevOps. Go to project settings, service connection and then select Azure Resource Manager.", "Select Service Principal Authentication and limit scope to your resource group in which your Machine Learning Workspace Service is deployed. Make sure that you name the connection as follows: devopsaisec_service_connection.", "In the Repos you created in the previous step, the following files shall be changed:", "With the same variables for workspace, subscription_id and resource with values of your Machine Learning Service Workspace as in step 5b. Also, fill in your Databricks Personal Access Token generated in step 6a.", "The files can be changed in Azure DevOps by looking up the file in the Repos, click on \u201cedit\u201d, change the variables and then \u201ccommit\u201d the file. You can also clone the project and work from there. Notice that in a production situation, keys must never be added to a code. Instead, secret variables in an Azure DevOps pipeline shall be used and is dealt with in this follow-up tutorial.", "In this chapter, an Azure DevOps project is created and prepared. Now the model is ready to be built and released in the Azure DevOps project.", "In this part, the model is built and released in the Azure DevOps using the following steps:", "In this step, you are going to create a build-release pipeline. Go to Azure DevOps project you have created in 6c and then click on Pipelines. A wizard is shown in which your Azure Repos Git shall be selected, see also below.", "Subsequently, select your Git repo attached to this project and then select \u201cExisting Azure Pipelines YAML file\u201d. Then browse the directory \\project\\configcode_build_release_aci_only.yml or \\project\\configcode_build_release.yml in case an AKS cluster is created in step 6b, see also below.", "Finally review your pipeline and save your pipeline, see also below.", "In this chapter, the pipeline was configured. In this pipeline the following steps will be executed:", "In the next part, the pipeline will be run.", "In this step, the build-release pipeline will be run in Azure DevOps. Go to your pipeline deployed in the previous step, select the pipeline and then select queue, see also below.", "When the pipeline is started, a docker image is created containing an ML model using Azure Databricks and Azure ML in the build step. Subsequently, the docker image is deployed/released in ACI and AKS. A successful run can be seen below.", "Notice that if you decided to not deploy the docker image in AKS, the previous steps will still be executed and the AKS step will fail. For detailed logging, you can click on the various steps.", "When you go to the Azure ML Workspace, you can find the endpoints of the models you deployed in 7b. These endpoints will now be consumed by Postman to create predictions. An example payload can be found in the project/services/50_testEndpoint.py in the project. In this example, the income class of three persons is predicted.", "In this tutorial, an end to end pipeline for a machine learning project was created. In this:", "This way you can orchestrate and monitor the entire pipeline from idea to the moment that the model is brought into production. This enables you to answer to question: Why did the model predict this?", "The architecture overview can be found below. In this follow-up tutorial, security of the pipeline is enhanced.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Data Solution Architect @ Microsoft, working with Azure services as ADFv2, ADLSgen2, Azure DevOps, Databricks, Function Apps and SQL. Opinions here are mine."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fb36ae4c02b46&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-bring-your-data-science-project-in-production-b36ae4c02b46&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-bring-your-data-science-project-in-production-b36ae4c02b46&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-bring-your-data-science-project-in-production-b36ae4c02b46&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-bring-your-data-science-project-in-production-b36ae4c02b46&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----b36ae4c02b46--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----b36ae4c02b46--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://rebremer.medium.com/?source=post_page-----b36ae4c02b46--------------------------------", "anchor_text": ""}, {"url": "https://rebremer.medium.com/?source=post_page-----b36ae4c02b46--------------------------------", "anchor_text": "Ren\u00e9 Bremer"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F11e5e7fb3771&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-bring-your-data-science-project-in-production-b36ae4c02b46&user=Ren%C3%A9+Bremer&userId=11e5e7fb3771&source=post_page-11e5e7fb3771----b36ae4c02b46---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fb36ae4c02b46&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-bring-your-data-science-project-in-production-b36ae4c02b46&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fb36ae4c02b46&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-bring-your-data-science-project-in-production-b36ae4c02b46&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://www.linkedin.com/in/pardeepsingla87", "anchor_text": "Pardeep Singla"}, {"url": "https://towardsdatascience.com/how-to-embed-security-in-your-azure-data-science-project-55ef3f2ab47", "anchor_text": "here"}, {"url": "https://towardsdatascience.com/how-to-troubleshoot-your-azure-data-science-project-in-production-5382b66cbaf9", "anchor_text": "blog"}, {"url": "https://cloudarchitected.com/2019/04/devops-in-azure-with-databricks-and-data-factory/", "anchor_text": "blog"}, {"url": "https://docs.azuredatabricks.net/getting-started/try-databricks.html#step-2-create-a-databricks-workspace", "anchor_text": "Azure Databricks"}, {"url": "https://docs.microsoft.com/en-us/azure/machine-learning/service/quickstart-get-started#create-a-workspace", "anchor_text": "Azure Machine Learning Service"}, {"url": "https://visualstudio.microsoft.com/team-services/", "anchor_text": "Azure DevOps"}, {"url": "https://towardsdatascience.com/how-to-create-your-own-deep-learning-project-in-azure-509660d8297", "anchor_text": "deep learning"}, {"url": "https://raw.githubusercontent.com/rebremer/devopsai_databricks/master/project/modelling/1_IncomeNotebookExploration.py", "anchor_text": "https://raw.githubusercontent.com/rebremer/devopsai_databricks/master/project/modelling/1_IncomeNotebookExploration.py"}, {"url": "https://raw.githubusercontent.com/rebremer/devopsai_databricks/master/project/modelling/2_IncomeNotebookAMLS.py", "anchor_text": "https://raw.githubusercontent.com/rebremer/devopsai_databricks/master/project/modelling/2_IncomeNotebookAMLS.py"}, {"url": "https://docs.microsoft.com/en-us/azure/devops/organizations/projects/create-project?view=azure-devops&tabs=new-nav&viewFallbackFrom=vsts", "anchor_text": "this"}, {"url": "https://github.com/rebremer/devopsai_databricks.git", "anchor_text": "https://github.com/rebremer/devopsai_databricks.git"}, {"url": "https://docs.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#secret-variables", "anchor_text": "secret variables"}, {"url": "https://towardsdatascience.com/how-to-embed-security-in-your-azure-data-science-project-55ef3f2ab47", "anchor_text": "tutorial"}, {"url": "https://www.getpostman.com/", "anchor_text": "Postman"}, {"url": "https://towardsdatascience.com/how-to-embed-security-in-your-azure-data-science-project-55ef3f2ab47", "anchor_text": "this"}, {"url": "https://medium.com/tag/azure?source=post_page-----b36ae4c02b46---------------azure-----------------", "anchor_text": "Azure"}, {"url": "https://medium.com/tag/azure-databricks?source=post_page-----b36ae4c02b46---------------azure_databricks-----------------", "anchor_text": "Azure Databricks"}, {"url": "https://medium.com/tag/continuous-integration?source=post_page-----b36ae4c02b46---------------continuous_integration-----------------", "anchor_text": "Continuous Integration"}, {"url": "https://medium.com/tag/data-science?source=post_page-----b36ae4c02b46---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----b36ae4c02b46---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fb36ae4c02b46&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-bring-your-data-science-project-in-production-b36ae4c02b46&user=Ren%C3%A9+Bremer&userId=11e5e7fb3771&source=-----b36ae4c02b46---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fb36ae4c02b46&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-bring-your-data-science-project-in-production-b36ae4c02b46&user=Ren%C3%A9+Bremer&userId=11e5e7fb3771&source=-----b36ae4c02b46---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fb36ae4c02b46&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-bring-your-data-science-project-in-production-b36ae4c02b46&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----b36ae4c02b46--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fb36ae4c02b46&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-bring-your-data-science-project-in-production-b36ae4c02b46&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----b36ae4c02b46---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----b36ae4c02b46--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----b36ae4c02b46--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----b36ae4c02b46--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----b36ae4c02b46--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----b36ae4c02b46--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----b36ae4c02b46--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----b36ae4c02b46--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----b36ae4c02b46--------------------------------", "anchor_text": ""}, {"url": "https://rebremer.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://rebremer.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Ren\u00e9 Bremer"}, {"url": "https://rebremer.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "731 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F11e5e7fb3771&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-bring-your-data-science-project-in-production-b36ae4c02b46&user=Ren%C3%A9+Bremer&userId=11e5e7fb3771&source=post_page-11e5e7fb3771--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fed36bca8eb16&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-bring-your-data-science-project-in-production-b36ae4c02b46&newsletterV3=11e5e7fb3771&newsletterV3Id=ed36bca8eb16&user=Ren%C3%A9+Bremer&userId=11e5e7fb3771&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}