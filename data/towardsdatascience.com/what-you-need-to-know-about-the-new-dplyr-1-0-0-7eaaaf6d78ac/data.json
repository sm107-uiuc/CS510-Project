{"url": "https://towardsdatascience.com/what-you-need-to-know-about-the-new-dplyr-1-0-0-7eaaaf6d78ac", "time": 1683005863.5707111, "path": "towardsdatascience.com/what-you-need-to-know-about-the-new-dplyr-1-0-0-7eaaaf6d78ac/", "webpage": {"metadata": {"title": "The Seven Key Things You Need To Know About dplyr 1.0.0 | by Keith McNulty | Towards Data Science", "h1": "The Seven Key Things You Need To Know About dplyr 1.0.0", "description": "Anyone who codes in R knows about dplyr. It's really the defining package of R, and is designed to make operations on dataframes more intuitive to those that buy into the principles of 'tidy data'\u2026"}, "outgoing_paragraph_urls": [{"url": "https://tidyselect.r-lib.org/reference/select_helpers.html", "anchor_text": "here", "paragraph_index": 5}, {"url": "https://www.linkedin.com/in/keith-mcnulty/", "anchor_text": "LinkedIn", "paragraph_index": 34}, {"url": "https://twitter.com/dr_keithmcnulty", "anchor_text": "Twitter", "paragraph_index": 34}, {"url": "http://drkeithmcnulty.com/", "anchor_text": "drkeithmcnulty.com", "paragraph_index": 34}, {"url": "http://keithmcnulty.org", "anchor_text": "keithmcnulty.org", "paragraph_index": 36}], "all_paragraphs": ["Anyone who codes in R knows about dplyr. It's really the defining package of R, and is designed to make operations on dataframes more intuitive to those that buy into the principles of 'tidy data' (which would be most data scientists, I suspect). In fact, many people can code in dplyr better than they can code in R base. That's how central dplyr has become in the R ecosystem, along with the other packages that currently make up the tidyverse.", "So the fact that a new version has been released is exciting for most R users. The fact that it\u2019s version 1.0.0 means it\u2019s a real event. Hadley Wickham and the team of open-source developers behind dplyr would not give it this version number lightly. A huge amount of effort has gone into superpowering dplyr 's functionality by making it more powerful, by unifying a number of previously distinct functions under a more abstracted umbrella, and above all in trying to offer more day-to-day users solutions to their most common dataframe-wrangling problems.", "dplyr 1.0.0 can now be installed using install.packages(\"dplyr\"). You may need to update your R version to ensure that this update installs. I recommend upgrading to R 4.0.0 in any case.", "In this article I\u2019m going to move through the major new features in increasing order of complexity by my reckoning. I\u2019ll use built in datasets \u2014 mostly mtcars \u2014 to demonstrate what I mean.", "You can now use tidyselect helper functions inside certain dplyr verbs. For example:", "tidyselect helper functions like this work inside any selecting function, including some new ones that we will look at later. You can find the full range of tidyselect functions here.", "Often people want a specific order to the columns in their dataframe, and previously the only way to do that was to order the columns within a select() verb, and that was tedious if there was a lot of columns involved.", "By default relocate will move your column or columns to the left of the dataframe. If you want to move them to a specific place, you can use the .before or .after arguments. For example:", "Summarise \u2014 the original workhorse of dplyr \u2013 has been made even more flexible in this new release. First, it can now return vectors to form multiple rows in the output. Second, it can return dataframes to form multiple rows and columns in the output. This might be a little mind-bending for some, so I\u2019ll spend a little time on it here to illustrate how this could work.", "If you want to summarise a function that creates a vector output, this is now easy. For example you can easily summarise a range:", "You could then combine with tidyr::pivot_wider() if you wish:", "This would provide the equivalent of:", "The second option in this case is much easier, but where this comes in useful is where you have longer outputs. Here\u2019s one simple way you could compute deciles:", "Now your summarise output can be a dataframe. Let\u2019s look at a simple example. Recently I wrote a function that identified all unique unordered pairs of elements in a vector. Now I want to apply that to map a network of connections between characters of Friends based on appearing in the same scene.", "Here\u2019s a simple version of a dataframe I might be working from:", "Now I\u2019m going to write my function which accepts a vector and which produces a two column dataframe, and apply it by scene:", "As you might see, the dataframe which is the output of my summarise() function has been unpacked and forms two columns in the final output. What happens if we name the output of our summarise() function?", "So this is an important watchout. If you want your summarise() output unpacked, don\u2019t name it.", "With these more powerful summarise capabilities, and with the in-built tidyselect toolkit, this sets us up for much more powerful and abstracted capabilities to work with the columns of our data and form a wider range of tasks. The introduction of the new across() adverb enables this.", "In short, the new function across() operates across multiple columns and multiple functions within existing dplyr verbs such as summarise() or mutate(). This makes it extremely powerful and time-saving. There is now no longer any need for the scoped variants such as summarise_at(), mutate_if(), etc.", "First, you can replicate summarise_at() by manually defining a set of columns to summarise using a character vector of column names, or by using column numbers:", "across() is a selecting function, and so you can use the tidyselect syntax inside it. You can replicate mutate_if() by using a function to select your columns. Here we turn the name and status columns in the dplyr::storms dataset from character to factor.", "You can also apply multiple named functions to your multiple columns by using a list. The across() function will by default glue your function and column names together with an underscore:", "And if you want to use a different glueing formula, you can do so using glue syntax:", "If you need to add optional arguments into your functions, you can use formulas:", "And similarly you can use formulas to combine functions to avoid unnecessary extra mutating:", "dplyr previously had limited friendliness to working across rows. It previously behaved somewhat counter-intuitively when you wanted to sum or average across values in the same row. Here\u2019s an example, which some of you might recognize as being a source of a previous headache:", "This has returned the average of everything in every column in your dataframe, which is of course not what was intended.", "Previously the only solution to this was to use manual calculations and to avoid using functions in this way, so you would write (N.Amer + Europe + Asia + S.Amer + Oceania + Africa + Mid.Amer)/7 which was pretty darn tedious.", "rowwise() creates a different structure called a rowwise_df which prepares your data to perform operations across the rows \u2013 it basically groups your data by row.", "rowwise() is super-powered by the new c_across() adverb to allow you to work in a similar way to how you would work colwise with the across() adverb. Now you can write:", "The new rowwise_df object is designed to work with list-columns, which allow the storage of any type of data you want inside a column in a dataframe. Where I find this particularly valuable is where you want to run different models on subsets of your data according to the value of certain variables. Here\u2019s an example of how you can store different subsets of mtcars in a rowwise dataframe and then run a model on them.", "Of course, the developers behind dplyr 1.0.0 noticed the power of this row-wise modelling capability and so created the nest_by() function as a shortcut for the code above. nest_by(x) is equivalent of:", "So now you can do the modeling above using:", "Originally I was a Pure Mathematician, then I became a Psychometrician and a Data Scientist. I am passionate about applying the rigor of all those disciplines to complex people questions. I\u2019m also a coding geek and a massive fan of Japanese RPGs. Find me on LinkedIn or on Twitter. Also check out my blog on drkeithmcnulty.com.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Expert and Author in Applied Mathematics, Data Science, Statistics. Also writes History, Science, Culture. Find me on Twitter or keithmcnulty.org"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F7eaaaf6d78ac&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-you-need-to-know-about-the-new-dplyr-1-0-0-7eaaaf6d78ac&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-you-need-to-know-about-the-new-dplyr-1-0-0-7eaaaf6d78ac&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-you-need-to-know-about-the-new-dplyr-1-0-0-7eaaaf6d78ac&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-you-need-to-know-about-the-new-dplyr-1-0-0-7eaaaf6d78ac&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----7eaaaf6d78ac--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----7eaaaf6d78ac--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://keith-mcnulty.medium.com/?source=post_page-----7eaaaf6d78ac--------------------------------", "anchor_text": ""}, {"url": "https://keith-mcnulty.medium.com/?source=post_page-----7eaaaf6d78ac--------------------------------", "anchor_text": "Keith McNulty"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fa859aab532a0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-you-need-to-know-about-the-new-dplyr-1-0-0-7eaaaf6d78ac&user=Keith+McNulty&userId=a859aab532a0&source=post_page-a859aab532a0----7eaaaf6d78ac---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F7eaaaf6d78ac&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-you-need-to-know-about-the-new-dplyr-1-0-0-7eaaaf6d78ac&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F7eaaaf6d78ac&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-you-need-to-know-about-the-new-dplyr-1-0-0-7eaaaf6d78ac&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://tidyselect.r-lib.org/reference/select_helpers.html", "anchor_text": "here"}, {"url": "https://www.linkedin.com/in/keith-mcnulty/", "anchor_text": "LinkedIn"}, {"url": "https://twitter.com/dr_keithmcnulty", "anchor_text": "Twitter"}, {"url": "http://drkeithmcnulty.com/", "anchor_text": "drkeithmcnulty.com"}, {"url": "https://medium.com/tag/data-science?source=post_page-----7eaaaf6d78ac---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/programming?source=post_page-----7eaaaf6d78ac---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/tag/learning?source=post_page-----7eaaaf6d78ac---------------learning-----------------", "anchor_text": "Learning"}, {"url": "https://medium.com/tag/updates?source=post_page-----7eaaaf6d78ac---------------updates-----------------", "anchor_text": "Updates"}, {"url": "https://medium.com/tag/data?source=post_page-----7eaaaf6d78ac---------------data-----------------", "anchor_text": "Data"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F7eaaaf6d78ac&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-you-need-to-know-about-the-new-dplyr-1-0-0-7eaaaf6d78ac&user=Keith+McNulty&userId=a859aab532a0&source=-----7eaaaf6d78ac---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F7eaaaf6d78ac&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-you-need-to-know-about-the-new-dplyr-1-0-0-7eaaaf6d78ac&user=Keith+McNulty&userId=a859aab532a0&source=-----7eaaaf6d78ac---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F7eaaaf6d78ac&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-you-need-to-know-about-the-new-dplyr-1-0-0-7eaaaf6d78ac&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----7eaaaf6d78ac--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F7eaaaf6d78ac&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-you-need-to-know-about-the-new-dplyr-1-0-0-7eaaaf6d78ac&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----7eaaaf6d78ac---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----7eaaaf6d78ac--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----7eaaaf6d78ac--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----7eaaaf6d78ac--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----7eaaaf6d78ac--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----7eaaaf6d78ac--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----7eaaaf6d78ac--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----7eaaaf6d78ac--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----7eaaaf6d78ac--------------------------------", "anchor_text": ""}, {"url": "https://keith-mcnulty.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://keith-mcnulty.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Keith McNulty"}, {"url": "https://keith-mcnulty.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "11K Followers"}, {"url": "http://keithmcnulty.org", "anchor_text": "keithmcnulty.org"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fa859aab532a0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-you-need-to-know-about-the-new-dplyr-1-0-0-7eaaaf6d78ac&user=Keith+McNulty&userId=a859aab532a0&source=post_page-a859aab532a0--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F7991b3dbcee9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-you-need-to-know-about-the-new-dplyr-1-0-0-7eaaaf6d78ac&newsletterV3=a859aab532a0&newsletterV3Id=7991b3dbcee9&user=Keith+McNulty&userId=a859aab532a0&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://peopleanalytics-regression-book.org/", "anchor_text": "Handbook of Regression Modeling in People Analytics2021"}, {"url": "https://ona-book.org", "anchor_text": "Handbook of Graphs and Networks in People Analytics2022"}, {"url": "https://medium.com/@keith-mcnulty/books?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "See all (2)"}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}