{"url": "https://towardsdatascience.com/how-gin-indices-can-make-your-postgres-queries-15x-faster-af7a195a3fc5", "time": 1683005228.4133, "path": "towardsdatascience.com/how-gin-indices-can-make-your-postgres-queries-15x-faster-af7a195a3fc5/", "webpage": {"metadata": {"title": "How GIN Indices Can Make Your Postgres Queries 15x Faster | by GreekDataGuy | Towards Data Science", "h1": "How GIN Indices Can Make Your Postgres Queries 15x Faster", "description": "Adding an index has improved query time from minutes to milliseconds more than I can count during my career. As data scientists, we spend A LOT of time querying and analyzing data so we should know\u2026"}, "outgoing_paragraph_urls": [{"url": "http://gmail.com", "anchor_text": "gmail.com", "paragraph_index": 19}], "all_paragraphs": ["Adding an index has improved query time from minutes to milliseconds more than I can count during my career. As data scientists, we spend A LOT of time querying and analyzing data so we should know how to do it efficiently.", "Postgres has 6 index types. Today we\u2019re covering GIN indices.", "We\u2019re going to seed a database with increasingly large amounts of data and compare query time with and without a GIN index. You\u2019ll benefit more if you follow along in your SQL editor (I\u2019m using DBeaver).", "A data structure that makes retrieving data from a database more efficient at the cost of slower insert speeds and more disk space.", "GIN stands for Generalized Inverted Index. In general, an inverted index maps words to its position in a table.", "Below is an abstraction I drew of an inverted index.", "If we wanted to find sentences in the table with the word lazy without an index, we\u2019d need to iterate over every sentence in the table looking for matches.", "But by adding an index, we know in advance which sentences contain the word lazy and can load those directly. This makes things a lot faster!", "This type of index is good for querying composite datatypes, meaning they store more than 1 value. Examples are hStores, Arrays, Ranges and JSONs.", "Start by creating a table and populating it with data.", "Awesome we now have a table called articles with 100k records, and 2 columns of random strings.", "If you\u2019re curious about the index. We didn\u2019t index strings directly but used Postgres\u2019s gin_trgm_ops to create trigrams (think ngrams in sklearn) from each string, and indexed that.", "The table looks like this in my SQL editor.", "I\u2019m going to track query time after each 100k new records I add.", "The same or a similar query run multiple times can vary in run time. This is due varying system load on your machine and changing query plans. For our purposes ignore fluctuations and look at general trends of time differences.", "Wow! That\u2019s a big difference on only 2 million records. Imagine we were querying on a database of billions.", "Most of the time we just need to add a B-tree index. But sometimes another index like GIN is more appropriate. Just knowing that other index types are out there can be useful when you eventually come across a problem B-trees don\u2019t solve.", "Have you come across any cool use cases of indices or applied them in interesting ways?", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Just a developer. Contact: greek.data.guy \u201cat\u201d gmail.com"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Faf7a195a3fc5&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-gin-indices-can-make-your-postgres-queries-15x-faster-af7a195a3fc5&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-gin-indices-can-make-your-postgres-queries-15x-faster-af7a195a3fc5&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-gin-indices-can-make-your-postgres-queries-15x-faster-af7a195a3fc5&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-gin-indices-can-make-your-postgres-queries-15x-faster-af7a195a3fc5&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----af7a195a3fc5--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----af7a195a3fc5--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://greekdataguy.medium.com/?source=post_page-----af7a195a3fc5--------------------------------", "anchor_text": ""}, {"url": "https://greekdataguy.medium.com/?source=post_page-----af7a195a3fc5--------------------------------", "anchor_text": "GreekDataGuy"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fd67bf018ae6d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-gin-indices-can-make-your-postgres-queries-15x-faster-af7a195a3fc5&user=GreekDataGuy&userId=d67bf018ae6d&source=post_page-d67bf018ae6d----af7a195a3fc5---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Faf7a195a3fc5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-gin-indices-can-make-your-postgres-queries-15x-faster-af7a195a3fc5&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Faf7a195a3fc5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-gin-indices-can-make-your-postgres-queries-15x-faster-af7a195a3fc5&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://medium.com/tag/data-science?source=post_page-----af7a195a3fc5---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/database?source=post_page-----af7a195a3fc5---------------database-----------------", "anchor_text": "Database"}, {"url": "https://medium.com/tag/sql?source=post_page-----af7a195a3fc5---------------sql-----------------", "anchor_text": "Sql"}, {"url": "https://medium.com/tag/postgres?source=post_page-----af7a195a3fc5---------------postgres-----------------", "anchor_text": "Postgres"}, {"url": "https://medium.com/tag/software-engineering?source=post_page-----af7a195a3fc5---------------software_engineering-----------------", "anchor_text": "Software Engineering"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Faf7a195a3fc5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-gin-indices-can-make-your-postgres-queries-15x-faster-af7a195a3fc5&user=GreekDataGuy&userId=d67bf018ae6d&source=-----af7a195a3fc5---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Faf7a195a3fc5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-gin-indices-can-make-your-postgres-queries-15x-faster-af7a195a3fc5&user=GreekDataGuy&userId=d67bf018ae6d&source=-----af7a195a3fc5---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Faf7a195a3fc5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-gin-indices-can-make-your-postgres-queries-15x-faster-af7a195a3fc5&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----af7a195a3fc5--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Faf7a195a3fc5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-gin-indices-can-make-your-postgres-queries-15x-faster-af7a195a3fc5&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----af7a195a3fc5---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----af7a195a3fc5--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----af7a195a3fc5--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----af7a195a3fc5--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----af7a195a3fc5--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----af7a195a3fc5--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----af7a195a3fc5--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----af7a195a3fc5--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----af7a195a3fc5--------------------------------", "anchor_text": ""}, {"url": "https://greekdataguy.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://greekdataguy.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "GreekDataGuy"}, {"url": "https://greekdataguy.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "9.97K Followers"}, {"url": "http://gmail.com", "anchor_text": "gmail.com"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fd67bf018ae6d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-gin-indices-can-make-your-postgres-queries-15x-faster-af7a195a3fc5&user=GreekDataGuy&userId=d67bf018ae6d&source=post_page-d67bf018ae6d--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F26b33036e2a7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-gin-indices-can-make-your-postgres-queries-15x-faster-af7a195a3fc5&newsletterV3=d67bf018ae6d&newsletterV3Id=26b33036e2a7&user=GreekDataGuy&userId=d67bf018ae6d&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}