{"url": "https://towardsdatascience.com/who-is-your-golden-goose-cohort-analysis-50c9de5dbd31", "time": 1682994505.7316391, "path": "towardsdatascience.com/who-is-your-golden-goose-cohort-analysis-50c9de5dbd31/", "webpage": {"metadata": {"title": "Who Is Your Golden Goose?: Cohort Analysis | by Jiwon Jeong | Towards Data Science", "h1": "Who Is Your Golden Goose?: Cohort Analysis", "description": "Customer segmentation is the technique of diving customers into groups based on their purchase patterns to identify who are the most profitable groups. In segmenting customers, various criteria can\u2026"}, "outgoing_paragraph_urls": [{"url": "https://www.kaggle.com/jihyeseo/online-retail-data-set-from-uci-ml-repo", "anchor_text": "online retail dataset", "paragraph_index": 1}, {"url": "https://github.com/jjone36/Cohort/blob/master/Cohort_Anaylsis_Medium.ipynb", "anchor_text": "Github", "paragraph_index": 1}, {"url": "https://www.datacamp.com/courses/customer-segmentation-in-python", "anchor_text": "Customer Segmentation Analysis in Python", "paragraph_index": 1}, {"url": "https://en.wikipedia.org/wiki/K-means_clustering", "anchor_text": "K-Means clustering", "paragraph_index": 16}, {"url": "https://www.youtube.com/watch?v=_aWzGGNrcic", "anchor_text": "video", "paragraph_index": 18}, {"url": "https://en.wikipedia.org/wiki/Heat_map", "anchor_text": "Heat maps", "paragraph_index": 31}, {"url": "https://www.linkedin.com/in/jiwon-jeong/", "anchor_text": "LinkedIn", "paragraph_index": 35}, {"url": "https://www.linkedin.com/in/jiwon-jeong/", "anchor_text": "https://www.linkedin.com/in/jiwon-jeong/", "paragraph_index": 37}], "all_paragraphs": ["Customer segmentation is the technique of diving customers into groups based on their purchase patterns to identify who are the most profitable groups. In segmenting customers, various criteria can also be used depending on the market such as geographic, demographic characteristics or behavior bases. This technique assumes that groups with different features require different approaches to marketing and wants to figure out the groups who can boost their profitability the most.", "Today, we are going to discuss how to do customer segmentation analysis with the online retail dataset from UCI ML repo. This analysis will be focused on two steps getting the RFM values and making clusters with K-means algorithms. The dataset and the full code is also available on my Github. The original resource of this note is from the course \u201cCustomer Segmentation Analysis in Python.\u201d", "RFM is an acronym of recency, frequency and monetary. Recency is about when was the last order of a customer. It means the number of days since a customer made the last purchase. If it\u2019s a case for a website or an app, this could be interpreted as the last visit day or the last login time.", "Frequency is about the number of purchase in a given period. It could be 3 months, 6 months or 1 year. So we can understand this value as for how often or how many a customer used the product of a company. The bigger the value is, the more engaged the customers are. Could we say them as our VIP? Not necessary. Cause we also have to think about how much they actually paid for each purchase, which means monetary value.", "Monetary is the total amount of money a customer spent in that given period. Therefore big spenders will be differentiated with other customers such as MVP or VIP.", "These three values are commonly used quantifiable factors in cohort analysis. Because of their simple and intuitive concept, they are popular among other customer segmentation methods.", "So we are going to apply RFM to our cohort analysis today. The dataset we are going to use is the transaction history data occurring from Jan 2010 to Sep 2011. As this is a tutorial guideline for cohort analysis, I\u2019m going to use only the randomly selected fraction of the original dataset.", "The first thing we\u2019re going to count is the recency value, the number of days since the last order of a customer. From which column could we get that value? InvoiceData. With this column, we can get when was the first purchase and when was the last purchase of a customer. Let\u2019s call the first one as CohortDay. As InvoiceDate also contains additional time data, we need to extract the year, month and day part. After that, we\u2019ll get CohortDay which is the minimum of InvoiceDay.", "As we randomly chose the subset of the data, we also need to know the time period of our data. Like what you can see below, the final day of our dataset is December 9th, 2011. Therefore set December 10th as our pining date and count backward the number of days from the latest purchase for each customer. That will be the recency value.", "Before getting the recency, let\u2019s count one more value in advance, the total amount of money each customer spent. This is for counting the monetary value. How can we get that? Easy! Multiplying the product price and the quantity of the order in each row.", "Now we are ready to get the three RFM values at once. I\u2019ll group the data for each customer and aggregate it for each recency, frequency, and monetary value.", "Now we\u2019ll group the customers based on RFM values. Cause these are continuous values, we can also use the quantile values and divide them into 4 groups.", "Please pay extra care for the r_labels. I gave the labels in descending order. Why is that? Because recency means how much time has elapsed since a customer\u2019s last order. Therefore the smaller the value is, the more engaged a customer to that brand. Now let\u2019s make a new column for indicating group labels.", "I attached all three labels in one cell as RFM_Segment. In this way, we can easily check what level or segment a customer belongs to. RFM_Score is the total sum of the three values. It doesn\u2019t necessarily have to be the sum so the mean value is also possible. Moreover, we can catch further patterns with the mean or count values of recency, frequency and monetary grouped by this score like below.", "RFM_Score will be the total score of a customer\u2019s engagement or loyalty. Summing up the three values altogether, we can finally categorize customers into \u2018Gold,\u2019 \u2018Silver,\u2019 \u2018Bronze,\u2019 and \u2018Green\u2019.", "Great! We\u2019re done with one cohort analysis with RFM values. We identified who is our golden goose and where we should take extra care. Now why don\u2019t we try a different method for customer segmentation and compare the two results?", "K-Means clustering is one type of unsupervised learning algorithms, which makes groups based on the distance between the points. How? There are two concepts of distance in K-Means clustering. Within Cluster Sums of Squares (WSS) and Between Cluster Sums of Squares (BSS).", "WSS means the sum of distances between the points and the corresponding centroids for each cluster and BSS means the sum of distances between the centroids and the total sample mean multiplied by the number of points within each cluster. So you can consider WSS as the measure of compactness and BSS as the measure of separation. For clustering to be successful, we need to get the lower WSS and the higher BSS.", "By iterating and moving the cluster centroids, K-Means algorithm tries to get the optimized points of the centroid, which minimize the value of WSS and maximize the value of BSS. I won\u2019t go more in-depth with the basic concept, but you can find a further explanation from video.", "Because K-means clustering uses the distance as the similarity factor, we need to scale the data. Suppose we have two different scales of features, say height and weight. Height is over 150cm and weight is below 100kg on average. So If we plot this data, the distance between the points will be highly dominated by height resulting in a biased analysis.", "Therefore when it comes to K-means clustering, scaling and normalizing data is a critical step for preprocessing. If we check the distribution of RFM values, you can notice that they are right-skewed. It\u2019s not a good state to use without standardization. Let\u2019s transform the RFM values into log scaled first and then normalize them.", "The values below or equal to zero go negative infinite when they are in log scale, I made a function to convert those values into 1 and applied it to Recency and Monetary column, using list comprehension like above. And then, a log transformation is applied for each RFM values. The next preprocessing step is scaling but it\u2019s simpler than the previous step. Using StandardScaler(), we can get the standardized values like below.", "The plot on the left is the distributions of RFM before preprocessing, and the plot on the right is the distributions of RFM after normalization. By making them in the somewhat normal distribution, we can give hints to our model to grasp the trends between values easily and accurately. Now, we are done with preprocessing.", "What is the next? The next step will be selecting the right number of clusters. We have to choose how many groups we\u2019re going to make. If there is prior knowledge, we can just give the number right ahead to the algorithm. But most of the case in unsupervised learning, there isn\u2019t. So we need to choose the optimized number, and the Elbow method is one of the solutions where we can get the hints.", "Using for loop, I built the models for every number of clusters from 1 to 10. And then collect the WSS values for each model. Look at the plot below. As the number of clusters increases, the value of WSS decreases. There is no surprise cause the more clusters we make, the size of each cluster will decrease so the sum of the distances within each cluster will decrease. Then what is the optimal number?", "The answer is at the \u2018Elbow\u2019 of this line. Somewhere WSS dramatically decrease but not too much K. My choice here is three. What do you say? Doesn\u2019t it really look like an elbow of the line?", "Now we chose the number of clusters, we can build a model and make actual clusters like below. We can also check the distance between each point and the centroids or the labels of the clusters. Let\u2019s make a new column and assign the labels to each customer.", "Now we made two kinds of segmentation, RFM quantile groups and K-Means groups. Let\u2019s make visualization and compare the two methods.", "I\u2019m going to make two kinds of plot, a line plot and a heat map. We can easily compare the differences of RFM values with these two plots. Firstly, I\u2019ll make columns to assign the two clustering labels. And then reshape the data frame by melting the RFM values into one column.", "This will make recency, frequency and monetary categories as observations, which allows us to plot the values in one plot. Put Metrics at x-axis and Value at y-axis and group the values by RFM_Level. Repeat the same code which groups the values by K_Cluster this time. The outcome would be like below.", "This kind of plots is called \u2018Snake plot\u2019 especially in marketing analysis. It seems Gold and Green groups on the left plot are similar with 1 and 2 clusters on the right plot. And the Bronze and Silver groups seem to be merged into group 0.", "Let\u2019s try again with a heat map. Heat maps are a graphical representation of data where larger values were colored in darker scales and smaller values in lighter scales. We can compare the variance between the groups quite intuitively by colors.", "And then repeat the same code for K-clusters as we did before.", "It could be seen unmatching, especially at the top of the plots. But It\u2019s just because of the different order. The Green group on the left will correspond to group 2. If you see the values inside each box, you can see the difference between the groups become significant for Gold and 1 group. And it could be easily recognized by the darkness of the color.", "We talked about how to get RFM values from customer purchase data, and we made two kinds of segmentation with RFM quantiles and K-Means clustering methods. With this result, we can now figure out who are our \u2018golden\u2019 customers, the most profitable groups. This also tells us on which customer to focus on and to whom give special offers or promotions for fostering loyalty among customers. We can select the best communication channel for each segment and improve new marketing strategies.", "Thank you for reading and hope you found this post interesting. If there is something need to be corrected, please share your insight! If you\u2019d like to encourage an aspiring data scientist, please hit \ud83d\udc4f \ud83d\udc4f \ud83d\udc4f! I\u2019m always open to talk so feel free to leave comments or contact me on LinkedIn. I\u2019ll come back with another exciting project. Until then, happy machine learning!", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Data Science Researcher / Data geek \ud83e\udd13 Bookworm \ud83d\udcda Travel lover \ud83c\udf0f LinkedIn: https://www.linkedin.com/in/jiwon-jeong/"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F50c9de5dbd31&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwho-is-your-golden-goose-cohort-analysis-50c9de5dbd31&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwho-is-your-golden-goose-cohort-analysis-50c9de5dbd31&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwho-is-your-golden-goose-cohort-analysis-50c9de5dbd31&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwho-is-your-golden-goose-cohort-analysis-50c9de5dbd31&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----50c9de5dbd31--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----50c9de5dbd31--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@jiwon.jeong?source=post_page-----50c9de5dbd31--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@jiwon.jeong?source=post_page-----50c9de5dbd31--------------------------------", "anchor_text": "Jiwon Jeong"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F1df293b5ca56&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwho-is-your-golden-goose-cohort-analysis-50c9de5dbd31&user=Jiwon+Jeong&userId=1df293b5ca56&source=post_page-1df293b5ca56----50c9de5dbd31---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F50c9de5dbd31&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwho-is-your-golden-goose-cohort-analysis-50c9de5dbd31&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F50c9de5dbd31&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwho-is-your-golden-goose-cohort-analysis-50c9de5dbd31&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://www.kaggle.com/jihyeseo/online-retail-data-set-from-uci-ml-repo", "anchor_text": "online retail dataset"}, {"url": "https://github.com/jjone36/Cohort/blob/master/Cohort_Anaylsis_Medium.ipynb", "anchor_text": "Github"}, {"url": "https://www.datacamp.com/courses/customer-segmentation-in-python", "anchor_text": "Customer Segmentation Analysis in Python"}, {"url": "https://en.wikipedia.org/wiki/K-means_clustering", "anchor_text": "K-Means clustering"}, {"url": "https://www.youtube.com/watch?v=_aWzGGNrcic", "anchor_text": "video"}, {"url": "https://en.wikipedia.org/wiki/Heat_map", "anchor_text": "Heat maps"}, {"url": "https://clevertap.com/blog/rfm-analysis/", "anchor_text": "https://clevertap.com/blog/rfm-analysis/"}, {"url": "https://www.optimove.com/learning-center/rfm-segmentation", "anchor_text": "https://www.optimove.com/learning-center/rfm-segmentation"}, {"url": "https://www.youtube.com/watch?v=_aWzGGNrcic", "anchor_text": "https://www.youtube.com/watch?v=_aWzGGNrcic"}, {"url": "https://www.linkedin.com/in/jiwon-jeong/", "anchor_text": "LinkedIn"}, {"url": "https://medium.com/tag/data-science?source=post_page-----50c9de5dbd31---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/customer-segmentation?source=post_page-----50c9de5dbd31---------------customer_segmentation-----------------", "anchor_text": "Customer Segmentation"}, {"url": "https://medium.com/tag/clustering?source=post_page-----50c9de5dbd31---------------clustering-----------------", "anchor_text": "Clustering"}, {"url": "https://medium.com/tag/marketing-strategies?source=post_page-----50c9de5dbd31---------------marketing_strategies-----------------", "anchor_text": "Marketing Strategies"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----50c9de5dbd31---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F50c9de5dbd31&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwho-is-your-golden-goose-cohort-analysis-50c9de5dbd31&user=Jiwon+Jeong&userId=1df293b5ca56&source=-----50c9de5dbd31---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F50c9de5dbd31&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwho-is-your-golden-goose-cohort-analysis-50c9de5dbd31&user=Jiwon+Jeong&userId=1df293b5ca56&source=-----50c9de5dbd31---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F50c9de5dbd31&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwho-is-your-golden-goose-cohort-analysis-50c9de5dbd31&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----50c9de5dbd31--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F50c9de5dbd31&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwho-is-your-golden-goose-cohort-analysis-50c9de5dbd31&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----50c9de5dbd31---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----50c9de5dbd31--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----50c9de5dbd31--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----50c9de5dbd31--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----50c9de5dbd31--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----50c9de5dbd31--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----50c9de5dbd31--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----50c9de5dbd31--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----50c9de5dbd31--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@jiwon.jeong?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@jiwon.jeong?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Jiwon Jeong"}, {"url": "https://medium.com/@jiwon.jeong/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "1.4K Followers"}, {"url": "https://www.linkedin.com/in/jiwon-jeong/", "anchor_text": "https://www.linkedin.com/in/jiwon-jeong/"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F1df293b5ca56&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwho-is-your-golden-goose-cohort-analysis-50c9de5dbd31&user=Jiwon+Jeong&userId=1df293b5ca56&source=post_page-1df293b5ca56--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fd0a222fc96e6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwho-is-your-golden-goose-cohort-analysis-50c9de5dbd31&newsletterV3=1df293b5ca56&newsletterV3Id=d0a222fc96e6&user=Jiwon+Jeong&userId=1df293b5ca56&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}