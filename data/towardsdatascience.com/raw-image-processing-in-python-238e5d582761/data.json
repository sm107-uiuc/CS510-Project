{"url": "https://towardsdatascience.com/raw-image-processing-in-python-238e5d582761", "time": 1683018410.232161, "path": "towardsdatascience.com/raw-image-processing-in-python-238e5d582761/", "webpage": {"metadata": {"title": "Raw Image Processing in Python. Preprocessing raw images for machine\u2026 | by Aryansh Omray | Towards Data Science", "h1": "Raw Image Processing in Python", "description": "Almost all modern-day cameras capture raw format images and process them in a format commonly known as sRGB, suitable for humans to see. However, one might wonder what all the techniques are used to\u2026"}, "outgoing_paragraph_urls": [], "all_paragraphs": ["Almost all modern-day cameras capture raw format images and process them in a format commonly known as sRGB, suitable for humans to see. However, one might wonder what all the techniques are used to convert the raw images into sRGB format are? Why was it necessary? Also, one might wonder how to use raw images or process them in a certain manner to get better performance on some machine learning tasks. This article attempts to answer all such questions in addition to step-by-step python code for each process.", "Most of the filters on social media apps such as Snapchat, Instagram, etc., use machine learning. The machine learning algorithm behind those filters uses raw images to process the filter\u2019s image to give real-time results. So, it becomes increasingly important to know what raw image and how it is processed by the camera while designing an algorithm that uses raw images.", "A raw image can be defined as a minimally processed image captured by a camera. It is yet to be processed by the software methods to process background noise, contrast, black level, etc. The raw image is unpleasant to the human eye in most cases and needed to be processed to be pleasant to see. How is a raw image is captured in a camera, and how does the camera sensor work?", "The image sensor can be considered a circuit consisting of a surface used to capture the camera\u2019s shutter\u2019s electromagnetic waves or when the sensor is exposed to light. The sensor\u2019s surface captures the intensity of the electromagnetic waves, aka light, that is incident on the surface at the time of capture. The surface can be considered a 2D array in which each element stores the light incident\u2019s intensity. But, by storing only the light\u2019s intensities, the sensor cannot comprehend the colors in the light. So, how does the sensor detect the colors in the scene?", "For detecting the color in a sensor, various techniques are used; one of the most common and most widely used is the Bayer-filter sensor and discussed here.", "A Bayer filter is used to map the incoming electromagnetic signal into the RGB space by using a filtering technique. The incident light is filtered into Red, Green, and Blue colors using a wavelength filter before the light hits the sensor. Using this technique, the intensities of a particular color (in this case, red, green, and blue) can be known. The red, green, and blue intensities are stored alternately in the Bayer filter, as shown in the figure. The are other filter patterns used on some cameras, but the Bayer filter pattern is the most widely used one.", "A raw image a 2D array that consists of information about the light intensities at the various wavelength/colors. To obtain a color channel, we need to separate pixels of each color and combine them to make an image. However, one can easily see that the number of green pixels is double the color pixels. In this case, the value of adjacent green pixels is averaged to obtain a single value. Hence, for a raw image of H x W size, the final RGB image obtained is H/2 x W/2 x 3.", "The raw image file generally contains the image as a 2D array recorded on the image sensor after being passed from the Bayer filter. The file contains a large amount of metadata about the camera, aperture, lighting condition, etc. in the file, which helps during the image\u2019s postprocessing. Some common metadata types are the black level, white level, orientation, color space transform, etc., which are discussed in this article. All these steps need to be done on the image to convert it into the required format to maintain quality.", "The black level is defined as the intensity of the least intense/dark part of the image. It is necessary to calibrate the image\u2019s black level during postprocessing to obtain the perfect black pixels that are not present in the original raw images. Various algorithms are used to correct the black level in the images and are beyond this article\u2019s scope.", "In some cameras, the image is stored vertically inverted, so the metadata\u2019s orientation information helps correct the image in such cases. The lens in the camera projects the image into the sensor in an inverted form. Sometimes, it is also left-right flipped. The lens\u2019s orientation effect is generally corrected internally within the camera and doesn\u2019t need to be corrected during postprocessing.", "This is mostly the last step in any image processing pipeline. The processed image is transformed to the required color space, such as sRGB, YCrCb, Grayscale, etc., before being stored in the disk. The most commonly used color space is the sRGb color space. After performing the color space transformation, the images are stored on the disk in the form .png, .jpeg, etc., image storing formats.", "Camera pipelines are much more complex than the one we have discussed here, but the details discussed in this article are more than sufficient to start using raw image data in a machine learning pipeline.", "Feel free to ask questions in the comment section.", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F238e5d582761&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fraw-image-processing-in-python-238e5d582761&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fraw-image-processing-in-python-238e5d582761&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fraw-image-processing-in-python-238e5d582761&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fraw-image-processing-in-python-238e5d582761&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----238e5d582761--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----238e5d582761--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://aryanshomray.medium.com/?source=post_page-----238e5d582761--------------------------------", "anchor_text": ""}, {"url": "https://aryanshomray.medium.com/?source=post_page-----238e5d582761--------------------------------", "anchor_text": "Aryansh Omray"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F32a9125bbd21&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fraw-image-processing-in-python-238e5d582761&user=Aryansh+Omray&userId=32a9125bbd21&source=post_page-32a9125bbd21----238e5d582761---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F238e5d582761&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fraw-image-processing-in-python-238e5d582761&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F238e5d582761&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fraw-image-processing-in-python-238e5d582761&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@sharegrid?utm_source=medium&utm_medium=referral", "anchor_text": "ShareGrid"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://en.wikipedia.org/wiki/Bayer_filter", "anchor_text": "https://en.wikipedia.org/wiki/Bayer_filter"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----238e5d582761---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/tag/mathematics?source=post_page-----238e5d582761---------------mathematics-----------------", "anchor_text": "Mathematics"}, {"url": "https://medium.com/tag/photography?source=post_page-----238e5d582761---------------photography-----------------", "anchor_text": "Photography"}, {"url": "https://medium.com/tag/data-science?source=post_page-----238e5d582761---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/image?source=post_page-----238e5d582761---------------image-----------------", "anchor_text": "Image"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F238e5d582761&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fraw-image-processing-in-python-238e5d582761&user=Aryansh+Omray&userId=32a9125bbd21&source=-----238e5d582761---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F238e5d582761&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fraw-image-processing-in-python-238e5d582761&user=Aryansh+Omray&userId=32a9125bbd21&source=-----238e5d582761---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F238e5d582761&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fraw-image-processing-in-python-238e5d582761&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----238e5d582761--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F238e5d582761&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fraw-image-processing-in-python-238e5d582761&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----238e5d582761---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----238e5d582761--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----238e5d582761--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----238e5d582761--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----238e5d582761--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----238e5d582761--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----238e5d582761--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----238e5d582761--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----238e5d582761--------------------------------", "anchor_text": ""}, {"url": "https://aryanshomray.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://aryanshomray.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Aryansh Omray"}, {"url": "https://aryanshomray.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "166 Followers"}, {"url": "https://www.linkedin.com/in/aryansh-omray/", "anchor_text": "https://www.linkedin.com/in/aryansh-omray/"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F32a9125bbd21&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fraw-image-processing-in-python-238e5d582761&user=Aryansh+Omray&userId=32a9125bbd21&source=post_page-32a9125bbd21--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fa8a351031136&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fraw-image-processing-in-python-238e5d582761&newsletterV3=32a9125bbd21&newsletterV3Id=a8a351031136&user=Aryansh+Omray&userId=32a9125bbd21&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}