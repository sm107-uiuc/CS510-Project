{"url": "https://towardsdatascience.com/code-in-java-execute-as-c-921f5db45f20", "time": 1683004370.817461, "path": "towardsdatascience.com/code-in-java-execute-as-c-921f5db45f20/", "webpage": {"metadata": {"title": "Code in Java, Execute as C++.. How To Call Java Method From C++ Using\u2026 | by Dwi Prasetyo Adi Nugroho | Towards Data Science", "h1": "Code in Java, Execute as C++.", "description": "How to Call Java method from a C++ code using GraalVM Native Image without suffering tons of performance degradation."}, "outgoing_paragraph_urls": [{"url": "https://www.javaworld.com/article/2077513/java-tip-17--integrating-java-with-c--.html", "anchor_text": "a tutorial", "paragraph_index": 0}, {"url": "https://www.graalvm.org/", "anchor_text": "homepage", "paragraph_index": 1}, {"url": "https://github.com/google/guava", "anchor_text": "Google\u2019s Guava library", "paragraph_index": 3}, {"url": "https://github.com/dpanugroho/graalvm-java-method-embedding", "anchor_text": "this repository", "paragraph_index": 7}, {"url": "https://www.graalvm.org/docs/getting-started/", "anchor_text": "home page", "paragraph_index": 14}, {"url": "https://github.com/dpanugroho/graalvm-java-method-embedding", "anchor_text": "this repository", "paragraph_index": 14}, {"url": "http://dpanugroho.github.io", "anchor_text": "dpanugroho.github.io", "paragraph_index": 16}], "all_paragraphs": ["Java and C++ remain two of the most popular programming languages. The two languages have different designs and characteristics. Depending on the problem, one might work better than the other. However, at some point, we need to integrate these languages, e.g. calling a method written in Java to your C++ code. The need to integrate Java and C++ is not something new. In fact, we can find a tutorial dated back to 1996. Since then, the two languages have developed remarkably.", "In this tutorial, we are going to learn how to call a java method from a C++ using GraalVM native image. If this is the first time you heard about GraalVM, you might be interested in checking out their homepage. GraalVM is a virtual machine that you can use to run a Java application. It\u2019s based on JVM, but with additional features such as ahead of time compilation, fewer memory footprints, and other advanced optimizations. Additionally, GraalVM provides a native image plugin that you can use to compile a Java application to a native application. That means your application can run without requiring a JVM installed and running. Interestingly, you can also use this native image plugin to compile your Java application into a shared library and load it from your C++ code. This comes very handily when you code mainly written in C++ but you want to use an existing Java library on some part of it.", "Before diving into the tutorial, let\u2019s have a look at how this thing works. Basically, what you will do are the following:", "In this example, we will simulate a use case where you want to use a function from a third-party Java library on your C++ project. Particularly, we are interested to use one of the math functions from Google\u2019s Guava library.", "First, we need to set up a maven project for our java method. Building our project in maven helps us to import the dependencies as well as utilizing the GraalVM native image plugin to create the shared library. Once the project is created, add the dependencies to Guava library (or any library that you need) and the GraalVM library to your pom.xml file:", "Next, add the following plugin to build your java code to C++ shared library:", "Let\u2019s have a look at the bold parts. On the <finalName> tag, put a name that you want as the name of your library. Note the version that you specify on the <version> tag as you will need it later. On the <buildArgs>, we specify the shared and name parameter to instruct the GraalVM native image to create a shared library instead of a native executable. Put the same name as finalName on the Name parameter.", "Now let\u2019s prepare our Java method. Given an integer input x, we are interested to calculate the nearest power of 2 greater x. For example, if x is 14 it will return 16, as 16 is the nearest power of 2 greater than 14. Below is the snippet of our function. Note that we need to put an additional first parameter thread of type IsolateThread to bridge our Java and C++ execution. This parameter has to be in the first position. We also need to specify the name of the method in the CEntryPoint annotation. This is the method name that we will refer to in our C++ code. You can check the complete java project in this repository.", "Having our project set, we now need to run mvn package to compile our Java method to a shared library. However, as this functionality only available on GraalVM, we will need to set up the GraalVM and point our JAVA_HOME to the GraalVM binary. Therefore, you will need to do the following:", "Now you can call the mvn package install to build the shared library. It will generate several files: graal_isolate.h, graal_isolate_dynamic.h, libmymath.h, libmymath_dynamic.h, and libmymath.so (or in other formats in other OS). Aside from our own library, it will also generate Graal VM C++ libraries.", "Let\u2019s now use our shared library in the following simple C++ project. Put the generated file inside the directory of this C++ project. For example, you can create an include folder and put these files inside this folder.", "Compile the C++ code using the following command and try to run it.", "Note: you might need to set the includes directory to LD_LIBRARY_PATH using:", "Interoperability is an inevitable requirement in the world where programming languages are growing concurrently. The shared library feature of GraalVM Native Image provides an easy way to embed Java method to a C++ program, which enables the writing of complex user-defined functions and the use of the third-party library. A promising example might be on the development of a data processing framework that aims both high performance and high-level APIs.", "If you want to read more about GraalVM, head on to their home page. The full code for this tutorial is available in this repository.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Data Engineer | Passionate in Large Scale Data Analytics research such as streaming system, query optimizer, and other related topics. | dpanugroho.github.io"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F921f5db45f20&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcode-in-java-execute-as-c-921f5db45f20&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcode-in-java-execute-as-c-921f5db45f20&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcode-in-java-execute-as-c-921f5db45f20&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcode-in-java-execute-as-c-921f5db45f20&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----921f5db45f20--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----921f5db45f20--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@dpanugroho?source=post_page-----921f5db45f20--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@dpanugroho?source=post_page-----921f5db45f20--------------------------------", "anchor_text": "Dwi Prasetyo Adi Nugroho"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F5d88f06dde58&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcode-in-java-execute-as-c-921f5db45f20&user=Dwi+Prasetyo+Adi+Nugroho&userId=5d88f06dde58&source=post_page-5d88f06dde58----921f5db45f20---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F921f5db45f20&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcode-in-java-execute-as-c-921f5db45f20&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F921f5db45f20&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcode-in-java-execute-as-c-921f5db45f20&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@maximilianweisbecker?utm_source=medium&utm_medium=referral", "anchor_text": "Maximilian Weisbecker"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://www.javaworld.com/article/2077513/java-tip-17--integrating-java-with-c--.html", "anchor_text": "a tutorial"}, {"url": "https://www.graalvm.org/", "anchor_text": "homepage"}, {"url": "https://github.com/google/guava", "anchor_text": "Google\u2019s Guava library"}, {"url": "https://github.com/dpanugroho/graalvm-java-method-embedding", "anchor_text": "this repository"}, {"url": "https://github.com/graalvm/graalvm-ce-builds/releases", "anchor_text": "Download GraalVM"}, {"url": "https://www.graalvm.org/docs/getting-started/", "anchor_text": "home page"}, {"url": "https://github.com/dpanugroho/graalvm-java-method-embedding", "anchor_text": "this repository"}, {"url": "https://medium.com/tag/programming?source=post_page-----921f5db45f20---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/tag/java?source=post_page-----921f5db45f20---------------java-----------------", "anchor_text": "Java"}, {"url": "https://medium.com/tag/cpp?source=post_page-----921f5db45f20---------------cpp-----------------", "anchor_text": "Cpp"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F921f5db45f20&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcode-in-java-execute-as-c-921f5db45f20&user=Dwi+Prasetyo+Adi+Nugroho&userId=5d88f06dde58&source=-----921f5db45f20---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F921f5db45f20&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcode-in-java-execute-as-c-921f5db45f20&user=Dwi+Prasetyo+Adi+Nugroho&userId=5d88f06dde58&source=-----921f5db45f20---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F921f5db45f20&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcode-in-java-execute-as-c-921f5db45f20&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----921f5db45f20--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F921f5db45f20&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcode-in-java-execute-as-c-921f5db45f20&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----921f5db45f20---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----921f5db45f20--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----921f5db45f20--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----921f5db45f20--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----921f5db45f20--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----921f5db45f20--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----921f5db45f20--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----921f5db45f20--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----921f5db45f20--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@dpanugroho?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@dpanugroho?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Dwi Prasetyo Adi Nugroho"}, {"url": "https://medium.com/@dpanugroho/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "31 Followers"}, {"url": "http://dpanugroho.github.io", "anchor_text": "dpanugroho.github.io"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F5d88f06dde58&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcode-in-java-execute-as-c-921f5db45f20&user=Dwi+Prasetyo+Adi+Nugroho&userId=5d88f06dde58&source=post_page-5d88f06dde58--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F1524abc18857&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcode-in-java-execute-as-c-921f5db45f20&newsletterV3=5d88f06dde58&newsletterV3Id=1524abc18857&user=Dwi+Prasetyo+Adi+Nugroho&userId=5d88f06dde58&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}