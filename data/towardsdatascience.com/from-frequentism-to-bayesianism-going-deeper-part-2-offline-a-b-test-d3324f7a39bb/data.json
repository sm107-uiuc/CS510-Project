{"url": "https://towardsdatascience.com/from-frequentism-to-bayesianism-going-deeper-part-2-offline-a-b-test-d3324f7a39bb", "time": 1683003313.214926, "path": "towardsdatascience.com/from-frequentism-to-bayesianism-going-deeper-part-2-offline-a-b-test-d3324f7a39bb/", "webpage": {"metadata": {"title": "Why you should use Bayesian approaches in your Offline A/B tests | by Alain Tanguy | Towards Data Science", "h1": "Why you should use Bayesian approaches in your Offline A/B tests", "description": "A first introduction to the importance of Bayesian approaches in classic statistics can be found here, and a more advanced application there! Hypothesis testing is a central topic in statistics with\u2026"}, "outgoing_paragraph_urls": [{"url": "https://towardsdatascience.com/from-frequentism-to-bayesianism-hypothesis-testing-a-simple-illustration-11213232e551", "anchor_text": "here", "paragraph_index": 0}, {"url": "https://towardsdatascience.com/bayesian-hierarchical-modeling-or-more-reasons-why-automl-cannot-replace-data-scientists-yet-d01e7d571d3d", "anchor_text": "there", "paragraph_index": 0}, {"url": "https://en.wikipedia.org/wiki/Randomized_experiment", "anchor_text": "randomized experiment", "paragraph_index": 3}, {"url": "https://en.wikipedia.org/wiki/Fisher%27s_exact_test", "anchor_text": "Fisher\u2019s exact test", "paragraph_index": 9}, {"url": "https://en.wikipedia.org/wiki/Barnard%27s_test", "anchor_text": "Barnard\u2019s test", "paragraph_index": 9}, {"url": "https://towardsdatascience.com/from-frequentism-to-bayesianism-hypothesis-testing-a-simple-illustration-11213232e551", "anchor_text": "Here", "paragraph_index": 13}], "all_paragraphs": ["A first introduction to the importance of Bayesian approaches in classic statistics can be found here, and a more advanced application there!", "Hypothesis testing is a central topic in statistics with a wide range of applications which exceed the limits of mathematics and extend to most scientific domains, if not all.", "We are going to highlitght the limitations of regular statistical frequentists approches and present a relevant bayesian framework to solve one of the most common situations data scientists working in retail or marketing may encounter: A/B testing.", "A/B testing (also known as bucket tests or split-run testing) is a randomized experiment with two variants, A and B. It is a way to compare two versions of a single variable, typically by testing a subject\u2019s response to variant A against variant B, and determining which of the two variants is more effective.[Wikipedia]", "Maybe we want to test a new design for our website, new features, or even new strategies for targeting our customers (mailing, RTB, etc.), in order to measure which one would lead to the highest ROI. For the sake of clarity, we\u2019ll consider the case of an advertiser trying to improve the conversion rate using one of two creatives A and B: each interaction of an ad with a user can be seen as a Bernoulli Trial with exactly two possible outcomes, \u201cconversion\u201d and \u201cno conversion\u201d, depending on the user buying our product after being shown the ad or not.", "Two designs can be considered to run this experiment:", "For this story only the Offline case will be adressed as the Onlive A/B testing problems requires drastically different solutions.", "We consider the case of a test being run for a weak, with each user being shown creative A or B with a probability of 0.5, and directly converting with an unknown proba p_A=0.04 or p_B=0.05.", "A first difficulty quickly arises: what test should we use in order to determine if a creative is significantly better than the other? Common tests are summarized in the following table, and it is up to us to pick the one that suits our problem the best.", "In our case, Fisher\u2019s exact test and Barnard\u2019s test seem to be the most relevant as we focus on conversion rates obtained from a Binomial Distribution, though a Chi-Squared test could have been used given the quantity of observations we will have access to in the experiment.", "We will use Fisher test which has the characteristic of belonging to the class of exact tests, so called because its p-value can be calculated exactly, with", "Good practice wants us to determine the statistical power of our test. It can be computed through simulation given how specifically our environment has been designed. Our target is 0.8, and the amount of observations we will use will be calibrated in order to reach that threshold. For convenience, we will only consider an alternative hypothesis \u201c(H1) \u201calternative hypothesis p_A=0.04 or p_B=0.05\u201d, which will allow us to easily compute the power of our test.", "Usually \u03b1= 0.05 is the limit accepted for the rejection region for the p-value, or in other words, the False Positive Rate. For this threshold a minimum average of 13500 observations will be required.", "We face a similar situation as the one we did Here, asking ourselves similar questions. What can we conclude from our test results and our p-value?", "I will not keep you in suspense any longer. The answer is No for both questions. We already understood that p-values were merely a probability of observing results at least as extreme under the hypothesis (H0). But this also highlights maybe the most important limitations of p-values:", "p-values are not measures of effect sizes! It doesn\u2019t give us any information on how much better creative A performed over B, even in case of a positive result!", "In order to extract knowledge about the effect size, frequentists can use another and more powerful tool: Confidence Intervals.", "Confidence Intervals represent the range of plausible values for an unknown parameter associated\u00a0with confidence level\u00a0that the true parameter is in the proposed range.", "As such CI give us much more understandable and rich insights, providing us with knowledge about the probability and uncertainty of our estimate to. Yet they carry their own share of drawbacks:", "We could for example use the \u201csimplest\u201d, namely the Wald method without continuity correction:", "With \ud835\udc5d\u0302 the empirical estimates for p_A et p_B, and z corresponding to the \u03b1/2-percentile of the normal distribution. Thus, for a 95% CI (ie, \u03b1=0.05), the corresponding z value would be 1.96.", "A numerical application would give us the interval [0.0009 ; 0.0171] centered around 0.009 which doesnt overlap with 0 as we hoped for!", "For this part, we are going to use the PyMC3 library for python, allowing us to easily build Bayesian nonparametric models.", "It is important to remember that our objective as statisticians or data scientists is obviously to conceive accurate and relevant results, but also and just as importantly to generate KPIs that can be both shared and understood by any other stakeholders, even non-scientists ones, and that would carry as much information as possible. Bayesian approach gives us the tools to do so by allowing us to compute exactly what we are looking for: the posterior distributions of p_A and p_B, namely P(p_A|X) and P(p_B|X) as well as P(p_A \u2014 p_B > 0| X), ie. the probability of creative A to yield more conversions than creative B.", "Here the Bayesian modeling is once again pretty straightforward, since we already mathematically designed the environment, we just need to replicate it using bayesian language.", "The question of priors choice inevitably arises. We will pick uninformative uniform priors for p_A and p_B.", "We can compute a graphical representation of our Bayesian network as well:", "And as simply as that our work is over! All that remains for us is running an MCMC algorithm through the network to compute posterior distributions. Those will give us much more insights than the previous methods, since now we can yield confidence intervals for any \u03b1 level directly by sampling from the posteriors.", "(it is important to notice that delta cannot be computed from the posterior of p_A and p_B since p_A and p_B could be dependant)", "We can then simply compute the posterior probability of delta being inferior to 0:", "Here we get 0.956, which translate to a probability of 96% forcreative A to generate more conversions than creative B!", "But we can go further. Imagine shifting from design B to A is expensive, and it is establish that only an improvement of performances of 5% at least would be profitable. We have a way to compute this! Just insert a new deterministic variable Tau = p_A / p_B in our network and sample the posterior distribution.", "This time we get 0.91\u2026 Not as decisive as the 95% we usually hope for. If we need more confidence, we would just need to run the A/B test longer.", "For the frequentist approach, we had to choose a specific test and a specific way of calculating our Confidence Intervals, other tests and intervals computations would have given different values ; exactly the same way that different priors would have given us different posteriors.", "Bayesian Networks applications are numerous and A/B testing was merely the tip of the iceberg. It can be used for modeling and machine learning when it proves to be an extremely powerful tool, as you can read about in the article:", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Data Scientist working in numerous fields, ranging from marketing to insurance pricing, as well as logistics among other things, for 5 years."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fd3324f7a39bb&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffrom-frequentism-to-bayesianism-going-deeper-part-2-offline-a-b-test-d3324f7a39bb&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffrom-frequentism-to-bayesianism-going-deeper-part-2-offline-a-b-test-d3324f7a39bb&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffrom-frequentism-to-bayesianism-going-deeper-part-2-offline-a-b-test-d3324f7a39bb&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffrom-frequentism-to-bayesianism-going-deeper-part-2-offline-a-b-test-d3324f7a39bb&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----d3324f7a39bb--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----d3324f7a39bb--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@alain.tanguy?source=post_page-----d3324f7a39bb--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@alain.tanguy?source=post_page-----d3324f7a39bb--------------------------------", "anchor_text": "Alain Tanguy"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F95f2427cc046&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffrom-frequentism-to-bayesianism-going-deeper-part-2-offline-a-b-test-d3324f7a39bb&user=Alain+Tanguy&userId=95f2427cc046&source=post_page-95f2427cc046----d3324f7a39bb---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fd3324f7a39bb&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffrom-frequentism-to-bayesianism-going-deeper-part-2-offline-a-b-test-d3324f7a39bb&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fd3324f7a39bb&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffrom-frequentism-to-bayesianism-going-deeper-part-2-offline-a-b-test-d3324f7a39bb&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://towardsdatascience.com/tagged/frequentist-to-bayesian", "anchor_text": "From Frequentism to Bayesianism"}, {"url": "https://unsplash.com/@kmuza?utm_source=medium&utm_medium=referral", "anchor_text": "Carlos Muza"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://towardsdatascience.com/from-frequentism-to-bayesianism-hypothesis-testing-a-simple-illustration-11213232e551", "anchor_text": "here"}, {"url": "https://towardsdatascience.com/bayesian-hierarchical-modeling-or-more-reasons-why-automl-cannot-replace-data-scientists-yet-d01e7d571d3d", "anchor_text": "there"}, {"url": "https://en.wikipedia.org/wiki/Randomized_experiment", "anchor_text": "randomized experiment"}, {"url": "https://en.wikipedia.org/wiki/A/B_testing", "anchor_text": "Wikipedia"}, {"url": "https://en.wikipedia.org/wiki/Fisher%27s_exact_test", "anchor_text": "Fisher\u2019s exact test"}, {"url": "https://en.wikipedia.org/wiki/Barnard%27s_test", "anchor_text": "Barnard\u2019s test"}, {"url": "https://towardsdatascience.com/from-frequentism-to-bayesianism-hypothesis-testing-a-simple-illustration-11213232e551", "anchor_text": "Here"}, {"url": "https://en.wikipedia.org/wiki/Binomial_proportion_confidence_interval#Normal_approximation_interval", "anchor_text": "Confidence intervals for binomial distributions"}, {"url": "https://towardsdatascience.com/bayesian-hierarchical-modeling-or-more-reasons-why-automl-cannot-replace-data-scientists-yet-d01e7d571d3d", "anchor_text": "Bayesian Hierarchical Modeling (or \u201cmore reasons why autoML cannot replace Data Scientists yet\u201d)Bayesian networks allow us to model actual relations between covariates, compensating the lack of information provided\u2026towardsdatascience.com"}, {"url": "https://medium.com/tag/data-science?source=post_page-----d3324f7a39bb---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/frequentist-to-bayesian?source=post_page-----d3324f7a39bb---------------frequentist_to_bayesian-----------------", "anchor_text": "Frequentist To Bayesian"}, {"url": "https://medium.com/tag/towards-data-science?source=post_page-----d3324f7a39bb---------------towards_data_science-----------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/tag/programming?source=post_page-----d3324f7a39bb---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/tag/pymc3?source=post_page-----d3324f7a39bb---------------pymc3-----------------", "anchor_text": "Pymc3"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fd3324f7a39bb&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffrom-frequentism-to-bayesianism-going-deeper-part-2-offline-a-b-test-d3324f7a39bb&user=Alain+Tanguy&userId=95f2427cc046&source=-----d3324f7a39bb---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fd3324f7a39bb&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffrom-frequentism-to-bayesianism-going-deeper-part-2-offline-a-b-test-d3324f7a39bb&user=Alain+Tanguy&userId=95f2427cc046&source=-----d3324f7a39bb---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fd3324f7a39bb&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffrom-frequentism-to-bayesianism-going-deeper-part-2-offline-a-b-test-d3324f7a39bb&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----d3324f7a39bb--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fd3324f7a39bb&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffrom-frequentism-to-bayesianism-going-deeper-part-2-offline-a-b-test-d3324f7a39bb&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----d3324f7a39bb---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----d3324f7a39bb--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----d3324f7a39bb--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----d3324f7a39bb--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----d3324f7a39bb--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----d3324f7a39bb--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----d3324f7a39bb--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----d3324f7a39bb--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----d3324f7a39bb--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@alain.tanguy?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@alain.tanguy?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Alain Tanguy"}, {"url": "https://medium.com/@alain.tanguy/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "73 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F95f2427cc046&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffrom-frequentism-to-bayesianism-going-deeper-part-2-offline-a-b-test-d3324f7a39bb&user=Alain+Tanguy&userId=95f2427cc046&source=post_page-95f2427cc046--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fa8381887a56c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffrom-frequentism-to-bayesianism-going-deeper-part-2-offline-a-b-test-d3324f7a39bb&newsletterV3=95f2427cc046&newsletterV3Id=a8381887a56c&user=Alain+Tanguy&userId=95f2427cc046&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}