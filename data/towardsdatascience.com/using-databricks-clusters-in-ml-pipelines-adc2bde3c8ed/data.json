{"url": "https://towardsdatascience.com/using-databricks-clusters-in-ml-pipelines-adc2bde3c8ed", "time": 1683018425.937717, "path": "towardsdatascience.com/using-databricks-clusters-in-ml-pipelines-adc2bde3c8ed/", "webpage": {"metadata": {"title": "Using Databricks Clusters in ML Pipelines | by Nofar Mishraki | Towards Data Science", "h1": "Using Databricks Clusters in ML Pipelines", "description": "In this post I would like to describe my experience executing production Spark and ML jobs on Databricks job clusters. So far, I\u2019m a big fan of Databricks solutions since I find them so much better\u2026"}, "outgoing_paragraph_urls": [], "all_paragraphs": ["In this post I would like to describe my experience executing production Spark and ML jobs on Databricks job clusters.So far, I\u2019m a big fan of Databricks solutions since I find them so much better than the alternatives that I\u2019ve used , and no \u2014 I\u2019m not a Databricks employee.", "In my daily job, I develop an automated AI-based predictive analytics platform that simplifies and speeds the process of building and deploying predictive models.I\u2019ve spent my last two years building data and ML pipelines that includes data cleaning , structuring, feature engineering, training, evaluation, predictions and monitoring jobs.", "Two reasons made me start using Databricks:", "Since I\u2019ve started using Databrikcs, I\u2019ve found so many more powerful capabilities that I like, which I\u2019m going to discuss in this post.", "We developed a custom Databricks Airflow Operator for our needs, which we use to execute production jobs. This Airflow Operator creates one of two types of clusters for each job by its type and workload:", "Each one of the jobs gets a dedicated cluster that turns off right after the job finishes. It\u2019s possible running a lot of clusters in parallel in order to execute many independent jobs.", "The operator knows to execute each one of the jobs with the right parameters, on the right type of cluster, manage failures, retries and more.It\u2019s simple to create a cluster using Databricks REST API, this is an example request to create a Single Node Cluster:", "You can find additional information about the different parameters at the end of the post [1].", "Managed SparkSpark is already installed and configured, enables to create clusters on-demand quickly, manage them with ease and turn them off when the task is complete.", "Databricks RuntimeDatabricks offers a couple of available runtime configurations, for example \u201cDatabricks Runtime ML\u201d which automates the creation of a cluster optimized for machine learning.This configuration includes the most popular machine learning libraries, such as TensorFlow, PyTorch, Keras, XGBOOST, Scikit-Learn, Pandas and a lot more.It speeds up the cluster creation time, and I can \u201cstamp\u201d my jobs with a specific runtime configuration so that I can use it again in inference pipelines. It promises the same versions of libraries between the train pipeline and the predict pipeline, making them compatible with each other.", "Debugging is easyIt\u2019s possible to debug jobs using \u201cDatabricks-Connect\u201d [2]. It just need to be installed in the local virtual environment, and configured with the Databricks account details.It enables debugging jobs remotely on a cluster and become very helpful especially when we want to debug jobs on a lot of data that doesn\u2019t fit our local machine memory.", "Easy to use your own Python PackagesIt\u2019s possible to install Python packages on clusters and access them from our jobs. It makes it super easy to use internal package and common objects and code.It\u2019s possible to install packages from a couple of sources, and using the UI or API.", "Built in AWS and Azure integrationThere is an integration between Databricks and AWS and Databricks and Azure. We can use a single API to execute jobs on both of the clouds instead of building these integrations on our side.", "Notebooks and Data CatalogJupyter Notebooks are available, with pre-configured spark session and out-of-the-box visualization capabilities.It\u2019s also possible to execute heavy workloads easily and it\u2019s possible to save processed DataFrames to the data catalog and let other teams and colleagues access them using their notebooks.", "In this post, I briefly described why I like using Databricks Clusters as an infrastructure to run Spark jobs and train models.There are so many details I didn\u2019t describe since I wanted to give an overview of the subject without going too deep.If there is something specific that interests you, I would appreciate your comment, and I\u2019ll write about it in my next post.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "ML Engineer at Pecan | Ex \u2014 Unit 8200 | M.S.c Computer Science"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fadc2bde3c8ed&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-databricks-clusters-in-ml-pipelines-adc2bde3c8ed&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-databricks-clusters-in-ml-pipelines-adc2bde3c8ed&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-databricks-clusters-in-ml-pipelines-adc2bde3c8ed&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-databricks-clusters-in-ml-pipelines-adc2bde3c8ed&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----adc2bde3c8ed--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----adc2bde3c8ed--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://nofarm3.medium.com/?source=post_page-----adc2bde3c8ed--------------------------------", "anchor_text": ""}, {"url": "https://nofarm3.medium.com/?source=post_page-----adc2bde3c8ed--------------------------------", "anchor_text": "Nofar Mishraki"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F21dbc0e910be&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-databricks-clusters-in-ml-pipelines-adc2bde3c8ed&user=Nofar+Mishraki&userId=21dbc0e910be&source=post_page-21dbc0e910be----adc2bde3c8ed---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fadc2bde3c8ed&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-databricks-clusters-in-ml-pipelines-adc2bde3c8ed&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fadc2bde3c8ed&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-databricks-clusters-in-ml-pipelines-adc2bde3c8ed&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@mjessier?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Myriam Jessier"}, {"url": "https://unsplash.com/s/photos/predictive-analytics?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Unsplash"}, {"url": "https://docs.databricks.com/dev-tools/api/latest/jobs.html", "anchor_text": "https://docs.databricks.com/dev-tools/api/latest/jobs.html"}, {"url": "https://docs.databricks.com/dev-tools/databricks-connect.html", "anchor_text": "https://docs.databricks.com/dev-tools/databricks-connect.html"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----adc2bde3c8ed---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/tag/spark?source=post_page-----adc2bde3c8ed---------------spark-----------------", "anchor_text": "Spark"}, {"url": "https://medium.com/tag/data-science?source=post_page-----adc2bde3c8ed---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/ml-engineering?source=post_page-----adc2bde3c8ed---------------ml_engineering-----------------", "anchor_text": "ML Engineering"}, {"url": "https://medium.com/tag/data-engineering?source=post_page-----adc2bde3c8ed---------------data_engineering-----------------", "anchor_text": "Data Engineering"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fadc2bde3c8ed&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-databricks-clusters-in-ml-pipelines-adc2bde3c8ed&user=Nofar+Mishraki&userId=21dbc0e910be&source=-----adc2bde3c8ed---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fadc2bde3c8ed&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-databricks-clusters-in-ml-pipelines-adc2bde3c8ed&user=Nofar+Mishraki&userId=21dbc0e910be&source=-----adc2bde3c8ed---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fadc2bde3c8ed&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-databricks-clusters-in-ml-pipelines-adc2bde3c8ed&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----adc2bde3c8ed--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fadc2bde3c8ed&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-databricks-clusters-in-ml-pipelines-adc2bde3c8ed&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----adc2bde3c8ed---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----adc2bde3c8ed--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----adc2bde3c8ed--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----adc2bde3c8ed--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----adc2bde3c8ed--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----adc2bde3c8ed--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----adc2bde3c8ed--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----adc2bde3c8ed--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----adc2bde3c8ed--------------------------------", "anchor_text": ""}, {"url": "https://nofarm3.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://nofarm3.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Nofar Mishraki"}, {"url": "https://nofarm3.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "59 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F21dbc0e910be&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-databricks-clusters-in-ml-pipelines-adc2bde3c8ed&user=Nofar+Mishraki&userId=21dbc0e910be&source=post_page-21dbc0e910be--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fe905b9c6a608&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-databricks-clusters-in-ml-pipelines-adc2bde3c8ed&newsletterV3=21dbc0e910be&newsletterV3Id=e905b9c6a608&user=Nofar+Mishraki&userId=21dbc0e910be&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}