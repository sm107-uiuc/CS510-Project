{"url": "https://towardsdatascience.com/saving-95-on-infrastructure-costs-using-aws-lambda-for-scikit-learn-predictions-3ff260a6cd9d", "time": 1683011678.0490408, "path": "towardsdatascience.com/saving-95-on-infrastructure-costs-using-aws-lambda-for-scikit-learn-predictions-3ff260a6cd9d/", "webpage": {"metadata": {"title": "Saving 95% on infrastructure costs using AWS Lambda for scikit-learn predictions | by Yoav Zimmerman | Towards Data Science", "h1": "Saving 95% on infrastructure costs using AWS Lambda for scikit-learn predictions", "description": "If you\u2019re an AWS customer that needs to deploy machine learning models for real-time inference, you might have considered using AWS SageMaker Inference Endpoints. However, there is another option for\u2026"}, "outgoing_paragraph_urls": [{"url": "https://modelzoo.dev/", "anchor_text": "Model Zoo", "paragraph_index": 0}, {"url": "https://github.com/model-zoo/scikit-learn-lambda", "anchor_text": "scikit-learn-lambda", "paragraph_index": 1}, {"url": "https://aws.amazon.com/sagemaker/groundtruth/", "anchor_text": "AWS SageMaker Ground Truth", "paragraph_index": 2}, {"url": "https://docs.aws.amazon.com/sagemaker/latest/dg/monitoring-overview.html", "anchor_text": "AWS SageMaker Model Monitor", "paragraph_index": 2}, {"url": "https://docs.aws.amazon.com/sagemaker/latest/dg/inference-pipeline-batch.html", "anchor_text": "AWS Batch Transform", "paragraph_index": 2}, {"url": "https://aws.amazon.com/serverless/sam/", "anchor_text": "Serverless Application Model", "paragraph_index": 3}, {"url": "https://www.serverless.com/", "anchor_text": "Serverless framework", "paragraph_index": 3}, {"url": "https://pharmassess.ca/", "anchor_text": "PharmAssess", "paragraph_index": 4}, {"url": "https://colab.research.google.com/github/model-zoo/examples/blob/master/scikit-learn-quickstart/quickstart.ipynb", "anchor_text": "quickstart", "paragraph_index": 5}, {"url": "https://github.com/model-zoo/scikit-learn-lambda", "anchor_text": "scikit-learn-lambda", "paragraph_index": 6}, {"url": "https://scikit-learn.org/stable/modules/generated/sklearn.neural_network.MLPClassifier.html", "anchor_text": "MLPClassifier", "paragraph_index": 7}, {"url": "https://joblib.readthedocs.io/en/latest/index.html", "anchor_text": "joblib", "paragraph_index": 7}, {"url": "https://github.com/FidelLimited/serverless-plugin-warmup", "anchor_text": "hitting your function every few minutes to keep it warm", "paragraph_index": 9}, {"url": "https://aws.amazon.com/blogs/aws/new-provisioned-concurrency-for-lambda-functions/", "anchor_text": "Provisioned Concurrency", "paragraph_index": 9}], "all_paragraphs": ["Disclaimer: I am the developer behind Model Zoo, a model deployment platform focused on ease-of-use.", "If you\u2019re an AWS customer that needs to deploy machine learning models for real-time inference, you might have considered using AWS SageMaker Inference Endpoints. However, there is another option for model deployment that is sometimes overlooked: deploying directly on AWS Lambda. Although it comes with some caveats, the simplicity and cost-efficiency of Lambda make it worthwhile to consider over SageMaker endpoints for model deployment, especially when using scikit-learn, xgboost, or spaCy. In this article, we\u2019ll go over some of the benefits and caveats of using AWS Lambda for ML inference and dive into some relevant benchmarks. We show that in scenarios of low usage (<2M predictions per month), you can save up to 95% on infrastructure costs when moving models from SageMaker to Lambda. We\u2019ll also present scikit-learn-lambda, our open-source toolkit for easily deploying scikit-learn on AWS Lambda.", "SageMaker inference endpoints are one of many pieces of an impressive end-to-end machine learning toolkit offered by AWS, from data labeling (AWS SageMaker Ground Truth) to model monitoring (AWS SageMaker Model Monitor). SageMaker inference endpoints offer features around GPU acceleration, autoscaling, AB testing, integration with training pipelines, and integration with offline scoring (AWS Batch Transform). These features come at a steep cost \u2014 the cheapest possible inference endpoint (ml.t2.medium) will run you $50/month to run 24/7. The next best endpoint (ml.t2.xlarge) is $189.65/month.", "AWS Lambda is a pioneer of the serverless computing movement, letting you run arbitrary functions without provisioning or managing servers. It executes your code only when needed and scales automatically, from a few requests per day to hundreds per second. Lambda is a generic function execution engine without any machine learning specific features. It has inspired a growing community of tooling, some from AWS themselves (Serverless Application Model) and some externally affiliated (Serverless framework).", "PharmAssess is a Model Zoo user whose mission is to treat more patients, more confidently, and more efficiently. They have developed a proprietary model that can automate minor ailment assessment, diagnosis, treatment & documentation with scikit-learn, and are now working with an initial set of users to test it. The size of their model is ~50 MB, making it a great candidate for deployment with Lambda.", "With Model Zoo, PharmAssess is able to deploy its scikit-learn model with a simple Python API. Behind the scenes, Model Zoo will package and deploy the scikit-learn model to an AWS Lambda function (see our quickstart for a complete example).", "If you prefer maintaining your own model storage, deployment, and monitoring stack, you can use our open-source package scikit-learn-lambda to deploy a model onto your own AWS cloud with the Serverless framework:", "One big caveat of AWS Lambda is the \u201ccold start\u201d, or initialization overhead that occurs after 5\u201310 minutes of inactivity. To get an understanding of the severity, we generate MLPClassifier models with three hidden layers each using layer sizes of 100, 250, 500, 750, and 900. Each model is trained on the iris dataset and serialized to disk using the joblib library. This results in model files sized 0.68 MB, 4.08 MB, 16.17 MB, 36.25 MB, and 52.13 MB respectively. We deploy each to a lambda function with 1024 MB memory using scikit-learn-lambda and measure an average cold-start latency over three samples to generate the benchmark above.", "We also plot the \u201cwarm\u201d latency below averaged over fifteen samples, which hovers around 2\u20135 milliseconds for each model.", "There are some workarounds for cold-start latency, such as hitting your function every few minutes to keep it warm or using Provisioned Concurrency. However, if optimizing for p90+ latency is an important business requirement, the serverless paradigm might not be right for your use-case.", "AWS Lambda usage can be difficult to measure as a combination of time per request, memory usage, and total requests per month. We created this interactive visualization to help us understand the cost per month under various usage scenarios, benchmarked against SageMaker endpoints.", "The cost difference speaks for itself: using an average warm latency observed above and an allocated memory of 1024 MB, Lambda is an order of magnitude cheaper than a single SageMaker endpoint from the lowest cost tier. The pay-per-request model also makes it great for AB testing and prototyping \u2014 you can deploy every single model you train without ever worrying about underutilization.", "As a general rule, AWS Lambda makes sense for smaller models (<50MB) that can use CPUs for inference and for which you expect a usage pattern of <2M requests/month. This makes it ideal for building prototypes or new products that use lightweight model libraries[2] like scikit-learn, xgboost, or spaCy.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "machine learning infrastructure at Model Zoo. Previously at Determined AI, Google."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F3ff260a6cd9d&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsaving-95-on-infrastructure-costs-using-aws-lambda-for-scikit-learn-predictions-3ff260a6cd9d&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsaving-95-on-infrastructure-costs-using-aws-lambda-for-scikit-learn-predictions-3ff260a6cd9d&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsaving-95-on-infrastructure-costs-using-aws-lambda-for-scikit-learn-predictions-3ff260a6cd9d&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsaving-95-on-infrastructure-costs-using-aws-lambda-for-scikit-learn-predictions-3ff260a6cd9d&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----3ff260a6cd9d--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----3ff260a6cd9d--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@yoavz_?source=post_page-----3ff260a6cd9d--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@yoavz_?source=post_page-----3ff260a6cd9d--------------------------------", "anchor_text": "Yoav Zimmerman"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fce092e78bf49&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsaving-95-on-infrastructure-costs-using-aws-lambda-for-scikit-learn-predictions-3ff260a6cd9d&user=Yoav+Zimmerman&userId=ce092e78bf49&source=post_page-ce092e78bf49----3ff260a6cd9d---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F3ff260a6cd9d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsaving-95-on-infrastructure-costs-using-aws-lambda-for-scikit-learn-predictions-3ff260a6cd9d&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F3ff260a6cd9d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsaving-95-on-infrastructure-costs-using-aws-lambda-for-scikit-learn-predictions-3ff260a6cd9d&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://modelzoo.dev/", "anchor_text": "Model Zoo"}, {"url": "https://modelzoo.dev/lambda-vs-sagemaker-cost/", "anchor_text": "https://modelzoo.dev/lambda-vs-sagemaker-cost/"}, {"url": "https://github.com/model-zoo/scikit-learn-lambda", "anchor_text": "scikit-learn-lambda"}, {"url": "https://aws.amazon.com/sagemaker/groundtruth/", "anchor_text": "AWS SageMaker Ground Truth"}, {"url": "https://docs.aws.amazon.com/sagemaker/latest/dg/monitoring-overview.html", "anchor_text": "AWS SageMaker Model Monitor"}, {"url": "https://docs.aws.amazon.com/sagemaker/latest/dg/inference-pipeline-batch.html", "anchor_text": "AWS Batch Transform"}, {"url": "https://aws.amazon.com/serverless/sam/", "anchor_text": "Serverless Application Model"}, {"url": "https://www.serverless.com/", "anchor_text": "Serverless framework"}, {"url": "https://www.serverless.com/", "anchor_text": "Serverless"}, {"url": "https://github.com/aws/sagemaker-containers", "anchor_text": "SageMaker-compatible containers"}, {"url": "https://sagemaker.readthedocs.io/en/stable/", "anchor_text": "SageMaker Python SDK"}, {"url": "https://mikhail.io/serverless/coldstarts/aws/#:~:text=This%20article%20describes%20AWS%20Lambda,Cold%20Starts%20in%20Serverless%20Functions.", "anchor_text": "Cold Starts on AWS Lambda"}, {"url": "https://docs.aws.amazon.com/lambda/latest/dg/configuration-layers.html", "anchor_text": "AWS Lambda Layers"}, {"url": "https://docs.aws.amazon.com/lambda/latest/dg/configuration-layers.html", "anchor_text": "AWS Lambda Layers"}, {"url": "https://pharmassess.ca/", "anchor_text": "PharmAssess"}, {"url": "https://colab.research.google.com/github/model-zoo/examples/blob/master/scikit-learn-quickstart/quickstart.ipynb", "anchor_text": "quickstart"}, {"url": "https://github.com/model-zoo/scikit-learn-lambda", "anchor_text": "scikit-learn-lambda"}, {"url": "https://github.com/model-zoo/scikit-learn-lambda", "anchor_text": "https://github.com/model-zoo/scikit-learn-lambda"}, {"url": "https://scikit-learn.org/stable/modules/generated/sklearn.neural_network.MLPClassifier.html", "anchor_text": "MLPClassifier"}, {"url": "https://joblib.readthedocs.io/en/latest/index.html", "anchor_text": "joblib"}, {"url": "https://github.com/FidelLimited/serverless-plugin-warmup", "anchor_text": "hitting your function every few minutes to keep it warm"}, {"url": "https://aws.amazon.com/blogs/aws/new-provisioned-concurrency-for-lambda-functions/", "anchor_text": "Provisioned Concurrency"}, {"url": "https://modelzoo.dev/lambda-vs-sagemaker-cost/", "anchor_text": "AWS Lambda vs. AWS SageMaker Cost Calculatormodelzoo.dev"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----3ff260a6cd9d---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/tag/mlops?source=post_page-----3ff260a6cd9d---------------mlops-----------------", "anchor_text": "Mlops"}, {"url": "https://medium.com/tag/scikit-learn?source=post_page-----3ff260a6cd9d---------------scikit_learn-----------------", "anchor_text": "Scikit Learn"}, {"url": "https://medium.com/tag/sagemaker?source=post_page-----3ff260a6cd9d---------------sagemaker-----------------", "anchor_text": "Sagemaker"}, {"url": "https://medium.com/tag/lambda?source=post_page-----3ff260a6cd9d---------------lambda-----------------", "anchor_text": "Lambda"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F3ff260a6cd9d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsaving-95-on-infrastructure-costs-using-aws-lambda-for-scikit-learn-predictions-3ff260a6cd9d&user=Yoav+Zimmerman&userId=ce092e78bf49&source=-----3ff260a6cd9d---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F3ff260a6cd9d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsaving-95-on-infrastructure-costs-using-aws-lambda-for-scikit-learn-predictions-3ff260a6cd9d&user=Yoav+Zimmerman&userId=ce092e78bf49&source=-----3ff260a6cd9d---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F3ff260a6cd9d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsaving-95-on-infrastructure-costs-using-aws-lambda-for-scikit-learn-predictions-3ff260a6cd9d&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----3ff260a6cd9d--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F3ff260a6cd9d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsaving-95-on-infrastructure-costs-using-aws-lambda-for-scikit-learn-predictions-3ff260a6cd9d&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----3ff260a6cd9d---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----3ff260a6cd9d--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----3ff260a6cd9d--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----3ff260a6cd9d--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----3ff260a6cd9d--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----3ff260a6cd9d--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----3ff260a6cd9d--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----3ff260a6cd9d--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----3ff260a6cd9d--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@yoavz_?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@yoavz_?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Yoav Zimmerman"}, {"url": "https://medium.com/@yoavz_/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "101 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fce092e78bf49&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsaving-95-on-infrastructure-costs-using-aws-lambda-for-scikit-learn-predictions-3ff260a6cd9d&user=Yoav+Zimmerman&userId=ce092e78bf49&source=post_page-ce092e78bf49--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fusers%2Fce092e78bf49%2Flazily-enable-writer-subscription&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsaving-95-on-infrastructure-costs-using-aws-lambda-for-scikit-learn-predictions-3ff260a6cd9d&user=Yoav+Zimmerman&userId=ce092e78bf49&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}