{"url": "https://towardsdatascience.com/how-to-dominate-mls-fantasy-e60de8cae01d", "time": 1682995529.624452, "path": "towardsdatascience.com/how-to-dominate-mls-fantasy-e60de8cae01d/", "webpage": {"metadata": {"title": "How to dominate MLS Fantasy. Writing a python script to\u2026 | by Robert Clark | Towards Data Science", "h1": "How to dominate MLS Fantasy", "description": "Using Linear Programming to create an MLS Fantasy squad better than 96% of the nation."}, "outgoing_paragraph_urls": [], "all_paragraphs": ["Note to all of my non-US readers, please forgive me for referring to this sport as \u201csoccer\u201d and not \u201cfootball\u201d. Enjoy!", "Growing up in Kansas City, I cherish many fond memories of attending KC Wizards (now Sporting Kansas City) games with my family. Being a soccer player myself (not a very good one, mind you), I loved watching my favorite athletes duke it out on the field in an endless pursuit of finding the back of the net. To bide time between games, I often found myself reading promotional information for the rosters, learning everything I could about my idols.", "As I got older, my attention strayed to leagues overseas, but with the recent resurgence of the MLS over the past several years, I now crave a return to the league that I fell in love with as a child.", "The sports industry has changed dramatically during my decade-plus hiatus of MLS-fandom, with the biggest difference being the introduction and dominance of fantasy sports. The fantasy sports industry has absolutely exploded in popularity over the years and has helped introduce many fans to a new sport or league, encouraging them to follow games when they would otherwise have no reason or desire to. Due to this inclusive nature of fantasy sports, I decided to turn to MLS Fantasy to help me re-learn the teams and the stars. Being the data nerd that I am, I wasn\u2019t going to let mere guesswork dictate my fantasy squad, but create an algorithm which will determine an optimal lineup for me instead.", "Before we dive into the algorithm I used and the results I achieved, we need to define the rules and constraints of MLS Fantasy. Any veterans out there can skip ahead to the next section as this will simply be a review.", "The basic premise of MLS Fantasy is to create a squad every match-week that will return the most points. These points can be gained by performing positive actions on the pitch, such as scoring a goal, getting an assist, making a save, connecting on a pass, and more. Points can also be lost for actions that negatively impact a team, such as an own-goal, making a defensive error, or receiving a yellow or red card from the referee. These points are weighted by the impact they have on a game, so scoring a goal receives far greater points than a successful pass.", "All squads comprise of 2 goalkeepers, 5 defenders, 5 midfielders, and 3 forwards. A starting lineup must contain 11 total players with 1 being a goalkeeper. MLS Fantasy supports many different formations, such as 3\u20135\u20132 (3 defenders, 5 midfielders, 2 forwards), 3\u20134\u20133, 4\u20135\u20131, 4\u20134\u20132, 4\u20133\u20133, 5\u20134\u20131, and 5\u20133\u20132. All players that are not in the starting lineup will be designated as subs (more on them later).", "To make matters interesting, each MLS Fantasy team has a budget of $100M for the match-week to select a squad. Each player has a price associated with him based on his relative performance in the league. For example, at the time of writing, LAFC\u2019s Carlos Vela is the most expensive player in the league at $11.8M. In general, most players range from around $4M up to $12M. For a squad to be valid, the sum of the cost of all players on the roster must be less than or equal to $100M. There is no penalty or bonus for going under $100M, so it is suggested to get a squad that is as close to the maximum budget to optimize the strength of the team.", "The last main constraint of the squad outside of cost and positional limits is the number of players from each team that can be selected. MLS Fantasy limits the amount of same-team players to 3, so you can\u2019t select more than 3 players from D.C. United for example.", "Substitutes throw a bit of a wrench into the mix. By default, substitutes don\u2019t contribute points to your weekly total, regardless of their individual performances during their game(s). Substitutes come in handy, however, if one of your starters didn\u2019t play a single minute during the week. In that scenario, your first listed substitute in an eligible position will automatically replace the player that didn\u2019t play.", "Once a squad is set, MLS Fantasy will lock your roster when each player\u2019s game starts, preventing you from making changes to your lineup once a match is in play. The fantasy game will keep track of the performance of each player and tally his points. Once all games finish for a given week, the sum of all points from the starting players on the squad is your team\u2019s final score. These scores can be compared against all other fantasy players and the teams with the most points at the end of the season can win prizes.", "Now that we have the rules of MLS Fantasy out of the way, let\u2019s discuss the actual algorithm that we will use to generate an optimal squad. Due to us wanting to find the maximum amount of points returned given a set budget, the Linear Programming maximize algorithm appears to be the best route to take. This algorithm allows us to identify players which will generate the highest theoretical point return while staying within our constraints. Luckily, the Python package PuLP makes it easy. To achieve our desired outcome, we need to take the following steps.", "First, we need to pull data from the MLS API which contains information for all active MLS players, such as total fantasy points this season, the player\u2019s eligibility (ie. a player is ineligible if he is injured or suspended), the current price to acquire the player, and recent trends in the player\u2019s form.", "We don\u2019t want to include any players that are injured or suspended as they will get us zero points in the coming match-week due to their failure to participate. Some teams also occasionally have bye-weeks and don\u2019t play a game. While players for these teams are technically marked as eligible in the API, we don\u2019t want to include them as they won\u2019t have an opportunity to earn points during the week.", "We should also remove players that haven\u2019t played any games during the current season since they are unproven and likely won\u2019t see much (if any) playtime during the current week. Any player that falls into one of the categories above should be filtered out of our list as they will give us the fewest amount of points possible.", "In order to determine the potential of each player to generate a high number of fantasy points, we need to sort all players by their point totals. I chose to look at the average of the last 5 games the player has participated in as a benchmark for their current form. I determined that overall points totals fail to show if a player is generating significantly more or less points over the past few games. With this in mind, we sort every single active player in the MLS by the average points they gained in the last 5 games with the first player having the greatest average.", "Having a singular sorted list of players doesn\u2019t buy us much since we have constraints on the number of players we can include for each position. Instead, we will separate our sorted list by position (goalkeepers, defenders, midfielders, and forwards). Since we separated our already sorted list, each individual list by position will still be sorted according to our previous algorithm.", "Now for actually creating our model. Given the rules of MLS Fantasy detailed above, our model is defined by the following:", "With our model built and all constraints added, it\u2019s time to solve the model to find the optimal solution. By running the model, assuming an optimal result can be reached, the players that are required to reach the optimal are set to a value of 1.", "Lastly, we need to print the roster of suggested players for every position. First, by checking through every player in our dataset, we identify any players that have a value of 1 for the binary variable and print his name as this player is suggested to be used in the current week\u2019s fantasy lineup.", "After all is said and done, how did the algorithm do? Keep in mind that the current match-week as of writing sees many teams and players out of action due to the international break. Given the available players, the algorithm selected a fairly balanced squad with Carlos Vela leading the way as my captain, and the rest of the squad comprising players that, while very talented with impressive returns over the past few weeks, aren\u2019t exactly the household names that you might expect. I also decided to swap out cheaper substitutes in the hope that the extra budget would allow more financial headway for a stronger roster. My complete lineup can be found in the image below.", "One possible rationale for the lack of several high caliber players is the fact that the algorithm doesn\u2019t have any bias which most humans tend to possess when it comes to fantasy sports. As humans, we generally pick players with designer names which light up the league week-in and week-out. While this is a smart move, it leaves little room in the budget to fill out the squad, forcing fantasy players to choose lesser athletes for the remaining slots. Computers, on the other hand, don\u2019t care about an athlete\u2019s legacy, or how much he gets paid each week. They only see what they are shown, and in our case, we are just showing performances on the pitch and fantasy price tags.", "When all was said and done, despite a quieter week in the MLS with the break, my algorithm ended up picking a competitive squad which outperformed 96% of the nation for a total of 65 points. It even doubled the national average of 31.5. While I was hopeful that the algorithm would prove useful, I wasn\u2019t expecting the first iteration to perform so well, especially considering I have several improvements I want to make from here.", "Due to the relatively strong performance of the algorithm during it\u2019s inaugural week, I plan on using it for the remainder of the season for my fantasy lineups. Since I missed the first 3 weeks of the game, I don\u2019t expect to climb to the top of the leaderboard for the Spring league, or anywhere relatively near it for that matter, but I plan on taking advantage of the Fall league and will see how well it performs during that timeframe.", "Since this is just the first iteration of the algorithm I used, I still have plenty of ideas to make it better moving forward and plan to incorporate those ideas as the season unfolds. The following are just a few of those plans:", "Over the next several months, I plan on writing semi-regular updates on the progress of the algorithm and how it performs compared to the rest of the pack.", "Is this result a fluke? Did I get lucky? Or does the international break throw an anomaly into the equation that won\u2019t surface during typical match weeks? The answer to all of these questions could very well be \u201cyes.\u201d Due to the budget-style setup of MLS Fantasy, however, the Linear Programming Maximize algorithm appears to be tailor-fit for this game.", "Only time will tell how successful my program will be. For a game based entirely on numbers, why shouldn\u2019t there be a tool that can use those numbers to its advantage?", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Software engineer passionate about sports and artificial intelligence and, apparently, a blogger by night."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fe60de8cae01d&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-dominate-mls-fantasy-e60de8cae01d&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-dominate-mls-fantasy-e60de8cae01d&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-dominate-mls-fantasy-e60de8cae01d&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-dominate-mls-fantasy-e60de8cae01d&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----e60de8cae01d--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----e60de8cae01d--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@roclark?source=post_page-----e60de8cae01d--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@roclark?source=post_page-----e60de8cae01d--------------------------------", "anchor_text": "Robert Clark"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fd2a72525d0b3&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-dominate-mls-fantasy-e60de8cae01d&user=Robert+Clark&userId=d2a72525d0b3&source=post_page-d2a72525d0b3----e60de8cae01d---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fe60de8cae01d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-dominate-mls-fantasy-e60de8cae01d&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fe60de8cae01d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-dominate-mls-fantasy-e60de8cae01d&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://www.pexels.com/@noellegracephotos?utm_content=attributionCopyText&utm_medium=referral&utm_source=pexels", "anchor_text": "Noelle Otto"}, {"url": "https://www.pexels.com/photo/woman-athletes-playing-soccer-906073/?utm_content=attributionCopyText&utm_medium=referral&utm_source=pexels", "anchor_text": "Pexels"}, {"url": "https://unsplash.com/@clemhlrdt?utm_source=medium&utm_medium=referral", "anchor_text": "Cl\u00e9ment H"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://unsplash.com/@element5digital?utm_source=medium&utm_medium=referral", "anchor_text": "Element5 Digital"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://unsplash.com/@betagamma?utm_source=medium&utm_medium=referral", "anchor_text": "Daniil Silantev"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://medium.com/tag/python?source=post_page-----e60de8cae01d---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/soccer?source=post_page-----e60de8cae01d---------------soccer-----------------", "anchor_text": "Soccer"}, {"url": "https://medium.com/tag/sports-analytics?source=post_page-----e60de8cae01d---------------sports_analytics-----------------", "anchor_text": "Sports Analytics"}, {"url": "https://medium.com/tag/programming?source=post_page-----e60de8cae01d---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/tag/towards-data-science?source=post_page-----e60de8cae01d---------------towards_data_science-----------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fe60de8cae01d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-dominate-mls-fantasy-e60de8cae01d&user=Robert+Clark&userId=d2a72525d0b3&source=-----e60de8cae01d---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fe60de8cae01d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-dominate-mls-fantasy-e60de8cae01d&user=Robert+Clark&userId=d2a72525d0b3&source=-----e60de8cae01d---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fe60de8cae01d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-dominate-mls-fantasy-e60de8cae01d&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----e60de8cae01d--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fe60de8cae01d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-dominate-mls-fantasy-e60de8cae01d&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----e60de8cae01d---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----e60de8cae01d--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----e60de8cae01d--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----e60de8cae01d--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----e60de8cae01d--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----e60de8cae01d--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----e60de8cae01d--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----e60de8cae01d--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----e60de8cae01d--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@roclark?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@roclark?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Robert Clark"}, {"url": "https://medium.com/@roclark/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "275 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fd2a72525d0b3&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-dominate-mls-fantasy-e60de8cae01d&user=Robert+Clark&userId=d2a72525d0b3&source=post_page-d2a72525d0b3--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F18c672322a1d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-dominate-mls-fantasy-e60de8cae01d&newsletterV3=d2a72525d0b3&newsletterV3Id=18c672322a1d&user=Robert+Clark&userId=d2a72525d0b3&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}