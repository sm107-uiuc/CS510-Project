{"url": "https://towardsdatascience.com/build-the-worlds-simplest-etl-extract-transform-load-pipeline-in-ruby-with-kiba-e7093a29d35", "time": 1683010112.479058, "path": "towardsdatascience.com/build-the-worlds-simplest-etl-extract-transform-load-pipeline-in-ruby-with-kiba-e7093a29d35/", "webpage": {"metadata": {"title": "Build The World\u2019s Simplest ETL (Extract, Transform, Load) Pipeline in Ruby With Kiba | by GreekDataGuy | Towards Data Science", "h1": "Build The World\u2019s Simplest ETL (Extract, Transform, Load) Pipeline in Ruby With Kiba", "description": "You can always roll your own, but a number of packages exist to make writing ETL\u2019s clean, modular and testable. ETL stands for \u201cextract, transform, load\u201d, but unless you come from a data mining\u2026"}, "outgoing_paragraph_urls": [{"url": "https://en.wikipedia.org/wiki/Extract,_transform,_load", "anchor_text": "ETL", "paragraph_index": 1}, {"url": "https://www.kiba-etl.org/", "anchor_text": "Kiba", "paragraph_index": 4}, {"url": "https://www.youtube.com/watch?v=6hmNuXXIKf4", "anchor_text": "youtube video", "paragraph_index": 33}, {"url": "https://www.timtilberg.com/ruby/etl/2019/09/26/kiba-tips.html", "anchor_text": "blog post", "paragraph_index": 33}, {"url": "http://gmail.com", "anchor_text": "gmail.com", "paragraph_index": 39}], "all_paragraphs": ["How often do you iterate through all the records in a database table, modify each, and re-save?", "This pattern is called ETL (extract, transform, load).", "I\u2019ve seen it in web apps, analytics platforms, and machine learning pipelines.", "You can always roll your own, but a number of packages exist to make writing ETL\u2019s clean, modular and testable.", "We\u2019ll walk through an example in Ruby using Kiba.", "ETL stands for \u201cextract, transform, load\u201d, but unless you come from a data mining background, the name is misleading.", "A better name might be \u201cload, modify, save\u201d.", "Extract = load data from a source (ie: database, CSV, XML, JSON,\u2026)", "Transform = modify/augment each data point (ie: add geolocation data, fix punctuation, calculate something,\u2026)", "Load = store the updates (ie: database, CSV, data warehouse,\u2026)", "We\u2019re going to bundle this up in a tiny ruby project.", "Create a CSV file with touch phone.csv and paste in the following.", "In a real situation, you might use a service like Twilio to detect if they\u2019re real phone numbers.", "Run touch Gemfile and add the following to the file.", "Install these packages with bundle install.", "Create a file to store our ETL classes. We\u2019ll call this common.rb.", "Write our first class in common.rb. We could name this class anything but I\u2019ve chosen SourceCSV.", "We\u2019ll use a rake task to kickstart the Kiba job.", "Create a file called Rakefile (no extension), and add the following. We\u2019ll add more logic to this in a moment.", "Note that our rake task is named, kiba_run. Let\u2019s run our task from the console.", "If we see that, everything works so far.", "Now we\u2019ll create the class that saves our data after it\u2019s modified. Obviously we haven\u2019t added any modification logic yet.", "This stores our loaded data into a new CSV. Alternatively you could dump this data to a db like postgres.", "Add the load step to the rake file.", "Give it another run with rake kiba_run.", "A new file called numbers-cleaned.csv should now exist which looks exactly like numbers.csv.", "Congratulations! You\u2019ve completed the \u201cE\u201d and \u201cL\u201d steps in ETL.", "Now the fun part. We\u2019ll create 2 classes related to transform which each do something different.", "The 1st removes punctuation from our numbers, and counts the number of characters. Add this class to common.rb.", "The 2nd removes any numbers that are not 10 digits long. Add the second transform class to common.rb.", "Now run our rake task again and look at the outputted file. It should look like.", "If we pretty printed the outputted CSV, it would look like this. Try: cat numbers-cleaned.csv | column -t -s, | less -S.", "We\u2019ve implemented ETL on a CSV!", "This youtube video and this blog post were both helpful in figuring this out.", "If you keep the ETL pattern in the back of your mind, you\u2019ll be surprised how often situations come up to use it.", "But with so many ETL packages in Python (ie: Airflow, Luigi, Bonobo,\u2026), why would you use Kiba in Ruby?", "Your web app is Ruby on Rails, you don\u2019t have a Python specialist on the team, or you just want an easy ETL solution.", "Whenever possible in a production context, I say, use what you know and minimize complexity.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Just a developer. Contact: greek.data.guy \u201cat\u201d gmail.com"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fe7093a29d35&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuild-the-worlds-simplest-etl-extract-transform-load-pipeline-in-ruby-with-kiba-e7093a29d35&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuild-the-worlds-simplest-etl-extract-transform-load-pipeline-in-ruby-with-kiba-e7093a29d35&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuild-the-worlds-simplest-etl-extract-transform-load-pipeline-in-ruby-with-kiba-e7093a29d35&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuild-the-worlds-simplest-etl-extract-transform-load-pipeline-in-ruby-with-kiba-e7093a29d35&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----e7093a29d35--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----e7093a29d35--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://greekdataguy.medium.com/?source=post_page-----e7093a29d35--------------------------------", "anchor_text": ""}, {"url": "https://greekdataguy.medium.com/?source=post_page-----e7093a29d35--------------------------------", "anchor_text": "GreekDataGuy"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fd67bf018ae6d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuild-the-worlds-simplest-etl-extract-transform-load-pipeline-in-ruby-with-kiba-e7093a29d35&user=GreekDataGuy&userId=d67bf018ae6d&source=post_page-d67bf018ae6d----e7093a29d35---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fe7093a29d35&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuild-the-worlds-simplest-etl-extract-transform-load-pipeline-in-ruby-with-kiba-e7093a29d35&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fe7093a29d35&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuild-the-worlds-simplest-etl-extract-transform-load-pipeline-in-ruby-with-kiba-e7093a29d35&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://www.pexels.com/@skitterphoto?utm_content=attributionCopyText&utm_medium=referral&utm_source=pexels", "anchor_text": "Skitterphoto"}, {"url": "https://www.pexels.com/photo/gray-gold-and-red-industrial-machine-675987/?utm_content=attributionCopyText&utm_medium=referral&utm_source=pexels", "anchor_text": "Pexels"}, {"url": "https://en.wikipedia.org/wiki/Extract,_transform,_load", "anchor_text": "ETL"}, {"url": "https://www.kiba-etl.org/", "anchor_text": "Kiba"}, {"url": "https://rubygems.org'", "anchor_text": "https://rubygems.org'"}, {"url": "http://twitter.com/filename", "anchor_text": "@filename"}, {"url": "http://twitter.com/filename", "anchor_text": "@filename"}, {"url": "http://twitter.com/csv", "anchor_text": "@csv"}, {"url": "http://twitter.com/headers_written", "anchor_text": "@headers_written"}, {"url": "http://twitter.com/headers_written", "anchor_text": "@headers_written"}, {"url": "http://twitter.com/csv", "anchor_text": "@csv"}, {"url": "http://twitter.com/csv", "anchor_text": "@csv"}, {"url": "http://twitter.com/csv", "anchor_text": "@csv"}, {"url": "http://twitter.com/field", "anchor_text": "@field"}, {"url": "http://twitter.com/field", "anchor_text": "@field"}, {"url": "http://twitter.com/field", "anchor_text": "@field"}, {"url": "http://twitter.com/field", "anchor_text": "@field"}, {"url": "https://www.youtube.com/watch?v=6hmNuXXIKf4", "anchor_text": "youtube video"}, {"url": "https://www.timtilberg.com/ruby/etl/2019/09/26/kiba-tips.html", "anchor_text": "blog post"}, {"url": "https://medium.com/tag/data-science?source=post_page-----e7093a29d35---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/business-intelligence?source=post_page-----e7093a29d35---------------business_intelligence-----------------", "anchor_text": "Business Intelligence"}, {"url": "https://medium.com/tag/analytics?source=post_page-----e7093a29d35---------------analytics-----------------", "anchor_text": "Analytics"}, {"url": "https://medium.com/tag/programming?source=post_page-----e7093a29d35---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/tag/ruby?source=post_page-----e7093a29d35---------------ruby-----------------", "anchor_text": "Ruby"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fe7093a29d35&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuild-the-worlds-simplest-etl-extract-transform-load-pipeline-in-ruby-with-kiba-e7093a29d35&user=GreekDataGuy&userId=d67bf018ae6d&source=-----e7093a29d35---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fe7093a29d35&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuild-the-worlds-simplest-etl-extract-transform-load-pipeline-in-ruby-with-kiba-e7093a29d35&user=GreekDataGuy&userId=d67bf018ae6d&source=-----e7093a29d35---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fe7093a29d35&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuild-the-worlds-simplest-etl-extract-transform-load-pipeline-in-ruby-with-kiba-e7093a29d35&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----e7093a29d35--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fe7093a29d35&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuild-the-worlds-simplest-etl-extract-transform-load-pipeline-in-ruby-with-kiba-e7093a29d35&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----e7093a29d35---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----e7093a29d35--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----e7093a29d35--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----e7093a29d35--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----e7093a29d35--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----e7093a29d35--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----e7093a29d35--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----e7093a29d35--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----e7093a29d35--------------------------------", "anchor_text": ""}, {"url": "https://greekdataguy.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://greekdataguy.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "GreekDataGuy"}, {"url": "https://greekdataguy.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "9.97K Followers"}, {"url": "http://gmail.com", "anchor_text": "gmail.com"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fd67bf018ae6d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuild-the-worlds-simplest-etl-extract-transform-load-pipeline-in-ruby-with-kiba-e7093a29d35&user=GreekDataGuy&userId=d67bf018ae6d&source=post_page-d67bf018ae6d--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F26b33036e2a7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuild-the-worlds-simplest-etl-extract-transform-load-pipeline-in-ruby-with-kiba-e7093a29d35&newsletterV3=d67bf018ae6d&newsletterV3Id=26b33036e2a7&user=GreekDataGuy&userId=d67bf018ae6d&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}