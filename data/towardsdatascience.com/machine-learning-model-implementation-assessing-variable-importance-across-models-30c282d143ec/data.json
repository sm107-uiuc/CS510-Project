{"url": "https://towardsdatascience.com/machine-learning-model-implementation-assessing-variable-importance-across-models-30c282d143ec", "time": 1683012732.440541, "path": "towardsdatascience.com/machine-learning-model-implementation-assessing-variable-importance-across-models-30c282d143ec/", "webpage": {"metadata": {"title": "Machine Learning Model Implementation: Assessing Variable Importance Across Models | by Katey Durham | Towards Data Science", "h1": "Machine Learning Model Implementation: Assessing Variable Importance Across Models", "description": "Great! So you completed your Machine Learning (ML) pipeline, hopefully choosing your tuning parameters for each model through a careful validation procedure and have converged on what you think is\u2026"}, "outgoing_paragraph_urls": [{"url": "http://appliedpredictivemodeling.com", "anchor_text": "http://appliedpredictivemodeling.com", "paragraph_index": 1}, {"url": "https://vivapredict.com", "anchor_text": "https://vivapredict.com", "paragraph_index": 14}, {"url": "https://vivajams.com", "anchor_text": "https://vivajams.com", "paragraph_index": 14}, {"url": "https://vivamash.com", "anchor_text": "https://vivamash.com", "paragraph_index": 14}], "all_paragraphs": ["Great! So you completed your Machine Learning (ML) pipeline, hopefully choosing your tuning parameters for each model through a careful validation procedure and have converged on what you think is the final model for each strategy. What\u2019s next? In the first part of this series I\u2019ll talk about some metrics and graphics beyond the area under the ROC curve that can be helpful in achieving our project\u2019s goals. Sometimes as data scientists our tunnel vision for the data and modeling, or at least others\u2019 perception of us in this way, can limit our potential effectiveness as communicators and strategizers. The elements I\u2019ll demonstrate in these articles will help you see the problems you work on through your collaborator\u2019s eyes and provide concrete ways for you to address their concerns and objectives for your ML work. Specifically, in this article we\u2019ll:", "Hopefully, you are sold already on the importance of trying different approaches when you tackle a prediction problem. Fitting models of varying complexity (e.g. both linear and non-linear) can identify the most parsimonious model that gives good prediction performance for the data we\u2019re working with. However, the flip side to the advantages that come with applying different models can be the apparent difficulty in comparing the results across these divergent strategies. What about the predictors that were used to fit the models \u2014 how can these be evaluated to determine what was important? As a data scientist, I challenge you to find a subject matter expert who, although you may deliver a model that predicts quite well, has no curiosity about what is happening under the hood! Your final model may have a straightforward interpretation of the parameter coefficients, such as for a linear model, but this is not always the case for more complex non-linear strategies. Luckily, although models have different parameterization and optimization strategies, Relative Variable Importance is a unifying concept that can allow comparisons to be made concerning features across models. More details on how Importance is computed for different models can be found in Applied Predictive Modeling (http://appliedpredictivemodeling.com) by Max Kuhn and Kjell Johnson, and can be implemented in the caret package in R.", "Basically the unification is achieved in this way: although a variable\u2019s Importance is determined differently for each model, the single most important variable for every strategy is given a score of 100, as in \u2018100 percent,\u2019 so that it\u2019s most accurate to describe these importance scores as relative. Then the next important variable is assigned a relative value between 0 and 100, where its proximity to 100 indicates how close in importance it is to the first variable. This proceeds throughout the predictors, except in the case of a relatively small number of models that perform their own variable selection through the model fitting procedure. For these models, the variable importance is zero for any feature not included in the model.", "One important caveat to note about Relative Variable Importance is that it\u2019s best thought of as an indicator of absolute value, but not sign or direction, of the effect. Values of important predictors may be either positively or negatively associated with the outcome.", "In this article, I\u2019ll be using results from 7 ML models used to analyze the German Credit classification data available in the R caret package. It consists of 1000 observations of individuals determined to have either Good (n=700) or Bad (n=300) credit. There are 61 predictors that cover a variety of factors that may have to do with credit, such as loan features, banking information, demographics, employment, etc. The data were separated into a 70% \u2014 30% training \u2014 test split, preserving the 70% Good credit frequency in both. Note that computing the variable importance only involves data from the training set, which was split into 5 CV sets, repeated 5 times, to determine optimal tuning parameters. Modeling was done using the caret package in R. The models fit were the following:", "* Linear Discriminant Analysis (LDA)* Partial Least Squares (PLS)* Support Vector Machines (SVM, with radial kernel function)* Neural Network (NN)* Recursive Partitioning (Rpart, single tree) * Random Forests (RF)* Gradient Boosting Machines (GBM)", "In the next article in the series, I\u2019ll talk more about how these models performed. For our purpose now the models indicated a reasonable signal in the cross-validation performance so it is warranted to look at the Relative Variable Importance.", "In R, variable importance measures can be extracted from caret model objects using the varImp() function. Here, though, we\u2019ll pick things up in the code from a .csv file containing the top 10 important variables from each model, along with their Importance value, so you can join the code here in R if you have a file like this from another source.", "In the next steps the data is processed to achieve the 3 dimensions captured on the plot:", "Below is the ggplot2 code. Probably the trickiest part is to get both size and color in a single legend. Also, we are reversing the usual direction of the y-axis, so that that a ranking of one will be on top. This will create the sweet spot on the graph at the upper right corner, where the features with the highest rankings across multiple models will congregate. Similarly the lower left will represent the least important variables.", "This section of the plot code labels the predictors. The geom_label_repel() function from the ggrepel package can help position labels strategically (i.e. not on top of each other).", "Finally, we have a visual summary of the important variables as indicated by the models in this analysis. Probably not surprisingly, having a checking account with a balance less than zero, or not having a checking account at all were important factors across multiple models. Also, features of the loan itself, including the installment rate and duration, appeared to be important in all models. Less frequently appearing but important in the models in which it was found was the amount of the loan. Only one model (it happened to be the Neural Net) picked up on the purpose of the loan as providing furniture and equipment, but it displayed a relatively high importance value. Perhaps the Neural Net is picking up on loans for business, such as restaurants, with a relatively high propensity to fail. These types of insights have the potential to perhaps streamline data collection and suggest ways to improve the loan approval process to decrease defaults.", "In conclusion, if the purpose of your modeling is to identify ways to improve performance in your process, not merely to monitor and predict, having some insight into the drivers of your outcome will be highly valuable. Being able to display the Relative Variable Importance will likely pique interest in the model\u2019s utility and allow for more strategic implementation.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Predictive Analyst who uses models and intuition https://vivapredict.com ~ NFT jams https://vivajams.com ~ Mashing it all up at https://vivamash.com"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F30c282d143ec&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmachine-learning-model-implementation-assessing-variable-importance-across-models-30c282d143ec&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmachine-learning-model-implementation-assessing-variable-importance-across-models-30c282d143ec&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmachine-learning-model-implementation-assessing-variable-importance-across-models-30c282d143ec&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmachine-learning-model-implementation-assessing-variable-importance-across-models-30c282d143ec&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----30c282d143ec--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----30c282d143ec--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://vivamashup.medium.com/?source=post_page-----30c282d143ec--------------------------------", "anchor_text": ""}, {"url": "https://vivamashup.medium.com/?source=post_page-----30c282d143ec--------------------------------", "anchor_text": "Katey Durham"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F218a7a5db639&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmachine-learning-model-implementation-assessing-variable-importance-across-models-30c282d143ec&user=Katey+Durham&userId=218a7a5db639&source=post_page-218a7a5db639----30c282d143ec---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F30c282d143ec&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmachine-learning-model-implementation-assessing-variable-importance-across-models-30c282d143ec&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F30c282d143ec&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmachine-learning-model-implementation-assessing-variable-importance-across-models-30c282d143ec&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "http://appliedpredictivemodeling.com", "anchor_text": "http://appliedpredictivemodeling.com"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----30c282d143ec---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/tag/variable-selection?source=post_page-----30c282d143ec---------------variable_selection-----------------", "anchor_text": "Variable Selection"}, {"url": "https://medium.com/tag/predictive-analytics?source=post_page-----30c282d143ec---------------predictive_analytics-----------------", "anchor_text": "Predictive Analytics"}, {"url": "https://medium.com/tag/predictive-modeling?source=post_page-----30c282d143ec---------------predictive_modeling-----------------", "anchor_text": "Predictive Modeling"}, {"url": "https://medium.com/tag/statistics?source=post_page-----30c282d143ec---------------statistics-----------------", "anchor_text": "Statistics"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F30c282d143ec&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmachine-learning-model-implementation-assessing-variable-importance-across-models-30c282d143ec&user=Katey+Durham&userId=218a7a5db639&source=-----30c282d143ec---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F30c282d143ec&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmachine-learning-model-implementation-assessing-variable-importance-across-models-30c282d143ec&user=Katey+Durham&userId=218a7a5db639&source=-----30c282d143ec---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F30c282d143ec&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmachine-learning-model-implementation-assessing-variable-importance-across-models-30c282d143ec&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----30c282d143ec--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F30c282d143ec&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmachine-learning-model-implementation-assessing-variable-importance-across-models-30c282d143ec&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----30c282d143ec---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----30c282d143ec--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----30c282d143ec--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----30c282d143ec--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----30c282d143ec--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----30c282d143ec--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----30c282d143ec--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----30c282d143ec--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----30c282d143ec--------------------------------", "anchor_text": ""}, {"url": "https://vivamashup.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://vivamashup.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Katey Durham"}, {"url": "https://vivamashup.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "135 Followers"}, {"url": "https://vivapredict.com", "anchor_text": "https://vivapredict.com"}, {"url": "https://vivajams.com", "anchor_text": "https://vivajams.com"}, {"url": "https://vivamash.com", "anchor_text": "https://vivamash.com"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F218a7a5db639&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmachine-learning-model-implementation-assessing-variable-importance-across-models-30c282d143ec&user=Katey+Durham&userId=218a7a5db639&source=post_page-218a7a5db639--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F7eed018d11f8&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmachine-learning-model-implementation-assessing-variable-importance-across-models-30c282d143ec&newsletterV3=218a7a5db639&newsletterV3Id=7eed018d11f8&user=Katey+Durham&userId=218a7a5db639&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}