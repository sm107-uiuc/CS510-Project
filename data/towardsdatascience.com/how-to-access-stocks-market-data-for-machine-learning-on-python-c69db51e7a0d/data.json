{"url": "https://towardsdatascience.com/how-to-access-stocks-market-data-for-machine-learning-on-python-c69db51e7a0d", "time": 1683009367.1264892, "path": "towardsdatascience.com/how-to-access-stocks-market-data-for-machine-learning-on-python-c69db51e7a0d/", "webpage": {"metadata": {"title": "How to Access Stocks Market Data for Machine Learning on Python | by Mauricio Fadel Argerich | Towards Data Science", "h1": "How to Access Stocks Market Data for Machine Learning on Python", "description": "A common bottleneck of Machine Learning and AI developments is getting a large enough dataset so you can train you algorithms with. Especially, if you\u2019re using Deep Learning you\u2019ll know how hard it\u2026"}, "outgoing_paragraph_urls": [{"url": "http://google dataset search", "anchor_text": "Google dataset search", "paragraph_index": 0}, {"url": "https://medium.com/swlh/build-an-ai-stock-trading-bot-for-free-4a46bec2a18", "anchor_text": "this great article about building a bot for trading", "paragraph_index": 1}, {"url": "https://alpaca.markets", "anchor_text": "Alpaca", "paragraph_index": 1}, {"url": "https://app.alpaca.markets/signup", "anchor_text": "create a new account here", "paragraph_index": 3}, {"url": "https://github.com/alpacahq/alpaca-trade-api-python", "anchor_text": "Github", "paragraph_index": 5}, {"url": "https://alpaca.markets/docs/api-documentation/api-v2/market-data/bars/", "anchor_text": "get_barset", "paragraph_index": 7}, {"url": "https://alpaca.markets/docs/api-documentation/api-v2/market-data/bars/", "anchor_text": "here", "paragraph_index": 12}, {"url": "https://www.linkedin.com/in/maufadel/", "anchor_text": "https://www.linkedin.com/in/maufadel/", "paragraph_index": 17}], "all_paragraphs": ["A common bottleneck of Machine Learning and AI developments is getting a large enough dataset so you can train you algorithms with. Especially, if you\u2019re using Deep Learning you\u2019ll know how hard it can be to get enough data to train a Neural Network properly. Google dataset search arrived sometime ago and improved a lot this problem, but it is still hard to find data on some topics such as stocks trading.", "I have faced this problem before so I know how hard it can be. However, just yesterday I found this great article about building a bot for trading, and it had a wonderful pointer to a recent Startup called Alpaca, that offers an API for building trading algorithms. With this API, we can access real-time and historical data of stocks using their Python SDK for free. In this article, I will show you how to implement a function to download stocks data and store it in a Pandas Dataframe so it\u2019s ready to be used for Machine Learning.", "Note: even though I\u2019ve used this API for the code below, you can choose any other API you like and feel free to modify the code as needed.", "First things first: create a new account here. Then go to Paper Account (simulator) and click on \u201cView\u201d on Your API Keys. Finally, click on \u201cGenerate Key\u201d and you will get your key id and your secret key. With these keys, you will connect to the server from Python and be able to download the data we want (you can do many more things but in this article we will only download the data).", "Now, do \u201cpip install alpaca_trade_api\u201d on your terminal and you\u2019re ready to connect to the API with the following code:", "You can see the official documentation and the code on Github.", "The basic call we will use to download data of an asset is the following:", "As you can see, we use the manager we\u2019ve instantiated above to call the method get_barset that returns a set of bars (or you can even think of them as candlesticks) and has the following set of parameters:", "With this, you can already download data from stocks but if you want to get lots of data, which you probably do, you will have to implement some code to deal with breaking up the time in steps and making a call for each step, otherwise, you will reach the 1000 limit very quickly (imagine that if you use a temporality of 1 minute you will be limited to getting 1000 minutes or about 16 hours per call).", "I have implemented the code to deal with this myself and I have put it here, because I\u2019m nice :))", "First, we need to break up the period in smaller steps, so we are sure we won\u2019t reach the limit of bars the API returns. For this, I have created the method break_period_in_dates_list, which takes a start_date and an end_date in the form of a datetime object and an int with the number of days per step. It is important that the days_per_step must not be too large because otherwise you will hit the limit and then you will not get all the data you want. The method returns a list of tuples of dates in which there is a start date and an end date.", "The next step is to format the dates as the API expects us to. In the method format_dates we do exactly this and return the list in the expected format.", "Now, once we get the barset, we need to create a Pandas dataframe with it. In particular, each barset is an object with the properties defined here. In the following method we convert the list of barsets in a list of dictionaries and then create a Pandas dataframe with it.", "Finally, we are ready to download our data. For this, I\u2019ve created the method download_data which takes as parameters the REST manager, the list of symbols for which we want the data, the start and end date and finally the filename in which the data will be stored as a csv file. Note that I choose to break up the time periods in 10 days, which works well for the 5 minute temporality used in the example, but you should change this parameter if you change the temporality.", "As a summary, here you can see the full code:", "I hope you found this article useful and can now get all the markets data for your machine learning projects. Thank you for reading! :)", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Data Scientist | Information Systems Engineer. Research Scientist of AI. More about me on https://www.linkedin.com/in/maufadel/"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fc69db51e7a0d&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-access-stocks-market-data-for-machine-learning-on-python-c69db51e7a0d&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-access-stocks-market-data-for-machine-learning-on-python-c69db51e7a0d&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-access-stocks-market-data-for-machine-learning-on-python-c69db51e7a0d&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-access-stocks-market-data-for-machine-learning-on-python-c69db51e7a0d&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----c69db51e7a0d--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----c69db51e7a0d--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@mauriciofadelargerich?source=post_page-----c69db51e7a0d--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@mauriciofadelargerich?source=post_page-----c69db51e7a0d--------------------------------", "anchor_text": "Mauricio Fadel Argerich"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fb3931df7d193&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-access-stocks-market-data-for-machine-learning-on-python-c69db51e7a0d&user=Mauricio+Fadel+Argerich&userId=b3931df7d193&source=post_page-b3931df7d193----c69db51e7a0d---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fc69db51e7a0d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-access-stocks-market-data-for-machine-learning-on-python-c69db51e7a0d&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fc69db51e7a0d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-access-stocks-market-data-for-machine-learning-on-python-c69db51e7a0d&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@austindistel?utm_source=medium&utm_medium=referral", "anchor_text": "Austin Distel"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "http://google dataset search", "anchor_text": "Google dataset search"}, {"url": "https://medium.com/swlh/build-an-ai-stock-trading-bot-for-free-4a46bec2a18", "anchor_text": "this great article about building a bot for trading"}, {"url": "https://alpaca.markets", "anchor_text": "Alpaca"}, {"url": "https://app.alpaca.markets/signup", "anchor_text": "create a new account here"}, {"url": "https://github.com/alpacahq/alpaca-trade-api-python", "anchor_text": "Github"}, {"url": "https://alpaca.markets/docs/api-documentation/api-v2/market-data/bars/", "anchor_text": "get_barset"}, {"url": "https://alpaca.markets/docs/api-documentation/api-v2/market-data/bars/", "anchor_text": "here"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----c69db51e7a0d---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/tag/artificial-intelligence?source=post_page-----c69db51e7a0d---------------artificial_intelligence-----------------", "anchor_text": "Artificial Intelligence"}, {"url": "https://medium.com/tag/data-science?source=post_page-----c69db51e7a0d---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/programming?source=post_page-----c69db51e7a0d---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/tag/money?source=post_page-----c69db51e7a0d---------------money-----------------", "anchor_text": "Money"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fc69db51e7a0d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-access-stocks-market-data-for-machine-learning-on-python-c69db51e7a0d&user=Mauricio+Fadel+Argerich&userId=b3931df7d193&source=-----c69db51e7a0d---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fc69db51e7a0d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-access-stocks-market-data-for-machine-learning-on-python-c69db51e7a0d&user=Mauricio+Fadel+Argerich&userId=b3931df7d193&source=-----c69db51e7a0d---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fc69db51e7a0d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-access-stocks-market-data-for-machine-learning-on-python-c69db51e7a0d&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----c69db51e7a0d--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fc69db51e7a0d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-access-stocks-market-data-for-machine-learning-on-python-c69db51e7a0d&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----c69db51e7a0d---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----c69db51e7a0d--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----c69db51e7a0d--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----c69db51e7a0d--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----c69db51e7a0d--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----c69db51e7a0d--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----c69db51e7a0d--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----c69db51e7a0d--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----c69db51e7a0d--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@mauriciofadelargerich?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@mauriciofadelargerich?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Mauricio Fadel Argerich"}, {"url": "https://medium.com/@mauriciofadelargerich/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "298 Followers"}, {"url": "https://www.linkedin.com/in/maufadel/", "anchor_text": "https://www.linkedin.com/in/maufadel/"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fb3931df7d193&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-access-stocks-market-data-for-machine-learning-on-python-c69db51e7a0d&user=Mauricio+Fadel+Argerich&userId=b3931df7d193&source=post_page-b3931df7d193--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F9d5b675a4898&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-access-stocks-market-data-for-machine-learning-on-python-c69db51e7a0d&newsletterV3=b3931df7d193&newsletterV3Id=9d5b675a4898&user=Mauricio+Fadel+Argerich&userId=b3931df7d193&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}