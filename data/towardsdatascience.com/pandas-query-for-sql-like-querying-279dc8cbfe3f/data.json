{"url": "https://towardsdatascience.com/pandas-query-for-sql-like-querying-279dc8cbfe3f", "time": 1683007006.7428522, "path": "towardsdatascience.com/pandas-query-for-sql-like-querying-279dc8cbfe3f/", "webpage": {"metadata": {"title": "Pandas Query for SQL-like Querying | by Matt Przybyla | Towards Data Science", "h1": "Pandas Query for SQL-like Querying", "description": "The dataset used in this analysis and tutorial for pandas query is a dummy dataset created to mimic a dataframe with both text and numeric features. Feel free to use your own .csv file with either or\u2026"}, "outgoing_paragraph_urls": [{"url": "https://pandas.pydata.org/", "anchor_text": "Pandas", "paragraph_index": 1}, {"url": "https://gist.github.com/mprzybyla123/1e564183cb64ba29fa17b23e94459db2", "anchor_text": "gist", "paragraph_index": 8}, {"url": "https://datascience2.medium.com/subscribe", "anchor_text": "https://datascience2.medium.com/subscribe", "paragraph_index": 11}], "all_paragraphs": ["The dataset used in this analysis and tutorial for pandas query is a dummy dataset created to mimic a dataframe with both text and numeric features. Feel free to use your own .csv file with either or both text and numeric columns to follow the tutorial.", "Pandas [2] is one of the most common libraries used by data scientists and machine learning engineers. It is mainly used in the exploratory data analysis step of building a model, as well as the ad-hoc analysis of model results. It also contains several functions, including the query function.", "The query function in pandas is a useful function that acts similarly to the \u2018where\u2019 clause in SQL. The benefit of it, however, is that you do not need to keep switching from pandas, Jupyter Notebook, and the SQL platform you are currently using. Some other benefits are listed below:", "I have compiled several examples of how the pandas query function can be used. The screenshot below includes a summary of useful examples with a query. Below, you can see how there are both text and numeric conditions that can be satisfied. Find rows where a certain column contains a certain text value, or create a descriptive statistic using the \u2018@\u2019 symbol. For example, \u2018@mean_of_column\u2019 is referencing a value you have established from using the \u2018.mean()\u2019 function. In line 65, rows returned had a \u2018Blue\u2019 value and a \u2018Confirmed_Recovery\u2019 value that is greater than the mean of \u2018Confirmed_Recovery\u2019 itself, while also including the \u2018Label_3\u2019 value.", "The tutorial code referenced in the grey box is all of the code used to demonstrate the query function. First, I imported pandas and read my dataframe. Then, I add new rows that I knew would satisfy certain conditions for displaying how the query function could be used. The \u2018append\u2019 function was useful here as well because it quickly added new rows to the dataframe without having to explicitly call out each column, once in a series format. I returned the \u2018df.tail()\u2019 to see if the rows returned were what I was expecting.", "I then returned rows where values from one column equalled that of another. You can also use this same logic but reverse it to see which values for the columns you specify to not equal one another. Next, you can compare if the value of one column is bigger than one value of another column, or vice versa.", "The most useful feature, I believe, of query is the \u2018@\u2019 method. Just like SQL where a subquery can be used to reference for selecting rows where certain conditions are satisfied, so can this method. The \u2018@\u2019 method saves the value that you want to compare against. For the example below, I looked at the mean of one column to compare.", "Lastly, you can execute several conditions in one line of code using the query function by inputting \u2018&\u2019 similar to that of \u2018and\u2019 in SQL.", "To see the code in python-format rather than written out, here is the embedded gist [4]:", "The query function from pandas is an easy and quick way to manipulate your dataframe. You can use SQL-like clauses that return certain rows from satisfying the conditions that you determine. It is beneficial if you are already in your Jupyter Notebook .ipynb file or .py file rather than having to re-upload or execute SQL commands on a SQL platform. Pandas query is also intuitive and does not take long to learn. I hope you found the examples in this article to be useful. Thank you for reading!", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Sr/MS Data Scientist. Top Writer in Artificial Intelligence, Technology, & Education. Towards Data Science. Subscribe: https://datascience2.medium.com/subscribe"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F279dc8cbfe3f&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpandas-query-for-sql-like-querying-279dc8cbfe3f&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpandas-query-for-sql-like-querying-279dc8cbfe3f&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpandas-query-for-sql-like-querying-279dc8cbfe3f&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpandas-query-for-sql-like-querying-279dc8cbfe3f&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----279dc8cbfe3f--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----279dc8cbfe3f--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://datascience2.medium.com/?source=post_page-----279dc8cbfe3f--------------------------------", "anchor_text": ""}, {"url": "https://datascience2.medium.com/?source=post_page-----279dc8cbfe3f--------------------------------", "anchor_text": "Matt Przybyla"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fabe5272eafd9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpandas-query-for-sql-like-querying-279dc8cbfe3f&user=Matt+Przybyla&userId=abe5272eafd9&source=post_page-abe5272eafd9----279dc8cbfe3f---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F279dc8cbfe3f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpandas-query-for-sql-like-querying-279dc8cbfe3f&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F279dc8cbfe3f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpandas-query-for-sql-like-querying-279dc8cbfe3f&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@melodyp?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "M\u00e9lody P"}, {"url": "https://unsplash.com/s/photos/panda?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Unsplash"}, {"url": "https://pandas.pydata.org/", "anchor_text": "Pandas"}, {"url": "https://gist.github.com/mprzybyla123/1e564183cb64ba29fa17b23e94459db2", "anchor_text": "gist"}, {"url": "https://unsplash.com/@melodyp?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "M\u00e9lody P"}, {"url": "https://unsplash.com/s/photos/panda?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Unsplash"}, {"url": "https://pandas.pydata.org/", "anchor_text": "pandas"}, {"url": "https://gist.github.com/mprzybyla123/1e564183cb64ba29fa17b23e94459db2", "anchor_text": "gist"}, {"url": "https://medium.com/tag/data-science?source=post_page-----279dc8cbfe3f---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/pandas?source=post_page-----279dc8cbfe3f---------------pandas-----------------", "anchor_text": "Pandas"}, {"url": "https://medium.com/tag/programming?source=post_page-----279dc8cbfe3f---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/tag/python?source=post_page-----279dc8cbfe3f---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/sql?source=post_page-----279dc8cbfe3f---------------sql-----------------", "anchor_text": "Sql"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F279dc8cbfe3f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpandas-query-for-sql-like-querying-279dc8cbfe3f&user=Matt+Przybyla&userId=abe5272eafd9&source=-----279dc8cbfe3f---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F279dc8cbfe3f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpandas-query-for-sql-like-querying-279dc8cbfe3f&user=Matt+Przybyla&userId=abe5272eafd9&source=-----279dc8cbfe3f---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F279dc8cbfe3f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpandas-query-for-sql-like-querying-279dc8cbfe3f&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----279dc8cbfe3f--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F279dc8cbfe3f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpandas-query-for-sql-like-querying-279dc8cbfe3f&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----279dc8cbfe3f---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----279dc8cbfe3f--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----279dc8cbfe3f--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----279dc8cbfe3f--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----279dc8cbfe3f--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----279dc8cbfe3f--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----279dc8cbfe3f--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----279dc8cbfe3f--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----279dc8cbfe3f--------------------------------", "anchor_text": ""}, {"url": "https://datascience2.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://datascience2.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Matt Przybyla"}, {"url": "https://datascience2.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "6.4K Followers"}, {"url": "https://datascience2.medium.com/subscribe", "anchor_text": "https://datascience2.medium.com/subscribe"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fabe5272eafd9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpandas-query-for-sql-like-querying-279dc8cbfe3f&user=Matt+Przybyla&userId=abe5272eafd9&source=post_page-abe5272eafd9--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F9cc71551512e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpandas-query-for-sql-like-querying-279dc8cbfe3f&newsletterV3=abe5272eafd9&newsletterV3Id=9cc71551512e&user=Matt+Przybyla&userId=abe5272eafd9&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}