{"url": "https://towardsdatascience.com/sql-lise-elasticsearch-query-for-data-analysis-using-docker-sql-client-and-python-part-1-bd4db524c452", "time": 1683004593.248739, "path": "towardsdatascience.com/sql-lise-elasticsearch-query-for-data-analysis-using-docker-sql-client-and-python-part-1-bd4db524c452/", "webpage": {"metadata": {"title": "SQL-lise Elasticsearch Query For Data Analysis Using Docker, SQL Client, And Python | by Aakash Rathor | Towards Data Science", "h1": "SQL-lise Elasticsearch Query For Data Analysis Using Docker, SQL Client, And Python", "description": "Elasticsearch is a No SQL database provided as an opensource as well as a commercial product by a company called Elastic. It is used for storing and performing big data analytics on data like web\u2026"}, "outgoing_paragraph_urls": [{"url": "https://github.com/deviantony/docker-elk", "anchor_text": "here", "paragraph_index": 9}, {"url": "https://www.elastic.co/downloads/past-releases#jdbc-client", "anchor_text": "here", "paragraph_index": 19}, {"url": "https://elasticsearch-py.readthedocs.io/en/master/", "anchor_text": "here", "paragraph_index": 26}, {"url": "https://www.instagram.com/_aakash.rathore/", "anchor_text": "Instagram", "paragraph_index": 31}, {"url": "http://www.linkedin.com/in/aakash-rathore-big-data-engineer", "anchor_text": "LinkedIn", "paragraph_index": 31}], "all_paragraphs": ["Elasticsearch is a No SQL database provided as an opensource as well as a commercial product by a company called Elastic. It is used for storing and performing big data analytics on data like web server logs, Event data from any app or sensor data in IoT.", "What makes elasticsearch popular is the simplicity to install and scales from few to hundreds of nodes without any extra software packages. It uses built-in REST API to perform queries on data.", "So you heard all the cool things Elasticsearch can do and you decided to used it in your project to store and analyze your logs or events or any other data. But you find it cumbersome to write a complex, nested query in JSON just to perform a simple analysis of your data stored in Elasticsearch.", "For example, a simple filter query in Elasticsearch looks like this:", "The same query can be written in SQL like this:", "Now, since starting with Elasticsearch 6.3 release, one of the plugin X-Pack is open and integrated by default as a feature in the Elasticsearch stack(ELK).", "We can use the features provided by the X-Pack plugin to analyze our data in Elasticsearch using SQL like queries instead of writing complex and nested JSON ones.", "We will look at 2 different approaches:", "First Approach- Analysing Elasticsearch data from DB client :", "First I will clone one of the free git repository which has all the required docker files for spinning an ELK cluster in local. You can also download/clone this repository from here.", "Now get in the directory where the project is cloned and run below docker command:", "You will get the below output if everything works fine:", "Let's check if all the services are up or not, using below command:", "We saw that out Elasticsearch service is running at port 9200 and Kibana at port 5601.", "I have added some sample data for demo purposes. If you are not working on your own data then you can also do the same using home page of Kibana as shown below:", "First, let's fetch the data using Elasticsearch REST API format. I am using curl to run below query on Flight sample data:", "Let's run the same query in the SQL language. For that open the Dbeaver client and click on add connection:", "Now add credentials and host details:", "Dbeaver will automatically download and install the required driver for making a connection to the Elasticsearch server.", "If you face any issue with the driver version, please download the required version from here. And add it in Edit Driver settings and click OK.", "Now click on Test Connection If everything works fine, you will get a success message as shown below:", "Now click Finish. You will see the connection to Elasticsearch server on left side:", "Now click on New SQL Editor:", "Now we will write the same query using SQL language:", "And Voila!! You will get output in a beautiful tabular format:", "Second Approach- Query data into pandas dataframe:", "The old way of fetching data from Elastic search into python is by using Python Elasticsearch client(Read doc here), which uses the same REST API query format that we saw in Curl.", "We will simplify this by using simple SQLAlchemy and elasticsearch-dbapi modules.", "In above code we used the same SQL query that we ran previously on our SQL client.", "Finally we will get the output as a pandas dataframe, you can use this dataframe for further analysis and visualization", "In this article, we saw how we can analyze our data present in Elasticsearch using simple SQL language instead of complex and nested REST API Query. We saw 2 different ways to query data from Elasticsearch one with DB client and another with python.", "I hope you like my article, If you want more information on this topic, you can follow and message me on Instagram or LinkedIn.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Working as a Data Engineer for earning money, and working with data for living my dream. I prefer Ubuntu over Windows and nano over notepad."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fbd4db524c452&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsql-lise-elasticsearch-query-for-data-analysis-using-docker-sql-client-and-python-part-1-bd4db524c452&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsql-lise-elasticsearch-query-for-data-analysis-using-docker-sql-client-and-python-part-1-bd4db524c452&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsql-lise-elasticsearch-query-for-data-analysis-using-docker-sql-client-and-python-part-1-bd4db524c452&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsql-lise-elasticsearch-query-for-data-analysis-using-docker-sql-client-and-python-part-1-bd4db524c452&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----bd4db524c452--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----bd4db524c452--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@aakash_rathore?source=post_page-----bd4db524c452--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@aakash_rathore?source=post_page-----bd4db524c452--------------------------------", "anchor_text": "Aakash Rathor"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F40aef34c503d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsql-lise-elasticsearch-query-for-data-analysis-using-docker-sql-client-and-python-part-1-bd4db524c452&user=Aakash+Rathor&userId=40aef34c503d&source=post_page-40aef34c503d----bd4db524c452---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fbd4db524c452&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsql-lise-elasticsearch-query-for-data-analysis-using-docker-sql-client-and-python-part-1-bd4db524c452&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fbd4db524c452&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsql-lise-elasticsearch-query-for-data-analysis-using-docker-sql-client-and-python-part-1-bd4db524c452&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://dbeaver.io/download/", "anchor_text": "here"}, {"url": "https://docs.docker.com/install/", "anchor_text": "here"}, {"url": "https://github.com/deviantony/docker-elk", "anchor_text": "here"}, {"url": "https://www.elastic.co/downloads/past-releases#jdbc-client", "anchor_text": "here"}, {"url": "https://elasticsearch-py.readthedocs.io/en/master/", "anchor_text": "here"}, {"url": "http://elastic:changeme@localhost:9200/", "anchor_text": "http://elastic:changeme@localhost:9200/"}, {"url": "https://www.instagram.com/_aakash.rathore/", "anchor_text": "Instagram"}, {"url": "http://www.linkedin.com/in/aakash-rathore-big-data-engineer", "anchor_text": "LinkedIn"}, {"url": "https://medium.com/tag/data-science?source=post_page-----bd4db524c452---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/data-visualization?source=post_page-----bd4db524c452---------------data_visualization-----------------", "anchor_text": "Data Visualization"}, {"url": "https://medium.com/tag/elasticsearch?source=post_page-----bd4db524c452---------------elasticsearch-----------------", "anchor_text": "Elasticsearch"}, {"url": "https://medium.com/tag/python?source=post_page-----bd4db524c452---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/programming?source=post_page-----bd4db524c452---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fbd4db524c452&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsql-lise-elasticsearch-query-for-data-analysis-using-docker-sql-client-and-python-part-1-bd4db524c452&user=Aakash+Rathor&userId=40aef34c503d&source=-----bd4db524c452---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fbd4db524c452&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsql-lise-elasticsearch-query-for-data-analysis-using-docker-sql-client-and-python-part-1-bd4db524c452&user=Aakash+Rathor&userId=40aef34c503d&source=-----bd4db524c452---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fbd4db524c452&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsql-lise-elasticsearch-query-for-data-analysis-using-docker-sql-client-and-python-part-1-bd4db524c452&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----bd4db524c452--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fbd4db524c452&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsql-lise-elasticsearch-query-for-data-analysis-using-docker-sql-client-and-python-part-1-bd4db524c452&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----bd4db524c452---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----bd4db524c452--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----bd4db524c452--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----bd4db524c452--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----bd4db524c452--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----bd4db524c452--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----bd4db524c452--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----bd4db524c452--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----bd4db524c452--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@aakash_rathore?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@aakash_rathore?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Aakash Rathor"}, {"url": "https://medium.com/@aakash_rathore/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "102 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F40aef34c503d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsql-lise-elasticsearch-query-for-data-analysis-using-docker-sql-client-and-python-part-1-bd4db524c452&user=Aakash+Rathor&userId=40aef34c503d&source=post_page-40aef34c503d--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fcebab27f117d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsql-lise-elasticsearch-query-for-data-analysis-using-docker-sql-client-and-python-part-1-bd4db524c452&newsletterV3=40aef34c503d&newsletterV3Id=cebab27f117d&user=Aakash+Rathor&userId=40aef34c503d&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}