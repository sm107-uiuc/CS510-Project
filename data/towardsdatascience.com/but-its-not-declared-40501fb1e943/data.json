{"url": "https://towardsdatascience.com/but-its-not-declared-40501fb1e943", "time": 1683016867.0565639, "path": "towardsdatascience.com/but-its-not-declared-40501fb1e943/", "webpage": {"metadata": {"title": "Variable Scope in Python. The extraordinary short guide to\u2026 | by Martin Thoma | Towards Data Science", "h1": "Variable Scope in Python", "description": "It\u2019s obvious that you cannot access a variable before it was declared. But if it was declared inside a loop, can you access it outside a loop? If it was declared in a function, can you access the\u2026"}, "outgoing_paragraph_urls": [{"url": "https://medium.com/analytics-vidhya/type-annotations-in-python-3-8-3b401384403d", "anchor_text": "type-checker for Python", "paragraph_index": 16}, {"url": "https://martinthoma.medium.com/membership", "anchor_text": "https://martinthoma.medium.com/membership", "paragraph_index": 24}], "all_paragraphs": ["It\u2019s obvious that you cannot access a variable before it was declared. But if it was declared inside a loop, can you access it outside a loop? If it was declared in a function, can you access the variable outside of the function?", "This kind of \u201cvariable lifetime\u201d is known as scoping. After reading this article, you will know the scoping rules of Python. Let\u2019s start!", "You can see all three in action here:", "There is a crucial point here:", "The scope of a variable is defined at compile-time!", "For this reason, the following code throws an exception:", "You can assign a value to a global variable in a function with the global statement:", "I need this very rarely. To make sure that I don\u2019t confuse anything, I like to use the globals() dictionary. In this case, I would rather use:", "You can assign a value to an enclosed variable with the nonlocal statement:", "The reason why the first works but not the second is that the first one calls a function of xs. It never assigns a value to xs. The second one is equal to", "When Python parses the assignment xs = ... , the xs is assigned the local scope. But in the local scope, xs does not exist before xs = xs + [42] is executed. Hence the error.", "In the first example with xs.append(42) , the global scope of xs is used. Hence we don\u2019t face any issue, because it is defined in the global scope.", "but the same does not work in a local scope", "The reason is that locals() == globals() within the global scope. Although built-ins are a bit special, they kind of live in the global scope.", "This one is confusing to people with a Java, C, or C++ background. This is valid Python code:", "But in Java you need to declare it upfront to be able to use the variable after the loop:", "mypy is a wide-spread type-checker for Python.", "So mypy doesn\u2019t like that you assign the string \u201cfoo\u201d to y , because it first read took the bool(external_service()) == True path and assumed that y would be an integer.", "Then you might want to do this:", "You can see that mypy assumes the y should be the same type in both cases. It\u2019s reasonable because otherwise the following analysis might get extremely complicated.", "That should have been expected. Assigning None is not possible to a type which does not include None \u2014 and adding None to that type might cause many more issues down the road.", "But I can also see when this feels strange. What might be cleaner is this:", "We have seen the three types of scopes in Python: Local, Enclosed, and global. We\u2019ve seen that you can access globals with the global keyword or over the globals() dictionary. Locals can be accessed with the locals() dictionary and enclosed variables with the nonlocal keyword. Keep that in mind and Python scoping should make sense \ud83d\ude42", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "I\u2019m a Software Engineer with over 10 years of Python experience (Backend/ML/AI). Support me via https://martinthoma.medium.com/membership"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F40501fb1e943&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbut-its-not-declared-40501fb1e943&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbut-its-not-declared-40501fb1e943&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbut-its-not-declared-40501fb1e943&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbut-its-not-declared-40501fb1e943&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----40501fb1e943--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----40501fb1e943--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://martinthoma.medium.com/?source=post_page-----40501fb1e943--------------------------------", "anchor_text": ""}, {"url": "https://martinthoma.medium.com/?source=post_page-----40501fb1e943--------------------------------", "anchor_text": "Martin Thoma"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F287aa3cfe747&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbut-its-not-declared-40501fb1e943&user=Martin+Thoma&userId=287aa3cfe747&source=post_page-287aa3cfe747----40501fb1e943---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F40501fb1e943&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbut-its-not-declared-40501fb1e943&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F40501fb1e943&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbut-its-not-declared-40501fb1e943&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://commons.wikimedia.org/wiki/File:Aurelia-aurita-3.jpg", "anchor_text": "source"}, {"url": "https://pixabay.com/de/photos/wtf-sms-social-media-akronym-1934220/", "anchor_text": "source"}, {"url": "https://medium.com/analytics-vidhya/type-annotations-in-python-3-8-3b401384403d", "anchor_text": "type-checker for Python"}, {"url": "https://medium.com/tag/programming?source=post_page-----40501fb1e943---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/tag/software-development?source=post_page-----40501fb1e943---------------software_development-----------------", "anchor_text": "Software Development"}, {"url": "https://medium.com/tag/python?source=post_page-----40501fb1e943---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/software-engineering?source=post_page-----40501fb1e943---------------software_engineering-----------------", "anchor_text": "Software Engineering"}, {"url": "https://medium.com/tag/python-internals?source=post_page-----40501fb1e943---------------python_internals-----------------", "anchor_text": "Python Internals"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F40501fb1e943&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbut-its-not-declared-40501fb1e943&user=Martin+Thoma&userId=287aa3cfe747&source=-----40501fb1e943---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F40501fb1e943&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbut-its-not-declared-40501fb1e943&user=Martin+Thoma&userId=287aa3cfe747&source=-----40501fb1e943---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F40501fb1e943&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbut-its-not-declared-40501fb1e943&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----40501fb1e943--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F40501fb1e943&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbut-its-not-declared-40501fb1e943&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----40501fb1e943---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----40501fb1e943--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----40501fb1e943--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----40501fb1e943--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----40501fb1e943--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----40501fb1e943--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----40501fb1e943--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----40501fb1e943--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----40501fb1e943--------------------------------", "anchor_text": ""}, {"url": "https://martinthoma.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://martinthoma.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Martin Thoma"}, {"url": "https://martinthoma.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "6.2K Followers"}, {"url": "https://martinthoma.medium.com/membership", "anchor_text": "https://martinthoma.medium.com/membership"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F287aa3cfe747&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbut-its-not-declared-40501fb1e943&user=Martin+Thoma&userId=287aa3cfe747&source=post_page-287aa3cfe747--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F7f2b4a3f3c8f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbut-its-not-declared-40501fb1e943&newsletterV3=287aa3cfe747&newsletterV3Id=7f2b4a3f3c8f&user=Martin+Thoma&userId=287aa3cfe747&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}