{"url": "https://towardsdatascience.com/how-to-deploy-your-custom-ml-model-with-streamlit-and-heroku-53456cb054fb", "time": 1683016564.075103, "path": "towardsdatascience.com/how-to-deploy-your-custom-ml-model-with-streamlit-and-heroku-53456cb054fb/", "webpage": {"metadata": {"title": "How to Deploy your Custom ML Model with Streamlit and Heroku | by Aren Carpenter | Towards Data Science", "h1": "How to Deploy your Custom ML Model with Streamlit and Heroku", "description": "I\u2019ve always wanted to host some of my data science projects to the web so that my models could be interactive and have a greater reach. The data professor (Chanin Nantasenamat) on YouTube had a great\u2026"}, "outgoing_paragraph_urls": [{"url": "https://www.youtube.com/channel/UCV8e2g4IWQqK71bbzGDEI4Q", "anchor_text": "data professor", "paragraph_index": 0}, {"url": "https://www.streamlit.io/", "anchor_text": "Streamlit", "paragraph_index": 0}, {"url": "https://github.com/ArenCarpenter/Diabetes_Hospitalizations", "anchor_text": "repo", "paragraph_index": 1}, {"url": "https://github.com/ArenCarpenter/Diabetes_Hospitalizations/blob/master/web_app.py", "anchor_text": "link", "paragraph_index": 6}, {"url": "https://github.com/ArenCarpenter/Diabetes_Hospitalizations/blob/master/web_app.py", "anchor_text": "full file", "paragraph_index": 12}, {"url": "https://towardsdatascience.com/from-streamlit-to-heroku-62a655b7319", "anchor_text": "previous guide", "paragraph_index": 19}, {"url": "http://streamlit==0.71.0 scikit-learn==0.23.2", "anchor_text": "Hamilton Chang\u2019s original guide", "paragraph_index": 23}, {"url": "https://diabetes-hospitalization.herokuapp.com/", "anchor_text": "here", "paragraph_index": 27}], "all_paragraphs": ["I\u2019ve always wanted to host some of my data science projects to the web so that my models could be interactive and have a greater reach. The data professor (Chanin Nantasenamat) on YouTube had a great tutorial series on Streamlit, an open-source interactive data app platform, that appeared to offer everything I was looking for!", "So I returned to a previous project, predicting the need for the hospitalization of diabetic patients based on electronic health records (EHR). My GitHub repo contains all of the code for the original modeling and the necessary additions for hosting on Heroku.", "But! I had a problem. Even when hobbling together a series of other guides and tutorials for simpler apps, I was still having problems deploying the final app to Heroku! So here\u2019s another guide, hopefully this one helps you follow in my footsteps.", "This guide is from final model to hosting. So I\u2019m assuming you\u2019ve done the due diligence for developing a model, from Data and Business Understanding through Cleaning and EDA to Modeling and Evaluation.", "I developed a multiple logistic regression model using scikit-learn\u2019s LogisticRegressionCV. It\u2019s called logreg_nopoly because no polynomial or interaction features were included.", "Your pickled model should be in the root directory.", "Here\u2019s the link to my file. My model had 19 features and a mix of categorical and continuous features, so I needed to clean my data and perform the same transformations (feature engineering and get_dummies) on the user inputted data.", "Streamlit allows for easy markdown style headings and text as well as embedding images and graphs. In order to feed data into the model to get a prediction, you should create a function that allows the user to define a value for each of your features.", "st.sidebar.selectbox(\u2018name\u2019, (\u2018option1\u2019, \u2018option2\u2019, \u2026) where all categories in that feature are included", "The first half of the function will create the various sliders and boxes that the user will interact with on the app. These can be in any order. I put some of the most influential features at the top of the stack to make the experience of altering the prediction easier.", "The second half of the function is creating a dictionary of the data set feature names (key) and the variable we created above for the respective feature (value). This is then loaded into a pandas DataFrame. This dictionary should be in order of how the columns are listed in the original data so that our input_df and original df match up when we concatenate.", "You\u2019ll note that in order to make sure that all categorical variables are encoded the same way (so that our get_dummies encodes all possible entries in the feature) we need to perform the same data cleaning and feature engineering steps in this file, and we need to concat this user input to the dataset.", "Some feature engineering steps as an example \u2014 here is the full file to examine. Here I create some binary features determining whether a patient received a HbA1c test and if their medication was changed in response.", "Then we drop the target feature (\u2018readmitted\u2019) and concat the user input before encoding.", "Now we will read in our pickled model in order to make a prediction on the user input! The st.write method accepts strings to display, but it will display pandas DataFrames and Series natively, as well.", "Once you have the modeling taken care of, you can host the Streamlit locally and add in the necessary markdown to build out the app.", "This will install Streamlit (if not already installed) and open the demo page.", "Now that you have a web_app.py file ready (or close enough), open it locally for real-time viewing and editing. You should be in the app\u2019s root directory.", "Once open, anytime you update and save the .py file in your IDE, the Streamlit app will detect the changes and can be set to automatically update the app.", "So your app is ready to go and is running locally! Excellent! So now we\u2019ll need to create some files in this root directory to feed to Heroku. This section is heavily informed by this previous guide, however I\u2019ve changed the contents of the setup.sh file as the original guide didn\u2019t work for me.", "In Jupyter, create a file called Procfile. Paste this as the only content. This tells Heroku to run the setup.sh file we are about to create and run the Streamlit command we ran earlier to run our app.", "In Jupyter, create a file called requirements.txt. Here is where you can specify the necessary packages and their versions to make sure your app doesn\u2019t break with further updates. Here is my version (I need sklearn because of the model I\u2019m using).", "In Jupyter, create a file called setup.sh. This file creates a directory and sets some variables used by Heroku when hosting your app and stores them in a config.toml file (an open-source configuration file format).", "From here you can follow Hamilton Chang\u2019s original guide! He can walk you through Loading Your Files, Running the App, and Deploying the App. I\u2019ll add just one aspect\u2026", "Heroku gives you a randomly-generated app name. After renaming your app deployment, you\u2019ll have to update the Git remote path so you can continue to update the app and push changes.", "First, remove the original heroku path. Then, add a new remote path. I named mine diabetes-hospitalization (i.e. what I named my deployed app).", "Then you can update the app and push changes to your repo!", "I hope this guide is helpful and up-to-date (!). These steps allowed me to host an interactive version of a model to the web for users to interact with! You can visit it here and play around. Having a working demo of your projects is a great way to expand the reach of your projects to employers, and it shows that you can deploy a working/robust model. While Streamlit is not the most powerful tool out there, it\u2019s ease of use and open-source nature makes it uniquely suited for beginner projects to get your feet wet!", "I\u2019m always looking to connect and explore other projects! Or let me know if something in this guide could be expanded/isn\u2019t working!", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Data. BI. Goldman Sachs. 150k readers"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F53456cb054fb&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-deploy-your-custom-ml-model-with-streamlit-and-heroku-53456cb054fb&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-deploy-your-custom-ml-model-with-streamlit-and-heroku-53456cb054fb&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-deploy-your-custom-ml-model-with-streamlit-and-heroku-53456cb054fb&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-deploy-your-custom-ml-model-with-streamlit-and-heroku-53456cb054fb&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----53456cb054fb--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----53456cb054fb--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://arencarpenter.medium.com/?source=post_page-----53456cb054fb--------------------------------", "anchor_text": ""}, {"url": "https://arencarpenter.medium.com/?source=post_page-----53456cb054fb--------------------------------", "anchor_text": "Aren Carpenter"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Ff940c24a2ebf&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-deploy-your-custom-ml-model-with-streamlit-and-heroku-53456cb054fb&user=Aren+Carpenter&userId=f940c24a2ebf&source=post_page-f940c24a2ebf----53456cb054fb---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F53456cb054fb&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-deploy-your-custom-ml-model-with-streamlit-and-heroku-53456cb054fb&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F53456cb054fb&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-deploy-your-custom-ml-model-with-streamlit-and-heroku-53456cb054fb&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://towardsdatascience.com/data-science/home", "anchor_text": "Data Science"}, {"url": "https://www.youtube.com/channel/UCV8e2g4IWQqK71bbzGDEI4Q", "anchor_text": "data professor"}, {"url": "https://www.streamlit.io/", "anchor_text": "Streamlit"}, {"url": "https://diabetes-hospitalization.herokuapp.com/", "anchor_text": "Here\u2019s my final page"}, {"url": "https://github.com/ArenCarpenter/Diabetes_Hospitalizations", "anchor_text": "repo"}, {"url": "https://unsplash.com/@allwithzest", "anchor_text": "Reka Biro-Horvath"}, {"url": "https://unsplash.com/", "anchor_text": "Unsplash"}, {"url": "https://github.com/ArenCarpenter/Diabetes_Hospitalizations/blob/master/web_app.py", "anchor_text": "link"}, {"url": "https://github.com/ArenCarpenter/Diabetes_Hospitalizations/blob/master/web_app.py", "anchor_text": "full file"}, {"url": "https://towardsdatascience.com/from-streamlit-to-heroku-62a655b7319", "anchor_text": "previous guide"}, {"url": "http://streamlit==0.71.0 scikit-learn==0.23.2", "anchor_text": "Hamilton Chang\u2019s original guide"}, {"url": "https://diabetes-hospitalization.herokuapp.com/", "anchor_text": "here"}, {"url": "https://www.linkedin.com/in/aren-carpenter/", "anchor_text": "LinkedIn"}, {"url": "https://arencarpenter.medium.com/", "anchor_text": "Medium"}, {"url": "https://github.com/ArenCarpenter", "anchor_text": "GitHub"}, {"url": "https://medium.com/tag/streamlit?source=post_page-----53456cb054fb---------------streamlit-----------------", "anchor_text": "Streamlit"}, {"url": "https://medium.com/tag/heroku?source=post_page-----53456cb054fb---------------heroku-----------------", "anchor_text": "Heroku"}, {"url": "https://medium.com/tag/healthcare?source=post_page-----53456cb054fb---------------healthcare-----------------", "anchor_text": "Healthcare"}, {"url": "https://medium.com/tag/data-science?source=post_page-----53456cb054fb---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----53456cb054fb---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F53456cb054fb&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-deploy-your-custom-ml-model-with-streamlit-and-heroku-53456cb054fb&user=Aren+Carpenter&userId=f940c24a2ebf&source=-----53456cb054fb---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F53456cb054fb&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-deploy-your-custom-ml-model-with-streamlit-and-heroku-53456cb054fb&user=Aren+Carpenter&userId=f940c24a2ebf&source=-----53456cb054fb---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F53456cb054fb&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-deploy-your-custom-ml-model-with-streamlit-and-heroku-53456cb054fb&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----53456cb054fb--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F53456cb054fb&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-deploy-your-custom-ml-model-with-streamlit-and-heroku-53456cb054fb&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----53456cb054fb---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----53456cb054fb--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----53456cb054fb--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----53456cb054fb--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----53456cb054fb--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----53456cb054fb--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----53456cb054fb--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----53456cb054fb--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----53456cb054fb--------------------------------", "anchor_text": ""}, {"url": "https://arencarpenter.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://arencarpenter.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Aren Carpenter"}, {"url": "https://arencarpenter.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "312 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Ff940c24a2ebf&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-deploy-your-custom-ml-model-with-streamlit-and-heroku-53456cb054fb&user=Aren+Carpenter&userId=f940c24a2ebf&source=post_page-f940c24a2ebf--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F514e15282e8e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-deploy-your-custom-ml-model-with-streamlit-and-heroku-53456cb054fb&newsletterV3=f940c24a2ebf&newsletterV3Id=514e15282e8e&user=Aren+Carpenter&userId=f940c24a2ebf&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}