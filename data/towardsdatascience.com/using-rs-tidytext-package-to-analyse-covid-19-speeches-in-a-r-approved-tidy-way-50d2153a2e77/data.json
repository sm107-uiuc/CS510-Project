{"url": "https://towardsdatascience.com/using-rs-tidytext-package-to-analyse-covid-19-speeches-in-a-r-approved-tidy-way-50d2153a2e77", "time": 1683018094.8087978, "path": "towardsdatascience.com/using-rs-tidytext-package-to-analyse-covid-19-speeches-in-a-r-approved-tidy-way-50d2153a2e77/", "webpage": {"metadata": {"title": "Using R\u2019s Tidytext package to analyse Covid-19 speeches | by Zachary Lim | Towards Data Science", "h1": "Using R\u2019s Tidytext package to analyse Covid-19 speeches", "description": "I learnt about tidytext awhile ago and thought it was such a neat framework. The essential idea behind it was that you could perform text mining/sentiment analysis using dplyr and \"tidy\" dataframes\u2026"}, "outgoing_paragraph_urls": [{"url": "https://gist.github.com/zachlim98/www.tidytextmining.com/", "anchor_text": "tidytext", "paragraph_index": 0}, {"url": "https://www.pmo.gov.sg/Newsroom/PM-Lee-Hsien-Loong-on-the-Novel-Coronavirus-nCoV-Situation-in-Singapore-on-8-February-2020", "anchor_text": "here", "paragraph_index": 2}, {"url": "https://www.tidytextmining.com/index.html", "anchor_text": "Silge and Robinson", "paragraph_index": 10}, {"url": "https://www.cs.uic.edu/~liub/FBS/sentiment-analysis.html", "anchor_text": "Bing Liu", "paragraph_index": 15}], "all_paragraphs": ["I learnt about tidytext awhile ago and thought it was such a neat framework. The essential idea behind it was that you could perform text mining/sentiment analysis using dplyr and \"tidy\" dataframes. So, I just had to try it out! I looked around for awhile to find things to perform this exploration on and finally settled on Singapore Prime Minister Lee's Covid-19 related speeches - thought it might be fun to see how that changed over time. As always, a tl;dr to get things going.", "( a side note here: this was a rather basic and easy introduction to tidytext but it really is a much more powerful package and a lot more (which I plan to write on when I have more time) can be done with it)", "It was quite easy to get the data since all of the speeches had been nicely organised and transcribed (in true Singapore fashion!). If you\u2019re interested, the first one can be found here and the rest are just in the search pages after that. I initially wanted to use beautifulsoup and selenium to scrape it but... the web addresses were not nicely organised by date and weren't numbered properly but instead used full titles. Given that there were only 8 speeches between Feb and now, I decided to do it manually. Granted, there were probably better ways of doing it and I would likely have tried harder if there had been more speeches.", "But, given that there were only 8 speeches, I just copied and pasted each one into its own little .txt file and that was done!", "Next, I had to clean the data and this was where tidytext really came through. The tidy way of storing the data made it really easy to clean the data since I could manipulate it as I would a normal tidy dataframe - pretty neat!", "Most of this step is self-explanatory. I basically imported the bunch of libraries that I would have to use and also imported a list of stop words. Then I got the names of all the files in the folder where the speeches were kept. Following which, I used a for loop to import each of the files and create a tibble for every speech.", "I used stri_remove_empty because there was somehow an empty line between each line of the speech. I then used unnest_tokens which is really the core of the whole tidytext framework. This command facilitates the tokenisation of the words (i.e. breaking them up into individual words) and also does a whole bunch of clean-up (e.g. removing punctuation, changing everything to small caps etc.). This would obviously not be the most useful thing in certain circumstances (for e.g. when an exclamation mark or question mark could provide good context clues) but the default settings were fine for our basic usage.", "Next, I used an anti_join to remove all the \"stop words\" - words in the English language which functioned as filler or connecting words (i.e. probably did not provide much important meaning). I then used assign to create a new df for each of the speeches. Finally, I bound all the speeches together in one giant df, giving them all a new column of properly formatted dates.", "With that, it was time for the fun bits!", "I thought this would be interesting to look at because it would give a sense of which words were used the most over the course of the year. When the graph was out, it was also interesting because it actually gave a relatively good summary of the speech and the important points within that speech.", "Most of this is pretty self-explanatory. I used regex to and stri_extract to ensure that only words (and not random symbols) were extracted and dropped all the empty rows. I then used count to provide a count of each word, grouping it by date. Next, I created a proportion column as recommended by Silge and Robinson since comparing actual counts would be misleading if comparing between a very long and a very short speech.", "I then grouped it by dates before arranging it by proportion, making sure to set .by_group to TRUE ensure that it would sort it within the groups. Finally, I sliced out the top 5 words from each group. I also created a new \"tohigh\" column to help with graphing later on as I wanted to highlight the top word used. To achieve this, I used ifelse and max() to find the highest proportion value and then set the tohigh column to \"Yes\".", "Graphing it was rather fun! I wanted to facet the graphs and also ensure that there were arranged from highest to lowest. To do that, I used reorder_within so that it would be ordered within their respective date groups and then added scale_x_reordered so that the labels would come out properly (try it without scale_x_reordered and you'll see what I mean!)", "It was quite the interesting result because of the fact that it highlighted quite well the key takeaways of each speech. For instance, around the end of April, Singapore experienced an outbreak of Covid-19 cases amongst the foreign workers (hence the top word used being \u201cworkers\u201d). Or on 10th April when a lockdown (\u201ccircuit breaker\u201d was what the government called it) was put in place and hence \u201chome\u201d was the top word. And obviously for 14th Dec, with the vaccines out, it was the word of the month.", "The keener eye might notice that I chose not to lemmatize or stem the words. I chose not to do it for two reasons: (a) I felt that because of the relatively short length of the speeches, lemmatizing the words might detract from some of its meaning. For instance, Singapore and Singaporean are two words that likely would have been fused. However, I felt that in the context of relatively short speeches, they carried different contexts/meanings. Of course, this meant that things like \u201cvaccines\u201d and \u201cvaccine\u201d appeared in the top 5 words for December but this issue (as you can see) didn\u2019t affect the other 7 speeches. (b) I wanted to try to use only the tidytext package as much as possible for the actual data manipulation and it surprisingly (unless I'm wrong then please let me know!) doesn't have any in-built functions to do that. One would have to turn to textstem to do that.", "I did this in quite the basic way. Going along with the \u201ctidytext\u201d idea, I performed an inner join with the words in the Bing Liu sentiment corpus, grouped it by date, counted the sentiments and then took the difference between the number of positive and negative sentiments. I also reformatted the dates for graphing purposes.", "Here, I had to use \u201cfactor\u201d to get the dates to follow the same order as the df.", "Even though it was a rather quick and dirty way of doing it, I must say that the results were pretty good. Again, it reflected the general sentiments of the time \u2014 low/negative points in Feb and Apr when the virus was first breaking out and when the virus hit the workers hard. To obviously much brighter days when the vaccine came out!", "Finally, a cute one just to see how the number of keywords used changed over the various speeches.", "As someone in the Reddit thread said, \u201cVaccines go brrrr\u201d", "Welp! That was a rather long article \u2014 thanks for reading to the end. In this article, we looked briefly at how one can use the tidytext package to perform text mining in a R-approved tidy way. I found it really easy to use, especially as someone who was familiar with working with dataframes. It felt much more intuitive than working with raw strings or other types of corpus so definitely something to consider!", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Hi! I\u2019m learning to explore data and think about personal finance (not always in that order)"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F50d2153a2e77&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-rs-tidytext-package-to-analyse-covid-19-speeches-in-a-r-approved-tidy-way-50d2153a2e77&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-rs-tidytext-package-to-analyse-covid-19-speeches-in-a-r-approved-tidy-way-50d2153a2e77&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-rs-tidytext-package-to-analyse-covid-19-speeches-in-a-r-approved-tidy-way-50d2153a2e77&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-rs-tidytext-package-to-analyse-covid-19-speeches-in-a-r-approved-tidy-way-50d2153a2e77&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----50d2153a2e77--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----50d2153a2e77--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://nosparechange.medium.com/?source=post_page-----50d2153a2e77--------------------------------", "anchor_text": ""}, {"url": "https://nosparechange.medium.com/?source=post_page-----50d2153a2e77--------------------------------", "anchor_text": "Zachary Lim"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fe7a41934a7cc&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-rs-tidytext-package-to-analyse-covid-19-speeches-in-a-r-approved-tidy-way-50d2153a2e77&user=Zachary+Lim&userId=e7a41934a7cc&source=post_page-e7a41934a7cc----50d2153a2e77---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F50d2153a2e77&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-rs-tidytext-package-to-analyse-covid-19-speeches-in-a-r-approved-tidy-way-50d2153a2e77&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F50d2153a2e77&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-rs-tidytext-package-to-analyse-covid-19-speeches-in-a-r-approved-tidy-way-50d2153a2e77&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://gist.github.com/zachlim98/www.tidytextmining.com/", "anchor_text": "tidytext"}, {"url": "https://www.pmo.gov.sg/Newsroom/PM-Lee-Hsien-Loong-on-the-Novel-Coronavirus-nCoV-Situation-in-Singapore-on-8-February-2020", "anchor_text": "here"}, {"url": "https://www.tidytextmining.com/index.html", "anchor_text": "Silge and Robinson"}, {"url": "https://www.cs.uic.edu/~liub/FBS/sentiment-analysis.html", "anchor_text": "Bing Liu"}, {"url": "https://zachlim98.github.io/me/2020-12/covid19-speech-analysis", "anchor_text": "https://zachlim98.github.io/me/2020-12/covid19-speech-analysis"}, {"url": "https://medium.com/tag/text-mining?source=post_page-----50d2153a2e77---------------text_mining-----------------", "anchor_text": "Text Mining"}, {"url": "https://medium.com/tag/sentiment-analysis?source=post_page-----50d2153a2e77---------------sentiment_analysis-----------------", "anchor_text": "Sentiment Analysis"}, {"url": "https://medium.com/tag/covid-19?source=post_page-----50d2153a2e77---------------covid_19-----------------", "anchor_text": "Covid-19"}, {"url": "https://medium.com/tag/r?source=post_page-----50d2153a2e77---------------r-----------------", "anchor_text": "R"}, {"url": "https://medium.com/tag/tidytext?source=post_page-----50d2153a2e77---------------tidytext-----------------", "anchor_text": "Tidytext"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F50d2153a2e77&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-rs-tidytext-package-to-analyse-covid-19-speeches-in-a-r-approved-tidy-way-50d2153a2e77&user=Zachary+Lim&userId=e7a41934a7cc&source=-----50d2153a2e77---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F50d2153a2e77&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-rs-tidytext-package-to-analyse-covid-19-speeches-in-a-r-approved-tidy-way-50d2153a2e77&user=Zachary+Lim&userId=e7a41934a7cc&source=-----50d2153a2e77---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F50d2153a2e77&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-rs-tidytext-package-to-analyse-covid-19-speeches-in-a-r-approved-tidy-way-50d2153a2e77&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----50d2153a2e77--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F50d2153a2e77&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-rs-tidytext-package-to-analyse-covid-19-speeches-in-a-r-approved-tidy-way-50d2153a2e77&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----50d2153a2e77---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----50d2153a2e77--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----50d2153a2e77--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----50d2153a2e77--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----50d2153a2e77--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----50d2153a2e77--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----50d2153a2e77--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----50d2153a2e77--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----50d2153a2e77--------------------------------", "anchor_text": ""}, {"url": "https://nosparechange.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://nosparechange.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Zachary Lim"}, {"url": "https://nosparechange.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "73 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fe7a41934a7cc&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-rs-tidytext-package-to-analyse-covid-19-speeches-in-a-r-approved-tidy-way-50d2153a2e77&user=Zachary+Lim&userId=e7a41934a7cc&source=post_page-e7a41934a7cc--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F52bb156308c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-rs-tidytext-package-to-analyse-covid-19-speeches-in-a-r-approved-tidy-way-50d2153a2e77&newsletterV3=e7a41934a7cc&newsletterV3Id=52bb156308c&user=Zachary+Lim&userId=e7a41934a7cc&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}