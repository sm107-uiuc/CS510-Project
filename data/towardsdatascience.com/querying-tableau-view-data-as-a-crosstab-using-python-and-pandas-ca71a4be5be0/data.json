{"url": "https://towardsdatascience.com/querying-tableau-view-data-as-a-crosstab-using-python-and-pandas-ca71a4be5be0", "time": 1683015041.14539, "path": "towardsdatascience.com/querying-tableau-view-data-as-a-crosstab-using-python-and-pandas-ca71a4be5be0/", "webpage": {"metadata": {"title": "Downloading Tableau crosstabs like a boss using Python and Pandas | by Elliott Stam | Towards Data Science", "h1": "Downloading Tableau crosstabs like a boss using Python and Pandas", "description": "In another article we covered how you can query your Tableau view data like a boss, and I received some feedback from one person that they wanted to tumble deeper down the rabbit hole. That brings us\u2026"}, "outgoing_paragraph_urls": [{"url": "https://medium.com/snake-charmer-python-and-analytics/query-your-tableau-view-data-like-a-boss-using-python-and-pandas-68483abac86", "anchor_text": "another article", "paragraph_index": 0}, {"url": "https://github.com/divinorum-webb/tableau-api-lib", "anchor_text": "tableau-api-lib", "paragraph_index": 2}, {"url": "https://wiki.python.org/moin/BeginnersGuide/Download", "anchor_text": "guide to install Python", "paragraph_index": 3}, {"url": "https://medium.com/snake-charmer-python-and-analytics/tableau-server-on-tap-getting-started-89bc5f0095fa", "anchor_text": "this getting started tutorial", "paragraph_index": 9}, {"url": "https://medium.com/snake-charmer-python-and-analytics/tableau-server-on-tap-authenticating-with-a-personal-access-token-7f4affaece3e", "anchor_text": "how to use them", "paragraph_index": 11}], "all_paragraphs": ["In another article we covered how you can query your Tableau view data like a boss, and I received some feedback from one person that they wanted to tumble deeper down the rabbit hole.", "That brings us to this article, where we will demonstrate how you can download view data for a table (crosstab) in Tableau, and reconstruct the shape of that data as it appeared in Tableau.", "This tutorial walks through using the Python tableau-api-lib package and is part of a series on how to tap Tableau Server like a keg, giving you control over Tableau Server\u2019s REST API.", "These tutorials assume you have Python 3 installed already. If you do not have Python 3 yet, this will get you started: guide to install Python.", "Let\u2019s say you have a crosstab in Tableau and you need to download it for whatever reason. If you go about doing this with the Tableau REST API, you\u2019ll get the data you want\u2026 it just won\u2019t necessarily be in the format you need.", "The main issue is that when you download the view data, you are not going to get data in the form of a \u2018pivot table\u2019 or a crosstab. You\u2019ll have a raw table in database format, where all your dimensions appear as columns.", "Let\u2019s see how we can download the data and shape it back into the table or crosstab you had in mind.", "Here\u2019s a quick look at the Tableau view whose data we\u2019ll download:", "Even if you\u2019re a pro at these tutorials, do yourself a favor and pull the latest version of the library.", "New to this Python stuff? Don\u2019t sweat it, you\u2019ll catch on quick. Follow this getting started tutorial. That tutorial walks you through getting connected to Tableau Server using tableau-api-lib.", "Use the code below as a template for getting connected to your server. In future steps, we will build upon this boilerplate with one-off lines of code. At the end of the article, you\u2019ll find a consolidated block of code you can copy/paste for your convenience.", "Fun fact: you can also use personal access tokens, assuming you are on Tableau Server 2019.4 or newer. If you\u2019re all about the access tokens, check out my article for details on how to use them.", "We want to query a view, so first we\u2019ll need to fetch the ID value for the desired view.", "Here\u2019s what my resulting DataFrame looks like:", "If we wanted to, we could search through manually and copy/paste the relevant \u2018id\u2019 value. However, if you are working in a large Tableau environment then you might have many views with the same name.", "For that reason, let\u2019s do this the right way and unpack the details in our \u2018workbook\u2019 column so we can filter on the workbook name to make sure we are really getting the droid we\u2019re looking for.", "Using a handy tableau-api-lib function, we can easily unpack the workbook details. You can see how this function is imported by referencing the complete code provided at the end of the article.", "And now we can quickly verify that the resulting DataFrame has the workbook details unpacked:", "Now we can easily filter on the workbook name we care about. In my case, the workbook is named \u2018query_view_as_crosstab\u2019 and the view I\u2019m wanting to download is named \u2018Visual C\u2019. To reiterate a point made earlier, we want to filter on the workbook because it\u2019s very likely that view names are not unique across our entire Tableau site but they are always unique within workbooks.", "Now that we\u2019ve isolated our views to the workbook we are interested in, let\u2019s get the view ID for the target view.", "Equipped with the view ID, we can now query the view data:", "The tableau-api-lib querying function \u2018get_view_data_dataframe()\u2019 returns a Pandas DataFrame, and mine looks like this:", "It\u2019s a good start, but we need to pivot this data such that \u2018Sub-Category\u2019 defines our rows, \u2018Year of Order Date\u2019 defines our columns, and \u2018Sales\u2019 fills in the values of the pivoted table.", "Before we do the final step of pivoting the table, let\u2019s quickly apply an optional improvement to the data: renaming the weirdly-named \u2018Year of Order Date\u2019 column to \u2018Year\u2019.", "Ah, that\u2019s better. Now let\u2019s wrap this thing up!", "Before we call it a day, let\u2019s quickly dissect this last bit of code. The Pandas DataFrame \u2018pivot_table()\u2019 function has provided us an easy way to redefine the structure of our data.", "The \u2018values\u2019 parameter defines what will fill in the values of the table, while the \u2018index\u2019 value defines the rows and \u2018columns\u2019 defines\u2026 the columns!", "Use this GitHub gist as a starting point for modifying the steps we have covered in this tutorial for your own use.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Data scientist and author. Sometimes seen falling down mountains with a snowboard strapped to my feet."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fca71a4be5be0&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fquerying-tableau-view-data-as-a-crosstab-using-python-and-pandas-ca71a4be5be0&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fquerying-tableau-view-data-as-a-crosstab-using-python-and-pandas-ca71a4be5be0&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fquerying-tableau-view-data-as-a-crosstab-using-python-and-pandas-ca71a4be5be0&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fquerying-tableau-view-data-as-a-crosstab-using-python-and-pandas-ca71a4be5be0&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----ca71a4be5be0--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----ca71a4be5be0--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@elliottstam?source=post_page-----ca71a4be5be0--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@elliottstam?source=post_page-----ca71a4be5be0--------------------------------", "anchor_text": "Elliott Stam"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fd193f11526c9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fquerying-tableau-view-data-as-a-crosstab-using-python-and-pandas-ca71a4be5be0&user=Elliott+Stam&userId=d193f11526c9&source=post_page-d193f11526c9----ca71a4be5be0---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fca71a4be5be0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fquerying-tableau-view-data-as-a-crosstab-using-python-and-pandas-ca71a4be5be0&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fca71a4be5be0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fquerying-tableau-view-data-as-a-crosstab-using-python-and-pandas-ca71a4be5be0&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@nhillier?utm_source=medium&utm_medium=referral", "anchor_text": "Nick Hillier"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://medium.com/snake-charmer-python-and-analytics/query-your-tableau-view-data-like-a-boss-using-python-and-pandas-68483abac86", "anchor_text": "another article"}, {"url": "https://github.com/divinorum-webb/tableau-api-lib", "anchor_text": "tableau-api-lib"}, {"url": "https://wiki.python.org/moin/BeginnersGuide/Download", "anchor_text": "guide to install Python"}, {"url": "https://medium.com/snake-charmer-python-and-analytics/tableau-server-on-tap-getting-started-89bc5f0095fa", "anchor_text": "this getting started tutorial"}, {"url": "https://tableaupoc.interworks.com%27/", "anchor_text": "https://YourTableauServer.com'"}, {"url": "https://medium.com/snake-charmer-python-and-analytics/tableau-server-on-tap-authenticating-with-a-personal-access-token-7f4affaece3e", "anchor_text": "how to use them"}, {"url": "https://medium.com/tag/tableau?source=post_page-----ca71a4be5be0---------------tableau-----------------", "anchor_text": "Tableau"}, {"url": "https://medium.com/tag/python?source=post_page-----ca71a4be5be0---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/data?source=post_page-----ca71a4be5be0---------------data-----------------", "anchor_text": "Data"}, {"url": "https://medium.com/tag/programming?source=post_page-----ca71a4be5be0---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/tag/data-science?source=post_page-----ca71a4be5be0---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fca71a4be5be0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fquerying-tableau-view-data-as-a-crosstab-using-python-and-pandas-ca71a4be5be0&user=Elliott+Stam&userId=d193f11526c9&source=-----ca71a4be5be0---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fca71a4be5be0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fquerying-tableau-view-data-as-a-crosstab-using-python-and-pandas-ca71a4be5be0&user=Elliott+Stam&userId=d193f11526c9&source=-----ca71a4be5be0---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fca71a4be5be0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fquerying-tableau-view-data-as-a-crosstab-using-python-and-pandas-ca71a4be5be0&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----ca71a4be5be0--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fca71a4be5be0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fquerying-tableau-view-data-as-a-crosstab-using-python-and-pandas-ca71a4be5be0&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----ca71a4be5be0---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----ca71a4be5be0--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----ca71a4be5be0--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----ca71a4be5be0--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----ca71a4be5be0--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----ca71a4be5be0--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----ca71a4be5be0--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----ca71a4be5be0--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----ca71a4be5be0--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@elliottstam?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@elliottstam?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Elliott Stam"}, {"url": "https://medium.com/@elliottstam/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "509 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fd193f11526c9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fquerying-tableau-view-data-as-a-crosstab-using-python-and-pandas-ca71a4be5be0&user=Elliott+Stam&userId=d193f11526c9&source=post_page-d193f11526c9--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F2f1f73d79eed&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fquerying-tableau-view-data-as-a-crosstab-using-python-and-pandas-ca71a4be5be0&newsletterV3=d193f11526c9&newsletterV3Id=2f1f73d79eed&user=Elliott+Stam&userId=d193f11526c9&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}