{"url": "https://towardsdatascience.com/building-a-user-classifier-using-twitter-data-283dfd0c0e59", "time": 1683016018.74249, "path": "towardsdatascience.com/building-a-user-classifier-using-twitter-data-283dfd0c0e59/", "webpage": {"metadata": {"title": "Building a user classifier using Twitter data | by Mananai Saengsuwan | Towards Data Science", "h1": "Building a user classifier using Twitter data", "description": "The Twitter platform provides an enormous amount of data. A machine learning algorithm needs a lot of data to build a good model. So, it\u2019s a good idea we construct an ML predictor by training with\u2026"}, "outgoing_paragraph_urls": [{"url": "https://gist.github.com/mananai/03e446675b2729e52e3bce5e90a40c47", "anchor_text": "here", "paragraph_index": 22}], "all_paragraphs": ["The Twitter platform provides an enormous amount of data. A machine learning algorithm needs a lot of data to build a good model. So, it\u2019s a good idea we construct an ML predictor by training with Twitter data.", "We will build a classifier whether a user has a specific political view or not. We use Twitter tweets, users, and friend data to construct the classifier. Also, we will use a random forest as our learning algorithm and Python as our development platform.", "We need to collect tweets, users, and users\u2019friends. Our previous articles have already discussed how to implement this. The result is in a relational database. The following picture shows the database schema.", "Here we have the Tweet table stores all the tweets (and retweets). The Hashtag table keeps hashtags found on tweets. The User table has all the users who tweet or retweet. The User_Friend table stores relationship between each user and their friends, the users who he or she follows. There are table relationships such as Hashtag and Tweet tables and Tweet and User tables. We will use these relationships to write a SQL query to join three tables together.", "Later, we will discuss User_class0 and User_class1 in the next section.", "We split users into two classes, conservative and non-conservative. We need a way to label users. Here are what we do:", "We put conservatives into User_class1 and non-conservatives into User_class0.", "We collected Twitter tweets, hashtags, and users on October 22, 2020, where the location was Thailand. We got 2.4 million tweets. By using the criteria, we have found 3,463 conservative users and 47,775 non-conservatives. We randomly choose 3,000 from class 1 and 5,000 from the other in our data set. Shuffle them and divide into training and testing data set. Training got 70%, and testing got 30% of all data.", "We have a basic idea that users with a similar view may follow or listen to the same group of influencers. For each user, we use the user\u2019s friend as features. Because some users may have a large number of users they follow(called friends on Twitter), we would limit the number of friends in the features to a certain number like 500.", "We choose the top 500 friends order by the number of followers in our training data set as our features.", "We need to do some work to convert the data to the feature vectors. The friend data we receive from Twitter looks like this:", "Assume that our data include A, B, and C. Also, top friends are W, X, Y, and Z. To transform this, we need to do these:", "Once we got feature vectors for training and label output, it is straightforward to train the classifier. The following is the partial Python code:", "X_train represents the feature vectors of training data. y_train is the known output", "That\u2019s it. The classifier is ready.", "The next step is to run the model with testing data, get a prediction, and compare the result with the known output. X_test represents the feature vectors of testing data. y_test is the known output. Finally, y_pred is the model prediction. From the result:", "The random forest algorithm could also identify the relative importance of features. The value of each ranges from 0 to 1. The sum of all importances is 1. The following Python code shows how to retrieve feature importances from the learning model and plot the graph of top values.", "Since features are users\u2019friends in our model, this graph shows the importance of influencers. As we could see, the values of the first few features are significantly higher than the rest, then gradually reduce, and finally, approach zero.", "Also, with just a little bit more code, we should be able to list the top users\u2019screen names. So, we could see the relative importance of those influencers.", "We have set the number of features(friends) to 500. Could we use less or more? What is the optimum value? We have some code to get ROC AUC scores for different numbers of features below:", "From the graph, the ROC AUC score does not improve much after the number of features passes 500. So, 500 should be alright.", "We collect tweets, hashtags, users, and users\u2019 friends from Twitter. Divide users into two classes by using hashtags. We use users\u2019 friends as our features. Transform the collected data to proper feature vectors. We use a random forest classifier as a learning algorithm and train it with our data.The testing scores look good. ROC AUC, precision, and recall are high. It means our method works well and should be able to predict the result confidently.", "The full python code of this article is here.", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F283dfd0c0e59&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuilding-a-user-classifier-using-twitter-data-283dfd0c0e59&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuilding-a-user-classifier-using-twitter-data-283dfd0c0e59&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuilding-a-user-classifier-using-twitter-data-283dfd0c0e59&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuilding-a-user-classifier-using-twitter-data-283dfd0c0e59&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----283dfd0c0e59--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----283dfd0c0e59--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://mananaisaengsuwan.medium.com/?source=post_page-----283dfd0c0e59--------------------------------", "anchor_text": ""}, {"url": "https://mananaisaengsuwan.medium.com/?source=post_page-----283dfd0c0e59--------------------------------", "anchor_text": "Mananai Saengsuwan"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F246dba19b1ca&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuilding-a-user-classifier-using-twitter-data-283dfd0c0e59&user=Mananai+Saengsuwan&userId=246dba19b1ca&source=post_page-246dba19b1ca----283dfd0c0e59---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F283dfd0c0e59&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuilding-a-user-classifier-using-twitter-data-283dfd0c0e59&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F283dfd0c0e59&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuilding-a-user-classifier-using-twitter-data-283dfd0c0e59&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://towardsdatascience.com/tagged/hands-on-tutorials", "anchor_text": "Hands-on Tutorials"}, {"url": "https://gist.github.com/mananai/03e446675b2729e52e3bce5e90a40c47", "anchor_text": "here"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----283dfd0c0e59---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/tag/python-programming?source=post_page-----283dfd0c0e59---------------python_programming-----------------", "anchor_text": "Python Programming"}, {"url": "https://medium.com/tag/random-forest?source=post_page-----283dfd0c0e59---------------random_forest-----------------", "anchor_text": "Random Forest"}, {"url": "https://medium.com/tag/data-science?source=post_page-----283dfd0c0e59---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/hands-on-tutorials?source=post_page-----283dfd0c0e59---------------hands_on_tutorials-----------------", "anchor_text": "Hands On Tutorials"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F283dfd0c0e59&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuilding-a-user-classifier-using-twitter-data-283dfd0c0e59&user=Mananai+Saengsuwan&userId=246dba19b1ca&source=-----283dfd0c0e59---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F283dfd0c0e59&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuilding-a-user-classifier-using-twitter-data-283dfd0c0e59&user=Mananai+Saengsuwan&userId=246dba19b1ca&source=-----283dfd0c0e59---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F283dfd0c0e59&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuilding-a-user-classifier-using-twitter-data-283dfd0c0e59&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----283dfd0c0e59--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F283dfd0c0e59&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuilding-a-user-classifier-using-twitter-data-283dfd0c0e59&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----283dfd0c0e59---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----283dfd0c0e59--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----283dfd0c0e59--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----283dfd0c0e59--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----283dfd0c0e59--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----283dfd0c0e59--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----283dfd0c0e59--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----283dfd0c0e59--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----283dfd0c0e59--------------------------------", "anchor_text": ""}, {"url": "https://mananaisaengsuwan.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://mananaisaengsuwan.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Mananai Saengsuwan"}, {"url": "https://mananaisaengsuwan.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "69 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F246dba19b1ca&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuilding-a-user-classifier-using-twitter-data-283dfd0c0e59&user=Mananai+Saengsuwan&userId=246dba19b1ca&source=post_page-246dba19b1ca--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fb32b8271992b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuilding-a-user-classifier-using-twitter-data-283dfd0c0e59&newsletterV3=246dba19b1ca&newsletterV3Id=b32b8271992b&user=Mananai+Saengsuwan&userId=246dba19b1ca&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}