{"url": "https://towardsdatascience.com/choropleth-maps-with-folium-1a5b8bcdd392", "time": 1683005623.174294, "path": "towardsdatascience.com/choropleth-maps-with-folium-1a5b8bcdd392/", "webpage": {"metadata": {"title": "Choropleth maps with Folium. Visualization of the gross birth rate\u2026 | by Amanda Iglesias Moreno | Towards Data Science", "h1": "Choropleth maps with Folium", "description": "A choropleth map is a thematic map in which areas are shaded according to the statistical variable being displayed on the map. This visualization is really useful to represent the variability of a\u2026"}, "outgoing_paragraph_urls": [{"url": "https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_csv.html", "anchor_text": "pandas.read_csv", "paragraph_index": 4}, {"url": "https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.head.html", "anchor_text": "pandas.DataFrame.head", "paragraph_index": 4}, {"url": "https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.info.html", "anchor_text": "pandas.DataFrame.info", "paragraph_index": 6}, {"url": "https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.astype.html", "anchor_text": "pandas.Series.astype", "paragraph_index": 7}, {"url": "https://en.wikipedia.org/wiki/Morocco%E2%80%93Spain_border", "anchor_text": "border", "paragraph_index": 20}, {"url": "https://en.wikipedia.org/wiki/Morocco", "anchor_text": "Morocco", "paragraph_index": 20}], "all_paragraphs": ["A choropleth map is a thematic map in which areas are shaded according to the statistical variable being displayed on the map. This visualization is really useful to represent the variability of a measurement across a region using a sequential color scheme (the higher the measurement the stronger the color). In this article, we are going to learn how to create choropleth maps using Folium to visualize the gross birth rate (births per 1000 inhabitants) across communities in Spain.", "Exploratory data analysis consists of analyzing the main characteristics of a data set usually by means of visualization methods and summary statistics. The objective is to understand the data, discover patterns and anomalies, and check assumption before we perform further evaluations.", "In this article, we employ a data set, containing information about gross birth rates (births per 1000 inhabitants) from 1975 until 2018 across communities in Spain.", "The data set (option \u2014 CSV separado por ;) can be downloaded at the following link:", "The first step of the exploratory analysis consists of loading the csv file into a Pandas data frame using the pandas.read_csv function and visualize the first 5 rows with the pandas.DataFrame.head method. We have skipped 5 rows at the start of the file (skiprows=5) and 2 at the bottom (skipfooter=2), since they do not contain useful information (just explanatory notes about the data being displayed).", "As can be easily observed, the last column of the data frame does not contain useful information and should be deleted. In addition, we have to modify the name of the first column by a more descriptive one.", "After dropping and renaming the columns, we can evaluate the data types and missing values using pandas.DataFrame.info method.", "As shown above, the data set does not contain null values, but the data types are not the expected ones. The columns 1975\u20132018 are of type object, but they contain numerical data. We can convert these columns to floats using the pandas.Series.astype function, replacing before commas by periods with pandas.Series.str.replace.", "As we can observe, we have successfully modified the data types of columns 1975\u20132018 from objects to floats.", "Now! We have a cleaned data set to create choropleth maps :)", "Folium is a python library that allows you to create multiple types of Leaflet maps. To create a choropleth map, Folium requires a Geo JSON file, including geospatial data of the region. For a choropleth map of Spain, we would need a Geo JSON file that defines the boundaries of all communities. You can download this file from the following link:", "To bind the data frame and the json file successfully, the name of the community in the data frame must match exactly the name of the community in the json file. Therefore, we have to analyze which names are contained in the json file and modify the names in the data frame accordingly.", "The following code shows how we can obtain the names of the communities in the json file:", "As shown above, the json.load() method returns a Python dictionary. Then, we loop through the dictionary to obtain the names of the communities.", "Now, we modify the names of the data frame by the names of the json file. Notice that, we have created a list with json files names in the same order as they appear in the data frame.", "Now! We are ready to use Folium to create the choropleth map.", "First, we create a Folium Map object, centered around [40.416775, -3.703790] (the location argument allows to center the map in a specific location). We also provide an initial zoom level of 6 to zoom in the map. Despite the initial zoom level, the map generated is interactive, meaning you can easily zoom in and out. Lastly, we specified the tile (Stamen Watercolor).", "Once the map object is created, we display the choropleth map using the .choropleth() method (we can also use the folium.Choropleth() function). This method binds the data contained in the data frame with the geometries of the json file.", "The following map depicts the gross birth rate (births per 1000 inhabitants) across communities in Spain in 2018.", "As you can observe, northern regions present lower birth rates.", "Melilla is a Spanish autonomous city located on the northwest coast of Africa, sharing a border with Morocco. This city has the highest birth rate in Spain. To observe properly Melilla, we need to zoom in.", "There are multiple parameters to customize choropleth maps in Folium. The following parameters are the ones we previously used in our visualization:", "Next, I explain in detail three parameters that I believe are particularly relevant: (1) tiles, (2) zoom_start, (3) fill_color.", "Folium contains multiple built-in tilesets to customize your visualization. When creating a map object, we can easily specify a map tile with the tiles keyword.", "We can create multiple tile layers using the folium.Tilelayer() function and append them to a map. For switching between layers, we add a layer control object (folium.LayerControl()) to the map as follows.", "In Folium, maps are interactive, meaning that we can easily zoom in and out. However, when generating a map object, we can specify an initial zoom level using the parameter (zoom_start). As shown below, we create a map object using three different initial zoom levels: (1) 2, (2) 4, (3) 6.", "A key point to properly convey your message is to choose a fitting color scheme for your design. There are three main types of color schemes: (1) sequential, (2) diverging, and (3) qualitative.", "In our map, we employ a sequential color scheme, since we want to represent a numerical variable (the gross birth rate) without an interesting midpoint. As shown below, we try four different color palettes: (1) \u2018YlGnBu\u2019,(2) \u2018BuPu\u2019,(3) \u2018OrRd\u2019,(4) \u2018RdPu\u2019.", "As you can observe, Folium provides great flexibility for designing choropleth maps. Take a look at the documentation to discover more parameters to customize your maps! \ud83c\udf41!", "As an additional feature, we display the name of the community when hovering over using folium.features.GeoJsonTooltip() function. We provide as input the label of the GeoJson \u2018properties\u2019 we want to display (in this case name). Next, we define the style of the labels, providing a string in CSS language. This language describes how HTML elements should be displayed.", "After creating the GeoJsonTooltip object, you can pass it to the geojson object that is created by the Choropleth function under the hood.", "And voil\u00e0! A map with labels!", "I encourage you to try creating choropleth maps with Folium and remember that in all maps, we have visualized the gross birth rate (births per 100 inhabitants) in 2018. If you want to display another year, you just have to provide the year to the parameter (columns) of the folium.Choropleth() function.", "In future articles, I will explain how to create maps with other libraries such as Plotly or Geoviews. Sooo, keep reading!", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Data Scientist at Statista \u2014 Based in Hamburg \ud83d\udccd"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F1a5b8bcdd392&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fchoropleth-maps-with-folium-1a5b8bcdd392&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fchoropleth-maps-with-folium-1a5b8bcdd392&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fchoropleth-maps-with-folium-1a5b8bcdd392&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fchoropleth-maps-with-folium-1a5b8bcdd392&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----1a5b8bcdd392--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----1a5b8bcdd392--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://amandaiglesiasmoreno.medium.com/?source=post_page-----1a5b8bcdd392--------------------------------", "anchor_text": ""}, {"url": "https://amandaiglesiasmoreno.medium.com/?source=post_page-----1a5b8bcdd392--------------------------------", "anchor_text": "Amanda Iglesias Moreno"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F1bace2932c65&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fchoropleth-maps-with-folium-1a5b8bcdd392&user=Amanda+Iglesias+Moreno&userId=1bace2932c65&source=post_page-1bace2932c65----1a5b8bcdd392---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F1a5b8bcdd392&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fchoropleth-maps-with-folium-1a5b8bcdd392&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F1a5b8bcdd392&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fchoropleth-maps-with-folium-1a5b8bcdd392&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://datos.gob.es/es/catalogo/ea0010587-tasa-bruta-de-natalidad-por-comunidad-autonoma-anual-comunidades-autonomas-indicadores-demograficos-basicos-identificador-api-1432", "anchor_text": "Tasa Bruta de Natalidad por comunidad aut\u00f3noma. Anual. Comunidades aut\u00f3nomas. Indicadores\u2026Tabla de INEbase Tasa Bruta de Natalidad por comunidad aut\u00f3noma. Anual. Comunidades aut\u00f3nomas. Indicadores Demogr\u00e1ficos\u2026datos.gob.es"}, {"url": "https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_csv.html", "anchor_text": "pandas.read_csv"}, {"url": "https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.head.html", "anchor_text": "pandas.DataFrame.head"}, {"url": "https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.info.html", "anchor_text": "pandas.DataFrame.info"}, {"url": "https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.astype.html", "anchor_text": "pandas.Series.astype"}, {"url": "https://github.com/codeforamerica/click_that_hood/blob/master/public/data/spain-communities.geojson", "anchor_text": "codeforamerica/click_that_hoodPermalink Dismiss GitHub is home to over 40 million developers working together to host and review code, manage\u2026github.com"}, {"url": "https://en.wikipedia.org/wiki/Morocco%E2%80%93Spain_border", "anchor_text": "border"}, {"url": "https://en.wikipedia.org/wiki/Morocco", "anchor_text": "Morocco"}, {"url": "https://python-visualization.github.io/folium/modules.html", "anchor_text": "folium \u2014 Folium 0.10.1 documentationMake beautiful, interactive maps with Python and Leaflet.js Classes for drawing maps. Bases\u2026python-visualization.github.io"}, {"url": "https://medium.com/tag/folium?source=post_page-----1a5b8bcdd392---------------folium-----------------", "anchor_text": "Folium"}, {"url": "https://medium.com/tag/choropleth-map?source=post_page-----1a5b8bcdd392---------------choropleth_map-----------------", "anchor_text": "Choropleth Map"}, {"url": "https://medium.com/tag/python?source=post_page-----1a5b8bcdd392---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/visualization?source=post_page-----1a5b8bcdd392---------------visualization-----------------", "anchor_text": "Visualization"}, {"url": "https://medium.com/tag/maps?source=post_page-----1a5b8bcdd392---------------maps-----------------", "anchor_text": "Maps"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F1a5b8bcdd392&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fchoropleth-maps-with-folium-1a5b8bcdd392&user=Amanda+Iglesias+Moreno&userId=1bace2932c65&source=-----1a5b8bcdd392---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F1a5b8bcdd392&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fchoropleth-maps-with-folium-1a5b8bcdd392&user=Amanda+Iglesias+Moreno&userId=1bace2932c65&source=-----1a5b8bcdd392---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F1a5b8bcdd392&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fchoropleth-maps-with-folium-1a5b8bcdd392&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----1a5b8bcdd392--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F1a5b8bcdd392&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fchoropleth-maps-with-folium-1a5b8bcdd392&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----1a5b8bcdd392---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----1a5b8bcdd392--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----1a5b8bcdd392--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----1a5b8bcdd392--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----1a5b8bcdd392--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----1a5b8bcdd392--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----1a5b8bcdd392--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----1a5b8bcdd392--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----1a5b8bcdd392--------------------------------", "anchor_text": ""}, {"url": "https://amandaiglesiasmoreno.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://amandaiglesiasmoreno.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Amanda Iglesias Moreno"}, {"url": "https://amandaiglesiasmoreno.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "2.1K Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F1bace2932c65&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fchoropleth-maps-with-folium-1a5b8bcdd392&user=Amanda+Iglesias+Moreno&userId=1bace2932c65&source=post_page-1bace2932c65--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fbac71cd4d351&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fchoropleth-maps-with-folium-1a5b8bcdd392&newsletterV3=1bace2932c65&newsletterV3Id=bac71cd4d351&user=Amanda+Iglesias+Moreno&userId=1bace2932c65&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}