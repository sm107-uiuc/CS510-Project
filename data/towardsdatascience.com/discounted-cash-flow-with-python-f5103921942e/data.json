{"url": "https://towardsdatascience.com/discounted-cash-flow-with-python-f5103921942e", "time": 1683011144.0202901, "path": "towardsdatascience.com/discounted-cash-flow-with-python-f5103921942e/", "webpage": {"metadata": {"title": "Discounted Cash Flow with Python. Valuing Google using the DCF method and\u2026 | by Jose Manu (CodingFun) | Medium", "h1": "Discounted Cash Flow with Python", "description": "During this post, we are going to use the Discounted Cash Flow method with Python to value a company. The DCF model that we will build is going to be dynamic. That is, we will be able to reuse it for\u2026"}, "outgoing_paragraph_urls": [{"url": "https://codingandfun.com/price-earning-with-python/", "anchor_text": "price earnings with Python", "paragraph_index": 1}, {"url": "https://codingandfun.com/net-current-asset-value-per-share-with-python/", "anchor_text": "the net current asset value per share", "paragraph_index": 1}, {"url": "https://www.investopedia.com/terms/w/workingcapital.asp", "anchor_text": "net working capital", "paragraph_index": 9}, {"url": "https://study.com/academy/lesson/the-percentage-of-sales-method-formula-example.html#:~:text=The%20percentage%20of%20sales%20method%20is%20used%20to%20calculate%20how,%2B%20Growth%20Rate%2F100).", "anchor_text": "the percentage of sales method to forecast a company cash flow.", "paragraph_index": 15}, {"url": "https://financialmodelingprep.com/developer/docs/pricing/codingAndFun/", "anchor_text": "Financialmodelingprep offers a 25% discount to all readers of codingandfun by using this link", "paragraph_index": 21}, {"url": "https://codingandfun.com/calculating-weighted-average-cost-of-capital-wacc-with-python/", "anchor_text": "we did in my previous post", "paragraph_index": 35}, {"url": "https://codingandfun.com/calculating-weighted-average-cost-of-capital-wacc-with-python/", "anchor_text": "how to calculate the WACC with python, refer to my previous post", "paragraph_index": 35}, {"url": "https://macabacus.com/valuation/dcf/terminal-value#:~:text=The%20terminal%20value%20(TV)%20captures,in%20a%2010%2Dyear%20DCF.", "anchor_text": "The terminal value captures the value of the company after the forecasting period", "paragraph_index": 38}, {"url": "https://www.investopedia.com/terms/t/terminalvalue.asp#:~:text=The%20terminal%20growth%20rate%20is,model%20and%20goes%20into%20perpetuity.", "anchor_text": "The perpetuity rate is the constant rate that a firm is expected to grow at forever", "paragraph_index": 39}], "all_paragraphs": ["During this post, we are going to use the Discounted Cash Flow method with Python to value a company. The DCF model that we will build is going to be dynamic. That is, we will be able to reuse it for any company that we want to estimate the stock price for.", "The majority of valuation methods are based on net income. We have already seen a few of them in my previous posts, such as, price earnings with Python and the net current asset value per share among others. The discounted cash flow method is different. It focuses on the company\u2019s future abilities to generate cash.", "Cash is what the firm needs in order to be able to pay bills, taxes, salaries and also to pay back to the company capital providers.", "The company reported cash flow statements splits company activities into three parts. Investment activities, financing activities and operating activities. For the discounted cash flow method, we will mainly focus on the operating cash flow. Operating cash flow reflects all cash in and outflows related to the production and sale of the company goods and services.", "Cash flow statement is important because we are not able to know how much cash a company generates simply by looking into the income statement or balance sheet. For example, take net income. By looking into net income, we are not able to know how much cash a company has generated. Net income is contaminated by non-cash items such as depreciation, sales on credit, etc.", "Therefore, since the discounted cash flow method is based on cash, we will start our model with net income and we will adjust certain items to get the operating cash flow of the firm:", "Then, once we have operating cash flow, we can simply deduct capital expenditures to get to the free cash flow (FCF) of the company. This is what we will use to estimate the value of a company.", "- Purchases of equipment or Capital Expenditures =", "We could also add back interest payments after taxes because interest is a financing item. However, to keep it simple, we will not deduct interest payments from net income in our model.", "We add depreciation back to net income because it is not a cash-expense. Finally, we subtract the change in the net working capital to get to our operating cash flow.", "Operating cash flow lets us know how much a company has generated from operations.", "Now, we can get to the company free cash flow by subtracting investments (i.e. the capital expenditures performed by the company).", "Free cash flow is what we need in the DCF method in order to estimate the value of the company. As per the discounted cash flow method, we can get the firm value by applying below formula.", "Where FCFF is the Firm Cash Flow and TV is the terminal value. We have already seen how to get the free cash flow of a firm. Below, we will also find out how to calculate the terminal value.", "The DCF method requires to forecast the free cash flow for the next few years. In our model, we will forecast the next 5 years.", "We will use the percentage of sales method to forecast a company cash flow. We will estimate future sales of the company and estimate the required income statement and balance sheet items based on the percentage of sales.", "For example, company A in the past had a cost of goods that represented 30% of the sales. Therefore, using the percentage of sales method, we could assume that in the next year income statement forecast, COGS will remain 30% of the sales.", "To sum up, we will follow the following steps to value a company using the discounted cash flow (DCF) method with Python:", "In the next section, we will move to Python to start creating our model.", "Time to start with the fun part. The idea is to build a discounted cash flow model with Python. We will pass the ticker of the company that we want to estimate the stock price for and have Python doing the hard work for us. Then, the outcome of the code will be an estimated stock price and the assumptions that we have used to come up with the that target price.", "To use the discounted cash flow method, we need to retrieve some company financials. We will need to retrieve the most recent company balance sheet and income statement. We will use them to build our model.", "To request the financials, we are going to use financialmodelingprep API, a financial API offering up to 250 free requests per month. If 250 requests are not enough, you can get a yearly subscription for a bit less than $130. Financialmodelingprep offers a 25% discount to all readers of codingandfun by using this link.", "Since the code is a bit long, I will split it by sections. The outcome of the code will be the estimated Google stock price using the discounted cash flow method.", "As discussed above, estimating how much the revenue is going to growth for the next five years is the key for the DCF valuation. We will keep it simple and assume that the company revenue is going to keep growing by the same percentage that in the last year.", "(Note: In below code, remember to replace the value of the variable demo by your api key from financialmodelingprep).", "We extract Google income statement for the last three years. Then, we calculate the revenue variation of the last year and store it in a variable called revenue_g:", "As shown above, Google revenue has grown by 15.46% in the last year. That will be our yearly revenue growth assumption for the forecasted 5 years. Feel free to manually change the code to provide a different growth estimation.", "Next, we get the income statement and balance sheet.", "First, we calculate the full income statement as a percentage of the revenue. Then, we forecast the next 5 year income statement by multiplying the revenue of the previous year times the revenue_g calculated in section A. Having done that, we can multiply each of the income statement items by the % of revenue to get a full income statement.", "We do the same for the balance sheet. Where we also show it as a percentage of the revenue and forecast the next 5 years:", "Finally, we have enough information in order to estimate the next five year cash flows for Google.", "Do not get scared by the amount of lines in below piece of code. It is just repeating itself to forecast the cash flow for each of the five years. In below paragraph, I explain what the code does.", "We create an empty dictionary where we will add each of the 5 years that we are going to forecast. Then, we start by getting the net income for the year. Next, we get the increase of depreciation, receivables, payables and inventories.", "Having these elements, we can compute the cash flow from operations. Then, we calculate the CAPEX for the year by calculating the change in Property Plan and Equipment (PP&E) and adding depreciation.", "Finally, we add cash flow from operations and CAPEX to estimate the free cash flow for the first year that we need for the DCF model. Then, we repeat 4 times more the same code in order to forecast the next 4 years.", "For discounting the forecasted free cash flows (FCF), we will use the company WACC. Therefore, we need to estimate the average weighted cost of capital (WACC) for the firm. This is exactly, what we did in my previous post. Therefore, I will simply provide the code to calculate the WACC for the firm. To understand better how to calculate the WACC with python, refer to my previous post.", "Now that we have the WACC of Google and the forecasted free cash flows for the next five years, we can discount them to know the present value. We can use numpy npv method to do so:", "The net present value obtained in the section F covers only the next 5 years of the company cash flows. But what happen after these forecasted years?", "We need to calculate the terminal value of the company. The terminal value captures the value of the company after the forecasting period. The terminal value will constitute at least 50% of the forecasted value. Therefore, it is super important to pay attention to the assumptions that we make here. Below is the formula we will use:", "FCFFn will be the last year of the forecasted free cash flows. Then, we need to come up with a perpetuity growth rate g. The perpetuity rate is the constant rate that a firm is expected to grow at forever.", "We will assume 2% perpetuity rate since it is a common practice to be in line with the long-term inflation rate which is usually around 2%. Then, we discount the value using the WACC rate.", "Finally, we have all what we need to value a company using the discounted cash flow method and Python. We get the target equity value, the debt of the company and the number of shares.", "Then, to estimate the value of the company, simply divide the target value by the number of shares:", "And\u2026.magic, our model estimates that the value of Google based on the discounted cash flow method is $4,828 per stock. A bit too high compared to the $1,516 that is trading at today. No wonder, since we are assuming that Google revenue is going to growth 15% per year, which may be too optimistic.", "Some of the challenges with the DCF model is the amount of estimations that we need to perform. We need to estimate how much the company is going to growth. If we get that wrong, our model will not give good results.", "For example, change manually the revenue_g variable to only 5% (i.e. the revenue growth of the firm). Then, the company value is reduced almost by 50% to only $2,638 per stock.", "It is a good practice to estimate three scenarios for the revenue growth values. One with an optimistic outlook (e.g. higher growth than in the past), one with a likely outlook (e.g. same growth than in the past) and a pessimistic outlook (e.g. lower growth than in the past). Then get the average of the three scenarios to get to your estimated value.", "Also, the terminal value accounts for more than 50% of the estimated value. If we assumed a wrong perpetuity rate, our model will be off.", "Feel free to challenge any of the assumptions used in the model in the comments below. Thanks for reading!", "See the link below for the video tutorial version of this post:", "Python for Finance. Learn step by step how to automate cool financial analysis tools.", "Python for Finance. Learn step by step how to automate cool financial analysis tools."], "all_outgoing_urls": [{"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----f5103921942e--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----f5103921942e--------------------------------", "anchor_text": "Jose Manu (CodingFun)"}, {"url": "https://www.pexels.com/@anienia?utm_content=attributionCopyText&utm_medium=referral&utm_source=pexels", "anchor_text": "Asdii Wang"}, {"url": "https://www.pexels.com/photo/blue-round-plastic-toy-on-a-desk-234171/?utm_content=attributionCopyText&utm_medium=referral&utm_source=pexels", "anchor_text": "Pexels"}, {"url": "https://codingandfun.com/price-earning-with-python/", "anchor_text": "price earnings with Python"}, {"url": "https://codingandfun.com/net-current-asset-value-per-share-with-python/", "anchor_text": "the net current asset value per share"}, {"url": "https://www.investopedia.com/terms/w/workingcapital.asp", "anchor_text": "net working capital"}, {"url": "https://biostrategyanalytics.com/2013/06/17/valuation-of-pharmaceutical-and-biotechnology-companies-dcf-part-1/", "anchor_text": "https://biostrategyanalytics.com/2013/06/17/valuation-of-pharmaceutical-and-biotechnology-companies-dcf-part-1/"}, {"url": "https://study.com/academy/lesson/the-percentage-of-sales-method-formula-example.html#:~:text=The%20percentage%20of%20sales%20method%20is%20used%20to%20calculate%20how,%2B%20Growth%20Rate%2F100).", "anchor_text": "the percentage of sales method to forecast a company cash flow."}, {"url": "https://codingandfun.com/calculating-weighted-average-cost-of-capital-wacc-with-python/", "anchor_text": "how to calculate WACC with Python"}, {"url": "https://financialmodelingprep.com/developer/docs/pricing/codingAndFun/", "anchor_text": "Financialmodelingprep offers a 25% discount to all readers of codingandfun by using this link"}, {"url": "https://financialmodelingprep.com/api/v3/income-statement/{company}?apikey={demo}').json()", "anchor_text": "https://financialmodelingprep.com/api/v3/income-statement/{company}?apikey={demo}').json()"}, {"url": "https://financialmodelingprep.com/api/v3/balance-sheet-statement/{company}?apikey={demo}').json()", "anchor_text": "https://financialmodelingprep.com/api/v3/balance-sheet-statement/{company}?apikey={demo}').json()"}, {"url": "https://codingandfun.com/calculating-weighted-average-cost-of-capital-wacc-with-python/", "anchor_text": "we did in my previous post"}, {"url": "https://codingandfun.com/calculating-weighted-average-cost-of-capital-wacc-with-python/", "anchor_text": "how to calculate the WACC with python, refer to my previous post"}, {"url": "https://financialmodelingprep.com/api/v3/income-statement/{company}?apikey={demo}').json()", "anchor_text": "https://financialmodelingprep.com/api/v3/income-statement/{company}?apikey={demo}').json()"}, {"url": "https://financialmodelingprep.com/api/v3/company/profile/{company}?apikey={demo}'", "anchor_text": "https://financialmodelingprep.com/api/v3/company/profile/{company}?apikey={demo}'"}, {"url": "https://financialmodelingprep.com/api/v3/ratios/{company}?apikey={demo}').json()", "anchor_text": "https://financialmodelingprep.com/api/v3/ratios/{company}?apikey={demo}').json()"}, {"url": "https://financialmodelingprep.com/api/v3/balance-sheet-statement/{company}?period=quarter&apikey={demo}').json()", "anchor_text": "https://financialmodelingprep.com/api/v3/balance-sheet-statement/{company}?period=quarter&apikey={demo}').json()"}, {"url": "https://macabacus.com/valuation/dcf/terminal-value#:~:text=The%20terminal%20value%20(TV)%20captures,in%20a%2010%2Dyear%20DCF.", "anchor_text": "The terminal value captures the value of the company after the forecasting period"}, {"url": "https://www.investopedia.com/terms/t/terminalvalue.asp#:~:text=The%20terminal%20growth%20rate%20is,model%20and%20goes%20into%20perpetuity.", "anchor_text": "The perpetuity rate is the constant rate that a firm is expected to grow at forever"}, {"url": "https://financialmodelingprep.com/api/v3/enterprise-values/{company}?apikey={demo}').json()", "anchor_text": "https://financialmodelingprep.com/api/v3/enterprise-values/{company}?apikey={demo}').json()"}, {"url": "https://www.youtube.com/watch?v=XCMsdi3CLGA", "anchor_text": "https://www.youtube.com/watch?v=XCMsdi3CLGA"}, {"url": "https://codingandfun.com/discounted-cash-flow-with-python-valuing-a-company/", "anchor_text": "https://codingandfun.com"}, {"url": "https://medium.com/tag/finance?source=post_page-----f5103921942e---------------finance-----------------", "anchor_text": "Finance"}, {"url": "https://medium.com/tag/investing?source=post_page-----f5103921942e---------------investing-----------------", "anchor_text": "Investing"}, {"url": "https://medium.com/tag/programming?source=post_page-----f5103921942e---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/tag/money?source=post_page-----f5103921942e---------------money-----------------", "anchor_text": "Money"}, {"url": "https://medium.com/tag/python?source=post_page-----f5103921942e---------------python-----------------", "anchor_text": "Python"}, {"url": "https://towardsdatascience.com/?source=post_page-----f5103921942e--------------------------------", "anchor_text": "More from Jose Manu (CodingFun)"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fa6a80235fd35&operation=register&redirect=https%3A%2F%2Fcodingfun89.medium.com%2Fdiscounted-cash-flow-with-python-f5103921942e&newsletterV3=57de827b2dd&newsletterV3Id=a6a80235fd35&user=Jose+Manu+%28CodingFun%29&userId=57de827b2dd&source=-----f5103921942e---------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://medium.com/?source=post_page-----f5103921942e--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----f5103921942e--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----f5103921942e--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----f5103921942e--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----f5103921942e--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----f5103921942e--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----f5103921942e--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/plans?source=upgrade_membership---two_column_layout_sidebar----------------------------------", "anchor_text": "Get unlimited access"}, {"url": "https://towardsdatascience.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Jose Manu (CodingFun)"}, {"url": "https://towardsdatascience.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "1.2K Followers"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fa6a80235fd35&operation=register&redirect=https%3A%2F%2Fcodingfun89.medium.com%2Fdiscounted-cash-flow-with-python-f5103921942e&newsletterV3=57de827b2dd&newsletterV3Id=a6a80235fd35&user=Jose+Manu+%28CodingFun%29&userId=57de827b2dd&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}