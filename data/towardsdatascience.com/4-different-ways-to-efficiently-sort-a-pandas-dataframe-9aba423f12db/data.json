{"url": "https://towardsdatascience.com/4-different-ways-to-efficiently-sort-a-pandas-dataframe-9aba423f12db", "time": 1683010547.1097019, "path": "towardsdatascience.com/4-different-ways-to-efficiently-sort-a-pandas-dataframe-9aba423f12db/", "webpage": {"metadata": {"title": "4 Different Ways to Efficiently Sort a Pandas DataFrame | by Byron Dolon | Towards Data Science", "h1": "4 Different Ways to Efficiently Sort a Pandas DataFrame", "description": "Many people turn to advanced indexing and aggregate functions in Pandas to answer questions at every stage of analysis. These features can be incredibly useful when you need to manipulate data\u2026"}, "outgoing_paragraph_urls": [{"url": "https://towardsdatascience.com/you-dont-always-have-to-loop-through-rows-in-pandas-22a970b347ac?source=friends_link&sk=d7ce0f2f181ce52a88d07e6481f92e7d", "anchor_text": ".loc[]", "paragraph_index": 1}, {"url": "https://towardsdatascience.com/you-dont-always-have-to-loop-through-rows-in-pandas-22a970b347ac?source=friends_link&sk=d7ce0f2f181ce52a88d07e6481f92e7d", "anchor_text": "and other vectorized solutions", "paragraph_index": 1}, {"url": "https://www.kaggle.com/gregorut/videogamesales", "anchor_text": "this", "paragraph_index": 4}], "all_paragraphs": ["Sorting data properly can make it easy for you to understand it.", "Many people turn to advanced indexing and aggregate functions in Pandas to answer questions at every stage of analysis. These features can be incredibly useful when you need to manipulate data. However, Pandas also offers different ways of sorting a DataFrame, which could be more suited to analyzing data than .loc[] and other vectorized solutions.", "If you have multiple columns you want to sort by, or if you just need to sort a series, Pandas has built-in functionality that can help with that.", "By the end of this piece, using different methods of sorting in Pandas, we\u2019ll have answered the following questions:", "We\u2019ll be using this video game sales data, so download the csv file if you want to follow along. As always, don\u2019t forget to import pandas before you get going.", "All of the sorting methods available in Pandas fall under the following three categories:", "Pandas automatically generates an index for every DataFrame you create. The index label starts at 0 and increments by 1 for every row. You can see on the screenshot above that the index labels are present in the leftmost column (the one with no column name).", "You can see that there wouldn\u2019t really be a point in sorting the DataFrame based on its auto-generated index. However, if we set the \u201cName\u201d column as the DataFrame\u2019s index, then we could sort the table by alphabetical order. We can change and sort by the index with a simple line of code:", "Here, we can see that the .sort_index() function re-organized that data so the games with a punctuation mark as the first character of its name are at the top of the list.", "If you look further down, it will show the games with a number as the first character of its name next, and then after that those that start with letters. Last in the sorting hierarchy are special symbols, like the final entry on the table above.", "That was a really quick example of sorting by a DataFrame\u2019s index. Now let\u2019s get into some more advanced sorting!", "To answer this question, we\u2019re going to use the .sort_values() function. The code is as follows:", "Here, we input the column to sort by (EU_Sales) and organize our data so that the highest values come first (set ascending to \u201cFalse\u201d). You can see the output below.", "The sorted DataFrame has been reorganized, so we can now see that the games with the most sales in the EU are not exactly the same as the games with the most sales globally.", "To answer this question, we are interested in both the \u201cYear\u201d column and the \u201cGlobal_Sales\u201d column. We\u2019re going to use the .sort_values() function again, but with a slight change:", "This is a case where we wanted to sort our data by more than one column. You can sort by as many columns as you want with this function, simply by passing a list of column names. In this case, we have written \u201cYear\u201d first and \u201cGlobal_Sales\u201d second, which means the function will sort the DataFrame by its publishing year first and then its sales.", "By default, the function will sort the DataFrame with the lowest numerical value first, so we don\u2019t need to pass ascending=True (although you could if you wanted to). You can see the result below.", "Here, we have identified the game \u201cCheckers\u201d published by \u201cAtari\u201d as the earliest game published (1980) in the dataset with the lowest global sales.", "With this question, we only care about the sales values, which means we don\u2019t need the video game metadata like \u201cName\u201d and \u201cPlatform\u201d. We only care about one column, which is \u201cNA_Sales\u201d that gives us the values for the North American market. This means we are working with a \u201cseries\u201d, which is a one-dimensional array in Pandas.", "Because we\u2019re working with a series, we can use the nsmallest() and nlargest() methods that give us the smallest or largest \u201cn\u201d values in the series. To use this function, you simply pass a value \u201cn\u201d which refers to the number of results you want to see. To answer this question, we write the following:", "According to the Pandas documentation, you could use these methods because they might be faster than using the .sort_values() and head() method that we\u2019ve been doing so far. However, it seems that this applies more to very large data sets, as even for one with 16,291 rows there was no difference. For example:", "You can see that we get the same values with a different line of code, and it also took the same time (11 milliseconds). However, I think using nlargest() and nsmallest() make for cleaner code. The function names are self-explanatory and easy to understand, so you don\u2019t have to sacrifice readability for a nifty function.", "To answer this question, we\u2019re going to create a pivot table. These are great when you want to aggregate and present data in an easy-to-read table.", "The code to create a pivot table looks like this:", "If you\u2019re unfamiliar with pivot tables and using a MultiIndex, I\u2019d suggest checking out my previous piece on the topic.", "To answer our question, we want to be able to compare the PC, PS4 and Xbox One sales, so this pivot table makes it easy for us to look at the data. The initial pivot table looks like this:", "Now, when sorting this data, we\u2019re interested in the highest \u201cGlobal_Sales\u201d for \u201cXOne\u201d. If we look at the columns in this DataFrame, we\u2019ll see that there is a MultiIndex in place.", "When sorting by a MultiIndex column, you need to make sure to specify all levels of the MultiIndex in question. To sort our newly created pivot table, we use the following code:", "Here, you can see we pass a tuple into the .sort_values() function. This is because the column name we want to sort by is (\u2018Global_Sales\u2019, \u2018XOne\u2019). You cannot only pass \u201cXOne\u201d, as that is not a valid column name in this case. So make sure to specify every level of the MultiIndex when sorting this kind of DataFrame. The resulting table looks like this:", "Based on this, we can see that Electronic Arts (EA) has the highest Xbox One sales across all years in 2015. We can also see that its sales in the PC and PS4 segments in the same year. The sorted pivot table makes it easy to do a side-by-side comparison of different columns, so keep this method in mind, as you can use it for many different situations.", "This was just an introduction to sorting with Pandas. There are many different ways to find answers to the questions we went through, but I find that sorting is a quick and easy way to conduct preliminary analysis.", "Remember that there\u2019s more than one way to sort a DataFrame. Some methods may be more effective than others, and that Pandas offers in-built methods to help you write cleaner looking code.", "Good luck with your sorting adventures!", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Medium has become a place to store my \u201chow to do tech stuff\u201d type guides. Come check out my notes on data-related shenanigans!"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F9aba423f12db&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2F4-different-ways-to-efficiently-sort-a-pandas-dataframe-9aba423f12db&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2F4-different-ways-to-efficiently-sort-a-pandas-dataframe-9aba423f12db&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2F4-different-ways-to-efficiently-sort-a-pandas-dataframe-9aba423f12db&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2F4-different-ways-to-efficiently-sort-a-pandas-dataframe-9aba423f12db&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----9aba423f12db--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----9aba423f12db--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://byrondolon.medium.com/?source=post_page-----9aba423f12db--------------------------------", "anchor_text": ""}, {"url": "https://byrondolon.medium.com/?source=post_page-----9aba423f12db--------------------------------", "anchor_text": "Byron Dolon"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F6b5d063df5dd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2F4-different-ways-to-efficiently-sort-a-pandas-dataframe-9aba423f12db&user=Byron+Dolon&userId=6b5d063df5dd&source=post_page-6b5d063df5dd----9aba423f12db---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F9aba423f12db&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2F4-different-ways-to-efficiently-sort-a-pandas-dataframe-9aba423f12db&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F9aba423f12db&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2F4-different-ways-to-efficiently-sort-a-pandas-dataframe-9aba423f12db&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://towardsdatascience.com/you-dont-always-have-to-loop-through-rows-in-pandas-22a970b347ac?source=friends_link&sk=d7ce0f2f181ce52a88d07e6481f92e7d", "anchor_text": ".loc[]"}, {"url": "https://towardsdatascience.com/you-dont-always-have-to-loop-through-rows-in-pandas-22a970b347ac?source=friends_link&sk=d7ce0f2f181ce52a88d07e6481f92e7d", "anchor_text": "and other vectorized solutions"}, {"url": "https://www.kaggle.com/gregorut/videogamesales", "anchor_text": "this"}, {"url": "https://www.kaggle.com/gregorut/videogamesales", "anchor_text": "Kaggle"}, {"url": "https://towardsdatascience.com/how-to-use-multiindex-in-pandas-to-level-up-your-analysis-aeac7f451fce", "anchor_text": "How to Use MultiIndex in Pandas to Level Up Your AnalysisAn introduction to hierarchical indexing on DataFrames for sophisticated data analysistowardsdatascience.com"}, {"url": "https://medium.com/tag/python?source=post_page-----9aba423f12db---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/data-science?source=post_page-----9aba423f12db---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/programming?source=post_page-----9aba423f12db---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/tag/technology?source=post_page-----9aba423f12db---------------technology-----------------", "anchor_text": "Technology"}, {"url": "https://medium.com/tag/data-analysis?source=post_page-----9aba423f12db---------------data_analysis-----------------", "anchor_text": "Data Analysis"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F9aba423f12db&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2F4-different-ways-to-efficiently-sort-a-pandas-dataframe-9aba423f12db&user=Byron+Dolon&userId=6b5d063df5dd&source=-----9aba423f12db---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F9aba423f12db&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2F4-different-ways-to-efficiently-sort-a-pandas-dataframe-9aba423f12db&user=Byron+Dolon&userId=6b5d063df5dd&source=-----9aba423f12db---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F9aba423f12db&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2F4-different-ways-to-efficiently-sort-a-pandas-dataframe-9aba423f12db&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----9aba423f12db--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F9aba423f12db&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2F4-different-ways-to-efficiently-sort-a-pandas-dataframe-9aba423f12db&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----9aba423f12db---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----9aba423f12db--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----9aba423f12db--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----9aba423f12db--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----9aba423f12db--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----9aba423f12db--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----9aba423f12db--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----9aba423f12db--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----9aba423f12db--------------------------------", "anchor_text": ""}, {"url": "https://byrondolon.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://byrondolon.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Byron Dolon"}, {"url": "https://byrondolon.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "1.2K Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F6b5d063df5dd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2F4-different-ways-to-efficiently-sort-a-pandas-dataframe-9aba423f12db&user=Byron+Dolon&userId=6b5d063df5dd&source=post_page-6b5d063df5dd--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fb2ea4b269407&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2F4-different-ways-to-efficiently-sort-a-pandas-dataframe-9aba423f12db&newsletterV3=6b5d063df5dd&newsletterV3Id=b2ea4b269407&user=Byron+Dolon&userId=6b5d063df5dd&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}