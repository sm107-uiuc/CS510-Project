{"url": "https://towardsdatascience.com/a-simple-guide-to-a-b-testing-in-python-5235289dae57", "time": 1683013785.281676, "path": "towardsdatascience.com/a-simple-guide-to-a-b-testing-in-python-5235289dae57/", "webpage": {"metadata": {"title": "A Simple Guide to A/B Testing in Python | by Brayton Hall | Towards Data Science", "h1": "A Simple Guide to A/B Testing in Python", "description": "A/B testing is a crucial data science skill. It\u2019s often used to test the effectiveness of Website A vs. Website B or Drug A vs. Drug B, or any two variations on one idea with the same primary\u2026"}, "outgoing_paragraph_urls": [{"url": "https://en.wikipedia.org/wiki/Standard_normal_table", "anchor_text": "standard normal table", "paragraph_index": 6}, {"url": "https://github.com/bphall/ab_vis", "anchor_text": "found on my Github", "paragraph_index": 8}, {"url": "https://en.wikipedia.org/wiki/Bonferroni_correction", "anchor_text": "Bonferroni\u2019s Correction", "paragraph_index": 22}, {"url": "https://en.wikipedia.org/wiki/Multiple_comparisons_problem", "anchor_text": "multiple comparison problem", "paragraph_index": 22}, {"url": "https://en.wikipedia.org/wiki/Look-elsewhere_effect", "anchor_text": "look-elsewhere effect", "paragraph_index": 22}], "all_paragraphs": ["A/B testing is a crucial data science skill. It\u2019s often used to test the effectiveness of Website A vs. Website B or Drug A vs. Drug B, or any two variations on one idea with the same primary motivation, whether it\u2019s sales, drug efficacy, or customer retention. It\u2019s one of those statistical concepts prone to an extra layer of confusion, because hypothesis testing alone requires understanding the Normal distribution, z-scores, p-values and careful framing of the null hypothesis. With A/B testing, we have two samples to deal with. However, A/B testing is still just hypothesis testing at heart! This guide will be a basic walkthrough of simple, one-sample hypothesis testing up to two-sample hypothesis testing, or A/B testing.", "Let\u2019s consider the domain of apple farmers and apple sizes. We know that historically, red apples in a particular set of orchards have a mean of 3.5 inches in width, with a standard deviation of .2 inches. Therefore:", "But farmer McIntosh claims to have a special new type of red apple from his orchard, which is extra delicious and larger than other farmers\u2019 apples. To frame the null and alternative hypotheses, or \ud835\udc3b0 and H1 respectively:", "A significance level of 5% is chosen for alpha, which is the standard level of significance for single-sample hypothesis testing, as well as a somewhat arbitrary convention among statisticians and researchers. Let\u2019s say that we take a sample of 40 apples from farmer McIntosh\u2019s orchard, and they average 4 inches each with a sample standard deviation of .5:", "We now have everything we need to carry out the test. To refresh the logic behind any hypothesis test, take a look at the following equation for obtaining the test statistic:", "The idea is that we\u2019re taking x-bar, which is our sample mean, and finding its difference with the population mean that the sample is presumably from. In this case, that\u2019s 3.5, which we then divide by the standard error to give us our test-statistic:", "As a reminder, the test statistic is an indicator of how likely we are to obtain this sample by pure chance assuming the null hypothesis is true. The standard normal table, or z-score table, can be used to find the corresponding area under the Normal curve, which is the probability of obtaining that result by chance. In Python, scipy.stats is an incredibly useful set of built-in functions for such purposes, and scipy.stats.norm.cdf and scipy.stats.norm.sf give the area under the normal distribution for a test statistic to the left and right, respectively. In this case, 6.32 is an incredibly high test-statistic, corresponding to an extremely low probability of obtaining these apple sizes by chance:", "Because our alpha was set at .05, we can use st.norm.isf(.05) to determine the critical value which, if our test-statistic exceeds it, allows us to reject the null hypothesis. The critical value in this case evaluates to 1.64, a common and recognizable number, since it\u2019s always the critical value for an alpha of .05 with an assumption of Normality. Our test statistic was 6.32, which far exceeds the critical value, so we can safely reject the null hypothesis and say that farmer McIntosh certainly produces larger-than-average apples.", "Now that we\u2019ve gone through the process for a single-sample hypothesis test, let\u2019s look at some simulated data to get a feel for a two-sample test, keeping in mind that A/B testing will still, at the end of the day, be testing a null hypothesis vs. an alternative hypothesis. The Jupyter notebooks and data can be found on my Github, and I encourage you to actually run some of the functions yourself in order to get a hands-on feel for the data, even if you just change the random seed to witness how the sampling changes.", "Here is one-thousand randomly generated, Normally-distributed points, created using sklearn.datasets.make_gaussian_quantiles. We will call this our population:", "For the sake of simplicity, let\u2019s limit the scope of our tests to the x-axis. This means that these visualizations could have been on a number line, but two dimensions allows us to more easily visualize the distribution of random samples.", "Now let\u2019s take two random samples of size 30 from this population:", "Our first sample mean, in red, is -.23 with a sample standard deviation of .93, and our second sample mean, in green, is -.13 with a sample standard deviation of .99. Since we know the true population mean and standard deviation (because the original one-thousand points were generated from a Normal distribution) are \u03bc=0 and \u03c3=1.0, we can safely say these samples are pretty representative of the whole population. But how representative are they? It looks like both means are a little under the real thing. At which point would we get suspicious, and say that perhaps these samples come from different populations altogether? This question is what A/B testing tries to answer.", "Just like with one-sample hypothesis testing, we have a formula for the test statistic with two samples. Even though it looks far more complex, it\u2019s still just the difference between the null and alternative hypothesis divided by the standard error:", "Essentially, even though we\u2019re dealing with two samples, we\u2019re still assuming that both samples are drawn from a Normal distribution, and so under the null hypothesis in a two-sample test, we assume the difference between sample means will be zero. This effectively reduces a two sample test to a single-sample hypothesis test. The process of picking a level of significance (an alpha) and finding a critical value is nearly identical.", "The following code snippet demonstrates a Python function for an A/B test, with an option for setting different alphas:", "Let\u2019s see how likely it was that we obtained these sample means (which we know should have a difference zero) due to pure chance:", "Our test statistic for these two samples is very close to zero, which it should be, and so obviously we reject the null hypothesis, since these sample means are supposed to both be exactly zero.", "However, let\u2019s continuously create random samples until we obtain two samples which are very unlikely, by setting the alpha to .0001, and which will allow us to reject the null hypothesis:", "It took 26,193 random samplings in order to produce unlikely enough sample means to reject the null hypothesis! The likelihood of this happening due to pure chance with just pair of random samples is .002%. Let\u2019s visualize these samples:", "We can see that most of the red dots are to the right of zero, and most of the green dots are to the left, yet we obtained these two samples by pure chance (after 26,193 contrived samples)!", "The point here is that with real data, where we don\u2019t know if two samples come from different populations, we must rely on A/B testing to tell us if the samples are really different enough to confidently make claims about their populations.", "This is crucial information for companies testing out different website versions or drug efficacies, and with a higher significance level such as .05, it\u2019s actually relatively common to obtain samples which allow us to wrongly reject the null hypothesis based on pure chance (also known as Type I error). Because of this, it\u2019s common to introduce corrections such as Bonferroni\u2019s Correction to reduce the error that arises from increased parameter space, which is known as the multiple comparison problem or the look-elsewhere effect.", "As always, it\u2019s important to understand your data inside and out before making strong claims about it, even when wielding statistical tests and performing A/B testing, because false-though-apparent statistical significance is rampant in many fields, and it\u2019s surprisingly easy to obtain seemingly-unlikely sample data, even despite the contrived effort it took in the above example (even changing the random seed in this Jupyter notebook to 42 allows us, due to \u2018luck\u2019, to obtain two sample means which allow us to reject the null hypothesis at an alpha level of .0001 with only a few hundred samplings. Try it.)", "Messing with the data yourself is truly helpful for understanding the statistical intuitions behind testing, especially with A/B testing due to so many moving parts. But all hypothesis testing is virtually the same procedure. So generate some data, try it yourself, and thanks for reading!", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F5235289dae57&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-simple-guide-to-a-b-testing-in-python-5235289dae57&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-simple-guide-to-a-b-testing-in-python-5235289dae57&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-simple-guide-to-a-b-testing-in-python-5235289dae57&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-simple-guide-to-a-b-testing-in-python-5235289dae57&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----5235289dae57--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----5235289dae57--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@braytonhall?source=post_page-----5235289dae57--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@braytonhall?source=post_page-----5235289dae57--------------------------------", "anchor_text": "Brayton Hall"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F890423eca91b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-simple-guide-to-a-b-testing-in-python-5235289dae57&user=Brayton+Hall&userId=890423eca91b&source=post_page-890423eca91b----5235289dae57---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F5235289dae57&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-simple-guide-to-a-b-testing-in-python-5235289dae57&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F5235289dae57&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-simple-guide-to-a-b-testing-in-python-5235289dae57&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://commons.wikimedia.org/wiki/File:Two_Apples_on_a_Table_by_Paul_C%C3%A9zanne,_Speed_Art_Museum.jpg", "anchor_text": "Public Domain"}, {"url": "https://en.wikipedia.org/wiki/Standard_normal_table", "anchor_text": "standard normal table"}, {"url": "https://github.com/bphall/ab_vis", "anchor_text": "found on my Github"}, {"url": "https://en.wikipedia.org/wiki/Bonferroni_correction", "anchor_text": "Bonferroni\u2019s Correction"}, {"url": "https://en.wikipedia.org/wiki/Multiple_comparisons_problem", "anchor_text": "multiple comparison problem"}, {"url": "https://en.wikipedia.org/wiki/Look-elsewhere_effect", "anchor_text": "look-elsewhere effect"}, {"url": "https://medium.com/tag/data-science?source=post_page-----5235289dae57---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/statistics?source=post_page-----5235289dae57---------------statistics-----------------", "anchor_text": "Statistics"}, {"url": "https://medium.com/tag/visualization?source=post_page-----5235289dae57---------------visualization-----------------", "anchor_text": "Visualization"}, {"url": "https://medium.com/tag/tutorial?source=post_page-----5235289dae57---------------tutorial-----------------", "anchor_text": "Tutorial"}, {"url": "https://medium.com/tag/python?source=post_page-----5235289dae57---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F5235289dae57&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-simple-guide-to-a-b-testing-in-python-5235289dae57&user=Brayton+Hall&userId=890423eca91b&source=-----5235289dae57---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F5235289dae57&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-simple-guide-to-a-b-testing-in-python-5235289dae57&user=Brayton+Hall&userId=890423eca91b&source=-----5235289dae57---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F5235289dae57&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-simple-guide-to-a-b-testing-in-python-5235289dae57&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----5235289dae57--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F5235289dae57&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-simple-guide-to-a-b-testing-in-python-5235289dae57&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----5235289dae57---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----5235289dae57--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----5235289dae57--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----5235289dae57--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----5235289dae57--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----5235289dae57--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----5235289dae57--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----5235289dae57--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----5235289dae57--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@braytonhall?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@braytonhall?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Brayton Hall"}, {"url": "https://medium.com/@braytonhall/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "99 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F890423eca91b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-simple-guide-to-a-b-testing-in-python-5235289dae57&user=Brayton+Hall&userId=890423eca91b&source=post_page-890423eca91b--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F88eb813f80ff&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-simple-guide-to-a-b-testing-in-python-5235289dae57&newsletterV3=890423eca91b&newsletterV3Id=88eb813f80ff&user=Brayton+Hall&userId=890423eca91b&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}