{"url": "https://towardsdatascience.com/all-the-things-you-can-do-with-github-api-and-python-f01790fca131", "time": 1683009246.102388, "path": "towardsdatascience.com/all-the-things-you-can-do-with-github-api-and-python-f01790fca131/", "webpage": {"metadata": {"title": "All the Things You Can Do With GitHub API and Python | by Martin Heinz | Towards Data Science", "h1": "All the Things You Can Do With GitHub API and Python", "description": "GitHub REST API allows you to manage issues, branches, repositories, commits and more, so let's see how you can do that using Python!"}, "outgoing_paragraph_urls": [{"url": "https://developer.github.com/v3/", "anchor_text": "GitHub API", "paragraph_index": 0}, {"url": "https://github.com/settings/tokens", "anchor_text": "https://github.com/settings/tokens", "paragraph_index": 1}, {"url": "https://developer.github.com/apps/building-oauth-apps/understanding-scopes-for-oauth-apps/", "anchor_text": "docs here", "paragraph_index": 1}, {"url": "https://developer.github.com/v3/gists/", "anchor_text": "docs", "paragraph_index": 16}, {"url": "https://developer.github.com/v3/reactions/#reaction-types", "anchor_text": "reactions", "paragraph_index": 28}, {"url": "https://developer.github.com/v3/issues/comments/#list-comments-on-an-issue", "anchor_text": "here in docs", "paragraph_index": 29}, {"url": "https://developer.github.com/v3/", "anchor_text": "docs here", "paragraph_index": 33}, {"url": "https://pygithub.readthedocs.io/en/latest/examples.html", "anchor_text": "PyGitHub Examples", "paragraph_index": 33}, {"url": "https://martinheinz.dev/blog/25?utm_source=tds&utm_medium=referral&utm_campaign=blog_post_25", "anchor_text": "martinheinz.dev", "paragraph_index": 35}, {"url": "https://martinheinz.dev/", "anchor_text": "https://martinheinz.dev/", "paragraph_index": 37}, {"url": "https://ko-fi.com/martinheinz", "anchor_text": "https://ko-fi.com/martinheinz", "paragraph_index": 37}], "all_paragraphs": ["Most of us use GitHub every day either using CLI or its website. Sometimes however, you need to automate these same tasks like, for example creating Gist, querying repository analytics or just pulling, modifying and pushing new file. All these things and more can be done easily using GitHub API, and Python is here to help with that and make it even easier.", "Before we start using GitHub API, we first need to generate a personal access token that will allow us to authenticate against the API. We can get one at https://github.com/settings/tokens by clicking on Generate new token. You will be asked to select scopes for the token. Which scopes you choose will determine what information and actions you will be able to perform against the API. You should be careful with the ones prefixed with write:, delete: and admin: as these might be quite destructive. You can find description of each scope in docs here.", "Now that we have the token, let\u2019s test whether it actually works:", "And here is the expected (trimmed) response showing list of my public Gists:", "We have the personal token and we tested it with cURL, so now we can switch to doing the same thing in Python. We have two options here though. We can use raw requests or we can use .", "PyGitHub exposes some of the GitHub API endpoints for most common operations like repository, issue or branch management. It can\u2019t be used for every single feature exposed through the GitHub API, so in the following sections, I will show mixture of PyGitHub and Requests calls depending on whether it can be done with PyGitHub or not.", "First things first though \u2014 let\u2019s install both libraries ( PyGitHub and Requests) and see a simple example for both:", "Both snippets above use the same API endpoint to retrieve all open issues for specified repository.", "In both cases we start by taking GitHub token from environment variable. Next, in the example with using PyGitHub we use the token to create instance of GitHub class, which is then used to get repository and query its issues in open state. The result is paginated list of issues, of which we print the first page.", "In the example that uses raw HTTP request, we achieve the same result by building API URL from username and repository name and sending GET request to it containing state as body parameter and token as Authorization header. Only difference is that result is not paginated. Here is the result for both examples:", "Second, raw Python list of dictionaries (JSON):", "While on topic of issues, let\u2019s create one too, shall we?", "This is one of the use cases, where PyGitHub is very handy. We just need to get the repository, create issues against it and specify bunch of parameters. In the snippet above we use title, body, assignee and labels parameters, but you could also add milestone or more labels which are queried using their name.", "Another things we can create is GitHub Gist, this time using Requests:", "The request for creating Gists is pretty simple. In the POST request you need to specify whether the Gist should be public or not, next you need to populate list of files that will be part of said Gist, where each key is a file name and its content contains actual string content of the file. The code above uses json.dumps() to convert Python dictionary to JSON string to create request body and the usual Authorization header.", "Below you can see the relevant parts of the expected response:", "After creating a Gist you might want to do other things with it like update it, list commits, fork it or just fetch it. For all these operations there\u2019s a API endpoint listed in these docs.", "One very practical, but quite complicated use case for using GitHub API, is programmatically fetching, modifying, committing and finally pushing some file to repository. Let\u2019s break this down and see an example:", "Starting from the top, we get contents of a file using the usual repository reference, decode it to plain string and modify it. Next, in the push function, we create new branch originating from commit specified using source.commit.sha. Based on the if statement, we have 2 options update existing file or create new one. In case we're doing update, we first retrieve existing file to get its hash and path and then we perform the update using previously modified data ( content), supplied message, branch and author object. If on the other hand we want to create a new file in the repository, then we just omit passing in the SHA of existing file and we're done.", "If you are more into data science and analytics you might find useful possibility of querying views/clones statistics from your repositories:", "The code needed to retrieve the data from GiHub is really just one line for clones and one line for views. Both the clones and views object contains count, uniques and views attributes. We use the first 2 in the print statements to show actual and unique clones and views respectively.", "The disgusting (beautiful) one liner after that iterates over list of View objects that contain view count for each day and respective timestamp which we extract into list of tuples. We then find tuple with maximum count and print its date and actual view count on last line. This gives us output shown below:", "This example uses GitHub API, but can be used for non-GitHub purposes. I\u2019m talking about GitHub APIs ability to generate HTML from markdown text. This could be useful if you have website that can\u2019t render markdown directly, but rather you could use GitHub API to create HTML for you.", "Once again the query is quite simple. All we need to do is send the text to be rendered in text body parameter together with mode set to markdown. The example text above includes, code snippet, italics and bold text and that's exactly what we get back in form of HTML:", "You know these nice green check marks, yellow circles and ugly red crosses next to your commits that are added by CI tools? Do you want to change them (maybe just for fun, maybe as part of your own CI solution)? Of course you do. And there is API for that:", "Surprisingly (for me) this obscure API endpoint is part of PyGitHub library. To use it, we retrieve repo and its commit using commit hash. After that we create status for said commit, by describing its current state using parameters.", "There are 4 states we can specify, namely \u2014 error, failure, pending, or success - in this example I chose success. Next, the target_url is the URL to which the Details link points. And as you probably noticed, the description and context are the other values shown in dialog box shown below.", "To be able to verify that status change actually went through, we receive CommitStatus response which is representation of current status of commit. In this case looks like this:", "GitHub issue comments allow you to add various reactions to them. So, maybe you want to add +1/-1 to somebodies comment. Maybe just throw in some celebratory hooray emoji. If that's the case, then here's how you could do that in Python:", "To be able to create response, we will need the comment ID. It can be retrieved from API shown here in docs or by clicking on the three dots icon in upper right corner of issue comment and clicking Copy Link:", "With that we can insert owner username, repo name and this comment_id in the URL and emoji name (e.g. hooray) in the content body parameter. Additionally we need to also include Accept header, as this endpoint is part of developer preview.", "The expected response here is either 201 which means that reaction was created or 200 in which case the reaction was already added previously.", "And here is (trimmed) JSON response body, that we get back:", "Playing with public APIs is great way to start a new project (e.g. CI tools, Repository traffic analytics, GitHub Bots) and GitHub API has a lot of data/content for such a thing. What I showed here is just a small sample. To explore full API see docs here or if you don\u2019t feel like messing with the REST API, then check out PyGitHub Examples.", "If you liked this article you should check you other of my Python articles below!", "This article was originally posted at martinheinz.dev", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "CKA | RHCE | DevOps Engineer at IBM | Working with Python, Kubernetes, Linux and more | https://martinheinz.dev/ | https://ko-fi.com/martinheinz"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Ff01790fca131&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fall-the-things-you-can-do-with-github-api-and-python-f01790fca131&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fall-the-things-you-can-do-with-github-api-and-python-f01790fca131&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fall-the-things-you-can-do-with-github-api-and-python-f01790fca131&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fall-the-things-you-can-do-with-github-api-and-python-f01790fca131&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----f01790fca131--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----f01790fca131--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@martin.heinz?source=post_page-----f01790fca131--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@martin.heinz?source=post_page-----f01790fca131--------------------------------", "anchor_text": "Martin Heinz"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F4cbd6b36e62a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fall-the-things-you-can-do-with-github-api-and-python-f01790fca131&user=Martin+Heinz&userId=4cbd6b36e62a&source=post_page-4cbd6b36e62a----f01790fca131---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ff01790fca131&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fall-the-things-you-can-do-with-github-api-and-python-f01790fca131&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ff01790fca131&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fall-the-things-you-can-do-with-github-api-and-python-f01790fca131&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://developer.github.com/v3/", "anchor_text": "GitHub API"}, {"url": "https://unsplash.com/@baileymahon?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "BAILEY MAHON"}, {"url": "https://unsplash.com/s/photos/sea?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Unsplash"}, {"url": "https://github.com/settings/tokens", "anchor_text": "https://github.com/settings/tokens"}, {"url": "https://developer.github.com/apps/building-oauth-apps/understanding-scopes-for-oauth-apps/", "anchor_text": "docs here"}, {"url": "https://developer.github.com/v3/gists/", "anchor_text": "docs"}, {"url": "https://developer.github.com/v3/reactions/#reaction-types", "anchor_text": "reactions"}, {"url": "https://developer.github.com/v3/issues/comments/#list-comments-on-an-issue", "anchor_text": "here in docs"}, {"url": "https://developer.github.com/v3/", "anchor_text": "docs here"}, {"url": "https://pygithub.readthedocs.io/en/latest/examples.html", "anchor_text": "PyGitHub Examples"}, {"url": "https://martinheinz.dev/blog/25?utm_source=tds&utm_medium=referral&utm_campaign=blog_post_25", "anchor_text": "martinheinz.dev"}, {"url": "https://towardsdatascience.com/automating-every-aspect-of-your-python-project-6517336af9da", "anchor_text": "Automating Every Aspect of Your Python ProjectEvery Python project can benefit from automation using Makefile, optimized Docker images, well configured CI/CD, Code\u2026towardsdatascience.com"}, {"url": "https://towardsdatascience.com/ultimate-setup-for-your-next-python-project-179bda8a7c2c", "anchor_text": "Ultimate Setup for Your Next Python ProjectStarting any project from scratch can be daunting task\u2026 But not if you have this ultimate Python project blueprint!towardsdatascience.com"}, {"url": "https://towardsdatascience.com/implementing-grpc-server-using-python-9dc42e8daea0", "anchor_text": "Implementing gRPC server using PythonYour next API doesn\u2019t need to be built with REST and JSON. How about gRPC and Protocol Buffers for better performance\u2026towardsdatascience.com"}, {"url": "https://medium.com/tag/programming?source=post_page-----f01790fca131---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/tag/python?source=post_page-----f01790fca131---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/software-engineering?source=post_page-----f01790fca131---------------software_engineering-----------------", "anchor_text": "Software Engineering"}, {"url": "https://medium.com/tag/technology?source=post_page-----f01790fca131---------------technology-----------------", "anchor_text": "Technology"}, {"url": "https://medium.com/tag/towards-data-science?source=post_page-----f01790fca131---------------towards_data_science-----------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Ff01790fca131&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fall-the-things-you-can-do-with-github-api-and-python-f01790fca131&user=Martin+Heinz&userId=4cbd6b36e62a&source=-----f01790fca131---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Ff01790fca131&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fall-the-things-you-can-do-with-github-api-and-python-f01790fca131&user=Martin+Heinz&userId=4cbd6b36e62a&source=-----f01790fca131---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ff01790fca131&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fall-the-things-you-can-do-with-github-api-and-python-f01790fca131&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----f01790fca131--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Ff01790fca131&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fall-the-things-you-can-do-with-github-api-and-python-f01790fca131&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----f01790fca131---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----f01790fca131--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----f01790fca131--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----f01790fca131--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----f01790fca131--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----f01790fca131--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----f01790fca131--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----f01790fca131--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----f01790fca131--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@martin.heinz?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@martin.heinz?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Martin Heinz"}, {"url": "https://medium.com/@martin.heinz/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "5.4K Followers"}, {"url": "https://martinheinz.dev/", "anchor_text": "https://martinheinz.dev/"}, {"url": "https://ko-fi.com/martinheinz", "anchor_text": "https://ko-fi.com/martinheinz"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F4cbd6b36e62a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fall-the-things-you-can-do-with-github-api-and-python-f01790fca131&user=Martin+Heinz&userId=4cbd6b36e62a&source=post_page-4cbd6b36e62a--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Ff723091181e3&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fall-the-things-you-can-do-with-github-api-and-python-f01790fca131&newsletterV3=4cbd6b36e62a&newsletterV3Id=f723091181e3&user=Martin+Heinz&userId=4cbd6b36e62a&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}