{"url": "https://towardsdatascience.com/practical-guide-to-entity-resolution-part-3-1b2c262f50a7", "time": 1683015940.0170722, "path": "towardsdatascience.com/practical-guide-to-entity-resolution-part-3-1b2c262f50a7/", "webpage": {"metadata": {"title": "Practical Guide to Entity Resolution \u2014 part 3 | by Yifei Huang | Towards Data Science", "h1": "Practical Guide to Entity Resolution \u2014 part 3", "description": "In the context of ER, featurization means transforming existing columns into derived features that can inform whether disparate records refer to the same thing. Blocking means selecting a targeted\u2026"}, "outgoing_paragraph_urls": [{"url": "https://yifei-huang.medium.com/practical-guide-to-entity-resolution-part-1-f7893402ea7e", "anchor_text": "part 1", "paragraph_index": 0}, {"url": "https://yifei-huang.medium.com/practical-guide-to-entity-resolution-part-2-ab6e42572405", "anchor_text": "part 2", "paragraph_index": 0}, {"url": "https://yifei-huang.medium.com/practical-guide-to-entity-resolution-part-1-f7893402ea7e", "anchor_text": "part 1", "paragraph_index": 4}, {"url": "https://tfhub.dev/google/universal-sentence-encoder/4", "anchor_text": "niversal Sentence Encoder", "paragraph_index": 7}, {"url": "https://yifei-huang.medium.com/practical-guide-to-entity-resolution-part-4-299ac89b9415", "anchor_text": "candidate pair generation and match scoring", "paragraph_index": 15}, {"url": "http://twitter.com/yifei_huang", "anchor_text": "twitter.com/yifei_huang", "paragraph_index": 17}, {"url": "http://linkedin.com/in/yifeihuangdatascience", "anchor_text": "linkedin.com/in/yifeihuangdatascience", "paragraph_index": 17}], "all_paragraphs": ["This is part 3 of a mini-series on entity resolution. Check out part 1, part 2 if you missed it", "What is featurization and blocking and why does it matter?", "In the context of ER, featurization means transforming existing columns into derived features that can inform whether disparate records refer to the same thing. Blocking means selecting a targeted subset of features to use as self join keys to efficiently create potential match candidate pairs. The reason these two steps are grouped in our discussion is blocking keys are often derived from features.", "Good featurization enables efficient blocking and also good match accuracy downstream, therefore it is a critical piece of the ER process. It is also the least defined step, where a lot of creativity can be injected into the process.", "Good blocking can dramatically improve the efficiency of the ER process, and make it possible to scale up to many input sources and large datasets. As we have discussed in part 1, the universe of potential candidate pairs is N\u00b2 with the number of records. However, not all of those candidate pairs are worth evaluating. For example, learning quickbooks 2007 and superstart fun with reading writing are clearly not the same thing and should not be included in the candidate pairs. One way to address this is to use a more specific blocking key, such as the exact string name of the product, to create candidate pairs. This way only products that have the exact same normalized name string will be included in the candidate pairs. However, this is clearly too restrictive and will miss potential matches like learning quickbooks 2007 and learning qb 2007 . Good blocking key selection is crucial to effectively balance this trade off between good efficiency and low false negative rate.", "How to implement featurization and blocking?", "Featurization, perhaps even more so than previous steps in ER, is dependent on the type of source data and the desired downstream comparison algorithm. We won\u2019t try to provide an exhaustive set of possible techniques here, but instead focus on an illustrative implementation for our example use case of Amazon vs Google products. In the normalized dataset, we have 4 columns to work with in terms of featurization \u2014 name, description, manufacturer, price . 3 out of the 4 columns are text based, and where the bulk of the identifying information lives. Therefore we will focus most of featurization efforts here. There are many ways to featurize text data, but at a high level they generally boil down to", "For our particular example, we will use a basic TF-IDF model, where we tokenize the text, remove english stop words, and apply TF-IDF vectorization. We will also use the Universal Sentence Encoder model from Tensorflow, to transform name and description strings into 512-dimensional vectors.", "By applying these two transformations to the text columns in name, description, manufacturer , we end up with a number of rich features that we can use to evaluate potential match between candidates pairs, as well as to help select blocking keys. Specifically, the TF-IDF vector and sentence encoding vector can be very useful in generating good blocking keys.", "As we discussed above, a good blocking key is something that balances specificity and false negative rate. The full name of a product is specific, but also has a very high false negative rate. We can remedy this by choosing individual words within the name or description of a product. It is important to note, however, that some tokens are better than others for the purposes of blocking. For example in learning quickbooks 2007 , quickbooks is intuitively the best blocking key, followed by 2007 , followed by learning . This is because quickbooks is the most meaningful keyword in terms defining the product, 2007 is specific to the version of the product, and learning is a pretty generic descriptor. Conveniently, this is also precisely what TF-IDF tries to systematically measure, and the normalized TF-IDF token weights for learning quickbooks 2007 is quickbooks: 0.7, 2007: 0.51, learning: 0.5. As you can see, the TF-IDF weights of the tokens is a decent proxy metric to prioritize and select good blocking keys.", "Similarly, the sentence encoding vector weights also tells us which dimensions in the latent vector space is most salient to the meaning of the sentence, and can used to select blocking keys. However, in the case of sentence encoding, the dimension with the highest weight does not directly map to a word token, and is therefore less interpretable.", "The example PySpark code that implements the above is as follows", "The code above leverages pyspark.ml libraries to", "The user defined function that applies the Universal Sentence Encoder is worth quickly unpacking", "What exactly is this doing, and why is it necessary? Tensorflow hub provides a pre-trained model that helps users transform text into vector representation. This model is not distributed, so that means in order to leverage in a distributed computation framework like Spark, we have to wrap it in a user defined function and make it available on every executor node. However, we do not want the expensive load call to execute each time we transform a piece of text. We only want it to load once per executor, and then re-used for all the tasks that are distributed to that node. The get_model_magic method is essentially a trick to enable this.", "Now that we have our features and blocking key, we are ready to tackle candidate pair generation and match scoring.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Data science at Sequoia Capital | Ex head of data science at Palantir | twitter.com/yifei_huang | linkedin.com/in/yifeihuangdatascience"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F1b2c262f50a7&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpractical-guide-to-entity-resolution-part-3-1b2c262f50a7&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpractical-guide-to-entity-resolution-part-3-1b2c262f50a7&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpractical-guide-to-entity-resolution-part-3-1b2c262f50a7&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpractical-guide-to-entity-resolution-part-3-1b2c262f50a7&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----1b2c262f50a7--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----1b2c262f50a7--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://yifei-huang.medium.com/?source=post_page-----1b2c262f50a7--------------------------------", "anchor_text": ""}, {"url": "https://yifei-huang.medium.com/?source=post_page-----1b2c262f50a7--------------------------------", "anchor_text": "Yifei Huang"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F829cb1ab6458&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpractical-guide-to-entity-resolution-part-3-1b2c262f50a7&user=Yifei+Huang&userId=829cb1ab6458&source=post_page-829cb1ab6458----1b2c262f50a7---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F1b2c262f50a7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpractical-guide-to-entity-resolution-part-3-1b2c262f50a7&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F1b2c262f50a7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpractical-guide-to-entity-resolution-part-3-1b2c262f50a7&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@honeyyanibel?utm_source=medium&utm_medium=referral", "anchor_text": "Honey Yanibel Minaya Cruz"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://yifei-huang.medium.com/practical-guide-to-entity-resolution-part-1-f7893402ea7e", "anchor_text": "part 1"}, {"url": "https://yifei-huang.medium.com/practical-guide-to-entity-resolution-part-2-ab6e42572405", "anchor_text": "part 2"}, {"url": "https://yifei-huang.medium.com/practical-guide-to-entity-resolution-part-1-f7893402ea7e", "anchor_text": "part 1"}, {"url": "https://nlp.stanford.edu/IR-book/html/htmledition/tokenization-1.html", "anchor_text": "break sentences into words"}, {"url": "https://en.wikipedia.org/wiki/Stemming", "anchor_text": "stemming"}, {"url": "https://en.wikipedia.org/wiki/Lemmatisation", "anchor_text": "lemmatization"}, {"url": "https://en.wikipedia.org/wiki/Tf%E2%80%93idf", "anchor_text": "TF-IDF"}, {"url": "https://en.wikipedia.org/wiki/Word_embedding", "anchor_text": "word embedding"}, {"url": "https://en.wikipedia.org/wiki/Sentence_embedding", "anchor_text": "sentence embedding"}, {"url": "https://tfhub.dev/google/universal-sentence-encoder/4", "anchor_text": "niversal Sentence Encoder"}, {"url": "https://tfhub.dev/google/universal-sentence-encoder/4", "anchor_text": "https://tfhub.dev/google/universal-sentence-encoder/4"}, {"url": "http://twitter.com/udf", "anchor_text": "@udf"}, {"url": "https://yifei-huang.medium.com/practical-guide-to-entity-resolution-part-4-299ac89b9415", "anchor_text": "candidate pair generation and match scoring"}, {"url": "https://medium.com/tag/entity-resolution?source=post_page-----1b2c262f50a7---------------entity_resolution-----------------", "anchor_text": "Entity Resolution"}, {"url": "https://medium.com/tag/pyspark?source=post_page-----1b2c262f50a7---------------pyspark-----------------", "anchor_text": "Pyspark"}, {"url": "https://medium.com/tag/data-science?source=post_page-----1b2c262f50a7---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----1b2c262f50a7---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F1b2c262f50a7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpractical-guide-to-entity-resolution-part-3-1b2c262f50a7&user=Yifei+Huang&userId=829cb1ab6458&source=-----1b2c262f50a7---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F1b2c262f50a7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpractical-guide-to-entity-resolution-part-3-1b2c262f50a7&user=Yifei+Huang&userId=829cb1ab6458&source=-----1b2c262f50a7---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F1b2c262f50a7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpractical-guide-to-entity-resolution-part-3-1b2c262f50a7&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----1b2c262f50a7--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F1b2c262f50a7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpractical-guide-to-entity-resolution-part-3-1b2c262f50a7&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----1b2c262f50a7---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----1b2c262f50a7--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----1b2c262f50a7--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----1b2c262f50a7--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----1b2c262f50a7--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----1b2c262f50a7--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----1b2c262f50a7--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----1b2c262f50a7--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----1b2c262f50a7--------------------------------", "anchor_text": ""}, {"url": "https://yifei-huang.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://yifei-huang.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Yifei Huang"}, {"url": "https://yifei-huang.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "1.1K Followers"}, {"url": "http://twitter.com/yifei_huang", "anchor_text": "twitter.com/yifei_huang"}, {"url": "http://linkedin.com/in/yifeihuangdatascience", "anchor_text": "linkedin.com/in/yifeihuangdatascience"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F829cb1ab6458&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpractical-guide-to-entity-resolution-part-3-1b2c262f50a7&user=Yifei+Huang&userId=829cb1ab6458&source=post_page-829cb1ab6458--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fa3ea401afa28&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpractical-guide-to-entity-resolution-part-3-1b2c262f50a7&newsletterV3=829cb1ab6458&newsletterV3Id=a3ea401afa28&user=Yifei+Huang&userId=829cb1ab6458&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}