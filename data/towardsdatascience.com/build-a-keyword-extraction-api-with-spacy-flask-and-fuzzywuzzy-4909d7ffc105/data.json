{"url": "https://towardsdatascience.com/build-a-keyword-extraction-api-with-spacy-flask-and-fuzzywuzzy-4909d7ffc105", "time": 1683005533.804404, "path": "towardsdatascience.com/build-a-keyword-extraction-api-with-spacy-flask-and-fuzzywuzzy-4909d7ffc105/", "webpage": {"metadata": {"title": "Build A Keyword Extraction API with Spacy, Flask, and FuzzyWuzzy | by Charles Pierse | Towards Data Science", "h1": "Build A Keyword Extraction API with Spacy, Flask, and FuzzyWuzzy", "description": "Often when dealing with long sequences of text you\u2019ll want to break those sequences up and extract individual keywords to perform a search, or query a database. If the input text is natural language\u2026"}, "outgoing_paragraph_urls": [{"url": "https://spacy.io/", "anchor_text": "Spacy", "paragraph_index": 2}, {"url": "https://en.wikipedia.org/wiki/Levenshtein_distance", "anchor_text": "Levenshtein Distance", "paragraph_index": 17}, {"url": "https://medium.com/u/56f7cdc8c678?source=post_page-----4909d7ffc105--------------------------------", "anchor_text": "Luciano Strika", "paragraph_index": 18}, {"url": "https://flask.palletsprojects.com/en/1.1.x/quickstart/#a-minimal-application", "anchor_text": "docs", "paragraph_index": 21}, {"url": "https://www.heroku.com/", "anchor_text": "heroku\u2019s site", "paragraph_index": 28}], "all_paragraphs": ["Often when dealing with long sequences of text you\u2019ll want to break those sequences up and extract individual keywords to perform a search, or query a database.", "If the input text is natural language you most likely don\u2019t want to query your database with every single word \u2014 instead, you probably want to choose a set of unique keywords from your input and perform an efficient search using those words or word phrases.", "This task is known as keyword extraction and thanks to production grade NLP tools like Spacy it can be achieved in just a couple of lines of Python. In this article we will cover:", "This lightweight API is intended to be a general purpose keyword service for a number of use cases. You can of course also build any of Spacy\u2019s numerous NLP functions into this API using the same general structure.", "Before we start, make sure to run: pip install flask flask-cors spacy fuzzywuzzy to install all the required packages.", "For the keyword extraction function, we will use two of Spacy\u2019s central ideas\u2014 the core language model and document object.", "General-purpose pretrained models to predict named entities, part-of-speech tags and syntactic dependencies. Can be used out-of-the-box and fine-tuned on more specific data.\u00b9", "A container for accessing linguistic annotations\u2026(and) is an array of token structs\u00b2", "So with the creation of a document object created via the model we are given access to a number of very useful (and powerful) NLP derived attributes and functions including part-of-speech tags and noun chunks which will be central to the functionality of the keyword extractor.", "With Spacy we must first download the language model we would like to use. As of today Spacy\u2019s current version 2.2.4 has language models for 10 different languages, all in varying sizes. I will be using the small version of the English Core model. I chose the small model as I had issues with the size of the large model in memory for Heroku deployment. Depending on where/how you deploy this model you may be able to use the large model. To download the language model using Spacy\u2019s CLI run the following command in your terminal:", "When we build the flask API we will use python\u2019s inbuilt subprocess package to run this command within the app itself once the service spins up. But for now, we can do this in the command line.", "With the model now downloaded you can load it and create the nlp object:", "Our language model nlp will be passed as an argument to the extract_keywords() function below to generate the doc object.", "The keyword extraction function takes 3 arguments:", "The code snippet below shows how the function works by:", "The function then returns a list of all the unique words that ended up in the results variable.", "When humans type words, typos and mistakes are inevitable. Within the context of keyword searching/matching this is a problem, but it is a problem that can be elegantly solved using fuzzy matching algorithms.", "The Python package FuzzyWuzzy implements one very effective fuzzy matching algorithm: Levenshtein Distance.", "Levenshtein Distance is a formula for calculating the cost of transforming a source word S into a target word T. The algorithm penalizes source words that require many changes to be transformed into a target word, and favors words that require small transformations. For a detailed and intuitive explanation of how FuzzyWuzzy implements this check Luciano Strika\u2019s article below.", "Fuzzy matching is very fast to implement. Importing ratio from the package imports the default Levenshtein distance scoring mechanism andprocess.extractBests() allows us to calculate Levenshtein distance over a list of targets and return the results above a define cutoff point. The score_cutoff parameter is something you may want to fine-tune for yourself to get the best matching results.", "Almost there, all that\u2019s left to do now is to wrap everything up into 2 very simple Flask endpoints. For the gist below make sure to either import the fuzzy matcher and keyword extraction service or declare them in app.py itself.", "If you are new to Flask I recommend checking out their docs quickstart guides. They provide simple, minimal examples of how to get up and running.", "Both endpoints receive POST requests and thus arguments are passed to each endpoint via the request body.", "You may also notice that we are using the subprocess module mentioned earlier to programmatically call the Spacy CLI inside the application. This will be particularly useful if you need to deploy this to a cloud service and forget to download the model manually via the CLI (like me).", "We load the language model outside both endpoints as we want this object to persist indefinitely while our service runs without having to load it every time a request is made. This makes the addition of new endpoints which use Spacy functionality easy as they can all share the same language model which can be provided as an argument.", "And that should be it, with the code below implemented run flask run inside the command line of the projects\u2019 directory and this should launch the API on your local host.", "You can test out the endpoints in Postman to make sure they behave as expected.", "If you would like to deploy the API to a cloud service such as Heroku check out:", "The article above is a couple of years old the principles are the still the same, you can also set up an app directly on heroku\u2019s site and push to it via the CLI.", "That should hopefully help you get this simple API up and running. I have found a number of instances where I need a simple service such as this to handle text inputs or perform some kind of NLP task. What\u2019s hopefully helpful about this setup is that it should easily allow for additional Spacy NLP services to be added as endpoints without any major changes.", "If you have any questions at all or spot a bug in any of the code I\u2019ve provided please let me know, thanks for reading!", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F4909d7ffc105&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuild-a-keyword-extraction-api-with-spacy-flask-and-fuzzywuzzy-4909d7ffc105&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuild-a-keyword-extraction-api-with-spacy-flask-and-fuzzywuzzy-4909d7ffc105&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuild-a-keyword-extraction-api-with-spacy-flask-and-fuzzywuzzy-4909d7ffc105&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuild-a-keyword-extraction-api-with-spacy-flask-and-fuzzywuzzy-4909d7ffc105&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----4909d7ffc105--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----4909d7ffc105--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@charlespierse?source=post_page-----4909d7ffc105--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@charlespierse?source=post_page-----4909d7ffc105--------------------------------", "anchor_text": "Charles Pierse"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F1efa9a37c582&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuild-a-keyword-extraction-api-with-spacy-flask-and-fuzzywuzzy-4909d7ffc105&user=Charles+Pierse&userId=1efa9a37c582&source=post_page-1efa9a37c582----4909d7ffc105---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F4909d7ffc105&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuild-a-keyword-extraction-api-with-spacy-flask-and-fuzzywuzzy-4909d7ffc105&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F4909d7ffc105&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuild-a-keyword-extraction-api-with-spacy-flask-and-fuzzywuzzy-4909d7ffc105&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@worksite?utm_source=medium&utm_medium=referral", "anchor_text": "WORKSITE Ltd."}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://spacy.io/", "anchor_text": "Spacy"}, {"url": "https://github.com/seatgeek/fuzzywuzzy", "anchor_text": "fuzzyWuzzy"}, {"url": "https://flask.palletsprojects.com/en/1.1.x/", "anchor_text": "Flask"}, {"url": "https://spacy.io/models", "anchor_text": "Core language models"}, {"url": "https://spacy.io/api/doc", "anchor_text": "document"}, {"url": "https://spacy.io/usage/linguistic-features#noun-chunks", "anchor_text": "noun chunks"}, {"url": "https://www.reddit.com/r/reddit.com/comments/k5vqa/are_you_sure/", "anchor_text": "u/lawlesskenny"}, {"url": "https://en.wikipedia.org/wiki/Levenshtein_distance", "anchor_text": "Levenshtein Distance"}, {"url": "https://medium.com/u/56f7cdc8c678?source=post_page-----4909d7ffc105--------------------------------", "anchor_text": "Luciano Strika"}, {"url": "https://towardsdatascience.com/fuzzywuzzy-how-to-measure-string-distance-on-python-4e8852d7c18f", "anchor_text": "FuzzyWuzzy: How to Measure String Distance on PythonFuzzyWuzzy is a Python library used for measuring the similarity between two strings. Here\u2019s how you can start using it\u2026towardsdatascience.com"}, {"url": "https://flask.palletsprojects.com/en/1.1.x/quickstart/#a-minimal-application", "anchor_text": "docs"}, {"url": "https://medium.com/the-andela-way/deploying-a-python-flask-app-to-heroku-41250bda27d0", "anchor_text": "Deploying a Python Flask app on HerokuIn my previous post I described on a high level how I developed an API using Flask. I talked briefly about how I hosted\u2026medium.com"}, {"url": "https://www.heroku.com/", "anchor_text": "heroku\u2019s site"}, {"url": "https://spacy.io/models", "anchor_text": "https://spacy.io/models"}, {"url": "https://spacy.io/api/doc", "anchor_text": "https://spacy.io/api/doc"}, {"url": "https://medium.com/tag/python?source=post_page-----4909d7ffc105---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/nlp?source=post_page-----4909d7ffc105---------------nlp-----------------", "anchor_text": "NLP"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----4909d7ffc105---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/tag/programming?source=post_page-----4909d7ffc105---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/tag/software-development?source=post_page-----4909d7ffc105---------------software_development-----------------", "anchor_text": "Software Development"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F4909d7ffc105&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuild-a-keyword-extraction-api-with-spacy-flask-and-fuzzywuzzy-4909d7ffc105&user=Charles+Pierse&userId=1efa9a37c582&source=-----4909d7ffc105---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F4909d7ffc105&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuild-a-keyword-extraction-api-with-spacy-flask-and-fuzzywuzzy-4909d7ffc105&user=Charles+Pierse&userId=1efa9a37c582&source=-----4909d7ffc105---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F4909d7ffc105&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuild-a-keyword-extraction-api-with-spacy-flask-and-fuzzywuzzy-4909d7ffc105&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----4909d7ffc105--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F4909d7ffc105&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuild-a-keyword-extraction-api-with-spacy-flask-and-fuzzywuzzy-4909d7ffc105&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----4909d7ffc105---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----4909d7ffc105--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----4909d7ffc105--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----4909d7ffc105--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----4909d7ffc105--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----4909d7ffc105--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----4909d7ffc105--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----4909d7ffc105--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----4909d7ffc105--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@charlespierse?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@charlespierse?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Charles Pierse"}, {"url": "https://medium.com/@charlespierse/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "244 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F1efa9a37c582&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuild-a-keyword-extraction-api-with-spacy-flask-and-fuzzywuzzy-4909d7ffc105&user=Charles+Pierse&userId=1efa9a37c582&source=post_page-1efa9a37c582--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F54aad00fd938&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuild-a-keyword-extraction-api-with-spacy-flask-and-fuzzywuzzy-4909d7ffc105&newsletterV3=1efa9a37c582&newsletterV3Id=54aad00fd938&user=Charles+Pierse&userId=1efa9a37c582&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}