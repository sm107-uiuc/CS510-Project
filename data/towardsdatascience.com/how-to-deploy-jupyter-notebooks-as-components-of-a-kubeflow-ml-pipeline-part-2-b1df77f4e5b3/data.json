{"url": "https://towardsdatascience.com/how-to-deploy-jupyter-notebooks-as-components-of-a-kubeflow-ml-pipeline-part-2-b1df77f4e5b3", "time": 1682994072.035855, "path": "towardsdatascience.com/how-to-deploy-jupyter-notebooks-as-components-of-a-kubeflow-ml-pipeline-part-2-b1df77f4e5b3/", "webpage": {"metadata": {"title": "How to deploy Jupyter notebooks as components of a Kubeflow ML pipeline (Part 2) | by Lak Lakshmanan | Towards Data Science", "h1": "How to deploy Jupyter notebooks as components of a Kubeflow ML pipeline (Part 2)", "description": "In Part 1, I showed you how to create and deploy a Kubeflow ML pipeline using Docker components. In Part 2, I will show you how to make a Jupyter notebook a component of a Kubeflow ML pipeline. Where\u2026"}, "outgoing_paragraph_urls": [{"url": "https://towardsdatascience.com/how-to-create-and-deploy-a-kubeflow-machine-learning-pipeline-part-1-efea7a4b650f", "anchor_text": "Part 1", "paragraph_index": 0}, {"url": "https://github.com/GoogleCloudPlatform/data-science-on-gcp/blob/master/updates/cloudml/flights_model.ipynb", "anchor_text": "flights_model.ipynb", "paragraph_index": 7}, {"url": "https://github.com/GoogleCloudPlatform/data-science-on-gcp/blob/master/updates/cloudml/flights_model.ipynb", "anchor_text": "flights_model.ipynb", "paragraph_index": 8}, {"url": "https://towardsdatascience.com/how-to-create-and-deploy-a-kubeflow-machine-learning-pipeline-part-1-efea7a4b650f", "anchor_text": "Part 1", "paragraph_index": 13}, {"url": "https://github.com/GoogleCloudPlatform/data-science-on-gcp/blob/master/updates/cloudml/launcher.ipynb", "anchor_text": "launcher.ipynb", "paragraph_index": 17}, {"url": "https://towardsdatascience.com/how-to-create-and-deploy-a-kubeflow-machine-learning-pipeline-part-1-efea7a4b650f", "anchor_text": "Part 1 of how to create and deploy a Kubeflow ML pipeline using Docker images", "paragraph_index": 18}], "all_paragraphs": ["In Part 1, I showed you how to create and deploy a Kubeflow ML pipeline using Docker components. In Part 2, I will show you how to make a Jupyter notebook a component of a Kubeflow ML pipeline. Where the Docker components are for the folks operationalizing machine learning models, being able to run a Jupyter notebook on arbitrary hardware is more suitable for data scientists.", "I\u2019ll assume that you already have a Kubeflow pipelines cluster up and running as explained in the previous article. Typically, the \u201cML Platform Team\u201d (part of the IT department) would manage the cluster for use by a team of data scientists.", "Note: When I wrote this article, you had to run a notebook on the cluster itself. Now, though, a much better way is to use AI Platform Notebooks and submit code to the cluster remotely. Follow the instructions in this README file, making sure to start a TensorFlow 1.10 Notebook VM. Skip this step, and start from Step 2.", "From the Kubeflow pipelines user interface (http://localhost:8085/pipeline if you followed the instructions in the previous post), click on the link for Notebooks:", "This will prompt you to start JupyterHub if this is the first time. Use your GCP username/password to login. Then, select the version of Tensorflow that you want:", "I chose TensorFlow v1.10 on a cpu.", "Then, open up a Terminal window and git clone my repo:", "Switch back to the Jupyter notebooks listing and navigate to data-science-on-gcp/updates/cloudml and open up flights_model.ipynb.", "The actual TensorFlow code (See full notebook here: flights_model.ipynb) isn\u2019t important, but I want you to notice a few things. One is that I developed this notebook mostly in Eager mode, for easy debugging:", "Then, I trained the model for a few steps and specified more steps if \u201cnot in develop mode\u201d:", "Finally, I deployed it to Cloud ML Engine as a web service:", "and made sure that I could send JSON to the deployed model:", "to get back, for each instance the probability that the flight will be late.", "So, I have a full-fledged notebook that does some ML workflow. Can I execute this as a component as part of a Kubeflow pipeline? Recall from Part 1 that all it takes for something to be a component is for it to be a self-contained container that takes a few parameters and writes outputs to files, either on the Kubeflow cluster or on Cloud Storage.", "In order to deploy the flights_model notebook as a component:", "The point of running the notebook as one step of the pipeline is so that it can be orchestrated and reused in other pipelines. But just to show you how it can be done, this is how you would create a pipeline that executes only this notebook:", "Nothing fancy \u2014 I\u2019m creating a container, telling it to use my image that has TensorFlow, papermill, etc. and giving it the input and output notebooks and params. As the pipeline runs, logs get streamed to the pipelines log, and will show up in Stackdriver:", "In my GitHub repo, creating and deploying the pipeline is shown in launcher.ipynb.", "If you haven\u2019t do so already, please read and walk through Part 1 of how to create and deploy a Kubeflow ML pipeline using Docker images.", "Try out this article on how to deploy a Jupyter notebook as a component in a Kubeflow pipeline:", "The launcher notebook also includes the ability to launch the flights_model notebook on the Deep Learning VM, but ignore it for now \u2014 I\u2019ll cover that in Part 3 of this series.", "The notebook can be a unit of composability and reusability \u2014 but for this to happen, you have to take care to write small, single-purpose notebooks. What I did in this article \u2014 a huge, monolithic notebook \u2014 is not a good idea. The tradeoff is that if you use smaller notebooks, dependency tracking becomes difficult.", "In other words, use Deep Learning VM for small teams, Jupyter components for experimental work, and container-ops for mature models", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "articles are personal observations and not investment advice."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fb1df77f4e5b3&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-deploy-jupyter-notebooks-as-components-of-a-kubeflow-ml-pipeline-part-2-b1df77f4e5b3&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-deploy-jupyter-notebooks-as-components-of-a-kubeflow-ml-pipeline-part-2-b1df77f4e5b3&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-deploy-jupyter-notebooks-as-components-of-a-kubeflow-ml-pipeline-part-2-b1df77f4e5b3&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-deploy-jupyter-notebooks-as-components-of-a-kubeflow-ml-pipeline-part-2-b1df77f4e5b3&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----b1df77f4e5b3--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----b1df77f4e5b3--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://lakshmanok.medium.com/?source=post_page-----b1df77f4e5b3--------------------------------", "anchor_text": ""}, {"url": "https://lakshmanok.medium.com/?source=post_page-----b1df77f4e5b3--------------------------------", "anchor_text": "Lak Lakshmanan"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F247b0630b5d6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-deploy-jupyter-notebooks-as-components-of-a-kubeflow-ml-pipeline-part-2-b1df77f4e5b3&user=Lak+Lakshmanan&userId=247b0630b5d6&source=post_page-247b0630b5d6----b1df77f4e5b3---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fb1df77f4e5b3&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-deploy-jupyter-notebooks-as-components-of-a-kubeflow-ml-pipeline-part-2-b1df77f4e5b3&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fb1df77f4e5b3&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-deploy-jupyter-notebooks-as-components-of-a-kubeflow-ml-pipeline-part-2-b1df77f4e5b3&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://towardsdatascience.com/how-to-create-and-deploy-a-kubeflow-machine-learning-pipeline-part-1-efea7a4b650f", "anchor_text": "Part 1"}, {"url": "https://unsplash.com/photos/QtETdXXR7gs?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Cameron Venti"}, {"url": "https://unsplash.com/search/photos/container?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Unsplash"}, {"url": "https://github.com/GoogleCloudPlatform/data-science-on-gcp/blob/master/updates/cloudml/flights_model.ipynb", "anchor_text": "flights_model.ipynb"}, {"url": "https://github.com/GoogleCloudPlatform/data-science-on-gcp/blob/master/updates/cloudml/flights_model.ipynb", "anchor_text": "flights_model.ipynb"}, {"url": "https://towardsdatascience.com/how-to-create-and-deploy-a-kubeflow-machine-learning-pipeline-part-1-efea7a4b650f", "anchor_text": "Part 1"}, {"url": "https://github.com/GoogleCloudPlatform/data-science-on-gcp/blob/master/updates/cloudml/submitnotebook/Dockerfile", "anchor_text": "Dockerfile"}, {"url": "https://github.com/GoogleCloudPlatform/data-science-on-gcp/blob/master/updates/cloudml/submitnotebook/run_notebook.sh", "anchor_text": "run_notebook.sh"}, {"url": "http://twitter.com/dsl", "anchor_text": "@dsl"}, {"url": "https://github.com/GoogleCloudPlatform/data-science-on-gcp/blob/master/updates/cloudml/launcher.ipynb", "anchor_text": "launcher.ipynb"}, {"url": "https://towardsdatascience.com/how-to-create-and-deploy-a-kubeflow-machine-learning-pipeline-part-1-efea7a4b650f", "anchor_text": "Part 1 of how to create and deploy a Kubeflow ML pipeline using Docker images"}, {"url": "https://github.com/GoogleCloudPlatform/data-science-on-gcp/blob/master/updates/cloudml/flights_model.ipynb", "anchor_text": "flights_model.ipynb"}, {"url": "https://github.com/GoogleCloudPlatform/data-science-on-gcp/blob/master/updates/cloudml/launcher.ipynb", "anchor_text": "launcher.ipynb"}, {"url": "https://cloud.google.com/deep-learning-vm/", "anchor_text": "Deep Learning VM"}, {"url": "https://towardsdatascience.com/how-to-create-and-deploy-a-kubeflow-machine-learning-pipeline-part-1-efea7a4b650f", "anchor_text": "Part 1"}, {"url": "https://medium.com/tag/jupyter-notebook?source=post_page-----b1df77f4e5b3---------------jupyter_notebook-----------------", "anchor_text": "Jupyter Notebook"}, {"url": "https://medium.com/tag/kubeflow?source=post_page-----b1df77f4e5b3---------------kubeflow-----------------", "anchor_text": "Kubeflow"}, {"url": "https://medium.com/tag/kubernetes?source=post_page-----b1df77f4e5b3---------------kubernetes-----------------", "anchor_text": "Kubernetes"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----b1df77f4e5b3---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/tag/google-cloud-platform?source=post_page-----b1df77f4e5b3---------------google_cloud_platform-----------------", "anchor_text": "Google Cloud Platform"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fb1df77f4e5b3&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-deploy-jupyter-notebooks-as-components-of-a-kubeflow-ml-pipeline-part-2-b1df77f4e5b3&user=Lak+Lakshmanan&userId=247b0630b5d6&source=-----b1df77f4e5b3---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fb1df77f4e5b3&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-deploy-jupyter-notebooks-as-components-of-a-kubeflow-ml-pipeline-part-2-b1df77f4e5b3&user=Lak+Lakshmanan&userId=247b0630b5d6&source=-----b1df77f4e5b3---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fb1df77f4e5b3&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-deploy-jupyter-notebooks-as-components-of-a-kubeflow-ml-pipeline-part-2-b1df77f4e5b3&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----b1df77f4e5b3--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fb1df77f4e5b3&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-deploy-jupyter-notebooks-as-components-of-a-kubeflow-ml-pipeline-part-2-b1df77f4e5b3&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----b1df77f4e5b3---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----b1df77f4e5b3--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----b1df77f4e5b3--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----b1df77f4e5b3--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----b1df77f4e5b3--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----b1df77f4e5b3--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----b1df77f4e5b3--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----b1df77f4e5b3--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----b1df77f4e5b3--------------------------------", "anchor_text": ""}, {"url": "https://lakshmanok.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://lakshmanok.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Lak Lakshmanan"}, {"url": "https://lakshmanok.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "9.3K Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F247b0630b5d6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-deploy-jupyter-notebooks-as-components-of-a-kubeflow-ml-pipeline-part-2-b1df77f4e5b3&user=Lak+Lakshmanan&userId=247b0630b5d6&source=post_page-247b0630b5d6--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F44e3f26acd1a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-deploy-jupyter-notebooks-as-components-of-a-kubeflow-ml-pipeline-part-2-b1df77f4e5b3&newsletterV3=247b0630b5d6&newsletterV3Id=44e3f26acd1a&user=Lak+Lakshmanan&userId=247b0630b5d6&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}