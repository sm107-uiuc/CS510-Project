{"url": "https://towardsdatascience.com/store-locations-d1025df22865", "time": 1683018112.320124, "path": "towardsdatascience.com/store-locations-d1025df22865/", "webpage": {"metadata": {"title": "Analysing store locations. Finding the optimal location for a new\u2026 | by Emilio Macias | Towards Data Science", "h1": "Analysing store locations", "description": "Opening a physical store is not without risks. One the main risks to evaluate before opening a new store is having enough customers to make the business profitable. Using data science, geospatial analysis and machine learning, this project aims to find the optimal location for a low-cost supermarket in the city of Madrid."}, "outgoing_paragraph_urls": [{"url": "https://goo.gl/maps/a96AaK3PqDz655Wd9", "anchor_text": "Madrid (Spain)", "paragraph_index": 2}, {"url": "https://en.wikipedia.org/wiki/List_of_neighborhoods_of_Madrid", "anchor_text": "List of neighbourhoods of Madrid", "paragraph_index": 6}, {"url": "https://developer.foursquare.com", "anchor_text": "Foursquare API", "paragraph_index": 7}, {"url": "https://geocoder.readthedocs.io", "anchor_text": "Geocoder", "paragraph_index": 8}, {"url": "http://www-2.munimadrid.es/TSE6/control/seleccionDatosBarrio", "anchor_text": "Madrid city countil website", "paragraph_index": 21}, {"url": "https://datos.madrid.es/portal/site/egob/menuitem.c05c1f754a33a9fbe4b2e4b284f1a5a0/?vgnextoid=d029ed1e80d38610VgnVCM2000001f4a900aRCRD&vgnextchannel=374512b9ace9f310VgnVCM100000171f5a0aRCRD&vgnextfmt=default", "anchor_text": "Madrid city council website", "paragraph_index": 22}, {"url": "https://github.com/ejmacias/Store_Locations/blob/main/store_locations.ipynb", "anchor_text": "here", "paragraph_index": 41}], "all_paragraphs": ["Opening a physical store is not without risks. One the most obvious risks to evaluate before opening a new store is receiving enough customers to make the business profitable. Therefore it is essential to pick the right location to make sure it is convenient for the customers and there is enough demand for a new store in the area.", "Identifying the target customers is also key taking into account the behaviour of the different groups of consumers and the stores they usually buy at.", "In this project, we tackle the problem of a low-cost supermarket chain trying to decide in which area of Madrid (Spain) they should open their new store in order to maximise the revenue. It is important to note that the city of Madrid consists of 21 districts and 131 neighbourhoods with great differences between them.", "The goal is to identify the optimal neighbourhood for opening a store taking different factors into consideration such as the types of neighbourhood (a residential area would be ideal), the amount of people living in those areas (the higher the population the higher the food demand), their average income (working class people are preferred) and the stores that are already available (avoiding areas with a big density of supermarkets).", "Using data science, geospatial analysis and machine learning techniques, this project aims to provide a solution for this problem and recommending the best neighbourhood for opening the low-cost supermarket.", "The following sections describe the data that is needed for answering this business question.", "The first data that we need is the list of neighbourhoods in Madrid. The Wikipedia page \u201cList of neighbourhoods of Madrid\u201d shows a table with the name of each neighbourhood for each of the 21 districts. In our project, we will work directly with the neighbourhoods and ignore the districts since this way we can perform a more granular analysis of the areas.", "Since the plan is to target residential areas, we need to analyse the type of food venues present in each neighbourhood. With the Foursquare API we can explore the different food venues, considering that a big density of bars and restaurants over very few supermarkets will most likely refer to a business or recreational area where people don\u2019t usually buy at supermarkets. In the other hand, a large proportion of supermarkets over the rest of food venues might indicate it is a residential area where people normally make their food shopping.", "Before we can make use of the Foursquare API we need to convert the neighbourhood names into a pair of latitude and longitude coordinates. We can acquire this with the Geocoder Python library.We can query the Foursquare API using the HTTP GET method on the explore endpoint indicating the geographical coordinates, venue categories and radius.", "Finally we will need data from the census of Madrid. We can obtained this data from Excel files that are accessible from the Madrid city council website. Particularly we are interested in the population and the average household income of each neighbourhood.", "The following sections describe the different stages for acquiring the needed data.", "We start by scrapping the Wikipedia HTML to obtain the list of neighbourhoods of Madrid, as follows:", "This above code produces the following dataframe with only one column of 131 neighbourhoods:", "We can obtain the latitude and longitude coordinates for the above neighbourhoods by using Geocoder:", "The above code creates geographical columns for our dataframe:", "Now that we have the geographical coordinates of all the neighbourhoods we can represent them on the city map of Madrid:", "As we can see in the map below, only the areas of the city have been considered, ignoring the surrounding towns.", "With the geographical coordinates we can send requests to the Foursquare API to obtain the list of venues in each neighbourhood. We are particularly interested in the category of the venues since this will help us discriminate the different types of areas:", "A new dataframe of venues is created with the geographical location, category and neighbourhood they belong to:", "In order to detect the type of each neighbourhood we need to find out the most popular venues in those areas. A first step consists in finding the frequency of each venue category, we can use a one hot encoding approach:", "The following dataframe holds the frequency of each venue type for each of the 131 neighbourhoods:", "The detailed population of Madrid can be obtained from Madrid city countil website, downloading an Excel file and loading into a dataframe. Note that we are only keeping only the necessary columns (neighbourhood and population).", "The household income information can be downloaded from Madrid city council website. Again an Excel file is loaded into a dataframe as below:", "Since initially we don\u2019t know how many different types of neighbourhood we can find in Madrid, we are using the elbow method to obtain the optimal number (k) of clusters:", "Although 3 seems the most optimal value as per diagram below, we are using 5 (the second best k) since this way we can break down more the number of neighbourhoods that we are going to analyse against the census data.", "With K-means algorithm we can group the 131 neighbourhoods into 5 clusters depending on the most popular venues in those areas:", "Below we can visualise what are the most common venues and the cluster (from 0 to 4) that has been assigned to each area.", "The map below represents the neighbourhoods on the city map again but this time a color code represents the cluster of each area.", "We can examine the most popular venues of each cluster in order to assign a name that best represents each of them.", "The following table summarises the type of neighbourhood that can be found in each cluster:", "Since we want to target residential areas only, we discard any neighbourhoods that are not included in cluster 2. Then we can send another request to Foursquare API to count the number of supermarkets that already exist in those residential areas.", "Before we can analyse the census data we need to join the three dataframes (residential neighbourhoods, household income and population) into one single dataframe. The next step is to calculate the ratio population \u2014 number of supermarkets (the more people per market the safer it is to open a new business).", "Finally we can draw a 2D scatterplot with the residential neighbourhoods considering the ratio people \u2014 markets and the household income. The highlighted quadrant covers neighbourhoods with a household income below average (remember we are targeting working class areas) and a ratio of people per market above average, making these neighbourhoods good candidates for the new store.", "In the above diagram, the highlighted area in green represents the most adequate areas to open a low-cost supermarket since their household income is below average and also their ratio of people per market is above average.", "In particular, we can clearly see that Villaverde Alto looks the optimal neighbourhood since the household income is clearly under average (around 26K \u20ac) and there are very few supermarkets for the amount of population in the area.", "However it would also be recommended to consider other similar areas such as Portazgo that is also located on the bottom-right corner of the plot.", "It is also interesting to mention that even though the low amount of existing supermarkets in Mirasierra does clearly not cover the demand of the neighbourhood, it would be a convenient place for a high-class market since the household income there is at the very top.", "The neighbourhoods of Madrid were analysed with the purpose of finding the ideal location for a new low-cost supermarket. We applied machine learning techniques such as k-means clustering to find different clusters so that we could focus in only one type of neighbourhood (residential). Further data such as population and market venues have been used to reduce the number of potential areas.", "This project could be improved by only taking certain venue categories into consideration when performing the clustering segmentation. We could for example identify the key types of venue that define a residential area such as schools, pharmacies, small markets and corner shops, and the types of venue that discard a residential area such as night clubs, theaters and so on. Another improvement could be achieved by only handling certain groups of ages and social classes that would normally shop in a supermarket.", "Although this project focuses particularly in a low-cost supermarket, it could easily be amended for any type of business and city, as long as the corresponding data are available to be included in the analysis.", "Notebook created by Emilio Macias for the \u2018Applied Data Science Capstone\u2019 course on Coursera.", "To Access the Jupyter Notebook click here.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Software engineer with a passion for data science and its social impact."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fd1025df22865&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fstore-locations-d1025df22865&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fstore-locations-d1025df22865&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fstore-locations-d1025df22865&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fstore-locations-d1025df22865&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----d1025df22865--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----d1025df22865--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://ejmacias.medium.com/?source=post_page-----d1025df22865--------------------------------", "anchor_text": ""}, {"url": "https://ejmacias.medium.com/?source=post_page-----d1025df22865--------------------------------", "anchor_text": "Emilio Macias"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F280013299314&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fstore-locations-d1025df22865&user=Emilio+Macias&userId=280013299314&source=post_page-280013299314----d1025df22865---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fd1025df22865&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fstore-locations-d1025df22865&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fd1025df22865&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fstore-locations-d1025df22865&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@_gemmajade?utm_source=medium&utm_medium=referral", "anchor_text": "gemma"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://goo.gl/maps/a96AaK3PqDz655Wd9", "anchor_text": "Madrid (Spain)"}, {"url": "https://unsplash.com/@waldemarbrandt67w?utm_source=medium&utm_medium=referral", "anchor_text": "Waldemar Brandt"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://en.wikipedia.org/wiki/List_of_neighborhoods_of_Madrid", "anchor_text": "List of neighbourhoods of Madrid"}, {"url": "https://en.wikipedia.org/wiki/List_of_neighborhoods_of_Madrid", "anchor_text": "Wikipedia"}, {"url": "https://developer.foursquare.com", "anchor_text": "Foursquare API"}, {"url": "https://geocoder.readthedocs.io", "anchor_text": "Geocoder"}, {"url": "https://developer.foursquare.com/docs/api-reference/venues/explore/", "anchor_text": "Foursquare"}, {"url": "http://www-2.munimadrid.es/TSE6/control/seleccionDatosBarrio", "anchor_text": "Madrid city council"}, {"url": "https://datos.madrid.es/portal/site/egob/menuitem.c05c1f754a33a9fbe4b2e4b284f1a5a0/?vgnextoid=d029ed1e80d38610VgnVCM2000001f4a900aRCRD&vgnextchannel=374512b9ace9f310VgnVCM100000171f5a0aRCRD&vgnextfmt=default", "anchor_text": "Madrid city council"}, {"url": "http://www-2.munimadrid.es/TSE6/control/seleccionDatosBarrio", "anchor_text": "Madrid city countil website"}, {"url": "https://datos.madrid.es/portal/site/egob/menuitem.c05c1f754a33a9fbe4b2e4b284f1a5a0/?vgnextoid=d029ed1e80d38610VgnVCM2000001f4a900aRCRD&vgnextchannel=374512b9ace9f310VgnVCM100000171f5a0aRCRD&vgnextfmt=default", "anchor_text": "Madrid city council website"}, {"url": "https://github.com/ejmacias/Store_Locations/blob/main/store_locations.ipynb", "anchor_text": "here"}, {"url": "https://medium.com/tag/gis?source=post_page-----d1025df22865---------------gis-----------------", "anchor_text": "GIS"}, {"url": "https://medium.com/tag/api?source=post_page-----d1025df22865---------------api-----------------", "anchor_text": "API"}, {"url": "https://medium.com/tag/scrapping?source=post_page-----d1025df22865---------------scrapping-----------------", "anchor_text": "Scrapping"}, {"url": "https://medium.com/tag/k-means-clustering?source=post_page-----d1025df22865---------------k_means_clustering-----------------", "anchor_text": "K Means Clustering"}, {"url": "https://medium.com/tag/scatter-plots?source=post_page-----d1025df22865---------------scatter_plots-----------------", "anchor_text": "Scatter Plots"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fd1025df22865&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fstore-locations-d1025df22865&user=Emilio+Macias&userId=280013299314&source=-----d1025df22865---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fd1025df22865&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fstore-locations-d1025df22865&user=Emilio+Macias&userId=280013299314&source=-----d1025df22865---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fd1025df22865&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fstore-locations-d1025df22865&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----d1025df22865--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fd1025df22865&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fstore-locations-d1025df22865&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----d1025df22865---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----d1025df22865--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----d1025df22865--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----d1025df22865--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----d1025df22865--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----d1025df22865--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----d1025df22865--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----d1025df22865--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----d1025df22865--------------------------------", "anchor_text": ""}, {"url": "https://ejmacias.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://ejmacias.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Emilio Macias"}, {"url": "https://ejmacias.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "27 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F280013299314&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fstore-locations-d1025df22865&user=Emilio+Macias&userId=280013299314&source=post_page-280013299314--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fea00f2cedb74&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fstore-locations-d1025df22865&newsletterV3=280013299314&newsletterV3Id=ea00f2cedb74&user=Emilio+Macias&userId=280013299314&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}