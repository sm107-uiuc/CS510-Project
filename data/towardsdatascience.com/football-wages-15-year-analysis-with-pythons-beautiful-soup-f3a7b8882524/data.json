{"url": "https://towardsdatascience.com/football-wages-15-year-analysis-with-pythons-beautiful-soup-f3a7b8882524", "time": 1682996637.759423, "path": "towardsdatascience.com/football-wages-15-year-analysis-with-pythons-beautiful-soup-f3a7b8882524/", "webpage": {"metadata": {"title": "Football Transfers- 15 year Analysis with Python\u2019s Beautiful Soup | by Stephen Fordham | Towards Data Science", "h1": "Football Transfers- 15 year Analysis with Python\u2019s Beautiful Soup", "description": "Web scraping enables the automatic gathering of a rich data set. If you can view some data in your web browser, you will be able to access it and retrieve it through a program. If you can access it\u2026"}, "outgoing_paragraph_urls": [{"url": "https://www.transfermarkt.com/premier-league/transfers/wettbewerb/GB1/plus/?saison_id=2018&s_w=&leihe=0&leihe=1&intern=0&intern=1", "anchor_text": "transfermarkt", "paragraph_index": 3}, {"url": "https://www.bbc.co.uk/sport/football/31357409", "anchor_text": "Sky and BT Sport have paid a record \u00a35.136bn for live Premier League TV rights for three seasons from 2016\u201317.", "paragraph_index": 24}, {"url": "https://github.com/StephenFordham", "anchor_text": "https://github.com/StephenFordham", "paragraph_index": 28}], "all_paragraphs": ["Web scraping enables the automatic gathering of a rich data set. If you can view some data in your web browser, you will be able to access it and retrieve it through a program. If you can access it through a program, the data can be stored, cleaned and used in any way.", "Web scarping provides some advantages over Application Programming Interfaces (APIs). Web scraping is free, is not rate-limited, exposes you to all the data you wish to obtain, and most importantly, the website you wish to extract data from may not have an API. This is when web scraping enters the picture.", "This tutorial will explore how to write a simple Web scraper which can gather data on average transfer income received per player over the last 15 years in the Premier League.", "To begin, it is necessary to navigate to transfermarkt. The next step is viewing the underlying HTML of this page, by right-clicking and selecting \u2018inspect\u2019 in Chrome.", "What is particularly helpful here is the fact that you can hover over the HTML tags in the Elements tab, and Chrome will depict a transparent box over the representation on the web page itself. This can quickly help us find the pieces of content we are searching for.", "Alternatively, you can also right click any element on the web page and click on \u2018Inspect element\u2019. This immediately highlights the corresponding HTML code in the Elements tab.", "Here, I want to extract: Income, Income per Club and Income per player. In order to do so, I find the wrapper by hovering over the \u2018div\u2019 tag with the class \u2018transferbilanz\u2019.", "To parse the income information from the web page, I use the Beautiful Soup library. Beautiful Soup is installed easily using pip.", "The URL of the Page where the information resides is placed in quotations in a variable called url. The requests.get() method is used to \u2018get\u2019 the URL page, and the result is saved in a response variable (remember to install and import the requests library into the script).", "To confirm a connection has been established I use the .status_code attribute and check that a HyperText Transfer Protocol (HTTP) status code of 200 was returned back by the server. This means \u2018success\u2019, the page has been retrieved.", "The response.text, which contains the raw HTML content for the current page is saved to the variable \u2018financial_data\u2019. Now, I create a soup BeautifulSoup object, with the raw HTML data financial_data, as the first argument passed, and the \u2018html.parser\u2019 as the second argument passed. This parser is built into Python and requires no installation, and is used to parse the HTML tags.", "Once I know that a successful connection is made to the web page, I can take advantage of the structure of the URL.", "In the URL shown below, the only portion that changes from each Football Season is the year. When I first checked the connection, the year was 2018 (highlighted in red and in bold format below). To retrieve the same information going back 15 seasons, I simply change the season number to 2004!", "I create a simple for loop to iterate through a list of years from 2004 until 2018 to retrieve the income figures from each year. (remember the last number 2019 is excluded from the list)", "Within this for loop, the three pieces of information I required are found within span tags with the class \u2018greentext\u2019 as shown below.", "To retrieve these figure, I find the first wrapper with all this information, using the soup.find method and save the result into a variable called grouped_data.", "I then use the find_all method on the grouped_data to find all the span tags with a class of \u2018greentext\u2019. As the find_all method returns a list-like object, I can index this list to retrieve the values I require, i.e [0] for the first element in the list points to \u2018Income\u2019 for the season (see the github gist below).", "I need to remove the space, euro symbol and the periods within the number in order to convert the value to a floating point number for numerical based analysis later on. I also multiply each value returned by 0.89 as that is the current (13/06/2019) exchange rate between Euros and Pound Sterling and I would like the results in the DataFrame to be in Pound Sterling.", "With each year (each iteration of my for loop), I append the data to appropriately labelled lists, i.e. income_per_player_list.", "Once all iterations are complete, I create a DataFrame using the pd.DataFrame method (it is required to import the pandas module into the script), and write it to a CSV file.", "I then read the DataFrame in;", "This enables us to begin drawing conclusions:", "(Bar-plots produced in using Python\u2019s Seaborn Library)", "We can see a steady climb in transfer income per player received each Season with the exception of 2018. Interestingly, this change mirrors the Premier League TV rights deal signed in 2016. More money is now in the game than ever before. This enables higher transfer fees to be paid for players and a corresponding rise in average income per player for each season for the Football clubs!", "Sky and BT Sport have paid a record \u00a35.136bn for live Premier League TV rights for three seasons from 2016\u201317.", "This example tutorial has demonstrated how to perform a multiple page Webscrape and transform the data into a Pandas DataFrame amenable for analysis.", "Essentially, we have thrown out our web browser and surfed the web to extract the information we require using the Python Program!", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Articles on Data Science and Programming https://github.com/StephenFordham"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Ff3a7b8882524&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffootball-wages-15-year-analysis-with-pythons-beautiful-soup-f3a7b8882524&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffootball-wages-15-year-analysis-with-pythons-beautiful-soup-f3a7b8882524&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffootball-wages-15-year-analysis-with-pythons-beautiful-soup-f3a7b8882524&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffootball-wages-15-year-analysis-with-pythons-beautiful-soup-f3a7b8882524&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----f3a7b8882524--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----f3a7b8882524--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@stephenfordham?source=post_page-----f3a7b8882524--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@stephenfordham?source=post_page-----f3a7b8882524--------------------------------", "anchor_text": "Stephen Fordham"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F5d3f46276e7e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffootball-wages-15-year-analysis-with-pythons-beautiful-soup-f3a7b8882524&user=Stephen+Fordham&userId=5d3f46276e7e&source=post_page-5d3f46276e7e----f3a7b8882524---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ff3a7b8882524&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffootball-wages-15-year-analysis-with-pythons-beautiful-soup-f3a7b8882524&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ff3a7b8882524&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffootball-wages-15-year-analysis-with-pythons-beautiful-soup-f3a7b8882524&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@nate_dumlao", "anchor_text": "Nathan Dumlao"}, {"url": "https://unsplash.com/photos/kME9jbKd--s", "anchor_text": "Unsplash"}, {"url": "https://www.transfermarkt.com/premier-league/transfers/wettbewerb/GB1/plus/?saison_id=2018&s_w=&leihe=0&leihe=1&intern=0&intern=1", "anchor_text": "transfermarkt"}, {"url": "https://www.bbc.co.uk/sport/football/31357409", "anchor_text": "Sky and BT Sport have paid a record \u00a35.136bn for live Premier League TV rights for three seasons from 2016\u201317."}, {"url": "https://medium.com/tag/programming?source=post_page-----f3a7b8882524---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/tag/data-science?source=post_page-----f3a7b8882524---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/python?source=post_page-----f3a7b8882524---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/sports?source=post_page-----f3a7b8882524---------------sports-----------------", "anchor_text": "Sports"}, {"url": "https://medium.com/tag/data-analysis?source=post_page-----f3a7b8882524---------------data_analysis-----------------", "anchor_text": "Data Analysis"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Ff3a7b8882524&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffootball-wages-15-year-analysis-with-pythons-beautiful-soup-f3a7b8882524&user=Stephen+Fordham&userId=5d3f46276e7e&source=-----f3a7b8882524---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Ff3a7b8882524&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffootball-wages-15-year-analysis-with-pythons-beautiful-soup-f3a7b8882524&user=Stephen+Fordham&userId=5d3f46276e7e&source=-----f3a7b8882524---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ff3a7b8882524&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffootball-wages-15-year-analysis-with-pythons-beautiful-soup-f3a7b8882524&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----f3a7b8882524--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Ff3a7b8882524&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffootball-wages-15-year-analysis-with-pythons-beautiful-soup-f3a7b8882524&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----f3a7b8882524---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----f3a7b8882524--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----f3a7b8882524--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----f3a7b8882524--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----f3a7b8882524--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----f3a7b8882524--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----f3a7b8882524--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----f3a7b8882524--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----f3a7b8882524--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@stephenfordham?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@stephenfordham?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Stephen Fordham"}, {"url": "https://medium.com/@stephenfordham/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "977 Followers"}, {"url": "https://github.com/StephenFordham", "anchor_text": "https://github.com/StephenFordham"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F5d3f46276e7e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffootball-wages-15-year-analysis-with-pythons-beautiful-soup-f3a7b8882524&user=Stephen+Fordham&userId=5d3f46276e7e&source=post_page-5d3f46276e7e--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fbd4ed43cae00&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffootball-wages-15-year-analysis-with-pythons-beautiful-soup-f3a7b8882524&newsletterV3=5d3f46276e7e&newsletterV3Id=bd4ed43cae00&user=Stephen+Fordham&userId=5d3f46276e7e&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}