{"url": "https://towardsdatascience.com/what-to-do-when-your-data-is-too-big-for-your-memory-65c84c600585", "time": 1683013802.104439, "path": "towardsdatascience.com/what-to-do-when-your-data-is-too-big-for-your-memory-65c84c600585/", "webpage": {"metadata": {"title": "What to Do When Your Data Is Too Big for Your Memory? | by Sara A. Metwalli | Towards Data Science", "h1": "What to Do When Your Data Is Too Big for Your Memory?", "description": "When we are working on any data science project, one of the essential steps to take is to download some data from an API to the memory so we can process it. When doing that, there are some problems\u2026"}, "outgoing_paragraph_urls": [{"url": "https://raw.githubusercontent.com/nytimes/covid-19-data/master/us-counties.csv", "anchor_text": "this", "paragraph_index": 10}, {"url": "https://pandas.pydata.org/pandas-docs/stable/user_guide/sparse.html", "anchor_text": "sparse column representation", "paragraph_index": 18}, {"url": "http://bit.ly/2CvFAw6", "anchor_text": "bit.ly/2CvFAw6", "paragraph_index": 35}], "all_paragraphs": ["When we are working on any data science project, one of the essential steps to take is to download some data from an API to the memory so we can process it.", "When doing that, there are some problems that we can face; one of these problems is having too much data to process. If the size of our data is larger than the size of our available memory (RAM), we might face some problems in getting the project done.", "There are different options to solve the problem of big data, small problems. These solutions either cost time or money.", "Now, both those solutions are very valid, that is, if you have the resources to do so. If you have a big budget for your project or the time is not a constraint, then using one of those techniques is the simplest and most straightforward answer.", "What if you can\u2019t? What if you\u2019re working on a budget? What if your data is so big, loading it from the drive will increase your processing time 5X or 6X or even more? Is there a solution to handling big data that doesn\u2019t cost money or time?", "I am glad you asked \u2014 or I asked?.", "There are some techniques that you can use to handle big data that don\u2019t require spending any money or having to deal with long loading times. This article will cover 3 techniques that you can implement using Pandas to deal with large size datasets.", "The first technique we will cover is compressing the data. Compression here doesn\u2019t mean putting the data in a ZIP file; it instead means storing the data in the memory in a compressed format.", "In other words, compressing the data is finding a way to represent the data in a different way that will use less memory. There are two types of data compression: lossless compression and lossy one. Both these types only affect the loading of your data and won\u2019t cause any changes in the processing section of your code.", "Lossless compression doesn\u2019t cause any losses in the data. That is, the original data and the compressed ones are semantically identical. You can perform lossless compression on your data frames in 3 ways:", "For the remainder of this article, I will use this dataset that contains COVID-19 cases in the united states divided into different counties.", "The dataset I am using has the following structure:", "Loading the entire dataset takes 111 MB of memory!", "However, I really only need two columns of this dataset, the county and the case columns, so why would I load the entire dataset? Loading only the two columns I need requires 36 MB, which is a 32% decrease in memory usage.", "I can use Pandas to load only the columns I need like this", "Another way to decrease the memory usage of our data is to truncate numerical items in the data. For example, whenever we load a CSV into a column in a data frame, if the file contains numbers, it will store it as which takes 64 bytes to store one numerical value. However, we can truncate that and use other int formates to save some memory.", "if you know that the numbers in a particular column will never be higher than 32767, you can use an int16 or int32 and reduce the memory usage of that column by 75%.", "So, assume that the number of cases in each county can\u2019t exceed 32767 \u2014 which is not true in real-life \u2014 then, we can truncate that column to int16 instead of int64.", "If the data has a column or more with lots of empty values stored as NaN you save memory by using a sparse column representation so you won't waste memory storing all those empty values.", "Assume the county column has some NaN values and I just want to skip the rows containing NaN, I can do that easily using sparse series.", "What if performing lossless compression wasn\u2019t enough? What if I need to compress my data even more? In this case, you can use lossy compression, so you sacrifice 100% accuracy in your data for the sake of memory usage.", "You can perform lossy compression in two ways: modify numeric values and sampling.", "Another way to handle large datasets is by chunking them. That is cutting a large dataset into smaller chunks and then processing those chunks individually. After all the chunks have been processed, you can compare the results and calculate the final findings.", "Let\u2019s assume I want to find the country with the most number of cases. I can divide my dataset into chunks of 100 rows and process each of them individually and then get the maximum of the smaller results.", "Chunking is excellent if you need to load your dataset only once, but if you want to load multiple datasets, then indexing is the way to go.", "Think of indexing as the index of a book; you can know the necessary information about an aspect without needing to read the entire book.", "For example, let\u2019s say I want to get the cases for a specific state. In this case, chunking would make sense; I could write a simple function that accomplishes that.", "In chunking, you need to read all data, while in indexing, you just need a part of the data.", "So, my small function loads all the rows in each chunk but only cares about the ones for the state I want. That leads to significant overhead. I can avoid having this by using a database next to Pandas. The simplest one I can use is SQLite.", "To do that, I first need to load my data frame into an SQLite database.", "Then I need to re-write my get_state_info function and use the database in it.", "By doing that, I can decrease the memory usage by 50%.", "Handing big datasets can be such a hassle, especially if it doesn\u2019t fit in your memory. Some solutions for that can either be time or money consuming, which is you have the resource that could be the simplest, most straightforward approach.", "However, if you don\u2019t have the resources, you can use some techniques in Pandas to decrease the memory usage of loading your data \u2014 techniques such as compression, indexing, and chucking.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Ph.D. candidate working on Quantum Computing. Traveler, writing lover, science enthusiast, and CS instructor. Get in touch with me bit.ly/2CvFAw6"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F65c84c600585&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-to-do-when-your-data-is-too-big-for-your-memory-65c84c600585&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-to-do-when-your-data-is-too-big-for-your-memory-65c84c600585&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-to-do-when-your-data-is-too-big-for-your-memory-65c84c600585&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-to-do-when-your-data-is-too-big-for-your-memory-65c84c600585&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----65c84c600585--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----65c84c600585--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://saraametwalli.medium.com/?source=post_page-----65c84c600585--------------------------------", "anchor_text": ""}, {"url": "https://saraametwalli.medium.com/?source=post_page-----65c84c600585--------------------------------", "anchor_text": "Sara A. Metwalli"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F7938431b336a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-to-do-when-your-data-is-too-big-for-your-memory-65c84c600585&user=Sara+A.+Metwalli&userId=7938431b336a&source=post_page-7938431b336a----65c84c600585---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F65c84c600585&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-to-do-when-your-data-is-too-big-for-your-memory-65c84c600585&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F65c84c600585&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-to-do-when-your-data-is-too-big-for-your-memory-65c84c600585&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://www.pexels.com/@markusspiske?utm_content=attributionCopyText&utm_medium=referral&utm_source=pexels", "anchor_text": "Markus Spiske"}, {"url": "https://www.pexels.com/photo/dark-computer-green-software-225769/?utm_content=attributionCopyText&utm_medium=referral&utm_source=pexels", "anchor_text": "Pexels"}, {"url": "https://raw.githubusercontent.com/nytimes/covid-19-data/master/us-counties.csv", "anchor_text": "this"}, {"url": "https://raw.githubusercontent.com/nytimes/covid-19-data/master/us-counties.csv", "anchor_text": "https://raw.githubusercontent.com/nytimes/covid-19-data/master/us-counties.csv"}, {"url": "https://pandas.pydata.org/pandas-docs/stable/user_guide/sparse.html", "anchor_text": "sparse column representation"}, {"url": "https://medium.com/tag/dat?source=post_page-----65c84c600585---------------dat-----------------", "anchor_text": "Dat"}, {"url": "https://medium.com/tag/data-science?source=post_page-----65c84c600585---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/programming?source=post_page-----65c84c600585---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/tag/software-development?source=post_page-----65c84c600585---------------software_development-----------------", "anchor_text": "Software Development"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----65c84c600585---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F65c84c600585&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-to-do-when-your-data-is-too-big-for-your-memory-65c84c600585&user=Sara+A.+Metwalli&userId=7938431b336a&source=-----65c84c600585---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F65c84c600585&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-to-do-when-your-data-is-too-big-for-your-memory-65c84c600585&user=Sara+A.+Metwalli&userId=7938431b336a&source=-----65c84c600585---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F65c84c600585&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-to-do-when-your-data-is-too-big-for-your-memory-65c84c600585&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----65c84c600585--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F65c84c600585&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-to-do-when-your-data-is-too-big-for-your-memory-65c84c600585&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----65c84c600585---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----65c84c600585--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----65c84c600585--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----65c84c600585--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----65c84c600585--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----65c84c600585--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----65c84c600585--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----65c84c600585--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----65c84c600585--------------------------------", "anchor_text": ""}, {"url": "https://saraametwalli.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://saraametwalli.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Sara A. Metwalli"}, {"url": "https://saraametwalli.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "7.7K Followers"}, {"url": "http://bit.ly/2CvFAw6", "anchor_text": "bit.ly/2CvFAw6"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F7938431b336a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-to-do-when-your-data-is-too-big-for-your-memory-65c84c600585&user=Sara+A.+Metwalli&userId=7938431b336a&source=post_page-7938431b336a--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Ffe98bb54630a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-to-do-when-your-data-is-too-big-for-your-memory-65c84c600585&newsletterV3=7938431b336a&newsletterV3Id=fe98bb54630a&user=Sara+A.+Metwalli&userId=7938431b336a&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}