{"url": "https://towardsdatascience.com/python-monte-carlo-meets-sports-analytics-12cf97f1a1d", "time": 1683008330.115268, "path": "towardsdatascience.com/python-monte-carlo-meets-sports-analytics-12cf97f1a1d/", "webpage": {"metadata": {"title": "Python: Monte Carlo meets Sports Analytics | by Jake | Towards Data Science", "h1": "Python: Monte Carlo meets Sports Analytics", "description": "About a month or so ago, while juggling my final semester of grad school and a job hunt, I interviewed with a sports analytics company. My background is in business analytics, specifically using NLP\u2026"}, "outgoing_paragraph_urls": [{"url": "https://en.wikipedia.org/wiki/NBA_draft_lottery", "anchor_text": "wikipedia", "paragraph_index": 14}], "all_paragraphs": ["About a month or so ago, while juggling my final semester of grad school and a job hunt, I interviewed with a sports analytics company. My background is in business analytics, specifically using NLP, network analysis, and recommender systems in (hopefully) novel business applications. Bottom line, I was not the ideal candidate.", "Before advancing to any grueling data science interview questions, I was given a take home test; this didn\u2019t come as a shock. Many companies know that the process might or might not pan out. So there\u2019s some inherent \u201cwe just wasted our time\u201d risk. Take home tests are a great way for companies to eliminate this risk; it\u2019s pretty great for everyone but the job applicant. If your submission is deemed unsatisfactory, the company has already wasted more time on you than desired and will immediately move on to the next candidate. Giving you quality feedback is an unnecessary burden to the data science team. In their defense, some roles get hundreds if not thousands, of applicants. It\u2019s simply not feasible to coach everyone on what they could\u2019ve done better. Nonetheless, executing numerous take home tests doesn\u2019t necessary improve you as a data scientist. What improves you is learning from your mistakes \u2014 and this responsibility is yours (and yours alone.)", "I bombed the take home test, scratched my head for a few hours on what I could\u2019ve done better then tabled the topic entirely. That is until last night when an idea hit me! But I\u2019m getting ahead of myself, let\u2019s discuss the interview question.", "The NBA lottery works as follows: Teams are ranked by their regular season performance, where the best teams are slotted last and the worst teams are slotted first. By slotted, I mean that after a finite number of teams are selected for first, second,\u2026nth draft picks, the remaining teams will be slotted in (reverse) order of their regular season performance (best last, worst first \u2014 hopefully making the following season more interesting.) In the actual NBA draft, four teams are selected from a pool of 14 teams. In the proposed draft system, 5 teams must be picked from a pool of 16 teams.", "The way the teams are picked is by retrieving four balls from a lottery machine and determining which team the unique combination of balls came from. Then the balls are reinserted (the combination has been used, but these same balls participate in many more unique combinations net yet retrieved.) Each team is allotted a different number of combinations. The worst team has the most combinations, whereas the best has the least.", "I was at a complete loss on how to start this. My knowledge of statistics is less rooted in probability theory and more aligned with machine learning. So I did some googling and came across a Squared 2020 article, solving the discrete probability distribution in a deterministic way.", "Pay attention when I say deterministic. This proved to be an anchor point in my mind. I was determined to understand the methods, code, etc and replicate my own approach. If you follow along with the tutorial, you\u2019ll note that the round one pick is just that, the probability of selection (number of combinations divided by total combinations.) The second round conditions on any other team getting selected first. And this process repeats for the first four draft picks. However, once we reach round five, we\u2019re not selecting teams anymore, rather we simply append the remaining teams in their current order to the selected teams. (I never made it past the fourth draft pick!)", "Solving this deterministically is a nightmare and a real testament to one\u2019s mastery of probability theory. It\u2019s the reason I didn\u2019t get selected for another round of interviews.", "About a month later, I\u2019m sitting on the couch, when I randomly wondered \u2014 maybe I should have sampled from the distribution using Monte Carlo methods? I took a break from my Netflix adventure and started coding. The result? It works and it\u2019s a lot more scalable than writing this deterministically when the lottery design changes.", "Python is great for generating random numbers. In fact, you can randomly choose a value from a pool given a probability distribution. Given the number of combinations allotted to each team, determining their probabilities was trivial.", "I defined two different functions, trial and simulate. Trial is a single trial run of a lottery where four candidates are selected based on their probabilities of selection and the remaining teams are appended to the list. In my design, when a given team was selected, I indexed their value and removed from the elements corresponding to this index in both the pool and dist variables (lists). However, once a probability is removed from the dist variable, it no longer sums to 1. I failed to account for this, but was happy to learn that python\u2019s random package will adjust this for you as necessary!", "Simulate, is a bit more tricky. Given a supplied number of rounds, the trial function will be executed x times and the results will be appended to a list. You\u2019ll end up with a nested list where the outer list contains x elements and each of the x elements is a trial run of length, 14. At this point, we iterate through each place of the rankings using list comprehensions. Instead of looking at a nested list of 1000 elements (each element containing 14 values), we create a nested list of 14 elements (each containing 1000 values.) This is the real secret sauce. The first such list would be contain every team that was sampled for the first draft pick. The second such list would contain every team that was sampled for the second draft pick. And so on.", "Using the Counter function (from collections), were can get a tally of \u201cwhich team was in which place how many times?\u201d From here, it\u2019s simply a matter of dividing each count by the sum (the total number of simulations) to get the probability distribution for each place. You\u2019ll notice that this matrix is oriented about columns whereas the official NBA lottery probability distribution is oriented about rows. We simply deliver our nested list to numpy and transpose. Boom. Done. Wish I thought of this last month!", "In the final code below, I\u2019ve commented out the regular season variables and below each line defined a proposed system variable. (As is, it finds the distribution under the proposed system.) With 5,000,000 iterations it converged on the exact values!", "The results (hint, compare with wikipedia)", "Thanks for reading! Please subscribe if you think my content is alright :)", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Amazon Scientist, author/blogger, and continual learner"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F12cf97f1a1d&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpython-monte-carlo-meets-sports-analytics-12cf97f1a1d&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpython-monte-carlo-meets-sports-analytics-12cf97f1a1d&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpython-monte-carlo-meets-sports-analytics-12cf97f1a1d&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpython-monte-carlo-meets-sports-analytics-12cf97f1a1d&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----12cf97f1a1d--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----12cf97f1a1d--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@jacob.d.moore1?source=post_page-----12cf97f1a1d--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@jacob.d.moore1?source=post_page-----12cf97f1a1d--------------------------------", "anchor_text": "Jake"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F58a07ece941f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpython-monte-carlo-meets-sports-analytics-12cf97f1a1d&user=Jake&userId=58a07ece941f&source=post_page-58a07ece941f----12cf97f1a1d---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F12cf97f1a1d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpython-monte-carlo-meets-sports-analytics-12cf97f1a1d&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F12cf97f1a1d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpython-monte-carlo-meets-sports-analytics-12cf97f1a1d&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://squared2020.com/2017/09/30/how-nba-draft-lottery-probabilities-are-constructed/", "anchor_text": "How NBA Draft Lottery Probabilities Are ConstructedOn September 28th, the NBA Board of Governors approved changes to the NBA draft lottery system. These changes were\u2026squared2020.com"}, {"url": "https://en.wikipedia.org/wiki/NBA_draft_lottery", "anchor_text": "wikipedia"}, {"url": "https://medium.com/tag/data-science?source=post_page-----12cf97f1a1d---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/statistics?source=post_page-----12cf97f1a1d---------------statistics-----------------", "anchor_text": "Statistics"}, {"url": "https://medium.com/tag/sports-analytics?source=post_page-----12cf97f1a1d---------------sports_analytics-----------------", "anchor_text": "Sports Analytics"}, {"url": "https://medium.com/tag/programming?source=post_page-----12cf97f1a1d---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/tag/python?source=post_page-----12cf97f1a1d---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F12cf97f1a1d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpython-monte-carlo-meets-sports-analytics-12cf97f1a1d&user=Jake&userId=58a07ece941f&source=-----12cf97f1a1d---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F12cf97f1a1d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpython-monte-carlo-meets-sports-analytics-12cf97f1a1d&user=Jake&userId=58a07ece941f&source=-----12cf97f1a1d---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F12cf97f1a1d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpython-monte-carlo-meets-sports-analytics-12cf97f1a1d&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----12cf97f1a1d--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F12cf97f1a1d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpython-monte-carlo-meets-sports-analytics-12cf97f1a1d&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----12cf97f1a1d---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----12cf97f1a1d--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----12cf97f1a1d--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----12cf97f1a1d--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----12cf97f1a1d--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----12cf97f1a1d--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----12cf97f1a1d--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----12cf97f1a1d--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----12cf97f1a1d--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@jacob.d.moore1?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@jacob.d.moore1?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Jake"}, {"url": "https://medium.com/@jacob.d.moore1/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "1.7K Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F58a07ece941f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpython-monte-carlo-meets-sports-analytics-12cf97f1a1d&user=Jake&userId=58a07ece941f&source=post_page-58a07ece941f--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F22fa69989e9a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpython-monte-carlo-meets-sports-analytics-12cf97f1a1d&newsletterV3=58a07ece941f&newsletterV3Id=22fa69989e9a&user=Jake&userId=58a07ece941f&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}