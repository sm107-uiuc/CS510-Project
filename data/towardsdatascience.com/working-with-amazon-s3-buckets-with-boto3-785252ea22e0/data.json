{"url": "https://towardsdatascience.com/working-with-amazon-s3-buckets-with-boto3-785252ea22e0", "time": 1683010815.95238, "path": "towardsdatascience.com/working-with-amazon-s3-buckets-with-boto3-785252ea22e0/", "webpage": {"metadata": {"title": "Working with Amazon S3 with Boto3. | Towards Data Science", "h1": "Working with Amazon S3 buckets with Boto3", "description": "The complete cheat sheet for working with Amazon Simple Storage Service (S3) buckets with Python and Boto3."}, "outgoing_paragraph_urls": [{"url": "https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_access-keys.html#Using_CreateAccessKey", "anchor_text": "here", "paragraph_index": 3}, {"url": "https://docs.aws.amazon.com/AmazonS3/latest/dev/acl-overview.html#canned-acl", "anchor_text": "here", "paragraph_index": 7}, {"url": "https://michaloleszak.medium.com/subscribe", "anchor_text": "subscribe for email updates", "paragraph_index": 9}, {"url": "https://michaloleszak.medium.com/membership", "anchor_text": "becoming a Medium member", "paragraph_index": 9}, {"url": "http://hiretheauthor.com/michal", "anchor_text": "here", "paragraph_index": 10}, {"url": "https://michaloleszak.github.io/blog/", "anchor_text": "my other articles", "paragraph_index": 11}, {"url": "http://michaloleszak.com", "anchor_text": "michaloleszak.com", "paragraph_index": 13}, {"url": "http://hiretheauthor.com/michal", "anchor_text": "hiretheauthor.com/michal", "paragraph_index": 13}], "all_paragraphs": ["Amazon Simple Storage Service, or S3, offers space to store, protect, and share data with finely-tuned access control. When working with Python, one can easily interact with S3 with the Boto3 package. In this post, I will put together a cheat sheet of Python commands that I use a lot when working with S3. I hope you will find it useful.", "Let\u2019s kick off with a few words about the S3 data structures. On your own computer, you store files in folders. On S3, the folders are called buckets. Inside buckets, you can store objects, such as .csv files. You can refer to buckets by their name, while to objects \u2014 by their key. To make the code chunks more tractable, we will use emojis. Here\u2019s the key to symbols:", "Both \ud83d\uddd1 and \ud83d\udd11 can either denote a name already existing on S3 or a name you want to give a newly created bucket or object. \ud83d\udcc4 denotes a file you have or want to have somewhere locally on your machine.", "To access any AWS service with Boto3, we have to connect to it with a client. Here, we create an S3 client. We specify the region in which our data lives. We also have to pass the access key and the password, which we can generate in the AWS console, as described here.", "To list the buckets existing on S3, delete one or create a new one, we simply use the list_buckets(), create_bucket() and delete_bucket() functions, respectively.", "Within a bucket, there reside objects. We can list them with list_objects(). The MaxKeys argument sets the maximum number of objects listed; it\u2019s like calling head() on the results before printing them. We can also list only objects whose keys (names) start with a specific prefix using the Prefix argument.We can use upload_file() to upload a file called \ud83d\udcc4 to S3 under the name \ud83d\udd11. Similarly, download_file() will save a file called \ud83d\udd11 on S3 locally under the name \ud83d\udcc4.To get some metadata about an object, such as creation or modification time, permission rights or size, we can call head_object().Deleting an object works the same way as deleting a bucket: we just need to pass the bucket name and object key to delete_object().", "Oftentimes, data are spread across several files. For instance, you can have sales data for different stores or regions in different CSV files with matching column names. For analytics or modeling, we might want to have all these data in a single pandas data frame. The following code chunk will do just that: download all data files in \ud83d\uddd1 whose name starts with \u201csome_prefix\u201d and put it into a single data frame.", "One way to manage access rights on S3 is with access control lists or ACLs. By default, all files are private, which is the best (and safest!) practice. You can specify a file to be \"public-read\", in which case, everyone can access it, or \"private\", making yourself the only authorized person, among others. Look here for the exhaustive list of access options. You can set a file\u2019s ACL both when it\u2019s already on S3 using put_object_acl() as well as upon upload via passing appropriate ExtraArgs to upload_file().", "You can also grant anyone short-time access to a private file by generating a temporary pre-signed URL using the generate_presigned_url() function. This will yield a string that can be inserted right into pandas\u2019 read_csv(), for instance, to download the data. You can specify how long this temporary access link will be valid via the ExpiresIn argument. Here, we create a link valid for 1 hour (3600 seconds).", "If you liked this post, why don\u2019t you subscribe for email updates on my new articles? And by becoming a Medium member, you can support my writing and get unlimited access to all stories by other authors and myself.", "Need consulting? You can ask me anything or book me for a 1:1 here.", "You can also try one of my other articles. Can\u2019t choose? Pick one of these:", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "ML Engineer & Data Science Instructor | Top Writer in AI & Statistics | michaloleszak.com | Book 1:1 @ hiretheauthor.com/michal"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F785252ea22e0&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fworking-with-amazon-s3-buckets-with-boto3-785252ea22e0&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fworking-with-amazon-s3-buckets-with-boto3-785252ea22e0&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fworking-with-amazon-s3-buckets-with-boto3-785252ea22e0&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fworking-with-amazon-s3-buckets-with-boto3-785252ea22e0&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----785252ea22e0--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----785252ea22e0--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://michaloleszak.medium.com/?source=post_page-----785252ea22e0--------------------------------", "anchor_text": ""}, {"url": "https://michaloleszak.medium.com/?source=post_page-----785252ea22e0--------------------------------", "anchor_text": "Micha\u0142 Oleszak"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fc58320fab2a8&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fworking-with-amazon-s3-buckets-with-boto3-785252ea22e0&user=Micha%C5%82+Oleszak&userId=c58320fab2a8&source=post_page-c58320fab2a8----785252ea22e0---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F785252ea22e0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fworking-with-amazon-s3-buckets-with-boto3-785252ea22e0&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F785252ea22e0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fworking-with-amazon-s3-buckets-with-boto3-785252ea22e0&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@kingmaphotos?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Jeff Kingma"}, {"url": "https://unsplash.com/s/photos/bucket?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Unsplash"}, {"url": "https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_access-keys.html#Using_CreateAccessKey", "anchor_text": "here"}, {"url": "https://docs.aws.amazon.com/AmazonS3/latest/dev/acl-overview.html#canned-acl", "anchor_text": "here"}, {"url": "https://michaloleszak.medium.com/subscribe", "anchor_text": "subscribe for email updates"}, {"url": "https://michaloleszak.medium.com/membership", "anchor_text": "becoming a Medium member"}, {"url": "http://hiretheauthor.com/michal", "anchor_text": "here"}, {"url": "https://michaloleszak.github.io/blog/", "anchor_text": "my other articles"}, {"url": "https://towardsdatascience.com/working-with-amazon-sns-with-boto3-7acb1347622d", "anchor_text": "Working with Amazon SNS with Boto3The complete cheat sheet.towardsdatascience.com"}, {"url": "https://towardsdatascience.com/boost-your-grasp-on-boosting-acf239694b1", "anchor_text": "Boost your grasp on boostingDemystifying the famous competition-winning algorithm.towardsdatascience.com"}, {"url": "https://towardsdatascience.com/a-comparison-of-shrinkage-and-selection-methods-for-linear-regression-ee4dd3a71f16", "anchor_text": "A Comparison of Shrinkage and Selection Methods for Linear RegressionA detailed look at 7 popular shrinkage & selection methods.towardsdatascience.com"}, {"url": "https://medium.com/tag/aws?source=post_page-----785252ea22e0---------------aws-----------------", "anchor_text": "AWS"}, {"url": "https://medium.com/tag/amazon-web-services?source=post_page-----785252ea22e0---------------amazon_web_services-----------------", "anchor_text": "Amazon Web Services"}, {"url": "https://medium.com/tag/python?source=post_page-----785252ea22e0---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/cloud-computing?source=post_page-----785252ea22e0---------------cloud_computing-----------------", "anchor_text": "Cloud Computing"}, {"url": "https://medium.com/tag/cheatsheet?source=post_page-----785252ea22e0---------------cheatsheet-----------------", "anchor_text": "Cheatsheet"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F785252ea22e0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fworking-with-amazon-s3-buckets-with-boto3-785252ea22e0&user=Micha%C5%82+Oleszak&userId=c58320fab2a8&source=-----785252ea22e0---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F785252ea22e0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fworking-with-amazon-s3-buckets-with-boto3-785252ea22e0&user=Micha%C5%82+Oleszak&userId=c58320fab2a8&source=-----785252ea22e0---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F785252ea22e0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fworking-with-amazon-s3-buckets-with-boto3-785252ea22e0&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----785252ea22e0--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F785252ea22e0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fworking-with-amazon-s3-buckets-with-boto3-785252ea22e0&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----785252ea22e0---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----785252ea22e0--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----785252ea22e0--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----785252ea22e0--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----785252ea22e0--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----785252ea22e0--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----785252ea22e0--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----785252ea22e0--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----785252ea22e0--------------------------------", "anchor_text": ""}, {"url": "https://michaloleszak.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://michaloleszak.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Micha\u0142 Oleszak"}, {"url": "https://michaloleszak.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "1.7K Followers"}, {"url": "http://michaloleszak.com", "anchor_text": "michaloleszak.com"}, {"url": "http://hiretheauthor.com/michal", "anchor_text": "hiretheauthor.com/michal"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fc58320fab2a8&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fworking-with-amazon-s3-buckets-with-boto3-785252ea22e0&user=Micha%C5%82+Oleszak&userId=c58320fab2a8&source=post_page-c58320fab2a8--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F38bf302f5b56&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fworking-with-amazon-s3-buckets-with-boto3-785252ea22e0&newsletterV3=c58320fab2a8&newsletterV3Id=38bf302f5b56&user=Micha%C5%82+Oleszak&userId=c58320fab2a8&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}