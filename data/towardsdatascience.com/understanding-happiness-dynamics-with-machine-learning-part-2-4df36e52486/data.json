{"url": "https://towardsdatascience.com/understanding-happiness-dynamics-with-machine-learning-part-2-4df36e52486", "time": 1683012780.31422, "path": "towardsdatascience.com/understanding-happiness-dynamics-with-machine-learning-part-2-4df36e52486/", "webpage": {"metadata": {"title": "Understanding Happiness Dynamics with Machine Learning (Part II) | by Lina Faik | Towards Data Science", "h1": "Understanding Happiness Dynamics with Machine Learning (Part II)", "description": "Some would argue that wealth is the most important condition as it determines one\u2019s living conditions. Nevertheless, some would rightly point out that rich people aren\u2019t systematically happy. On the\u2026"}, "outgoing_paragraph_urls": [{"url": "https://towardsdatascience.com/understanding-happiness-dynamics-with-data-part-1-ab58984a715a", "anchor_text": "article", "paragraph_index": 4}, {"url": "https://towardsdatascience.com/understanding-happiness-dynamics-with-data-part-1-ab58984a715a", "anchor_text": "here", "paragraph_index": 8}, {"url": "https://en.wikipedia.org/wiki/Principal_component_analysis", "anchor_text": "article", "paragraph_index": 14}, {"url": "http://www.biostat.jhsph.edu/courses/bio621/misc/Chocolate%20consumption%20cognitive%20function%20and%20nobel%20laurates%20(NEJM).pdf", "anchor_text": "paper", "paragraph_index": 21}, {"url": "https://medium.com/swlh/how-can-machine-learning-algorithms-include-better-causality-e869ca60e54d", "anchor_text": "article", "paragraph_index": 21}, {"url": "https://scikit-learn.org/stable/modules/ensemble.html#forest", "anchor_text": "here", "paragraph_index": 41}], "all_paragraphs": ["Happiness is something we all aspire to, yet its key factors are still unclear.", "Some would argue that wealth is the most important condition as it determines one\u2019s living conditions. Nevertheless, some would rightly point out that rich people aren\u2019t systematically happy. On the contrary, one\u2019s social relationships (family, friends, etc.) contribute just as much to his happiness. Finally, some would argue that the policies implemented by governments are what really determine one\u2019s happiness, as they determine indirectly our living conditions and social interactions.", "These are all general and intuitive ideas about happiness, that we can easily apprehend using our own experience. However, I believe that a data-driven approach would allow for a deeper understanding of happiness drivers. By applying the most advanced techniques of Machine Learning, it would be possible to define the most important factors and measure quantitatively their contribution to one\u2019s happiness.", "In this context, I analyzed data from The World Happiness Report which is a landmark survey of the state of global happiness. It contains, on the one hand, happiness scores based on the answers gathered from the Gallup World Poll (GWP) and on the other hand, indicators of economic production, social support, life expectancy, freedom, absence of corruption, and generosity.", "This article is the second article of a series, where I share the key findings of the in-depth study I conducted on the subject. In my previous article, I analyzed happiness from a purely descriptive point of view. I discussed thus the complex relationships between happiness and three essential elements: wealth, social relations, and public policy. This data exploratory analysis lifted the veil on the difference that exists between the regions of the world over time.", "However, it is purely descriptive. It tells us nothing about the most crucial questions: what really brings happiness, to what extent, and why? This article intends to answer these questions by focusing on the causal relationship between happiness and the other variables, using statistical tools and Machine Learning.", "In this perspective, I relied on two approaches: one \u2018traditional\u2019 approach commonly used in the field of economics and a new approach based on the state of the art Machine Learning interpretation tools.", "Without more ado, let\u2019s dive into the micro and macro-econometric of happiness!", "Here a quick recap of the variables of the World Happiness Report dataset. For more information about the data, you can refer to my previous article here.", "Happiness indicators mainly come from the Gallup World Poll (GWP), which continually surveys residents of different countries using randomly selected, nationally representative samples. These indicators are the following:", "Social indicators also come from GWP surveys. They include:", "The first question I had to address is: what variables to keep for the modeling of happiness? In order words, what variables really matter in explaining Happiness?", "For this purpose, I performed a Principal Component Analysis (PCA). This method extracts the most important information from data by constructing a smaller number of representative variables that collectively explain most of the variability in the original set.", "The new variables, called Principal components, are directions in feature space along which the original data is highly variable. Therefore, by analyzing their composition, it is possible to determine the variables to keep for the study.", "For more information about PCA, you can read this article.", "The graph below shows the percentage of variance explains by each principal component. The two first ones explain most of the variance.", "The two graphs below analyses the constitution of the principal components and their correlation to the original variables.", "The graphs strongly suggest that there are 6 key variables to keep in the modeling: GDP per capita, Social support, Healthy life expectancy at birth, Freedom to make life choices, Generosity, and Perception of corruption. Taken together, these six variables explain most of the variation in national annual average ladder scores among countries.", "Furthermore, it is possible to visualize how strongly each variable influences the two first principal components in a biplot. This graph also shows the correlation between variables through the angles between their representative vectors: the lower the angle between is the more the variables are positively correlated.", "Therefore, Life Ladder, GDP per capita, Healthy life expectancy at birth, and Social Support explains most of the first principal component and are strongly correlated to each other.", "Correlations are useful to get quick insights about data. But, things can get tricky when it comes to identifying whether the correlation between two or more variables represents a causal relationship.", "Let\u2019s take a famous example. In 2012, Messerli published a paper where he pointed out the high correlation between a country\u2019s level of chocolate consumption and its population\u2019s cognitive function. Does it mean that eating more chocolate would make you smatter? Unfortunately, probably not! For more information about causality, you can read this article or watch the video below.", "And yet, establishing causal relationships is crucial in decision making. For instance, countries with a high Healthy life expectancy at birth tend to be happier on average. Does it mean that ensuring a good healthcare system would increase people happiness? It depends as healthy people can still badly evaluate their life.", "Therefore, to answer these kinds of questions, it is necessary to use statistical tools, such as regression analysis. Regressions are often used by economists. They enable them not only to quantify the relationship between one variable and the other variables but also its relevance relationships through statistical tests.", "When performing a regression, it is important to control, on the one hand, for variables that are constant across countries but vary over time. For example, economic crises, such as the subprime crisis in 2008, had an impact on people's happiness globally.", "On the other hand, it is essential to control for time-invariant unobserved individual characteristics, such as the country weather. These controls enable us to really capture the causal relationships between the explanatory variables and happiness.", "To do so, I relied on the well-known technique of fixed effects. More specifically, I considered 3 settings depending on the fixed effects included in the regression.", "This approach is similar to the one carried out in The World Happiness Report, except the fact that I rescaled the variable through a min-max normalization. This explains the difference in the results.", "Unsurprisingly, all the variables are significant under the 3 scenarios. More precisely:", "Over the past decade, the field of Machine Learning has known an important success. It has been applied to many areas and has proven to be very efficient, often outperforming usual statistical methods.", "However, research first has focused on developing the most performant algorithms in terms of accuracy of prediction or classification. It is only in recent years that it has shifted towards the need for establishing causal interference. Today, it is a great source of enthusiasm within the community of data scientists.", "In this context, I decided to apply the state-of-the-art interpretation techniques used in Machine Learning to get a better understanding of happiness drivers.", "To do so, I proceeded in 4 steps:", "a. Modeling of the national average happiness: I tested different Machine Learning algorithms on the dataset and fine-tuned their hyperparameters. b. Comparison of the relative importance of variables: I computed the relative importance of each variable using the best model.c. Analysis of the marginal impact of the variables on happiness: Go further by analyzing the partial dependence of explanatory variables on happiness.d. Analysis of happiness dynamics by region: Refine the analysis by taking a closer look at the region level.", "The explanatory variables include the 6 key indicators (GDP per capita, Social support, Healthy life expectancy at birth, Freedom to make life choices, Generosity, and Perception of corruption) as well as year and regional fixed effect. These variables are rescaling via a max-min normalization as done previously.", "I used the following Python libraries: scikit-learn and skater.", "a. Modeling of the national average happiness", "I applied the most frequently used Machine Learning algorithms to predict Life Ladder based on the explanatory variables. To compare their performance in terms of prediction, I performed a 5-fold cross-validation and compared the mean Root Mean Square Error (RMSE).", "The results represented in the graph below suggest that tree-based methods exhibit better results. More especially, Extra Trees algorithm presents the lowest RMSE.", "b. Comparison of the relative importance of variables", "Extra-Trees is a well-known algorithm that trains multiple randomized decision trees and combines them by averaging their results. The graph briefly explains the underlying principle and the step of this algorithm.", "More information about forests of randomized trees is provided in sckit-learn documentation, here.", "Extra Trees model, as a tree-based model, provides an interpretation of its results through the importance of features. These are computed as the decrease in the impurity of each node where the feature is present, weighted by the probability of reaching this node.", "The graph below represents the feature importance of the variables as given by the model. Log GDP per capita, Social support and Healthy life expectancy at birth appears to be the most determinant factor of Life Ladder. This is not the case of the other models, namely Random Forest, AdaBoost and Gradient Boosting. These algorithms place Healthy life expectancy at birth before Log GDP per capita and Social support.", "c. Analysis of the marginal impact of the variables on happiness", "It is also possible to visualize the marginal impact of each of these 3 variables on the model predictions by plotting partial dependencies. The graphs below show a slight upward trend. This means that an increase of one variable among Log GDP per capita, Social support and Healthy life expectancy at birth, while holding other variables in the model constant, leads to an increase of happiness.", "The analysis can be taken one step further by visualizing the marginal impact of two variables on the model predictions. The 3D graph below is consistent with what we could have expected: the higher one\u2019s wealth and social support are, the happier he is!", "On the whole, the analysis conducted so far not only confirms the insights we have seen by manipulating the data but also allows us to quantify them. Money and health with the social support of our loved ones are the pillars of happiness. They are the factors that drive people to evaluate their lives positively.", "Nevertheless, these observations are made on a worldwide scale. We still need to explore happiness dynamics from a country perspective to make new discoveries.", "The analysis becomes even more interesting when considering the country level by geographical region. In particular, there is a significant gap between developed countries, emerging countries, and developing countries. These countries do not value things in the same way. Let\u2019s take a look!", "The results for North American countries are the most surprising and radically different from the rest: Log GDP per capita lags behind other factors. Its importance barely represents half of the importance of Freedom to make life choices. Healthy life expectancy at birth, Social support, and Perception of corruption come after with a relatively similar importance in the model prediction of happiness.", "The partial dependence graphs of Log GDP per capita, Social support and Healthy life expectancy at birth show a growing trend towards flattening. This suggests that after a certain point, an increase in their value does not lead to a significant increase in happiness.", "For Western European countries, Log GDP per capita and Perceptions of corruption play a similar role in determining people happiness. Again, Freedom to make life choices comes in the third position, just before Social support. On the contrary, Healthy life expectancy at birth lags behind other variables.", "As for North American countries, the partial dependence graph of Log GDP per capita shows a growing trend towards flattening which suggests that after a certain point, an increase of wealth does not lead to a significant increase of happiness.", "For emerging and developing countries, Log GDP per capita is, consistently and by far, the most important factor. The variable that comes next depends on the region, usually Social support or Healthy life expectancy at birth. In the case of South Asian countries, Social support is almost as important as Log GDP per capita.", "Even more surprisingly is the partial dependence on the Log GDP per capita which has a bell shape. This would suggest that, after a certain level of wealth, an increase in one\u2019s wealth would cause a degradation of his happiness!", "Social support is also the second most important variable of countries in Central and Eastern Europe, Sub-Saharan Africa, Commonwealth of Independent States, but not always with the same relative proportion, as shown in the graphs below.", "On the contrary, countries in the Latin America and Caribean, Middle East and North Africa East, East and Southeast Asia \u2018value\u2019 more Healthy life expectancy at birth than Social support, as suggested in the graph below.", "How to explain these differences between countries?", "Some might say it\u2019s all about countries' culture and values but actually it is a tricky question that needs a deeper study. Nevertheless, the analysis undertaken already gives us an idea of what people in a country value the most and what policies should be introduced to improve their living conditions.", "Finally, I would like to point out 3 main limitations of the approaches presented above:", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Data Scientist | AI Practitioner | Technical Writer | Speaker"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F4df36e52486&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Funderstanding-happiness-dynamics-with-machine-learning-part-2-4df36e52486&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Funderstanding-happiness-dynamics-with-machine-learning-part-2-4df36e52486&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Funderstanding-happiness-dynamics-with-machine-learning-part-2-4df36e52486&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Funderstanding-happiness-dynamics-with-machine-learning-part-2-4df36e52486&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----4df36e52486--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----4df36e52486--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://linafaik.medium.com/?source=post_page-----4df36e52486--------------------------------", "anchor_text": ""}, {"url": "https://linafaik.medium.com/?source=post_page-----4df36e52486--------------------------------", "anchor_text": "Lina Faik"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fb6c0e8e98c84&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Funderstanding-happiness-dynamics-with-machine-learning-part-2-4df36e52486&user=Lina+Faik&userId=b6c0e8e98c84&source=post_page-b6c0e8e98c84----4df36e52486---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F4df36e52486&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Funderstanding-happiness-dynamics-with-machine-learning-part-2-4df36e52486&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F4df36e52486&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Funderstanding-happiness-dynamics-with-machine-learning-part-2-4df36e52486&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://towardsdatascience.com/understanding-happiness-dynamics-with-data-part-1-ab58984a715a", "anchor_text": "article"}, {"url": "https://towardsdatascience.com/understanding-happiness-dynamics-with-data-part-1-ab58984a715a", "anchor_text": "here"}, {"url": "https://en.wikipedia.org/wiki/Principal_component_analysis", "anchor_text": "article"}, {"url": "http://www.biostat.jhsph.edu/courses/bio621/misc/Chocolate%20consumption%20cognitive%20function%20and%20nobel%20laurates%20(NEJM).pdf", "anchor_text": "paper"}, {"url": "https://medium.com/swlh/how-can-machine-learning-algorithms-include-better-causality-e869ca60e54d", "anchor_text": "article"}, {"url": "https://community.alteryx.com/t5/Alteryx-Designer-Knowledge-Base/Seeing-the-Forest-for-the-Trees-An-Introduction-to-Random-Forest/ta-p/158062", "anchor_text": "Source"}, {"url": "https://scikit-learn.org/stable/modules/ensemble.html#forest", "anchor_text": "here"}, {"url": "https://medium.com/tag/happiness?source=post_page-----4df36e52486---------------happiness-----------------", "anchor_text": "Happiness"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----4df36e52486---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/tag/data-science?source=post_page-----4df36e52486---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/society?source=post_page-----4df36e52486---------------society-----------------", "anchor_text": "Society"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F4df36e52486&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Funderstanding-happiness-dynamics-with-machine-learning-part-2-4df36e52486&user=Lina+Faik&userId=b6c0e8e98c84&source=-----4df36e52486---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F4df36e52486&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Funderstanding-happiness-dynamics-with-machine-learning-part-2-4df36e52486&user=Lina+Faik&userId=b6c0e8e98c84&source=-----4df36e52486---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F4df36e52486&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Funderstanding-happiness-dynamics-with-machine-learning-part-2-4df36e52486&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----4df36e52486--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F4df36e52486&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Funderstanding-happiness-dynamics-with-machine-learning-part-2-4df36e52486&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----4df36e52486---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----4df36e52486--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----4df36e52486--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----4df36e52486--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----4df36e52486--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----4df36e52486--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----4df36e52486--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----4df36e52486--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----4df36e52486--------------------------------", "anchor_text": ""}, {"url": "https://linafaik.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://linafaik.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Lina Faik"}, {"url": "https://linafaik.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "821 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fb6c0e8e98c84&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Funderstanding-happiness-dynamics-with-machine-learning-part-2-4df36e52486&user=Lina+Faik&userId=b6c0e8e98c84&source=post_page-b6c0e8e98c84--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F3f1d39620ab9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Funderstanding-happiness-dynamics-with-machine-learning-part-2-4df36e52486&newsletterV3=b6c0e8e98c84&newsletterV3Id=3f1d39620ab9&user=Lina+Faik&userId=b6c0e8e98c84&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}