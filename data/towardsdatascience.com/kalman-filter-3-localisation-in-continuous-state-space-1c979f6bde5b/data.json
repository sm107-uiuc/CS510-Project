{"url": "https://towardsdatascience.com/kalman-filter-3-localisation-in-continuous-state-space-1c979f6bde5b", "time": 1683001386.165835, "path": "towardsdatascience.com/kalman-filter-3-localisation-in-continuous-state-space-1c979f6bde5b/", "webpage": {"metadata": {"title": "Kalman Filter(3) \u2014 Localisation in Continuous State Space | by Jeremy Zhang | Towards Data Science", "h1": "Kalman Filter(3) \u2014 Localisation in Continuous State Space", "description": "In past sessions, we tried to do localisation in a grid world, where our robot has different probabilities locating in different cells. In a word, the state space is discrete. To generalise the\u2026"}, "outgoing_paragraph_urls": [{"url": "https://towardsdatascience.com/kalman-filter-2-grid-world-localisation-93674dc750c6", "anchor_text": "sessions", "paragraph_index": 0}, {"url": "https://towardsdatascience.com/kalman-filter-1-the-basics-68f89deb2613", "anchor_text": "here", "paragraph_index": 1}, {"url": "https://www.bzarg.com/p/how-a-kalman-filter-works-in-pictures/", "anchor_text": "here", "paragraph_index": 22}, {"url": "https://github.com/MJeremy2017/Machine-Learning-Models/blob/master/Localisation/kalman-filter.ipynb", "anchor_text": "here", "paragraph_index": 24}], "all_paragraphs": ["In past sessions, we tried to do localisation in a grid world, where our robot has different probabilities locating in different cells. In a word, the state space is discrete. To generalise the problem setting to continuous state space, we will get to the core of kalman filter.", "Before we get to any details of kalman filter, please bear in mind of what we have learnt here, that there is going to be always 2 steps of kalman filter:", "The following has a structure of:", "In a discrete world, each state has a separate probability which adds up to 1, and the key to extend it to continuous state space is to find a continuous distribution, while here in kalman filter, the distribution is gaussian distribution.", "This is saying that our estimation of the robot position always conforms to a gaussian distribution regardless it is in step measurement or prediction. The 2 parameters of gaussian each represent:", "And the task would be to find the final gaussian distribution with parameter \u03bc and \u03c3 after a series of measurements and predictions. Let\u2019s break it down into 2 parts.", "In measurement phase, we update our belief based on the robot\u2019s sensor. Suppose X is the location and Z is the measurement(what the robot observes), the problem we are solving is:", "Our prior belief is p(X) , however our sensor sees it differently with a distribution of p(Z|X) , and now we are trying to calculate our posterior distribution p(X|Z) , that is given what we see( Z ), what is our best estimation now?", "Remember that here all distributions are gaussian, in order to get the posterior distribution we only need to apply the Bayes Rule, which is to multiply these 2 distributions:", "Above is the parameters of updated distribution. Notice that \u03c3_new is smaller than both \u03c3 and \u03b3 ! This tells us that the uncertainty reduced after multiplication, which conforms to our knowledge that sensing is actually gaining information and reduce uncertainty. The implementation would be:", "Moving is addition which is straight forward. With initial distribution N(\u03bc, \u03c3), and move U with uncertainty \u03b3^2, the distribution after movement is N(\u03bc+U, \u03c3^2+\u03b3^2) , that is the mean is added with U and uncertainty is added with \u03b3^2 .", "Notice that by making a movement which is uncertain, the variance(uncertainty) increases which is in contrast with measurement that reduces variance(uncertainty).", "Now combining measurement and prediction we got:", "In the example, we set the initial position mu = 0 and uncertainty sig = 10000 , meaning we are super uncertain with the robot\u2019s initial position. After a few rounds of iteration, we got the result:", "We saw that by making the first measurement, the uncertainty instantly drops to 3.998 , which is smaller than both the initial variance and measurement variance. And finally we predict our robot landing in position 10.9999 with variance 4.0058 .", "The above example we have only one variable which is the position p . Now let\u2019s consider a second variable velocity v , then our task will be to get the final estimation of x = (p, v) and uncertainty matrix P = cov(x) .", "In the prediction phase, suppose we have the relation:", "That given a speed and time t , we can get our next position and the velocity we assume remains the same. Then we got its matrix form:", "Here F is called state transition matrix, P is covariance matrix and \u03bc is external motion vector(say there is acceleration or pedal throttle).", "Same goes with measurement, there is a measurement transition matrix H . In its simplest form, let\u2019s assume that H = (1, 0) and,", "This is saying that our measurement can only measure the position of the robot and we can not see the velocity. Now the problem turns into that we have two gaussian distributions, one is(the prior distribution):", "and the second is(the measurement distribution):", "Looks familiar with our previous examples, right? Now we need to combine these two distributions into posterior distribution. Here involves a series of deduction(one excellent explanation here), and I will put the result here:", "Now let\u2019s combine them together and get our final kalman filter function:", "For complete implementation, please checkout here.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Hmm\u2026I am a data scientist looking to catch up the tide\u2026"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F1c979f6bde5b&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fkalman-filter-3-localisation-in-continuous-state-space-1c979f6bde5b&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fkalman-filter-3-localisation-in-continuous-state-space-1c979f6bde5b&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fkalman-filter-3-localisation-in-continuous-state-space-1c979f6bde5b&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fkalman-filter-3-localisation-in-continuous-state-space-1c979f6bde5b&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----1c979f6bde5b--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----1c979f6bde5b--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://meatba11.medium.com/?source=post_page-----1c979f6bde5b--------------------------------", "anchor_text": ""}, {"url": "https://meatba11.medium.com/?source=post_page-----1c979f6bde5b--------------------------------", "anchor_text": "Jeremy Zhang"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Ff37783fc8c26&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fkalman-filter-3-localisation-in-continuous-state-space-1c979f6bde5b&user=Jeremy+Zhang&userId=f37783fc8c26&source=post_page-f37783fc8c26----1c979f6bde5b---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F1c979f6bde5b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fkalman-filter-3-localisation-in-continuous-state-space-1c979f6bde5b&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F1c979f6bde5b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fkalman-filter-3-localisation-in-continuous-state-space-1c979f6bde5b&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://towardsdatascience.com/kalman-filter-2-grid-world-localisation-93674dc750c6", "anchor_text": "sessions"}, {"url": "https://towardsdatascience.com/kalman-filter-1-the-basics-68f89deb2613", "anchor_text": "here"}, {"url": "https://www.bzarg.com/p/how-a-kalman-filter-works-in-pictures/", "anchor_text": "reference"}, {"url": "https://www.bzarg.com/p/how-a-kalman-filter-works-in-pictures/", "anchor_text": "here"}, {"url": "https://github.com/MJeremy2017/Machine-Learning-Models/blob/master/Localisation/kalman-filter.ipynb", "anchor_text": "here"}, {"url": "https://classroom.udacity.com/courses/cs373", "anchor_text": "https://classroom.udacity.com/courses/cs373"}, {"url": "https://www.bzarg.com/p/how-a-kalman-filter-works-in-pictures/", "anchor_text": "https://www.bzarg.com/p/how-a-kalman-filter-works-in-pictures/"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----1c979f6bde5b---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F1c979f6bde5b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fkalman-filter-3-localisation-in-continuous-state-space-1c979f6bde5b&user=Jeremy+Zhang&userId=f37783fc8c26&source=-----1c979f6bde5b---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F1c979f6bde5b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fkalman-filter-3-localisation-in-continuous-state-space-1c979f6bde5b&user=Jeremy+Zhang&userId=f37783fc8c26&source=-----1c979f6bde5b---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F1c979f6bde5b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fkalman-filter-3-localisation-in-continuous-state-space-1c979f6bde5b&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----1c979f6bde5b--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F1c979f6bde5b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fkalman-filter-3-localisation-in-continuous-state-space-1c979f6bde5b&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----1c979f6bde5b---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----1c979f6bde5b--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----1c979f6bde5b--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----1c979f6bde5b--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----1c979f6bde5b--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----1c979f6bde5b--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----1c979f6bde5b--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----1c979f6bde5b--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----1c979f6bde5b--------------------------------", "anchor_text": ""}, {"url": "https://meatba11.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://meatba11.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Jeremy Zhang"}, {"url": "https://meatba11.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "1.1K Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Ff37783fc8c26&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fkalman-filter-3-localisation-in-continuous-state-space-1c979f6bde5b&user=Jeremy+Zhang&userId=f37783fc8c26&source=post_page-f37783fc8c26--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fcdbd8b83c584&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fkalman-filter-3-localisation-in-continuous-state-space-1c979f6bde5b&newsletterV3=f37783fc8c26&newsletterV3Id=cdbd8b83c584&user=Jeremy+Zhang&userId=f37783fc8c26&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}