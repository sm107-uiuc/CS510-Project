{"url": "https://towardsdatascience.com/solving-simpsons-paradox-e85433c68d03", "time": 1682995092.554752, "path": "towardsdatascience.com/solving-simpsons-paradox-e85433c68d03/", "webpage": {"metadata": {"title": "Solving Simpson\u2019s Paradox. Understand a key toy example in causal\u2026 | by Aleix Ruiz de Villa | Towards Data Science", "h1": "Solving Simpson\u2019s Paradox", "description": "This is the fourth post on a series about causal inference and data science. The previous one was \u201cObserving is not intervening\u201d. Simpson\u2019s paradox is a great example. At first, it challenges our\u2026"}, "outgoing_paragraph_urls": [{"url": "https://towardsdatascience.com/observing-is-not-intervening-9fbd22679f44", "anchor_text": "\u201cObserving is not intervening\u201d", "paragraph_index": 0}, {"url": "https://towardsdatascience.com/observing-is-not-intervening-9fbd22679f44", "anchor_text": "\u201cObserving is not intervening\u201d", "paragraph_index": 11}], "all_paragraphs": ["This is the fourth post on a series about causal inference and data science. The previous one was \u201cObserving is not intervening\u201d.", "Simpson\u2019s paradox is a great example. At first, it challenges our intuition, but then, if we are able to dissect it properly, gives a lot of ideas about how to handle analysis of observational data (data that hadn\u2019t been obtained through a well-designed experiment). It appears in many data analysis. We will walk through it using the well-known case of kidney stones. The techniques explained here can be found in detail in Pearl\u2019s et al \u201cCausal Inference in Statistics: A Primer\u201d.", "In a hospital, a doctor was dealing with kidney stones. She had two treatments, say A and B. She distributed both among her patients in half (350 for A and 350 for B) and measured each treatment\u2019s success. The results can be found in the following table:", "Clearly, treatment B was the best. The job was done and she could go home. But\u2026wait! She knew she had more information and wanted to have a look at it, just in case\u2026She also had the size of the stones and maybe this information was relevant. Then she came up with this table:", "Hmmm\u2026 For small stones A is better, for large stones A is better but aggregated B is better?! What the f@#*!!", "Then she recalled how patients had been selected. Once a new patient arrived, she had a guess on their stone. Treatment A was performing some kind of surgery while treatment B was basically giving them pills. She knew that giving pills to large stones was less effective, so the hard cases were assigned to treatment A. This process makes treatment comparison more difficult!", "Using a graph we can show the data process as follows", "The size affects both the treatment assignment and the chances of recovery. This is called confounding, because you cannot distinguish the effect of treatment from the size on the recovery.", "To understand how assignments can affect our conclusions, imagine these two made up extreme cases:", "As you can see, assigning all hard cases to A, makes A seem to be the least efficient while assigning all hard cases to B makes B seem to be the least efficient. Makes sense!", "The question we want to answer is the following: if the hospital had to choose only one treatment, which one would it be?", "As we saw in the previous post \u201cObserving is not intervening\u201d, this can be expressed in a graph that represents the distribution we want to know.", "This distribution would respond to the case we gave treatment A to everyone. Intervention on a variable is defined by removing its dependencies with respect to its antecessors (those variables it depends on). The main question in causal inference is whether we can make inferences about this new intervened distribution only having information from the data generating distribution.", "The trick is the following: if we focus on small stones, then all the effect of recovery can be explained from the treatment, so we can measure its effectivity", "We can do the same for large stones. But then how do we combine these two quantities? Well, in the way they had been assigned if size would have not affected the assignment of treatment. That means we use the global distribution of stone sizes instead of using the distribution from treatment assignment.", "As you can see, there is fairly the same number of large and small stones, while each treatment has an uneven distribution of sizes.", "Writing this process down we get the so-called adjustment formula.", "It can be seen (it is not straightforward, though) that this formula is precisely what we were looking for: calculating the probability of recovery in the interventional graph, but only using data obtained from the data generation graph.", "The same can be done for treatment B and then compare the results.", "Not so fast\u2026There are situations where adjustment will bring to wrong conclusions. In the example above, for measuring the effect of treatment, size becomes a \u201cnoisy thing\u201d and we want to remove its effect. Think now in a different situation. Imagine you have treatments for some illness. Moreover, you know (because you measure it) that affects patients blood pressure. At the same time, you know (because you have seen it many times in your career) that blood pressure also affects your chances of recovery. In this case, you would have data generated in this way", "Now treatment has a direct way and an indirect way to affect your recovery. But you are interested in both! You don\u2019t want to remove any effect from it. The idea is that in this case, you don\u2019t need to apply any adjustment because the direct measurements will give you the right quantity. Or equivalently, if you intervene on treatment (recall that means removing the dependencies on the causes of the treatments) you are getting the same graph, so you have to do nothing!", "This simple example gives us strong conclusions on how to analyze causal effects in observational data.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Phd in mathematics and data scientist. Freelance consultant."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fe85433c68d03&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsolving-simpsons-paradox-e85433c68d03&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsolving-simpsons-paradox-e85433c68d03&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsolving-simpsons-paradox-e85433c68d03&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsolving-simpsons-paradox-e85433c68d03&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----e85433c68d03--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----e85433c68d03--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://aleixrvr.medium.com/?source=post_page-----e85433c68d03--------------------------------", "anchor_text": ""}, {"url": "https://aleixrvr.medium.com/?source=post_page-----e85433c68d03--------------------------------", "anchor_text": "Aleix Ruiz de Villa"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F5e972bddb181&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsolving-simpsons-paradox-e85433c68d03&user=Aleix+Ruiz+de+Villa&userId=5e972bddb181&source=post_page-5e972bddb181----e85433c68d03---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fe85433c68d03&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsolving-simpsons-paradox-e85433c68d03&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fe85433c68d03&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsolving-simpsons-paradox-e85433c68d03&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://towardsdatascience.com/tagged/casual-causal-inference", "anchor_text": "Casual Causal Inference"}, {"url": "https://towardsdatascience.com/observing-is-not-intervening-9fbd22679f44", "anchor_text": "\u201cObserving is not intervening\u201d"}, {"url": "https://towardsdatascience.com/observing-is-not-intervening-9fbd22679f44", "anchor_text": "\u201cObserving is not intervening\u201d"}, {"url": "https://towardsdatascience.com/use-causal-graphs-4e3af630cf64", "anchor_text": "Use graphs!"}, {"url": "https://medium.com/tag/data-science?source=post_page-----e85433c68d03---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/causal-inference?source=post_page-----e85433c68d03---------------causal_inference-----------------", "anchor_text": "Causal Inference"}, {"url": "https://medium.com/tag/causality?source=post_page-----e85433c68d03---------------causality-----------------", "anchor_text": "Causality"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----e85433c68d03---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/tag/casual-causal-inference?source=post_page-----e85433c68d03---------------casual_causal_inference-----------------", "anchor_text": "Casual Causal Inference"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fe85433c68d03&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsolving-simpsons-paradox-e85433c68d03&user=Aleix+Ruiz+de+Villa&userId=5e972bddb181&source=-----e85433c68d03---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fe85433c68d03&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsolving-simpsons-paradox-e85433c68d03&user=Aleix+Ruiz+de+Villa&userId=5e972bddb181&source=-----e85433c68d03---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fe85433c68d03&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsolving-simpsons-paradox-e85433c68d03&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----e85433c68d03--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fe85433c68d03&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsolving-simpsons-paradox-e85433c68d03&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----e85433c68d03---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----e85433c68d03--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----e85433c68d03--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----e85433c68d03--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----e85433c68d03--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----e85433c68d03--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----e85433c68d03--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----e85433c68d03--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----e85433c68d03--------------------------------", "anchor_text": ""}, {"url": "https://aleixrvr.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://aleixrvr.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Aleix Ruiz de Villa"}, {"url": "https://aleixrvr.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "299 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F5e972bddb181&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsolving-simpsons-paradox-e85433c68d03&user=Aleix+Ruiz+de+Villa&userId=5e972bddb181&source=post_page-5e972bddb181--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fb55877dc5d18&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsolving-simpsons-paradox-e85433c68d03&newsletterV3=5e972bddb181&newsletterV3Id=b55877dc5d18&user=Aleix+Ruiz+de+Villa&userId=5e972bddb181&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}