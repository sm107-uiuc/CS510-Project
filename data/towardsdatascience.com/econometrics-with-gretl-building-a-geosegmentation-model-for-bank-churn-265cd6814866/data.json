{"url": "https://towardsdatascience.com/econometrics-with-gretl-building-a-geosegmentation-model-for-bank-churn-265cd6814866", "time": 1683000353.6478899, "path": "towardsdatascience.com/econometrics-with-gretl-building-a-geosegmentation-model-for-bank-churn-265cd6814866/", "webpage": {"metadata": {"title": "Econometrics with Gretl \u2014 Building a GeoSegmentation Model for Bank Churn | by Gurkamal Deol | Towards Data Science", "h1": "Econometrics with Gretl \u2014 Building a GeoSegmentation Model for Bank Churn", "description": "Gretl is an open source statistics package that was developed for econometrics but can be used for a wide variety of data. The program is written in C++ and has many community sourced packages that\u2026"}, "outgoing_paragraph_urls": [{"url": "http://gretl.sourceforge.net/#dl", "anchor_text": "here", "paragraph_index": 1}, {"url": "https://www.kaggle.com/barelydedicated/bank-customer-churn-modeling/kernels", "anchor_text": "Kaggle here", "paragraph_index": 1}, {"url": "http://www.linkedin.com/in/gurkamal-deol-508675174", "anchor_text": "www.linkedin.com/in/gurkamal-deol-508675174", "paragraph_index": 32}], "all_paragraphs": ["Gretl is an open source statistics package that was developed for econometrics but can be used for a wide variety of data. The program is written in C++ and has many community sourced packages that extend the core program.", "The program can be downloaded here and the data used in this tutorial can found on Kaggle here.", "The data can be loaded into Gretl from File and selecting the downloaded csv. The program will alert the user that the data is undated and will ask if it should attempt to construct a time series, for this data set we won\u2019t need to do that.", "Two windows are present, one containing variable string values named string_table.txt and the main Gretl window showing the entire list of variables present in the data.", "The variables Gender and Geography need to be encoded numerically and this can be done in Grelt by right clicking on the variable in the main screen and choosing Dummify and then Encode all values. To make things simpler, expand the Geography and Gender variables and edit the attributes for the values. For example, right clicking France under Geography and choosing \u201cedit attributes\u201d to change the name field from DGeography_1 to France.", "Exited is the dependent variable as its the outcome of interest, and this case study examines the factors that may be associated with a person leaving or staying at the bank. Variables such as RowNumber, CustomerID, and Surname do not affect whether a person stays or leaves the bank and therefore these columns are not used. The remaining variables will be the regressors.", "Gretl makes modeling the data very easy. It\u2019s done by going to the Model tab in the main window and navigating to limited dependent variable (since exited is a discrete variable) and then to logit (logistic regression) and lastly to binary.", "Gretl will then prompt the user to choose the dependent variables (Exited) and the regressors (the list above). In order to determine the significance of variables in the model, the show p-values box should be checked. Run the model.", "Running the first regression iteration results in the following coefficients and p-values:", "It can be seen that the highest p-value was for Spain, which indicates that it is not a significant variable, therefore we can exclude Spain from the model. When modeling the data again without Spain, the accuracy does not increase and the R-squared value increases very slightly:", "HasCrCard and EstimatedSalary are removed as these variables have the next highest p-values (above 0.05). After running the model again without these two variables there is a slight increase in accuracy and R-squared score. Ideally, there shouldn\u2019t be variables with a p-value above 0.05 but Tenure is around 0.087. Tenure could be removed but logically it makes sense that the duration of a customers relationship with the bank plays a role in their staying or leaving. Now the model shows no variables with a p-value above the threshold (except Tenure):", "Since balance has a large range and a one unit increase from 1000$ to 2000$ shows a doubling effect while a unit increase from 10,000$ to 11,000$ is only a 10% increase, the values need to be transformed so they scale. To do this the log will be taken and 1 will be added to each row in case there\u2019s a 0 balance.", "This is done in Gretl by defining a new variable and entering the equation log10(balance + 1). The following are the results with replacing balance with log_Balance:", "A derived variable may represent some fields such as balance and age more accurately. For example, younger people may have smaller balances and older people may have larger balances that grow with age. Alternatively, a young person may have a lucrative job and have a larger balance compared to an older person who may have lost their savings. This metric may better represent the financial position of customers.", "To create this derived variable, the log balance in a bank account can be divided by the age of the account holder. This variable is termed Wealth_Accumulation. The following results are obtained with Wealth_Accumulation as a part of the equation:", "Having Wealth_Accumulation, Log_Balance, and age in the model may show a decrease in accuracy and a high p value as there is likely multicollinearity. Gretl can check for collinearity and the variance inflation factor (VIF). The VIF for Log_balance and Wealth_Accumulation are much higher than the other variables:", "When taking out Log_Balance, the coefficient for Wealth_Accumulation deflates:", "The metrics for the model containing only Wealth_Accumulation are:", "Taking the log of Wealth_Accumulation may possibly be a better metric than the non-transformed variable. Including both log balance and log wealth accumulation shows the effects of collinearity with both VIF scores being ~700.", "This collinearity effect can be further seen by taking the log of Wealth_Accumulation and including it in the equation along side Log_Balance:", "The metrics for the model containing both the Log_Balance and Log_Wealth_Accumulation variables are:", "When assessing performance with only Log_Wealth_Accumulation the metrics are:", "When comparing the two models where one uses only Log_Wealth_Accumulation and the other only Log_Balance, the model with Log_Balance results in the higher R-squared score (0.151006) and an accuracy only one correct prediction short of the Log_Wealth_Accumulation accuracy (8127 vs 8128).", "In order to determine which variables are the most important in determining the banks churn rates, the odds ratios for each coefficient need to be calculated.", "The equation for simple logistic regression:", "Subbing odds into the logistic regression equation (also known as log odds):", "Take the exponent of each side:", "Increasing a variable by one unit:", "The exponents show that an increase of one unit leads to a multiplicative effect:", "These ratios can be calculated in Gretl using the function package \u201codds ratios\u201d:", "The results show that the most impactful variables are being German, female, and being an active member. The odds-ratio in this case is looking at which factors contribute to a customer leaving. Therefore, when looking at this bank\u2019s churn, a customer living in Germany or moving there increases their odds of leaving by a factor of 2.1119. Further, a customer being a female increases their odds of leaving by a factor of 1.6934. Being an active member on the other hand is indicative of a customer staying with the bank. Ultimately, if the bank would like to reduce churn and retain their customer base they would have to target their German customers \u2014 especially German females \u2014 and work on increasing these customer\u2019s activity with the bank.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "I\u2019m a ML engineer and biologist. I\u2019m Interested in AI driven drug discovery, computer vision, & federated learning. www.linkedin.com/in/gurkamal-deol-508675174"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F265cd6814866&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Feconometrics-with-gretl-building-a-geosegmentation-model-for-bank-churn-265cd6814866&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Feconometrics-with-gretl-building-a-geosegmentation-model-for-bank-churn-265cd6814866&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Feconometrics-with-gretl-building-a-geosegmentation-model-for-bank-churn-265cd6814866&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Feconometrics-with-gretl-building-a-geosegmentation-model-for-bank-churn-265cd6814866&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----265cd6814866--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----265cd6814866--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@gurkamaldeol?source=post_page-----265cd6814866--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@gurkamaldeol?source=post_page-----265cd6814866--------------------------------", "anchor_text": "Gurkamal Deol"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fa6e12e017fa1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Feconometrics-with-gretl-building-a-geosegmentation-model-for-bank-churn-265cd6814866&user=Gurkamal+Deol&userId=a6e12e017fa1&source=post_page-a6e12e017fa1----265cd6814866---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F265cd6814866&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Feconometrics-with-gretl-building-a-geosegmentation-model-for-bank-churn-265cd6814866&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F265cd6814866&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Feconometrics-with-gretl-building-a-geosegmentation-model-for-bank-churn-265cd6814866&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "http://gretl.sourceforge.net/#dl", "anchor_text": "here"}, {"url": "https://www.kaggle.com/barelydedicated/bank-customer-churn-modeling/kernels", "anchor_text": "Kaggle here"}, {"url": "https://medium.com/tag/data-science?source=post_page-----265cd6814866---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/economics?source=post_page-----265cd6814866---------------economics-----------------", "anchor_text": "Economics"}, {"url": "https://medium.com/tag/statistics?source=post_page-----265cd6814866---------------statistics-----------------", "anchor_text": "Statistics"}, {"url": "https://medium.com/tag/predictive-analytics?source=post_page-----265cd6814866---------------predictive_analytics-----------------", "anchor_text": "Predictive Analytics"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F265cd6814866&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Feconometrics-with-gretl-building-a-geosegmentation-model-for-bank-churn-265cd6814866&user=Gurkamal+Deol&userId=a6e12e017fa1&source=-----265cd6814866---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F265cd6814866&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Feconometrics-with-gretl-building-a-geosegmentation-model-for-bank-churn-265cd6814866&user=Gurkamal+Deol&userId=a6e12e017fa1&source=-----265cd6814866---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F265cd6814866&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Feconometrics-with-gretl-building-a-geosegmentation-model-for-bank-churn-265cd6814866&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----265cd6814866--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F265cd6814866&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Feconometrics-with-gretl-building-a-geosegmentation-model-for-bank-churn-265cd6814866&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----265cd6814866---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----265cd6814866--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----265cd6814866--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----265cd6814866--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----265cd6814866--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----265cd6814866--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----265cd6814866--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----265cd6814866--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----265cd6814866--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@gurkamaldeol?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@gurkamaldeol?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Gurkamal Deol"}, {"url": "https://medium.com/@gurkamaldeol/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "103 Followers"}, {"url": "http://www.linkedin.com/in/gurkamal-deol-508675174", "anchor_text": "www.linkedin.com/in/gurkamal-deol-508675174"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fa6e12e017fa1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Feconometrics-with-gretl-building-a-geosegmentation-model-for-bank-churn-265cd6814866&user=Gurkamal+Deol&userId=a6e12e017fa1&source=post_page-a6e12e017fa1--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F81f634a7c2c7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Feconometrics-with-gretl-building-a-geosegmentation-model-for-bank-churn-265cd6814866&newsletterV3=a6e12e017fa1&newsletterV3Id=81f634a7c2c7&user=Gurkamal+Deol&userId=a6e12e017fa1&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}