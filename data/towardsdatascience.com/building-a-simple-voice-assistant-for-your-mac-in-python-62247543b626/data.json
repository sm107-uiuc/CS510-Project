{"url": "https://towardsdatascience.com/building-a-simple-voice-assistant-for-your-mac-in-python-62247543b626", "time": 1682993590.30028, "path": "towardsdatascience.com/building-a-simple-voice-assistant-for-your-mac-in-python-62247543b626/", "webpage": {"metadata": {"title": "Building A Simple Voice Assistant for Your Mac in Python | by Kyle Gallatin | Towards Data Science", "h1": "Building A Simple Voice Assistant for Your Mac in Python", "description": "Voice assistants like Siri or Cortana can do cool and useful things for you: open applications, search for information, send messages and more. While it\u2019s cool to use the ones you\u2019ve been given\u2026it\u2019s\u2026"}, "outgoing_paragraph_urls": [{"url": "https://towardsdatascience.com/how-to-build-an-easy-quick-and-essentially-useless-chatbot-using-your-own-text-messages-f2cb8b84c11d", "anchor_text": "my last blog post on creating a chatbot using your own text messages", "paragraph_index": 1}, {"url": "https://pythonspot.com/personal-assistant-jarvis-in-python/", "anchor_text": "some other posts", "paragraph_index": 2}, {"url": "https://realpython.com/python-speech-recognition/", "anchor_text": "credit to this post", "paragraph_index": 4}, {"url": "https://www.elastic.co/", "anchor_text": "elasticsearch", "paragraph_index": 4}, {"url": "https://brew.sh/", "anchor_text": "here", "paragraph_index": 5}, {"url": "https://realpython.com/python-speech-recognition/", "anchor_text": "this aforementioned post", "paragraph_index": 7}, {"url": "https://towardsdatascience.com/how-to-build-an-easy-quick-and-essentially-useless-chatbot-using-your-own-text-messages-f2cb8b84c11d", "anchor_text": "last blog post on chatbots", "paragraph_index": 17}, {"url": "https://en.wikipedia.org/wiki/Tf%E2%80%93idf", "anchor_text": "wikipedia", "paragraph_index": 17}, {"url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/_introducing_the_query_language.html", "anchor_text": "Query DSL", "paragraph_index": 21}, {"url": "https://docs.seleniumhq.org/projects/webdriver/", "anchor_text": "webdriver", "paragraph_index": 29}], "all_paragraphs": ["Voice assistants like Siri or Cortana can do cool and useful things for you: open applications, search for information, send messages and more. While it\u2019s cool to use the ones you\u2019ve been given\u2026it\u2019s way more fun to make your own. In this post I\u2019ll show you how to start building a voice assistant framework that can do like 1% of things fully developed ones can do on a Mac \u2014 sorry but I won\u2019t be covering too much for any other OS.", "Like my last blog post on creating a chatbot using your own text messages, this isn\u2019t going to be a fully developed idea and won\u2019t get you too far in a production. Honestly, it took me longer to find/make the gifs for this post than it did to code it out.", "This blog post should, however, give you a great place to start if you\u2019ve ever wondered how to create your own voice assistant in python and love to screw around. There\u2019s some other posts out there with pretty much the same general concept \u2014 but didn\u2019t see anything much like this on TDS and figured what the hell \ud83e\udd37\ud83c\udffb I can write better than that and mine will be more fun.", "I\u2019ll show two different voice activated capabilities in this blog post:", "We\u2019ll first need 2 special packages. The first one is to get access to the microphone \u2014 credit to this post for a great intro to speech recognition in python. The second is the same as my past post, and uses elasticsearch to do query-query matching and return a response.", "On Mac, install portaudio and elasticsearch with homebrew. Homebrew is a great package manager for macOS and can be downloaded here. Then in a terminal run:", "I\u2019ll be using pip for python package management. The speech_recognition package we\u2019ll use to translate speech to text, and pyaudio is necessary for connecting to your computer\u2019s microphone. We\u2019ll also use the elasticsearch Python client to make things easier for us, I\u2019m working in Python 3.", "The speech_recognition package is great because as stated in this aforementioned post \u2014 \u201cThe SpeechRecognition library acts as a wrapper for several popular speech APIs and is thus extremely flexible. One of these \u2014 the Google Web Speech API \u2014 supports a default API key that is hard-coded into the SpeechRecognition library.\u201d", "Super convenient if you don\u2019t feel like setting up an account for any of the other providers. In less than 10 lines of code, this package should let us connect to our built in computer mic and transcribe our voice!", "This code should run until it hears something, then print it out what you said (or what it thinks you said). Super easy. For more on these classes and how that stuff works, refer to aforementioned post.", "There\u2019s multiple ways to do this in Python, but the easiest is just to use the one that comes with macOS. Using the subprocess package, we can easily make our computer speak:", "So now you can transcribe voice to text, make your computer speak and the world is your oyster, sick. Now we can decide how we wanna use the input. For an offhand easy idea my first instinct was to use it to open applications. Obviously it\u2019s not really that cool at all, but it works well as an example, and the general structure I\u2019ll use can be applied to a much wider range of functionality. So let\u2019s first get a list of all our applications.", "On Mac, all the apps that I\u2019d want to open are in the /Applications directory and for the most part all have a .app extension, so we can get their names using something like this:", "List the directory and remove the extension. Cool.", "Opening the applications is pretty easy too. Here a quick example using the os package and Spotify.", "The .replace is just for properly escaping spaces in longer app names, but if you have Spotify installed and in your applications it should open up.", "The obvious solution to tie the voice transcript together with functionality is some kind of exact match, if transcript == 'open spotify' then do this\u2026I probably don\u2019t have to explain how unscalable that is. Besides, it\u2019s way better to get experience with a cool framework like elastic. Also\u2026it wouldn\u2019t be a data science blog post without any actual data or algorithms.", "From my last blog post on chatbots \u2014 \u201cElasticsearch is a scalable search platform that uses an algorithm similar to TF-IDF or term frequency inverse document frequency. Essentially, it\u2019s a simple function often used within the search/similarity space that targets documents based on keywords\u2026 For a basic overview of it just check wikipedia.\u201d", "Basically we\u2019re gonna upload all our voice commands (something like \u201copen spotify\u201d) to elasticsearch and map them to the system commands (the actual programming command) we want to run. To do this, we can quickly create a list of dictionaries.", "Now we have all our voice commands and our system commands mapped to one another. Next, open a terminal and start elasticsearch. If you installed it via Homebrew it\u2019ll be in your path so just type elasticsearch and it\u2019ll start on the default port 9200.", "Next, we can index our data to make it searchable. We start up the python client and throw our data in a new index named voice_assistant.", "Now your data is all searchable in the index voice_assistant. The response variable we get back from the search function below is generated by the language elastic uses referred to as Query DSL. We\u2019re basically doing a simple TF-IDF search on the voice command with some fuzziness \u2014 to account for misspellings/bad transcriptions.", "Now try it out! search_es('open spotify') should return the command we will pass to os.system which is open /Applications/Spotify.app. Because we have the fuzziness parameter set to 2, search_es('open spofity') will also return the same thing even though there is a misspelling.", "Even though this is a small functionality, the key here is that this principle can be applied to a lot of different functionalities \u2014 Q&A, other commands, etc\u2026", "Now we can transcribe speech to text, and have all our commands properly indexed which we can access with our search_es function. All that\u2019s left it to tie it all together! Let\u2019s create a script that looks for user input, and when it gets it, it searches our index for that command and then tries to run it. The only thing missing is a phrase to trigger our chatbot, so let\u2019s define one more helper function so we have a keyword phrase to activate it, I chose mine to be just \u201chey dude\u201d.", "Using this trigger, we can now more selectively activate our actual search function. Putting it all together with the help of our previously defined functions, we can wrap our code in an infinite loop so it\u2019ll just keep running and waiting for us to activate it. I have my assistant ask me how it can help before running anything, obviously feel free to replace \u201cKyle\u201d with your name.", "One thing to note \u2014 because of all the except statements we\u2019ve got here, you won\u2019t be able to keyboard interrupt out of this once you\u2019ve got it going, you\u2019ll legit have to stop the whole process or if you\u2019re in jupyter restart the kernel \u2014 feel free to build in more proper error handling.", "Run it and start indiscriminately open applications because you can! It\u2019s cool. Just make sure you\u2019ve started elasticsearch, and defined all your helper functions.", "Opening apps is cool but tbh I\u2019m definitely not actually going to use that\u2026having my computer automatically search the internet for whatever I say is a much better use of this assistant. You could probably customize this part more using therequests and BeautifulSoup libraries, but there\u2019s really no point if you can just have selenium open a Chrome/Firefox/whatever window and search for you.", "Just use pip to install the necessary python package and make sure you have the webdriver you want to use installed. I\u2019ll use the one for chrome.", "Searching from google is super easy with selenium. I use Chrome as my preferred browser so I start selenium with webdriver.Chrome() below. If you use something else, feel free to replace it.", "That\u2019s it. Selenium opens google in a window, finds the search bar, types for us and then clicks the search button. You can test it real quick to make sure it works:", "Unlike before we don\u2019t have an elasticsearch index to look into for our information \u2014 our searches are more dynamic we have to do some shoddier text preprocessing. Assuming our query will contain the phrase \u201csearch google for\u201d, we can just split the string there and pass the rest of the string to our function.", "Cool, now you also have a voice assistant constantly listening for you to search the internet or open applications. There\u2019s tons more you can do: actually tie them together in the same assistant (didn\u2019t feel like it) incorporate news/weather APIs, maybe automate email stuff, put your own custom phrases in elasticsearch, build a more complex model for the activation, etc\u2026but this is a decent place to start just for kicks. Hope you enjoyed it!", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Software Engineer for ML Infra. Building scalable, operationalized machine learning services. I don\u2019t represent my employer."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F62247543b626&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuilding-a-simple-voice-assistant-for-your-mac-in-python-62247543b626&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuilding-a-simple-voice-assistant-for-your-mac-in-python-62247543b626&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuilding-a-simple-voice-assistant-for-your-mac-in-python-62247543b626&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuilding-a-simple-voice-assistant-for-your-mac-in-python-62247543b626&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----62247543b626--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----62247543b626--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@kylegallatin?source=post_page-----62247543b626--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@kylegallatin?source=post_page-----62247543b626--------------------------------", "anchor_text": "Kyle Gallatin"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F51ff4b76ebf4&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuilding-a-simple-voice-assistant-for-your-mac-in-python-62247543b626&user=Kyle+Gallatin&userId=51ff4b76ebf4&source=post_page-51ff4b76ebf4----62247543b626---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F62247543b626&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuilding-a-simple-voice-assistant-for-your-mac-in-python-62247543b626&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F62247543b626&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuilding-a-simple-voice-assistant-for-your-mac-in-python-62247543b626&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://www.google.com/url?sa=i&source=images&cd=&cad=rja&uact=8&ved=2ahUKEwjCxbv8vd7cAhWlT98KHT9CDd4QjRx6BAgBEAU&url=https%3A%2F%2Fwww.windowscentral.com%2Fai-bots-and-canvases-conversation-part-ii-microsofts-long-road-ai-and-bots&psig=AOvVaw04TjHeK41lJOaXvCPwCiLh&ust=1533853026653434", "anchor_text": "Source"}, {"url": "https://towardsdatascience.com/how-to-build-an-easy-quick-and-essentially-useless-chatbot-using-your-own-text-messages-f2cb8b84c11d", "anchor_text": "my last blog post on creating a chatbot using your own text messages"}, {"url": "https://pythonspot.com/personal-assistant-jarvis-in-python/", "anchor_text": "some other posts"}, {"url": "https://realpython.com/python-speech-recognition/", "anchor_text": "credit to this post"}, {"url": "https://www.elastic.co/", "anchor_text": "elasticsearch"}, {"url": "https://brew.sh/", "anchor_text": "here"}, {"url": "https://realpython.com/python-speech-recognition/", "anchor_text": "this aforementioned post"}, {"url": "https://www.google.com/url?sa=i&source=images&cd=&cad=rja&uact=8&ved=2ahUKEwiS_5eM4NncAhVmkuAKHZU5DQYQjRx6BAgBEAU&url=https%3A%2F%2Fgifer.com%2Fen%2F7VTb&psig=AOvVaw1vHDMJQ-SJ6JyAq5lX6htl&ust=1533690378156041", "anchor_text": "Source"}, {"url": "https://towardsdatascience.com/how-to-build-an-easy-quick-and-essentially-useless-chatbot-using-your-own-text-messages-f2cb8b84c11d", "anchor_text": "last blog post on chatbots"}, {"url": "https://en.wikipedia.org/wiki/Tf%E2%80%93idf", "anchor_text": "wikipedia"}, {"url": "https://www.elastic.co/products/elasticsearch", "anchor_text": "Source"}, {"url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/_introducing_the_query_language.html", "anchor_text": "Query DSL"}, {"url": "https://docs.seleniumhq.org/projects/webdriver/", "anchor_text": "webdriver"}, {"url": "http://www.google.com'", "anchor_text": "http://www.google.com'"}, {"url": "https://medium.com/tag/python?source=post_page-----62247543b626---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/nlp?source=post_page-----62247543b626---------------nlp-----------------", "anchor_text": "NLP"}, {"url": "https://medium.com/tag/chatbot?source=post_page-----62247543b626---------------chatbot-----------------", "anchor_text": "Chatbot"}, {"url": "https://medium.com/tag/elasticsearch?source=post_page-----62247543b626---------------elasticsearch-----------------", "anchor_text": "Elasticsearch"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F62247543b626&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuilding-a-simple-voice-assistant-for-your-mac-in-python-62247543b626&user=Kyle+Gallatin&userId=51ff4b76ebf4&source=-----62247543b626---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F62247543b626&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuilding-a-simple-voice-assistant-for-your-mac-in-python-62247543b626&user=Kyle+Gallatin&userId=51ff4b76ebf4&source=-----62247543b626---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F62247543b626&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuilding-a-simple-voice-assistant-for-your-mac-in-python-62247543b626&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----62247543b626--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F62247543b626&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuilding-a-simple-voice-assistant-for-your-mac-in-python-62247543b626&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----62247543b626---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----62247543b626--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----62247543b626--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----62247543b626--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----62247543b626--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----62247543b626--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----62247543b626--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----62247543b626--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----62247543b626--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@kylegallatin?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@kylegallatin?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Kyle Gallatin"}, {"url": "https://medium.com/@kylegallatin/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "2.4K Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F51ff4b76ebf4&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuilding-a-simple-voice-assistant-for-your-mac-in-python-62247543b626&user=Kyle+Gallatin&userId=51ff4b76ebf4&source=post_page-51ff4b76ebf4--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F1e64fc6ee18e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuilding-a-simple-voice-assistant-for-your-mac-in-python-62247543b626&newsletterV3=51ff4b76ebf4&newsletterV3Id=1e64fc6ee18e&user=Kyle+Gallatin&userId=51ff4b76ebf4&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}