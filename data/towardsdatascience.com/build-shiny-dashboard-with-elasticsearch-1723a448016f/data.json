{"url": "https://towardsdatascience.com/build-shiny-dashboard-with-elasticsearch-1723a448016f", "time": 1683015338.57932, "path": "towardsdatascience.com/build-shiny-dashboard-with-elasticsearch-1723a448016f/", "webpage": {"metadata": {"title": "Build Shiny Dashboard with Elasticsearch | by Andy Kwan | Towards Data Science", "h1": "Build Shiny Dashboard with Elasticsearch", "description": "In enterprise, presumably multiple data sources are required to be handled because of the possession of vast amount of data. When attempting to build a dashboard to showcase business ideas, typically\u2026"}, "outgoing_paragraph_urls": [{"url": "https://rstudio.github.io/shinydashboard/", "anchor_text": "Shiny Dashboard", "paragraph_index": 0}, {"url": "https://docs.aws.amazon.com/elasticsearch-service/latest/developerguide/es-request-signing.html", "anchor_text": "sample code", "paragraph_index": 2}, {"url": "https://github.com/rstudio/reticulate", "anchor_text": "here", "paragraph_index": 6}, {"url": "https://ugoproto.github.io/ugo_r_doc/pdf/reticulate.pdf", "anchor_text": "cheat sheet", "paragraph_index": 6}, {"url": "https://elasticsearch-py.readthedocs.io/en/master/api.html#elasticsearch.Elasticsearch.search", "anchor_text": "Elasticsearch.search", "paragraph_index": 16}, {"url": "https://ugoproto.github.io/ugo_r_doc/pdf/reticulate.pdf", "anchor_text": "reticulate", "paragraph_index": 16}, {"url": "https://www.rdocumentation.org/packages/utils/versions/3.6.2/topics/str", "anchor_text": "str", "paragraph_index": 17}, {"url": "http://shinyapps.dreamrs.fr/shinyWidgets/", "anchor_text": "here", "paragraph_index": 28}, {"url": "https://rstudio.github.io/shinydashboard/structure.html", "anchor_text": "here", "paragraph_index": 28}, {"url": "http://localhost:1234/", "anchor_text": "http://localhost:1234/", "paragraph_index": 32}, {"url": "https://github.com/wfkwan/Shiny-with-Elasticsearch", "anchor_text": "GitHub repository", "paragraph_index": 34}], "all_paragraphs": ["In enterprise, presumably multiple data sources are required to be handled because of the possession of vast amount of data. When attempting to build a dashboard to showcase business ideas, typically one needs to integrate data from NoSQL database, relational database and search engine. Thus dashboards like Kibana or Google Data Studio are not suitable choices as the flexibility of multiple data source is limited. One then need an alternative that is as straightforward. For this scenario, I recommend Shiny Dashboard for the task as it fulfills the requirements: flexible, straight forward and aesthetic. However, while building the dashboard, there is an immediate implementation barrier of connecting Amazon Elasticsearch Service and that motivates me to write this article.", "This article demonstrates the integration of Elasticsearch data into a Shiny dashboard. The programming language used is mainly R and the back-end connection is performed with Python. Meanwhile, for the data visualization part, graphs are drawn with 3 different graphing packages in R, namely: ggplot2, plotly and wordcloud2.", "Elasticsearch is a popular search engine in enterprise. Generally speaking, I would recommend it to be added into the data infrastructure when making summary statistics or locating specific batch of large amount of data in a timely manner is necessary. For setup, a convenient way is to make use of Amazon Elasticsearch Service since it one would only need to take care of high-level parameters like number of shards. Moreover, a comprehensive documentation and sample codes are provided and there is not much reason of not using it when a company has already built the infrastructure in AWS. Amazon provides sample code which is well-documented but the supporting languages do not contain R. Although there are various packages for Elasticsearch connection in R but the way to integrate it with Amazon Web Services version 4 authentication (AWS4Auth) is not straight forward. To build the dashboard, the crucial part is to overcoming this implementation barrier.", "First, we need to locate the Python path. I suggest two ways to search for it:", "2. Display in command line with the chosen Python environment activated", "Both ways can locate the system path for your Python executable.", "Once the python path is known, we can start the connection. We will be using the reticulate package in R which provides a comprehensive set of tools for interoperability between Python and R. The details can be found here and I recommend you to read this awesome cheat sheet!", "This simple way works! It is always a good idea to learn both R and Python to avoid being stuck.", "As we do not have a hosted Elasticsearch Instance at the moment. For demonstration purpose, let's create some sample data in the local machine.", "Steps for setting up Elasticsearch with sample data in the local machine:", "There are various way for the connection since AWS4Auth is not used. You may use a R only approach as well.", "6. Install the necessary packages for the Shiny dashboard including Shiny, shinyWidgets and shinydashboard.", "Upon connection, we are now ready to start writing functionalities in the dashboard. First let's start with the structure:", "To better organize the code, I have separate the files into the above 3 parts.", "As its name implies, this file stored the global variables and functions that is run once prior to app starts. Thus I have included the Elasticsearch connection and queries.", "It handles back-end duties once the dashboard app is started. Logic about for example how to render the plots and when to re-run queries should be included in the file.", "The response data from Elasticsearch using Elasticsearch.search is in dictionary format and it is convert to a named list according to the reticulate. For the ease of making plots, it is better to transform all the response data to R data frame format and there are 2 options for us:", "For the demonstration, we will be using R. Given the complexity of the named list response data, the way to write a suitable data transformation function more efficiently is to keep observing the structure of the object using str.", "After multiple rounds of trail and error in the R console, we then come up with two functions that converts data from single and double aggregation queries.", "Now we prepare data frames for charts plotting. First we create data frame and plot a pie chart for number of flights using Plotly R.", "The transformed data frame of of the below form.", "Plotly is a popular tool for chart visualization, it allows users to create interactivity visualizations with options for interactivity. Features like zoom in and out and hover text are supported for figures made with Plotly. However rendering a chart in Plotly will be quite slow when it comes to displaying a vast amount of data compared with ggplot.", "Then we create data frame and plot a stacked bar chart for flight delay time series data using ggplot. We are going to make a time slider in the dashboard for user to select the time range of the chart and therefore we have to filter by the selected time inputs.", "The transformed data frame of of the below form.", "ggplot allows users to quickly visualize trends, and add customization in layers. If a more interactive chart is desired, you may convert your figure to Plotly by the code ggplotly(p) .", "Finally we create data frame and word cloud for weather data using wordcloud2. Additionally, we are going to make a slider in the dashboard for user to adjust a desired wordcloud size.", "The transformed data frame of of the below form.", "Word clouds made with wordcloud2 automatically calculated sizes and positions for words and it supports display of raw values when mouse hover. Users can thus get an overview of the data as well as targeting specific words for data insights.", "It handles front-end appearance of the app. The code for the Shiny widgets and style should be placed here. Basically all the desired appearance of the dashboard should be located here. Essential elements for an interactive dashboard are the use of widgets. There are many resources for creating Shiny widgets, for example here. Once you have an idea in mind then you can simply search for the right widget and place that into the ui.R file. Apart from that, some Shiny dashboard elements can be found here. Simply make sure you have handled the data logic each time when you added a new widget.", "As an example of demonstration, for our word cloud box, we create a sliderInput to control its overall size.", "For further details of the UI, you are welcome to read my source code.", "Finally lets host the Shiny app in the R console:", "Visiting http://localhost:1234/ and you can view the demo dashboard.", "In this article, we have walked through the essential steps to create a Shiny Dashboard to bring data to life. In particular, we have", "Thanks for reading! Hope you find this article useful. The source code is posted in my GitHub repository. Feel free to drop me a comment to tell me what you think about the article. Do tell me if you have a more convenient way for the task :)", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Hong Kong | Data Scientist | Data Science and Machine Learning Enthusiast | Passionate in Solving Real World Problems with Data Science"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F1723a448016f&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuild-shiny-dashboard-with-elasticsearch-1723a448016f&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuild-shiny-dashboard-with-elasticsearch-1723a448016f&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuild-shiny-dashboard-with-elasticsearch-1723a448016f&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuild-shiny-dashboard-with-elasticsearch-1723a448016f&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----1723a448016f--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----1723a448016f--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@andykwan12?source=post_page-----1723a448016f--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@andykwan12?source=post_page-----1723a448016f--------------------------------", "anchor_text": "Andy Kwan"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F7f01169dba35&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuild-shiny-dashboard-with-elasticsearch-1723a448016f&user=Andy+Kwan&userId=7f01169dba35&source=post_page-7f01169dba35----1723a448016f---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F1723a448016f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuild-shiny-dashboard-with-elasticsearch-1723a448016f&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F1723a448016f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuild-shiny-dashboard-with-elasticsearch-1723a448016f&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@kalenemsley?utm_source=medium&utm_medium=referral", "anchor_text": "Kalen Emsley"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://rstudio.github.io/shinydashboard/", "anchor_text": "Shiny Dashboard"}, {"url": "https://aws.amazon.com/elasticsearch-service/", "anchor_text": "Amazon Elasticsearch Service"}, {"url": "https://rstudio.github.io/shinydashboard/", "anchor_text": "Shiny Dashboard"}, {"url": "https://docs.aws.amazon.com/elasticsearch-service/latest/developerguide/es-request-signing.html", "anchor_text": "sample code"}, {"url": "https://unsplash.com/@hudsoncrafted?utm_source=medium&utm_medium=referral", "anchor_text": "Debby Hudson"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://github.com/rstudio/reticulate", "anchor_text": "here"}, {"url": "https://ugoproto.github.io/ugo_r_doc/pdf/reticulate.pdf", "anchor_text": "cheat sheet"}, {"url": "https://unsplash.com/@mirkoblicke?utm_source=medium&utm_medium=referral", "anchor_text": "Mirko Blicke"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://www.elastic.co/downloads/elasticsearch", "anchor_text": "Elasticsearch"}, {"url": "https://www.elastic.co/downloads/kibana", "anchor_text": "Kibana."}, {"url": "http://localhost:5601/", "anchor_text": "http://localhost:5601/"}, {"url": "https://elasticsearch-py.readthedocs.io/en/master/api.html#elasticsearch.Elasticsearch.search", "anchor_text": "Elasticsearch.search"}, {"url": "https://ugoproto.github.io/ugo_r_doc/pdf/reticulate.pdf", "anchor_text": "reticulate"}, {"url": "https://www.rdocumentation.org/packages/utils/versions/3.6.2/topics/str", "anchor_text": "str"}, {"url": "https://unsplash.com/@lanceanderson?utm_source=medium&utm_medium=referral", "anchor_text": "Lance Anderson"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "http://shinyapps.dreamrs.fr/shinyWidgets/", "anchor_text": "here"}, {"url": "https://rstudio.github.io/shinydashboard/structure.html", "anchor_text": "here"}, {"url": "http://localhost:1234/", "anchor_text": "http://localhost:1234/"}, {"url": "https://github.com/wfkwan/Shiny-with-Elasticsearch", "anchor_text": "GitHub repository"}, {"url": "https://www.linkedin.com/in/andy-k-1b1a44103/", "anchor_text": "https://www.linkedin.com/in/andy-k-1b1a44103/"}, {"url": "https://medium.com/tag/elasticsearch?source=post_page-----1723a448016f---------------elasticsearch-----------------", "anchor_text": "Elasticsearch"}, {"url": "https://medium.com/tag/shiny?source=post_page-----1723a448016f---------------shiny-----------------", "anchor_text": "Shiny"}, {"url": "https://medium.com/tag/r?source=post_page-----1723a448016f---------------r-----------------", "anchor_text": "R"}, {"url": "https://medium.com/tag/data-visualization?source=post_page-----1723a448016f---------------data_visualization-----------------", "anchor_text": "Data Visualization"}, {"url": "https://medium.com/tag/data-science?source=post_page-----1723a448016f---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F1723a448016f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuild-shiny-dashboard-with-elasticsearch-1723a448016f&user=Andy+Kwan&userId=7f01169dba35&source=-----1723a448016f---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F1723a448016f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuild-shiny-dashboard-with-elasticsearch-1723a448016f&user=Andy+Kwan&userId=7f01169dba35&source=-----1723a448016f---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F1723a448016f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuild-shiny-dashboard-with-elasticsearch-1723a448016f&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----1723a448016f--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F1723a448016f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuild-shiny-dashboard-with-elasticsearch-1723a448016f&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----1723a448016f---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----1723a448016f--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----1723a448016f--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----1723a448016f--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----1723a448016f--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----1723a448016f--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----1723a448016f--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----1723a448016f--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----1723a448016f--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@andykwan12?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@andykwan12?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Andy Kwan"}, {"url": "https://medium.com/@andykwan12/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "11 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F7f01169dba35&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuild-shiny-dashboard-with-elasticsearch-1723a448016f&user=Andy+Kwan&userId=7f01169dba35&source=post_page-7f01169dba35--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F6a6f3cb0c94d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuild-shiny-dashboard-with-elasticsearch-1723a448016f&newsletterV3=7f01169dba35&newsletterV3Id=6a6f3cb0c94d&user=Andy+Kwan&userId=7f01169dba35&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}