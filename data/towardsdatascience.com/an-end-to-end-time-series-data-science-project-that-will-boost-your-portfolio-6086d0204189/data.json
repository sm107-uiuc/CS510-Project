{"url": "https://towardsdatascience.com/an-end-to-end-time-series-data-science-project-that-will-boost-your-portfolio-6086d0204189", "time": 1683014078.326737, "path": "towardsdatascience.com/an-end-to-end-time-series-data-science-project-that-will-boost-your-portfolio-6086d0204189/", "webpage": {"metadata": {"title": "An End-To-End Time Series Data Science Project That Will Boost your portfolio | by Roberto | Towards Data Science", "h1": "An End-To-End Time Series Data Science Project That Will Boost your portfolio", "description": "In this guide, I want to show you how to make time-series predictions of revenues based on real-life retail data, for these tasks I will be using a very common library: Prophet, developed by\u2026"}, "outgoing_paragraph_urls": [{"url": "https://aws.amazon.com/forecast/", "anchor_text": "AWS", "paragraph_index": 2}, {"url": "https://medium.com/human-in-a-machine-world/mae-and-rmse-which-metric-is-better-e60ac3bde13d", "anchor_text": "post", "paragraph_index": 19}, {"url": "https://facebook.github.io/prophet/docs/quick_start.html", "anchor_text": "documentation", "paragraph_index": 22}], "all_paragraphs": ["In this guide, I want to show you how to make time-series predictions of revenues based on real-life retail data, for these tasks I will be using a very common library: Prophet, developed by scientists at Facebook.", "\u201cA tool for producing high-quality forecasts for time series data that has multiple seasonality with linear or non-linear growth\u201d", "Moreover, Prophet is integrated into the AWS ecosystem, making it one of the most commonly used libraries for time series analysis.", "The data used in this tutorial comes from a retail company, it has strong seasonality components due to the nature of the business where the data comes from. The data frame has been anonymized and it contains two columns: the datetimeof the transaction and the amount of it.", "Transactions appear at different hours of the day and to reduce the number of noise the data has been re-sampled daily, summing up the total revenues.", "Additionally, the timestamp column has been converted to match the CET timezone, the main reason for doing this is to be able to have the data in an understandable format, making interpretation by us and eventually our clients easy. The following is the function used to achieve this:", "Transactions were collected between June 2018 and October 2019 and it contains 11284 records of sales.", "But let\u2019s dive a little bit more into Prophet: according to Facebook Prophet\u2019s documentation, the data to be fitted into Prophet must have a very rigid format: a column named dsfor the points in time and another named yfor the target.", "Using the following snippets it is easily possible to achieve this:", "At this step, the data might look ready to be used to fit a model but, after plotting the data a very important consideration has to be made:", "It seems that the data contains some values that somehow look odd, very extreme values that shift the mean: what is this?", "Those observations are called outliers, an outlier is a data point that differs significantly from other observations and may be due to some errors in the measurement.", "In data science, outliers must be treated correctly, as they can significantly mislead analysis and/or worsen the quality of a model.", "A good and very commonly used strategy to get rid of outliers is the interquartile (IQR) rule, the outliers are found by looking at observations that fall below Q1\u20131.5 IQR or above Q3+ 1.5 * IQR. This can be implemented in pandas with the following syntax:", "In order to better understand what happened box plots can become helpful:", "At this point it is possible to have a look at the \u201cclean\u201d dataset:", "While building machine (and deep) learning models we want to have some metrics to understand how models perform, hence the first model fitted is the baseline model; this model consists of the most basic fitter provided by Prophet and will be used as a baseline to measure improvements between other models.", "The model is fitted and used to predict a window of 60 days, and it is evaluated on performances at the 12th and 60th day, to get a better idea of short term and long term predictions.", "The metric chose to evaluate models for this tutorial is the MAE: the mean absolute error is a tool designed to measure the average magnitude of errors in predictions, it does not take into account the direction of the error and all of the differences between actual value and predictions have the same weight.", "The MAE is a very common metric for this kind of task, for a deeper explanation I would like to mention this post.", "By plotting the forecast it can be seen that this model captures the trend of the data in a very clumsy way.", "The first model starts with a MAE of about 240 on the 12th day, meaning an average error of \u00b1240 euro (the currency of our target value) on day 1 while comparing it with a 60 days forecast the error reaches a magnitude of \u00b1 450 euro.", "At this point it can be possible to go further and build a second model, eventually (and hopefully) able to outperform the first one; scrolling the prophet documentation it can be possible to see that Prophet has a method that lets the user specify holidays by country.", "Holidays are a very good predictor for retail data, for example, it is enough to think how near Christmas there is the traditional rush to find the perfect gift.", "The second model shows some improvements, however, the model fits the data with some weird spikes on the fit line:", "As can be seen from the plot this model starts with a MAE of about 230, while reaching 360\u2013370 on about the 60th day. Hence, in the short run, it tends to be a better model, while in the long run performs slightly better than the baseline.", "Going deeper into the Prophet documentation it can be seen that is possible to add custom seasonality to our model, by specifying the duration of the cycle and the Fourier order of it.", "While experimenting with different custom seasonality I noticed that the data has a growing trend every about two months, that is why I decided to add a seasonal component of two months:", "The model keeps fitting the data better, capturing more and more seasonal components, this leads to a small improvement in the short run, while in the long run, it seems this strategy does not work so well and the best model, in the long run, it\u2019s still the second one.", "But how can the long run error be minimized?", "Having seen that adding a seasonality term of two months helps capture some trends could suggest that a good strategy would be to add more seasonality terms. It works, but\u2026", "But\u2026 be careful! Adding a lot of seasonal components could lead to strong overfitting, this can be partially avoided by decreasing the Fourier terms, which, without going too much into depth, makes the seasonality \u201cless invasive\u201d.", "Fitting the last model with three custom seasonality, respectively every one, two, and three months leads to a significant decrease in error in the long run, along with a slightly better fit line:", "From this little guide, it can be deduced that a particular model performs better in a specific time range, while it could perform very badly in another one.", "Very often models are trained on a trial and error framework, in other words: several attempts are needed to achieve appreciable results. This does not mean just randomly try everything, but rather better understand the data.", "In this example the data came from fashion retail, in fashion retail product cycles are short, t-shirts are (almost) only sold in the summer, and jumpers only in winter, that is why different custom seasonality terms were added.", "Fitting time series models can be quite a tricky task, and the deploy phase could be even trickier, for instance, think about deploying a model to a client: every time the client wants to have some predictions the model needs be fitted again if the model is then hosted on some cloud providers, where you pay as you go expenses can grow at a fast pace.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "+500K Views on Medium | Management Consultant | Data Science \ud83e\uddea | Tech \ud83d\udce1 | Entrepreneurship \u26a1| Fullstack development \ud83d\udcbb | Starting a YouTube channel \ud83c\udfa5"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F6086d0204189&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fan-end-to-end-time-series-data-science-project-that-will-boost-your-portfolio-6086d0204189&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fan-end-to-end-time-series-data-science-project-that-will-boost-your-portfolio-6086d0204189&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fan-end-to-end-time-series-data-science-project-that-will-boost-your-portfolio-6086d0204189&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fan-end-to-end-time-series-data-science-project-that-will-boost-your-portfolio-6086d0204189&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----6086d0204189--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----6086d0204189--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://robsanna.medium.com/?source=post_page-----6086d0204189--------------------------------", "anchor_text": ""}, {"url": "https://robsanna.medium.com/?source=post_page-----6086d0204189--------------------------------", "anchor_text": "Roberto"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F21007a38b704&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fan-end-to-end-time-series-data-science-project-that-will-boost-your-portfolio-6086d0204189&user=Roberto&userId=21007a38b704&source=post_page-21007a38b704----6086d0204189---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F6086d0204189&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fan-end-to-end-time-series-data-science-project-that-will-boost-your-portfolio-6086d0204189&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F6086d0204189&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fan-end-to-end-time-series-data-science-project-that-will-boost-your-portfolio-6086d0204189&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://aws.amazon.com/forecast/", "anchor_text": "AWS"}, {"url": "https://facebook.github.io/prophet/docs/quick_start.html", "anchor_text": "Facebook\u2019s Github"}, {"url": "https://medium.com/human-in-a-machine-world/mae-and-rmse-which-metric-is-better-e60ac3bde13d", "anchor_text": "post"}, {"url": "https://facebook.github.io/prophet/docs/quick_start.html", "anchor_text": "documentation"}, {"url": "https://relentless-creator-2481.ck.page/68d9def351", "anchor_text": "5-bullet Data Science & Tech \ud83d\udce1Edit descriptionrelentless-creator-2481.ck.page"}, {"url": "https://medium.com/tag/programming?source=post_page-----6086d0204189---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/tag/data-science?source=post_page-----6086d0204189---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----6086d0204189---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/tag/artificial-intelligence?source=post_page-----6086d0204189---------------artificial_intelligence-----------------", "anchor_text": "Artificial Intelligence"}, {"url": "https://medium.com/tag/towards-data-science?source=post_page-----6086d0204189---------------towards_data_science-----------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F6086d0204189&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fan-end-to-end-time-series-data-science-project-that-will-boost-your-portfolio-6086d0204189&user=Roberto&userId=21007a38b704&source=-----6086d0204189---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F6086d0204189&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fan-end-to-end-time-series-data-science-project-that-will-boost-your-portfolio-6086d0204189&user=Roberto&userId=21007a38b704&source=-----6086d0204189---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F6086d0204189&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fan-end-to-end-time-series-data-science-project-that-will-boost-your-portfolio-6086d0204189&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----6086d0204189--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F6086d0204189&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fan-end-to-end-time-series-data-science-project-that-will-boost-your-portfolio-6086d0204189&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----6086d0204189---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----6086d0204189--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----6086d0204189--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----6086d0204189--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----6086d0204189--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----6086d0204189--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----6086d0204189--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----6086d0204189--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----6086d0204189--------------------------------", "anchor_text": ""}, {"url": "https://robsanna.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://robsanna.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Roberto"}, {"url": "https://robsanna.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "1.1K Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F21007a38b704&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fan-end-to-end-time-series-data-science-project-that-will-boost-your-portfolio-6086d0204189&user=Roberto&userId=21007a38b704&source=post_page-21007a38b704--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F8181ecd3a95f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fan-end-to-end-time-series-data-science-project-that-will-boost-your-portfolio-6086d0204189&newsletterV3=21007a38b704&newsletterV3Id=8181ecd3a95f&user=Roberto&userId=21007a38b704&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}