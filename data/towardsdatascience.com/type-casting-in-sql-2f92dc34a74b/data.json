{"url": "https://towardsdatascience.com/type-casting-in-sql-2f92dc34a74b", "time": 1683007713.3918452, "path": "towardsdatascience.com/type-casting-in-sql-2f92dc34a74b/", "webpage": {"metadata": {"title": "Type Casting in SQL | Towards Data Science", "h1": "Type Casting In SQL", "description": "Type Casting in SQL, String to Date SQL, Data Type Conversion SQL, SQL In Depth, Type Casting MySQL, Type Casting MariaDB, Kovid Rathee"}, "outgoing_paragraph_urls": [{"url": "https://kovidrathee.medium.com/membership", "anchor_text": "https://kovidrathee.medium.com/membership", "paragraph_index": 22}], "all_paragraphs": ["Ccasting from one type to another is very common in SQL queries. The use stems basically from bad database design, changing requirements, legacy applications and lazy database maintenance. Not intentionally, but these things make sure that the needs of a data consumer are never met directly. A consumer has to figure out workaround solutions to get their data. Type casting is one of the main, although less talked about, tools used for that.", "We\u2019re going to use the following sample dataset to go through different examples of casting in a query.", "For the scope of this article, assume that when we\u2019re talking about casting, it includes all casting-related functions in all flavours of SQL like to_date in Oracle, cast(something as int) in MySQL and so on. However, the examples are based on MariaDB (MySQL).", "All the queries in the example below would give the exact same output \u2014 which means that the database engine is implicitly understanding the where clause input we\u2019re giving it. It internally casts '1' to 1 and vice-versa in the where clause as per its requirements. All four queries in the example below will result in the same output.", "This works the same for string to floating point numbers and vice-versa. However, not all databases support implicit type casting to the same degree. For the scope of this post, I have used MariaDB.", "When a database is able to implicitly cast values, we can assume that it would have an impact on the performance. Implicit conversion is not cost-free as it, by definition, adds more work for the query engine. As a matter of fact, implicit conversion can end up costing more than explicit conversion because in explicit conversion, you are in control of the cost whereas in the case of implicit conversion, the database is in control and it decides what action to take \u2014 which, in turn, incurs cost.", "This is where a human specifies what to cast and what to cast it into. Because string \u2014 integer, string \u2014 floating point conversions are taken care of by the database engine itself, the next most important use case for casting comes when we talk about dates. Dates are the most disparately stored information in database systems. There are so many variants here, the two main of which are \u2014 time zones and date formats. Most of the times dates aren\u2019t stored as dates or timestamps, but they\u2019re stored as strings. That\u2019s where it all gets too interesting. :)", "Here\u2019s an example showing a number of options that the database engine provides for conversion of a string to a date.", "See carefully that the database is extremely reliable and understanding when it comes to storing dates in strings. It deciphers almost all of the date formats with the exception of one \u2014 2019 12 12 \u2014 where it is a clear case of the database not identifying the space. I guess no one writes dates like that either. But you can\u2019t be so sure anyway. If your dates are in this format, you can do a replace(_date,' ','') and convert it to a date.", "Notice that the database has return the result set, but with 26 warnings. Let\u2019s see what they are.", "Warnings are not errors. A warning here is a notification that the database suspects that something might have been wrong. Something similar happens when you try to insert ignore a duplicate into a table. If you insert, it won\u2019t throw a warning, it will throw an error. With warnings, the database kind of assumes that you\u2019ll look at those if required. With errors, it cannot proceed unless you fix them.", "Just like we converted dates from string, a whole lot of other conversions are possible, but with care.", "As mentioned earlier, any work added to the query engine will have some impact on the performance. For reasonably sized datasets, implicit and explicit conversions (casting) might not contribute a lot to slowing down the query by themselves. Although, it\u2019s completely possible that your query is slow because of other issues arising from type conversion.", "A type conversion (casting) can render one or more indexes of the query useless. You can go ahead and check if an index is being used or not in the query plan using explain or explain extended. If the index is not being used, we can use explicitly type cast the column in the where clause or the join clause and so on.", "Let\u2019s see how this impacts indexes.", "Running the following two queries tells us that when we pass a string to be compared to an integer field in the where clause, it does pick up the index idx_val_int, but in the next query, when we pass an integer to be compared to a string field in the where clause, it doesn\u2019t use the index. It does show the name of the index in possible keys.", "There\u2019s additional information on why the index was not picked.", "Even forcing the index idx_val_int_char doesn\u2019t work", "The only way out is to provide the value as a string, i.e., '1' rather than 1 or cast(1 as char), 1 being the input of an application, hence parameterizable.", "Every database has a number of options to convert one datatype to another which solve for most of the use cases we face on a day-to-day basis. Although, type conversion is a great feature, it does come with a performance cost, be the conversion implicit or explicit.", "Although not always practical, a great way to avoid all this is to design and maintain the database and the queries in such a way that minimal type conversion is required. If that\u2019s not possible, do make sure that your queries are using the right indexes so that performance doesn\u2019t take even a bigger hit. There\u2019s more about character sets and collation. We\u2019ll talk about that in another time.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "I write about tech, Indian classical music, literature, and the workplace among other things. 1x engineer on weekdays. https://kovidrathee.medium.com/membership"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F2f92dc34a74b&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftype-casting-in-sql-2f92dc34a74b&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftype-casting-in-sql-2f92dc34a74b&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftype-casting-in-sql-2f92dc34a74b&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftype-casting-in-sql-2f92dc34a74b&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://me.dm/@kovidrathee", "anchor_text": "Mastodon"}, {"url": "https://towardsdatascience.com/?source=post_page-----2f92dc34a74b--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----2f92dc34a74b--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://kovidrathee.medium.com/?source=post_page-----2f92dc34a74b--------------------------------", "anchor_text": ""}, {"url": "https://kovidrathee.medium.com/?source=post_page-----2f92dc34a74b--------------------------------", "anchor_text": "Kovid Rathee"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F13d513db037&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftype-casting-in-sql-2f92dc34a74b&user=Kovid+Rathee&userId=13d513db037&source=post_page-13d513db037----2f92dc34a74b---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F2f92dc34a74b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftype-casting-in-sql-2f92dc34a74b&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F2f92dc34a74b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftype-casting-in-sql-2f92dc34a74b&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@ultralinx?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Oliur"}, {"url": "https://unsplash.com/s/photos/conversion?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Unsplash"}, {"url": "https://linktr.ee/kovid", "anchor_text": "database & query performance"}, {"url": "https://medium.com/tag/data-engineering?source=post_page-----2f92dc34a74b---------------data_engineering-----------------", "anchor_text": "Data Engineering"}, {"url": "https://medium.com/tag/data?source=post_page-----2f92dc34a74b---------------data-----------------", "anchor_text": "Data"}, {"url": "https://medium.com/tag/software-development?source=post_page-----2f92dc34a74b---------------software_development-----------------", "anchor_text": "Software Development"}, {"url": "https://medium.com/tag/sql?source=post_page-----2f92dc34a74b---------------sql-----------------", "anchor_text": "Sql"}, {"url": "https://medium.com/tag/software-engineering?source=post_page-----2f92dc34a74b---------------software_engineering-----------------", "anchor_text": "Software Engineering"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F2f92dc34a74b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftype-casting-in-sql-2f92dc34a74b&user=Kovid+Rathee&userId=13d513db037&source=-----2f92dc34a74b---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F2f92dc34a74b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftype-casting-in-sql-2f92dc34a74b&user=Kovid+Rathee&userId=13d513db037&source=-----2f92dc34a74b---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F2f92dc34a74b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftype-casting-in-sql-2f92dc34a74b&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----2f92dc34a74b--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F2f92dc34a74b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftype-casting-in-sql-2f92dc34a74b&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----2f92dc34a74b---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----2f92dc34a74b--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----2f92dc34a74b--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----2f92dc34a74b--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----2f92dc34a74b--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----2f92dc34a74b--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----2f92dc34a74b--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----2f92dc34a74b--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----2f92dc34a74b--------------------------------", "anchor_text": ""}, {"url": "https://kovidrathee.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://kovidrathee.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Kovid Rathee"}, {"url": "https://kovidrathee.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "3.1K Followers"}, {"url": "https://kovidrathee.medium.com/membership", "anchor_text": "https://kovidrathee.medium.com/membership"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F13d513db037&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftype-casting-in-sql-2f92dc34a74b&user=Kovid+Rathee&userId=13d513db037&source=post_page-13d513db037--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F8154c41b0f77&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftype-casting-in-sql-2f92dc34a74b&newsletterV3=13d513db037&newsletterV3Id=8154c41b0f77&user=Kovid+Rathee&userId=13d513db037&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}