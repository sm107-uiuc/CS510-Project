{"url": "https://towardsdatascience.com/spatial-modelling-tidbits-honeycomb-or-fishnets-7f0b19273aab", "time": 1682996368.528074, "path": "towardsdatascience.com/spatial-modelling-tidbits-honeycomb-or-fishnets-7f0b19273aab/", "webpage": {"metadata": {"title": "Spatial Modelling Tidbits: Honeycomb or Fishnets? | by Aditi Sinha | Towards Data Science", "h1": "Spatial Modelling Tidbits: Honeycomb or Fishnets?", "description": "If you are a two-degree marketplace like Uber, you cater to millions of users requesting a ride through your driver partners accepting and fulfilling those requests. For a three-degree marketplace\u2026"}, "outgoing_paragraph_urls": [{"url": "https://www.mathsisfun.com/geometry/tessellation.html", "anchor_text": "tessellation", "paragraph_index": 7}, {"url": "https://en.wikipedia.org/wiki/Discrete_global_grid", "anchor_text": "global grid system", "paragraph_index": 8}, {"url": "https://medium.com/@localeai/how-analyzing-supply-demand-gaps-can-optimize-your-unit-economics-1da3ecd340c6", "anchor_text": "Examples", "paragraph_index": 9}, {"url": "https://www.factual.com/blog/how-geohashes-work/", "anchor_text": "Geohash", "paragraph_index": 12}, {"url": "http://locale.ai", "anchor_text": "Locale", "paragraph_index": 21}, {"url": "https://uber.github.io/h3/#/documentation/api-reference/neighbors", "anchor_text": "kRing", "paragraph_index": 26}, {"url": "https://medium.com/@localeai", "anchor_text": "blog", "paragraph_index": 41}, {"url": "http://locale.ai", "anchor_text": "Locale.ai", "paragraph_index": 41}], "all_paragraphs": ["If you are a two-degree marketplace like Uber, you cater to millions of users requesting a ride through your driver partners accepting and fulfilling those requests. For a three-degree marketplace like Swiggy, there is another static component added (like restaurants or stores), where delivery partners pick up the orders.", "Borrowing from the quote, \u201cEverything happens somewhere\u201d \u2014 all of these events and actions described take place at a specific location!", "Often, companies end up not leveraging the lat/long component in their data and running their analyses at the city level. But, cities are too large, geographically diverse and the parameters vary way too much!", "Area level polygons are much more practical but still broad. They don\u2019t have uniform shapes or sizes and are subject to changes very frequently. Even the zones or clusters drawn by the operations teams\u2019 local knowledge require updating and have arbitrary edges.", "Making sense of your spatial data and deriving precise insights requires these analyses to become more granular and uniform.", "Grid system brings that fine granularity to the table. It works brilliantly in bucketing all your lat-longs into \u201ccells\u201d. These cells can also be clustered to represent a particular neighborhood or area and can be aggregated at different levels.", "Hence, this system becomes critical to crunch large spatial data sets to match the supply & demand fragmented across the city.", "In Spatial Data Science, we use grids that are regular polygons repeating over a surface, edge to edge to cover any space without overlaps and gaps \u2014 a phenomenon called tessellation. Each cell can be assigned a unique id for spatial indexing (aggregating the points inside that cell).", "A wide variety of grids of different shapes have been proposed including squares, rectangles, triangles, hexagons or diamonds. The global grid system covers the entire surface of the earth.", "If you are a hyperlocal, on-demand company, grids as small as 1 sq. km can be very useful to run models that work in context to location and in in real-time. Examples include surge pricing in high demand areas, promotions in low demand areas & distribution models of delivery folks on the ground.", "There are just three types of grids or that can tessellate: squares, equilateral triangles & hexagons.", "The most common application of square grids occur in raster datasets and geohashes. For the scope of this piece, we will focus on geohashes.", "Geohash is a hierarchical data structure to transform a 2D spatial point (lat & long) into a short string of alphabets and numbers. They divide the world into a grid of 32 cells with 4 rows and 8 columns.", "You can keep splitting up each cell into a grid of 32 cells. Thus, the longer the string of the geohash, the higher the accuracy! You can also easily identify if geohashes are close together if they can have a common prefix. So, the longer the common prefix, the closer they are.", "Triangular grids are not very commonly used. Besides, their unfamiliarity, one of the reasons for that is they have a large perimeter and a small area which means it\u2019s harder to piece them together on the map.", "Another reason is that each triangle is connected to only three adjacent triangles, which limits the number of options to move and to make connections. (Check the image below)", "Moreover, while for hexagons and squares, there are always two faces parallel to each other, for triangles, there are two directions in which lines are parallel centered from the axis of movement. Thus, in a way, there are not completely symmetrical. [2]", "Besides looking appealing, hexagons are more symmetric than geohashes. They are very close to circles in terms of shape to provide a more accurate sampling. [3]", "As a result, this system has been increasingly adopted by companies like Uber.", "Fun fact: A hex grid and triangular grids are a dual of each other \u2014 putting a dot in the center of each hexagon & connecting them to all the adjacent ones, you get a triangular grid and vice versa! [4]", "Moving on the vertices of a hexagonal grid is equivalent to playing in the spaces on a triangular grid. Square grids, on the other hand, are a dual of themselves.", "At Locale, one question that we get a lot from our customers is, \u201cwhy are we using hexbins and not geohashes?\u201d", "Well, the choice depends on your exact use case and you would have to make some tradeoffs, no matter what you use. So, let\u2019s take some parameters and deep dive.", "This diagram shows the distance of the center of triangles, square & hexagon to its neighbors.", "A triangle has three kinds of distance (through the edge, vertex and across the center of the edge), a square has two (across the edge & the diagonal) and hexagon only has one \u2014 another reason why triangles are not really favored.", "This property of hexagons makes it very easy to perform analysis and is preferred when your analysis includes aspects of connectivity or movement. [4]", "All the neighbors in a hexagon form a ring around it with equal radius. The kRing function provides grid cells within distance \u201ck\u201d of an origin index. In the diagram below, here is the 1st kRing of the shaded hexagon and square.", "Hexagons are the densest way to pack circles in tessellation and reduce edge effects. (Circles have the least perimeter to area ratio but can\u2019t form a continuous grid).", "The more similar a polygon is to a circle, the closer the points near the border area are to the center. Thus, any point inside a hexagon is closer to its center as compared to an equal-area square or triangle.", "Now, when large areas come into play and the curvature of the earth is important to consider, hexagons are therefore better suited to fit the curvature and suffer less distortion. [5]", "Hexagons allow any curvature of the patterns in the data to show easily and explicitly because they break up lines.", "For linear figures like squares and rectangles, this becomes tricky. These shapes draw our attention to the straight, unbroken and parallel lines which hinder the patterns present in the data. Refer to the diagram below. [6]", "That brings me to my next question, \u201cWhen would someone use fishnets or square grids?\u201d", "Different kinds of models require different granularity and that\u2019s where aggregation and division become important.", "If you need to increase the spatial resolution of a square grid, you just need to divide it into 4. Similarly, to aggregate, you need to combine four grids into one.", "For hexagons, aggregations and divisions are not uniform at different scales as shown in the image below. The finer cells are only approximately contained in the parent cell. [7]", "Squares are preferred over hexagons for hierarchical analysis. Combining square grids is fairly simple. No spatial operations are necessary for combing multiple grids built on the same template \u2014 you can use matrix algebra.", "We also think in terms of \u201csquares\u201d. Up, down, left, right are simple to understand. We have built cities and civilizations on squares and rectangles. Since our primary coordinate system is squared, people find it difficult to work on other systems.", "They are also sometimes used for connectivity analysis as they have eight neighbors (including diagonals).", "Hexagons are found widely in nature. For example, honeycombs, graphite, benzene, silicene etc. Chinese Checkers is played on a hex grid and several variants of chess have also been invented for a hex board.", "The hex grid is a distinguishing feature of the games from many wargame publishers, and a few other games (such as The Settlers of Catan)! [8]", "P.S. If you found this interesting, do check out our blog for more articles related to maps, location intelligence, and spatial modeling.P.P.S. We are hiring at Locale.ai! Reach out to me at aditi@locale.ai!", "If you wish to read more, check out the links to delve further:", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F7f0b19273aab&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fspatial-modelling-tidbits-honeycomb-or-fishnets-7f0b19273aab&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fspatial-modelling-tidbits-honeycomb-or-fishnets-7f0b19273aab&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fspatial-modelling-tidbits-honeycomb-or-fishnets-7f0b19273aab&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fspatial-modelling-tidbits-honeycomb-or-fishnets-7f0b19273aab&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----7f0b19273aab--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----7f0b19273aab--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@aditi1002?source=post_page-----7f0b19273aab--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@aditi1002?source=post_page-----7f0b19273aab--------------------------------", "anchor_text": "Aditi Sinha"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F2fb67c67439c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fspatial-modelling-tidbits-honeycomb-or-fishnets-7f0b19273aab&user=Aditi+Sinha&userId=2fb67c67439c&source=post_page-2fb67c67439c----7f0b19273aab---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F7f0b19273aab&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fspatial-modelling-tidbits-honeycomb-or-fishnets-7f0b19273aab&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F7f0b19273aab&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fspatial-modelling-tidbits-honeycomb-or-fishnets-7f0b19273aab&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "http://locale.ai", "anchor_text": "Locale"}, {"url": "https://www.mathsisfun.com/geometry/tessellation.html", "anchor_text": "tessellation"}, {"url": "https://en.wikipedia.org/wiki/Discrete_global_grid", "anchor_text": "global grid system"}, {"url": "https://medium.com/@localeai/how-analyzing-supply-demand-gaps-can-optimize-your-unit-economics-1da3ecd340c6", "anchor_text": "Examples"}, {"url": "https://www.factual.com/blog/how-geohashes-work/", "anchor_text": "Geohash"}, {"url": "http://locale.ai", "anchor_text": "Locale"}, {"url": "https://uber.github.io/h3/#/documentation/api-reference/neighbors", "anchor_text": "kRing"}, {"url": "https://medium.com/@localeai", "anchor_text": "blog"}, {"url": "http://locale.ai", "anchor_text": "Locale.ai"}, {"url": "https://en.wikipedia.org/wiki/Geohash", "anchor_text": "https://en.wikipedia.org/wiki/Geohash"}, {"url": "https://boardgames.stackexchange.com/questions/633/why-are-there-fewer-board-games-with-a-triangular-grid", "anchor_text": "https://boardgames.stackexchange.com/questions/633/why-are-there-fewer-board-games-with-a-triangular-grid"}, {"url": "https://www.redblobgames.com/grids/hexagons/", "anchor_text": "https://www.redblobgames.com/grids/hexagons/"}, {"url": "http://www-cs-students.stanford.edu/~amitp/game-programming/grids/", "anchor_text": "http://www-cs-students.stanford.edu/~amitp/game-programming/grids/"}, {"url": "https://pro.arcgis.com/en/pro-app/tool-reference/spatial-statistics/h-whyhexagons.htm", "anchor_text": "https://pro.arcgis.com/en/pro-app/tool-reference/spatial-statistics/h-whyhexagons.htm"}, {"url": "https://www.sciencedirect.com/science/article/pii/S0304380007001949", "anchor_text": "https://www.sciencedirect.com/science/article/pii/S0304380007001949"}, {"url": "http://strimas.com/spatial/hexagonal-grids/", "anchor_text": "http://strimas.com/spatial/hexagonal-grids/"}, {"url": "https://gis.stackexchange.com/questions/82362/what-are-the-benefits-of-hexagonal-sampling-polygons", "anchor_text": "https://gis.stackexchange.com/questions/82362/what-are-the-benefits-of-hexagonal-sampling-polygons"}, {"url": "https://en.wikipedia.org/wiki/Hex_map", "anchor_text": "https://en.wikipedia.org/wiki/Hex_map"}, {"url": "https://en.wikipedia.org/wiki/Hexagonal_tiling%5C", "anchor_text": "https://en.wikipedia.org/wiki/Hexagonal_tiling%5C"}, {"url": "https://medium.com/tag/spatial-analysis?source=post_page-----7f0b19273aab---------------spatial_analysis-----------------", "anchor_text": "Spatial Analysis"}, {"url": "https://medium.com/tag/location?source=post_page-----7f0b19273aab---------------location-----------------", "anchor_text": "Location"}, {"url": "https://medium.com/tag/uber?source=post_page-----7f0b19273aab---------------uber-----------------", "anchor_text": "Uber"}, {"url": "https://medium.com/tag/gis?source=post_page-----7f0b19273aab---------------gis-----------------", "anchor_text": "GIS"}, {"url": "https://medium.com/tag/grid?source=post_page-----7f0b19273aab---------------grid-----------------", "anchor_text": "Grid"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F7f0b19273aab&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fspatial-modelling-tidbits-honeycomb-or-fishnets-7f0b19273aab&user=Aditi+Sinha&userId=2fb67c67439c&source=-----7f0b19273aab---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F7f0b19273aab&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fspatial-modelling-tidbits-honeycomb-or-fishnets-7f0b19273aab&user=Aditi+Sinha&userId=2fb67c67439c&source=-----7f0b19273aab---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F7f0b19273aab&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fspatial-modelling-tidbits-honeycomb-or-fishnets-7f0b19273aab&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----7f0b19273aab--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F7f0b19273aab&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fspatial-modelling-tidbits-honeycomb-or-fishnets-7f0b19273aab&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----7f0b19273aab---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----7f0b19273aab--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----7f0b19273aab--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----7f0b19273aab--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----7f0b19273aab--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----7f0b19273aab--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----7f0b19273aab--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----7f0b19273aab--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----7f0b19273aab--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@aditi1002?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@aditi1002?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Aditi Sinha"}, {"url": "https://medium.com/@aditi1002/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "454 Followers"}, {"url": "http://Locale.ai", "anchor_text": "Locale.ai"}, {"url": "https://demo.locale.ai", "anchor_text": "https://demo.locale.ai"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F2fb67c67439c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fspatial-modelling-tidbits-honeycomb-or-fishnets-7f0b19273aab&user=Aditi+Sinha&userId=2fb67c67439c&source=post_page-2fb67c67439c--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fddb90019adc8&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fspatial-modelling-tidbits-honeycomb-or-fishnets-7f0b19273aab&newsletterV3=2fb67c67439c&newsletterV3Id=ddb90019adc8&user=Aditi+Sinha&userId=2fb67c67439c&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}