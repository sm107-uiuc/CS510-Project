{"url": "https://towardsdatascience.com/automate-data-import-to-google-analytics-471de2c3fc76", "time": 1683007809.9732969, "path": "towardsdatascience.com/automate-data-import-to-google-analytics-471de2c3fc76/", "webpage": {"metadata": {"title": "Automate Data Import to Google Analytics | by muffaddal qutbuddin | Towards Data Science", "h1": "Automate Data Import to Google Analytics", "description": "Suppose you have applied advanced machine learning techniques to your google analytics hit level data to enrich it. And now you want to send that enhanced data to your google analytics so that you\u2026"}, "outgoing_paragraph_urls": [{"url": "https://towardsdatascience.com/send-google-analytics-hit-level-data-to-bigquery-5093e2db481b", "anchor_text": "google analytics hit level data", "paragraph_index": 0}, {"url": "https://github.com/GoogleCloudPlatform/cloud-for-marketing/tree/master/marketing-analytics/activation/gmp-googleads-connector", "anchor_text": "Google Tentacle", "paragraph_index": 1}, {"url": "https://bit.ly/2X4kefM", "anchor_text": "Google\u2019s GCP courses", "paragraph_index": 3}, {"url": "https://github.com/GoogleCloudPlatform/cloud-for-marketing/tree/master/marketing-analytics/activation/gmp-googleads-connector", "anchor_text": "GitHub repo", "paragraph_index": 42}, {"url": "https://www.linkedin.com/in/muffaddal-qutbuddin/", "anchor_text": "https://www.linkedin.com/in/muffaddal-qutbuddin/", "paragraph_index": 44}], "all_paragraphs": ["Suppose you have applied advanced machine learning techniques to your google analytics hit level data to enrich it. And now you want to send that enhanced data to your google analytics so that you can segment and target those enriched users for reactivation and other marketing objectives.", "In this walkthrough guide, I will demonstrate how to set up a data pipeline that will allow you to automatically import your data to google analytics using the Google cloud platform. We will be using Google Tentacle to set up the data pipeline.", "Google Tentacle is a free-to-use solution that helps to send data back to google analytics in an automated fashion. All you have to do is upload your data to cloud storage and the solution will send that data to google analytics in the format required by Google analytics.", "Note: This solution extensively uses google cloud components, therefore, if you want to learn more about the GCP side of things then I would recommend Google\u2019s GCP courses as a good starting point.", "Tentacle uses four of the GCP\u2019s component namely Cloud Storage, Firestore/Datastore, and Pub/Sub, and Cloud Function.", "Cloud Storage is used to store the data that is needed to be imported. It is where you will upload the offline data that you want to send to GA. Data needs to be in a specific format for GA to read it. More on data format in later sections.", "Firestore or Datastore is used for the configurations. It tells tentacles which GA account to send data to and how. Depending upon your GCP project configurations you will either be using Firestore or Datastore. By default tentacles used Firestore but if your project is set up to use Datastore then tentacles will use that.", "Pub/Sub is used to hold, notifies, and move the data. There are three pub/sub being used. First isps-data. It holds the data temporarily sent from cloud function. Second isps-tran. It notifies cloud function to read data from ps-data pub/sub. Third isps-api. This pub/sub is responsible for passing data between pub/subs.", "Cloud Function is where the action happens. There are three cloud functions being used. First is initiator. It triggers whenever a file is uploaded to the cloud bucket. It sends the uploaded data to ps-data pub/sub. Second is transporter. It is triggered by ps-tran and transfers data from ps-data to ps-api pub/sub. Last cloud function is apirequester. It grabs data from ps-api and sends it to the measurement protocol.", "Here is how data moves between components.", "We will install the data pipeline using GCP\u2019s cloud shell.", "1- Once the shell is opened type in the following command to copy the code required to run the installation.", "2- Next move to the directory we copied:", "3- Once in a proper folder type bash deploy.sh. This will start the installation script.", "During the installation process, the script will ask certain configuration questions that need to be answered.", "Following the above steps will complete the installation and now our data pipeline components ready to be used.", "Next, we have to add the configurations so that tentacles can know which Google Analytics property to send data to.", "2. Next, open the cloud console editor by clicking the web preview icon in the top right corner of the cloud shell.", "3. Once in editor goto config file which can be found in:cloud-for-marketing/activation/gmp-googleads-connector", "4. Remove the config_api.json\u2019s content and copy-paste below code in the file", "5. Add UA id in tid and your website domain in dh.", "Children objects of MP tells tentacles where to send the data to. You can add multiple children objects separated by commas to configure for more than 1 GA properties.", "I have set up the config file such that whenever the data is imported to GA using tentacles an event named Google Tentacles is also triggered. This helps to monitor things in the realtime reports as well as in the top event report.", "Save the file and return back to your cloud shell window.", "Tentacle reads Firestore or Datastore (depending upon your project settings) to know where to send data to. Therefore, we have to move our configurations we set up in the last step up to Firestore.", "To do so type the below command in cloud shell:", "If asked for filename hit enter as we have used default file name. If all goes right you should be able to see your settings in Firestore/Datastore as you laid out in config.json file.", "Note: You have to run the above command every time you make changes to the configurations.", "And our data pipeline is ready. Next up let\u2019s work to send some data to Google Analytics.", "How the data pipeline works is that you have to move your file to the cloud storage bucket folder that you provided during the installation process. You can either upload the file to the bucket or move it there from bigquery or any other means.", "As soon the file is moved to storage it is processed and imported to Google Analytics.", "But before the uploaded data can be moved to GA the data has to be in a specific format and the file needs to have a specific naming convention for tentacles to read it.", "Data file should be a CSV file with a ndjson format. Meaning each row should be the data row to be uploaded enclosed in curly brackets.", "To help understand this suppose we want to send a custom dimension that will describe the user\u2019s affinity towards the movie genre. Here is how the data will look like:", "\u2018cid\u2019 is the client id of the user for which we are sending the custom dimension 1.", "As long as file content is in the described format we can send anything to GA such as for example if we want to send an event label \u2018upload\u2019 and custom dimension 2 as \u2018stripe\u2019 then the content will look like:", "For tentacles to read the uploaded file following naming convention has to be used:", "The green part of the file name is static and should not change as Tentacles was designed to only read this format.", "The red part tells where to send data to. This tells tentacles which settings from configurations to use. This can be customized to tell tentacles which GA account should be used to send the data to.", "\u2018*\u2019 at the start indicates that additional text can be added here to give file more meaningful name, for example:", "Create the bucket and folder in cloud storage as you entered during installation, upload your CSV and you should see an event in the realtime report of your Google analytics.", "We worked to set up the google tentacles to send data to google analytics using Google Cloud Platform. Once installed all you have to do is upload the data file in the proper format on google cloud storage and the data pipeline will trigger to import data to Google Analytics.", "Do note that google tentacle is also capable of sending data to other google marketing platforms. In step 3 API Integration of installation, we entered \u20180\u2019 to use measurement protocol. In order to use other APIs enter the relevant numbers on that step. Also, keep in mind that each API requires separate configurations and expect different data format in cloud storage so do keep that in mind. Read the GitHub repo for further details.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Muffaddal has around 6 years of experience working with web analytics and user behavior data. https://www.linkedin.com/in/muffaddal-qutbuddin/"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F471de2c3fc76&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautomate-data-import-to-google-analytics-471de2c3fc76&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautomate-data-import-to-google-analytics-471de2c3fc76&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautomate-data-import-to-google-analytics-471de2c3fc76&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautomate-data-import-to-google-analytics-471de2c3fc76&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----471de2c3fc76--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----471de2c3fc76--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://muffaddal-qutbuddin.medium.com/?source=post_page-----471de2c3fc76--------------------------------", "anchor_text": ""}, {"url": "https://muffaddal-qutbuddin.medium.com/?source=post_page-----471de2c3fc76--------------------------------", "anchor_text": "muffaddal qutbuddin"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F13dafa14dc1c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautomate-data-import-to-google-analytics-471de2c3fc76&user=muffaddal+qutbuddin&userId=13dafa14dc1c&source=post_page-13dafa14dc1c----471de2c3fc76---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F471de2c3fc76&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautomate-data-import-to-google-analytics-471de2c3fc76&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F471de2c3fc76&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautomate-data-import-to-google-analytics-471de2c3fc76&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://pixabay.com/photos/web-network-technology-developer-3963945/", "anchor_text": "pixabay"}, {"url": "https://pixabay.com/users/geralt-9301/", "anchor_text": "geralt-9301"}, {"url": "https://towardsdatascience.com/send-google-analytics-hit-level-data-to-bigquery-5093e2db481b", "anchor_text": "google analytics hit level data"}, {"url": "https://github.com/GoogleCloudPlatform/cloud-for-marketing/tree/master/marketing-analytics/activation/gmp-googleads-connector", "anchor_text": "Google Tentacle"}, {"url": "https://bit.ly/2X4kefM", "anchor_text": "Google\u2019s GCP courses"}, {"url": "https://github.com/GoogleCloudPlatform/cloud-for-marketing/tree/master/marketing-analytics/activation/gmp-googleads-connector", "anchor_text": "GitHub repo"}, {"url": "https://towardsdatascience.com/send-google-analytics-hit-level-data-to-bigquery-5093e2db481b", "anchor_text": "Send Google Analytics Hit Level Data to BigQuery"}, {"url": "https://towardsdatascience.com/rfm-analysis-using-bigquery-ml-bfaa51b83086", "anchor_text": "Perform RFM Analysis using BigQuery ML"}, {"url": "https://medium.com/tag/gcp?source=post_page-----471de2c3fc76---------------gcp-----------------", "anchor_text": "Gcp"}, {"url": "https://medium.com/tag/bigquery?source=post_page-----471de2c3fc76---------------bigquery-----------------", "anchor_text": "Bigquery"}, {"url": "https://medium.com/tag/google-analytics?source=post_page-----471de2c3fc76---------------google_analytics-----------------", "anchor_text": "Google Analytics"}, {"url": "https://medium.com/tag/data?source=post_page-----471de2c3fc76---------------data-----------------", "anchor_text": "Data"}, {"url": "https://medium.com/tag/web-analytics?source=post_page-----471de2c3fc76---------------web_analytics-----------------", "anchor_text": "Web Analytics"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F471de2c3fc76&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautomate-data-import-to-google-analytics-471de2c3fc76&user=muffaddal+qutbuddin&userId=13dafa14dc1c&source=-----471de2c3fc76---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F471de2c3fc76&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautomate-data-import-to-google-analytics-471de2c3fc76&user=muffaddal+qutbuddin&userId=13dafa14dc1c&source=-----471de2c3fc76---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F471de2c3fc76&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautomate-data-import-to-google-analytics-471de2c3fc76&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----471de2c3fc76--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F471de2c3fc76&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautomate-data-import-to-google-analytics-471de2c3fc76&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----471de2c3fc76---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----471de2c3fc76--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----471de2c3fc76--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----471de2c3fc76--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----471de2c3fc76--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----471de2c3fc76--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----471de2c3fc76--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----471de2c3fc76--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----471de2c3fc76--------------------------------", "anchor_text": ""}, {"url": "https://muffaddal-qutbuddin.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://muffaddal-qutbuddin.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "muffaddal qutbuddin"}, {"url": "https://muffaddal-qutbuddin.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "357 Followers"}, {"url": "https://www.linkedin.com/in/muffaddal-qutbuddin/", "anchor_text": "https://www.linkedin.com/in/muffaddal-qutbuddin/"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F13dafa14dc1c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautomate-data-import-to-google-analytics-471de2c3fc76&user=muffaddal+qutbuddin&userId=13dafa14dc1c&source=post_page-13dafa14dc1c--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fe2e482d68f4c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautomate-data-import-to-google-analytics-471de2c3fc76&newsletterV3=13dafa14dc1c&newsletterV3Id=e2e482d68f4c&user=muffaddal+qutbuddin&userId=13dafa14dc1c&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}