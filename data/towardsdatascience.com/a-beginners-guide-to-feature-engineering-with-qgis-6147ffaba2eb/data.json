{"url": "https://towardsdatascience.com/a-beginners-guide-to-feature-engineering-with-qgis-6147ffaba2eb", "time": 1683017081.86205, "path": "towardsdatascience.com/a-beginners-guide-to-feature-engineering-with-qgis-6147ffaba2eb/", "webpage": {"metadata": {"title": "A Beginners Guide to Feature Engineering with QGIS | by Juico Bowley | Towards Data Science", "h1": "A Beginners Guide to Feature Engineering with QGIS", "description": "One of the projects in my Flatiron Data Science program was to take a popular housing sales data set for King County, WA, and use it to gather insights and create a linear regression model. While\u2026"}, "outgoing_paragraph_urls": [{"url": "https://github.com/Juicob/dsc-phase-2-project-online", "anchor_text": "repo on github", "paragraph_index": 5}, {"url": "https://qgis.org/en/site/", "anchor_text": "here", "paragraph_index": 8}, {"url": "https://www.usgs.gov/", "anchor_text": "United States Geological Survey (USGS)", "paragraph_index": 19}], "all_paragraphs": ["One of the projects in my Flatiron Data Science program was to take a popular housing sales data set for King County, WA, and use it to gather insights and create a linear regression model. While there was plenty of data you would expect to find, such as prices, bedrooms, bathrooms, and so on, for the EDA portion of the project, I found this data to be boring and uninspiring. I wanted to do something unique with this project. Houses may get some people excited, and props to y\u2019all out there, but for the projects I work on, I really try to find or create some aspect of it that I\u2019d look forward to talking to people about. Housing prices just aren\u2019t it for me.", "I needed to find something cool.", "Well, what\u2019s cooler than maps? Ok, don\u2019t answer that, I know a lot of things can be, but you can\u2019t deny that maps are cool. They serve as an ultimate visualization, distilling information into an immediately recognizable form that we can use to determine relationships between objects in our space. This is why maps are a powerful tool.", "So while there are some nice mapping libraries you can use with Python, I thought this would be a good opportunity to learn about QGIS and how I can use it to enhance my dataset. QGIS is a free and open-source geographic information system I learned about while looking for free alternatives to the popular, enterprise-level software ArcGIS.", "There were 3 things I wanted to add to my dataset that I thought would make things more interesting, unique, and personal, the first of which we\u2019ll go through in this article.", "Why do I want to add these? Well, the labeled waterfront properties would give me a useful feature that others would typically drop due to the prevalence of null values. Drive time to the hospital is cool because I get to learn how to use Network Analysis tools within QGIS. Also, having lived in Seattle before, I relate to this feature on a personal level as my wife would commute to the hospital for work and we could use this feature to see if proximity to the hospital had an effect on housing prices. Lastly, I love food and drink and Seattle was amazing for that. I decided to use QGIS to geocode the address of some of my favorite breweries I used to frequent and return latitude and longitude coordinates. I could then plot them on a map and use the distances from each house within my final model! Relating this project to myself makes me much more motivated to work on it, and I\u2019m happy to talk to people about my favorite Seattle breweries! If you\u2019re interested in seeing the full project, feel free to check out my repo on github. Let\u2019s get started on the first feature.", "The dataset included a column that was supposed to identify waterfront properties, but the vast majority of that data was missing as shown below. Yellow dots represent waterfront homes as labeled by the dataset.", "As you can see, there are several homes that are on the waterfront that are incorrectly labeled. I thought that accurate waterfront labels would be a valuable feature as I would assume houses with a beautiful waterfront view would be more expensive. I was able to label waterfront homes by transforming a shape file and calculating distance using vector analysis tools within QGIS.", "QGIS can be painlessly installed from their website here. At the time of writing I\u2019m using version 3.16.1 so expect things to look slightly different in later versions.", "When you first open QGIS you\u2019ll be faced with a blindingly white background with tons of tiny buttons on the top and sides. If you\u2019re anything like me you might stare blankly at this screen for a while. Similarly to how I felt when opening up Adobe Illustrator or VS Code for the first time, I was just trying to look around and grasp for anything that looked familiar before ending up disappointed and discouraged. This is about the time I head to Google, Youtube, or in this case, Medium!", "Don\u2019t worry y\u2019all, let\u2019s get our bearings straight here and start simple.", "First, we\u2019ll just get a basic map up on the screen so we have something to orient ourselves.", "On the left side, you\u2019ll see a column of options. If you simply expand \u201cXYZ Tiles\u201d and double-click on \u201cOpenStreetMap\u201d we\u2019ll be able to import the open-source map into our project.", "There we go, that feels better, doesn\u2019t it? Feel free to zoom in and out and scroll all around if you like just to get familiar with navigating around a map in QGIS, you\u2019ll find it\u2019s pretty intuitive. When you\u2019re done go ahead and get the general area you\u2019re looking to view into the frame. In this case, I\u2019m looking at North West Washington, or the Seattle area specifically.", "(Note: I imagine most of you would be working with CSV\u2019s so this will be applicable, if not feel free to choose a more appropriate file type. Aside from CSV\u2019s I think Vectors, Rasters and Mesh\u2019s would be the most common.)", "On the top row, you\u2019ll find a \u201cLayer\u201d menu. From there you\u2019ll want to navigate to Layer > Add Layer > Add Delimited Text Layer. This will bring up another dialogue box where you should input your correct latitude and longitude coordinates", "When you\u2019re done, click \u201cAdd\u201d and you\u2019ll see a satisfying smattering of dots to represent whatever happens to be at those coordinates! In this case, they\u2019re houses. As I understand, the system randomly generates a color so if you don\u2019t like the one it chooses for you you can right-click the layer name in the bottom left corner of the screen and click \u201cStyles\u201d to expand a color picker window.", "Remember, our goal here is to identify which houses are along the water. We\u2019ve got our houses plotted on our nice map, but now how are we supposed to find the ones that are on the waterfront? Well, I had a bunch of terrible ideas but finally decided that if I know where the water is, I can find out which houses are close to it.", "I know that sounds too obvious to be of any worth, and honestly, I felt silly just typing it out and saying it in my head. It makes perfect sense though, in order to get information on how one thing relates to another thing, you need to know information about both things right? So here\u2019s where we find water!", "The shapefile I used was downloaded open-source from the United States Geological Survey (USGS) and is my first stop when searching for any GIS related datasets.", "Once you find the shape file that works for your data. You can simply drag the file from your folder onto the map and it will establish itself as a layer!", "So now we\u2019re getting into the cool stuff! Shape files are fine and all, but it\u2019s not exactly what we need right now for this problem. We don\u2019t really care about where all of the water is, the only part that we care about are the edges or the line that forms where the water meets the land. This is how we determine what the shoreline is, and the basis of how we\u2019ll classify our waterfront properties.", "So what we need to do is take the polygon representation of our shape file, and turn its lines into several points. The more points you create out of the line, the more accurate the measurement will be. This may sound weird but it\u2019ll make sense in a bit I promise.", "In order to do this, there\u2019s a processing tool called \u201cConvert polygon/line vertices to points\u201d. You\u2019ll find this tool on the right-hand side of the window within the \u201cProcessing Toolbox\u201d. The easiest way to find it would be to just start typing \u201cconvert\u201d in the search box and let it filter it out for you. This toolbox has plenty of other useful tools in here as well so feel free to poke and prod around, your situation may not be exactly like mine so a better tool may be more appropriate for your use case.", "All you have to do is double-click the tool and it will bring up a dialogue box. Here, just make sure the layer you want to convert is selected and hit \u201cRun\u201d.", "And there you go! I know it looks a bit messy. At any point in time, you can toggle the checkboxes on the bottom left-hand side and remove some of these layers from view if things get too cluttered for you.", "Now thanks to our data we know where each house is, and thanks to QGIS and our shapefile from USGS, we know where the shoreline is! Here we\u2019ll use the same \u201cProcessing Toolbox\u201d and search for \u201cdistance\u201d. The tool we\u2019re looking for is under \u201cVector analysis\u201d and is called \u201cDistance to nearest hub (line to hub)\u201d. Here we have a few more \u201cparameters\u201d in a sense. I used our housing location as our source layer, and the output of the last step (points) as our destination layer. I then selected ID as the name attribute, and \u201cMiles\u201d as my unit of measurement. Hit \u201cRun\u201d, and soon you\u2019ll see a whole bunch of lines spanning out from each house to the closest point of water! Now this shows you why it\u2019s important to transform our polygon into vertices. The function won\u2019t know where to measure its distance to as a polygon, so breaking down that shape into multiple vertices at small intervals gives us a point to connect to from each house and find the closest one.", "Again, don\u2019t forget to change the color with \u201cStyle\u201d if you\u2019re not a fan of the default color. Ok! This is good right!? Well, mostly\u2026", "If you look you\u2019ll notice that our shape file had a bunch of small little lakes, ponds, and puddles in the data. That\u2019s not necessarily wrong, it\u2019s just not exactly applicable for our use case, since you can\u2019t really list your house for sale as a \u201cwaterfront property\u201d just because it\u2019s next to a puddle, I don\u2019t care how you spin it!", "So now this step involves a bit of cleaning. Look, I hear you, \u201cCleaning?! I just got done cleaning this entire data set! Now I have to clean this too?!!\u201d", "Less short answer? It depends on your data and what you need.", "Chill though, it won\u2019t be that bad I promise.", "There are a few steps here but let me break it down.", "Now if you did everything right, you\u2019ll be able to click and drag to highlight groups of points on the map. When points are selected you can then delete them with the \u201cDelete Selected\u201d button that will light up.", "To select multiple groups at a time you can hold down the \u201cShift\u201d key while clicking and dragging to delete points in larger batches. Now the current view looks off because the distances are still referencing the old points that we\u2019ve deleted. Once we clean up all the points we want to get rid of, we\u2019ll run the same \u201cDistance to hub (line to hub)\u201d function we ran earlier to recalculate the distances from each house to our relevant water source.", "This is an example of how the distances are recalculated after only removing a small portion of the unnecessary points. Both layers are selected to show the difference between the two; however, once you\u2019ve cleaned all the points, you\u2019ll no longer need the initial distance layer and can either uncheck it so it doesn\u2019t display or right-click and select \u201cRemove Layer\u201d to clean up your project file. Also, you can click on \u201cPan Map\u201d (the hand icon in the second row on the top toolbar) to go back to navigating around the map like before instead of selecting points.", "Great job getting through that cleaning!", "Now at this point, we actually have all the data we wanted to create in the first place! You may not be able to see it right now but it\u2019s there, and we\u2019ve visualized it with lines on the map! The goal at this point is to join our new distance data with our main housing data and export it so we can manipulate it as needed with Python later. To do this we\u2019ll want to double-click our data layer and select \u201cJoins\u201d from the column of tabs on the left and click on the small green plus sign icon to add a join. In the pop-up window, make sure the distance layer is selected as your join layer, and I used the ID as my \u201cJoin\u201d and \u201cTarget\u201d fields. Since in this case, we only want to add the distance to our main dataset, I selected the \u201cJoined Fields\u201d box to select only the data we want to include in our join.", "Lastly, all you need to do now is right-click on your data layer that now has the distance information you just created, and navigate to Export > Save Feature As. Here you can select your file type as CSV (or whatever filetype you prefer to work with), add a name, and hit \u201cOk\u201d!", "Congratulations! Go ahead and enjoy a celebratory beverage, do a dance, or do both! Now we have a CSV that includes all of our original data, combined with a column that represents the distance in miles from that house to the closest shoreline. This is just the first feature I created for my project. Depending on your use case, you can go ahead and start working with this file elsewhere or stick around in QGIS to create more features!", "After I\u2019ve created and exported all of my features, I was able to go back into my text editor and read in this CSV as a Pandas data frame to work with it further. I\u2019m not including the Python portion in the walkthrough here since there\u2019s an abundance of fantastic resources out there already and this was to show how you can use another platform in addition to your code to make it better! I ended up labeling houses as \u201cWaterfront Homes\u201d if the house was within .25 miles from the shore. This would account for the strip of land that no homes can be built on, street separations, and/or popular boardwalks. I also decided to keep Green Lake because I know this is a desirable location that can affect housing prices, as well as Lake Sammamish since it is a considerable body of water. Here\u2019s a picture showing the outcome of the new data plotted on a map. This also shows my work with the breweries and the hospital that I\u2019ll include in later parts of this series!", "If you\u2019ve made it this far, I hope this walkthrough has been helpful for you. We went through a specific problem but these tools can be used to tackle a wide variety of issues and we covered a lot of material to help get you started with your next project. We learned how to load data into a new software platform (QGIS) and learned about a useful resource to gather GIS data (USGS). We also went through how to transform (Vector Tools) these files into polygons to points so we can use them to work with our existing data, and also delete points (Select/Delete Selection) that don\u2019t pertain to our use case. Finally, we learned how to use another tool to create a brand new feature (Distance to hub) and extract it (Join/Export) into a digestible format to strengthen our analysis and give it more depth.", "In part 2 of this project, I\u2019ll outline how to use Network Analysis within QGIS to determine commute times between each house and the UW hospital to better determine where we would want to buy a house!", "This is my first project using QGIS so if you\u2019re a veteran, I\u2019d be interested to find out what other solutions you might have to tackle this problem! Any discussion is welcome, and I hope this enables other fledging GIS analysts to pick up this valuable tool and include it within their data science toolbox.", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F6147ffaba2eb&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-beginners-guide-to-feature-engineering-with-qgis-6147ffaba2eb&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-beginners-guide-to-feature-engineering-with-qgis-6147ffaba2eb&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-beginners-guide-to-feature-engineering-with-qgis-6147ffaba2eb&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-beginners-guide-to-feature-engineering-with-qgis-6147ffaba2eb&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----6147ffaba2eb--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----6147ffaba2eb--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://juico-bowley.medium.com/?source=post_page-----6147ffaba2eb--------------------------------", "anchor_text": ""}, {"url": "https://juico-bowley.medium.com/?source=post_page-----6147ffaba2eb--------------------------------", "anchor_text": "Juico Bowley"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fab622a55004&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-beginners-guide-to-feature-engineering-with-qgis-6147ffaba2eb&user=Juico+Bowley&userId=ab622a55004&source=post_page-ab622a55004----6147ffaba2eb---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F6147ffaba2eb&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-beginners-guide-to-feature-engineering-with-qgis-6147ffaba2eb&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F6147ffaba2eb&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-beginners-guide-to-feature-engineering-with-qgis-6147ffaba2eb&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@jayrheike?utm_source=medium&utm_medium=referral", "anchor_text": "Jay Heike"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://github.com/Juicob/dsc-phase-2-project-online", "anchor_text": "repo on github"}, {"url": "https://qgis.org/en/site/", "anchor_text": "here"}, {"url": "https://www.usgs.gov/", "anchor_text": "United States Geological Survey (USGS)"}, {"url": "https://medium.com/tag/gis?source=post_page-----6147ffaba2eb---------------gis-----------------", "anchor_text": "GIS"}, {"url": "https://medium.com/tag/data-science?source=post_page-----6147ffaba2eb---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/qgis?source=post_page-----6147ffaba2eb---------------qgis-----------------", "anchor_text": "Qgis"}, {"url": "https://medium.com/tag/data?source=post_page-----6147ffaba2eb---------------data-----------------", "anchor_text": "Data"}, {"url": "https://medium.com/tag/data-analysis?source=post_page-----6147ffaba2eb---------------data_analysis-----------------", "anchor_text": "Data Analysis"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F6147ffaba2eb&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-beginners-guide-to-feature-engineering-with-qgis-6147ffaba2eb&user=Juico+Bowley&userId=ab622a55004&source=-----6147ffaba2eb---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F6147ffaba2eb&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-beginners-guide-to-feature-engineering-with-qgis-6147ffaba2eb&user=Juico+Bowley&userId=ab622a55004&source=-----6147ffaba2eb---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F6147ffaba2eb&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-beginners-guide-to-feature-engineering-with-qgis-6147ffaba2eb&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----6147ffaba2eb--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F6147ffaba2eb&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-beginners-guide-to-feature-engineering-with-qgis-6147ffaba2eb&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----6147ffaba2eb---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----6147ffaba2eb--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----6147ffaba2eb--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----6147ffaba2eb--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----6147ffaba2eb--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----6147ffaba2eb--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----6147ffaba2eb--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----6147ffaba2eb--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----6147ffaba2eb--------------------------------", "anchor_text": ""}, {"url": "https://juico-bowley.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://juico-bowley.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Juico Bowley"}, {"url": "https://juico-bowley.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "31 Followers"}, {"url": "https://www.linkedin.com/in/juico-bowley", "anchor_text": "https://www.linkedin.com/in/juico-bowley"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fab622a55004&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-beginners-guide-to-feature-engineering-with-qgis-6147ffaba2eb&user=Juico+Bowley&userId=ab622a55004&source=post_page-ab622a55004--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fusers%2Fab622a55004%2Flazily-enable-writer-subscription&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-beginners-guide-to-feature-engineering-with-qgis-6147ffaba2eb&user=Juico+Bowley&userId=ab622a55004&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}