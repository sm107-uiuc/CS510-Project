{"url": "https://towardsdatascience.com/hypothesis-testing-the-distribution-doesnt-matter-79882ba62f54", "time": 1683005655.01699, "path": "towardsdatascience.com/hypothesis-testing-the-distribution-doesnt-matter-79882ba62f54/", "webpage": {"metadata": {"title": "Hypothesis testing: the distribution doesn\u2019t matter(!) | by Rohit Pandey | Towards Data Science", "h1": "Hypothesis testing: the distribution doesn\u2019t matter(!)", "description": "I read somewhere on the internet (so it must be true) that what separates good writers from the rest is that they know how their story is going to end before they even begin writing. Knowing the\u2026"}, "outgoing_paragraph_urls": [{"url": "https://towardsdatascience.com/hypothesis-testing-visualized-6f30b18fc78f", "anchor_text": "here", "paragraph_index": 1}, {"url": "https://www.itl.nist.gov/div898/handbook/eda/section3/eda353.htm", "anchor_text": "here.", "paragraph_index": 8}], "all_paragraphs": ["I read somewhere on the internet (so it must be true) that what separates good writers from the rest is that they know how their story is going to end before they even begin writing. Knowing the ending provides direction, clarity and purpose since they know what they\u2019re aiming for. So, I\u2019ll give you the ending of this story, the punch line right here (henceforth, \u201cthe claim\u201d) \u2014 take a two sample t-test (or any hypothesis test); now throw away the t-distribution (the distribution of the null hypothesis \u2014 we\u2019ll get into what that is) and replace it with any other distribution under the sun. The new distribution might be Gaussian, or it could be some weird multi-modal shape, doesn\u2019t matter. Now if you use this \u201cmodified\u201d hypothesis test on any data, you end up with the same performance (error rates) as with the original test. On the surface, that\u2019s like opening up a Ferrari, ripping out its engine and replacing it with the engine of some other car. And the performance of this \u201cmodified\u201d Ferrari remains the same as if we hadn\u2019t changed anything!? How?", "Okay, so you\u2019ll need the basics of hypothesis testing for this journey. See here if you\u2019re feeling rusty. While the claim holds for any hypothesis test (as we\u2019ll prove), we\u2019ll use the two-sample t-test for comparing means as a template since it\u2019s one of the more widely-known hypothesis tests.", "Now, what is a hypothesis test? Let\u2019s take a concrete example for the two-sample t-test. Say we have a manufacturing process that produces nuts of a given size. Of course, no process is perfect and so, the nuts produced have some small variance in their sizes. A new automation process was introduced yesterday, which makes this process much more efficient. We\u2019re concerned that it might have changed the distribution of the sizes of the nuts though, which is unacceptable. The two-sample t-test gives us a way of comparing the mean sizes from the old and new processes. If even the mean size for the new process is significantly different, it will be a problem. All we need is to get some nuts manufactured by the old process and some by the new process and feed the data pertaining to their sizes into the hypothesis test.", "The hypothesis test is then like a watchman, keeping an eye on the quality of our manufacturing process and alerting us when it\u2019s compromised. This begs the question though \u2014 who watches the watchman? Just like the manufacturing process isn\u2019t perfect, the hypothesis test we use to tell if there is a difference in means or not isn\u2019t perfect either. It might make an error. And there are two kinds of errors it can make. It might miss a real difference in the means, saying there is no difference when there in-fact is, or it might raise a false alarm, saying there is a difference when there is in-fact none. The first kind of error is called a false-negative (we\u2019ll denote it b) and the second kind is called a false-positive (we\u2019ll denote it a). There is always a trade-off between these two kinds of errors. For example, it\u2019s trivial to get a perfect (zero) false positive rate by never saying there is a difference (test never returns positive, so no false positives). However, this strategy will lead to a 100% false negative rate. Similarly, one can get a zero false negative rate, but incur a 100% false positive rate. Useful tests generally lie somewhere in between these extremes. The more aggressively the test predicts positives, the higher the false positive rate and also, lower the false negative rate (real differences become less likely to be missed). This trade-off between the false positive and false negative rates can be plotted for any test (see figure 1 below). If test-1 has a curve that stays below that of test-2, we can say test-1 makes less errors and is preferable to test-2 (also called \u201cmore powerful\u201d). Now, let\u2019s take the two-sample t-test for comparing means. If gives us a certain graph for the error rates. Surely the graph should become worse if we replace the t-distribution in the test with another arbitrary distribution? Let\u2019s see what happens.", "To see how well our test performs, we don\u2019t have to wait for real world data from manufactured nuts. There are only two possibilities; either the new process caused the mean to change (null hypothesis) or it didn\u2019t (alternate hypothesis). Say we were going to do our experiment where we produce 30 nuts with the old manufacturing process and 30 from the new one and pass the data into our test. Well, we can first assume that the new process didn\u2019t change the mean sizes and simulate 30 sizes corresponding to the old process and 30 from the new one from the same distribution (say, normal with mean size set to appropriate value and some added variance). We know there is no difference between the groups in this scenario since we simulated the data that way. If the test fires and says it found a difference in means, we know this is a false positive. Similarly, we generate 30 sizes from the old process and then 30 from the new process, this time setting the mean to a different (say slightly higher) value for the new process. We then pass these data points to the test as well. We now expect our test to find a difference. If it doesn\u2019t, this is a false negative. We apply our test to these data points with different proclivities for firing positives (\u201ctrigger happiness\u201d), and repeat the process many times. This gives us the false positive to false negative rate trade-off for the test.", "Now, we proceed with the simulation described in the previous section, using the t-test applied as-is, with the correct distribution. But next, we \u201cmodify\u201d the test by swapping the t-distribution used in the test with other arbitrary distributions. We might expect these modifications to have a detrimental effect on the effectiveness of the test (and so higher error rates, meaning the false positive to false negative trade-off curve should move upwards).", "But when we actually plot these curves, the figure below is what we get:", "In the plot, we first use the t-distribution (with mean 0 and standard deviation 1 as required by the test), next we replaced the t-distribution with a normal distribution with the same mean and standard deviation. Next, we replaced that with a normal distribution with mean 1 and standard deviation 2. And finally, we replaced that with a Cauchy distribution with mean 0 and standard deviation 1. The false positive rate to false negative rate lines corresponding to these tests are shown in figure 1. Surprisingly, they are all right on top of each other. So, swapping the t-distribution with these other unrelated distributions is having no effect what-so-ever on the performance of the test! Let\u2019s now take a look at the code used to draw this plot.", "Now, let\u2019s explore the code used to create the plot above. Since we want to take the t-test and replace the t-distribution with other distributions, the \u201cuno\u201d step is to implement the two-sample t-test from scratch. This is based on the description here.", "Next, we wrap this in a function that can use two arrays instead of the raw means and variances.", "Now, we implement a function that simulates data from the null and alternate hypotheses and generates the false positive and false negative rates at various significance levels, hence drawing out the alpha-beta curve.", "And finally, putting this all together to draw out the alpha-beta plots using different distributions for the null hypothesis in the two-sample t-test.", "And this generates something very similar to the plot we saw in the previous section.", "If you don\u2019t like Math, this is the point where you add the new nugget of knowledge to your collection and ride off into the sunset. Otherwise, stay for..", "First, we define some notation. We\u2019ll assume our test is one-sided with the alternate hypothesis being that the second population is larger on some metric (like the mean for the two-sample t-test).", "The hypothesis tests we\u2019re interested in operate as follows:", "The distribution of the test statistic, X under various scenarios:", "X_0: The distribution of the test-statistic under the null hypothesis (assuming there is no difference in our metric of interest; assumption of innocence \u2014 what all trials start with).", "Y_0: The distribution of the test-statistic under the null hypothesis in the perfect world of our test \u2014 where all the distributional assumptions of our test are perfectly satisfied and unicorns ride across rainbows.", "X_a: The distribution of the test statistic under the alternate hypothesis, when there is a difference in our metric of interest between the two groups.", "Per the fourth point above, our criterion for rejecting the null hypothesis is (at some significance level, \u03b1): P(X\u2265Y_0) < \u03b1. But the left hand side is the probability that Y_0 will be greater than some value, which is the survival function of Y_0 (denoted S_{Y_0}). So, the probability of rejecting the null hypothesis becomes:", "where in the last step, we used the fact that the survival function of any distribution is monotonically decreasing. When the null hypothesis is true, the distribution of the test statistic, X is: X \u223cX_0. So the probability above becomes:", "But under the null hypothesis, rejecting the null is by definition an error. So the probability above is an error rate; the rate of erroneously rejecting the null when it is true. Let\u2019s call this false positive rate, a.", "So, the significance level that leads to a false positive rate, a is given by:", "Similarly, under the alternate hypothesis, the distribution of the test statistic becomes: X \u223c X_a. So the probability of rejecting the null becomes:", "In the case of the alternate hypothesis, we\u2019d be making an error if we don\u2019t reject the null. So, the rate of the error where we don\u2019t reject the null when we should have, b becomes:", "Now, we want b as a function of a (false negative rate as a function of false positive rate). Because the trade-off in the rates of the actual errors is what matters. To get this, we can substitute equation (1) into equation (2) and this gives us:", "Equation (3) tells us that the distribution used in the null hypothesis of our test, Y_0 when using the hypothesis test has no bearing on the trade-off between the false negative to false positive rate. And this proves the claim we started this blog with. In other words, doesn\u2019t matter if the Y_0 we use in our two-sample t-test is a t-distribution, or Normal or Cauchy. The false negative to false positive rate trade-off (b as a function of a as given by equation (3)) will remain exactly the same.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "I like to explain data science concepts through words, visualizations and code in the hope one of them will click. For my day job, I work at Microsoft Azure."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F79882ba62f54&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhypothesis-testing-the-distribution-doesnt-matter-79882ba62f54&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhypothesis-testing-the-distribution-doesnt-matter-79882ba62f54&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhypothesis-testing-the-distribution-doesnt-matter-79882ba62f54&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhypothesis-testing-the-distribution-doesnt-matter-79882ba62f54&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----79882ba62f54--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----79882ba62f54--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@rohitpandey576?source=post_page-----79882ba62f54--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@rohitpandey576?source=post_page-----79882ba62f54--------------------------------", "anchor_text": "Rohit Pandey"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fa743c5fec8cd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhypothesis-testing-the-distribution-doesnt-matter-79882ba62f54&user=Rohit+Pandey&userId=a743c5fec8cd&source=post_page-a743c5fec8cd----79882ba62f54---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F79882ba62f54&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhypothesis-testing-the-distribution-doesnt-matter-79882ba62f54&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F79882ba62f54&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhypothesis-testing-the-distribution-doesnt-matter-79882ba62f54&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://towardsdatascience.com/hypothesis-testing-visualized-6f30b18fc78f", "anchor_text": "here"}, {"url": "https://www.itl.nist.gov/div898/handbook/eda/section3/eda353.htm", "anchor_text": "here."}, {"url": "https://gist.github.com/ryu577/6146e88b347bce5a66dda168bc5cefe0", "anchor_text": "https://gist.github.com/ryu577/6146e88b347bce5a66dda168bc5cefe0"}, {"url": "https://gist.github.com/ryu577/b18fcddaa73216448ef72593a76a2d15", "anchor_text": "https://gist.github.com/ryu577/b18fcddaa73216448ef72593a76a2d15"}, {"url": "https://gist.github.com/ryu577/925fb03bb2a1869a60037eec74ddfcf5", "anchor_text": "https://gist.github.com/ryu577/925fb03bb2a1869a60037eec74ddfcf5"}, {"url": "https://medium.com/tag/data-science?source=post_page-----79882ba62f54---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/simulation?source=post_page-----79882ba62f54---------------simulation-----------------", "anchor_text": "Simulation"}, {"url": "https://medium.com/tag/hypothesis-testing?source=post_page-----79882ba62f54---------------hypothesis_testing-----------------", "anchor_text": "Hypothesis Testing"}, {"url": "https://medium.com/tag/probability?source=post_page-----79882ba62f54---------------probability-----------------", "anchor_text": "Probability"}, {"url": "https://medium.com/tag/statistics?source=post_page-----79882ba62f54---------------statistics-----------------", "anchor_text": "Statistics"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F79882ba62f54&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhypothesis-testing-the-distribution-doesnt-matter-79882ba62f54&user=Rohit+Pandey&userId=a743c5fec8cd&source=-----79882ba62f54---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F79882ba62f54&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhypothesis-testing-the-distribution-doesnt-matter-79882ba62f54&user=Rohit+Pandey&userId=a743c5fec8cd&source=-----79882ba62f54---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F79882ba62f54&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhypothesis-testing-the-distribution-doesnt-matter-79882ba62f54&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----79882ba62f54--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F79882ba62f54&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhypothesis-testing-the-distribution-doesnt-matter-79882ba62f54&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----79882ba62f54---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----79882ba62f54--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----79882ba62f54--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----79882ba62f54--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----79882ba62f54--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----79882ba62f54--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----79882ba62f54--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----79882ba62f54--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----79882ba62f54--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@rohitpandey576?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@rohitpandey576?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Rohit Pandey"}, {"url": "https://medium.com/@rohitpandey576/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "404 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fa743c5fec8cd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhypothesis-testing-the-distribution-doesnt-matter-79882ba62f54&user=Rohit+Pandey&userId=a743c5fec8cd&source=post_page-a743c5fec8cd--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F3cd69f24197&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhypothesis-testing-the-distribution-doesnt-matter-79882ba62f54&newsletterV3=a743c5fec8cd&newsletterV3Id=3cd69f24197&user=Rohit+Pandey&userId=a743c5fec8cd&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}