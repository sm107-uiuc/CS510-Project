{"url": "https://towardsdatascience.com/a-tricky-tableau-question-6e8fe6e8371b", "time": 1683010580.3072839, "path": "towardsdatascience.com/a-tricky-tableau-question-6e8fe6e8371b/", "webpage": {"metadata": {"title": "A tricky Tableau question. As a freelancer, I\u2019ve got some alerts\u2026 | by Julian Tagell | Towards Data Science", "h1": "A tricky Tableau question", "description": "As a freelancer, I\u2019ve got some alerts set up with Airtasker, such that if any new dashboard-related gigs get posted, I get pinged. Airtasker can be a bit of a \u201crace to the bottom\u201d where people\u2026"}, "outgoing_paragraph_urls": [{"url": "https://www.airtasker.com/", "anchor_text": "Airtasker", "paragraph_index": 0}, {"url": "https://gist.github.com/Tadge-Analytics/58a49896a5648175f95b3b61af67f653", "anchor_text": "using R (see the gist here)", "paragraph_index": 6}, {"url": "https://www.dropbox.com/s/8ji31cxqpxouygk/example%20data.xlsx?dl=1", "anchor_text": "here", "paragraph_index": 7}, {"url": "https://youtu.be/tpYUfR6wkC4", "anchor_text": "this Youtube Video", "paragraph_index": 73}], "all_paragraphs": ["As a freelancer, I\u2019ve got some alerts set up with Airtasker, such that if any new dashboard-related gigs get posted, I get pinged. Airtasker can be a bit of a \u201crace to the bottom\u201d where people (including myself) post relatively simple tasks that they just want sorted for a minimum amount of money.", "I\u2019ve taken gigs this way and they have led to bigger and better things, so it\u2019s not all bad. If nothing else, it\u2019s great for putting yourself out there (although you have to watch out for shady university students demanding you finish their assignment for $20).", "Tableau tutoring is something I\u2019ve done multiple times (both privately and through AirTasker). I thought I may as well share some of the common questions that I have come across. So this might turn into a bit of blog post series\u2026", "This blog post is about one Airtasker gig that brought up a Tableau issue that I seemed to have encountered (in one form or another) multiple times. It\u2019s an issue that gets right to the heart of why many people find Tableau incredibly frustrating.", "The poster included two pictures to illustrated her question.", "I didn\u2019t end up getting assigned this gig (drats!), but here is the neat and tidy version of what I would have liked to convey.", "To get us started, I can quickly generate dummy data using R (see the gist here), with monthly Budgets and daily Actuals, to resemble their data.", "Feel free to download the resulting Excel file, here (if you would like to follow along).", "We can plonk this into Tableau and set things up a little.", "In their pictures, they have something different to the above. Instead of just using Amount, they have several calculated fields that display the amount for several specific time periods:", "This is how I would create these.", "The first step is to create a new column that is just the current date repeated all the way down.", "I think of calculated fields as new columns added to the data source table -unless you\u2019re dealing with LOD calculations -in which case it\u2019s more like a joined aggregated table -but LODs are a whole different discussion).", "Then we make a series of Boolean (True / False) columns that will say whether the Date in each row meets any of our four time period conditions.", "Current month and year are simple enough, using the datetrunc() function.", "But the financial year ones require a bit more finesse.", "Nice! It\u2019s also a good idea to double check these Booleans with a table, like below:", "Our next step is to utilise these Boolean columns to only contain the Amount coloumn value, if their condition is met. We can do this simply, by adding an IF formula into each.", "Then drag each of these down into the Measures section.", "We can now drag each of them onto our viz, and we\u2019ve got something looking pretty darn close to the poster\u2019s images.", "According to the original pictures, there are two parts to her request:1. add in a Variance column 2. remove the \u201cActuals\u201d and \u201cVariance\u201d from the Year to Go (YTG) section.", "This is precisely this sort of apparently easy thing, that is very difficult to achieve in Tableau and drives people back to using Excel, where they can easily add in or hide a column.", "Figuring out \u201cthe Tableau way\u201d requires a good understanding of how Tableau \u201cthinks.\u201d", "The (seemingly) easiest solution is just to add subtotals to the table.", "As you can see, the new total column is just the addition of the Actuals and Budget columns.", "In order to get the variance, we would have to create a \u201cproxy\u201d Amount column, where Actual values were made negative.", "Then we would do a \u201cReplace References\u201d, so that all of our newly created time-specific formulas linked back to the proxy instead the original Amount column.", "This works okay. The format bar also allows us to change the header label from \u201cTotal\u201d to \u201cVariance\u201d.", "But we have very limited control over this new Variance column.", "Besides from formatting its colour and alignment, there\u2019s nothing we can change about it. If we wanted to show it as a percentage, we wouldn\u2019t be able to do that.", "This solution would only really satisfy the most easy-going of clients.", "Another tempting avenue is to right click on each of our measure pills and select \u201cQuick Table Calculation\u201d and \u201cDifference\u201d\u2026", "This changes our columns from being two (Actual & Budget) to being just one (the difference). It is very easy to muck around in this area for hours before realising that, in this case, it won\u2019t lead us to a working solution.", "We might throw in the towel and go ahead and just manually aggregate our data, in a pre-processing step (maybe using SQL to make a View or even a scheduled Tableau Prep flow) that would append the Variance values to our aggregated raw data.", "Here is a quick video of such a process, using Tableau Prep.", "This sort of thing should really only ever be a last resort.", "Creating a whole bunch of single-use data sources is a bad habit. Especially when just starting out.", "Sometimes it is unavoidable and the creation of them is fast and simple. But doing this all the time might stop you from picking up all the different tips and tricks that allow the functionality you were aiming for to be produced off the original data source.", "Additionally, the scheduling of this process could become a bit of a rod for your own back. If we were working with a database source, it\u2019s possible to create a View with the data in such a correct form. But, if we were working off a live service without some intermediary location (where we could build such a View), then we\u2019d be up for a whole lot more leg work in setting this up.", "If the report was only refreshed monthly, admittedly, the addition of a Prep flow into the regular process probably wouldn\u2019t be so much of a big deal.", "There is a way we can get pretty close to our client\u2019s request, operating off the original dataset.", "What we have to do is create three new (actual, budget and variance) measures for each of our four time-periods.", "Having to make all these (12 measures) sounds like such a headache\u2026 but I\u2019m going to show you a nifty shortcut.", "Firstly, we make two helper columns.", "The trick to making multiple calculated fields, is the little known drag and drop method.", "First, create the names for your new fields as comments. Modify each of the formulas accordingly. Then drag each section (including the comment / title) over to the measures pane.", "Ta da! The comment becomes the measures name. Mind blown, right?", "Making the Variance calculated fields is slightly different. Remember, thinking in terms of what Tableau sees, there are no rows where we would see a budget and an actual amount value.", "This is determined by the SAP Version column. Any particular row is either \u201cACTUALS\u201d or \u201cBUDGET\u201d. Therefore using [current month actual] \u2014 [current month budget] as the formula will not work for us.", "Instead, the formula needs to be an aggregation, dependent upon the context of the visualisation. We need to use SUM([current month actual]) \u2014 SUM([current month budget]).", "I put all these new calculations into a folder for neatness. Let\u2019s take a look at them.", "Oh no! At this point, I realised that the \u201cis Actual\u201d column wasn\u2019t working!", "The SAP Version had \u201cACTUALS\u201d instead of \u201cACTUAL\u201d. Luckily, I only had to update the \u201cis Actual\u201d column and not every single one of those \u201c\u2026 actual\u201d calculated fields that we\u2019d just made. Phew! A good lesson to minimize repeated code, wherever possible.", "Chucking all these calculated fields into the viz, we are presented with a new set of challenges.", "For each of new measures, I want to change the header aliases from, for example, \u201cCurrent Month Actual\u201d to \u201cActuals\u201d, it won\u2019t let me do this more than once because it cannot have repeated aliases.", "In response, I had to resort to putting trailing spaces on subsequent aliases, eg \u201cAcutals \u201c. I also formatted these headers to be left aligned and to never \u201cwrap text\u201d (so they would all look the same).", "Admittedly this is a pretty minor issue.", "Using all these 12 newly calculated measures, we now have the flexibility to modify the variance column as we would like (as in, we can change it to being a percentage of the budget). We can also remove the Actual and and Variance for the Year To Go section.", "As an informative table, however, this is pretty lackluster and it is missing a critical part from the client\u2019s request.", "We can\u2019t add those \u201cMonth ($m)\u201d, Year to Date ($m)\u201d headers above where it says CAPEX OPEX (there is no column in our source table that would allow this). Our current setup is just have a whole bunch of numbers, with no clear differentiation between the timeframes.", "We could go off and make any number of cool charts, with these new measures but let\u2019s say our client was a real stickler to either get the table looking the way she wanted or to know conclusively that what she wanted simply wasn\u2019t possible.", "After all this hard work, are we going to admit defeat?", "Talk to our client. Try to persuade her of an alternative solution that you know how to do.", "Maybe they don\u2019t need to have each of those time periods displayed in the one table. We could create a parameter to only show selected timeframes, one at a time.", "Then use the parameter selector to drive which amount is being displayed.", "A little header formula, would give us the title we needed.", "If they absolutely must have them all on the one page, there is a solution available.", "We can achieve this by making a dashboard containing a series of sheets with only the measures of each timeframe.", "We would also add a highlight action, so that rows highlighted in one sheet would also highlight in the other 3. Reassuring that everything was correctly lined up.", "If the actual data had many categories, we would also have to deal with those scroll bars, because these would not scroll in a synchronized fashion. There is a hack, available for this, explained pretty well in the following video.", "That allows us to restrict the number of rows shown on each sheet, via a central parameter. But you do end up with a horizontal scrolling bar, which is a bit annoying. There might be some other way of improving the scrolling experience.", "This demo showcases using a parameter. But I think it isn\u2019t much better.", "One final trick we might show our client, is expanding and contracting the tables by the Reporting levels. A hierarchy, unfortunately, won\u2019t work across the multiple sheets in our dashboard.", "The simplest solution (copied from this Youtube Video) is to add a report level parameter.", "And then replace the actual Reporting Levels with a calculated field that will show the levels (or be blank) according to the parameter\u2019s setting.", "This gives us the ability to aggregate up or down (across all the sheets) by the different reporting levels.", "There also might be \u201cSet action\u201d maneuvers as well, to investigate. To enable \u201cclick to expand\u201d functionality. But the parameter slider seems satisfactory, to me.", "It seems that we have finally gotten to something that (in theory) should satisfy our client\u2019s initial request. You can download the Tableau Workbook from Tableau public.", "In the process, we have also shown her a whole range of aspects to Tableau, many of which she may have not seen before.", "There are heaps of places to take this now, as in visualizations that would take far less cognitive load to understand.", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F6e8fe6e8371b&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-tricky-tableau-question-6e8fe6e8371b&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-tricky-tableau-question-6e8fe6e8371b&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-tricky-tableau-question-6e8fe6e8371b&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-tricky-tableau-question-6e8fe6e8371b&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----6e8fe6e8371b--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----6e8fe6e8371b--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@juliantagell?source=post_page-----6e8fe6e8371b--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@juliantagell?source=post_page-----6e8fe6e8371b--------------------------------", "anchor_text": "Julian Tagell"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F22b532482f5b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-tricky-tableau-question-6e8fe6e8371b&user=Julian+Tagell&userId=22b532482f5b&source=post_page-22b532482f5b----6e8fe6e8371b---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F6e8fe6e8371b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-tricky-tableau-question-6e8fe6e8371b&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F6e8fe6e8371b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-tricky-tableau-question-6e8fe6e8371b&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@mparzuchowski?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Micha\u0142 Parzuchowski"}, {"url": "https://unsplash.com/s/photos/jenga-kid?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Unsplash"}, {"url": "https://www.airtasker.com/", "anchor_text": "Airtasker"}, {"url": "https://gist.github.com/Tadge-Analytics/58a49896a5648175f95b3b61af67f653", "anchor_text": "using R (see the gist here)"}, {"url": "https://www.dropbox.com/s/8ji31cxqpxouygk/example%20data.xlsx?dl=1", "anchor_text": "here"}, {"url": "https://public.tableau.com/profile/klaus.schulte#!/vizhome/SynchronizedScrollingacrosssheetsinTableau2019_2/SynchronizedScrollingacrosssheets", "anchor_text": "Tableau PublicEdit descriptionpublic.tableau.com"}, {"url": "https://youtu.be/tpYUfR6wkC4", "anchor_text": "this Youtube Video"}, {"url": "https://public.tableau.com/views/Book1_15941833680570/Dashboard1?:language=en&:display_count=y&:origin=viz_share_link", "anchor_text": "https://public.tableau.com/views/Book1_15941833680570/Dashboard1?:language=en&:display_count=y&:origin=viz_share_link"}, {"url": "https://tadge-analytics.com.au/a-tricky-tableau-question/", "anchor_text": "https://tadge-analytics.com.au"}, {"url": "https://medium.com/tag/tableau?source=post_page-----6e8fe6e8371b---------------tableau-----------------", "anchor_text": "Tableau"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F6e8fe6e8371b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-tricky-tableau-question-6e8fe6e8371b&user=Julian+Tagell&userId=22b532482f5b&source=-----6e8fe6e8371b---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F6e8fe6e8371b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-tricky-tableau-question-6e8fe6e8371b&user=Julian+Tagell&userId=22b532482f5b&source=-----6e8fe6e8371b---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F6e8fe6e8371b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-tricky-tableau-question-6e8fe6e8371b&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----6e8fe6e8371b--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F6e8fe6e8371b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-tricky-tableau-question-6e8fe6e8371b&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----6e8fe6e8371b---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----6e8fe6e8371b--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----6e8fe6e8371b--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----6e8fe6e8371b--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----6e8fe6e8371b--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----6e8fe6e8371b--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----6e8fe6e8371b--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----6e8fe6e8371b--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----6e8fe6e8371b--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@juliantagell?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@juliantagell?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Julian Tagell"}, {"url": "https://medium.com/@juliantagell/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "114 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F22b532482f5b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-tricky-tableau-question-6e8fe6e8371b&user=Julian+Tagell&userId=22b532482f5b&source=post_page-22b532482f5b--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fcb55789f1216&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-tricky-tableau-question-6e8fe6e8371b&newsletterV3=22b532482f5b&newsletterV3Id=cb55789f1216&user=Julian+Tagell&userId=22b532482f5b&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}