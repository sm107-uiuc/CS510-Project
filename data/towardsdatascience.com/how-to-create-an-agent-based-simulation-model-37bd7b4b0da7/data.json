{"url": "https://towardsdatascience.com/how-to-create-an-agent-based-simulation-model-37bd7b4b0da7", "time": 1683015710.086189, "path": "towardsdatascience.com/how-to-create-an-agent-based-simulation-model-37bd7b4b0da7/", "webpage": {"metadata": {"title": "Creating an agent based model of Snowpiercer | Towards Data Science", "h1": "How to create an agent-based simulation model", "description": "How to create an agent based simulation model (of the Snowpiercer TV series) to model a complex system containing many individuals operating autonomously"}, "outgoing_paragraph_urls": [{"url": "https://en.wikipedia.org/wiki/Agent-based_model", "anchor_text": "agent-based model", "paragraph_index": 0}, {"url": "https://en.wikipedia.org/wiki/Conway%27s_Game_of_Life", "anchor_text": "Conway\u2019s Game of Life", "paragraph_index": 0}, {"url": "https://en.wikipedia.org/wiki/John_Horton_Conway", "anchor_text": "John Horton Conway", "paragraph_index": 0}, {"url": "https://en.wikipedia.org/wiki/Snowpiercer_(TV_series)", "anchor_text": "Snowpiercer", "paragraph_index": 2}, {"url": "https://hash.ai/", "anchor_text": "HASH", "paragraph_index": 9}, {"url": "https://www.kaggle.com/", "anchor_text": "Kaggle", "paragraph_index": 9}, {"url": "https://stackoverflow.com/", "anchor_text": "StackOverflow", "paragraph_index": 9}, {"url": "http://linkedin.com/in/gmorinan/", "anchor_text": "linkedin.com/in/gmorinan/", "paragraph_index": 31}], "all_paragraphs": ["Need to simulate a complex system, containing many individuals operating autonomously? Then an agent-based model may be just what you need! You have probably heard of Conway\u2019s Game of Life, one of the earliest examples of such a model, created by legendary mathematician John Horton Conway.", "To build such a model we need three things, each of which will the explained in this article:", "I recently watched the Snowpiercer TV series; a dystopian sci-fi where the last remnants of humanity survive on a single train, divided into separate classes. This series raised many philosophical questions, which I thought were best answered by building an agent based simulation model.", "To build a simulation model of a train society, the first thing we need are parameters; how big is the train, how many agents/passengers are there, and how are they distributed across the train? To answer to these questions, and set the inputs for our model, I looked to the information that I could glean from the TV series.", "There are 3000 passengers on the train, split across four classes: first, second, third, and \u2018the tail\u2019 (the stowaways). We are told there are 400 are in the tail and 1700 in third class. We aren\u2019t told the split between first and second class, so I am left to make a guess that it is 250/650.", "To make the numbers easier to deal with, our model will have 1 agent represent 10 passengers, and likewise with train carriages.", "We are told there are 1001 carriages and that a large number of these are used to grow crops or raise livestock. Without any further information I am left to guess that only around half of the carriages are used for human habitation, and the remaining carriages are split 6/9/14/1 between the classes first/second/third/tail.", "Although agents will be able to move between carriages, these initial values we input into the model will mean that some carriages are more crowded than others (e.g. the tail will be much more crowded than first class).", "The purpose of a model is to run experiments. Given the main theme of Snowpiercer is about class divide, we will run two scenarios; either the train is divided into four classes as specified above, or we have one single class of all passengers divided equally among the carriages.", "I\u2019m quite busy, I don\u2019t really have time to build from scratch the code required to run an agent based simulation model. Luckily others have already done that for me, those others being the people at HASH, who\u2019ve built a platform that provides all of the underlying agent mechanics we need. Plus their backers include founders of Kaggle and StackOverflow, which is reassuring.", "The HASH framework provides the basic building blocks of all agent mechanics; how they are created or removed, how they interact by sending messages to each other, and an easy way to attach your own custom behaviours to agents (using Python or Javascript). Plus it has a nifty 3D visualisation of the simulations as they run (as seen at the top of this article)!", "HASH projects are like git repositories, so they are easy to fork or share. For instance, you can run my simulation yourself by clicking the link below (but to understand the code you might want to finish reading this article first).", "Though as great as this framework is, we still have to code the specifics of the model ourselves, and that code is contained within these 14 project files:", "So let\u2019s get into the detail of the globals and behaviour files that are central to how the simulation runs\u2026", "A key theme to Snowpiercer is disparity of resources, where a key resource is space. To investigate this we will model passenger mood, whereby the mood of a passenger will tend to decrease if they have limited space, i.e. if the train carriage they are in is overcrowded.", "To explain this let us start by looking at the global inputs. First we have \u2018topology\u2019, this is a special keyword that HASH will automatically translate into the area that the simulation takes place in, and the search radius that agents use to determine who their neighbours are.", "Next the \u2018setup\u2019 inputs are those used by the two behaviours we run at the start of the simulation, with most of these consisting of four element lists corresponding to the four classes on the train. For example \u2018class_numbers\u2019 tells the model we want 40 agents in the tail, 170 in third class, and so on. While \u2018car_ids\u2019 and \u2018wall_ids\u2019 tell the model which numbers in the \u2018blueprint\u2019 translate to train cars and walls for which classes.", "Lastly the \u2018attr\u2019 inputs determine the agent mechanics. The color of agents ranges from red-yellow, depending on how happy they are. While the three mood values are universal constants; \u2018mood_incr\u2019 controls how mood decreases when there is overcrowding, \u2018mood_baseline\u2019 controls how mood increases if there is no overcrowding, and \u2018mood_edge\u2019 controls the minimum randomness each iteration.", "To put these globals into context let\u2019s look at the behaviour scripts, starting with \u2018create_passengers.py\u2019, which is run in the first iteration only. This script does the following; retrieves input variables from globals.json, uses the train blueprint to determine which positions belong to which train cars, then places agents into random spaces within the appropriate train cars, while also assigning them a random starting mood (and corresponding color) using a triangular distribution. Finally it sends a \u201ccreate_agent\u201d message to the special \u201cHASH\u201d agent that controls the simulation, and just like that we\u2019ve created our passengers.", "Once you understand this script, it is trivial to understand \u2018create_walls.py\u2019, which creates static dummy agents that serve only to block the movement of passengers.", "Now the setup is out the way, let us look at the behaviours that control how agents operate each iteration; \u2018move.py\u2019 will run on every passenger each iteration. The \u2018state\u2019 input to this function is the state of the passenger it is running, in this case we use it to get the xy co-ordinates of the agent to calculate all possible moves it could make. The passenger looks to see if there are any walls nearby, and adjusts the possible moves accordingly to avoid ending in a wall, then randomly selects a move from the remaining options.", "The \u2018proximity.py\u2019 behaviour demonstrates the messaging mechanic that is built into HASH. If the passenger is near to more than 1 other passenger, it will send a message to all of them complaining about overcrowding, these messages feed into the next behaviour\u2026", "Finally \u2018update_mood.py\u2019 is where the math happens. The passenger checks how many complaint messages it has. Then, using the globals that determine mood, it creates a triangular distribution from which to randomly select a new mood. The more overcrowding there is the greater the chance of mood decreasing. Although the \u2018mood_edge\u2019 global means there is a small chance the mood will go up even if the passenger is overcrowded, and vice versa.", "So now we understand the code, let us look at the results\u2026", "We run the two scenarios outlined above (four classes or one class), each for 365 iterations, summarising the results in the animated histograms below. In both cases passenger mood starts as a unimodal distribution, around 0.5, but after a few days becomes bimodal with clusters at both 0 and 1.", "What do we conclude from this? While animated graphics look nice, sometimes a simple timeseries gives a clearer indication of a result. Below we can see that average mood is higher under the one class scenario. This is largely because, under the four class scenario, the mood of the passengers in \u2018the tail\u2019 plummets quickly because there is so much overcrowding.", "We need to bear in mind agent based simulations are stochastic processes, these results are for just 1 run of the model. Before coming to any firm conclusions one should run a simulation model many times and look at the results for all runs together.", "One should also perform some sensitivity analysis on the global inputs. For instance in this model, doubling the \u2018mood_incr\u2019 constant will give a very different result.", "A model is only as informative as its assumptions are accurate.", "Don\u2019t believe me? Try running it yourself with any inputs you like:", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Using statistics to solve problems. Chief Scientific Officer at Machine Medicine Technologies. linkedin.com/in/gmorinan/"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F37bd7b4b0da7&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-create-an-agent-based-simulation-model-37bd7b4b0da7&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-create-an-agent-based-simulation-model-37bd7b4b0da7&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-create-an-agent-based-simulation-model-37bd7b4b0da7&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-create-an-agent-based-simulation-model-37bd7b4b0da7&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----37bd7b4b0da7--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----37bd7b4b0da7--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@g.morinan?source=post_page-----37bd7b4b0da7--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@g.morinan?source=post_page-----37bd7b4b0da7--------------------------------", "anchor_text": "Gareth Morinan"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fd5d317d0043e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-create-an-agent-based-simulation-model-37bd7b4b0da7&user=Gareth+Morinan&userId=d5d317d0043e&source=post_page-d5d317d0043e----37bd7b4b0da7---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F37bd7b4b0da7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-create-an-agent-based-simulation-model-37bd7b4b0da7&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F37bd7b4b0da7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-create-an-agent-based-simulation-model-37bd7b4b0da7&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "http://hash.ai/", "anchor_text": "HASH"}, {"url": "https://en.wikipedia.org/wiki/Agent-based_model", "anchor_text": "agent-based model"}, {"url": "https://en.wikipedia.org/wiki/Conway%27s_Game_of_Life", "anchor_text": "Conway\u2019s Game of Life"}, {"url": "https://en.wikipedia.org/wiki/John_Horton_Conway", "anchor_text": "John Horton Conway"}, {"url": "https://en.wikipedia.org/wiki/Snowpiercer_(TV_series)", "anchor_text": "Snowpiercer"}, {"url": "http://hash.ai/", "anchor_text": "HASH"}, {"url": "https://hash.ai/", "anchor_text": "HASH"}, {"url": "https://www.kaggle.com/", "anchor_text": "Kaggle"}, {"url": "https://stackoverflow.com/", "anchor_text": "StackOverflow"}, {"url": "https://hash.ai/@gmorinan/snowpiercer", "anchor_text": "Snowpiercer - HASHThis is an agent based simulation model of a society living entirely within one train. The concept and hyperparameters\u2026hash.ai"}, {"url": "https://hash.ai/@gmorinan/snowpiercer", "anchor_text": "Snowpiercer - HASHThis is an agent based simulation model of a society living entirely within one train. The concept and hyperparameters\u2026hash.ai"}, {"url": "https://medium.com/tag/snowpiercer?source=post_page-----37bd7b4b0da7---------------snowpiercer-----------------", "anchor_text": "Snowpiercer"}, {"url": "https://medium.com/tag/agent-based-modeling?source=post_page-----37bd7b4b0da7---------------agent_based_modeling-----------------", "anchor_text": "Agent Based Modeling"}, {"url": "https://medium.com/tag/simulation?source=post_page-----37bd7b4b0da7---------------simulation-----------------", "anchor_text": "Simulation"}, {"url": "https://medium.com/tag/agent-based-model?source=post_page-----37bd7b4b0da7---------------agent_based_model-----------------", "anchor_text": "Agent Based Model"}, {"url": "https://medium.com/tag/stochastic-modelling?source=post_page-----37bd7b4b0da7---------------stochastic_modelling-----------------", "anchor_text": "Stochastic Modelling"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F37bd7b4b0da7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-create-an-agent-based-simulation-model-37bd7b4b0da7&user=Gareth+Morinan&userId=d5d317d0043e&source=-----37bd7b4b0da7---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F37bd7b4b0da7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-create-an-agent-based-simulation-model-37bd7b4b0da7&user=Gareth+Morinan&userId=d5d317d0043e&source=-----37bd7b4b0da7---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F37bd7b4b0da7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-create-an-agent-based-simulation-model-37bd7b4b0da7&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----37bd7b4b0da7--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F37bd7b4b0da7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-create-an-agent-based-simulation-model-37bd7b4b0da7&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----37bd7b4b0da7---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----37bd7b4b0da7--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----37bd7b4b0da7--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----37bd7b4b0da7--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----37bd7b4b0da7--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----37bd7b4b0da7--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----37bd7b4b0da7--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----37bd7b4b0da7--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----37bd7b4b0da7--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@g.morinan?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@g.morinan?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Gareth Morinan"}, {"url": "https://medium.com/@g.morinan/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "52 Followers"}, {"url": "http://linkedin.com/in/gmorinan/", "anchor_text": "linkedin.com/in/gmorinan/"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fd5d317d0043e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-create-an-agent-based-simulation-model-37bd7b4b0da7&user=Gareth+Morinan&userId=d5d317d0043e&source=post_page-d5d317d0043e--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Faed0d711b77c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-create-an-agent-based-simulation-model-37bd7b4b0da7&newsletterV3=d5d317d0043e&newsletterV3Id=aed0d711b77c&user=Gareth+Morinan&userId=d5d317d0043e&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}