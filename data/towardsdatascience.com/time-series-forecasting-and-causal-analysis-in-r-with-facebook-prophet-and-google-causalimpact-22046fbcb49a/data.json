{"url": "https://towardsdatascience.com/time-series-forecasting-and-causal-analysis-in-r-with-facebook-prophet-and-google-causalimpact-22046fbcb49a", "time": 1683013654.364652, "path": "towardsdatascience.com/time-series-forecasting-and-causal-analysis-in-r-with-facebook-prophet-and-google-causalimpact-22046fbcb49a/", "webpage": {"metadata": {"title": "Time-Series Forecasting and Causal Analysis in R with Facebook Prophet and Google CausalImpact | by Jean-Michel D | Towards Data Science", "h1": "Time-Series Forecasting and Causal Analysis in R with Facebook Prophet and Google CausalImpact", "description": "This article will be part of my annual dive in R; the idea will be to use two R libraries in time-series forecasting and causal inference. I wanted to write an article for a long time, but I never\u2026"}, "outgoing_paragraph_urls": [{"url": "https://github.com/jeanmidevacc/crimes_montreal", "anchor_text": "repository Github", "paragraph_index": 3}, {"url": "http://donnees.ville.montreal.qc.ca/dataset/actes-criminels", "anchor_text": "here", "paragraph_index": 4}, {"url": "https://donnees.montreal.ca/notre-demarche", "anchor_text": "description on the website", "paragraph_index": 4}, {"url": "https://donnees.montreal.ca/licence-d-utilisation", "anchor_text": "Licence Creative Commons CC-BY 4.0", "paragraph_index": 4}, {"url": "https://peerj.com/preprints/3190/", "anchor_text": "article", "paragraph_index": 12}, {"url": "https://facebook.github.io/prophet/docs/quick_start.html", "anchor_text": "quick start documentation", "paragraph_index": 13}, {"url": "https://storage.googleapis.com/pub-tools-public-publication-data/pdf/41854.pdf", "anchor_text": "article", "paragraph_index": 19}, {"url": "https://power.larc.nasa.gov/", "anchor_text": "NASA power", "paragraph_index": 22}, {"url": "https://github.com/jeanmidevacc/crimes_montreal", "anchor_text": "repository Github", "paragraph_index": 31}], "all_paragraphs": ["This article will be part of my annual dive in R; the idea will be to use two R libraries in time-series forecasting and causal inference.", "I wanted to write an article for a long time, but I never found the time/resources to do it mostly because I was missing a real dataset to do it but guess what year 2020 came to my rescue. During this COVID / lockdown, most of this event\u2019s impact is negative in our society from the economic mortality perspective. Still, I was thinking during Montreal\u2019s lockdown; there is maybe some positive impacts in the population that are not related to the virus spread (more than people baking for example). My research leads me on multiple datasets, but the one that catches my eyes was Montreal\u2019s criminality .", "The idea of this article will be to:", "All the code for this article can be found in this repository Github .", "The dataset used for this experiment is here (sorry English speaker, the data is pretty open from the description on the website, under the license Licence Creative Commons CC-BY 4.0); it\u2019s a list of all the crimes between 2015 and August 2020. Each crime is associated in big categories, and there is information on the location, the moment of the day etc.", "Quickly there is a representation of the number of crimes per day in Montreal.", "The time series is kind of noisy, but we can notice some sort of trends on the signal, a decreasing signal over time, and it\u2019s more evident with the weekly vision.", "From this view, it doesn\u2019t seem that there is a seasonality on Montreal\u2019s crimes (like more crimes in summer than winter).", "The categories of crimes on the dataset are:", "There is a subplot on the different kinds of crimes evolution over time.", "No real seasonal impact on the different categories, but it is noticeable that the yearly decrease seems produced by the theft in/on vehicle, mischief and break-in.", "For the next steps of the article, a focus will be on the weekly crimes to facilitate the analysis.", "The project Facebook prophet was developed by Facebook and published in 2017; the article contains all the details on the model design but mainly what it should know:", "You can use the library with python or R, and the quick start documentation is easy to use. In terms of setup, you need to format a little bit of the input data (name of the column, format), but it\u2019s simple. As a reminder, the goal is to build a forecast system for the year 2019 of Montreal\u2019s weekly crimes based on the data between 2015 and 2018.", "There is the forecast proposed by the model built on Prophet.", "The forecast doesn\u2019t look so bad, and it caught the long term decreased. The model is offering a low and high projection of the signal. From the model, each component mentioned previously can be accessible; for example, there is the trend component or the seasonality.", "With Prophet, there is the ability to add external factors like a holiday of specific events that could affect the signal, and that\u2019s relatively easy to do.", "In the paper of Prophet, the model is described as a forecast system for analysts, that maybe doesn\u2019t have time to go through the model designed and can quickly build a forecast system and adding external features without thinking to the parameter of the model.", "Time to go a little bit further with the CausalImpact package of Google.", "This is a project of 2015 developed by Google; there is the article that is giving more details on the library, but I will highly recommend having a look at this talk of Kay Brodersen (one of the authors of the package) that is so clear that building an explanation on top of that will be a waste of time.", "What is important to retain is that this package offers the abilities to", "As mentioned in the introduction, let\u2019s evaluate the impact of Montreal\u2019s lockdown on criminality with this package. This analysis\u2019s protocol is quite simple; first, I trained a model with the data. To do the training, we need to have features that are not correlated with criminality (for example, having the number of arrests sounds like a bad idea).", "I decided to use Montreal\u2019s weather (designed by the average weekly temperature/precipitation with their weekly variance) because it doesn\u2019t seem connected to the criminality. For info, there is an exciting resource from NASA called NASA power (These data were obtained from the NASA Langley Research Center POWER Project funded through the NASA Earth Science Directorate Applied Science Program, the data seems really open) storing daily weather information (thanks @juliettetroadec for the help). There is a plot of the average value for temperature and precipitation over time.", "There is a visualization of the forecast system for the lockdown period (starting with the black vertical line).", "The package offers the ability to analyze the result of the forecast versus the reality, in this case, between the 15/3/2020 to 15/6/2020 and to summarize the comparison in a report.", "From this report, it\u2019s interesting to extract:", "I decided to extend the analysis to all the crimes, and there is the result.", "The lockdown seems to positively impact the decrease of mischief, robbery, break-in, and theft on the vehicle, but the lockdown had no impact on vehicle theft and death crime, so there is at least some good on this lockdown. To conclude, I just decided to compare the prediction of the Prophet model and the CausalImpact model.", "The CausalImpact offers a broader range forecast of the prediction in comparison to the Prophet one.", "More seriously, I think what is right to retain is that", "I was entertaining to do this project, and I think that I will do in the future another article on the subject of time-series forecast but more from the evaluation perspective with various models (like ARIMA or LSTM, for example).", "All the code for this article can be found in this repository Github .", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Data scientist at @ubisoftMtl (Worked for @edfenergy, @cea_officiel, @cstb_fr) My opinion are my own (and I have always an opinion because I am French)"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F22046fbcb49a&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftime-series-forecasting-and-causal-analysis-in-r-with-facebook-prophet-and-google-causalimpact-22046fbcb49a&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftime-series-forecasting-and-causal-analysis-in-r-with-facebook-prophet-and-google-causalimpact-22046fbcb49a&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftime-series-forecasting-and-causal-analysis-in-r-with-facebook-prophet-and-google-causalimpact-22046fbcb49a&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftime-series-forecasting-and-causal-analysis-in-r-with-facebook-prophet-and-google-causalimpact-22046fbcb49a&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----22046fbcb49a--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----22046fbcb49a--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@boitemailjeanmid?source=post_page-----22046fbcb49a--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@boitemailjeanmid?source=post_page-----22046fbcb49a--------------------------------", "anchor_text": "Jean-Michel D"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fc607131f9cd3&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftime-series-forecasting-and-causal-analysis-in-r-with-facebook-prophet-and-google-causalimpact-22046fbcb49a&user=Jean-Michel+D&userId=c607131f9cd3&source=post_page-c607131f9cd3----22046fbcb49a---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F22046fbcb49a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftime-series-forecasting-and-causal-analysis-in-r-with-facebook-prophet-and-google-causalimpact-22046fbcb49a&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F22046fbcb49a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftime-series-forecasting-and-causal-analysis-in-r-with-facebook-prophet-and-google-causalimpact-22046fbcb49a&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://github.com/jeanmidevacc/crimes_montreal", "anchor_text": "repository Github"}, {"url": "http://donnees.ville.montreal.qc.ca/dataset/actes-criminels", "anchor_text": "here"}, {"url": "https://donnees.montreal.ca/notre-demarche", "anchor_text": "description on the website"}, {"url": "https://donnees.montreal.ca/licence-d-utilisation", "anchor_text": "Licence Creative Commons CC-BY 4.0"}, {"url": "https://peerj.com/preprints/3190/", "anchor_text": "article"}, {"url": "https://en.wikipedia.org/wiki/Generalized_additive_model", "anchor_text": "GAM"}, {"url": "https://facebook.github.io/prophet/docs/quick_start.html", "anchor_text": "quick start documentation"}, {"url": "https://storage.googleapis.com/pub-tools-public-publication-data/pdf/41854.pdf", "anchor_text": "article"}, {"url": "https://power.larc.nasa.gov/", "anchor_text": "NASA power"}, {"url": "https://github.com/dafiti/causalimpact", "anchor_text": "python implementation"}, {"url": "https://github.com/microsoft/dowhy", "anchor_text": "Dowhy"}, {"url": "https://github.com/jeanmidevacc/crimes_montreal", "anchor_text": "repository Github"}, {"url": "https://www.the-odd-dataguy.com/2020/09/09/timeseries-forecasting-and-causal-analysis-in-r-with-facebook-prophet-and-google-causalimpact/", "anchor_text": "https://www.the-odd-dataguy.com"}, {"url": "https://medium.com/tag/data-science?source=post_page-----22046fbcb49a---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/time-series-forecasting?source=post_page-----22046fbcb49a---------------time_series_forecasting-----------------", "anchor_text": "Time Series Forecasting"}, {"url": "https://medium.com/tag/time-series-analysis?source=post_page-----22046fbcb49a---------------time_series_analysis-----------------", "anchor_text": "Time Series Analysis"}, {"url": "https://medium.com/tag/causal-inference?source=post_page-----22046fbcb49a---------------causal_inference-----------------", "anchor_text": "Causal Inference"}, {"url": "https://medium.com/tag/causality?source=post_page-----22046fbcb49a---------------causality-----------------", "anchor_text": "Causality"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F22046fbcb49a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftime-series-forecasting-and-causal-analysis-in-r-with-facebook-prophet-and-google-causalimpact-22046fbcb49a&user=Jean-Michel+D&userId=c607131f9cd3&source=-----22046fbcb49a---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F22046fbcb49a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftime-series-forecasting-and-causal-analysis-in-r-with-facebook-prophet-and-google-causalimpact-22046fbcb49a&user=Jean-Michel+D&userId=c607131f9cd3&source=-----22046fbcb49a---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F22046fbcb49a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftime-series-forecasting-and-causal-analysis-in-r-with-facebook-prophet-and-google-causalimpact-22046fbcb49a&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----22046fbcb49a--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F22046fbcb49a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftime-series-forecasting-and-causal-analysis-in-r-with-facebook-prophet-and-google-causalimpact-22046fbcb49a&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----22046fbcb49a---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----22046fbcb49a--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----22046fbcb49a--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----22046fbcb49a--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----22046fbcb49a--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----22046fbcb49a--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----22046fbcb49a--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----22046fbcb49a--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----22046fbcb49a--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@boitemailjeanmid?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@boitemailjeanmid?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Jean-Michel D"}, {"url": "https://medium.com/@boitemailjeanmid/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "226 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fc607131f9cd3&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftime-series-forecasting-and-causal-analysis-in-r-with-facebook-prophet-and-google-causalimpact-22046fbcb49a&user=Jean-Michel+D&userId=c607131f9cd3&source=post_page-c607131f9cd3--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F5b424bd1598&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftime-series-forecasting-and-causal-analysis-in-r-with-facebook-prophet-and-google-causalimpact-22046fbcb49a&newsletterV3=c607131f9cd3&newsletterV3Id=5b424bd1598&user=Jean-Michel+D&userId=c607131f9cd3&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}