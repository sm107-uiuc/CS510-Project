{"url": "https://towardsdatascience.com/autocorrect-in-google-amazon-and-pinterest-and-how-to-write-your-own-one-6d23bc927c81", "time": 1683003668.8533602, "path": "towardsdatascience.com/autocorrect-in-google-amazon-and-pinterest-and-how-to-write-your-own-one-6d23bc927c81/", "webpage": {"metadata": {"title": "Autocorrect in Google, Amazon and Pinterest and how to write your own one | by Gregdevogo | Towards Data Science", "h1": "Autocorrect in Google, Amazon and Pinterest and how to write your own one", "description": "What is spell correction, how it works in Google, Amazon and Pinterest and how to make your own using custom search engine Manticore Search."}, "outgoing_paragraph_urls": [{"url": "http://twitter.com/gregdevogo", "anchor_text": "twitter.com/gregdevogo", "paragraph_index": 34}], "all_paragraphs": ["and so on is a software functionality that suggests you alternatives to or makes automatic corrections of the text you have typed in.", "The concept of correcting typed text dates back to the 1960s, says Brad Myers, a professor of interface design at Carnegie Mellon University. This\u2019s when a computer scientist named Warren Teitelman who also invented the \u201cundo\u201d command came up with a philosophy of computing called D.W.I.M., or \u201cDo What I Mean.\u201d Rather than programming computers to accept only perfectly formatted instructions, Teitelman said we should program them to recognize obvious mistakes.", "The first well known product which provided spell correction functionality was Microsoft Word 6.0 released in 1993.", "Nowadays people can\u2019t imagine their real life without messaging, searching, browsing and using different business applications: text editors, content management systems (CMS), customer relationship management systems (CRM) and others. And in all of them people do typing mistakes, forget proper spelling of words, sometimes are wrong with grammar and so on. This is absolutely fine, everybody makes mistakes. What a good software does is helping you fix those mistakes the easiest and most efficient way. There are many approaches how it can do that: both from how it looks for a user and what value it brings and how it\u2019s made under the hood.", "In this article we will focus specifically on search systems as for them it\u2019s especially important to correct your search query before (or while) it\u2019s processed since otherwise your search results may be absolutely wrong.", "In terms of user experience we can split the approaches into 2 groups:", "In most cases these approaches are combined so a system tries to correct you as you type and if it thinks there\u2019s still some issue \u2014 suggests you a correction after you get the search results.", "Let me demonstrate you with pictures how different popular sites use the aforementioned techniques.", "Google as the site #1 in the Internet does everything: autocorrect, autocomplete, suggestions, mistake highlighting and \u201cdid you mean\u201d. Google uses a prediction service to help complete searches and even URLs typed in the address bar: These suggestions or predictions (as Google names that) are based on related web searches, your browsing history, and Google\u2019s websites ranking.", "Amazon uses eCommerce oriented search algorithm called A9. What differs it from Google\u2019s algorithm is that it puts a strong emphasis on sales conversions.", "In terms of Amazon\u2019s autocorrect implementation it consists of all the previously mentioned components, but since it\u2019s a marketplace its suggestions ranking formula seems to include the factor of how attractive a suggestion can be to you in terms of sales.", "Pinterest also has its own algorithm based on internal domain/pins/pinners relevance.", "Let\u2019s now think about how spell correction can be done. There are few ways, but the important thing is that there is no purely programmatic way which will convert your mistyped \u201cipone\u201d into \u201ciphone\u201d (at least with decent quality). Mostly there has to be a data set the system is based on. The data set can be:", "But it might still make sense for smaller data collections as then there\u2019s a higher chance the search query will be corrected at all", "But if I change it to \u201cdark ber\u201d it understands I mean beer:", "The context may be not just a neighbour word in your query, but your location, date of time, current sentence\u2019s grammar (to let\u2019s say change \u201cthere\u201d to \u201ctheir\u201d or not), your search history and virtually any other things that can affect your intent.", "For all the approaches can be used different algorithms of searching and evaluation of candidate spell corrections:", "Looking at how fast AI, machine learning and semantic search have been evolving lately I believe in this decade the landscape of spell correction techniques may change dramatically, but for now the above approaches seem to be most used. And most solutions are based on your existing data collection and the dictionary made up from it.", "Here I will describe a part of my own experience with making a website search with help of Manticore Search. I discovered this product about a year ago while working on some clients projects and I\u2019m still using it in few of my projects due to its lightweight and fast search with a lot of out of the box functions.", "Let\u2019s now speak about what tools you can use to add the autocorrect functionality to your system and at the same time go a little bit deeper into understanding how at least simpler techniques work.", "To do that we will take one of popular custom search engines as they often provide the functionality we\u2019re looking for. I like Manticore Search as in contrast to more known Elasticsearch, it is much more lightweight, easier to deal with as it\u2019s SQL-native and works faster in most cases. It\u2019s so SQL native that you can even connect to it with a standard MySQL client. They provide an official docker image, so I\u2019ll use that to demonstrate how autocorrect works in Manticore Search:", "And inside the container I\u2019ll run mysql to connect to the Manticore Search server running there:", "It ships with 2 test tables that we can use for a quick play with spell correction:", "Let\u2019s check the schema of testrt:", "and insert few documents into it. Let it be movie titles:", "We can now see all our documents in the index:", "What has just happened: when we inserted the titles not just Manticore Search saved them as is, but it made a lot of things essential for natural language processing (NLP): tokenization (to split the titles into words), normalization (to lowercase everything) and many other things, but there was one important for us which is that it has split the words into trigrams they consist from. For example \u201cCombat!\u201d (or actually \u201ccombat\u201d after normalization) was split into \u201ccom\u201d, \u201comb\u201d, \u201cmba\u201d, \u201cbat\u201d. So why is that important?", "To answer that let\u2019s assume we make a mistype in \u201ccombat\u201d and type \u201ccomabt\u201d instead. If we now want \u201ccombat\u201d to be found how would we do that? The options are:", "So in this case what\u2019s done internally is that Manticore Search first splits \u201ccomabt\u201d into infixes: \u201ccom\u201d, \u201coma\u201d, \u201cmab\u201d and \u201cabt\u201d and then finds the corresponding words in the dictionary as when the document was inserted it also did the same. Since the complexity of this algorithm is not very high (much lower than comparing each word with each other) Manticore quickly finds that there\u2019s a word \u201ccombat\u201d which also has \u201ccom\u201d and it\u2019s the only candidate word. So all it has to do after that is to make sure the candidate word doesn\u2019t differ very much from the given word. It calculates the Levensthein distance, figures it\u2019s not greater than the limit (4 by default) and returns the candidate:", "In other cases, there may be more candidates. For example if you search for \u201ccombat\u201d there is one word in the dictionary which exactly matches your query (the Levenshtein distance is 0), but there\u2019s another which you might mean and CALL SUGGEST returns it too:", "If you enter 2 words CALL QSUGGEST only process your last one:", "So how do I use this functionality in my application?\u201d you may ask. It\u2019s quite simple. Just:", "Here\u2019s the log of what it would give in the case of our dataset, note the input (after \u201ccall qsuggest\u201d) and the output (in column \u201csuggest\u201d):", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Trying to balance between madness, creativity and procrastination twitter.com/gregdevogo"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F6d23bc927c81&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautocorrect-in-google-amazon-and-pinterest-and-how-to-write-your-own-one-6d23bc927c81&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautocorrect-in-google-amazon-and-pinterest-and-how-to-write-your-own-one-6d23bc927c81&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautocorrect-in-google-amazon-and-pinterest-and-how-to-write-your-own-one-6d23bc927c81&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautocorrect-in-google-amazon-and-pinterest-and-how-to-write-your-own-one-6d23bc927c81&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----6d23bc927c81--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----6d23bc927c81--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@gregdevogo?source=post_page-----6d23bc927c81--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@gregdevogo?source=post_page-----6d23bc927c81--------------------------------", "anchor_text": "Gregdevogo"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fd6c2a47c701a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautocorrect-in-google-amazon-and-pinterest-and-how-to-write-your-own-one-6d23bc927c81&user=Gregdevogo&userId=d6c2a47c701a&source=post_page-d6c2a47c701a----6d23bc927c81---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F6d23bc927c81&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautocorrect-in-google-amazon-and-pinterest-and-how-to-write-your-own-one-6d23bc927c81&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F6d23bc927c81&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautocorrect-in-google-amazon-and-pinterest-and-how-to-write-your-own-one-6d23bc927c81&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://patents.google.com/patent/US6618697B1/en", "anchor_text": "https://patents.google.com/patent/US6618697B1/en"}, {"url": "https://fulmicoton.com/posts/levenshtein/", "anchor_text": "of different kinds"}, {"url": "https://codeascraft.com/2017/05/01/modeling-spelling-correction-for-search-at-etsy/", "anchor_text": "Etsy utilize on a basis of previous search queries"}, {"url": "https://en.wikipedia.org/wiki/Levenshtein_distance#Computing_Levenshtein_distance", "anchor_text": "few ways"}, {"url": "https://play.manticoresearch.com/didyoumean/", "anchor_text": "Did you mean?Did you mean? Besides autocomplete feature, for which we covered a simple example in this course\u2026play.manticoresearch.com"}, {"url": "https://medium.com/tag/elasticsearch?source=post_page-----6d23bc927c81---------------elasticsearch-----------------", "anchor_text": "Elasticsearch"}, {"url": "https://medium.com/tag/search?source=post_page-----6d23bc927c81---------------search-----------------", "anchor_text": "Search"}, {"url": "https://medium.com/tag/search-engines?source=post_page-----6d23bc927c81---------------search_engines-----------------", "anchor_text": "Search Engines"}, {"url": "https://medium.com/tag/autocomplete?source=post_page-----6d23bc927c81---------------autocomplete-----------------", "anchor_text": "Autocomplete"}, {"url": "https://medium.com/tag/spelling?source=post_page-----6d23bc927c81---------------spelling-----------------", "anchor_text": "Spelling"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F6d23bc927c81&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautocorrect-in-google-amazon-and-pinterest-and-how-to-write-your-own-one-6d23bc927c81&user=Gregdevogo&userId=d6c2a47c701a&source=-----6d23bc927c81---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F6d23bc927c81&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautocorrect-in-google-amazon-and-pinterest-and-how-to-write-your-own-one-6d23bc927c81&user=Gregdevogo&userId=d6c2a47c701a&source=-----6d23bc927c81---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F6d23bc927c81&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautocorrect-in-google-amazon-and-pinterest-and-how-to-write-your-own-one-6d23bc927c81&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----6d23bc927c81--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F6d23bc927c81&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautocorrect-in-google-amazon-and-pinterest-and-how-to-write-your-own-one-6d23bc927c81&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----6d23bc927c81---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----6d23bc927c81--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----6d23bc927c81--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----6d23bc927c81--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----6d23bc927c81--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----6d23bc927c81--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----6d23bc927c81--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----6d23bc927c81--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----6d23bc927c81--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@gregdevogo?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@gregdevogo?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Gregdevogo"}, {"url": "https://medium.com/@gregdevogo/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "21 Followers"}, {"url": "http://twitter.com/gregdevogo", "anchor_text": "twitter.com/gregdevogo"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fd6c2a47c701a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautocorrect-in-google-amazon-and-pinterest-and-how-to-write-your-own-one-6d23bc927c81&user=Gregdevogo&userId=d6c2a47c701a&source=post_page-d6c2a47c701a--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fusers%2Fd6c2a47c701a%2Flazily-enable-writer-subscription&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautocorrect-in-google-amazon-and-pinterest-and-how-to-write-your-own-one-6d23bc927c81&user=Gregdevogo&userId=d6c2a47c701a&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}