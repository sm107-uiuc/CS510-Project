{"url": "https://towardsdatascience.com/learn-to-create-a-doodle-draw-game-on-android-f713e64408a7", "time": 1683013946.1472309, "path": "towardsdatascience.com/learn-to-create-a-doodle-draw-game-on-android-f713e64408a7/", "webpage": {"metadata": {"title": "Learn to Create a Doodle Draw Game on Android | by Qing Lan | Towards Data Science", "h1": "Learn to Create a Doodle Draw Game on Android", "description": "The objective of a doodle draw game is to race to create a drawing of a particular item, like a house or a cat, as fast as you can. While the drawing part is simple, before the advent of deep\u2026"}, "outgoing_paragraph_urls": [{"url": "https://djl.ai/website/demo.html#doodle", "anchor_text": "here", "paragraph_index": 0}, {"url": "https://github.com/aws-samples/djl-demo/tree/master/android", "anchor_text": "example project", "paragraph_index": 1}, {"url": "https://github.com/aws-samples/djl-demo/tree/master/android", "anchor_text": "example project setup", "paragraph_index": 2}, {"url": "https://medium.com/@ssaurel/learn-to-create-a-paint-application-for-android-5b16968063f8", "anchor_text": "Learn to create a Paint Application for Android", "paragraph_index": 4}, {"url": "https://developer.android.com/reference/android/graphics/Path#quadTo(float,%20float,%20float,%20float)", "anchor_text": "quadratic bezier", "paragraph_index": 12}, {"url": "https://javadoc.io/doc/ai.djl/api/latest/ai/djl/repository/zoo/Criteria.html", "anchor_text": "Criteria", "paragraph_index": 17}, {"url": "https://javadoc.io/doc/ai.djl/api/latest/ai/djl/Model.html", "anchor_text": "Model", "paragraph_index": 18}, {"url": "https://javadoc.io/doc/ai.djl/api/latest/ai/djl/inference/Predictor.html", "anchor_text": "Predictor", "paragraph_index": 18}, {"url": "https://github.com/awslabs/djl/blob/master/docs/load_model.md", "anchor_text": "How to load model", "paragraph_index": 19}, {"url": "https://javadoc.io/doc/ai.djl/api/latest/ai/djl/translate/Translator.html", "anchor_text": "Translator", "paragraph_index": 20}, {"url": "https://javadoc.io/doc/ai.djl/api/latest/ai/djl/modality/cv/translator/ImageClassificationTranslator.html", "anchor_text": "ImageClassificationTranslator", "paragraph_index": 20}, {"url": "https://javadoc.io/doc/ai.djl/api/latest/ai/djl/modality/cv/Image.html", "anchor_text": "Image", "paragraph_index": 21}, {"url": "https://javadoc.io/doc/ai.djl/api/latest/ai/djl/modality/Classifications.html", "anchor_text": "Classifications", "paragraph_index": 21}, {"url": "https://github.com/awslabs/djl/blob/master/jupyter/tutorial/image_classification_with_your_model.ipynb", "anchor_text": "Inference with your model", "paragraph_index": 21}, {"url": "https://render.githubusercontent.com/view/ipynb?commit=ca6afa7e568cd9621e128160007dcc5e9e0af488&enc_url=68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f6177736c6162732f646a6c2f636136616661376535363863643936323165313238313630303037646363356539653061663438382f6a7570797465722f7475746f7269616c2f696d6167655f636c617373696669636174696f6e5f776974685f796f75725f6d6f64656c2e6970796e62&nwo=awslabs%2Fdjl&path=jupyter%2Ftutorial%2Fimage_classification_with_your_model.ipynb&repository_id=218396611&repository_type=Repository#Inference-with-your-model", "anchor_text": "\u00b6", "paragraph_index": 21}, {"url": "https://developer.android.com/reference/android/widget/Toast", "anchor_text": "Toast", "paragraph_index": 23}, {"url": "https://github.com/aws-samples/djl-demo/tree/master/android", "anchor_text": "example project", "paragraph_index": 27}, {"url": "https://djl.ai", "anchor_text": "Deep Java Library (DJL)", "paragraph_index": 28}, {"url": "https://github.com/awslabs/djl/tree/master/docs", "anchor_text": "GitHub", "paragraph_index": 28}, {"url": "https://github.com/aws-samples/djl-demo", "anchor_text": "demo repository", "paragraph_index": 28}, {"url": "https://join.slack.com/t/deepjavalibrary/shared_invite/zt-ar91gjkz-qbXhr1l~LFGEIEeGBibT7w", "anchor_text": "Slack channel", "paragraph_index": 28}, {"url": "https://twitter.com/deepjavalibrary", "anchor_text": "twitter", "paragraph_index": 28}, {"url": "https://github.com/lanking520", "anchor_text": "https://github.com/lanking520", "paragraph_index": 30}], "all_paragraphs": ["The objective of a doodle draw game is to race to create a drawing of a particular item, like a house or a cat, as fast as you can. While the drawing part is simple, before the advent of deep learning it would have been impossible for the computer to accurately guess what you had drawn. Unlike photos, drawings also have creative styles specific to the artist that make them especially hard to understand. You can see any example of a doodle draw game here.  With the steady growth of computational power over the years, it is now possible to run a Machine Learning (ML) task at the Edge/with IoT device like this on a phone operating system, such as Android. However, Android runs on Java while most deep learning frameworks, such as TensorFlow, and PyTorch are designed for Python. To solve this challenge, we need a way to build deep learning models in Java. Deep Java Library (DJL) is a new, open source deep learning framework built by AWS that makes it easy to do deep learning in Java.", "In this tutorial, we will walk through the major steps to deploy a doodle recognition model from PyTorch on Android. Because the code base is relatively large, we will cover the most important parts you need to understand for the model to work correctly. You can access our example project to start crafting.", "This project requires Android API 26+ to use most of the DJL features. You can checkout our example project setup to save some time. The following code block lists the dependencies required by this project:", "You will use the API and PyTorch packages provided by DJL.", "Inspired by Learn to create a Paint Application for Android, we can create a View class on Android to display the result.", "As you can see in these images, you create two View objects in the main page. The PaintView object is the one that allows users to draw doodles. ImageView in the lower right corner will display the actual image feed to the model for inference. You also reserve a button in the lower left corner to clean up the canvas.", "On an Android device, you can customize an Android touch event handler to respond to users\u2019 touch actions. In this case, we defined three action handlers to deal with different touch actions:", "In the meantime, you use paths to store the path the user drew on the canvas. Let\u2019s take a look at the actual code.", "Override the onTouchEvent function to handle the actions:", "As shown in this code block, you add a runInference in the MotionEvent.ACTION_UP handler. This function is used to predict the doodle when the user finishes drawing the lines. We cover that in the next few steps.  You also need to override the onDraw function to display the doodle the user finished drawing:", "The actual image is stored in a Bitmap and displayed on screen.", "When a touch starts, the following code creates a new path and records the coordinate of the path on screen.", "During the move, you keep recording the coordinate and form a quadratic bezier. You use the absolute diff value of the move action to calibrate the draw action. It only draws a line if the difference of coordinates is above the tolerance.", "When the touch finishes, the following code block draws a line to the path and calculates the rectangle bound of the path.", "To run inference on Android, you need to finish the following three tasks:", "To achieve these goals, you need to create a DoodleModel class to cover them. The next section walks through the core logic in this class to finish these tasks.", "DJL has a built-in model management system. Users can specify the directory in the file system to store models.", "By defining the DJL_CACHE_DIR property, the model is saved to the target location.  After that, define a Criteria to download the model from the URL. The zip file contains:", "This code block also defines the translator. You use this class to do pre-processing and post processing on the image. Finally, create a Model in the main Activity and use it to spawn a Predictor as follows:", "For more information about model loading, see How to load model.", "In DJL, we defined a Translator interface targeted to do pre-processing and postprocessing. Here we just defined an ImageClassificationTranslator implements Translator in DoodleModel:", "Internally, the translator loads the synset.txt file during creation to store the class names. Our expected input is Image and our output is Classifications. For post processing, we apply a softmax operation to the output and stored in the Classifications class. To learn more about how translator works and create your own customized Translator, see Inference with your model\u00b6.", "Finally, you implement the runInference function we defined previously.", "This creates a Toast popup on screen to display the result as follows:", "That\u2019s it. You just finished creating your first Doodle Draw application!", "In order to get the best prediction, you may need to calculate the maximum bound to this image. The model was trained on squared images, so you will get the best result by making the input image a square.", "The image on the right will have a better prediction result than the one on the left because it does not contain as much white space. Because all paths can calculate a rectangle bound, we can find the mins and maxes of all x and y coordinates to find the largest square. We have defined a Bound class to do that. After that, crop the stored Bitmap as follows:", "That\u2019s it! Now you should be able to create a DoodleDraw game on your Android device. Again, you can also refer to our example project for a completed example.", "Deep Java Library (DJL) is a Deep Learning Framework written in Java, supporting both training and inference. DJL is built on top of modern Deep Learning engines (TenserFlow, PyTorch, MXNet, etc). You can easily use DJL to train your model or deploy your favorite models from a variety of engines without any additional conversion. It contains a powerful ModelZoo design that allows you to manage trained models and load them in a single line. The built-in ModelZoo currently supports more than 70 pre-trained and ready to use models from GluonCV, HuggingFace, TorchHub and Keras.  Follow our GitHub, demo repository, Slack channel and twitter for more documentation and examples of DJL!", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Software Engineer @ Amazon AI https://github.com/lanking520"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Ff713e64408a7&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Flearn-to-create-a-doodle-draw-game-on-android-f713e64408a7&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Flearn-to-create-a-doodle-draw-game-on-android-f713e64408a7&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Flearn-to-create-a-doodle-draw-game-on-android-f713e64408a7&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Flearn-to-create-a-doodle-draw-game-on-android-f713e64408a7&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----f713e64408a7--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----f713e64408a7--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@ql2282?source=post_page-----f713e64408a7--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@ql2282?source=post_page-----f713e64408a7--------------------------------", "anchor_text": "Qing Lan"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F48d262042d01&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Flearn-to-create-a-doodle-draw-game-on-android-f713e64408a7&user=Qing+Lan&userId=48d262042d01&source=post_page-48d262042d01----f713e64408a7---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ff713e64408a7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Flearn-to-create-a-doodle-draw-game-on-android-f713e64408a7&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ff713e64408a7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Flearn-to-create-a-doodle-draw-game-on-android-f713e64408a7&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://github.com/googlecreativelab/quickdraw-dataset/blob/master/preview.jpg", "anchor_text": ""}, {"url": "https://github.com/googlecreativelab/quickdraw-dataset/blob/master/preview.jpg", "anchor_text": "https://github.com/googlecreativelab/quickdraw-dataset/blob/master/preview.jpg"}, {"url": "https://djl.ai/website/demo.html#doodle", "anchor_text": "here"}, {"url": "https://github.com/aws-samples/djl-demo/tree/master/android", "anchor_text": "example project"}, {"url": "https://github.com/aws-samples/djl-demo/tree/master/android", "anchor_text": "example project setup"}, {"url": "https://medium.com/@ssaurel/learn-to-create-a-paint-application-for-android-5b16968063f8", "anchor_text": "Learn to create a Paint Application for Android"}, {"url": "https://developer.android.com/reference/android/graphics/Path#quadTo(float,%20float,%20float,%20float)", "anchor_text": "quadratic bezier"}, {"url": "https://javadoc.io/doc/ai.djl/api/latest/ai/djl/repository/zoo/Criteria.html", "anchor_text": "Criteria"}, {"url": "https://javadoc.io/doc/ai.djl/api/latest/ai/djl/Model.html", "anchor_text": "Model"}, {"url": "https://javadoc.io/doc/ai.djl/api/latest/ai/djl/inference/Predictor.html", "anchor_text": "Predictor"}, {"url": "https://github.com/awslabs/djl/blob/master/docs/load_model.md", "anchor_text": "How to load model"}, {"url": "https://javadoc.io/doc/ai.djl/api/latest/ai/djl/translate/Translator.html", "anchor_text": "Translator"}, {"url": "https://javadoc.io/doc/ai.djl/api/latest/ai/djl/modality/cv/translator/ImageClassificationTranslator.html", "anchor_text": "ImageClassificationTranslator"}, {"url": "https://javadoc.io/doc/ai.djl/api/latest/ai/djl/modality/cv/Image.html", "anchor_text": "Image"}, {"url": "https://javadoc.io/doc/ai.djl/api/latest/ai/djl/modality/Classifications.html", "anchor_text": "Classifications"}, {"url": "https://github.com/awslabs/djl/blob/master/jupyter/tutorial/image_classification_with_your_model.ipynb", "anchor_text": "Inference with your model"}, {"url": "https://render.githubusercontent.com/view/ipynb?commit=ca6afa7e568cd9621e128160007dcc5e9e0af488&enc_url=68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f6177736c6162732f646a6c2f636136616661376535363863643936323165313238313630303037646363356539653061663438382f6a7570797465722f7475746f7269616c2f696d6167655f636c617373696669636174696f6e5f776974685f796f75725f6d6f64656c2e6970796e62&nwo=awslabs%2Fdjl&path=jupyter%2Ftutorial%2Fimage_classification_with_your_model.ipynb&repository_id=218396611&repository_type=Repository#Inference-with-your-model", "anchor_text": "\u00b6"}, {"url": "https://developer.android.com/reference/android/widget/Toast", "anchor_text": "Toast"}, {"url": "https://github.com/aws-samples/djl-demo/tree/master/android", "anchor_text": "example project"}, {"url": "https://djl.ai", "anchor_text": "Deep Java Library (DJL)"}, {"url": "https://github.com/awslabs/djl/tree/master/docs", "anchor_text": "GitHub"}, {"url": "https://github.com/aws-samples/djl-demo", "anchor_text": "demo repository"}, {"url": "https://join.slack.com/t/deepjavalibrary/shared_invite/zt-ar91gjkz-qbXhr1l~LFGEIEeGBibT7w", "anchor_text": "Slack channel"}, {"url": "https://twitter.com/deepjavalibrary", "anchor_text": "twitter"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----f713e64408a7---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/tag/deep-learning?source=post_page-----f713e64408a7---------------deep_learning-----------------", "anchor_text": "Deep Learning"}, {"url": "https://medium.com/tag/android?source=post_page-----f713e64408a7---------------android-----------------", "anchor_text": "Android"}, {"url": "https://medium.com/tag/java?source=post_page-----f713e64408a7---------------java-----------------", "anchor_text": "Java"}, {"url": "https://medium.com/tag/pytorch?source=post_page-----f713e64408a7---------------pytorch-----------------", "anchor_text": "Pytorch"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Ff713e64408a7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Flearn-to-create-a-doodle-draw-game-on-android-f713e64408a7&user=Qing+Lan&userId=48d262042d01&source=-----f713e64408a7---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Ff713e64408a7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Flearn-to-create-a-doodle-draw-game-on-android-f713e64408a7&user=Qing+Lan&userId=48d262042d01&source=-----f713e64408a7---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ff713e64408a7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Flearn-to-create-a-doodle-draw-game-on-android-f713e64408a7&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----f713e64408a7--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Ff713e64408a7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Flearn-to-create-a-doodle-draw-game-on-android-f713e64408a7&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----f713e64408a7---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----f713e64408a7--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----f713e64408a7--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----f713e64408a7--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----f713e64408a7--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----f713e64408a7--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----f713e64408a7--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----f713e64408a7--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----f713e64408a7--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@ql2282?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@ql2282?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Qing Lan"}, {"url": "https://medium.com/@ql2282/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "67 Followers"}, {"url": "https://github.com/lanking520", "anchor_text": "https://github.com/lanking520"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F48d262042d01&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Flearn-to-create-a-doodle-draw-game-on-android-f713e64408a7&user=Qing+Lan&userId=48d262042d01&source=post_page-48d262042d01--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fusers%2F48d262042d01%2Flazily-enable-writer-subscription&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Flearn-to-create-a-doodle-draw-game-on-android-f713e64408a7&user=Qing+Lan&userId=48d262042d01&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}