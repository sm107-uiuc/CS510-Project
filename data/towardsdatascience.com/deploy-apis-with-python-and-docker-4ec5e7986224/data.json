{"url": "https://towardsdatascience.com/deploy-apis-with-python-and-docker-4ec5e7986224", "time": 1683013178.815553, "path": "towardsdatascience.com/deploy-apis-with-python-and-docker-4ec5e7986224/", "webpage": {"metadata": {"title": "Docker APIs on Google Cloud Platform with Python | Towards Data Science", "h1": "Deploy APIs With Python and Docker", "description": "A simple how-to guide to deploying APIs to the web using Google Cloud. Build an API with Python and Flask, package using Docker, and deploy to the cloud."}, "outgoing_paragraph_urls": [{"url": "https://github.com/jamescalam/gcp-api", "anchor_text": "here", "paragraph_index": 5}, {"url": "https://github.com/jamescalam/gcp-api", "anchor_text": "GitHub here", "paragraph_index": 7}, {"url": "http://www.api.com/places.", "anchor_text": "www.api.com/places", "paragraph_index": 11}, {"url": "http://www.api.com/places.", "anchor_text": ".", "paragraph_index": 11}, {"url": "https://docs.docker.com/docker-for-windows/install/", "anchor_text": "here", "paragraph_index": 25}, {"url": "https://console.cloud.google.com/projectselector2/home/dashboard", "anchor_text": "project selector page in the Cloud Console", "paragraph_index": 35}, {"url": "https://console.cloud.google.com/gcr", "anchor_text": "Container Registry", "paragraph_index": 37}, {"url": "https://console.cloud.google.com/flows/enableapi?apiid=cloudbuild.googleapis.com", "anchor_text": "click here", "paragraph_index": 38}, {"url": "https://cloud.google.com/sdk/install", "anchor_text": "from here", "paragraph_index": 39}, {"url": "https://console.cloud.google.com/", "anchor_text": "GCP console", "paragraph_index": 46}, {"url": "https://www.postman.com/downloads/", "anchor_text": "download link here", "paragraph_index": 50}, {"url": "https://twitter.com/jamescalam", "anchor_text": "Twitter", "paragraph_index": 58}, {"url": "https://www.youtube.com/c/jamesbriggs", "anchor_text": "YouTube", "paragraph_index": 58}, {"url": "https://www.youtube.com/c/jamesbriggs", "anchor_text": "https://www.youtube.com/c/jamesbriggs", "paragraph_index": 61}], "all_paragraphs": ["There are a few skills in software development that act as floodgates holding back a vast ocean of opportunity. When learning one of these skills, it seems that a whole new world is suddenly illuminated.", "With this article, we will cover what I believe is one of these skills. The ability to write code that can be deployed to the internet and communicated with \u2014 an API.", "Several sub-skills feed into building a deployable API, which we will cover as we put our API together. Nonetheless, Rome wasn\u2019t built in a day, and neither is mastery (nor even competency) \u2014 so this is not a zero-to-hero in five minutes article.", "This article is an introduction, we will cover the essentials \u2014 nothing more, nothing less. At the end of the article, we will have a fully functional API hosted on the cloud.", "In short, we will cover \u2014", "You can find the GitHub repo for this article here.", "We create a new folder that will contain a single Python script named app.py. This script will contain our API code, and will be structured like so:", "If the order of things get confusing \u2014 the full app.py script is at the end of this section, and you can find the project on GitHub here.", "Here we set up our bare minimum in imports and initialize our API flask app like so:", "Inside our API script, we need to define a class that will contain our HTTP methods, GET, POST, and DELETE.", "Flask needs to know that this class is an entry point for our API, and so we pass Resource in with the class definition. We will create a class called Places:", "We also need to tell Flask where the entry point to this API class is. For example, if our API was located at www.api.com we may want to specify that entry to the Places class is provided at www.api.com/places.", "We can do this using the add_resource method:", "This method is placed outside and following the class definition.", "Of course, this means we can add multiple classes and entry points to our API. This can be particularly useful for more complex services \u2014 although we will stick with just one in this article.", "For the sake of simplicity, we will manipulate data embedded within the code as a Python dictionary. It looks like this:", "We use this method to GET data, which in our case is simply our DATA dictionary.", "The POST method is used to add data to our DATA['places'] list.", "We use DELETE as an equal and opposite action of POST. The user specifies a location to remove from the DATA['places'] list.", "As an equal and opposite operation, we slightly modify the POST logic:", "If we put all of these parts together, we will get the following script:", "The next stage is where we will create a Docker image. There are two similar terms here \u2014 image and container.", "An image is essentially a blueprint \u2014 whereas a container is a structure/deployment that is built from the blueprint.", "First, we will create our image, before deploying it to Google cloud (where it will become a container).", "There are three key steps in creating our Docker image:", "1.The Docker docs will be able to guide you through the installation process much better than I can! You can find them here.", "For an overview of Docker on Windows or Mac, check out this video:", "2.Because we are deploying our API as a docker container, we need to include a container setup file called a Dockerfile inside our directory.", "Inside our Dockerfile, we will RUN the pip install command for three Python libraries \u2014 all of which will specify using a requirements.txt file.", "For our simple API, it looks like this:", "In our Dockerfile, we outline our image (the container blueprint). Docker will read the Dockerfile which provides \u2018build\u2019 instructions.", "3.Our final step is to build the Docker image, which we will later upload to Google Container Registry.", "To build the image, open a CLI, navigate to the directory containing our files and type:", "Finally, we can move onto deploying our API to the Cloud.", "Here, we will use Google Cloud Platform\u2019s (GCP) Container Registry to store our Docker image, and Cloud Run to deploy it.", "First, we need to set up a project. We start by navigating to the project selector page in the Cloud Console and clicking Create Project.", "Here we simply give our project a name \u2014 mine is medium.", "Next, we need to navigate to Container Registry (GCR) in Google Console. If we have set up our project correctly, we will see a screen that looks like this:", "We will be using Cloud Build to build our image into a container. Before we can do this, we need to enable the Cloud Build API for our project. Simply click here and select the project you\u2019re working on:", "Now we have our project setup, we need to use Google Cloud SDK to push our API Docker image to GCR \u2014 which we download from here.", "After installation, we need to log in to gcloud. To do so, in CMD prompt (or your equivalent CLI) simply type:", "This command will open our web browser, allowing us to login as usual. We then configure Docker to use our credentials with:", "We will use GCR to store our image. To build our container and save it to the registry \u2014 we navigate to our API directory and submit it:", "Our registry location is provided as the target image, where:", "Now, if we navigate back to our registry, we should see our newly uploaded Docker image (it can take some time to build \u2014 check your Cloud Build dashboard):", "With our Docker container in place, we can deploy it to the web with Cloud Run.", "We open the Cloud Run console by clicking on the top-left navigation button (in the GCP console) and selecting Cloud Run.", "Next, we will see the Cloud Run interface, we deploy our container by clicking Create Service:", "Next, we (2) enter our preferred deployment settings, (3\u20134) choose our container image, and (5) create our deployment!", "After our API has been deployed, we can find the URL for the API at the top of the Cloud Run console.", "For testing APIs, Postman is your friend \u2014 find the download link here.", "Once installed, open Postman and enter the web address of your API \u2014 for example:", "In our code, we specified the location of our Places class to be /places:", "Because of this, we know to access the methods contained within Places, we must add /places to our API address:", "For the GET request, this is all we need \u2014 enter it into the address bar, click GET in the dropdown, and click Send.", "Let\u2019s test the other methods too \u2014 remember to add our location argument for both the POST and DELETE requests, and to update the request type (in the dropdown).", "That\u2019s all for this simple toy example of an API built in Flask and deployed using Docker on the GCP.", "Simply put, building an API and deploying it to the web is an incredibly easy and efficient process. It\u2019s not hard and unlocks a vast expanse of opportunity to us.", "I hope you enjoyed the article \u2014 if you have any questions or suggestions, feel free to reach out via Twitter or in the comments below. If you\u2019d like more content like this, I post on YouTube too.", "If you enjoyed this article and are interested in widening your skill sets further in web-enabled tech \u2014 try out my introduction to Angular for data science here:", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Freelance ML engineer learning and writing about everything. I post a lot on YT https://www.youtube.com/c/jamesbriggs"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F4ec5e7986224&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdeploy-apis-with-python-and-docker-4ec5e7986224&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdeploy-apis-with-python-and-docker-4ec5e7986224&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdeploy-apis-with-python-and-docker-4ec5e7986224&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdeploy-apis-with-python-and-docker-4ec5e7986224&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----4ec5e7986224--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----4ec5e7986224--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://jamescalam.medium.com/?source=post_page-----4ec5e7986224--------------------------------", "anchor_text": ""}, {"url": "https://jamescalam.medium.com/?source=post_page-----4ec5e7986224--------------------------------", "anchor_text": "James Briggs"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fb9d77a4ca1d1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdeploy-apis-with-python-and-docker-4ec5e7986224&user=James+Briggs&userId=b9d77a4ca1d1&source=post_page-b9d77a4ca1d1----4ec5e7986224---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F4ec5e7986224&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdeploy-apis-with-python-and-docker-4ec5e7986224&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F4ec5e7986224&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdeploy-apis-with-python-and-docker-4ec5e7986224&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@josephtpearson?utm_source=medium&utm_medium=referral", "anchor_text": "Joseph Pearson"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://github.com/jamescalam/gcp-api", "anchor_text": "here"}, {"url": "https://github.com/jamescalam/gcp-api", "anchor_text": "GitHub here"}, {"url": "http://www.api.com/places.", "anchor_text": "www.api.com/places"}, {"url": "http://www.api.com/places.", "anchor_text": "."}, {"url": "https://docs.docker.com/docker-for-windows/install/", "anchor_text": "here"}, {"url": "https://hub.docker.com/_/python", "anchor_text": "available here"}, {"url": "https://gunicorn.org/", "anchor_text": "gunicorn"}, {"url": "https://console.cloud.google.com/projectselector2/home/dashboard", "anchor_text": "project selector page in the Cloud Console"}, {"url": "https://console.cloud.google.com/gcr", "anchor_text": "Container Registry"}, {"url": "https://console.cloud.google.com/flows/enableapi?apiid=cloudbuild.googleapis.com", "anchor_text": "click here"}, {"url": "https://cloud.google.com/sdk/install", "anchor_text": "from here"}, {"url": "https://cloud.google.com/container-registry/docs/pushing-and-pulling#tag_the_local_image_with_the_registry_name", "anchor_text": "GCR hostname"}, {"url": "https://console.cloud.google.com/", "anchor_text": "GCP console"}, {"url": "https://www.postman.com/downloads/", "anchor_text": "download link here"}, {"url": "https://tut-api-2abcdefgh-ew.a.run.app/.", "anchor_text": "https://tut-api-2czbipghsq-ew.a.run.app/"}, {"url": "https://tut-api-2abcdefgh-ew.a.run.app/places", "anchor_text": "https://tut-api-2czbipghsq-ew.a.run.app/places"}, {"url": "https://tut-api-2czbipghsq-ew.a.run.app/places.", "anchor_text": "https://tut-api-2czbipghsq-ew.a.run.app/places."}, {"url": "https://twitter.com/jamescalam", "anchor_text": "Twitter"}, {"url": "https://www.youtube.com/c/jamesbriggs", "anchor_text": "YouTube"}, {"url": "https://towardsdatascience.com/how-to-use-angular-to-deploy-tensorflow-web-apps-5675b5a042cc", "anchor_text": "How to Use Angular To Deploy TensorFlow Web AppsUsing Python-built models in Angular-built web appstowardsdatascience.com"}, {"url": "https://medium.com/tag/technology?source=post_page-----4ec5e7986224---------------technology-----------------", "anchor_text": "Technology"}, {"url": "https://medium.com/tag/python?source=post_page-----4ec5e7986224---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/software-development?source=post_page-----4ec5e7986224---------------software_development-----------------", "anchor_text": "Software Development"}, {"url": "https://medium.com/tag/web-development?source=post_page-----4ec5e7986224---------------web_development-----------------", "anchor_text": "Web Development"}, {"url": "https://medium.com/tag/programming?source=post_page-----4ec5e7986224---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F4ec5e7986224&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdeploy-apis-with-python-and-docker-4ec5e7986224&user=James+Briggs&userId=b9d77a4ca1d1&source=-----4ec5e7986224---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F4ec5e7986224&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdeploy-apis-with-python-and-docker-4ec5e7986224&user=James+Briggs&userId=b9d77a4ca1d1&source=-----4ec5e7986224---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F4ec5e7986224&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdeploy-apis-with-python-and-docker-4ec5e7986224&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----4ec5e7986224--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F4ec5e7986224&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdeploy-apis-with-python-and-docker-4ec5e7986224&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----4ec5e7986224---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----4ec5e7986224--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----4ec5e7986224--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----4ec5e7986224--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----4ec5e7986224--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----4ec5e7986224--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----4ec5e7986224--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----4ec5e7986224--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----4ec5e7986224--------------------------------", "anchor_text": ""}, {"url": "https://jamescalam.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://jamescalam.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "James Briggs"}, {"url": "https://jamescalam.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "9.6K Followers"}, {"url": "https://www.youtube.com/c/jamesbriggs", "anchor_text": "https://www.youtube.com/c/jamesbriggs"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fb9d77a4ca1d1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdeploy-apis-with-python-and-docker-4ec5e7986224&user=James+Briggs&userId=b9d77a4ca1d1&source=post_page-b9d77a4ca1d1--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F75e31c56d187&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdeploy-apis-with-python-and-docker-4ec5e7986224&newsletterV3=b9d77a4ca1d1&newsletterV3Id=75e31c56d187&user=James+Briggs&userId=b9d77a4ca1d1&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}