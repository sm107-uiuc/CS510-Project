{"url": "https://towardsdatascience.com/detecting-and-treating-outliers-in-python-part-2-3a3319ec2c33", "time": 1683017710.2899551, "path": "towardsdatascience.com/detecting-and-treating-outliers-in-python-part-2-3a3319ec2c33/", "webpage": {"metadata": {"title": "Detecting And Treating Outliers In Python \u2014 Part 2 | by Alicia Horsch | Towards Data Science", "h1": "Detecting And Treating Outliers In Python \u2014 Part 2", "description": "An Exploratory Data Analysis (EDA) is essential when working on data science projects. Understanding your underlying data, its nature, and structure can simplify decision making on features\u2026"}, "outgoing_paragraph_urls": [{"url": "https://towardsdatascience.com/detecting-and-treating-outliers-in-python-part-1-4ece5098b755", "anchor_text": "previously posted article", "paragraph_index": 1}, {"url": "https://www.machinelearningplus.com/statistics/mahalanobis-distance/", "anchor_text": "this blog post", "paragraph_index": 10}], "all_paragraphs": ["An Exploratory Data Analysis (EDA) is essential when working on data science projects. Understanding your underlying data, its nature, and structure can simplify decision making on features, algorithms, and hyperparameters. One crucial part of the EDA is the detection of outliers. Outliers are observations that are far away from the other data points in a random sample of a population.", "In a previously posted article, I introduced statistical methods to detect univariate outliers commonly used in practice. In this post, I want to discuss what multivariate outliers are, how they can be detected, and visualized during EDA. In an third and last article, I would like to explain how both types of outliers can be treated:", "3. Treatment of both types of outliers", "There are many ways to detect outliers, including statistical methods, proximity-based methods, or supervised outlier detection. Again, I will solely focus on commonly used statistical methods. As in my previous post, I will use the Boston housing data set (sklearn library) for illustration and provide example code in Python so you can easily follow.", "A multivariate outlier is an unusual combination of values in an observation across several variables. For example, it could be a human with a height measurement of 2 meters (in the 95th percentile) and weight measurement of 50kg (in the 5th percentile).", "A common way to plot multivariate outliers is the scatter plot. Keep in mind that visualizing multivariate outliers across more than two variables is not feasible in a 2D space. Therefore, we will stick to outliers found across two variables for visualization \u2014 so-called bi-variate outliers.", "The scatterplot visualizes the relationship between two (numerical) variables. In a scatterplot, every observation is plotted as a point with two coordinates (X,Y) that represent two variables. Here, for example, X represents the value for variable 1 and Y the value for variable 2.", "Let\u2019s create a scatterplot between two variables from the Boston housing data set. I choose the variables \u2018CRIM\u2019 and \u2018LSTAT\u2019 to understand the relationship between the crime rate per capita by town and the percentage of lower status in the population. You can play around and choose any set of numerical variables from the data set and see what changes. Other meaningful combinations worth looking at are, for example, \u2018DIS\u2019 & \u2018INDUS\u2019, \u2018LSTAT\u2019 & \u2018PTRATIO\u2019 or \u2018INDUS\u2019 & \u2018ZN\u2019.", "Like box plots, scatter plots visualize outlying observations very well but do not identify or mark them for easy treatment. When dealing with multivariate outliers, distance metrics can be helpful for detection. With distance metrics, the distance between two vectors is determined. These two vectors can be two different observations (rows) or an observation (row) compared to the mean vector (row of means of all columns). Distance metrics can be calculated independent of the number of variables in the dataset (columns).", "A widely used distance metric for the detection of multivariate outliers is the Mahalanobis distance (MD). The MD is a measure that determines the distance between a data point x and a distribution D. It is a multivariate generalization of the internally studentized residuals (z-score) introduced in my last article. This means the MD defines how many standard deviations x is away from the mean of D.", "Here, x represents an observation vector and \u00b5 the arithmetic mean vector of independent variables (columns) in the sample. C(-1) is the inverse covariance matrix of the independent variables in the sample. To better understand the mathematical intuition behind the MD, I recommend reading under point four in this blog post.", "Like the z-score, the MD of each observation is compared to a cut-off point. Assuming a multivariate normal distribution of the data with K variables, the Mahalanobis distance follows a chi-squared distribution with K degrees of freedom. Using a reasonable significance level (e.g., 2.5%, 1%, 0.01%), the cut-off point is defined as:", "Let\u2019s see an example using a 0.01% significance level and searching for bi-variate outliers in the subset used before.", "Using the Mahalanobis distance, we can see that 8 observations are marked as bi-variate outliers. When including all variables of the Boston dataset (df=13), we detect 17 multivariate outliers.", "Look closer at observation 398. It seems like when looking at the subset of two variables, it is an outlier. However, when considering the whole dataset, it is not. Therefore, when running your own data science project, make sure to only include variables in your detection process that are interesting for your further analysis. Otherwise, some observations may be flagged as outliers because of an irrelevant variable.", "A drawback of the MD is that it uses the arithmetic mean and covariance matrix and, with that, is highly sensitive to outliers in the data. Several methods exist that use robust estimates for \u00b5 and C. In the following passage, I will explain the Minimum Covariance Determinant method, introduced by Rousseeuw, as an example.", "The Minimum Covariance Determinant method (MCD) provides robust estimates for \u00b5 and C by only using a subset of the sample. It only uses the observations where the determinant of the covariance matrix is as small as possible. It is defined as the classic MD but with robust estimates for mean and covariance:", "The Python library sklearn includes a function to fit the MCD to any dataset to receive a robust covariance matrix and mean. Let\u2019s go back to our example and see how the result changes:", "We can see that the robust MD finds a few more outliers than the classic MD. 10 bi-variate outliers for the 2D dataset example and 21 multivariate outliers when considering all features of the Boston dataset.", "The two plots below (based on the 2D dataset example) help visualizing the difference between the classic (left) and robust (right) distance measurement:", "Next to univariate outliers, it is also important to examine an underlying data set for multivariate outliers. Both types of outliers can significantly impact the outcomes of a data analysis or machine learning projects. In this post, we learned that multivariate outliers are a unique combination of values in an observation and can be detected through distance metrics.", "A commonly used distance metric is the Mahalanobis distance. Its classic definition relies on the mean and covariance between all variables of a dataset. It is, therefore, sensitive to outliers. One way to receive more robust estimates for the mean and covariance is the Minimum Covariance Determinants method (MCD).", "Finally, it is important to note that there are several other ways of detecting univariate and multivariate outliers. Other popular methods are k-nearest neighbours, DBSCAN, or isolation forests, just to name a few. There is no right or wrong method, but one might be more appropriate than another for your data set. When deciding on the outlier detection method you would like to use, I recommend basing your decision on the data\u2019s distribution, sample size, and the number of dimensions.", "Now that we know how to detect univariate and multivariate outliers: what now? In an upcoming post, I want to discuss how outliers can be treated.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Data Scientist / Idea sharing / Learning & Personal Growth"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F3a3319ec2c33&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdetecting-and-treating-outliers-in-python-part-2-3a3319ec2c33&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdetecting-and-treating-outliers-in-python-part-2-3a3319ec2c33&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdetecting-and-treating-outliers-in-python-part-2-3a3319ec2c33&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdetecting-and-treating-outliers-in-python-part-2-3a3319ec2c33&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----3a3319ec2c33--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----3a3319ec2c33--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://aliciahorsch.medium.com/?source=post_page-----3a3319ec2c33--------------------------------", "anchor_text": ""}, {"url": "https://aliciahorsch.medium.com/?source=post_page-----3a3319ec2c33--------------------------------", "anchor_text": "Alicia Horsch"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fba4ebbd0afd2&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdetecting-and-treating-outliers-in-python-part-2-3a3319ec2c33&user=Alicia+Horsch&userId=ba4ebbd0afd2&source=post_page-ba4ebbd0afd2----3a3319ec2c33---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F3a3319ec2c33&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdetecting-and-treating-outliers-in-python-part-2-3a3319ec2c33&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F3a3319ec2c33&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdetecting-and-treating-outliers-in-python-part-2-3a3319ec2c33&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://www.pexels.com/@legioseven?utm_content=attributionCopyText&utm_medium=referral&utm_source=pexels", "anchor_text": "LegioSeven"}, {"url": "https://www.pexels.com/photo/shepherd-dog-with-flock-of-sheep-5384726/?utm_content=attributionCopyText&utm_medium=referral&utm_source=pexels", "anchor_text": "Pexels"}, {"url": "https://towardsdatascience.com/detecting-and-treating-outliers-in-python-part-1-4ece5098b755", "anchor_text": "previously posted article"}, {"url": "https://towardsdatascience.com/detecting-and-treating-outliers-in-python-part-1-4ece5098b755", "anchor_text": "Detecting univariate outliers"}, {"url": "https://www.machinelearningplus.com/statistics/mahalanobis-distance/", "anchor_text": "this blog post"}, {"url": "https://link.springer.com/chapter/10.1007/978-3-319-43742-2_14", "anchor_text": "https://link.springer.com/chapter/10.1007/978-3-319-43742-2_14"}, {"url": "http://www.hermanaguinis.com/ORMoutliers.pdf", "anchor_text": "http://www.hermanaguinis.com/ORMoutliers.pdf"}, {"url": "https://www.machinelearningplus.com/statistics/mahalanobis-distance/", "anchor_text": "https://www.machinelearningplus.com/statistics/mahalanobis-distance/"}, {"url": "https://onlinelibrary.wiley.com/doi/full/10.1002/wics.1421", "anchor_text": "https://onlinelibrary.wiley.com/doi/full/10.1002/wics.1421"}, {"url": "https://scikit-learn.org/stable/modules/generated/sklearn.covariance.MinCovDet.html", "anchor_text": "https://scikit-learn.org/stable/modules/generated/sklearn.covariance.MinCovDet.html"}, {"url": "https://www.khanacademy.org/math/statistics-probability/describing-relationships-quantitative-data/introduction-to-scatterplots/a/scatterplots-and-correlation-review", "anchor_text": "https://www.khanacademy.org/math/statistics-probability/describing-relationships-quantitative-data/introduction-to-scatterplots/a/scatterplots-and-correlation-review"}, {"url": "https://medium.com/tag/data-science?source=post_page-----3a3319ec2c33---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/outliers?source=post_page-----3a3319ec2c33---------------outliers-----------------", "anchor_text": "Outliers"}, {"url": "https://medium.com/tag/anomaly-detection?source=post_page-----3a3319ec2c33---------------anomaly_detection-----------------", "anchor_text": "Anomaly Detection"}, {"url": "https://medium.com/tag/outlier-detection?source=post_page-----3a3319ec2c33---------------outlier_detection-----------------", "anchor_text": "Outlier Detection"}, {"url": "https://medium.com/tag/exploratory-data-analysis?source=post_page-----3a3319ec2c33---------------exploratory_data_analysis-----------------", "anchor_text": "Exploratory Data Analysis"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F3a3319ec2c33&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdetecting-and-treating-outliers-in-python-part-2-3a3319ec2c33&user=Alicia+Horsch&userId=ba4ebbd0afd2&source=-----3a3319ec2c33---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F3a3319ec2c33&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdetecting-and-treating-outliers-in-python-part-2-3a3319ec2c33&user=Alicia+Horsch&userId=ba4ebbd0afd2&source=-----3a3319ec2c33---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F3a3319ec2c33&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdetecting-and-treating-outliers-in-python-part-2-3a3319ec2c33&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----3a3319ec2c33--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F3a3319ec2c33&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdetecting-and-treating-outliers-in-python-part-2-3a3319ec2c33&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----3a3319ec2c33---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----3a3319ec2c33--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----3a3319ec2c33--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----3a3319ec2c33--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----3a3319ec2c33--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----3a3319ec2c33--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----3a3319ec2c33--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----3a3319ec2c33--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----3a3319ec2c33--------------------------------", "anchor_text": ""}, {"url": "https://aliciahorsch.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://aliciahorsch.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Alicia Horsch"}, {"url": "https://aliciahorsch.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "162 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fba4ebbd0afd2&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdetecting-and-treating-outliers-in-python-part-2-3a3319ec2c33&user=Alicia+Horsch&userId=ba4ebbd0afd2&source=post_page-ba4ebbd0afd2--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F99f721cf6443&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdetecting-and-treating-outliers-in-python-part-2-3a3319ec2c33&newsletterV3=ba4ebbd0afd2&newsletterV3Id=99f721cf6443&user=Alicia+Horsch&userId=ba4ebbd0afd2&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}