{"url": "https://towardsdatascience.com/solving-a-video-sequencing-puzzle-e4ad29020b7f", "time": 1683017500.376259, "path": "towardsdatascience.com/solving-a-video-sequencing-puzzle-e4ad29020b7f/", "webpage": {"metadata": {"title": "Solving a Video sequencing puzzle | by David Moore | Towards Data Science", "h1": "Solving a Video sequencing puzzle", "description": "This is the next article in my series Doing Data Science from Scratch. We are doing a project to count the number of passing vehicles on the road where I live. The question to be answered is\u2026"}, "outgoing_paragraph_urls": [{"url": "https://towardsdatascience.com/doing-data-science-from-scratch-dab71253e777", "anchor_text": "Doing Data Science from Scratch", "paragraph_index": 0}, {"url": "https://towardsdatascience.com/parsing-the-motion-log-file-55d013b458a1", "anchor_text": "recovering event data", "paragraph_index": 0}, {"url": "https://github.com/CognitiveDave/CountingTraffic/blob/main/combinevide.py", "anchor_text": "original script", "paragraph_index": 2}, {"url": "https://github.com/CognitiveDave/CountingTraffic/blob/main/combinevide.py", "anchor_text": "original code", "paragraph_index": 4}, {"url": "https://github.com/CognitiveDave/CountingTraffic/blob/main/clips_not_sorted.rtf", "anchor_text": "variable contents", "paragraph_index": 6}, {"url": "https://github.com/CognitiveDave/CountingTraffic/blob/main/V1_combinevide.py", "anchor_text": "here", "paragraph_index": 9}, {"url": "https://github.com/CognitiveDave/CountingTraffic/blob/main/clips_sorted.rtf", "anchor_text": "the data for you as well", "paragraph_index": 9}], "all_paragraphs": ["This is the next article in my series Doing Data Science from Scratch. We are doing a project to count the number of passing vehicles on the road where I live. The question to be answered is fundamental \u2014 when is the best time to go for a walk without being mowed down by speeding cars, trucks, or other agricultural vehicles. My last article focused on recovering event data from log files, and that was a lot of fun. Now I write to explain a bit of a mystery, how I solved it, and what solving it means. My Six (6) motion detectors create video clips of activity, and one of my scripts makes a film of the whole day. When I viewed today\u2019s film, events and activities appeared all out of sequence. A person left my front door before they arrived. It was crazy, and I thought I was going mad. Thankfully not readers, thankfully not.", "For several days now, I have been running my equipment. There are Six (6) individual motion detection cameras monitoring passing motorists. After several hours I generally stop the cameras and that allows space for video processing, review, calibration and another run. All very scientific if not terribly efficient. Undoubtedly I am in no hurry, and I value the journey rather than getting to the finish line.", "Having watched eight (8) short videos, from those six (6) cameras, I had this uncomfortable feeling. First, the Cat seemed to just appear from nowhere. Now I thought that Cat was up to something. Aren\u2019t Cats always up to something? Then a delivery driver appeared to be leaving the house but never arrived \u2014 the postal service was also seen leaving but never coming. People just seemed to appear and disappear in no particular order. Watching an example today, I noticed that the timestamp, from the clips, jumped from 10am to 6pm and back to 10am. Hello, that couldn\u2019t be right! We must have a bug! My original script, to combine clips from all those cameras, started life on a different project. Ugh oh! After dinner, I resolved to visit that code again and figure some stuff out.", "The symptom, and my only lead, was that the timestamp on the video frames was jumping around erratically instead of being sequential with time. One moment a frame would appear from 10am with the next from 6pm and then back to 10am. Weird and slightly confusing for me. Some sort of timeline flux or violation of the temporal directive?", "Let us examine the original code so I can explain. Lines 28\u201333 make a list of all the clips available from each Camera. Lines 35\u201340 sort each list in ascending order. Line 45 creates an empty list which will hold all the VideoFileClip objects. Looking at the code, it seemed ripe for a complete code refactoring. Each cameras contribution to the movie should be in sequence, but the film will have a sense of time shifting since all Camera 1 shots will be seen before any of Camera 2 events. So we have at least a partial explanation for the mystery. I added an image of the code below in case you are on \u226413\" of screen real estate and need context.", "So the script was never designed to make a sequenced film. Hmm, that is what I believe, we refer to as, Technical Debt. There was another problem though!", "The Python variable \u2018vids\u2019 contains a list of file names and that specific line of code sorts the list by text in ascending order. Hmm, that isn\u2019t good either. I pushed the variable contents up to GitHub so you can examine it if you wish. To follow is a marked-up version of the data. Notice the area I highlighted with the rectangle. The sort command is sorting the text, but the sort order is not correct. We are jumping from 9am to 11am and back. Now that makes sense as well. Hmm, perhaps that was a bit sloppy then!", "So what was going on? Well, I hope you might agree, but we had an underdeveloped script, aka lousy code, that needed a bit of Tender Loving Care (TLC). Ok, we better do some more programming then! Solved!", "Having solved the mystery, I am happy that I hadn\u2019t lost my sanity. Still, I am convinced that Cat is up to something. That Cat is always up to something. The Cat is a stray, and it arrived at the end of my last project. In my defence, that is why I have half baked code. I was waiting for the Cat to stray off! Be kind to the animals they have the same right to the planet as we do even if they are up to something!", "Enough of the cute stray Cat! Back to Towards Data Science. So I went ahead and fixed the code. You can check out the new improved version here and I left the data for you as well. Here is the main highlight.", "It might sound a bit rich, since I do not document my code, but you really should and need to. Add some comments for yourself and others.Here I introduce a new function, \u2018date_key(elem)\u2019. I pass in each element of the list of file names and I return the variable name. Do give your variables meaningful names, again, because I don\u2019t and you need to.", "Let us examine the variable name with an illustration. I highlighted the value name gets for each line. 20201207 \u2014 December 7th, 2020. 094235\u201309:42:35 GMT. The function returns the date and time from the file name.", "Now, as we discussed, all the videos need to be sorted by the date & time key we just looked at. Perhaps the code still isn\u2019t perfect, but now videos is a list of lists. With some iteration \u2014 unprocess is a singular list of all the videos.", "Finally, vids is a list of video clips, but it is now sorted by ascending order and by date_key. Rather than sort by text, we have introduced a sort key. With the introduction of the sort key, the problem is solved.", "I wanted to share this adventure, as part of the series, because Doing Data Science from Scratch really does mean from Scratch. Now that I have performed some review, made some calibration changes, it is time for another run. This is Science, and I love it. I hope you do too!", "Once I do the next run, I will again review, and see where I am. Certainly, another step closer to the day when I will begin to count passing traffic and answer my research question. Towards Data Science and beyond.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "xMotorola Finance, xIBM Finance, xDeloitte Tax Management Consulting \u2014 Digital Transformation, ESG, Analytics"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fe4ad29020b7f&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsolving-a-video-sequencing-puzzle-e4ad29020b7f&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsolving-a-video-sequencing-puzzle-e4ad29020b7f&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsolving-a-video-sequencing-puzzle-e4ad29020b7f&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsolving-a-video-sequencing-puzzle-e4ad29020b7f&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://me.dm/@cognitivedave", "anchor_text": "Mastodon"}, {"url": "https://towardsdatascience.com/?source=post_page-----e4ad29020b7f--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----e4ad29020b7f--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://cognitivedave.medium.com/?source=post_page-----e4ad29020b7f--------------------------------", "anchor_text": ""}, {"url": "https://cognitivedave.medium.com/?source=post_page-----e4ad29020b7f--------------------------------", "anchor_text": "David Moore"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F5fc60a27c1c4&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsolving-a-video-sequencing-puzzle-e4ad29020b7f&user=David+Moore&userId=5fc60a27c1c4&source=post_page-5fc60a27c1c4----e4ad29020b7f---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fe4ad29020b7f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsolving-a-video-sequencing-puzzle-e4ad29020b7f&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fe4ad29020b7f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsolving-a-video-sequencing-puzzle-e4ad29020b7f&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://towardsdatascience.com/tagged/dofromscratch", "anchor_text": "Doing Data Science from scratch task by task"}, {"url": "https://unsplash.com/@halacious?utm_source=medium&utm_medium=referral", "anchor_text": "Halacious"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://towardsdatascience.com/doing-data-science-from-scratch-dab71253e777", "anchor_text": "Doing Data Science from Scratch"}, {"url": "https://towardsdatascience.com/parsing-the-motion-log-file-55d013b458a1", "anchor_text": "recovering event data"}, {"url": "https://github.com/CognitiveDave/CountingTraffic/blob/main/combinevide.py", "anchor_text": "original script"}, {"url": "https://github.com/CognitiveDave/CountingTraffic/blob/main/combinevide.py", "anchor_text": "original code"}, {"url": "https://github.com/CognitiveDave/CountingTraffic/blob/main/clips_not_sorted.rtf", "anchor_text": "variable contents"}, {"url": "https://github.com/CognitiveDave/CountingTraffic/blob/main/V1_combinevide.py", "anchor_text": "here"}, {"url": "https://github.com/CognitiveDave/CountingTraffic/blob/main/clips_sorted.rtf", "anchor_text": "the data for you as well"}, {"url": "https://medium.com/tag/computer-vision?source=post_page-----e4ad29020b7f---------------computer_vision-----------------", "anchor_text": "Computer Vision"}, {"url": "https://medium.com/tag/python?source=post_page-----e4ad29020b7f---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/data-science?source=post_page-----e4ad29020b7f---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/software-engineering?source=post_page-----e4ad29020b7f---------------software_engineering-----------------", "anchor_text": "Software Engineering"}, {"url": "https://medium.com/tag/dofromscratch?source=post_page-----e4ad29020b7f---------------dofromscratch-----------------", "anchor_text": "Dofromscratch"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fe4ad29020b7f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsolving-a-video-sequencing-puzzle-e4ad29020b7f&user=David+Moore&userId=5fc60a27c1c4&source=-----e4ad29020b7f---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fe4ad29020b7f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsolving-a-video-sequencing-puzzle-e4ad29020b7f&user=David+Moore&userId=5fc60a27c1c4&source=-----e4ad29020b7f---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fe4ad29020b7f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsolving-a-video-sequencing-puzzle-e4ad29020b7f&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----e4ad29020b7f--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fe4ad29020b7f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsolving-a-video-sequencing-puzzle-e4ad29020b7f&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----e4ad29020b7f---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----e4ad29020b7f--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----e4ad29020b7f--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----e4ad29020b7f--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----e4ad29020b7f--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----e4ad29020b7f--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----e4ad29020b7f--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----e4ad29020b7f--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----e4ad29020b7f--------------------------------", "anchor_text": ""}, {"url": "https://cognitivedave.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://cognitivedave.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "David Moore"}, {"url": "https://cognitivedave.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "217 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F5fc60a27c1c4&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsolving-a-video-sequencing-puzzle-e4ad29020b7f&user=David+Moore&userId=5fc60a27c1c4&source=post_page-5fc60a27c1c4--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F3d9220f2a184&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsolving-a-video-sequencing-puzzle-e4ad29020b7f&newsletterV3=5fc60a27c1c4&newsletterV3Id=3d9220f2a184&user=David+Moore&userId=5fc60a27c1c4&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}