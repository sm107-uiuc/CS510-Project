{"url": "https://towardsdatascience.com/get-your-spotify-streaming-history-with-python-d5a208bbcbd3", "time": 1683003568.848203, "path": "towardsdatascience.com/get-your-spotify-streaming-history-with-python-d5a208bbcbd3/", "webpage": {"metadata": {"title": "Get Your Spotify Streaming History With Python | by Vlad Gheorghe | Towards Data Science", "h1": "Get Your Spotify Streaming History With Python", "description": "Extract your music, flavor it with song features, and organize it into a handy CSV. See how the Spotify API works and how you can build your own Spotify apps."}, "outgoing_paragraph_urls": [{"url": "https://github.com/vlad-ds/spoty-records", "anchor_text": "GitHub", "paragraph_index": 4}, {"url": "https://developer.spotify.com/documentation/web-api/reference/tracks/get-audio-features/", "anchor_text": "documentation", "paragraph_index": 7}, {"url": "https://github.com/plamere/spotipy/commits?author=stephanebruckert", "anchor_text": "Spotipy", "paragraph_index": 9}, {"url": "https://www.spotify.com/", "anchor_text": "https://www.spotify.com/", "paragraph_index": 11}, {"url": "https://developer.spotify.com/", "anchor_text": "here", "paragraph_index": 17}, {"url": "https://developer.spotify.com/dashboard/applications", "anchor_text": "developer dashboard", "paragraph_index": 19}, {"url": "http://localhost:7777/callback", "anchor_text": "http://localhost:7777/callback", "paragraph_index": 21}, {"url": "https://developer.spotify.com/documentation/general/guides/scopes/", "anchor_text": "here", "paragraph_index": 25}, {"url": "https://developer.spotify.com/documentation/web-api/reference/search/search/", "anchor_text": "documentation", "paragraph_index": 36}, {"url": "https://curl.trillworks.com/", "anchor_text": "https://curl.trillworks.com/", "paragraph_index": 37}, {"url": "https://github.com/NickCarneiro/curlconverter", "anchor_text": "curlconverter", "paragraph_index": 38}, {"url": "https://open.spotify.com/album/6QaVfG1pHYl1z15ZxkvVDW?highlight=spotify:track:25yQPHgC35WNnnOUqFhgVR", "anchor_text": "Paste that ID in Open Spotify", "paragraph_index": 39}, {"url": "https://github.com/vlad-ds/spoty-records", "anchor_text": "GitHub", "paragraph_index": 45}, {"url": "https://towardsdatascience.com/a-music-taste-analysis-using-spotify-api-and-python-e52d186db5fc", "anchor_text": "apply machine learning", "paragraph_index": 46}, {"url": "https://towardsdatascience.com/is-my-spotify-music-boring-an-analysis-involving-music-data-and-machine-learning-47550ae931de", "anchor_text": "other cool articles", "paragraph_index": 48}], "all_paragraphs": ["This is my first Medium story! Any feedback is appreciated.", "If you\u2019re a dedicated Spotifyer like myself, there are lots of things you could learn by looking at your streaming data. Do you tend to listen to sad songs in winter? What happened to your music preferences when you fell in love?", "Luckily, Spotify allows you to request a download of all your streaming history. In this tutorial, I will show you how to extract this data, flavor it with delicious song features, and organize it into a handy CSV file that you can analyse with your favorite tools.", "But there\u2019s more. By the time we get there, you will also gain a basic understanding of how the Spotify API works, how to complete the Authorization Code Flow, and how you can build your own Spotify app. Read on!", "But if you\u2019re in a hurry, the full code is available at my GitHub.", "Spotify\u2019s audio features are complex metrics that aim to describe a track\u2019s personality and general impression on the listener. Here is a brief description of each:", "acousticness \u2014 how acoustic danceability \u2014 self-explanatoryenergy \u2014 how 'fast, loud an noisy'instrumentalness \u2014 the less vocals, the higherliveness \u2014 whether there is audience in the recordingloudness \u2014 self-explanatoryspeechiness \u2014 the more spoken words, the highervalence \u2014 whether the track sounds happy or sadtempo \u2014 the bpm", "Spotify also measures the duration, key, mode and time signature of each track. You can read more about features in Spotify\u2019s documentation.", "First, we get our streaming data from Spotify. Since the features are not included, we request them from the Spotify API. Finally, we export the data to our favorite format.", "The main requirement for this task is the Spotipy library. We will also use the Requests module for addressing the API. Though not essential, I\u2019ve also included Pandas because it makes it very easy to save and load tabular data.", "Make sure you install the necessary dependencies:", "Access your Spotify account dashboard at https://www.spotify.com/. In the privacy settings, you\u2019ll find the option to request your data. This requires some patience. Spotify says it takes up to thirty days, but it\u2019s usually much faster. In my case I waited three days.", "Eventually you will get an email with your Spotify data in a .zip file. Extract the MyData folder and copy it in your working folder.", "There are several files in our folder. Those that interest us look like this: StreamingHistory0.json. You might have one file or more, depending on the size of your streaming history. Let\u2019s open the file. My first song looks like this:", "Let\u2019s write a Python function that will collect all StreamingHistory files, extract the JSON objects and convert them into Python dictionaries.", "That\u2019s it. Now we have a timestamped list of all the tracks in our history.", "Spotify does not include song features in its data download. We\u2019ll have to request them via the Spotify API.", "Access to the API is free, but we\u2019ll need to register a Spotify app. No worries: it only takes a few minutes. Just sign up here.", "Congratulations: you are officially a Spotify developer!", "Go to your new developer dashboard and click on \u2018Create an App\u2019. Don\u2019t worry about the details. Spotify will allow you to create dummy apps as long as you promise not to monetize them. But you should avoid using \u2018Spotify\u2019 in the name, or it might get blocked.", "Nobody could explain it this simply to me, so here goes. An app can access the Spotify API, but only if it gets permission from at least one user. So we\u2019ll use the app to ask ourselves permission to access our user data.", "We need to provide a \u2018redirect link\u2019 that we\u2019ll use to collect the user\u2019s permission. From your app\u2019s panel in the developer dashboard, click on \u2018Edit Settings\u2019 and add a link under Redirect URIs. This doesn\u2019t have to be a real link: if you don\u2019t have a website, you can simply use http://localhost:7777/callback.", "You will also need your app\u2019s Client ID and Client Secret. You\u2019ll find them in the app panel under your app\u2019s name. Now you have all you need to access the Spotify API!", "Spotipy to the rescue. Insert the variables you just collected in these fields:", "This function packages a request that goes from your app (identified through the Client Id and the Client Secret) to the user (identified by the Spotify username).", "The request has a scope, which defines which permissions you\u2019re going to ask. You can learn more about scopes here.", "Finally, you\u2019ll need to provide a Redirect URI. This must correspond to the one you white-listed in your app\u2019s settings (see previous section).", "The function returns a token, which is basically a string that we\u2019ll use to assure the Spotify API that we have user authorization.", "Once you run the function with the right parameters, it will open an authorization panel in your web browser. Follow the link, log with your Spotify credentials and you should see something like this:", "Now you can finally authorize your app. Once you click on Agree, you will be taken to the Redirect URI, which may well be a nonexistent page. Just copy the address and paste it in your Python console.", "That\u2019s it. If you print your token variable in the console, you should see something like this:", "But there\u2019s more. If you shut down your code and run it again, you won\u2019t have to provide authorization, despite the token variable having been lost to memory. Spotipy seems to remember your token. What is happening here?", "If you go to your working folder and enable hidden files visualization, you will see that Spotipy has created a new file named .cache-your-username.", "As you can see, your access token has an expiration period, typically of one hour. But Spotify also provides you with a refresh token. When the original token expires, your app can use the refresh token to request a new one.", "Hence, it\u2019s important that you call the prompt_for_user_token function to load the token every time you run your script. If it finds a cache file, it will use it. If you move or delete the cache file, your tokens will be lost and the user will have to authorize you again.", "The Spotify data download does not provide us with tracks\u2019 IDs. We need those IDs to get the features.", "We can obtain the IDs by using the API to search the name of our track, taking the first result and extracting the ID. Spotify shows how to build such requests in the documentation.", "I wanted to use the Requests library to perform this in Python. Since I\u2019m not yet familiar with it, I used the script at https://curl.trillworks.com/ to convert the curl command into Python Requests code. Here is Spotify\u2019s example of a curl command:", "And here is the function I wrote with the help of curlconverter:", "Nice. Paste that ID in Open Spotify and get a load of classic.", "Now that we have our IDs, it\u2019s a breeze to get the features from the API.", "Let\u2019s test it on our track:", "Wonderful! Now we have all we need to build our streaming history dataframe. The easiest way is to create a list of dictionaries:", "(If you have thousands of songs in your history, getting the data from the API could take considerable time. I suggest you first test your code on a sample.)", "Voil\u00e0. We have a nice stack of streamings, and with features to boot. Now we can use Pandas to turn our list of dicts into a dataframe and export it to CSV.", "If you head over to my GitHub, you\u2019ll see my code is a bit different. When you repeat API requests, you might get responses that were denied in the first run. Also, in the future you might want to rerun the code with a new batch of streamings. But API requests are slow, so I\u2019ve added functions that save the IDs and features that you already collected, allowing you to make new requests without repeating old ones.", "Once you have your streaming history with all the features, you can unsheathe your Pandas/Matplotlib skills to analyse and plot them. You could even apply machine learning to answer some interesting questions.", "If you have a friend and partner who\u2019s into Spotify, you can use this script to gift them their history. Just enter their username in your code, send them the authorization link, and make sure they send you the Redirect URI.", "In the follow-up, I\u2019ll explore how we can analyse the data we just collected. Meanwhile, you can check other cool articles on the subject.", "That\u2019s the end of my first Medium story. Thanks for reading!", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "I like to learn difficult things and explain them simply."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fd5a208bbcbd3&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fget-your-spotify-streaming-history-with-python-d5a208bbcbd3&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fget-your-spotify-streaming-history-with-python-d5a208bbcbd3&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fget-your-spotify-streaming-history-with-python-d5a208bbcbd3&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fget-your-spotify-streaming-history-with-python-d5a208bbcbd3&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----d5a208bbcbd3--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----d5a208bbcbd3--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@vlad.publish?source=post_page-----d5a208bbcbd3--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@vlad.publish?source=post_page-----d5a208bbcbd3--------------------------------", "anchor_text": "Vlad Gheorghe"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fabd2f990eeab&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fget-your-spotify-streaming-history-with-python-d5a208bbcbd3&user=Vlad+Gheorghe&userId=abd2f990eeab&source=post_page-abd2f990eeab----d5a208bbcbd3---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fd5a208bbcbd3&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fget-your-spotify-streaming-history-with-python-d5a208bbcbd3&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fd5a208bbcbd3&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fget-your-spotify-streaming-history-with-python-d5a208bbcbd3&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://commons.wikimedia.org/wiki/File:Foodiesfeed.com_pouring-honey-on-pancakes-with-walnuts.jpg", "anchor_text": "Source"}, {"url": "https://github.com/vlad-ds/spoty-records", "anchor_text": "GitHub"}, {"url": "https://developer.spotify.com/documentation/web-api/reference/tracks/get-audio-features/", "anchor_text": "documentation"}, {"url": "https://github.com/plamere/spotipy/commits?author=stephanebruckert", "anchor_text": "Spotipy"}, {"url": "https://www.spotify.com/", "anchor_text": "https://www.spotify.com/"}, {"url": "https://developer.spotify.com/", "anchor_text": "here"}, {"url": "https://developer.spotify.com/dashboard/applications", "anchor_text": "developer dashboard"}, {"url": "http://localhost:7777/callback", "anchor_text": "http://localhost:7777/callback"}, {"url": "https://developer.spotify.com/documentation/general/guides/scopes/", "anchor_text": "here"}, {"url": "https://developer.spotify.com/documentation/web-api/reference/search/search/", "anchor_text": "documentation"}, {"url": "https://curl.trillworks.com/", "anchor_text": "https://curl.trillworks.com/"}, {"url": "https://github.com/NickCarneiro/curlconverter", "anchor_text": "curlconverter"}, {"url": "https://open.spotify.com/album/6QaVfG1pHYl1z15ZxkvVDW?highlight=spotify:track:25yQPHgC35WNnnOUqFhgVR", "anchor_text": "Paste that ID in Open Spotify"}, {"url": "https://github.com/vlad-ds/spoty-records", "anchor_text": "GitHub"}, {"url": "https://towardsdatascience.com/a-music-taste-analysis-using-spotify-api-and-python-e52d186db5fc", "anchor_text": "apply machine learning"}, {"url": "https://towardsdatascience.com/is-my-spotify-music-boring-an-analysis-involving-music-data-and-machine-learning-47550ae931de", "anchor_text": "other cool articles"}, {"url": "https://medium.com/tag/python?source=post_page-----d5a208bbcbd3---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/spotify?source=post_page-----d5a208bbcbd3---------------spotify-----------------", "anchor_text": "Spotify"}, {"url": "https://medium.com/tag/api?source=post_page-----d5a208bbcbd3---------------api-----------------", "anchor_text": "API"}, {"url": "https://medium.com/tag/data-mining?source=post_page-----d5a208bbcbd3---------------data_mining-----------------", "anchor_text": "Data Mining"}, {"url": "https://medium.com/tag/music?source=post_page-----d5a208bbcbd3---------------music-----------------", "anchor_text": "Music"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fd5a208bbcbd3&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fget-your-spotify-streaming-history-with-python-d5a208bbcbd3&user=Vlad+Gheorghe&userId=abd2f990eeab&source=-----d5a208bbcbd3---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fd5a208bbcbd3&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fget-your-spotify-streaming-history-with-python-d5a208bbcbd3&user=Vlad+Gheorghe&userId=abd2f990eeab&source=-----d5a208bbcbd3---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fd5a208bbcbd3&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fget-your-spotify-streaming-history-with-python-d5a208bbcbd3&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----d5a208bbcbd3--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fd5a208bbcbd3&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fget-your-spotify-streaming-history-with-python-d5a208bbcbd3&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----d5a208bbcbd3---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----d5a208bbcbd3--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----d5a208bbcbd3--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----d5a208bbcbd3--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----d5a208bbcbd3--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----d5a208bbcbd3--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----d5a208bbcbd3--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----d5a208bbcbd3--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----d5a208bbcbd3--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@vlad.publish?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@vlad.publish?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Vlad Gheorghe"}, {"url": "https://medium.com/@vlad.publish/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "56 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fabd2f990eeab&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fget-your-spotify-streaming-history-with-python-d5a208bbcbd3&user=Vlad+Gheorghe&userId=abd2f990eeab&source=post_page-abd2f990eeab--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fe997f8781fd6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fget-your-spotify-streaming-history-with-python-d5a208bbcbd3&newsletterV3=abd2f990eeab&newsletterV3Id=e997f8781fd6&user=Vlad+Gheorghe&userId=abd2f990eeab&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}