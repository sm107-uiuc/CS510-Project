{"url": "https://towardsdatascience.com/aws-lambda-performance-pro-tips-and-tricks-322452844ddf", "time": 1683009277.080023, "path": "towardsdatascience.com/aws-lambda-performance-pro-tips-and-tricks-322452844ddf/", "webpage": {"metadata": {"title": "AWS Lambda Performance: Pro Tips and Tricks | by Gilad David Maayan | Towards Data Science", "h1": "AWS Lambda Performance: Pro Tips and Tricks", "description": "Lambda is a serverless cloud compute service offered by Amazon Web Services (AWS). The service enables you to run backend code on AWS services without managing infrastructure. The code you run on AWS\u2026"}, "outgoing_paragraph_urls": [{"url": "https://aws.amazon.com/lambda/getting-started/", "anchor_text": "setting up functions", "paragraph_index": 2}, {"url": "https://lumigo.io/blog/how-to-improve-aws-lambda-cold-start-performance/", "anchor_text": "Lambda cold start", "paragraph_index": 11}], "all_paragraphs": ["Lambda is a serverless cloud compute service offered by Amazon Web Services (AWS). The service enables you to run backend code on AWS services without managing infrastructure. The code you run on AWS Lambda is called functions. You can use your own functions or pre-made functions. Once your function is loaded, you select an AWS event source. You can set up events according to your needs, and then let Lambda run automatically.", "Lambda is a great solution if you don\u2019t want to handle provisioning, resources, and other computing tasks. However, you still need to set up your functions and triggers in a way that ensures performance. This article explains how AWS Lambda performance is impacted by cold start time, execution time, and concurrency. You will also learn how to diagnose and optimize Lambda performance issues.", "When setting up functions with AWS Lambda several issues undermine the speed and flexibility that are supposed to come with serverless. When functions aren\u2019t performing as expected, the following three causes are the most common culprit.", "After invocation, functions stay warm for an undeclared amount of time. Generally around 30 minutes. After that, the function instance is killed and the next invocation requires a new instance to be created and initialized. This cold start adds time and cost to your operations. Latency for cold starts can be up to 10 seconds and you\u2019re charged for the time it takes the function to warm up.", "Lambda functions are allowed to run for up to 15 minutes for each invocation. This is a hard limit that you can\u2019t change. It also doesn\u2019t matter why a function runtime is long, whether your function is waiting for responses, or if it requires extensive computation. Because of this limit, you should consider another method for any function that runs near 15 minutes.", "With Lamba, each function instance can only be invoked one at a time. If you invoke it again during runtime a new instance is created up to your concurrency limit. Concurrency can burst up to 3k in the US (west and east) and Europe (Ireland), 1k in Asia Pacific (Tokyo) and Europe (Frankfurt), and 500 for other regions. For more concurrent instances you must request AWS to increase the number. If you do not, any invocations beyond the limit are throttled.", "Diagnosing performance issues in Lambda can be tricky. The ephemeral nature of the functions requires dynamic monitoring and the distributed nature of serverless architectures makes debugging difficult.", "Outside of the function and resource requirements you provide to Lambda, you have little control over how your function instances operate. This means you cannot use daemons for monitoring or easily export logs to external platforms. However, AWS does offer a few solutions to help you get over this hurdle.", "When debugging your functions, you can easily combine CloudWatch and X-Ray information to identify performance bottlenecks and request issues for single invocations. However, using these services for multiple invocations can be a challenge because logging from all of your invocations is mixed in CloudWatch Logs. This makes it difficult to view data in a time-ordered way.", "If you are trying to debug what went wrong across multiple functions or services, the above tools provide even less help. This means that to debug effectively, you need to export your data to a third-party platform.", "Outside of monitoring and debugging, there are several best practices you can adopt to help reduce or prevent performance issues. Below are a few practices to consider.", "Reducing the impact of cold starts is one of the most effective ways to improve your function performance. There are several methods to reduce Lambda cold start time but you can also eliminate many cold starts.", "To avoid cold starts at all you can use warmer logic. This logic is included in a handler function that is used to interface with your Lambda function and your event trigger. The warmer logic calls a negligible bit of logic in your main function in 5 to 10-minute increments to ensure that the instance stays alive for when you actually need to invoke it. You can accomplish these calls with a cron job or there are a few modules available that you can use to warm in batches.", "When defining the resource requirements for your function, you can only specify RAM, up to 3GB. Whatever amount you indicate, a proportional amount of CPU power is also allocated. For each 1,792 MB you allocate, one virtual CPU is added to your resources.", "To optimize, you need to find the balance between function performance and cost. For single-threaded applications, this generally means 1.8GB of RAM or less. For multi-threaded apps with CPU bound code, anything less than 1.8GB is probably ineffective.", "The best way to catch exceptions in your functions is to embed logging statements that export to CloudWatch Logs. This can be done with either common stdout or stderr statements or with language-specific log methods.", "Either way, you need to make sure that the Identity and Access Management (IAM) role assigned to your function has permission to publish logs to CloudWatch. If not, your logs will only show permission denied errors which aren\u2019t helpful.", "Once you reach your concurrency limits, invocation requests are throttled and return an error. This is true for both reserved and unreserved concurrency. One caveat of this limit is that it depends on how the function was invoked. For stream-based events, the limit is determined by the parallelization factor. This factor determines how many concurrent invocations are used to process each shard of a data stream.", "For non-stream-based events, the number of counted invocation requests is the true number of invocations times the function duration. This means you can quickly meet your limit even if you aren\u2019t newly invoking that many function instances at a given time.", "To get around this and avoid returning errors you can:", "There are three main factors that greatly affect AWS Lambda performance \u2014 cold start time, execution time, and concurrency. These three issues are directly connected to the lifespan of each function, and how you can utilize functions. Since you are billed for usage, and what you are using is functions, cold start time, execution time, and concurrency issues impact not only latency but also billing.", "To ensure your functions are performed properly, you should continually monitor, log, trace, and debug. You can use AWS CloudWatch to set up automated metrics-based monitoring. For logging, inserting statements into your code can help you send data to CloudWatch. You can use AWS X-Ray for end-to-end tracing of Lambda functions. You will then be able to identify issues and debug.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Head of Agile SEO, a technology writer who has worked with SAP, Samsung, NetApp, and hundreds of other technology brands."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F322452844ddf&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Faws-lambda-performance-pro-tips-and-tricks-322452844ddf&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Faws-lambda-performance-pro-tips-and-tricks-322452844ddf&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Faws-lambda-performance-pro-tips-and-tricks-322452844ddf&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Faws-lambda-performance-pro-tips-and-tricks-322452844ddf&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----322452844ddf--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----322452844ddf--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@giladm_95339?source=post_page-----322452844ddf--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@giladm_95339?source=post_page-----322452844ddf--------------------------------", "anchor_text": "Gilad David Maayan"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F622b354f4&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Faws-lambda-performance-pro-tips-and-tricks-322452844ddf&user=Gilad+David+Maayan&userId=622b354f4&source=post_page-622b354f4----322452844ddf---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F322452844ddf&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Faws-lambda-performance-pro-tips-and-tricks-322452844ddf&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F322452844ddf&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Faws-lambda-performance-pro-tips-and-tricks-322452844ddf&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://pixabay.com/illustrations/digitization-transformation-binary-5140071/", "anchor_text": "Image Source"}, {"url": "https://aws.amazon.com/lambda/getting-started/", "anchor_text": "setting up functions"}, {"url": "https://lumigo.io/blog/how-to-improve-aws-lambda-cold-start-performance/", "anchor_text": "Lambda cold start"}, {"url": "https://medium.com/@sorenso/what-ive-learned-working-with-amazon-sqs-f0192fc10a29", "anchor_text": "SQS"}, {"url": "https://medium.com/tag/aws-lambda?source=post_page-----322452844ddf---------------aws_lambda-----------------", "anchor_text": "AWS Lambda"}, {"url": "https://medium.com/tag/aws-lambda-functions?source=post_page-----322452844ddf---------------aws_lambda_functions-----------------", "anchor_text": "Aws Lambda Functions"}, {"url": "https://medium.com/tag/tips-and-tricks?source=post_page-----322452844ddf---------------tips_and_tricks-----------------", "anchor_text": "Tips And Tricks"}, {"url": "https://medium.com/tag/towards-data-science?source=post_page-----322452844ddf---------------towards_data_science-----------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F322452844ddf&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Faws-lambda-performance-pro-tips-and-tricks-322452844ddf&user=Gilad+David+Maayan&userId=622b354f4&source=-----322452844ddf---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F322452844ddf&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Faws-lambda-performance-pro-tips-and-tricks-322452844ddf&user=Gilad+David+Maayan&userId=622b354f4&source=-----322452844ddf---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F322452844ddf&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Faws-lambda-performance-pro-tips-and-tricks-322452844ddf&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----322452844ddf--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F322452844ddf&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Faws-lambda-performance-pro-tips-and-tricks-322452844ddf&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----322452844ddf---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----322452844ddf--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----322452844ddf--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----322452844ddf--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----322452844ddf--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----322452844ddf--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----322452844ddf--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----322452844ddf--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----322452844ddf--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@giladm_95339?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@giladm_95339?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Gilad David Maayan"}, {"url": "https://medium.com/@giladm_95339/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "177 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F622b354f4&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Faws-lambda-performance-pro-tips-and-tricks-322452844ddf&user=Gilad+David+Maayan&userId=622b354f4&source=post_page-622b354f4--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fb1697517f98f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Faws-lambda-performance-pro-tips-and-tricks-322452844ddf&newsletterV3=622b354f4&newsletterV3Id=b1697517f98f&user=Gilad+David+Maayan&userId=622b354f4&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}