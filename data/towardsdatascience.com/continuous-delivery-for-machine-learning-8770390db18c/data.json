{"url": "https://towardsdatascience.com/continuous-delivery-for-machine-learning-8770390db18c", "time": 1683014282.2563589, "path": "towardsdatascience.com/continuous-delivery-for-machine-learning-8770390db18c/", "webpage": {"metadata": {"title": "Continuous Delivery for Machine Learning Systems | by Adarsh Shah | Sep, 2020 | Towards Data Science | Towards Data Science", "h1": "Continuous Delivery for Machine Learning Systems", "description": "Deploying Machine Learning Systems to Production safely and quickly in a sustainable way using Continuous Delivery"}, "outgoing_paragraph_urls": [{"url": "https://shahadarsh.com/2020/06/19/challenges-deploying-machine-learning-models-to-production/", "anchor_text": "previous article", "paragraph_index": 1}, {"url": "https://continuousdelivery.com/principles/", "anchor_text": "here", "paragraph_index": 4}, {"url": "https://shahadarsh.com/2020/06/19/challenges-deploying-machine-learning-models-to-production/#Stage_1_Data_Management", "anchor_text": "here", "paragraph_index": 12}, {"url": "https://dvc.org/", "anchor_text": "dvc", "paragraph_index": 15}, {"url": "https://martinfowler.com/articles/feature-toggles.html", "anchor_text": "feature toggles", "paragraph_index": 20}, {"url": "https://shahadarsh.com/2020/06/19/challenges-deploying-machine-learning-models-to-production/#Stage_2_Experimentation", "anchor_text": "here", "paragraph_index": 22}, {"url": "https://shahadarsh.com/2020/07/12/principles-patterns-and-practices-for-effective-infrastructure-as-code/", "anchor_text": "here", "paragraph_index": 29}, {"url": "https://formtek.com/blog/containers-build-once-run-anywhere-technology-a-boon-for-application-services/", "anchor_text": "Build Once, Run Anywhere", "paragraph_index": 31}, {"url": "https://shahadarsh.com/2020/06/19/challenges-deploying-machine-learning-models-to-production/#Stage_3_Production_Deployment", "anchor_text": "here", "paragraph_index": 32}, {"url": "https://twitter.com/shahadarsh", "anchor_text": "twitter", "paragraph_index": 37}, {"url": "http://shahadarsh.com", "anchor_text": "shahadarsh.com", "paragraph_index": 39}], "all_paragraphs": ["What is Continuous Delivery?Continuous IntegrationContinuous Delivery vs. Continuous DeploymentMachine Learning WorkflowHow does Continuous Delivery help with ML challenges?Data Management- Automated Data PipelineExperimentation- Training Code- Training ProcessProduction Deployment- Application CodeBringing it all togetherPeopleConclusion", "Most of the principles and practices of traditional software development can be applied to Machine Learning(ML), but certain unique ML specific challenges need to be handled differently. We discussed those unique \u201cChallenges Deploying Machine Learning Models to Production\u201d in the previous article. This article will look at how Continuous Delivery that has helped traditional software solve its deployment challenges be applied to Machine Learning.", "Continuous Delivery is the ability to get changes of all types \u2014 including new features, configuration changes, bug fixes, and experiments \u2014 into production, or into the hands of users, safely and quickly, in a sustainable way.", "- Jez Humble and Dave Farley (Continuous Delivery Book Authors)", "Below are the Continuous Delivery Principles defined in the book, and you can read more about it here.", "Continuous Integration (CI) should be the first step for teams starting the Continuous Delivery journey. As you can see in the definition below, CI helps find any integration errors as quickly as possible, thereby increasing team productivity.", "Continuous Integration is a software development practice where members of a team integrate their work frequently, usually, each person integrates at least daily \u2014 leading to multiple integrations per day. Each integration is verified by an automated build (including test) to detect integration errors as quickly as possible.", "We won\u2019t be talking much about Continuous Deployment in this article, but it is good to understand the difference between Continuous Delivery and Continuous Deployment. As you can see in the diagram below, Continuous Delivery includes a manual approval step before deploying to production. Still, every time code is pushed to the main branch, it goes through various automated steps and is ready for deployment. Meanwhile, if all the steps succeed, it automatically deploys the new code to production in case of continuous deployment.", "As we saw in the previous article, a typical ML workflow includes Data Management, Experimentation, and Production Deployment shown in the diagram below. We broke down the challenges by these 3 phases.", "Now let\u2019s look at how Continuous Delivery can help resolve Machine Learning specific Challenges. We will go over each phase of ML workflow, its challenges, and how CD can resolve them.", "The training dataset is the output of the Data Management phase that then feeds into the training process. It is one of the fundamental factors that determine how well a model performs. This stage typically includes data acquisition and preparation. Adding an automated data pipeline for the generation of training dataset helps solve most of the challenges during this phase.", "An automated data pipeline includes the following steps:", "See below the challenges defined in the previous article & how adding an automated data pipeline helps solve the challenges. You can read more about the challenges here.", "Challenge: Large Data SizeSolution: Since model training usually requires large data sets, it is time-consuming & costly to process it manually. Having an automated data pipeline like mentioned above, makes the process repeatable and saves a lot of time and reduces the chances of having data issues.", "Challenge: High-Quality DataSolution: Adding automated Data Validation and Testing for things like Bias and Fairness, plus Security and Compliance, helps ensure the data is of high quality, which helps produce better models.", "Challenge: Dataset Tracking Solution: Keeping track of experiments and training helps compare various training runs to see what works and what doesn\u2019t. Versioning data helps in tracking which dataset gives you better results. As you can see in the diagram above, there should be a step to the version dataset. There are tools like dvc available that provide version control for data.", "Challenge: LocationSolution: When datasets reside in various locations, and it might not make sense to transfer it due to large size, transfer costs, or compliance reasons, it makes sense to run data pipeline, training, or even prediction closer to where the data resides. Having an automated pipeline for these that can easily be run anywhere with minimum effort helps in those cases.", "Caution: Make sure this is worth the effort. If you can manage without adding this complexity and run things centrally, I recommend you do that.", "Challenge: Security and ComplianceSolution: As seen in the diagram above, to ensure data is secure and compliant, add automated security and compliance tests in your data pipelines.", "This stage includes Model development, where Data Scientists focus a lot of their time researching various architectures to see what fits their needs. They need to write the Training Code and use the Training Dataset generated from the Data Management phase and configuration to train the model.", "Even though this is a training code and not a production code having continuous integration for the code helps find issues faster. Due to the research and experimentation phase, a lot of code written is usually not of high quality, but adding things like Static analysis and Unit testing will help find any issues faster and provide faster feedback. At the end of CI for training code, there should be a versioned artifact generated (docker image, zip file, etc.) that will then be used to train the model. Since this is an experimentation phase, there might be a lot of changes happening. Still, I would highly encourage you to merge changes frequently to the main branch and run CI. Use of techniques like feature toggles or versioning the artifact as alpha, beta, or release helps identify artifacts that can be used in the training process.", "See below (in diagram #5) typical training process and various pieces involved. Training Dataset generated in the previous phase and the Training Code written during the last step, and any training environment configuration is used as an input to the training process. Data Scientists trigger the training process, which might run for hours or days. After its completed, automated accuracy evaluation should be added to see whether the model meets expected standards. Adding a Bias and Fairness testing step here also helps make sure the model is fair when it will run in Production against live data. If everything goes well, the model should be versioned and stored in an artifact repository to be fetched during deployment to production.", "Challenges that you can read about more here:", "Challenge: Constant Research and Experimentation Workflow Solution: Adding CI for Training Code and making sure that the training code, training dataset, and the model generated are versioned helps in finding issues faster and tracking any changes made. As mentioned above, even though there are usually many changes happening during this phase, I would highly encourage to merge changes frequently to the main branch and run CI.", "Challenge: Tracking ExperimentsSolution: By tracking various components of the training process like training dataset, training code, model, etc. we can easily reproduce results and track experiments.", "Challenge: Code QualitySolution: Adding CI and automated tests help improve code quality as issues can be found sooner and fixed.", "Challenge: Training Time and TroubleshootingSolution: Since Training usually takes hours or even days having automation to find issues faster and appropriate monitoring, alerting & log aggregation helps in troubleshooting those issues better.", "Challenge: Model Accuracy EvaluationSolution: Adding a step to automatically evaluate model accuracy enables a comparison between various runs and picking the best performing model for production deployment.", "Challenge: RetrainingSolution: Often, when there is a data drift or changes in logic, models need to be retrained. For that, having the automation mentioned above helps.", "Challenge: Infrastructure RequirementsSolution: Training and sometimes prediction has certain special Infrastructure requirements like GPU & High-Density Cores. These are usually costly and are only needed in periodic bursts. Having automation using Infrastructure as Code to provision/de-provision infrastructure (especially when using the cloud) reduces the cost and reduces issues that come with long-lived infrastructure. For more info, read my article on Infrastructure as Code here.", "After the model is trained and reaches certain accuracy, it gets deployed to production, where it starts making predictions against live data.", "Once the model is trained, it gets used by the application code (web service or an application) that consumes it to make predictions against live data. Continuous Integration for Application code goes through various steps to ensure the quality of code and packages the model into the artifact generated at the end of CI. (Note: You can also pull the model during runtime in production, but you lose the \u201cBuild Once, Run Anywhere\u201d aspect with it.)", "Challenges during production deployment that you can read about more here:", "Challenge: Offline/Online PredictionSolution: Providing support for offline(batch) and online(real-time) prediction depending on the needs is essential. When you are building a system for Production deployment, you should think about this aspect.", "Challenge: Model DegradationSolution: Adding smoke tests after every deployment and appropriate monitoring & alerting for model accuracy changes due to data drift or other reasons, and a good incident management process helps avoid and recover from accuracy levels going lower than accepted.", "See the below diagram that brings all the stages/steps we have discussed so far for the end to end processing.", "I will be writing a detailed article on this later, but people are essential for continuous delivery to be effective. Removing any silos between your ML Researchers, ML Engineers, Application Developers, Data Engineers, and DevOps/SRE folks and facilitating collaboration helps. Implementing the suggestions mentioned in this article will enable collaboration between various teams/individuals.", "Thanks for reading the article, and I hope that you find it useful. If you have any questions, let me know in the comments below or reach out to me on twitter.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Engineering Leader, Independent Consultant, Coach, Public Speaker, Hands-on Architect | Website: shahadarsh.com"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F8770390db18c&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcontinuous-delivery-for-machine-learning-8770390db18c&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcontinuous-delivery-for-machine-learning-8770390db18c&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcontinuous-delivery-for-machine-learning-8770390db18c&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcontinuous-delivery-for-machine-learning-8770390db18c&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----8770390db18c--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----8770390db18c--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://shahadarsh.medium.com/?source=post_page-----8770390db18c--------------------------------", "anchor_text": ""}, {"url": "https://shahadarsh.medium.com/?source=post_page-----8770390db18c--------------------------------", "anchor_text": "Adarsh Shah"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F4a718c031f75&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcontinuous-delivery-for-machine-learning-8770390db18c&user=Adarsh+Shah&userId=4a718c031f75&source=post_page-4a718c031f75----8770390db18c---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F8770390db18c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcontinuous-delivery-for-machine-learning-8770390db18c&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F8770390db18c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcontinuous-delivery-for-machine-learning-8770390db18c&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://shahadarsh.com/2020/06/19/challenges-deploying-machine-learning-models-to-production/", "anchor_text": "previous article"}, {"url": "https://continuousdelivery.com/principles/", "anchor_text": "here"}, {"url": "https://en.wikipedia.org/wiki/Adapter_pattern", "anchor_text": "Adapter Pattern"}, {"url": "https://shahadarsh.com/2020/06/19/challenges-deploying-machine-learning-models-to-production/#Stage_1_Data_Management", "anchor_text": "here"}, {"url": "https://dvc.org/", "anchor_text": "dvc"}, {"url": "https://martinfowler.com/articles/feature-toggles.html", "anchor_text": "feature toggles"}, {"url": "https://shahadarsh.com/2020/06/19/challenges-deploying-machine-learning-models-to-production/#Stage_2_Experimentation", "anchor_text": "here"}, {"url": "https://shahadarsh.com/2020/07/12/principles-patterns-and-practices-for-effective-infrastructure-as-code/", "anchor_text": "here"}, {"url": "https://formtek.com/blog/containers-build-once-run-anywhere-technology-a-boon-for-application-services/", "anchor_text": "Build Once, Run Anywhere"}, {"url": "https://shahadarsh.com/2020/06/19/challenges-deploying-machine-learning-models-to-production/#Stage_3_Production_Deployment", "anchor_text": "here"}, {"url": "https://twitter.com/shahadarsh", "anchor_text": "twitter"}, {"url": "https://shahadarsh.com/2020/09/21/continuous-delivery-for-machine-learning/", "anchor_text": "my website"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----8770390db18c---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/tag/continuous-delivery?source=post_page-----8770390db18c---------------continuous_delivery-----------------", "anchor_text": "Continuous Delivery"}, {"url": "https://medium.com/tag/mlops?source=post_page-----8770390db18c---------------mlops-----------------", "anchor_text": "Mlops"}, {"url": "https://medium.com/tag/devops4ml?source=post_page-----8770390db18c---------------devops4ml-----------------", "anchor_text": "Devops4ml"}, {"url": "https://medium.com/tag/data-science?source=post_page-----8770390db18c---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F8770390db18c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcontinuous-delivery-for-machine-learning-8770390db18c&user=Adarsh+Shah&userId=4a718c031f75&source=-----8770390db18c---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F8770390db18c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcontinuous-delivery-for-machine-learning-8770390db18c&user=Adarsh+Shah&userId=4a718c031f75&source=-----8770390db18c---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F8770390db18c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcontinuous-delivery-for-machine-learning-8770390db18c&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----8770390db18c--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F8770390db18c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcontinuous-delivery-for-machine-learning-8770390db18c&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----8770390db18c---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----8770390db18c--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----8770390db18c--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----8770390db18c--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----8770390db18c--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----8770390db18c--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----8770390db18c--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----8770390db18c--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----8770390db18c--------------------------------", "anchor_text": ""}, {"url": "https://shahadarsh.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://shahadarsh.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Adarsh Shah"}, {"url": "https://shahadarsh.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "119 Followers"}, {"url": "http://shahadarsh.com", "anchor_text": "shahadarsh.com"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F4a718c031f75&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcontinuous-delivery-for-machine-learning-8770390db18c&user=Adarsh+Shah&userId=4a718c031f75&source=post_page-4a718c031f75--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fe3e4b1390763&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcontinuous-delivery-for-machine-learning-8770390db18c&newsletterV3=4a718c031f75&newsletterV3Id=e3e4b1390763&user=Adarsh+Shah&userId=4a718c031f75&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}