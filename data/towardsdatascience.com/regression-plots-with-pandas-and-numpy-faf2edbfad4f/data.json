{"url": "https://towardsdatascience.com/regression-plots-with-pandas-and-numpy-faf2edbfad4f", "time": 1683012476.915872, "path": "towardsdatascience.com/regression-plots-with-pandas-and-numpy-faf2edbfad4f/", "webpage": {"metadata": {"title": "Regression Plots with Pandas and Numpy | by Alan Jones | Towards Data Science", "h1": "Regression Plots with Pandas and Numpy", "description": "I like the plotting facilities that come with Pandas. Yes, there are many other plotting libraries such as Seaborn, Bokeh and Plotly but for most purposes, I am very happy with the simplicity of\u2026"}, "outgoing_paragraph_urls": [], "all_paragraphs": ["I like the plotting facilities that come with Pandas. Yes, there are many other plotting libraries such as Seaborn, Bokeh and Plotly but for most purposes, I am very happy with the simplicity of Pandas plotting.", "But there is one thing missing that I would like and that is the ability to plot a regression line over a complex line or scatter plot.", "But, as I have discovered, this is very easily solved. With the Numpy library you can generate regression data in a couple of lines of code and plot it in the same figure as your original line or scatter plot.", "So that is what we are going to do in this article.", "First, let\u2019s get some data. If you\u2019ve read any of my previous articles on data visualization, you know what\u2019s coming next. I\u2019m going to use a set of weather data that you can download from my Github account. It records the temperatures, sunshine levels and rainfall over several decades for London in the UK and is stored as a CSV file. This file has been created from public domain data recorded by the UK Met Office.", "We are going to check whether the temperatures in London are rising over time. It\u2019s not obvious from the raw data but by plotting a regression line over that data we will be better able to see the trend.", "So to begin we need to import the libraries that we will need.", "Nothing very unusual there, we are importing Pandas to help with data analysis and visualization, Numpy will give us the routines we need to create the regression data and Matplotlib is used by Pandas to create the plots.", "(As you probably guessed, that\u2019s all supposed to be on one line.)", "We have read the CSV file into a Pandas DataFrame and this is what it looks like \u2014 a table containing monthly data that records the maximum and minimum temperatures, the rainfall and the number of hours of sunshine, starting in 1957 and ending part way through 2019.", "I posed the question about whether summers were getting hotter, so I\u2019m going to filter the data to give me only the data for the month of July when the hottest temperatures are normally recorded. And, for convenience, I\u2019m going to add a column that numbers the years starting at year 0 (you\u2019ll see how this is used later).", "The code above applies a query to the weather dataframe which returns only the rows where the Month is equal to 7 (i.e.July) and creates a new dataframe called july from the result.", "Next, we insert a new column called Yr which numbers the rows from 0 to the length of the table.", "Now we can plot the maximum temperatures for July since 1957.", "There is a lot of variation there and high temperatures are not limited to recent years. But there does seem to be a trend, temperatures do seem to be rising a little, over time.", "We can try and make this a bit more obvious by doing a linear regression where we attempt to find a straight line graph that represents the trend in the rise in temperature. To do this we use the polyfit function from Numpy. Polyfit does a least squares polynomial fit over the data that it is given. We want a linear regression over the data in columns Yr and Tmax so we pass these as parameters. The final parameter is the degree of the polynomial. For linear regression the degree is 1.", "We then use the convenience function poly1d to provide us with a function that will do the fitting.", "We now use the function f to produce our linear regression data and inserting that into a new column called Treg.", "Next, we create a line plot of Yr against Tmax (the wiggly plot we saw above) and another of Yr against Treg which will be our straight line regression plot. We combine the two plot by assigning the first plot to the variable ax and then passing that to the second plot as an additional axis.", "We can now see much more clearly the upward trend of temperature over the years.", "And here is the same thing done with a scatter chart.", "That was fairly straightforward, I think, and I hope you found it useful.", "For an introduction to plotting with Pandas see this:", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Ffaf2edbfad4f&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fregression-plots-with-pandas-and-numpy-faf2edbfad4f&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fregression-plots-with-pandas-and-numpy-faf2edbfad4f&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fregression-plots-with-pandas-and-numpy-faf2edbfad4f&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fregression-plots-with-pandas-and-numpy-faf2edbfad4f&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://me.dm/@alanjones", "anchor_text": "Mastodon"}, {"url": "https://towardsdatascience.com/?source=post_page-----faf2edbfad4f--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----faf2edbfad4f--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@alan-jones?source=post_page-----faf2edbfad4f--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@alan-jones?source=post_page-----faf2edbfad4f--------------------------------", "anchor_text": "Alan Jones"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F7d3f5fb94faa&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fregression-plots-with-pandas-and-numpy-faf2edbfad4f&user=Alan+Jones&userId=7d3f5fb94faa&source=post_page-7d3f5fb94faa----faf2edbfad4f---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ffaf2edbfad4f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fregression-plots-with-pandas-and-numpy-faf2edbfad4f&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ffaf2edbfad4f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fregression-plots-with-pandas-and-numpy-faf2edbfad4f&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@isaacmsmith?utm_source=medium&utm_medium=referral", "anchor_text": "Isaac Smith"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://towardsdatascience.com/plotting-with-pandas-an-introduction-to-data-visualization-8bd7c0831650", "anchor_text": "Plotting with Pandas: An Introduction to Data VisualizationIf you are a budding Data Scientist or Data Journalist, being able to visualize your data gives you the ability to\u2026towardsdatascience.com"}, {"url": "https://medium.com/tag/data-science?source=post_page-----faf2edbfad4f---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/data-visualization?source=post_page-----faf2edbfad4f---------------data_visualization-----------------", "anchor_text": "Data Visualization"}, {"url": "https://medium.com/tag/linear-regression?source=post_page-----faf2edbfad4f---------------linear_regression-----------------", "anchor_text": "Linear Regression"}, {"url": "https://medium.com/tag/python?source=post_page-----faf2edbfad4f---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/pandas?source=post_page-----faf2edbfad4f---------------pandas-----------------", "anchor_text": "Pandas"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Ffaf2edbfad4f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fregression-plots-with-pandas-and-numpy-faf2edbfad4f&user=Alan+Jones&userId=7d3f5fb94faa&source=-----faf2edbfad4f---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Ffaf2edbfad4f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fregression-plots-with-pandas-and-numpy-faf2edbfad4f&user=Alan+Jones&userId=7d3f5fb94faa&source=-----faf2edbfad4f---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ffaf2edbfad4f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fregression-plots-with-pandas-and-numpy-faf2edbfad4f&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----faf2edbfad4f--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Ffaf2edbfad4f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fregression-plots-with-pandas-and-numpy-faf2edbfad4f&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----faf2edbfad4f---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----faf2edbfad4f--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----faf2edbfad4f--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----faf2edbfad4f--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----faf2edbfad4f--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----faf2edbfad4f--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----faf2edbfad4f--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----faf2edbfad4f--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----faf2edbfad4f--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@alan-jones?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@alan-jones?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Alan Jones"}, {"url": "https://medium.com/@alan-jones/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "2K Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F7d3f5fb94faa&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fregression-plots-with-pandas-and-numpy-faf2edbfad4f&user=Alan+Jones&userId=7d3f5fb94faa&source=post_page-7d3f5fb94faa--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Ffc3a6cdb7554&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fregression-plots-with-pandas-and-numpy-faf2edbfad4f&newsletterV3=7d3f5fb94faa&newsletterV3Id=fc3a6cdb7554&user=Alan+Jones&userId=7d3f5fb94faa&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}