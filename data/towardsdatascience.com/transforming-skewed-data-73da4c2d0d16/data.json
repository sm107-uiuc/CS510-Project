{"url": "https://towardsdatascience.com/transforming-skewed-data-73da4c2d0d16", "time": 1682993624.0853, "path": "towardsdatascience.com/transforming-skewed-data-73da4c2d0d16/", "webpage": {"metadata": {"title": "Transforming Skewed Data | by Corey Wade | Towards Data Science", "h1": "Transforming Skewed Data", "description": "Note: The following code is written in Python and excerpted from various Jupyter Notebook. Inline comments have been eliminated to make the article more readable. Skewed data is cumbersome and\u2026"}, "outgoing_paragraph_urls": [{"url": "http://jmcauley.ucsd.edu/data/amazon/", "anchor_text": "Amazon Books Review Dataset", "paragraph_index": 3}, {"url": "https://github.com/coreyjwade/Helpful_Reviews", "anchor_text": "Helpful_Reviews", "paragraph_index": 40}], "all_paragraphs": ["Note: The following code is written in Python and excerpted from various Jupyter Notebook. Inline comments have been eliminated to make the article more readable.", "Skewed data is cumbersome and common. It\u2019s often desirable to transform skewed data and to convert it into values between 0 and 1.", "Standard functions used for such conversions include Normalization, the Sigmoid, Log, Cube Root and the Hyperbolic Tangent. It all depends on what one is trying to accomplish.", "Here\u2019s an example of a skewed column that I generated from an 8.9 million row Amazon Books Review Dataset (Julian McAuley, UCSD). df.Helpful_Votes gives the total number of helpful votes (as opposed to unhelpful) that each book review received.", "Removing outliers is an option, but not one that I want to use here. My end goal is to build a machine learning algorithm to predict whether a given review is helpful, so reviews with the most helpful votes are indispensable.", "I will use the functions listed above to transform the data, explaining pros and cons along the way. As with most data science, there is no correct function. It depends on the data, and the goal of the analyst.", "Normalization converts all data points to decimals between 0 and 1. If the min is 0, simply divide each point by the max.", "If the min is not 0, subtract the min from each point, and then divide by the min-max difference.", "The following function includes both cases.", "After normalization, the data is just as skewed as before. If the goal is simply to convert the data to points between 0 and 1, normalization is the way to go. Otherwise, normalization should be used in conjunction with other functions.", "Next, the Sigmoid function. It\u2019s worth looking at a visual if you have not seen the Sigmoid before.", "It\u2019s a beautifully smooth curve that guarantees a 0 to 1 range. Let\u2019s see how it performs on df.Helpful_Votes.", "A definite improvement. The new data is between 0 and 1 as expected, but the min is 0.5. This makes sense when looking at the graph as there are no negative values when tallying votes.", "Another point of consideration is the spread. Here, the 75th percentile is within 0.2 of the 100th percentile, comparable to other quartiles. But in the original data, the 75th percentile more than 20,000 away from the 100th percentile, not remotely close to other quartiles. In this case, the data has been distorted.", "The sigmoid function can be tweaked to improve results, but for now, let\u2019s explore other options.", "Next up, logarithms. An excellent choice for making data less skewed. When using log with Python, the default base is usually e.", "Whoops! Division by zero! How did this happen? Perhaps a visual will clarify matters.", "Ah, yes. The domain for log is strictly greater than 0. That\u2019s a vertical asymptote heading down the y-axis. As x approaches 0, y approaches negative infinity. In other words, 0 is excluded from the domain.", "Many of my data points are 0 because many reviews received no helpful votes. For a quick fix, I can add 1 to each data point. This works well since the log of 1 is 0. Furthermore, the same spread is retained since all points are increased by 1.", "Excellent. The new range is from 0 to 10, and the quartiles are reflective of the original data.", "This looks very reasonable. The log function plus normalization is an excellent way to transform skewed data if the results can still be skewed. There is, however, one major drawback in this case.", "Why transform data to values between 0 and 1 in the first place? It\u2019s usually so percentages and probability can play a role. In my case, I want the median at around 50%. After normalizing here, the median is at 0.1.", "When numbers are too large, one can try fractional exponents as a means of transformation. Consider the cube root.", "This is very similar to log, but the range here is larger, from 0 to 28.", "As expected, the new data is more problematic after normalizing. Now the median is at 0.04, a far cry from 50%.", "I like to play around with numbers, so I experimented with a few powers. Interesting results came from 1/log_max. I define log_max as the log of the maximum value. (The log of 23,311 is 10.06.)", "A range from 0 to 2.7 is very appealing.", "This looks good, but the data\u2019s very clustered in the 25\u201375% range, a cluster that likely extends much further. So although the overall spread is more desirable, it\u2019s not quite sufficient here.", "It\u2019s time for our last standard function, the hyperbolic tangent. Let\u2019s start with a graph.", "This looks very similar to the sigmoid. One primary difference is the range. The hyperbolic tangent has a range from -1 to 1, whereas the sigmoid has a range from 0 to 1.", "In my data, since df.Helpful_Votes are all non-negative, my output will be from 0 to 1.", "There\u2019s no need to normalize, but there\u2019s on glaring issue.", "The hyperbolic tangent distorts the data more than the sigmoid. There\u2019s a difference of 0.001 between the 75th and 100th percentiles, much closer than any other quartile. In the original data, that difference is 23,307, 1,000 times greater than the difference between other quartiles.", "Percentiles provide yet another option. Each data point can be ranked according to its percentile, and pandas provides a nice built-in method, .rank, for dealing with this.", "The general idea is that each point receives the value of it\u2019s percentile. In my case, since there are many data points with a low number of helpful votes, there are different ways for choosing these percentiles. I like the \u201cmin\u201d method, where all data points receive the percentile given to the first member of the group. The default method is \u201caverage,\u201d where all data points with the same value take the mean percentile in that group.", "Intriguing. Percentile linearization is basically the same as a ranking system. If the difference between the 1st data point and the 2nd should be the same as all data points that are one unit part, percentile linearization is the way to go.", "On the downside, Percentile Linearization erases critical signs of skewness. This data appears slightly skewed because there are hundreds of thousands of reviews with 1 and 2 votes, not because there are few reviews with an insanely high number of votes.", "Since I am dealing primarily with a ranking system, I combined percentile linearization with my own piecewise linearization function. Logs also played a role.", "Whatever your choice or style, never limit yourself to the standard options. Mathematical functions are extremely rich, and their intersection with data science deserves more recognition and flexibility.", "I would love to hear about other functions that people use for transforming skewed data. I have heard about the boxcox function, though I have yet to explore it in detail.", "More details on Wade\u2019s Amazon Book Review project can be viewed on his Github page, Helpful_Reviews.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Teaches Python, Data Science, Machine Learning & AI to teens at Berkeley Coding Academy. Author of The Python Workshop & Hands-on Gradient Boosting with XGBoost"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F73da4c2d0d16&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftransforming-skewed-data-73da4c2d0d16&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftransforming-skewed-data-73da4c2d0d16&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftransforming-skewed-data-73da4c2d0d16&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftransforming-skewed-data-73da4c2d0d16&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----73da4c2d0d16--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----73da4c2d0d16--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@coreywade?source=post_page-----73da4c2d0d16--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@coreywade?source=post_page-----73da4c2d0d16--------------------------------", "anchor_text": "Corey Wade"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fce116a279b2d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftransforming-skewed-data-73da4c2d0d16&user=Corey+Wade&userId=ce116a279b2d&source=post_page-ce116a279b2d----73da4c2d0d16---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F73da4c2d0d16&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftransforming-skewed-data-73da4c2d0d16&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F73da4c2d0d16&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftransforming-skewed-data-73da4c2d0d16&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "http://jmcauley.ucsd.edu/data/amazon/", "anchor_text": "Amazon Books Review Dataset"}, {"url": "https://commons.wikimedia.org/w/index.php?curid=1834287", "anchor_text": "https://commons.wikimedia.org/w/index.php?curid=1834287"}, {"url": "https://github.com/coreyjwade/Helpful_Reviews", "anchor_text": "Helpful_Reviews"}, {"url": "https://medium.com/tag/sigmoid?source=post_page-----73da4c2d0d16---------------sigmoid-----------------", "anchor_text": "Sigmoid"}, {"url": "https://medium.com/tag/data-science?source=post_page-----73da4c2d0d16---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/mathematics?source=post_page-----73da4c2d0d16---------------mathematics-----------------", "anchor_text": "Mathematics"}, {"url": "https://medium.com/tag/data-analysis?source=post_page-----73da4c2d0d16---------------data_analysis-----------------", "anchor_text": "Data Analysis"}, {"url": "https://medium.com/tag/statistics?source=post_page-----73da4c2d0d16---------------statistics-----------------", "anchor_text": "Statistics"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F73da4c2d0d16&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftransforming-skewed-data-73da4c2d0d16&user=Corey+Wade&userId=ce116a279b2d&source=-----73da4c2d0d16---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F73da4c2d0d16&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftransforming-skewed-data-73da4c2d0d16&user=Corey+Wade&userId=ce116a279b2d&source=-----73da4c2d0d16---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F73da4c2d0d16&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftransforming-skewed-data-73da4c2d0d16&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----73da4c2d0d16--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F73da4c2d0d16&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftransforming-skewed-data-73da4c2d0d16&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----73da4c2d0d16---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----73da4c2d0d16--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----73da4c2d0d16--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----73da4c2d0d16--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----73da4c2d0d16--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----73da4c2d0d16--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----73da4c2d0d16--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----73da4c2d0d16--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----73da4c2d0d16--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@coreywade?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@coreywade?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Corey Wade"}, {"url": "https://medium.com/@coreywade/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "279 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fce116a279b2d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftransforming-skewed-data-73da4c2d0d16&user=Corey+Wade&userId=ce116a279b2d&source=post_page-ce116a279b2d--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F16c718007fdd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftransforming-skewed-data-73da4c2d0d16&newsletterV3=ce116a279b2d&newsletterV3Id=16c718007fdd&user=Corey+Wade&userId=ce116a279b2d&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}