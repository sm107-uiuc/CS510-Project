{"url": "https://towardsdatascience.com/develop-glue-jobs-locally-using-docker-containers-bffc9d95bd1", "time": 1683007352.544972, "path": "towardsdatascience.com/develop-glue-jobs-locally-using-docker-containers-bffc9d95bd1/", "webpage": {"metadata": {"title": "Develop glue jobs locally using Docker containers | by Shubham Jain | Towards Data Science", "h1": "Develop glue jobs locally using Docker containers", "description": "Development of glue jobs in local environment using docker container. Docker, AWS, Aws glue, local, etl, glue libraries, glue etl, apache spark, pyspark,"}, "outgoing_paragraph_urls": [{"url": "https://docs.aws.amazon.com/glue/latest/dg/aws-glue-programming-python-transforms.html", "anchor_text": "here", "paragraph_index": 5}, {"url": "https://docs.aws.amazon.com/glue/latest/dg/dev-endpoint.html", "anchor_text": "here", "paragraph_index": 7}, {"url": "https://docs.aws.amazon.com/glue/latest/dg/aws-glue-programming-etl-libraries.html", "anchor_text": "here", "paragraph_index": 10}, {"url": "https://github.com/awslabs/aws-glue-libs/issues/25", "anchor_text": "https://github.com/awslabs/aws-glue-libs/issues/25", "paragraph_index": 14}, {"url": "https://github.com/jnshubham/aws-glue-local-etl-docker", "anchor_text": "GitHub", "paragraph_index": 25}, {"url": "https://hub.docker.com/repository/docker/jnshubham/glue_etl_local", "anchor_text": "dockerhub", "paragraph_index": 25}], "all_paragraphs": ["With the increasing amount of data in the current world, the need for services handling big data is very demanding. When we think about big data, there are very few frameworks which are used by most of the data engineers. Apache Spark is one of them.", "Apache Spark is a distributed processing engine which requires a large cluster to execute any kind of analytics or simply perform ETL on the dataset. To use Apache Spark, we need to set up large clusters of our own which are very expensive or we can leverage them on the cloud. Here, we will be discussing the services provided by AWS. So to process large dataset and to perform analytics on them using spark, AWS provides two major services", "AWS EMR provides us cluster to perform our processing and are very expensive, so we need to be careful to identify for how long we require clusters and how to optimize our jobs properly. We will not be covering EMR in this post as it is itself a very large topic to discuss.", "AWS Glue is a fully managed ETL service provided by amazon web services for handling large amount of data. The best part of AWS Glue is it comes under the AWS serverless umbrella where we need not worry about managing all those clusters and the cost associated with it. In serverless paradigm, we pay for what we use, so if our job is using only 25 DPU for processing our data and it runs for 20 minutes then we end up paying only the cost for leveraging 25 DPU\u2019s for 20 minutes and not a single penny extra.", "AWS Glue is in utmost demand nowadays for creating python or scala based spark processing jobs. To develop jobs on AWS glue, we have three options. Let\u2019s discuss them one by one.", "If you are a spark developer and not so familiar with glue libraries and its diagram generation, avoid using this editor at all cost. This is for those who are very sure what they are writing and knew from their heart that their job will run in the first run itself. This is not at all recommended and can only be considered when we need to make a few changes in the existing job. Using the job editor directly is good when you are using glue libraries in your code as it generates the lineage diagram as you write the code. Before opting for this option I would recommend going through the glue libraries here.", "2. Create a Glue Dev endpoint:", "You can set up a glue dev endpoint and link it to either zeppelin notebooks or to your pycharm IDE or you can even connect local jupyter notebooks. This is a better option if you want to test your jobs while you are developing them. To setup Glue Dev endpoint you can follow official AWS documentation here. The only problem with this glue dev endpoint is its cost. You will be charged for the time it is running, so it basically spins up a EMR cluster with your desired capacity and glue libraries installed on the cluster. This is one of the best option if cost is not a problem with your development and can be considered.", "3. Use AWS Glue libraries and run them on Docker container locally", "This is by far the best option considering the development of the jobs and testing the jobs on relatively small datasets and once the job is ready running them using the glue job console itself. With this option, you get the flexibility of using glue libraries either on your machine or you can spin up EC2 instances according to your dataset size and launch the docker container on these EC2, as this will be a relatively cheaper option and the most suitable one to run your jobs.", "To set up AWS glue locally, you can follow AWS documentation here. But this seems to be not working and we will be discussing it in detail. So I have created a Docker image and will explain what we are doing.", "I am taking centos as base image then setting these env variables we will require this to download the libraries later on", "Then we will create a directory glue and install required libraries like Java, Python, wget, tar and python packages and set our working directory to glue", "Now in this directory will download maven, spark and glue libs and unzip them. Then we will be updating the path variable and adding SPARK_HOME, JAVA_HOME, MAVEN_HOME and GLUE_HOME variables to it.", "Here is an important known issue where will be removing some of the libraries https://github.com/awslabs/aws-glue-libs/issues/25.", "Now we will compile all the dependencies using maven. This shell script run the maven build command and gets all the required dependencies.", "We are running this once so that our docker image will contain the libraries beforehand and will save time to run spark jobs later.", "At last we will be cleaning all the tmp directories and using bash as our entrypoint to our container.", "Now to use the docker file and create your container in order to start developing your glue spark jobs follow along.", "To build the image out of this Dockerfile run the following command:", "To use the existing image for starting your container, just pull the image from docker hub and run the commands provided to submit jobs", "To pull the image run the following command:", "To run the container and get into repl shell:", "To get into the terminal and submit a spark job run", "This way you will be able to test your job on your local machine or you can also use this on any EC2 instance based on your data size.", "For more information, visit my GitHub or dockerhub.", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fbffc9d95bd1&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdevelop-glue-jobs-locally-using-docker-containers-bffc9d95bd1&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdevelop-glue-jobs-locally-using-docker-containers-bffc9d95bd1&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdevelop-glue-jobs-locally-using-docker-containers-bffc9d95bd1&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdevelop-glue-jobs-locally-using-docker-containers-bffc9d95bd1&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----bffc9d95bd1--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----bffc9d95bd1--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@jnshubham?source=post_page-----bffc9d95bd1--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@jnshubham?source=post_page-----bffc9d95bd1--------------------------------", "anchor_text": "Shubham Jain"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fa7eea8d05a87&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdevelop-glue-jobs-locally-using-docker-containers-bffc9d95bd1&user=Shubham+Jain&userId=a7eea8d05a87&source=post_page-a7eea8d05a87----bffc9d95bd1---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fbffc9d95bd1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdevelop-glue-jobs-locally-using-docker-containers-bffc9d95bd1&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fbffc9d95bd1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdevelop-glue-jobs-locally-using-docker-containers-bffc9d95bd1&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://docs.aws.amazon.com/glue/latest/dg/aws-glue-programming-python-transforms.html", "anchor_text": "here"}, {"url": "https://docs.aws.amazon.com/glue/latest/dg/dev-endpoint.html", "anchor_text": "here"}, {"url": "https://docs.aws.amazon.com/glue/latest/dg/aws-glue-programming-etl-libraries.html", "anchor_text": "here"}, {"url": "https://github.com/awslabs/aws-glue-libs/issues/25", "anchor_text": "https://github.com/awslabs/aws-glue-libs/issues/25"}, {"url": "https://github.com/jnshubham/aws-glue-local-etl-docker", "anchor_text": "GitHub"}, {"url": "https://hub.docker.com/repository/docker/jnshubham/glue_etl_local", "anchor_text": "dockerhub"}, {"url": "https://medium.com/tag/aws-glue?source=post_page-----bffc9d95bd1---------------aws_glue-----------------", "anchor_text": "Aws Glue"}, {"url": "https://medium.com/tag/aws?source=post_page-----bffc9d95bd1---------------aws-----------------", "anchor_text": "AWS"}, {"url": "https://medium.com/tag/docker?source=post_page-----bffc9d95bd1---------------docker-----------------", "anchor_text": "Docker"}, {"url": "https://medium.com/tag/apache-spark?source=post_page-----bffc9d95bd1---------------apache_spark-----------------", "anchor_text": "Apache Spark"}, {"url": "https://medium.com/tag/python?source=post_page-----bffc9d95bd1---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fbffc9d95bd1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdevelop-glue-jobs-locally-using-docker-containers-bffc9d95bd1&user=Shubham+Jain&userId=a7eea8d05a87&source=-----bffc9d95bd1---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fbffc9d95bd1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdevelop-glue-jobs-locally-using-docker-containers-bffc9d95bd1&user=Shubham+Jain&userId=a7eea8d05a87&source=-----bffc9d95bd1---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fbffc9d95bd1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdevelop-glue-jobs-locally-using-docker-containers-bffc9d95bd1&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----bffc9d95bd1--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fbffc9d95bd1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdevelop-glue-jobs-locally-using-docker-containers-bffc9d95bd1&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----bffc9d95bd1---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----bffc9d95bd1--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----bffc9d95bd1--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----bffc9d95bd1--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----bffc9d95bd1--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----bffc9d95bd1--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----bffc9d95bd1--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----bffc9d95bd1--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----bffc9d95bd1--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@jnshubham?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@jnshubham?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Shubham Jain"}, {"url": "https://medium.com/@jnshubham/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "45 Followers"}, {"url": "https://jnshubham.github.io", "anchor_text": "https://jnshubham.github.io"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fa7eea8d05a87&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdevelop-glue-jobs-locally-using-docker-containers-bffc9d95bd1&user=Shubham+Jain&userId=a7eea8d05a87&source=post_page-a7eea8d05a87--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fusers%2Fa7eea8d05a87%2Flazily-enable-writer-subscription&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdevelop-glue-jobs-locally-using-docker-containers-bffc9d95bd1&user=Shubham+Jain&userId=a7eea8d05a87&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}