{"url": "https://towardsdatascience.com/what-is-google-api-vision-and-how-to-use-it-372a83e6d02c", "time": 1683013203.090401, "path": "towardsdatascience.com/what-is-google-api-vision-and-how-to-use-it-372a83e6d02c/", "webpage": {"metadata": {"title": "What is Google API Vision? And how to use it | by Christophe Pere | Towards Data Science", "h1": "What is Google API Vision? And how to use it", "description": "This post finds his root in an interesting project of knowledge extraction. The first step was to extract the text of pdf documents. The company that I work for is based on the Google platform, so\u2026"}, "outgoing_paragraph_urls": [{"url": "https://github.com/Christophe-pere/API_vision_google", "anchor_text": "GitHub", "paragraph_index": 1}, {"url": "https://cloud.google.com/vision", "anchor_text": "API", "paragraph_index": 2}, {"url": "https://cloud.google.com/vision", "anchor_text": "API Vision", "paragraph_index": 3}, {"url": "https://cloud.google.com/vision/docs/ocr", "anchor_text": "Optical Character Recognition", "paragraph_index": 5}, {"url": "https://cloud.google.com/iam/docs/understanding-service-accounts", "anchor_text": "source: IAM google cloud", "paragraph_index": 6}, {"url": "https://en.wikipedia.org/wiki/RSA_(cryptosystem)", "anchor_text": "RSA", "paragraph_index": 7}, {"url": "https://www.json.org/json-en.html", "anchor_text": "json", "paragraph_index": 7}], "all_paragraphs": ["This post finds his root in an interesting project of knowledge extraction. The first step was to extract the text of pdf documents. The company that I work for is based on the Google platform, so naturally, I would like to use the OCR of the API Vision but, can\u2019t find an easy way to use the API to extract text. So here this post.", "The notebook of this post is available on GitHub", "Google released the API to help people, industry, and researchers to use their functionalities.", "Google Cloud's Vision API has powerful machine learning models pre-trained through REST and RPC APIs. Tag images and quickly organize them into millions of predefined categories. You will be able to detect objects and faces, read printed or handwritten text, and integrate useful metadata into your image catalog. (source: API Vision)", "The part of the API that interested us for this post is the OCR part.", "Optical Character Recognition or OCR is a technology where characters are recognized and detected inside an image. Most of the time Convolutional Neural Networks (CNN) are trained on a very large dataset of characters and numbers in different types and colors. You can imagine a small window slicing on each pixel or group of pixels to detect characters or partial characters, spaces, forms, lines etc.", "A service account is a special type of Google account intended to represent a non-human user that needs to authenticate and be authorized to access data in Google APIs. (source: IAM google cloud)", "Basically you can imagine it as an RSA key (encrypted key to communicate with high security between machine via the internet) with which you can connect to Google services (API, GCS, IAM\u2026). Its basic form is a json file.", "Here, I will show you the different functions to use the API and extract the text from the image automatically.", "The OCR can take pdf, tiff and jpeg formats to be used in the API.In this post we will convert the pdf into jpeg to concatenate many pages in one picture. Two manners of using jpeg:", "First, you could convert your pdf in jpeg files and save them into another repository:", "Here, you can use your jpeg document with the API. But, you can do it better without saving the jpeg file and use it in memory to call the API directly.", "Before going deeper we need to configure the credentials of the Vision API. You\u2019ll see, it\u2019s very simple:", "This needed more code because we also concatenate 10 pages of documents to create a \u201cbig picture\u201d and feed it to the API. One call versus 10 is better for the price because you\u2019ll pay each time you\u2019ll request the API.", "With these two functions, you\u2019ll be able to load a pdf file, convert it into bytes, create a \u201cbig picture\u201d and feed it to the function detect_text_document() (details below).", "The function detect_text_document takes in input the content of the pictures and the credentials (information of your service account).", "The output is a text extracted from the images. The goal of this function is to concatenate words into paragraphs and documents.", "You can use this block of functions like this:", "The input is just the path obtained with the glob function. The credentials were generated in the Setup Credentials part. This loop will take each pdf of the input files, call the API with a jpeg file obtained by converting the pdf and save text files containing the detection.", "Here, you reach the end of the tutorial on how to use the Vision API and generate text files containing the detection automatically. You know how to configure credentials with your service account and convert a pdf into a jpeg file (one jpeg per page). Is it all? No, I have some bonuses for you (see below).", "The previous functions allow you to use the API with the concatenation of pages. But, we can use the API per page of the pdf document. The function below will request the API for each page of the convert pdf into a jpeg format.", "It\u2019s very easy to use it, just call this function with the path of the pdf folder and the credentials. Like this:", "Just for fun, you can use this API with multiprocessing (ok it\u2019s not real multiprocessing in python with the Global Interpreter Lock (GIL)). But, here the code:", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F372a83e6d02c&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-is-google-api-vision-and-how-to-use-it-372a83e6d02c&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-is-google-api-vision-and-how-to-use-it-372a83e6d02c&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-is-google-api-vision-and-how-to-use-it-372a83e6d02c&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-is-google-api-vision-and-how-to-use-it-372a83e6d02c&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----372a83e6d02c--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----372a83e6d02c--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://pere-christophe.medium.com/?source=post_page-----372a83e6d02c--------------------------------", "anchor_text": ""}, {"url": "https://pere-christophe.medium.com/?source=post_page-----372a83e6d02c--------------------------------", "anchor_text": "Christophe Pere"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F9cf1f3f55c40&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-is-google-api-vision-and-how-to-use-it-372a83e6d02c&user=Christophe+Pere&userId=9cf1f3f55c40&source=post_page-9cf1f3f55c40----372a83e6d02c---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F372a83e6d02c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-is-google-api-vision-and-how-to-use-it-372a83e6d02c&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F372a83e6d02c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-is-google-api-vision-and-how-to-use-it-372a83e6d02c&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://www.pexels.com/fr-fr/@artunchained", "anchor_text": "Manuel Geissinger,"}, {"url": "https://github.com/Christophe-pere/API_vision_google", "anchor_text": "GitHub"}, {"url": "https://cloud.google.com/vision", "anchor_text": "API"}, {"url": "https://cloud.google.com/vision", "anchor_text": "API Vision"}, {"url": "https://cloud.google.com/vision/docs/ocr", "anchor_text": "Optical Character Recognition"}, {"url": "https://cloud.google.com/iam/docs/understanding-service-accounts", "anchor_text": "source: IAM google cloud"}, {"url": "https://en.wikipedia.org/wiki/RSA_(cryptosystem)", "anchor_text": "RSA"}, {"url": "https://www.json.org/json-en.html", "anchor_text": "json"}, {"url": "https://www.googleapis.com/auth/cloud-vision'", "anchor_text": "https://www.googleapis.com/auth/cloud-vision'"}, {"url": "https://medium.com/tag/towards-data-science?source=post_page-----372a83e6d02c---------------towards_data_science-----------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/tag/deep-learning?source=post_page-----372a83e6d02c---------------deep_learning-----------------", "anchor_text": "Deep Learning"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----372a83e6d02c---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/tag/data-science?source=post_page-----372a83e6d02c---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/computer-vision?source=post_page-----372a83e6d02c---------------computer_vision-----------------", "anchor_text": "Computer Vision"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F372a83e6d02c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-is-google-api-vision-and-how-to-use-it-372a83e6d02c&user=Christophe+Pere&userId=9cf1f3f55c40&source=-----372a83e6d02c---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F372a83e6d02c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-is-google-api-vision-and-how-to-use-it-372a83e6d02c&user=Christophe+Pere&userId=9cf1f3f55c40&source=-----372a83e6d02c---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F372a83e6d02c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-is-google-api-vision-and-how-to-use-it-372a83e6d02c&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----372a83e6d02c--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F372a83e6d02c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-is-google-api-vision-and-how-to-use-it-372a83e6d02c&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----372a83e6d02c---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----372a83e6d02c--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----372a83e6d02c--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----372a83e6d02c--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----372a83e6d02c--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----372a83e6d02c--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----372a83e6d02c--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----372a83e6d02c--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----372a83e6d02c--------------------------------", "anchor_text": ""}, {"url": "https://pere-christophe.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://pere-christophe.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Christophe Pere"}, {"url": "https://pere-christophe.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "357 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F9cf1f3f55c40&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-is-google-api-vision-and-how-to-use-it-372a83e6d02c&user=Christophe+Pere&userId=9cf1f3f55c40&source=post_page-9cf1f3f55c40--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fc4294bfe2553&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-is-google-api-vision-and-how-to-use-it-372a83e6d02c&newsletterV3=9cf1f3f55c40&newsletterV3Id=c4294bfe2553&user=Christophe+Pere&userId=9cf1f3f55c40&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}