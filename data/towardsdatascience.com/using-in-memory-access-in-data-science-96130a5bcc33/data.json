{"url": "https://towardsdatascience.com/using-in-memory-access-in-data-science-96130a5bcc33", "time": 1683014785.4995358, "path": "towardsdatascience.com/using-in-memory-access-in-data-science-96130a5bcc33/", "webpage": {"metadata": {"title": "Using in-memory access in Data Science | by Mario Emmanuel | Towards Data Science", "h1": "Using in-memory access in Data Science", "description": "The amounts and throughput of data to be analysed in financial markets data analysis can be daunting. This is by no means specific to the financial world, as it happens in many other data analysis\u2026"}, "outgoing_paragraph_urls": [{"url": "https://ieee.shortcm.li/OP8dFS", "anchor_text": "https://ieee.shortcm.li/OP8dFS", "paragraph_index": 22}], "all_paragraphs": ["The amounts and throughput of data to be analysed in financial markets data analysis can be daunting. This is by no means specific to the financial world, as it happens in many other data analysis fields too. What is pretty unique to this specific industry is that data is highly structured (something that does not happen so often in other fields). Huge amounts of small size and mostly unrelated data messages is what constitutes financial market data: it is easy to end up with hundreds of millions of small messages to be received, stored, decoded, parsed and correlated.", "Analysing such a huge amount of data requires many iterations, and the need of saving time in random data access becomes relevant.", "In data science and data engineering, we face many times the need to handle datasets as previously described. It might be because we want to inject data at a large throughput \u2014 simulation environments \u2014 or because we simply need to iterate over large data sets for statistical analysis or Monte-Carlo simulations \u2014 not everything in data-science can be reduced to an ML model\u2014 .", "When such needs exist, the first reaction is to consume data from a database (can be any database) and use a query/access strategy to extract and consume the data. Sometimes this approach can simply not be avoided because the dataset is so large that can not be fit into memory even splitting it or because the expected way to consume the data is complex or diverse.", "But there are many other situations where the data can be successfully simply stored to be later allocated in RAM at once or in large chunks of data, the transfer takes place directly from disk to memory using raw I/O.", "The latter approach is not commonly followed despite its simplicity (you remove a layer of complexity by reducing the data access to mere memory copy from disk and later memory requests over an array). It is definitively not appropriate for all the scenarios, but it works pretty well for simulation, analysis and backtesting as found in quantitative research and analysis. The data can be often split by years or by any other criteria.", "The split might be seen as an issue but according to my experience, it actually simplifies subsequent stages of the data processing pipeline and even using databases a split is often required.", "The way you store the data to allocate in memory and the way you store the data as a repository that can be queried pose differences. If you plan to move everything into RAM ideally you will want to store a byte memory copy of the structure that you will use in your programming language, while if you are planning to use a database or repository it will be the underlying solution the one dictating how data is prepared and stored.", "While you will find many voices advising that the first approach violates some best practices (endianness of data poses portability issues, compilers do not guarantee alignment of language structs, and so on), the truth is that it works extremely well in controlled environments, where you can define the platform, the OS, the compiler and the source code of your analysis.", "Those objections/advises might be valid for commercial software intended to be distributed, or might be the basis for a discussion from a theoretical point of view, but their validity can be questioned in the context of a real-life research and analysis mission where both platforms and environments are controlled and stable in time.", "Additionally, we have reached a point where there are not that many options in terms of platform and compiler architectures, so discussions about endianness and compiler differences are more academical than practical. To me, those are reminiscences from the 80s and 90s where we got more diversity in terms of platforms (SPARC, PowerPC, Intel, Alpha). Same used to apply to Operating Systems, with many different UNIX vendors. That diversity has gone a long time ago.", "To answer this question we will test two scenarios. One will simulate accessing a disk-based storage system using memory-mapped files (which is considered as a fast access method for large files) and the other will simulate direct memory access against a memory array.", "In both cases the file and the memory array are filled with random data, we iterate 10 times over the whole dataset (512Mb) doing a simple calculation (to avoid the compiler skipping instructions as part of their optimization features) and we will measure the time spent for each of the approaches.", "The results of the simulation, ran on a low-end FreeBSD box clearly show how RAM improves access performance significatively:", "Even when we are biasing the test with operations (the cumulative sum and bitmask operations for every retrieved byte) we still get a 3 to 1 ratio of speed performance when comparing memory to disk. Probably the isolated effect of memory vs disk is even much higher than that ratio.", "It is unlikely that any database or storage solution will outperform disk access beyond the performance of a memory-mapped file, so we can conclude that iterating over memory can dramatically decrease computational time. This shall not surprise anyone, but you will still find voices claiming that both are equal or simply denying that a direct memory access approach is even feasible, which is a wrong assumption.", "As a sensible objection to this informal benchmark, someone could state that we are not taking into consideration the time to initialize the array and the time to put the data into the array. Those are valid objections but in the context of a large number of subsequent iterations over data (that will potentially last tens of minutes, hours or even days) there will be still a significant benefit from using memory instead of the disk because it will dramatically reduce the time to run the analysis.", "The larger the processing time, the more relevant using memory is.", "The approach is not widely used because it usually implies being able to compact data and handle the actual memory representation of the underlying language and it is way off the comfort zone of handling data in JSON and Jupyter Notebooks. It probably fits better in the context of low-latency development environments using C/C++ Java or Go.", "It is also worth to mention that the whole approach is valid only for the case of highly structured data, as it is the case in financial markets. Handling unstructured data or data which presents relational dependencies definitively requires a different approach.", "Disclaimer: All views and information expressed here are my own and do not represent the opinions of any entity whatsoever with which I have been, am now, or will be affiliated or related.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Consultant, retail trader & lifelong learner | Linkedin https://ieee.shortcm.li/OP8dFS"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F96130a5bcc33&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-in-memory-access-in-data-science-96130a5bcc33&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-in-memory-access-in-data-science-96130a5bcc33&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-in-memory-access-in-data-science-96130a5bcc33&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-in-memory-access-in-data-science-96130a5bcc33&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----96130a5bcc33--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----96130a5bcc33--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@m.emmanuel?source=post_page-----96130a5bcc33--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@m.emmanuel?source=post_page-----96130a5bcc33--------------------------------", "anchor_text": "Mario Emmanuel"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F7728df51142e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-in-memory-access-in-data-science-96130a5bcc33&user=Mario+Emmanuel&userId=7728df51142e&source=post_page-7728df51142e----96130a5bcc33---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F96130a5bcc33&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-in-memory-access-in-data-science-96130a5bcc33&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F96130a5bcc33&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-in-memory-access-in-data-science-96130a5bcc33&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://medium.com/tag/data?source=post_page-----96130a5bcc33---------------data-----------------", "anchor_text": "Data"}, {"url": "https://medium.com/tag/data-science?source=post_page-----96130a5bcc33---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----96130a5bcc33---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/tag/ai?source=post_page-----96130a5bcc33---------------ai-----------------", "anchor_text": "AI"}, {"url": "https://medium.com/tag/fintech?source=post_page-----96130a5bcc33---------------fintech-----------------", "anchor_text": "Fintech"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F96130a5bcc33&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-in-memory-access-in-data-science-96130a5bcc33&user=Mario+Emmanuel&userId=7728df51142e&source=-----96130a5bcc33---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F96130a5bcc33&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-in-memory-access-in-data-science-96130a5bcc33&user=Mario+Emmanuel&userId=7728df51142e&source=-----96130a5bcc33---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F96130a5bcc33&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-in-memory-access-in-data-science-96130a5bcc33&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----96130a5bcc33--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F96130a5bcc33&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-in-memory-access-in-data-science-96130a5bcc33&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----96130a5bcc33---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----96130a5bcc33--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----96130a5bcc33--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----96130a5bcc33--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----96130a5bcc33--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----96130a5bcc33--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----96130a5bcc33--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----96130a5bcc33--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----96130a5bcc33--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@m.emmanuel?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@m.emmanuel?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Mario Emmanuel"}, {"url": "https://medium.com/@m.emmanuel/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "977 Followers"}, {"url": "https://ieee.shortcm.li/OP8dFS", "anchor_text": "https://ieee.shortcm.li/OP8dFS"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F7728df51142e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-in-memory-access-in-data-science-96130a5bcc33&user=Mario+Emmanuel&userId=7728df51142e&source=post_page-7728df51142e--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Ffd67658cd0f9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-in-memory-access-in-data-science-96130a5bcc33&newsletterV3=7728df51142e&newsletterV3Id=fd67658cd0f9&user=Mario+Emmanuel&userId=7728df51142e&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}