{"url": "https://towardsdatascience.com/3d-rotations-intuitions-and-limitations-f3ae2122fe23", "time": 1683017121.608771, "path": "towardsdatascience.com/3d-rotations-intuitions-and-limitations-f3ae2122fe23/", "webpage": {"metadata": {"title": "3D Rotations: Intuitions And Limitations | by OngKoonHan | Towards Data Science", "h1": "3D Rotations: Intuitions And Limitations", "description": "When I first started working with 3D rotations using data from IMU sensors, the math was a mystery to me. So many terms were being thrown around which added to the confusion (Quaternion, Rotation\u2026"}, "outgoing_paragraph_urls": [{"url": "https://en.wikipedia.org/wiki/Quaternions_and_spatial_rotation", "anchor_text": "here", "paragraph_index": 11}, {"url": "http://graphics.stanford.edu/courses/cs348a-17-winter/Papers/quaternion.pdf", "anchor_text": "here", "paragraph_index": 11}, {"url": "https://en.wikipedia.org/wiki/Rotation_matrix#Rotation_matrix_from_axis_and_angle", "anchor_text": "here", "paragraph_index": 13}], "all_paragraphs": ["When I first started working with 3D rotations using data from IMU sensors, the math was a mystery to me. So many terms were being thrown around which added to the confusion (Quaternion, Rotation Matrix, Derivatives, Euler Angles, Angle-Axis, etc\u2026).", "In this article, I hope to share some intuitions which helped me tremendously when thinking about 3D rotations.", "Rotations In 2D \u2014 The most common types of rotations that everyone thinks about are rotations in the plane (2D rotations). 2D rotations are what we are used to when drawing diagrams on paper or seeing figures in high school textbooks.", "2D rotations occur over a single axis, the \u201cz-axis\u201d perpendicular to the plane. We can think of a rotation on the plane as a positive or negative (anti-clockwise/clockwise) angle in degrees or radians about the rotation axis. For example, we can speak of a +90\u00b0 rotation or a -10\u00b0 rotation in the plane.", "Rotations In 2D Are Commutative \u2014 Using this intuition, we can easily see that the composition of two 2D rotations can be thought of as adding up the two rotation angles. Thus, the composition of a +90\u00b0 and a -10\u00b0 rotation results in a +80\u00b0 rotation (obviously?).", "Since rotations in 2D are commutative, the corresponding composition of two 2D rotation matrices is also commutative! Looking at the individual entries of the 2D rotation matrix (Eqn 1a), all the entries are either sin or cos of the rotation angle, and applying our common trigonometric identities result in the order of composition being irrelevant for 2D rotations (Eqn 1b).", "Rotations About The Same Axis In 3D Are Also Commutative \u2014 In general, the composition of 3D rotations is not commutative. Applying multiple general 3D rotations in different orderings generally results in different ending orientations. However, if we compose 3D rotations around the same axis, intuition suggests that it will also be commutative as in the 2D case. Let\u2019s confirm this intuition.", "From the formula above (Eqn 1c), the composition of two 3D rotations about the same axis means that the axis vector u is constant. We can thus add up the rotation angles, as per the 2D case, and the composition of a +90\u00b0 and a -10\u00b0 rotation results in a +80\u00b0 rotation over the axis vector u. If you multiple the two matrix equations given in image above, the huge expression reduces down to the trigonometric identity of the addition of two angles that we have discussed before (noting that u x u=0, and that (uu\u2019)(uu\u2019)=uu\u2019 since u is a unit vector and u\u2019u=1).", "The representations for 3D rotations have their analogous counterparts to 2D rotations. Here is a short comparison of 2D and 3D representations (2D: left, 3D: right):", "There are other formalisms/representations for 3D rotations such as Euler Angles, etc, but the 3 above are the most useful for building an intuition.", "Angle-Axis Representation \u2014 This representation is what we have used implicitly in the previous section. The Angle-Axis Representation consists of 2 parts, the rotation axis vector (unit vector) and the amount or angle of rotation. This is usually combined into a single vector as shown above, yielding a very compact representation. This representation corresponds to our usual physical intuition, for example, where a globe spins around an axis in 3D space. The limitation of the Angle-Axis Representation is that are 2 representations for every unique 3D rotation. More on this later.", "Quaternion Representation \u2014 Just like how 2D rotations can be represented as Complex Numbers, 3D rotations can be represented as Quaternions. Quaternions are numbers with 4 components, 1 real and 3 imaginary. You can read more about the Quaternion Representation here and here. To apply a 3D rotation onto an orientation, a specific formula is used involving the unit quaternion and the corresponding conjugate. Composing two 3D rotations corresponds to multiplying the two rotation quaternions (with quaternion multiplication).", "The Quaternion Representation has no physical interpretation, and is usually converted into the Angle-Axis Representation should a physical interpretation be needed. All in all, the advantages of the Quaternion Representation are that it uniquely represents a 3D rotation and that it is a compact representation (involving only 4 numbers).", "Rotation Matrix Representation \u2014 Just like how 2D rotations can be represented as 2x2 matrices, 3D rotations can also be represented by 3x3 matrices (albeit with a lot more complexity) (Eqn 2c). You can read more about 3D Rotation Matrices here. Applying a 3D rotation onto an orientation vector or composing two Rotation Matrices corresponds to the usual matrix multiplication.", "Like the Quaternion Representation, the Rotation Matrix Representation also uniquely represents a 3D rotation and has no physical interpretation. Although the 3D Rotation Matrix is not as compact as the other representations, some people claim that this is computationally more efficient due to its use of the mature and optimized Linear Algebra Libraries in many implementations. I have no benchmarks on the computational efficiency, but I usually use the 3D Matrix Representation when applying rotations just out of convenience (e.g. multiplying an array of rotation matrices using Numpy).", "The Angle-Axis Representation has a nice physical interpretation and is the most intuitive representation that I use when discussing 3D rotations with others. The fact that I can use my hands to physically demonstrate the rotation axis and rotation angle makes this representation handy when I am doing presentations or leading discussions.", "However, the Angle-Axis Representation is not a unique representation of a 3D rotation. I will discuss the shortcomings faced due to the two directions the rotation axis vector can take (positive or negative) as well as the indeterminacy of angles mod 2\u03c0 (which is always faced when working with angles in general).", "Direction Of The Rotation Axis Vector \u2014 Given a 3D rotation about an axis, there are two possible directions the Rotation Axis Vector can have, +e or -e. This means that for every 3D rotation, there are two ways to represent the same rotation via the Angle-Axis Representation, as shown in Eqn 3a.", "To illustrate the problem this creates, let\u2019s consider an example regarding the 3-axis angular velocity readings from a Gyroscope. We would like to integrate the derived angles to get the overall angular displacement over time. Using the Angle-Axis Representation, we would like to know the framewise angular displacement \u03b8 for each time step, where the cumulative sum of the \u03b8\u2019s will give the overall angular displacement.", "Note that because the direction of the displacement is crucial, the sign of \u03b8 is important. Since there are 2 possible values of \u03b8 (+/- \u03b8) given the 2 possible directions of the rotation axis vector +/- e, how can we pin down what sign \u03b8 should take? Is the displacement in the positive or negative direction? Given a 3D Rotation \u03b8 =\u03b8 e=[-3 3 3], should we use \u03b8 e=3[-1 1 1] or -3[1 -1 -1]? Although the two representations are algebraically identical, physically, an angular displacement of 3 vs -3 is a world of difference!", "Indeterminacy Of Angles \u2014 Whenever we are working with angles, the indeterminacy of angles mod 2\u03c0 cannot be avoided. An angle of -90\u00b0 is equal to +270\u00b0 mod 360\u00b0. This indeterminacy is important when the sign of the angle is important. Given an angle of +300\u00b0, did a rotation of +300\u00b0 or -60\u00b0 occur? Algebraically, this does not matter as its just how modular arithmetic works. Physically however, a rotation of +300\u00b0 or -60\u00b0 makes a huge difference! How we reached the final orientation is just as important as the final orientation itself.", "Example 1 \u2014 Estimation Of 3D Angular Displacement From Gyroscope Readings (Using Quaternions)", "We are now interested in measuring the rotational/angular displacement of a real physical object. In our 3D physical world, rotations are usually general 3D rotations. Rarely do we encounter 2D planar rotations unless we are working with very specific constraints (for example, a wheeled robot rotating in place on a flat and smooth floor).", "Given a Gyroscope, we can measure the angular velocity of an object the Gyroscope is mounted to at different discrete points in time. Using these discrete measurements, we can perform some form of integration to obtain the angular displacement over a period in time.", "As an example, I was previously working on measuring the angular displacement of dumbbell exercises. As seen in Figure 4a, I had a MEMS Gyroscope mounted on the dumbbell with the orientation of the rotational axes as shown.", "Eqn 4a provides one simple (and rudimentary) way to convert the Gyroscope angular velocity readings into the 3D Rotation Quaternions representing the discrete angular displacement. In the Angle-Axis representation, the magnitude of the rotation angle \u03b8 corresponds to the magnitude of the Angle-Axis vector (\u03b8=|\u03b8|=|\u03b8 e|). Using this intuition, we can treat the estimated amount of angular velocity from the Gyroscope as the magnitude of the angular velocity vector |\u03c9|. The estimated angle of rotation from the Gyroscope frame (\u03b8-hat) is then |\u03c9| scaled by the time delta (dt) of the frame. The ijk component of the Quaternion is then the contribution from each of the xyz rotational axes (scaled by |\u03c9| since the Axis vector should be a unit vector) multiplied by sin(\u03b8/2).", "Note that though this is but an approximate estimation of the 3D Rotation from the angular velocity, it suffices for some simple applications.", "Example 2 \u2014 Angular Displacement of Biceps Curl And Hammer Curl", "Now that we can estimate the 3D rotations from the Gyroscope angular velocity readings, we can compose these estimated 3D rotations over multiple frames and analyze the (relative) 3D orientation over time.", "In this example, we want to analyze the 3D angular displacement of two related exercises, Biceps Curls and Hammer Curls.", "Biceps Curls and Hammer Curls are very similar, but have a variation in the top positions. Both exercises start out with the the same bottom positions. At the top position however, the wrist stays neutral in the Biceps Curl while the wrist pronates in the Hammer Curl.", "From the perspective of the Gyroscope, the 3D angular displacement is much greater in the Hammer Curl than in the Biceps curl due to the contribution of the wrist pronation at the top position of the Hammer Curl. This can be seen from the red line in Figure 4c.", "In addition, because the of the orientation of the Gyroscope on the dumbbell (see Figure 4a), the Biceps Curl generates a rotation that is almost purely around the z rotational axis. In Figure 4c, we can see that the estimated 3D angular displacement (red line) of the Biceps Curl corresponds closely to the angular displacement over the z rotational axis (green line). Note that I isolated the 3D angular displacement within each repetition, causing it to always start from zero at the beginning of each repetition. We can think of this as the 3D angular displacement relative to the beginning of each individual repetition. In contrast, the blue, yellow, and green lines represent the integrated Gyroscope signals, corresponding to the cumulative integrated values of each xyz component of the Gyroscope readings.", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Ff3ae2122fe23&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2F3d-rotations-intuitions-and-limitations-f3ae2122fe23&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2F3d-rotations-intuitions-and-limitations-f3ae2122fe23&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2F3d-rotations-intuitions-and-limitations-f3ae2122fe23&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2F3d-rotations-intuitions-and-limitations-f3ae2122fe23&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----f3ae2122fe23--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----f3ae2122fe23--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@ongkoonhan.lovefad?source=post_page-----f3ae2122fe23--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@ongkoonhan.lovefad?source=post_page-----f3ae2122fe23--------------------------------", "anchor_text": "OngKoonHan"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fd356072c2b9a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2F3d-rotations-intuitions-and-limitations-f3ae2122fe23&user=OngKoonHan&userId=d356072c2b9a&source=post_page-d356072c2b9a----f3ae2122fe23---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ff3ae2122fe23&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2F3d-rotations-intuitions-and-limitations-f3ae2122fe23&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ff3ae2122fe23&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2F3d-rotations-intuitions-and-limitations-f3ae2122fe23&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://towardsdatascience.com/tagged/hands-on-tutorials", "anchor_text": "Hands-on Tutorials"}, {"url": "https://unsplash.com/@kevinmueller?utm_source=medium&utm_medium=referral", "anchor_text": "Kevin Mueller"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://en.wikipedia.org/wiki/Rotation_matrix", "anchor_text": "Source Link"}, {"url": "https://en.wikipedia.org/wiki/List_of_trigonometric_identities#Angle_sum_and_difference_identities", "anchor_text": "Source Link"}, {"url": "https://en.wikipedia.org/wiki/Rotation_matrix#Rotation_matrix_from_axis_and_angle", "anchor_text": "Source Link"}, {"url": "https://en.wikipedia.org/wiki/Axis%E2%80%93angle_representation", "anchor_text": "Left"}, {"url": "https://cdn3.volusion.com/bstu5.rxjt6/v/vspfiles/photos/WP21106-2.jpg", "anchor_text": "Right"}, {"url": "https://en.wikipedia.org/wiki/Quaternion#Conjugation,_the_norm,_and_reciprocal", "anchor_text": "line 1 & 2"}, {"url": "https://en.wikipedia.org/wiki/Quaternions_and_spatial_rotation", "anchor_text": "line 3"}, {"url": "https://en.wikipedia.org/wiki/Quaternions_and_spatial_rotation", "anchor_text": "here"}, {"url": "http://graphics.stanford.edu/courses/cs348a-17-winter/Papers/quaternion.pdf", "anchor_text": "here"}, {"url": "https://en.wikipedia.org/wiki/Rotation_matrix#Rotation_matrix_from_axis_and_angle", "anchor_text": "Source Link"}, {"url": "https://en.wikipedia.org/wiki/Rotation_matrix#Rotation_matrix_from_axis_and_angle", "anchor_text": "here"}, {"url": "https://en.wikipedia.org/wiki/Axis%E2%80%93angle_representation#Unit_quaternions", "anchor_text": "Source for Conversion from Angle-Axis Representation to Quaternion"}, {"url": "https://medium.com/tag/quaternion?source=post_page-----f3ae2122fe23---------------quaternion-----------------", "anchor_text": "Quaternion"}, {"url": "https://medium.com/tag/data-analysis?source=post_page-----f3ae2122fe23---------------data_analysis-----------------", "anchor_text": "Data Analysis"}, {"url": "https://medium.com/tag/data-science?source=post_page-----f3ae2122fe23---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/gyroscope?source=post_page-----f3ae2122fe23---------------gyroscope-----------------", "anchor_text": "Gyroscope"}, {"url": "https://medium.com/tag/hands-on-tutorials?source=post_page-----f3ae2122fe23---------------hands_on_tutorials-----------------", "anchor_text": "Hands On Tutorials"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Ff3ae2122fe23&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2F3d-rotations-intuitions-and-limitations-f3ae2122fe23&user=OngKoonHan&userId=d356072c2b9a&source=-----f3ae2122fe23---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Ff3ae2122fe23&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2F3d-rotations-intuitions-and-limitations-f3ae2122fe23&user=OngKoonHan&userId=d356072c2b9a&source=-----f3ae2122fe23---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ff3ae2122fe23&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2F3d-rotations-intuitions-and-limitations-f3ae2122fe23&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----f3ae2122fe23--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Ff3ae2122fe23&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2F3d-rotations-intuitions-and-limitations-f3ae2122fe23&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----f3ae2122fe23---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----f3ae2122fe23--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----f3ae2122fe23--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----f3ae2122fe23--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----f3ae2122fe23--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----f3ae2122fe23--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----f3ae2122fe23--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----f3ae2122fe23--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----f3ae2122fe23--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@ongkoonhan.lovefad?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@ongkoonhan.lovefad?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "OngKoonHan"}, {"url": "https://medium.com/@ongkoonhan.lovefad/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "26 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fd356072c2b9a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2F3d-rotations-intuitions-and-limitations-f3ae2122fe23&user=OngKoonHan&userId=d356072c2b9a&source=post_page-d356072c2b9a--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F75d386e9a9d5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2F3d-rotations-intuitions-and-limitations-f3ae2122fe23&newsletterV3=d356072c2b9a&newsletterV3Id=75d386e9a9d5&user=OngKoonHan&userId=d356072c2b9a&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}