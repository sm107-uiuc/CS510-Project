{"url": "https://towardsdatascience.com/exploring-detection-events-32f1b980bba5", "time": 1683017539.843945, "path": "towardsdatascience.com/exploring-detection-events-32f1b980bba5/", "webpage": {"metadata": {"title": "Exploring detection events. Doing Data Science from Scratch\u2026 | by David Moore | Towards Data Science", "h1": "Exploring detection events", "description": "This is the next article in my series Doing Data Science from Scratch. We are doing a project to count the number of passing vehicles on the road where I live. The question to be answered is\u2026"}, "outgoing_paragraph_urls": [{"url": "https://towardsdatascience.com/doing-data-science-from-scratch-dab71253e777", "anchor_text": "Doing Data Science from Scratch", "paragraph_index": 0}, {"url": "https://towardsdatascience.com/parsing-the-motion-log-file-55d013b458a1", "anchor_text": "recovering event data", "paragraph_index": 0}, {"url": "https://towardsdatascience.com/solving-a-video-sequencing-puzzle-e4ad29020b7f", "anchor_text": "solving a video sequencing puzzle", "paragraph_index": 0}, {"url": "https://medium.com/swlh/shared-folders-on-a-local-network-f08183d57913", "anchor_text": "creating and debugging this device", "paragraph_index": 4}], "all_paragraphs": ["This is the next article in my series Doing Data Science from Scratch. We are doing a project to count the number of passing vehicles on the road where I live. The question to be answered is fundamental \u2014 when is the best time to go for a walk without being mowed down by speeding cars, trucks, or other agricultural vehicles. One of the articles focused on recovering event data from log files, and that was a lot of fun. My most recent report, solving a video sequencing puzzle allowed me to provide more insight into the project work. So I went ahead and recorded an entire days events and therefore have a collection of video clips and that motion.log file I discussed in the previous article. In this post, I will explain my approach to some early analysis and report on the collection process. Buckle up your seat belt and let\u2019s do some Exploratory Data Analysis using Time Series and Pandas.", "The previous articles already covered my strategy. In my Lab, I have a large number of purpose-built collection devices. Those devices can measure most things in our environment. I am using my Smart Doorbell to measure the flow of traffic outside my house. Perhaps for giggles, but here is a picture of some of the \u201cstuff\u201d I have built to help me measure and collect data.", "You can see my doorbell in the top left-hand set of images. The collection ran overnight from 18:00 GMT December 8th to 18:00 GMT December 9th. I will restrict the data to December 9th as I won\u2019t be interested in walking in the pitch dark. Sun Rise was 08:30 and Sun Set was 16:30, and I will work with data in these ranges only. Our scope, therefore, is December 9th, 2020 08:30\u201316:30.", "We are dealing with two types of data in this series. Those are:-", "Recovery of the data really only requires me to visit my Raspberry Pi based file server. I wrote about creating and debugging this device earlier. I have a Samba (CIFS) share mapped on my Mac Mini M1, which I am using to write this article, so I could just copy&paste to my working directory.", "Processing of the log file is easy and quick. I use Spyder in Dark mode on the Mac. Nothing to see here. The Python variable \u2018records\u2019 has been written to disk, and I will recover that shortly for the next step.", "There are 199 video files generated with a 2020\u201312\u201309 timestamp so that will take a couple of minutes to make the compressed video file. Below is a screenshot of the process starting. I am comfortable to run the script from the IDE, but others might use the command line and pass a set of arguments. It is really up to you but keep the focus on the project and don\u2019t get goal displaced by nice to have extra work.", "I made a cup of tea and when I returned the job had finished. 199 video files have been combined into one mp4 file. The file size is 52.5 MB", "Collecting information about passing cars leads to a video file of 51.31 minutes with the first frame recorded at 5:44:35 GMT, as shown below. The red blur is a passing car. The camera is behind a window and the temperature is near freezing.", "Watching the 50 minute video is the subject of future posts because I am gearing up to use Deep Neural Networks (Yolo3) to perform object detection on the files. Computer Vision is new to me, so I am learning as I go. Indeed that might not seem ideal, but when else would you learn something new?", "When I do Exploratory Data Analysis, I always use Jupyter Notebooks. If I work with devices or define repeatable scripts, I use the IDE. You will have to find your own happy medium, and it comes down to what works best for you. Let\u2019s discuss my Exploratory analysis a bit.", "My first step is to recover the disk file \u2018anal\u2019 which contains the Python object. Next, I load the data into a Pandas DataFrame called, without any imagination at all, \u2018df\u2019. That said we can now examine our data structure.", "We have 5 data elements. Camera & FileName are string. DurMins is an integer whilst the others are datetime objects. Looks clean so far but this is the data structure I defined, so I wasn\u2019t that surprised. There are 442 entries, with the log representing all entries since the file was first created. We will filter to the 199 events we consumed into the MP4 file above. There are 442 File Names, with corresponding StartEvent and EndEvent. There are no missing values so far.", "DurMins should be reasonably tight as we expect a series of short video clips.", "There is only data for a single camera (\u2018motion2\u2019), but the values in our duration feature are surprising. We have events ranging from 1 through 6 and also 386. So we need to investigate that. Short clips of 1 through 6 minutes is undoubtedly expected, but 386 seems wrong. We can just ask for the record(s) with the outlier value as follows.", "Record 243 indicates a constant motion event that lasted almost 6 hours. The value of 386 seems correct. This is why we emphasize the importance of exploring the Data and why Data Analysis takes up 80% of the effort according to many Data Scientists anyhow.", "Looking at the clips suggests a problem. There are two clips with one created 23.22, but there is another for 05:45. So there must have been an error!", "Looking at the above log entry, we can see a detection event [EVT] but there followed an [ERR], and that resulted in a service restart. Motion is a demonized service, so if it falls over then, the OS will restart it automatically.", "A new [EVT] is thrown at 05:44 am, and it seems the service returns to normal. There is a need to refine the log parse script to detect this situation. For today we can drop that record as it is outside of our target time frame. It is vital to investigate outliers thoroughly and only drop them when you really do understand them fully. Filtering the data and examining the range of the duration field we see events from 1 minute to 6 minutes long. There are 198 events, and each event has 5 attributes.", "Ok so we have the log data, we found an error, we filtered that and now what? It isn\u2019t easy to understand time-series data without some visualizations. Let\u2019s do that next.", "It would be nice to see a plot of the events. There are 198 discrete data points, so that will likely make a packed x-axis and make things difficult to see. We need to get a summary of events in specific time slots. After a bit of transformation, I managed to create my first view of the data collected.", "Creating the chart requires a bit of work", "The first thing I had to do was make a new index of all the seconds from 08:30 to 16:30. I then merge that index with my readings to create a new dataframe which I called, again without imagination or clarity for you, the reader, \u2018new_df\u2019. So I just made a new matrix with all the seconds in our target window and whatever readings I got. We will have a lot of missing values because we do not record each second. There is only a record of detected movement in front of the house.", "Now I\u2019ve set the index for the new dataframe and filled in all missing values with 0. Filling in missing data, imputation, setting missing values to 0 is okay. 0 indicates no reading, and that infers no movement. But, that created 238 entries which are more than the 199 I complained about. How does that make sense? Well, hold on!", "Okay, so I used resample(\u201810T\u2019) to resample all my readings from per second to every 10 minutes. It is imperative to create an index that allows resampling.", "I sure hope that made sense and I guess you won\u2019t have expected that making a simple line chart would become so involved, hard to explain, but yet so powerful in the end. Doing Data Science from scratch is hard work.", "It has been an exciting day. First, I ran the collector (my doorbell) for 24 hours. The device recorded movements in front of my house for the period. Retrieving the Log data and making the video file was, at first straight forward, as I could just run pre-arranged scripts. The fun started when we found an outlier value and that led to a discovery. There is a problem with the equipment, and that led to a large gap in recorded data. That is fantastic, and I count the day a success. Finally using Pandas and Time Series functionality, I was able to plot the daylight hours and see the amount of movement outside the house through that period.", "Doing Data Science from Scratch is a lot of work, hard to explain, and the equipment seems to fight all the way. It is great fun, the data set is exciting and is really bringing out the Exploratory Data Analysis and cleaning requirements. I hope you enjoyed this installment, it was fun writing it. My next step is to check and fix the equipment and then do another run to ensure that everything is stable. Come back for the next write-up.", "I got a message on a different channel, asking me how I did things so quickly. Initially, I wasn\u2019t sure what to say like! But then I remembered that I wrote an article on my set-up. It is imperative to get your equipment and workstation set-up correctly. My workstation is what unlocks productivity for me.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "xMotorola Finance, xIBM Finance, xDeloitte Tax Management Consulting \u2014 Digital Transformation, ESG, Analytics"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F32f1b980bba5&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fexploring-detection-events-32f1b980bba5&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fexploring-detection-events-32f1b980bba5&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fexploring-detection-events-32f1b980bba5&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fexploring-detection-events-32f1b980bba5&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://me.dm/@cognitivedave", "anchor_text": "Mastodon"}, {"url": "https://towardsdatascience.com/?source=post_page-----32f1b980bba5--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----32f1b980bba5--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://cognitivedave.medium.com/?source=post_page-----32f1b980bba5--------------------------------", "anchor_text": ""}, {"url": "https://cognitivedave.medium.com/?source=post_page-----32f1b980bba5--------------------------------", "anchor_text": "David Moore"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F5fc60a27c1c4&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fexploring-detection-events-32f1b980bba5&user=David+Moore&userId=5fc60a27c1c4&source=post_page-5fc60a27c1c4----32f1b980bba5---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F32f1b980bba5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fexploring-detection-events-32f1b980bba5&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F32f1b980bba5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fexploring-detection-events-32f1b980bba5&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://towardsdatascience.com/tagged/dofromscratch", "anchor_text": "Doing Data Science from scratch task by task"}, {"url": "https://unsplash.com/@kalenemsley?utm_source=medium&utm_medium=referral", "anchor_text": "Kalen Emsley"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://towardsdatascience.com/doing-data-science-from-scratch-dab71253e777", "anchor_text": "Doing Data Science from Scratch"}, {"url": "https://towardsdatascience.com/parsing-the-motion-log-file-55d013b458a1", "anchor_text": "recovering event data"}, {"url": "https://towardsdatascience.com/solving-a-video-sequencing-puzzle-e4ad29020b7f", "anchor_text": "solving a video sequencing puzzle"}, {"url": "https://github.com/CognitiveDave/CountingTraffic/blob/main/motionLog.py", "anchor_text": "script to parse the log file"}, {"url": "https://github.com/CognitiveDave/CountingTraffic/blob/main/V1_combinevide.py", "anchor_text": "script that reads all those clips and makes a single video"}, {"url": "https://medium.com/swlh/shared-folders-on-a-local-network-f08183d57913", "anchor_text": "creating and debugging this device"}, {"url": "https://medium.com/@mlexperiencedavid/what-is-your-workspace-like-d203269c2d2d", "anchor_text": "What is your workspace like?In this short post, I will share some of the details of my current workspace. It is crucial to have a good workspace\u2026medium.com"}, {"url": "https://medium.com/tag/data-science?source=post_page-----32f1b980bba5---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/python?source=post_page-----32f1b980bba5---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/timeseries?source=post_page-----32f1b980bba5---------------timeseries-----------------", "anchor_text": "Timeseries"}, {"url": "https://medium.com/tag/computer-vision?source=post_page-----32f1b980bba5---------------computer_vision-----------------", "anchor_text": "Computer Vision"}, {"url": "https://medium.com/tag/dofromscratch?source=post_page-----32f1b980bba5---------------dofromscratch-----------------", "anchor_text": "Dofromscratch"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F32f1b980bba5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fexploring-detection-events-32f1b980bba5&user=David+Moore&userId=5fc60a27c1c4&source=-----32f1b980bba5---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F32f1b980bba5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fexploring-detection-events-32f1b980bba5&user=David+Moore&userId=5fc60a27c1c4&source=-----32f1b980bba5---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F32f1b980bba5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fexploring-detection-events-32f1b980bba5&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----32f1b980bba5--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F32f1b980bba5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fexploring-detection-events-32f1b980bba5&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----32f1b980bba5---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----32f1b980bba5--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----32f1b980bba5--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----32f1b980bba5--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----32f1b980bba5--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----32f1b980bba5--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----32f1b980bba5--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----32f1b980bba5--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----32f1b980bba5--------------------------------", "anchor_text": ""}, {"url": "https://cognitivedave.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://cognitivedave.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "David Moore"}, {"url": "https://cognitivedave.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "217 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F5fc60a27c1c4&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fexploring-detection-events-32f1b980bba5&user=David+Moore&userId=5fc60a27c1c4&source=post_page-5fc60a27c1c4--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F3d9220f2a184&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fexploring-detection-events-32f1b980bba5&newsletterV3=5fc60a27c1c4&newsletterV3Id=3d9220f2a184&user=David+Moore&userId=5fc60a27c1c4&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}