{"url": "https://towardsdatascience.com/manipulating-data-with-mongodb-bd561f09d76a", "time": 1683009629.253375, "path": "towardsdatascience.com/manipulating-data-with-mongodb-bd561f09d76a/", "webpage": {"metadata": {"title": "Manipulating Data With MongoDB. Learn the basics of CRUD with PyMongo | by Benedict Soh | Towards Data Science", "h1": "Manipulating Data With MongoDB", "description": "In the previous article, we managed to take a look at why MongoDB is so powerful and how to set it up and import our data. With everything set up, we can now learn the basics of MongoDB with PyMongo\u2026"}, "outgoing_paragraph_urls": [{"url": "https://towardsdatascience.com/lets-get-you-started-with-mongodb-part-1-85c64828c815", "anchor_text": "here", "paragraph_index": 0}, {"url": "https://docs.mongodb.com/manual/reference/operator/aggregation-pipeline/", "anchor_text": "aggregation", "paragraph_index": 16}, {"url": "https://docs.mongodb.com/manual/reference/operator/query/", "anchor_text": "operators", "paragraph_index": 23}, {"url": "https://docs.mongodb.com/manual/reference/operator/query/", "anchor_text": "documentation", "paragraph_index": 24}, {"url": "https://www.linkedin.com/in/bensjx/", "anchor_text": "https://www.linkedin.com/in/bensjx/", "paragraph_index": 42}], "all_paragraphs": ["Visit part 1 here to set up your MongoDB.", "In the previous article, we managed to take a look at why MongoDB is so powerful and how to set it up and import our data.", "With everything set up, we can now learn the basics of MongoDB with PyMongo. I will be walking you through the CRUD operations, which stands for:", "The following code shows how we can connect to our client:", "Replace <CONNECTION STIRNG> with your own string. If you are unsure of what it is, do refer back to part 1 of this series! It should look like this:", "Insertion of data is done simply with the insert_one() function:", "In the above code, we define our new data as a dictionary. You could include any number of fields (remember that MongoDB is flexible and you do not need to have a fixed set of keys). Note how we referred to our database with client.sample_mflix.movies. It follows the hierarchy of client.database.collections.", "The most important field is _id. Every document in MongoDB is identified by a unique identifier. If you were to insert 2 data with the same identifier, you will be met with an error.", "Let\u2019s verify that the new data is inserted with Compass:", "When you want to search for something in Compass, you have to specify it in the following format {'<KEY>':'<VALUE'}.", "insert_one() returns us with 2 output:", "BUT what if I want to insert many data?", "You simply need to change insert_one to insert_many. It\u2019s that simple!", "There are many ways to read your data. You can filter, group, sort, limit, count, sum along with many other functions provided by MongoDB. I will go through a few basics.", "find_one() allows us to retrieve the first data in our database", "finder allows us to specify the keys and value we want to filter by. projection allows us to specify what we want to return.", "Most of reading and writing of data in PyMongo can be done using an aggregation framework. Aggregation is a collection class method. This means that it can only be applied to collections/tables. An aggregation framework requires a pipeline or \u201ctemplate\u201d:", "Facet allows us to group our data nicely. It is similar to $group but it allows us to customise the way we want to group our data.", "In the results, we are first greeted by the top 10 countries in terms of the number of movies. Moving on, we have 3 buckets. For MongoDB, min is inclusive and max is exclusive. This means that there are movies that have a country combination that is similar to a minimum of 2 other movies and a maximum of 6 other movies. The number of such movies is 469. On the other hand, we also have min: 1 and max: 1. This means that there are 1695 movies with a unique combination of countries.", "For this section, I will be referring to the original movies_initial.csv since it is unclean. We will be cleaning some part of the data before exporting it into another collection named movies_subset.", "There are 3 ways you can filter your results.", "All the above 3 are the same. Well\u2026 not really the same, I sneaked an additional filter inside point 3. But you can see how you can input multiple filters in a single line!", "Note that $all and $match is very different. $match requires an exact match. $all will return the result as long as the specified values are found.", "There are certain comparative operators that you can include in your filters or searches.", "There are more than 20 operators. I highly recommend that you check out the documentation!", "Sorting and limiting are very simple. We often combine them to make our output readable. Not only can you input them in your aggregating framework, but you can also use it as a Python method.", "First of all, we specify the key we want to sort our values by. Notice that we keyed in imdb.rating as rating (a scalar) is nested inside imdb (an array).", "Notice that in our .find() method, we input an empty dictionary. This tells our finder to search the entire collection.", "Lastly, we sort our results in descending order and only return the top 100 results.", "Previously, we learnt how to modify our data into a new collection. Now, we will take a look at how we can modify our data in place.", "What we are doing in the code is to first, loop through all the movies with the title as \u201cTitanic\u201d. Next, I added 2 fields, comments and num_mflix_comments and instantiated them. Lastly, I removed the poster field as I do not need them anymore.", "We can verify that the code worked using Compass:", "update_one updates our collection one document at a time. This is not an issue if it is a small set of data. However, if we have a large dataset, we will want to update our data in batches", "Updating the collection in batches is very similar to updating it one by one. The difference is that every iteration, instead of updating, we keep our update in an array. At the same time, we keep track of the number of iterations we are at. The moment we hit the batch size, we will use bulk_write to write all the updates into our database", "Do remember to catch the last batch with the last 2 lines of code!", "We will only need 2 methods delete_one() and delete_many().", "Let\u2019s take a look at the number of movies with ratings lower than 3.5", "We notice that there are 178 movies. Let\u2019s delete one of them:", "We now only have 177 of them left, because we deleted 1 of them.", "Now, let\u2019s delete all the movies with ratings lower than 3.5", "Congratulations! You are now able to manipulate data in MongoDB. I highly suggest that you check out the documentation. There are only that much functions that I can explain. However, the documentation contains every single method that you will ever need to complete your project. I highly believe that learning how to read the documentation is an essential part of being a software engineer/data scientist.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "If you can't explain it to a six year old, you don't understand it yourself | https://www.linkedin.com/in/bensjx/"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fbd561f09d76a&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmanipulating-data-with-mongodb-bd561f09d76a&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmanipulating-data-with-mongodb-bd561f09d76a&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmanipulating-data-with-mongodb-bd561f09d76a&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmanipulating-data-with-mongodb-bd561f09d76a&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----bd561f09d76a--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----bd561f09d76a--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@bensjyy?source=post_page-----bd561f09d76a--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@bensjyy?source=post_page-----bd561f09d76a--------------------------------", "anchor_text": "Benedict Soh"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F31b2930a98d5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmanipulating-data-with-mongodb-bd561f09d76a&user=Benedict+Soh&userId=31b2930a98d5&source=post_page-31b2930a98d5----bd561f09d76a---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fbd561f09d76a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmanipulating-data-with-mongodb-bd561f09d76a&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fbd561f09d76a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmanipulating-data-with-mongodb-bd561f09d76a&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@markusspiske?utm_source=medium&utm_medium=referral", "anchor_text": "Markus Spiske"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://towardsdatascience.com/lets-get-you-started-with-mongodb-part-1-85c64828c815", "anchor_text": "here"}, {"url": "https://docs.mongodb.com/manual/reference/operator/aggregation-pipeline/", "anchor_text": "aggregation"}, {"url": "https://docs.mongodb.com/manual/reference/operator/query/", "anchor_text": "operators"}, {"url": "https://docs.mongodb.com/manual/reference/operator/query/", "anchor_text": "documentation"}, {"url": "https://www.coursera.org/learn/introduction-mongodb", "anchor_text": "https://www.coursera.org/learn/introduction-mongodb"}, {"url": "https://docs.mongodb.com/", "anchor_text": "https://docs.mongodb.com/"}, {"url": "https://github.com/bensjx/MongoDB_Demo/upload", "anchor_text": "https://github.com/bensjx/MongoDB_Demo/"}, {"url": "https://medium.com/tag/towards-data-science?source=post_page-----bd561f09d76a---------------towards_data_science-----------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/tag/data-science?source=post_page-----bd561f09d76a---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/technology?source=post_page-----bd561f09d76a---------------technology-----------------", "anchor_text": "Technology"}, {"url": "https://medium.com/tag/mongodb?source=post_page-----bd561f09d76a---------------mongodb-----------------", "anchor_text": "Mongodb"}, {"url": "https://medium.com/tag/programming?source=post_page-----bd561f09d76a---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fbd561f09d76a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmanipulating-data-with-mongodb-bd561f09d76a&user=Benedict+Soh&userId=31b2930a98d5&source=-----bd561f09d76a---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fbd561f09d76a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmanipulating-data-with-mongodb-bd561f09d76a&user=Benedict+Soh&userId=31b2930a98d5&source=-----bd561f09d76a---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fbd561f09d76a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmanipulating-data-with-mongodb-bd561f09d76a&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----bd561f09d76a--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fbd561f09d76a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmanipulating-data-with-mongodb-bd561f09d76a&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----bd561f09d76a---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----bd561f09d76a--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----bd561f09d76a--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----bd561f09d76a--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----bd561f09d76a--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----bd561f09d76a--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----bd561f09d76a--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----bd561f09d76a--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----bd561f09d76a--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@bensjyy?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@bensjyy?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Benedict Soh"}, {"url": "https://medium.com/@bensjyy/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "87 Followers"}, {"url": "https://www.linkedin.com/in/bensjx/", "anchor_text": "https://www.linkedin.com/in/bensjx/"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F31b2930a98d5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmanipulating-data-with-mongodb-bd561f09d76a&user=Benedict+Soh&userId=31b2930a98d5&source=post_page-31b2930a98d5--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F5d4bb7b070c8&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmanipulating-data-with-mongodb-bd561f09d76a&newsletterV3=31b2930a98d5&newsletterV3Id=5d4bb7b070c8&user=Benedict+Soh&userId=31b2930a98d5&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}