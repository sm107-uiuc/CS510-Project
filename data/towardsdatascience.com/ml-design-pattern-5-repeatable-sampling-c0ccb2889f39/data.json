{"url": "https://towardsdatascience.com/ml-design-pattern-5-repeatable-sampling-c0ccb2889f39", "time": 1683001247.2917309, "path": "towardsdatascience.com/ml-design-pattern-5-repeatable-sampling-c0ccb2889f39/", "webpage": {"metadata": {"title": "ML Design Pattern #5: Repeatable sampling | by Lak Lakshmanan | Towards Data Science", "h1": "ML Design Pattern #5: Repeatable sampling", "description": "Many machine learning tutorials will suggest that you split your data randomly into training, validation, and test datasets: The problem is that this fails in many real-world situations. The reason\u2026"}, "outgoing_paragraph_urls": [{"url": "https://medium.com/@lakshmanok/machine-learning-design-patterns-58e6ecb013d7", "anchor_text": "Full list here.", "paragraph_index": 0}], "all_paragraphs": ["An occasional series of design patterns for ML engineers. Full list here.", "Many machine learning tutorials will suggest that you split your data randomly into training, validation, and test datasets:", "The problem is that this fails in many real-world situations. The reason is that it is rare that the rows are independent. For example, if you are training a model to predict flight delays, the arrival delays of flights on the same day will be highly correlated with each other. This is called leakage, and it is an important problem to avoid when doing machine learning.", "The solution is to split the dataset based on the date column:", "Besides solving the original problem (data leakage), this also gives you repeatability:", "How do you choose the column to split on? The date column has to have several characteristics for us to be able to use it as the splitting column:", "You don\u2019t need three separate queries to generate training, validation, and test splits. You can do it in a single query as follows:", "What if you want a random split, but just need repeatability? In that case, you can simply hash the row data itself. Here\u2019s an easy way to do that:", "Note that if you have duplicate rows, then they will always end up in the same split. If this is a concern, add a unique id column to your SELECT query.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "articles are personal observations and not investment advice."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fc0ccb2889f39&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fml-design-pattern-5-repeatable-sampling-c0ccb2889f39&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fml-design-pattern-5-repeatable-sampling-c0ccb2889f39&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fml-design-pattern-5-repeatable-sampling-c0ccb2889f39&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fml-design-pattern-5-repeatable-sampling-c0ccb2889f39&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----c0ccb2889f39--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----c0ccb2889f39--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://lakshmanok.medium.com/?source=post_page-----c0ccb2889f39--------------------------------", "anchor_text": ""}, {"url": "https://lakshmanok.medium.com/?source=post_page-----c0ccb2889f39--------------------------------", "anchor_text": "Lak Lakshmanan"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F247b0630b5d6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fml-design-pattern-5-repeatable-sampling-c0ccb2889f39&user=Lak+Lakshmanan&userId=247b0630b5d6&source=post_page-247b0630b5d6----c0ccb2889f39---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fc0ccb2889f39&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fml-design-pattern-5-repeatable-sampling-c0ccb2889f39&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fc0ccb2889f39&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fml-design-pattern-5-repeatable-sampling-c0ccb2889f39&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://medium.com/@lakshmanok/machine-learning-design-patterns-58e6ecb013d7", "anchor_text": "Full list here."}, {"url": "https://github.com/google/farmhash", "anchor_text": "FARM_FINGERPRINT"}, {"url": "http://www.physics.csbsju.edu/stats/KS-test.html", "anchor_text": "Kolomogorov-Smirnov test"}, {"url": "https://medium.com/tag/data-science?source=post_page-----c0ccb2889f39---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----c0ccb2889f39---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/tag/design-patterns?source=post_page-----c0ccb2889f39---------------design_patterns-----------------", "anchor_text": "Design Patterns"}, {"url": "https://medium.com/tag/bigquery?source=post_page-----c0ccb2889f39---------------bigquery-----------------", "anchor_text": "Bigquery"}, {"url": "https://medium.com/tag/sql?source=post_page-----c0ccb2889f39---------------sql-----------------", "anchor_text": "Sql"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fc0ccb2889f39&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fml-design-pattern-5-repeatable-sampling-c0ccb2889f39&user=Lak+Lakshmanan&userId=247b0630b5d6&source=-----c0ccb2889f39---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fc0ccb2889f39&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fml-design-pattern-5-repeatable-sampling-c0ccb2889f39&user=Lak+Lakshmanan&userId=247b0630b5d6&source=-----c0ccb2889f39---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fc0ccb2889f39&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fml-design-pattern-5-repeatable-sampling-c0ccb2889f39&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----c0ccb2889f39--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fc0ccb2889f39&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fml-design-pattern-5-repeatable-sampling-c0ccb2889f39&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----c0ccb2889f39---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----c0ccb2889f39--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----c0ccb2889f39--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----c0ccb2889f39--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----c0ccb2889f39--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----c0ccb2889f39--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----c0ccb2889f39--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----c0ccb2889f39--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----c0ccb2889f39--------------------------------", "anchor_text": ""}, {"url": "https://lakshmanok.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://lakshmanok.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Lak Lakshmanan"}, {"url": "https://lakshmanok.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "9.3K Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F247b0630b5d6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fml-design-pattern-5-repeatable-sampling-c0ccb2889f39&user=Lak+Lakshmanan&userId=247b0630b5d6&source=post_page-247b0630b5d6--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F44e3f26acd1a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fml-design-pattern-5-repeatable-sampling-c0ccb2889f39&newsletterV3=247b0630b5d6&newsletterV3Id=44e3f26acd1a&user=Lak+Lakshmanan&userId=247b0630b5d6&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}