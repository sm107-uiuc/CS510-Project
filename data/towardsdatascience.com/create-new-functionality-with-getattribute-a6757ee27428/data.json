{"url": "https://towardsdatascience.com/create-new-functionality-with-getattribute-a6757ee27428", "time": 1683009514.509751, "path": "towardsdatascience.com/create-new-functionality-with-getattribute-a6757ee27428/", "webpage": {"metadata": {"title": "Create new functionality with __getattribute__ | by Alexander Bailey | Towards Data Science", "h1": "Create new functionality with __getattribute__", "description": "As a child of a class, it\u2019s hard to take back control from your parent. You might think that once your parent has given you some functionality, that\u2019s it and there\u2019s nothing you can do to change it\u2026"}, "outgoing_paragraph_urls": [], "all_paragraphs": ["As a child of a class, it\u2019s hard to take back control from your parent. You might think that once your parent has given you some functionality, that\u2019s it and there\u2019s nothing you can do to change it but that\u2019s not that case!", "We\u2019re going to consider an example where we want to use the functionality given to us by a parent but we want to do something before or after a parent method is called. This is going to be particularly useful if you're inheriting from a class defined in a module that isn\u2019t yours.", "To understand how to achieve this, we need an understanding of how Python calls a class method.", "So xander is an instance of Worker. When we run xander.set_name(\"Xander\"), two things happen.", "We want to change the behaviour of a function in the parent class but we don\u2019t have access to it (maybe because it\u2019s owned by a different module).", "We don\u2019t have any control over __call__ because the function is owned by the parent. However, we do have control over our own __getattribute__ so let\u2019s modify that instead.", "So to add new functionality we want to take the original method, add new functionality before or after and wrap that in a new function. Then, we interrupt the normal behaviour of __getattribute__ and inject our new wrapper instead.", "Let\u2019s look at a basic example, we want to add print statements before and after a function\u2019s run.", "For more exciting examples and to understand decorators more generally, I wrote about them here:", "Now we need to write our new __getattribute__ function:", "Checking if the attribute is callable is checking that the attribute being selected can be called with arguments and hence it makes sense to apply the wrapper. If the attribute is just a property, not a method, the behaviour will be unchanged.", "So all together for our basic example above that\u2019s going to look something like:", "And when we try and use it we get:", "A few words of working with these types of functions, messing with the __getattribute__ should be done with care, it gets called for every attribute so adding compute-heavy functionality is going slow down your program quite considerably. Messing around with functions like __getattribute__ can also very easily lead to recursion errors and kernel panics because the class keeps calling itself again and again.", "One example of this recursion happens if you use __getattribute__ to call __dict__ because __dict__ itself calls __getattribute__ and so the loop continues\u2026", "Having command over the double underscore methods of Python objects can allow you do save a lot of time and effort. The alternative way to achieve the same thing would have involved re-implementing each function along with decorators. Maybe that wouldn\u2019t be too bad for this example above but imagine trying to do it if your parent class was something like a Pandas data frame or a NumPy array\u2026 Then it becomes a significantly more daunting task.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Data Scientist trying to learn something new"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fa6757ee27428&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreate-new-functionality-with-getattribute-a6757ee27428&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreate-new-functionality-with-getattribute-a6757ee27428&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreate-new-functionality-with-getattribute-a6757ee27428&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreate-new-functionality-with-getattribute-a6757ee27428&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----a6757ee27428--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----a6757ee27428--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@alexanderbailey?source=post_page-----a6757ee27428--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@alexanderbailey?source=post_page-----a6757ee27428--------------------------------", "anchor_text": "Alexander Bailey"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fdb3e72c9d461&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreate-new-functionality-with-getattribute-a6757ee27428&user=Alexander+Bailey&userId=db3e72c9d461&source=post_page-db3e72c9d461----a6757ee27428---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fa6757ee27428&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreate-new-functionality-with-getattribute-a6757ee27428&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fa6757ee27428&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreate-new-functionality-with-getattribute-a6757ee27428&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://pixabay.com/users/josealbafotos-1624766/", "anchor_text": "josealbafotos"}, {"url": "https://towardsdatascience.com/level-up-your-code-with-python-decorators-c1966d78607", "anchor_text": "Level up your code with Python decoratorsLogging, type checking, exception handling and more!towardsdatascience.com"}, {"url": "https://medium.com/tag/data-science?source=post_page-----a6757ee27428---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/programming?source=post_page-----a6757ee27428---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/tag/python?source=post_page-----a6757ee27428---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/towards-data-science?source=post_page-----a6757ee27428---------------towards_data_science-----------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fa6757ee27428&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreate-new-functionality-with-getattribute-a6757ee27428&user=Alexander+Bailey&userId=db3e72c9d461&source=-----a6757ee27428---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fa6757ee27428&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreate-new-functionality-with-getattribute-a6757ee27428&user=Alexander+Bailey&userId=db3e72c9d461&source=-----a6757ee27428---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fa6757ee27428&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreate-new-functionality-with-getattribute-a6757ee27428&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----a6757ee27428--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fa6757ee27428&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreate-new-functionality-with-getattribute-a6757ee27428&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----a6757ee27428---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----a6757ee27428--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----a6757ee27428--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----a6757ee27428--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----a6757ee27428--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----a6757ee27428--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----a6757ee27428--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----a6757ee27428--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----a6757ee27428--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@alexanderbailey?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@alexanderbailey?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Alexander Bailey"}, {"url": "https://medium.com/@alexanderbailey/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "156 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fdb3e72c9d461&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreate-new-functionality-with-getattribute-a6757ee27428&user=Alexander+Bailey&userId=db3e72c9d461&source=post_page-db3e72c9d461--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Ff756d91c4fbd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreate-new-functionality-with-getattribute-a6757ee27428&newsletterV3=db3e72c9d461&newsletterV3Id=f756d91c4fbd&user=Alexander+Bailey&userId=db3e72c9d461&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}