{"url": "https://towardsdatascience.com/getting-started-with-giotto-time-d9b2088d60ca", "time": 1683003716.2165902, "path": "towardsdatascience.com/getting-started-with-giotto-time-d9b2088d60ca/", "webpage": {"metadata": {"title": "Getting started with giotto-time. A tutorial to start making forecasts\u2026 | by Francesco Palma | Towards Data Science", "h1": "Getting started with giotto-time", "description": "Generating accurate time series forecasts is essential in many business and research contexts. At L2F we found that there was limited tooling available to generate these forecasts in Python and the\u2026"}, "outgoing_paragraph_urls": [{"url": "https://medium.com/@lewis.c.tunstall", "anchor_text": "Lewis Tunstall", "paragraph_index": 0}, {"url": "https://github.com/giotto-ai/giotto-time", "anchor_text": "giotto-time", "paragraph_index": 3}, {"url": "https://github.com/giotto-ai/time_series_energy_demand", "anchor_text": "here", "paragraph_index": 3}, {"url": "https://www.swissgrid.ch/en/home/operation/grid-data/generation.html", "anchor_text": "here", "paragraph_index": 6}, {"url": "https://github.com/giotto-ai/time_series_energy_demand", "anchor_text": "notebook", "paragraph_index": 26}, {"url": "https://twitter.com/giotto_ai", "anchor_text": "Twitter", "paragraph_index": 31}, {"url": "https://www.linkedin.com/company/l2f-business-topological-modeling/", "anchor_text": "LinkedIn", "paragraph_index": 31}, {"url": "https://slack.giotto.ai/", "anchor_text": "here", "paragraph_index": 31}], "all_paragraphs": ["Written by Francesco Palma, Colin K\u00e4lin and Lewis Tunstall", "Generating accurate time series forecasts is essential in many business and research contexts. At L2F we found that there was limited tooling available to generate these forecasts in Python and the PyData stack. Although popular libraries like statsmodels and Facebook\u2019s Prophet work well for certain applications, it was needed a flexible framework that would allow to combine tens, possibly hundreds of models and stack thousands of features.", "To that end, we have open-sourced our time series tooling with the Python library giotto-time. The library is designed for large-scale machine learning applications, where creating custom models is important. giotto-time also provides a simple API to automate feature selection, perform causality tests, and generate new features.", "In this blog post we present some of the functionalities of the Python time series library giotto-time. The accompanying notebook is available here.", "Electricity is crucial in today\u2019s society. However, it is hard and expensive to store. This is especially true with the increasing importance of renewables in energy markets, which makes forecasting the energy demand and important task for energy providers.", "To showcase the features available in giotto-time, we will focus on the problem of forecasting the Swiss energy demand up to 21 days in advance.", "The data was downloaded from Swissgrid, a Swiss energy transmission grid operator and can be found here. The plot shows the daily average energy demand from 2016 to 2019.", "Getting started with giotto-time is a simple as running:", "In the following sections we will go through the four most important features of giotto-time, which have also been used to model the energy demand:", "The library is designed to make full use of the powerful time series and date functionality of pandas. In particular, the central object in giotto-time is a pandas DataFrame with a DateTimeIndex for timestamps and columns for each feature.", "Another important aspect of the library is tight integration with scikit-learn. This enables consistent use of the fit, predict and transform paradigm of the popular machine learning framework.", "The first step in the giotto-time pipeline is to model the underlying trend and seasonality in the time series. The Detrender in giotto-time makes it possible to do this by choosing either a polynomial or exponential model. Then simply calling fit_transform on the time series will remove the trend as shown in the code snippet below.", "In order to encode seasonalities, e.g. summer and winter or weekly seasonalities, it\u2019s possible to fit a sine wave with an appropriate phase shift as in the example below.", "This can be done as follows:", "Assessing causality is one of the most debated topics in time series analysis, and often requires an ad-hoc analysis. Due to the amount of data and external factors to take into account, this is often not possible. In giotto-time we provide a method to automate this process, while keeping the statistical rigour of ad-hoc approaches.", "Correlation doesn\u2019t mean causation. But, if statistically significant, it can be a helpful feature in a forecasting framework", "The ShiftedLinearCoefficient class finds the optimal lag for which a target time series is most correlated to any feature time series. Once the shift is found, a statistical test is performed to assess the significance of the correlation. Finally, through the transform method, all the feature time series are automatically shifted forward to align them with the target time series at the optimal lag. In this way the output is ready to be used for predictions!", "It\u2019s possible to use either linear fit or Pearson correlation coefficients. Either bootstrap tests or permutation tests can be performed to assess significance. In the code example below you can see how this is done in practice. In the end, we can shift the columns in the data frame by simply using the transform method.", "Arguably, one of the most important functionalities of the library is the feature creation step.", "Once the features have been created, we need to split the X and y data frames. In particular we have to define a time horizon which corresponds to the number of time steps we would like to look ahead. For the energy demand example, this is 21 days which results in a data frame with 21 columns and NaN values in the lower right triangle of the test values of y. This is due to there being no known values there. The label creation is done using the following transformer:", "An example is shown in the figure below. The first column corresponds to looking one time step ahead, the second two and so on.", "There are two types of models that are currently supported by giotto-time at this point:", "The GARFF model makes it possible to choose any scikit-learn compatible regressor or classifier and use it to make forecasts on time series. FeedForward in this context means that in addition to the features the model makes a prediction for one time and adds these to the data frame then it uses this new data frame to make predictions for the next time step and so on.", "The code snippet below shows how you can easily create such a model with a linear regressor as a base model.", "Another possiblity is to use giotto-time\u2019s own linear regressor which allows one to optimize a custom loss function. In the example below, the maximal error was used.", "Both of them use the fit/predict methods you might be familiar with from scikit-learn.", "In the notebook that accompanies this blog post we use these functions to make predictions about the daily average energy demand of Switzerland up to 21 days ahead.", "In the figure below, the results for the best model with respect to the mean absolute error are plotted together with the reference values. We can clearly see that the predictions follow the global trend as well as the weekly trend. However, there are some outliers. An example is the 1st of August (the large drop in the blue curve). This is the Swiss national day and a similar drop appears also for the years 2016 to 2018 as can be seen from the time series in the figure at the beginning of this blog post. Due to the few years available in the data, this effect is not captured entirely by the calendar feature that we included in the model.", "The table below gives an overview of the different models that were tested and the results obtained for various metrics. For the baseline model we find in the training set the ideal number of days to look back and then use the value on this day as a forecast. The best results are marked in yellow.", "We observe that the GARFF model with linear regression as a base model performs better than the others on all but the maximal error metric. In particular the relative mean absolute error improved from 9.0% in the baseline model to 6.8% in the GARFF model with linear regression. Similar results are obtained for the other cases. The maximal error is highly dependent on the existence of outliers. As discussed above, the 1st of August is such an outlier in that the energy demand there is very low compared to other days.", "We gave an introduction to the Python time series library giotto-time and used it to predict the energy demand in Switzerland. Different functions of giotto-time were presented such as detrending, causality tests, feature creation as well as different models such as the generalized autoregression model with feed forward and the linear regressor with custom loss functions.", "If you want to know more about giotto-time and giotto-tda you can follow us on Twitter or LinkedIn or join our Slack channel here.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Co-founder at L2F | Open-source developer @Giotto_ai | Mathematician interested in everything with a topology"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fd9b2088d60ca&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgetting-started-with-giotto-time-d9b2088d60ca&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgetting-started-with-giotto-time-d9b2088d60ca&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgetting-started-with-giotto-time-d9b2088d60ca&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgetting-started-with-giotto-time-d9b2088d60ca&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----d9b2088d60ca--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----d9b2088d60ca--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@lapalmafrancesco?source=post_page-----d9b2088d60ca--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@lapalmafrancesco?source=post_page-----d9b2088d60ca--------------------------------", "anchor_text": "Francesco Palma"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fc8c43a758cb0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgetting-started-with-giotto-time-d9b2088d60ca&user=Francesco+Palma&userId=c8c43a758cb0&source=post_page-c8c43a758cb0----d9b2088d60ca---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fd9b2088d60ca&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgetting-started-with-giotto-time-d9b2088d60ca&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fd9b2088d60ca&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgetting-started-with-giotto-time-d9b2088d60ca&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://medium.com/@lewis.c.tunstall", "anchor_text": "Lewis Tunstall"}, {"url": "https://github.com/giotto-ai/giotto-time", "anchor_text": "giotto-time"}, {"url": "https://github.com/giotto-ai/time_series_energy_demand", "anchor_text": "here"}, {"url": "https://www.swissgrid.ch/en/home/operation/grid-data/generation.html", "anchor_text": "here"}, {"url": "https://github.com/giotto-ai/time_series_energy_demand", "anchor_text": "notebook"}, {"url": "https://twitter.com/giotto_ai", "anchor_text": "Twitter"}, {"url": "https://www.linkedin.com/company/l2f-business-topological-modeling/", "anchor_text": "LinkedIn"}, {"url": "https://slack.giotto.ai/", "anchor_text": "here"}, {"url": "https://medium.com/tag/time-series-analysis?source=post_page-----d9b2088d60ca---------------time_series_analysis-----------------", "anchor_text": "Time Series Analysis"}, {"url": "https://medium.com/tag/causality?source=post_page-----d9b2088d60ca---------------causality-----------------", "anchor_text": "Causality"}, {"url": "https://medium.com/tag/forecasting?source=post_page-----d9b2088d60ca---------------forecasting-----------------", "anchor_text": "Forecasting"}, {"url": "https://medium.com/tag/energy-demand?source=post_page-----d9b2088d60ca---------------energy_demand-----------------", "anchor_text": "Energy Demand"}, {"url": "https://medium.com/tag/python?source=post_page-----d9b2088d60ca---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fd9b2088d60ca&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgetting-started-with-giotto-time-d9b2088d60ca&user=Francesco+Palma&userId=c8c43a758cb0&source=-----d9b2088d60ca---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fd9b2088d60ca&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgetting-started-with-giotto-time-d9b2088d60ca&user=Francesco+Palma&userId=c8c43a758cb0&source=-----d9b2088d60ca---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fd9b2088d60ca&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgetting-started-with-giotto-time-d9b2088d60ca&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----d9b2088d60ca--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fd9b2088d60ca&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgetting-started-with-giotto-time-d9b2088d60ca&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----d9b2088d60ca---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----d9b2088d60ca--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----d9b2088d60ca--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----d9b2088d60ca--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----d9b2088d60ca--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----d9b2088d60ca--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----d9b2088d60ca--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----d9b2088d60ca--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----d9b2088d60ca--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@lapalmafrancesco?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@lapalmafrancesco?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Francesco Palma"}, {"url": "https://medium.com/@lapalmafrancesco/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "206 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fc8c43a758cb0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgetting-started-with-giotto-time-d9b2088d60ca&user=Francesco+Palma&userId=c8c43a758cb0&source=post_page-c8c43a758cb0--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F4249f00127b0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgetting-started-with-giotto-time-d9b2088d60ca&newsletterV3=c8c43a758cb0&newsletterV3Id=4249f00127b0&user=Francesco+Palma&userId=c8c43a758cb0&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}