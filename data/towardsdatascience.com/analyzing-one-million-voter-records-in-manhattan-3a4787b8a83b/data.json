{"url": "https://towardsdatascience.com/analyzing-one-million-voter-records-in-manhattan-3a4787b8a83b", "time": 1683001681.673502, "path": "towardsdatascience.com/analyzing-one-million-voter-records-in-manhattan-3a4787b8a83b/", "webpage": {"metadata": {"title": "Analyzing One Million Voter Records in Manhattan | by Matt Grierson | Towards Data Science", "h1": "Analyzing One Million Voter Records in Manhattan", "description": "What if you could instantly visualize the political affiliation of an entire city, down to every single apartment and human registered to vote? Somewhat surprisingly, the City of New York made this a\u2026"}, "outgoing_paragraph_urls": [{"url": "https://www.nytimes.com/2019/04/26/nyregion/voter-registration-nyc-online.html", "anchor_text": "New York Times", "paragraph_index": 0}, {"url": "https://www.wnyc.org/story/new-york-city-board-elections-posted-all-voters-names-addresses-and-party-affiliations/", "anchor_text": "article", "paragraph_index": 0}, {"url": "https://en.wikipedia.org/wiki/Census_tract", "anchor_text": "census tract", "paragraph_index": 4}, {"url": "https://pypi.org/project/PyPDF2/", "anchor_text": "PyPDF2", "paragraph_index": 13}, {"url": "https://github.com/madmaze/pytesseract", "anchor_text": "Pytesseract", "paragraph_index": 14}, {"url": "https://github.com/geopy/geopy", "anchor_text": "Geopy", "paragraph_index": 18}, {"url": "https://streamlit.io/", "anchor_text": "Streamlit", "paragraph_index": 20}, {"url": "https://kepler.gl/", "anchor_text": "Kepler.gl", "paragraph_index": 21}, {"url": "https://medium.com/u/5691029a1e6a?source=post_page-----3a4787b8a83b--------------------------------", "anchor_text": "Mapbox", "paragraph_index": 21}, {"url": "https://en.wikipedia.org/wiki/Gerrymandering", "anchor_text": "Gerrymandering", "paragraph_index": 31}, {"url": "https://en.m.wikipedia.org/wiki/Redistricting", "anchor_text": "Redistricting", "paragraph_index": 31}], "all_paragraphs": ["What if you could instantly visualize the political affiliation of an entire city, down to every single apartment and human registered to vote? Somewhat surprisingly, the City of New York made this a reality in early 2019, when the NYC Board of Elections decided to release 4.6 million voter records online, as reported by the New York Times. These records included full name, home address, political affiliation, and whether you have registered in the past 2 years. The reason according to this article was:", "Board officials said their print vendor was not able to produce enough copies of the voter enrollment book in time for candidates to begin gathering petition signatures in February, which is why they posted the information online.", "so this became the \u2018stopgap\u2019 in the meantime. Although as NYC BOE spokeswoman Valerie Vazquez-Diaz said in the same article:", "Whether you were aware of it or not, NY voter data is public record.", "While the idea of a city making 4.6 million personal records of voters publicly available on a whim is deeply troubling, and I plan to discuss that in another article, the opportunity to visualize this data intrigued me. With most public datasets, the most granular you tend to have access to is maybe census tract level, but New York City just laid out one of the most unique datasets in the world! For the first time there now existed a dataset to visualize a vast array of hyper-granular voter data, including political affiliation concentration by area, whether there are concerted efforts in certain areas to register new voters, and how dominant parties are at a scale that people can understand.", "In the end I decided to attempt and publish this for two reasons:", "1. Public officials need to better consider the potential ramifications of posting a massive dataset like this online", "In this case it took a single, semi-technical person a few weekends of their free time to download, transform, and search through millions of records. Not only did I do that, but I was able to geocode over a million records for about $30 after credits on Google. Privacy needs to be top of mind as opposed to an afterthought in this digital age.", "2. At an aggregated level this data offers new and unique insights that are valuable to a broad spectrum of people", "I do believe this dataset (visualized/analyzed at the building-level) can offer unique insights while maintaining the privacy of myself and other New York residents.", "In aggregate, I found that there does indeed exist concentrated areas that are party-dominant, and that party dominant clusters occur across the entire city. I also found that new voter registration were highly concentrated in areas like Alphabet City and the Upper East Side, with some clusters having up to 5x higher registrants vs. others. The remainder of the article will cover the methodology of transforming ~600 PDFs into a usable dataset, three visualizations of unique comparisons observed, and a conclusion with suggestions on further research.", "Now just because data is available doesn\u2019t mean it\u2019s accessible, which was demonstrated by the way the data released. Let\u2019s take a redacted look at the raw PDF below:", "From a data science perspective, this is an absolute nightmare. A few of the many reasons:", "Since I\u2019m a Python person, I immediately began trying to use the various existing libraries like PyPDF2 to try and read the data, but it became clear that the formatting of the PDF would not allow for this. Troubled after sinking my first few hours into a dead-end, I began to re-think my strategy. If I couldn\u2019t use the existing way the data was structured on the page, I needed to find a way to completely isolate and rebuild every word from the ground up on the page.", "Enter Optical Character Recognition (\u2018OCR\u2019). Using the Pytesseract library, I changed my strategy by telling my program each page was an image instead of a PDF page. In fact, all it takes is a single line of code:", "To give you coordinates for virtually every element on the page:", "Once I was able to confirm this, it\u2019s a matter of working out how to use those positions in order to construct a custom delimiter to loop through each page. Unfortunately, most of the first few columns wouldn\u2019t work due to the way Pytesseract chose to group things, but the info for \u2018left\u2019, \u2018top\u2019, \u2018width\u2019, and \u2018height\u2019 were accurate from what I could tell. So for my program, I basically utilized the following logic:", "To be fair, there was a lot of nuance and edge case handling I had to deal with, and the results of OCR are not perfect (which I\u2019ll discuss more in the conclusion). However, after a day or two of tinkering around, I was able to successfully iterate through my first 250 page PDF in about 30 minutes and transform it into a fully utilizable data table!", "Now was the fun part, how do I translate this onto an actual map? I had addresses, but I wouldn\u2019t be able to actually map them unless I could somehow find the lat/lon coordinates for each address. When I looked at the unique Manhattan addresses I successfully converted, it came to almost 100,000 unique addresses, so doing this part manually was out of the question. Luckily, not only does Google have a Reverse Geocode API, but I found a fantastic python library called Geopy that let me easily create a function to geocode a list of addresses in under 20 lines of code.", "Since I had never used Google\u2019s cloud platform, I started with a $300 free credit, which helped offset the total cost of ~$330. Emboldened by my free credits and whimsy, I let my program execute over the next ~12 hours to return a beautiful set of lat/lon coordinates for almost all the corresponding addresses. After joining that with the aggregated dataset and doing some data cleanup (see conclusion), it was time to determine how to visualize it.", "Visualizing massive datasets is no small task, outside of finding a visualization library that can handle several hundred thousand rows, you also need to consider the technique for visualizing the dataset so that the end result is meaningful and truthful to the underlying data. I initially began using a fantastic new project in the Machine Learning community called Streamlit, but ultimately decided I didn\u2019t want to create a dashboard since too much clutter detracted from the focus (mapping the data).", "Ultimately I went with the graphing library made by the Uber Visualization team called Kepler.gl. Kepler uses Mapbox as the underlying map provider and does an amazing job not only at handling large datasets, but is extremely accessible even for people who don\u2019t code. After experimenting with a few different techniques, filters, and layers designs I decided on the three most impactful below.", "One of the first things I wanted to see was \u2018what does each party concentration look like in isolation\u2019? I wanted to do this for two reasons:", "To do this I created a dual view of each party on a map, made the radius width based on the concentration of points in a given area (intensity of registered voters in area), then created a sequential quantized color scale based on the avg. percentage of buildings in the area the parties occupy.", "As we can see in the map comparisons Manhattan is indeed overwhelmingly Democratic, and many multiples more concentrated in areas like Harlem (northern piece of Manhattan). Not surprisingly they tend to also make up a majority of voters in most buildings, as you can see by the darker blue prevalent in the map. Looking at the Republican side, it is clear that in raw numbers they make up a minority, and in areas where they do have large clusters are typically still dominated by Democrats (shown by the light vs dark red). It does appear that areas in the Upper East like Lenox Hill, Turtle Bay, and Yorkville are highly concentrated when compared to other areas. There also appears to be smaller concentrations in areas like Lincoln Square and around the Financial District, albeit much more sparse.", "So now that we\u2019ve examined the raw party dominance let\u2019s try to combine onto a single map. The idea here is to try and show dominant areas of party concentration, while also maintaining the relative scale of the population. In order to do this I created a grid-style layer that used the sum of party counts in 0.2km (~0.06 mile) radius. I would then create a color for each grid based on the party most frequent party found in the area. My assumption was that even though the Democratic party dominates Manhattan, there are probably bastions of Republican-dominant areas. Below is the result:", "As we can see, there are no surprises here as the Democratic party dominates the map, even in areas like the Upper East Side where Republicans were most concentrated. There does seem to be some thematic areas like the Southeast area of Central Park, but ultimately there\u2019s very little dominance when compared at the same scale of Democratic concentration.", "One thing I was particularly curious about was whether voter registrations in Manhattan were concentrated in certain areas. The PDFs included data on voters that registered in 2017 and 2018, so I decided to see what insights could be gleaned. Overall, I was able to capture about 55,000 newly registered voters, so I decided to aggregate new voters in 0.2km (~0.12 mile) clusters. Manhattan itself is only about 2.3 miles wide, so it\u2019s important to pick a scale that\u2019s going to be meaningful to the area you are representing. At first I tried separating out the parties like the dual map above, but saw surprisingly little variety in areas new Democrats vs. Republicans were registering. I instead decided to combine new registrants from both parties together and look at 2017 vs. 2018 new voters in aggregate.", "As we can see, there are two areas where new voter registrations were very concentrated \u2014 the Lenox Hill/Yorkville area in the Upper East Side, the area around Alphabet City in the East Village. It\u2019s difficult to glean any definitive insight from this, but the concentration is interesting since the red areas have almost 5x the concentration of new voters vs. the cooler green areas on the map. There are a few ways to potentially interpret this \u2014 perhaps these areas are comprised of more new individuals relocating to Manhattan relative to other areas; or, it could be reflective of concentrated efforts by the community to encourage voter registration.", "This was a really interesting project to tackle, but there are a few disclaimers I also need to highlight about the analysis. First and foremost, using OCR like I did comes with a big trade-off in terms of accuracy. My final dataset was trimmed to about 750k aggregated records, much of which was due to data I had to throw about because the OCR read it incorrectly (ex/ \u2018100 Orange Street\u2019 may be read as \u2018T0O 0range $treet\u2019).", "Because data like street numbers and names appear only once in some cases, the program misreading them in this way ultimately causes the lat/lon coordinates to either not be found or incorrect. I used my best judgement in attempting to toss out clearly incorrect large concentrations of data, but just know that this dataset was not perfect and may not be 100% representative of the reality. Although the data is likely directionally accurate, I have no perfect verification method since it was a one-man operation.", "I would love to see cities think about how to create more open datasets like this. Although I\u2019m disappointed in the way New York City released the dataset, I think the underlying data at an aggregated level offers huge value to many interested parties. Not only could this help researchers better understand voter trends, but could also greatly contribute to studies and related to issues such as Gerrymandering and Redistricting.", "Further research could incorporate blending in other datasets like US census data to understand things like voter engagement in areas, or socioeconomic mixes that spur voter registration. I also did not visualize areas like Brooklyn or other parties outside of Republicans or Democrats, so those are still unexplored territory as well. I\u2019m sure that looking further into these areas would uncover more unique findings about the composition of New York voters. I hope this was helpful and gives everyone food for thought \u2014 thanks for taking the time to read through and feel free to comment below with thoughts or questions!", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F3a4787b8a83b&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fanalyzing-one-million-voter-records-in-manhattan-3a4787b8a83b&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fanalyzing-one-million-voter-records-in-manhattan-3a4787b8a83b&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fanalyzing-one-million-voter-records-in-manhattan-3a4787b8a83b&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fanalyzing-one-million-voter-records-in-manhattan-3a4787b8a83b&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----3a4787b8a83b--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----3a4787b8a83b--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@mattygyo?source=post_page-----3a4787b8a83b--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@mattygyo?source=post_page-----3a4787b8a83b--------------------------------", "anchor_text": "Matt Grierson"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F642d1ad397ba&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fanalyzing-one-million-voter-records-in-manhattan-3a4787b8a83b&user=Matt+Grierson&userId=642d1ad397ba&source=post_page-642d1ad397ba----3a4787b8a83b---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F3a4787b8a83b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fanalyzing-one-million-voter-records-in-manhattan-3a4787b8a83b&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F3a4787b8a83b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fanalyzing-one-million-voter-records-in-manhattan-3a4787b8a83b&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://www.nytimes.com/2019/04/26/nyregion/voter-registration-nyc-online.html", "anchor_text": "New York Times"}, {"url": "https://www.wnyc.org/story/new-york-city-board-elections-posted-all-voters-names-addresses-and-party-affiliations/", "anchor_text": "article"}, {"url": "https://en.wikipedia.org/wiki/Census_tract", "anchor_text": "census tract"}, {"url": "https://pypi.org/project/PyPDF2/", "anchor_text": "PyPDF2"}, {"url": "https://github.com/madmaze/pytesseract", "anchor_text": "Pytesseract"}, {"url": "https://github.com/geopy/geopy", "anchor_text": "Geopy"}, {"url": "https://streamlit.io/", "anchor_text": "Streamlit"}, {"url": "https://kepler.gl/", "anchor_text": "Kepler.gl"}, {"url": "https://medium.com/u/5691029a1e6a?source=post_page-----3a4787b8a83b--------------------------------", "anchor_text": "Mapbox"}, {"url": "https://en.wikipedia.org/wiki/Politics_of_New_York_City", "anchor_text": "voting population"}, {"url": "https://en.wikipedia.org/wiki/Gerrymandering", "anchor_text": "Gerrymandering"}, {"url": "https://en.m.wikipedia.org/wiki/Redistricting", "anchor_text": "Redistricting"}, {"url": "https://medium.com/tag/data-science?source=post_page-----3a4787b8a83b---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/python?source=post_page-----3a4787b8a83b---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/data-visualization?source=post_page-----3a4787b8a83b---------------data_visualization-----------------", "anchor_text": "Data Visualization"}, {"url": "https://medium.com/tag/politics?source=post_page-----3a4787b8a83b---------------politics-----------------", "anchor_text": "Politics"}, {"url": "https://medium.com/tag/new-york?source=post_page-----3a4787b8a83b---------------new_york-----------------", "anchor_text": "New York"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F3a4787b8a83b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fanalyzing-one-million-voter-records-in-manhattan-3a4787b8a83b&user=Matt+Grierson&userId=642d1ad397ba&source=-----3a4787b8a83b---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F3a4787b8a83b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fanalyzing-one-million-voter-records-in-manhattan-3a4787b8a83b&user=Matt+Grierson&userId=642d1ad397ba&source=-----3a4787b8a83b---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F3a4787b8a83b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fanalyzing-one-million-voter-records-in-manhattan-3a4787b8a83b&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----3a4787b8a83b--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F3a4787b8a83b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fanalyzing-one-million-voter-records-in-manhattan-3a4787b8a83b&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----3a4787b8a83b---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----3a4787b8a83b--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----3a4787b8a83b--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----3a4787b8a83b--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----3a4787b8a83b--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----3a4787b8a83b--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----3a4787b8a83b--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----3a4787b8a83b--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----3a4787b8a83b--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@mattygyo?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@mattygyo?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Matt Grierson"}, {"url": "https://medium.com/@mattygyo/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "346 Followers"}, {"url": "https://www.linkedin.com/in/matthewgrierson/", "anchor_text": "https://www.linkedin.com/in/matthewgrierson/"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F642d1ad397ba&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fanalyzing-one-million-voter-records-in-manhattan-3a4787b8a83b&user=Matt+Grierson&userId=642d1ad397ba&source=post_page-642d1ad397ba--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fbcc255d5ba5e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fanalyzing-one-million-voter-records-in-manhattan-3a4787b8a83b&newsletterV3=642d1ad397ba&newsletterV3Id=bcc255d5ba5e&user=Matt+Grierson&userId=642d1ad397ba&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}