{"url": "https://towardsdatascience.com/recreate-publication-quality-interactive-tables-in-r-using-reactable-187407bc9702", "time": 1683009278.69162, "path": "towardsdatascience.com/recreate-publication-quality-interactive-tables-in-r-using-reactable-187407bc9702/", "webpage": {"metadata": {"title": "Recreate Publication-Quality, Interactive Tables in R using reactable | by Connor Rothschild | Towards Data Science", "h1": "Recreate Publication-Quality, Interactive Tables in R using reactable", "description": "How to use reactable to create publication-ready visuals in R"}, "outgoing_paragraph_urls": [{"url": "https://twitter.com/J_CD_T/status/1261625814854045696", "anchor_text": "datasets", "paragraph_index": 0}, {"url": "https://www.economist.com/graphic-detail/2020/04/16/tracking-covid-19-excess-deaths-across-countries", "anchor_text": "describe", "paragraph_index": 0}, {"url": "https://twitter.com/dataandme/status/1196552930167599106", "anchor_text": "come across", "paragraph_index": 2}, {"url": "https://glin.github.io/reactable/index.html", "anchor_text": "reactable", "paragraph_index": 2}, {"url": "https://malco.io/2020/05/16/replicating-an-nyt-table-of-swedish-covid-deaths-with-gt/", "anchor_text": "blog post", "paragraph_index": 3}, {"url": "https://github.com/TheEconomist/covid-19-excess-deaths-tracker/tree/master/output-data/excess-deaths", "anchor_text": "country-level CSVs", "paragraph_index": 6}, {"url": "https://stackoverflow.com/questions/40039903/r-add-th-rd-and-nd-to-dates", "anchor_text": "function", "paragraph_index": 19}, {"url": "https://github.com/hrbrmstr/hrbrthemes", "anchor_text": "Bob Rudis\u2019s", "paragraph_index": 25}, {"url": "https://github.com/hrbrmstr/hrbrthemes", "anchor_text": "hrbrthemes", "paragraph_index": 25}, {"url": "https://glin.github.io/reactable/articles/examples.html", "anchor_text": "some of which are documented here", "paragraph_index": 27}, {"url": "https://glin.github.io/reactable/articles/twitter-followers/twitter-followers.html", "anchor_text": "example", "paragraph_index": 29}, {"url": "https://github.com/connorrothschild/economist-table-replication/blob/master/economist-table-replication.Rmd", "anchor_text": "my GitHub", "paragraph_index": 39}, {"url": "http://me@connorrothschild.com", "anchor_text": "me@connorrothschild.com", "paragraph_index": 39}, {"url": "http://twitter.com/CL_Rothschild", "anchor_text": "Twitter DMs", "paragraph_index": 39}, {"url": "https://connorrothschild.com/", "anchor_text": "https://connorrothschild.com/", "paragraph_index": 41}], "all_paragraphs": ["The Economist recently released a series of country-level datasets on \u2018excess mortality\u2019, a term used to describe \u2018the gap between the total number of people who died from any cause, and the historical average for the same place and time of year.\u2019 In simpler terms, the measure captures how many deaths are happening that shouldn\u2019t be.", "In the (free!) articles accompanying that data, I came across the following table:", "I thought the table was clean and sent a clear message. The addition of inline barcharts is not intrusive but still helps the reader takeaway insights about the data. It\u2019s a rather pretty table. Having recently come across Greg Lin\u2019s package reactable, I thought this could be a good opportunity to try my hand at recreating the above.", "(Coincidentally, while I was working on this project, Malcolm Barrett released a similar blog post documenting his recreation of a NYT table using gt. Check it out!)", "Our process uses standard packages: reactable (obviously), htmltools as its buddy, lubridate for days and times, hrbrthemes for The Economist\u2019s font, and tidyverse for general purpose data wrangling.", "You can definitely skip this step if you\u2019re not interested in the data collection and cleaning process.", "Unfortunately, one of the more time-consuming steps of this project was getting the data in the same format The Economist used in their article. The data they released comes in the form of a series of country-level CSVs; although helpful for country-level analysis, this meant that we have to modify the data into a joined format in order to create a table.", "Let\u2019s begin by creating a function which reads in each individual CSV, selects relevant columns, and stores that specific dataframe in the global environment.", "With that function created, we then want to loop it with each country The Economist has included.", "To do so, we grab their list of sources from GitHub and pull each country into a list:", "Now, we have a list of dataframes, with each containing one country\u2019s data on excess mortality.", "Finally, we merge each of these new dataframes into one master dataset. Here, we are defining in dfs a list of all objects in the global environment that are of the structure data frame. Then, we rbind them all together!", "But unfortunately, that\u2019s not all. We need to filter our data to only include the places that are in The Economist\u2019s table. To make matters more difficult, the table\u2019s identifying row is titled \u2018Region/Country\u2019, and includes data from two separate rows in the CSVs.", "Let\u2019s begin by manually defining and filtering according to the countries and regions that The Economist includes. (This selection does not seem to have an order to it; as such, it has to be manual).", "Because the table only has one row for country/region, and groups them accordingly, we can go ahead and replace the country variable in the data_filtered_regions dataframe with region.", "Next, we notice that the table title says \u2018Excess mortality since region/country\u2019s first 50 covid deaths.\u2019 This means we need to exclude counts of excess deaths before a region had 50 COVID deaths.", "At this point (after only selecting our relevant columns), our data looks like this:", "We need to group each country according to its total deaths related to COVID-19, and excess deaths. Then, using those two numbers, we calculate the percentage of excess deaths attributable to COVID-19. This can be used as a metric for underreporting of COVID-19 cases in a country.", "The only thing missing at this point is the date range. In order to find and display the dates, we need to find the first date after a given country/region hit 50 COVID-19 cases and the last date in the data for that country/region.", "How do we do this? First, we\u2019ll create a function called append_date_suffix which, according to a given day, appends the appropriate suffix.", "We\u2019ll then group by the country variable and find the min and max date (with the minimum only appearing after a country has seen 50 COVID deaths). Then, we do a lot of formatting of individual days and months, and append them all together with dashes in The Economist\u2019s style. Sorry, there\u2019s a lot going on here.", "This creates date ranges that look like this:", "Join these dates with our existing data\u2026", "and we get our finalized dataset:", "Finally, we\u2019re ready to take that dataset and create our table. We can begin by defining some parameters that make the table easier to use and more aesthetically pleasing. Here, we sort according to excess deaths (but don\u2019t include an arrow), make it compact, and show all results on one page.", "Next, let\u2019s make the column headers stylistically similar to The Economist. We do so with reactable\u2019s defaultColDef, where we define a colDef with styles for the header and regular cells. Here, we can include CSS (which you can find by inspecting the table at hand). Throughout this post, you\u2019ll notice my constant references to font_es. This is from Bob Rudis\u2019s hrbrthemes. It contains the font name for Economist Sans Condensed, which is the font that The Economist uses!", "Now, we can start to format the specific columns appropriately. The three easiest columns are Region/Country, Time Period, COVID-19 as % of Total. In each of these columns, we create a colDef which defines the column name, as well as some styling.", "You\u2019ll notice the addition of JS in our percent column. This allows us to include JavaScript in our columns and column headers. I use it to do something simple, like a line break. You can use JS for plenty of more complex purposes, some of which are documented here.", "We can now create the \u2018deaths\u2019 columns, which include barcharts.", "reactable makes the addition of barcharts to tables quite easy, thanks to its integration of JavaScript. Here, I pull from one example on reactable\u2019s website, and use the following code:", "Let\u2019s break that down step-by-step, with a focus on covid_deaths.", "First, we need to define some CSS. reactable allows you to easily include CSS is RMarkdown documents, in chunks defined as css.", "Now, let\u2019s look at how we define covid_deaths:", "This creates a table that looks like this:", "Finally, we can add the table title and subtitle. We do so by storing the above table in our environment. (This is the final table code!)", "Now, we can include a title and subtitle above the table. We use some htmltools functions to create divs, headers, and paragraphs.", "Yikes! Those font sizes don\u2019t quite line up with The Economist\u2019s. Let\u2019s add classes to our divs to match their style.", "And now we can rerun the above code:", "Let\u2019s compare that to the table we\u2019re attempting to replicate. Note that some of the data has changed in the time between The Economist published their table and I created mine.", "The code for this post can be found on my GitHub. You can send any questions about replication (or anything else) to me@connorrothschild.com, or in my Twitter DMs.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "I design data visualizations and tell stories on the web. https://connorrothschild.com/"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F187407bc9702&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Frecreate-publication-quality-interactive-tables-in-r-using-reactable-187407bc9702&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Frecreate-publication-quality-interactive-tables-in-r-using-reactable-187407bc9702&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Frecreate-publication-quality-interactive-tables-in-r-using-reactable-187407bc9702&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Frecreate-publication-quality-interactive-tables-in-r-using-reactable-187407bc9702&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----187407bc9702--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----187407bc9702--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://connorrothschild.medium.com/?source=post_page-----187407bc9702--------------------------------", "anchor_text": ""}, {"url": "https://connorrothschild.medium.com/?source=post_page-----187407bc9702--------------------------------", "anchor_text": "Connor Rothschild"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fec7c57825f65&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Frecreate-publication-quality-interactive-tables-in-r-using-reactable-187407bc9702&user=Connor+Rothschild&userId=ec7c57825f65&source=post_page-ec7c57825f65----187407bc9702---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F187407bc9702&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Frecreate-publication-quality-interactive-tables-in-r-using-reactable-187407bc9702&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F187407bc9702&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Frecreate-publication-quality-interactive-tables-in-r-using-reactable-187407bc9702&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://twitter.com/J_CD_T/status/1261625814854045696", "anchor_text": "datasets"}, {"url": "https://www.economist.com/graphic-detail/2020/04/16/tracking-covid-19-excess-deaths-across-countries", "anchor_text": "describe"}, {"url": "https://twitter.com/dataandme/status/1196552930167599106", "anchor_text": "come across"}, {"url": "https://glin.github.io/reactable/index.html", "anchor_text": "reactable"}, {"url": "https://malco.io/2020/05/16/replicating-an-nyt-table-of-swedish-covid-deaths-with-gt/", "anchor_text": "blog post"}, {"url": "https://github.com/TheEconomist/covid-19-excess-deaths-tracker/tree/master/output-data/excess-deaths", "anchor_text": "country-level CSVs"}, {"url": "https://raw.githubusercontent.com/TheEconomist/covid-19-excess-deaths-tracker/master/output-data/excess-deaths/'", "anchor_text": "https://raw.githubusercontent.com/TheEconomist/covid-19-excess-deaths-tracker/master/output-data/excess-deaths/'"}, {"url": "https://raw.githubusercontent.com/TheEconomist/covid-19-excess-deaths-tracker/master/source-data/list_of_sources.csv'", "anchor_text": "https://raw.githubusercontent.com/TheEconomist/covid-19-excess-deaths-tracker/master/source-data/list_of_sources.csv'"}, {"url": "https://stackoverflow.com/questions/40039903/r-add-th-rd-and-nd-to-dates", "anchor_text": "function"}, {"url": "https://github.com/hrbrmstr/hrbrthemes", "anchor_text": "Bob Rudis\u2019s"}, {"url": "https://github.com/hrbrmstr/hrbrthemes", "anchor_text": "hrbrthemes"}, {"url": "https://glin.github.io/reactable/articles/examples.html", "anchor_text": "some of which are documented here"}, {"url": "https://glin.github.io/reactable/articles/twitter-followers/twitter-followers.html", "anchor_text": "example"}, {"url": "https://github.com/connorrothschild/economist-table-replication/blob/master/economist-table-replication.Rmd", "anchor_text": "my GitHub"}, {"url": "http://me@connorrothschild.com", "anchor_text": "me@connorrothschild.com"}, {"url": "http://twitter.com/CL_Rothschild", "anchor_text": "Twitter DMs"}, {"url": "https://twitter.com/CL_Rothschild", "anchor_text": "https://twitter.com/CL_Rothschild"}, {"url": "https://www.connorrothschild.com/post/economist-table-replication-using-reactable/", "anchor_text": "my blog."}, {"url": "https://medium.com/tag/r?source=post_page-----187407bc9702---------------r-----------------", "anchor_text": "R"}, {"url": "https://medium.com/tag/data-science?source=post_page-----187407bc9702---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/data-visualization?source=post_page-----187407bc9702---------------data_visualization-----------------", "anchor_text": "Data Visualization"}, {"url": "https://medium.com/tag/react?source=post_page-----187407bc9702---------------react-----------------", "anchor_text": "React"}, {"url": "https://medium.com/tag/towards-data-science?source=post_page-----187407bc9702---------------towards_data_science-----------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F187407bc9702&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Frecreate-publication-quality-interactive-tables-in-r-using-reactable-187407bc9702&user=Connor+Rothschild&userId=ec7c57825f65&source=-----187407bc9702---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F187407bc9702&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Frecreate-publication-quality-interactive-tables-in-r-using-reactable-187407bc9702&user=Connor+Rothschild&userId=ec7c57825f65&source=-----187407bc9702---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F187407bc9702&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Frecreate-publication-quality-interactive-tables-in-r-using-reactable-187407bc9702&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----187407bc9702--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F187407bc9702&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Frecreate-publication-quality-interactive-tables-in-r-using-reactable-187407bc9702&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----187407bc9702---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----187407bc9702--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----187407bc9702--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----187407bc9702--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----187407bc9702--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----187407bc9702--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----187407bc9702--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----187407bc9702--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----187407bc9702--------------------------------", "anchor_text": ""}, {"url": "https://connorrothschild.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://connorrothschild.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Connor Rothschild"}, {"url": "https://connorrothschild.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "144 Followers"}, {"url": "https://connorrothschild.com/", "anchor_text": "https://connorrothschild.com/"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fec7c57825f65&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Frecreate-publication-quality-interactive-tables-in-r-using-reactable-187407bc9702&user=Connor+Rothschild&userId=ec7c57825f65&source=post_page-ec7c57825f65--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F68630ee2637e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Frecreate-publication-quality-interactive-tables-in-r-using-reactable-187407bc9702&newsletterV3=ec7c57825f65&newsletterV3Id=68630ee2637e&user=Connor+Rothschild&userId=ec7c57825f65&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}