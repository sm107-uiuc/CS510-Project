{"url": "https://towardsdatascience.com/a-gentle-introduction-to-sql-sub-queries-ee288174d285", "time": 1683003905.279244, "path": "towardsdatascience.com/a-gentle-introduction-to-sql-sub-queries-ee288174d285/", "webpage": {"metadata": {"title": "A Gentle Introduction to SQL Sub-Queries | by Lucas Morato | Towards Data Science", "h1": "A Gentle Introduction to SQL Sub-Queries", "description": "SQL is one of the fundamental tools any data scientist should master in order to explore databases. It has the reputation of being simple and easy to use. But not everything is a walk in the park\u2026"}, "outgoing_paragraph_urls": [{"url": "https://github.com/lucasmoratof/sql-projects/blob/master/Introduction_to_SQL_sub_queries.ipynb", "anchor_text": "here", "paragraph_index": 1}], "all_paragraphs": ["SQL is one of the fundamental tools any data scientist should master in order to explore databases. It has the reputation of being simple and easy to use. But not everything is a walk in the park with it, and one of the biggest challenges for newbies is to understand the use of sub-queries.", "Before we begin, the notebook with the code is, as usual, waiting for you here.", "Assuming that you are familiar with SQL, one of the first things we learn is that the order of the main statements must be the following:", "But one thing that is not that obvious it the fact that this is not the way a query is processed! Actually, it is almost the other way around:", "And why it\u2019s import to know that? Because if you understand this logic, it will be easier to visualize the need of a sub-query later. With SQL, understanding the behind the scenes is as important as knowing how to write the queries.", "Let\u2019s say you have the following table team_data:", "If we want to retrieve the average goals by team, the query will be:", "Which will give the following result:", "So far, no mystery, right? But what if we want to filter only the teams with average goals higher than 50? Normally, our first approach would be something like that:", "It gave us an aggregation error, but why? Let\u2019s do the steps according to the way the query is processed:", "That is a perfect example where a sub-query need to be used. What we need to do is to first generate the field avg_goals, so when the WHEN statement comes to filter, the calculation will be already there! As per the query logic, this process needs to be done on the FROM statement, as it comes before the filter WHEN. Let\u2019s see how this query looks like:", "Can you see now what happened?", "Basically, we need sub-queries most of time we need to filter aggregated fields. Some tips to help you when writing them:", "And that\u2019s it for today. I hope sub-queries are a bit more demystified for you now! Let me know your thoughts in the comments, and feel free to add some more practical examples as well!", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Senior Data Analyst @ JET, transforming data into reports that drive business decisions."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fee288174d285&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-gentle-introduction-to-sql-sub-queries-ee288174d285&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-gentle-introduction-to-sql-sub-queries-ee288174d285&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-gentle-introduction-to-sql-sub-queries-ee288174d285&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-gentle-introduction-to-sql-sub-queries-ee288174d285&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----ee288174d285--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----ee288174d285--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@lmmfrederico?source=post_page-----ee288174d285--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@lmmfrederico?source=post_page-----ee288174d285--------------------------------", "anchor_text": "Lucas Morato"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F2c3b53b3e7bd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-gentle-introduction-to-sql-sub-queries-ee288174d285&user=Lucas+Morato&userId=2c3b53b3e7bd&source=post_page-2c3b53b3e7bd----ee288174d285---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fee288174d285&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-gentle-introduction-to-sql-sub-queries-ee288174d285&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fee288174d285&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-gentle-introduction-to-sql-sub-queries-ee288174d285&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@markusspiske?utm_source=medium&utm_medium=referral", "anchor_text": "Markus Spiske"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://github.com/lucasmoratof/sql-projects/blob/master/Introduction_to_SQL_sub_queries.ipynb", "anchor_text": "here"}, {"url": "https://medium.com/tag/sql?source=post_page-----ee288174d285---------------sql-----------------", "anchor_text": "Sql"}, {"url": "https://medium.com/tag/learn?source=post_page-----ee288174d285---------------learn-----------------", "anchor_text": "Learn"}, {"url": "https://medium.com/tag/begginer?source=post_page-----ee288174d285---------------begginer-----------------", "anchor_text": "Begginer"}, {"url": "https://medium.com/tag/data-science?source=post_page-----ee288174d285---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/data-analysis?source=post_page-----ee288174d285---------------data_analysis-----------------", "anchor_text": "Data Analysis"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fee288174d285&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-gentle-introduction-to-sql-sub-queries-ee288174d285&user=Lucas+Morato&userId=2c3b53b3e7bd&source=-----ee288174d285---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fee288174d285&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-gentle-introduction-to-sql-sub-queries-ee288174d285&user=Lucas+Morato&userId=2c3b53b3e7bd&source=-----ee288174d285---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fee288174d285&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-gentle-introduction-to-sql-sub-queries-ee288174d285&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----ee288174d285--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fee288174d285&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-gentle-introduction-to-sql-sub-queries-ee288174d285&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----ee288174d285---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----ee288174d285--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----ee288174d285--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----ee288174d285--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----ee288174d285--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----ee288174d285--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----ee288174d285--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----ee288174d285--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----ee288174d285--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@lmmfrederico?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@lmmfrederico?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Lucas Morato"}, {"url": "https://medium.com/@lmmfrederico/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "866 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F2c3b53b3e7bd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-gentle-introduction-to-sql-sub-queries-ee288174d285&user=Lucas+Morato&userId=2c3b53b3e7bd&source=post_page-2c3b53b3e7bd--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fceec0b2f7b6e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-gentle-introduction-to-sql-sub-queries-ee288174d285&newsletterV3=2c3b53b3e7bd&newsletterV3Id=ceec0b2f7b6e&user=Lucas+Morato&userId=2c3b53b3e7bd&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}