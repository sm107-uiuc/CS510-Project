{"url": "https://towardsdatascience.com/5-bigquery-sql-commands-you-probably-didnt-know-about-ebfd9d0dc160", "time": 1683008147.6295161, "path": "towardsdatascience.com/5-bigquery-sql-commands-you-probably-didnt-know-about-ebfd9d0dc160/", "webpage": {"metadata": {"title": "5 Bigquery SQL Commands You [Probably] Didn\u2019t Know About | by Nicholas Leong | Towards Data Science", "h1": "5 Bigquery SQL Commands You [Probably] Didn\u2019t Know About", "description": "5 Unique SQL Commands that will help you tremendously in your Data Science Career."}, "outgoing_paragraph_urls": [{"url": "https://cloud.google.com/bigquery/docs/reference/standard-sql/json_functions", "anchor_text": "here", "paragraph_index": 13}, {"url": "https://medium.com/@nickmydata", "anchor_text": "articles", "paragraph_index": 42}, {"url": "https://nickefy.medium.com/membership", "anchor_text": "my link", "paragraph_index": 44}, {"url": "https://medium.com/@nickmydata", "anchor_text": "articles", "paragraph_index": 45}, {"url": "https://www.linkedin.com/in/nickefy/", "anchor_text": "LinkedIn Profile", "paragraph_index": 46}, {"url": "https://github.com/nickefy", "anchor_text": "Github", "paragraph_index": 46}, {"url": "https://www.linkedin.com/in/nickefy/", "anchor_text": "https://www.linkedin.com/in/nickefy/", "paragraph_index": 48}], "all_paragraphs": ["If you\u2019re reading this you are probably a data practitioner, or aspiring to be one. Welcome to the world of data, get comfortable here, you are going to spend quite some time learning new things.", "With the increase in job demand for the data science field, people are eager to pick up the skills needed for the profession. Python, Machine Learning, Data Visualization, the list goes on. However, the one skill that often gets ignored is \u2026", "SQL has been the go-to querying language for all databases, and it is not going anywhere soon. All data scientists have to get their data somewhere. More often than not, it will be from a SQL-Relational Database.", "Fast forward to today, we have the luxury of running SQL-Related Data Warehouses in our companies. These are OLAP (online analytical processing) databases that usually allow complex queries and collaboration with data visualization tools while not messing with the production database.", "The famous ones are Google Bigquery, Amazon Redshift, Azure SQL Data Warehouse, the list goes on.", "In this article, we will talk about some unique SQL commands that you probably didn\u2019t know but will help tremendously when you hit a similar kind of brick wall.", "As shown in the illustration, this is a command we use to transform a Bigquery column that is a JSON String type into a whole table. You may encounter this when performing data engineering tasks, often from external data sources.", "Here, we can use the JSON_EXTRACT_SCALAR Bigquery command.", "In this command, JSON Strings are split into PARENT, CHILD, and SUB.The function works as such: JSON_EXTRACT_SCALAR( JSON_STRING, \u201c$[\u2018PARENT_NAME\u2019]\u201d) will result in the CHILD value. For data engineers out there, think of it as a key-value kind of concept.", "In this example,we use JSON_EXTRACT_SCALAR( saved_fields, \u201c$[\u2018email\u2019]\u201d) which will result in a column of all emails in the JSON string. Pretty cool right.", "What if the child is in a list format, like the parent language_skill in this example?", "We can use JSON_EXTRACT_SCALAR(saved_fields, \u201c$.language_skill[0]\u201d) which will give you the first element in that list as a column.", "That's pretty much it. To extract all information in this column, we use", "For the official documentation, read here.", "This command is not only the most often used in this list, but it is also often brought up in data science interviews.", "When speaking about data aggregations, many of the seasoned data scientists will automatically resort to Group By, which is the most commonly used command to aggregate data.", "However, you may encounter situations where Group By will not suffice.The Group By function requires you to group data by columns, but what if you don\u2019t want to group them. What if you want to keep all the existing rows while still aggregating data.", "The best way I can describe it is by presenting you with an interview question:", "Questions like these can be solved by Group By", "This command groups the data by date and customerID. This essentially means that for each date, we will end up with 1 row for each customerID.", "Partition By comes in handy when you want to keep all the rows after performing aggregation. For the same question above :", "Note how all the rows are being kept after the aggregation.Here\u2019s a more practical example that I often get.", "Using the partition by command, you can easily achieve this by", "I hope by now you realize how powerful the Partition By command is.", "The Having clause.If you are familiar with the Where clause, it is extremely similar.It filters for rows that return a TRUE value when they are evaluated against a boolean expression.", "The only difference is that for the Having clause, it :", "You can already achieve this using nested where clauses:", "But why do that, when you have the option to write more professional cool-looking code?", "Regex is short for Regular Expression, an extremely popular term in the NLP field. Regex is defined as a sequence of characters that define a search pattern. It is mainly used to process text, numbers, and punctuations.", "You can do multiple things in Regex like look for specific texts, remove numbers or punctuation, replace certain characters, etc. Here\u2019s how to do it in Bigquery SQL.", "There are 3 main Regex commands in Bigquery:", "REGEXP_CONTAINS returns TRUE if the string(value) provided is a partial match for the regular expression (regexp).", "Here\u2019s an example, we want to filter for data where the customerID starts with a \u2018P\u2019 character. We can achieve this by", "REGEXP_REPLACE searches for a specific Regex pattern from the provided string(value) and replaces it with whatever you specified.", "Similar to the previous example, let\u2019s replace all customerID that starts with the character \u2018P\u2019 with \u2018Starts with P\u2019.", "REGEXP_EXTRACT returns the first substring from the string(value) provided that matches the Regex pattern specified .", "Similar to the previous example, let\u2019s extract the first substring that is an alphabet.", "The With Clause contains subqueries that run every time a subsequent SELECT statement runs. It can be referenced anywhere of your query including joins, unions, and wheres.", "The With Clause is extremely useful for readability, it also helps the data practitioner to have a high-level understanding of the query written.", "Note that the aliases in introduced in the same With clause must be unique, but the same alias can be used multiple times. If there are similar aliases, the With clause will automatically take the latest referenced alias.", "Well done! If you\u2019ve made it this far, I\u2019d imagine you\u2019ve learned a thing or 2 about SQL. In this article, we went through these SQL commands:", "Keep it scarred in your brain as I swear you will use it often in the future.", "We are not done yet with our data journey. Stay tuned, I am writing about more data science projects, as well as more stories, guides, and experiences in the data industry. In the meantime, feel free to check out my other articles to temporarily fill your hunger for data.As always, I end with a quote.", "Learning from data is virtually universally useful. Master it and you will be welcomed anywhere. \u2014 Todd Papaioannou, CTO at Splunk", "You can also support me by signing up for a medium membership through my link. You will be able to read an unlimited amount of stories from me and other incredible writers!", "I am working on more stories, writings, and guides in the data industry. You can absolutely expect more posts like this. In the meantime, feel free to check out my other articles to temporarily fill your hunger for data.", "Thanks for reading! If you want to get in touch with me, feel free to reach me at nickmydata@gmail.com or my LinkedIn Profile. You can also view the code for previous write-ups in my Github.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Data Scientist turned Engineer \u2014 Crunching data and writing about it so you don\u2019t get headaches. https://www.linkedin.com/in/nickefy/"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Febfd9d0dc160&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2F5-bigquery-sql-commands-you-probably-didnt-know-about-ebfd9d0dc160&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2F5-bigquery-sql-commands-you-probably-didnt-know-about-ebfd9d0dc160&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2F5-bigquery-sql-commands-you-probably-didnt-know-about-ebfd9d0dc160&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2F5-bigquery-sql-commands-you-probably-didnt-know-about-ebfd9d0dc160&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----ebfd9d0dc160--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----ebfd9d0dc160--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://nickefy.medium.com/?source=post_page-----ebfd9d0dc160--------------------------------", "anchor_text": ""}, {"url": "https://nickefy.medium.com/?source=post_page-----ebfd9d0dc160--------------------------------", "anchor_text": "Nicholas Leong"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fc4539c5f517b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2F5-bigquery-sql-commands-you-probably-didnt-know-about-ebfd9d0dc160&user=Nicholas+Leong&userId=c4539c5f517b&source=post_page-c4539c5f517b----ebfd9d0dc160---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Febfd9d0dc160&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2F5-bigquery-sql-commands-you-probably-didnt-know-about-ebfd9d0dc160&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Febfd9d0dc160&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2F5-bigquery-sql-commands-you-probably-didnt-know-about-ebfd9d0dc160&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://giphy.com/storksmovie/", "anchor_text": "Storks"}, {"url": "https://cloud.google.com/bigquery/docs/reference/standard-sql/json_functions", "anchor_text": "here"}, {"url": "https://wifflegif.com/", "anchor_text": "wifflegif"}, {"url": "https://www.rexegg.com/regex-quickstart.html", "anchor_text": "documentation"}, {"url": "https://unsplash.com/@hellosmith?utm_source=medium&utm_medium=referral", "anchor_text": "Rowen Smith"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://medium.com/@nickmydata", "anchor_text": "articles"}, {"url": "https://www.nicholas-leong.com/sign-up-here", "anchor_text": "Subscribe to my newsletter to stay in touch."}, {"url": "https://nickefy.medium.com/membership", "anchor_text": "my link"}, {"url": "https://medium.com/@nickmydata", "anchor_text": "articles"}, {"url": "https://www.linkedin.com/in/nickefy/", "anchor_text": "LinkedIn Profile"}, {"url": "https://github.com/nickefy", "anchor_text": "Github"}, {"url": "https://medium.com/tag/data-science?source=post_page-----ebfd9d0dc160---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/programming?source=post_page-----ebfd9d0dc160---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/tag/data?source=post_page-----ebfd9d0dc160---------------data-----------------", "anchor_text": "Data"}, {"url": "https://medium.com/tag/education?source=post_page-----ebfd9d0dc160---------------education-----------------", "anchor_text": "Education"}, {"url": "https://medium.com/tag/data-visualization?source=post_page-----ebfd9d0dc160---------------data_visualization-----------------", "anchor_text": "Data Visualization"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Febfd9d0dc160&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2F5-bigquery-sql-commands-you-probably-didnt-know-about-ebfd9d0dc160&user=Nicholas+Leong&userId=c4539c5f517b&source=-----ebfd9d0dc160---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Febfd9d0dc160&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2F5-bigquery-sql-commands-you-probably-didnt-know-about-ebfd9d0dc160&user=Nicholas+Leong&userId=c4539c5f517b&source=-----ebfd9d0dc160---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Febfd9d0dc160&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2F5-bigquery-sql-commands-you-probably-didnt-know-about-ebfd9d0dc160&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----ebfd9d0dc160--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Febfd9d0dc160&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2F5-bigquery-sql-commands-you-probably-didnt-know-about-ebfd9d0dc160&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----ebfd9d0dc160---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----ebfd9d0dc160--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----ebfd9d0dc160--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----ebfd9d0dc160--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----ebfd9d0dc160--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----ebfd9d0dc160--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----ebfd9d0dc160--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----ebfd9d0dc160--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----ebfd9d0dc160--------------------------------", "anchor_text": ""}, {"url": "https://nickefy.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://nickefy.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Nicholas Leong"}, {"url": "https://nickefy.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "2K Followers"}, {"url": "https://www.linkedin.com/in/nickefy/", "anchor_text": "https://www.linkedin.com/in/nickefy/"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fc4539c5f517b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2F5-bigquery-sql-commands-you-probably-didnt-know-about-ebfd9d0dc160&user=Nicholas+Leong&userId=c4539c5f517b&source=post_page-c4539c5f517b--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F2cfd2d291e3&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2F5-bigquery-sql-commands-you-probably-didnt-know-about-ebfd9d0dc160&newsletterV3=c4539c5f517b&newsletterV3Id=2cfd2d291e3&user=Nicholas+Leong&userId=c4539c5f517b&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}