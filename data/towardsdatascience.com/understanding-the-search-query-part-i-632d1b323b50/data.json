{"url": "https://towardsdatascience.com/understanding-the-search-query-part-i-632d1b323b50", "time": 1682994974.4366238, "path": "towardsdatascience.com/understanding-the-search-query-part-i-632d1b323b50/", "webpage": {"metadata": {"title": "Understanding the Search Query \u2014 Part I | by Sonu Sharma | Towards Data Science", "h1": "Understanding the Search Query \u2014 Part I", "description": "We call it Query Understanding (QU). Let\u2019s first understand the use case through a problem. I assume myself to be a very health conscious person and want to buy a very healthy edible. I ended up\u2026"}, "outgoing_paragraph_urls": [{"url": "https://en.wikipedia.org/wiki/Query_understanding", "anchor_text": "Query understanding", "paragraph_index": 8}, {"url": "https://norvig.com/spell-correct.html", "anchor_text": "https://norvig.com/spell-correct.html", "paragraph_index": 14}, {"url": "https://pdfs.semanticscholar.org/1c0c/0fa35d4ff8a2f925eb955e48d655494bd167.pdf", "anchor_text": "https://pdfs.semanticscholar.org/1c0c/0fa35d4ff8a2f925eb955e48d655494bd167.pdf", "paragraph_index": 15}, {"url": "https://medium.com/@sonusharma.mnnit/understanding-the-search-query-part-ii-44d18892283f", "anchor_text": "part \u2014 II.", "paragraph_index": 28}], "all_paragraphs": ["The ultimate search engine would basically understand everything in the world, and it would always give you the right thing. And we\u2019re a long, long ways from that. \u2014 Larry Page", "We call it Query Understanding (QU). Let\u2019s first understand the use case through a problem. I assume myself to be a very health conscious person and want to buy a very healthy edible. I ended up searching for a bar of chocolate which should not contain nut as nutrition.", "So, I searched for: \u201cnut free chocolate\u201d.", "But, wait what I am seeing here is biscuits, coffee sachets, ginger nuts etc. everything other than chocolate. This mess is all because the search engine is not able to understand the intent of the query. In order to solve the problem, we have to first normalize the query and then send a re-written and enhanced query to the search engine.", "For the current scenario, if we ask the search engine to look for the search term \u201cchocolate\u201d and boost the results having \u201cNo Nut\u201d as a filter. Thereafter, the result will look something like this and I will be happy to add a few items in my cart.", "So, here the task comes to identify the nutrition intent in the query.", "Sounds interesting, but along with the nutrition field, we need to identify whether the user wants the nutrition to be present or absent in the product searched for, as we have two types of nutritional filters: one which filters the product containing that nutrition [e.g. Vegetarian, Vegan etc. ]and the other one that doesn\u2019t contain that nutrition [e.g. NoNut, NoGluten, NoSoya etc.]. For example, let\u2019s take some queries:", "As of now, we considered only the nutrition attribute for better precision, we are looking forward to implementing brand and other product attributes as well.", "From the above figure, it\u2019s obvious that Query understanding is about what happens before the search engine scores and ranks results \u2014 namely, the searcher\u2019s process of expressing an intent as a query, and the search engine\u2019s process of determining that intent. Query Understanding stack starts from the bottom with the character level techniques, then to the token level and at the top to the entity level or query level itself known as Query Rewriting.", "Let\u2019s start from the bottom of the stack and discuss all three of them one by one:", "1. Character-level Techniques ( Character filtering) :", "a) Unicode Normalization \u2014 Normalizing the characters by converting into UTF-8 encoding preferably.", "b) Removing Accents: Unicode normalization transforms strings into standard character encoding, but it leaves accents in place. e.g. caf\u00e9. In python, there is a Unidecode module.", "c) Ignoring Capitalization: Converting all the strings to lowercase.", "a) Spelling Correction \u2014 This is yet to be implemented. The algorithm can be found here: https://norvig.com/spell-correct.html", "b) Stemming and Lemmatization: For Stemming- Porter Stemmer and K-Stem are mostly used. With Lemmatization, K-Stem will be a good option as I have used it earlier as well for improving search relevancy by re-ranking the result. After every removal of inflectional suffixes, we can look in the dictionary and stop further inflectional operations. More options: https://pdfs.semanticscholar.org/1c0c/0fa35d4ff8a2f925eb955e48d655494bd167.pdf", "3. Query Rewriting: Most powerful technique which automatically transforms search queries in order to better represent the searcher\u2019s intent. For increasing recall, the two main query rewriting strategies are Query relaxation and Query expansion.", "For increasing precision, the main strategies are Query Segmentation and Query Scoping.", "Query Segmentation divides or segments the search query into a sequence of semantic units. e.g. No Milk Chocolate. Here sequence can be \u201c{No Milk\u201d \u201cChocolate\u201d} and {\u201cNo\u201d \u201cMilk Chocolate\u201d}. The task to identify the most relevant semantic units is known as segmentation.", "Query Scoping is another rewriting technique which improves precision by matching each query segment from above to the right attribute. It can be achieved by query tagging, which is a special case of Named Entity Recognition (NER).", "We implemented a machine learning based state-of-the-art deep learning model based on Named Entity Recognition to achieve the goal of Query Segmentation and Query Scoping and improve the searchers\u2019 experience. Now, Let\u2019s come to the architecture of the whole system:", "The architecture consists of the following components:", "This is because: \u201cSomething that is untested is broken.\u201d", "Swagger UI can be also be exposed. The output in JSON looks something like below:", "For query = \u201cnut free chocolate\u201d", "{ Nutrition Filter: \u201cNoNut\u201d, Normalized Query: \u201cchocolate\u201d }", "4. Machine Learning Model as a Service: The crocodile Model based on deep learning NLP techniques. This model can be extended for other product attributes as well. The output in JSON looks something like below:", "For query = \u201cnut free chocolate\u201d", "We will discuss the rest of the part i.e. ML model and deployment separately in part \u2014 II.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Software Engineer Apple | Ex-Walmart Amazon| Search | Linkedin: ercsonu"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F632d1b323b50&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Funderstanding-the-search-query-part-i-632d1b323b50&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Funderstanding-the-search-query-part-i-632d1b323b50&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Funderstanding-the-search-query-part-i-632d1b323b50&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Funderstanding-the-search-query-part-i-632d1b323b50&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----632d1b323b50--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----632d1b323b50--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://sonusharma-mnnit.medium.com/?source=post_page-----632d1b323b50--------------------------------", "anchor_text": ""}, {"url": "https://sonusharma-mnnit.medium.com/?source=post_page-----632d1b323b50--------------------------------", "anchor_text": "Sonu Sharma"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F8693c110f327&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Funderstanding-the-search-query-part-i-632d1b323b50&user=Sonu+Sharma&userId=8693c110f327&source=post_page-8693c110f327----632d1b323b50---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F632d1b323b50&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Funderstanding-the-search-query-part-i-632d1b323b50&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F632d1b323b50&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Funderstanding-the-search-query-part-i-632d1b323b50&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://en.wikipedia.org/wiki/Query_understanding", "anchor_text": "Query understanding"}, {"url": "https://norvig.com/spell-correct.html", "anchor_text": "https://norvig.com/spell-correct.html"}, {"url": "https://pdfs.semanticscholar.org/1c0c/0fa35d4ff8a2f925eb955e48d655494bd167.pdf", "anchor_text": "https://pdfs.semanticscholar.org/1c0c/0fa35d4ff8a2f925eb955e48d655494bd167.pdf"}, {"url": "https://medium.com/@sonusharma.mnnit/understanding-the-search-query-part-ii-44d18892283f", "anchor_text": "part \u2014 II."}, {"url": "https://medium.com/tag/search?source=post_page-----632d1b323b50---------------search-----------------", "anchor_text": "Search"}, {"url": "https://medium.com/tag/query-understanding?source=post_page-----632d1b323b50---------------query_understanding-----------------", "anchor_text": "Query Understanding"}, {"url": "https://medium.com/tag/flask?source=post_page-----632d1b323b50---------------flask-----------------", "anchor_text": "Flask"}, {"url": "https://medium.com/tag/nginx?source=post_page-----632d1b323b50---------------nginx-----------------", "anchor_text": "Nginx"}, {"url": "https://medium.com/tag/python?source=post_page-----632d1b323b50---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F632d1b323b50&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Funderstanding-the-search-query-part-i-632d1b323b50&user=Sonu+Sharma&userId=8693c110f327&source=-----632d1b323b50---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F632d1b323b50&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Funderstanding-the-search-query-part-i-632d1b323b50&user=Sonu+Sharma&userId=8693c110f327&source=-----632d1b323b50---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F632d1b323b50&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Funderstanding-the-search-query-part-i-632d1b323b50&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----632d1b323b50--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F632d1b323b50&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Funderstanding-the-search-query-part-i-632d1b323b50&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----632d1b323b50---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----632d1b323b50--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----632d1b323b50--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----632d1b323b50--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----632d1b323b50--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----632d1b323b50--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----632d1b323b50--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----632d1b323b50--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----632d1b323b50--------------------------------", "anchor_text": ""}, {"url": "https://sonusharma-mnnit.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://sonusharma-mnnit.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Sonu Sharma"}, {"url": "https://sonusharma-mnnit.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "651 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F8693c110f327&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Funderstanding-the-search-query-part-i-632d1b323b50&user=Sonu+Sharma&userId=8693c110f327&source=post_page-8693c110f327--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F4ada6b5fdec7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Funderstanding-the-search-query-part-i-632d1b323b50&newsletterV3=8693c110f327&newsletterV3Id=4ada6b5fdec7&user=Sonu+Sharma&userId=8693c110f327&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}