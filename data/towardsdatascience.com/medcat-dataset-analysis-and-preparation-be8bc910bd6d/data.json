{"url": "https://towardsdatascience.com/medcat-dataset-analysis-and-preparation-be8bc910bd6d", "time": 1683005429.111169, "path": "towardsdatascience.com/medcat-dataset-analysis-and-preparation-be8bc910bd6d/", "webpage": {"metadata": {"title": "MedCAT | Dataset Analysis and Preparation | by Zeljko | Towards Data Science", "h1": "MedCAT | Dataset Analysis and Preparation", "description": "One of the most important steps when doing any kind of machine learning is to understand the dataset and to be sure that what we want to achieve is in fact possible. So, before continuing with our\u2026"}, "outgoing_paragraph_urls": [{"url": "https://mimic.physionet.org/gettingstarted/access/", "anchor_text": "here", "paragraph_index": 2}, {"url": "https://mimic.physionet.org/gettingstarted/dbsetup/", "anchor_text": "website", "paragraph_index": 3}, {"url": "https://mimic.physionet.org/tutorials/install-mimic-locally-ubuntu/", "anchor_text": "link", "paragraph_index": 3}, {"url": "https://mimic.physionet.org/mimictables", "anchor_text": "MIMIC-III", "paragraph_index": 4}, {"url": "https://mimic.physionet.org/mimictables/noteevents/", "anchor_text": "website", "paragraph_index": 5}, {"url": "https://mimic.physionet.org/mimictables/patients/", "anchor_text": "website", "paragraph_index": 6}, {"url": "https://arxiv.org/pdf/1803.06589.pdf", "anchor_text": "study", "paragraph_index": 14}, {"url": "https://towardsdatascience.com/tagged/medcat", "anchor_text": "here", "paragraph_index": 16}, {"url": "https://twitter.com/zeljkokr", "anchor_text": "https://twitter.com/zeljkokr", "paragraph_index": 18}], "all_paragraphs": ["One of the most important steps when doing any kind of machine learning is to understand the dataset and to be sure that what we want to achieve is in fact possible. So, before continuing with our main goal of analysing the connection between age and diseases, we will first show some basic statistical information on the MIMIC-III dataset and prepare the EHRs for the next steps.", "Please Note: (1) To reproduce the results (images) in this tutorial you will need access to MIMIC-III, but as I know this can be bothersome, I\u2019ve created two dummy CSV files available in the repository. These two CSV files emulate the two files we get from MIMIC-III using the SQL scripts below. This is not real data and can only be used to test MedCAT or to learn how to use it. (2) I will be showing plots and statistics from the MIMIC-III dataset.", "It is not too difficult to get access to MIMIC-III, you can submit a request here and usually a couple of days later they will approve your request.", "Once you get access to MIMIC-III, you can download the full dataset from their website. Initially, the files are in CSV format, I\u2019ve decided to import them into a PostgreSQL database to make the exploration phase a bit easier (you can do everything from the CSV files directly). Physionet provides a tutorial on how to import MIMIC-III into a PostgreSQL database, link. In my case, I had to slightly modify the scripts to make this work and run them without using Makefiles, still a fairly smooth process.", "The reason we have imported everything into PostgreSQL is so that we can easier view, filter and select what is needed from the dataset. MIMIC-III has a large number of tables and information, but we are interested in only two: noteevents and patients.", "noteevents \u2014 contains the written portion of a patients EHR. More on the noteevents table can be found on the MIMIC-III website. From this table we are only interested in 4 columns: subject_id (the patient identifier), chartdate (date when the note was created), category (what is the type of the note, e.g. Nursing) and text (the text portion of the note). The SQL script used to extract the needed information is bellow (use the save to CSV option, or Python to create a CSV):", "patients \u2014 contains basic structured information on patients. Again, more on the MIMIC-III website. From here, we will take three columns: subject_id (the patient identifier), gender (male or female), dob (date of birth). The SQL script:", "Please Note: (1) dates in MIMIC-III are randomly shifted into the future (the good thing is, for one patient, all dates are shifted using the same random number). (2) There is a huge number of noteevents in MIMIC-III, the CSV is ~3.9GB.", "Later on, we will group patients based on gender to show some differences between female and male. Because of that, we want to check is our dataset balanced. In Figure 1, we can see that there are more male patients than female, but nothing significant (at least not for our use-case). In numbers, there are 46520 patients in total and from that 20399 are female, and 26121 are male. The number of patients in the noteeventstable is slightly different; not all patients have clinical notes.", "Nothing else (useful) can be done given this table alone, let\u2019s first check a couple of things in the noteevents table and then we\u2019ll combine the two tables and plot statistics related to age.", "From the noteevents table we want to check the length (number of characters) of clinical notes, not an absolute necessity, but it is nice to know what are we working with. The left side of Figure 2 shows that there are some very long documents and also some that have close to 0 characters. To clean-up a bit we will remove the top and the bottom outliers based on length (in other words the shortest and longest notes). Cleaning is not really necessary, but outliers can produce strange results, so better to remove them. The right side of Figure 2 shows the final distribution of the documents based on length.", "Next, we want to analyse the number of documents per patient (Figure 3). As these are health records, more documents mean the situation is probably worse for the patient. And one document usually means false alarm, the patient was discharged immediately. Same as above, we will do a bit of cleaning and remove outliers, we don\u2019t want the patients with thousands of documents, nor the ones with only a few.", "Lastly, we will also show the distribution of documents per category (Figure 4), useful to know from where are the documents coming. For now, we will not do any filtering based on category.", "Remember that all dates for one patient are shifted by the same random number, that means we can use the difference between the patient\u2019s date of birth and the creation date for a document to calculate how old was the patient when that document was written. We will do another cleaning step here, remove patients older than 89 or younger than 16 (this step removes the largest number of patients, around 20%). MIMIC-III does not contain information on children, only neonates and adults, so removing anyone younger than 16 means removing only neonates. Age-related statistics for neonates do not make sense. And regarding people older than 89, this is a bit of an extreme and the data in MIMIC-III is messy for this age group. Details can be seen in the Jupyter notebook, Figure 5 shows the resulting plot.", "Figure 5 agrees with the patient distribution presented in a recent study on the MIMIC-III dataset.", "Finally, Table 1 shows the statistics of our dataset before and after preprocessing.", "If you are interested in more posts about MedCAT and Electronic Health Records, have a look here.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Research Fellow in Health Informatics at King\u2019s College London | Twitter: https://twitter.com/zeljkokr"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fbe8bc910bd6d&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmedcat-dataset-analysis-and-preparation-be8bc910bd6d&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmedcat-dataset-analysis-and-preparation-be8bc910bd6d&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmedcat-dataset-analysis-and-preparation-be8bc910bd6d&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmedcat-dataset-analysis-and-preparation-be8bc910bd6d&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----be8bc910bd6d--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----be8bc910bd6d--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@w_is_h?source=post_page-----be8bc910bd6d--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@w_is_h?source=post_page-----be8bc910bd6d--------------------------------", "anchor_text": "Zeljko"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F919a63f2c7dc&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmedcat-dataset-analysis-and-preparation-be8bc910bd6d&user=Zeljko&userId=919a63f2c7dc&source=post_page-919a63f2c7dc----be8bc910bd6d---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fbe8bc910bd6d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmedcat-dataset-analysis-and-preparation-be8bc910bd6d&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fbe8bc910bd6d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmedcat-dataset-analysis-and-preparation-be8bc910bd6d&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://www.flickr.com/photos/crsan/2571204498", "anchor_text": "Cats exploring"}, {"url": "https://www.fotografchristianholmer.com/", "anchor_text": "Christian Holm\u00e9r"}, {"url": "https://mimic.physionet.org/gettingstarted/access/", "anchor_text": "here"}, {"url": "https://mimic.physionet.org/gettingstarted/dbsetup/", "anchor_text": "website"}, {"url": "https://mimic.physionet.org/tutorials/install-mimic-locally-ubuntu/", "anchor_text": "link"}, {"url": "https://mimic.physionet.org/mimictables", "anchor_text": "MIMIC-III"}, {"url": "https://mimic.physionet.org/mimictables/noteevents/", "anchor_text": "website"}, {"url": "https://mimic.physionet.org/mimictables/patients/", "anchor_text": "website"}, {"url": "https://colab.research.google.com/drive/1iWvwqdqdSlwaUbAJTQuJNmqRlclKZfVy", "anchor_text": "Google Colab"}, {"url": "https://arxiv.org/pdf/1803.06589.pdf", "anchor_text": "study"}, {"url": "https://towardsdatascience.com/tagged/medcat", "anchor_text": "here"}, {"url": "https://medium.com/tag/healthcare?source=post_page-----be8bc910bd6d---------------healthcare-----------------", "anchor_text": "Healthcare"}, {"url": "https://medium.com/tag/nlp?source=post_page-----be8bc910bd6d---------------nlp-----------------", "anchor_text": "NLP"}, {"url": "https://medium.com/tag/covid-19?source=post_page-----be8bc910bd6d---------------covid_19-----------------", "anchor_text": "Covid-19"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----be8bc910bd6d---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/tag/medcat?source=post_page-----be8bc910bd6d---------------medcat-----------------", "anchor_text": "Medcat"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fbe8bc910bd6d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmedcat-dataset-analysis-and-preparation-be8bc910bd6d&user=Zeljko&userId=919a63f2c7dc&source=-----be8bc910bd6d---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fbe8bc910bd6d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmedcat-dataset-analysis-and-preparation-be8bc910bd6d&user=Zeljko&userId=919a63f2c7dc&source=-----be8bc910bd6d---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fbe8bc910bd6d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmedcat-dataset-analysis-and-preparation-be8bc910bd6d&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----be8bc910bd6d--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fbe8bc910bd6d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmedcat-dataset-analysis-and-preparation-be8bc910bd6d&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----be8bc910bd6d---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----be8bc910bd6d--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----be8bc910bd6d--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----be8bc910bd6d--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----be8bc910bd6d--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----be8bc910bd6d--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----be8bc910bd6d--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----be8bc910bd6d--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----be8bc910bd6d--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@w_is_h?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@w_is_h?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Zeljko"}, {"url": "https://medium.com/@w_is_h/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "70 Followers"}, {"url": "https://twitter.com/zeljkokr", "anchor_text": "https://twitter.com/zeljkokr"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F919a63f2c7dc&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmedcat-dataset-analysis-and-preparation-be8bc910bd6d&user=Zeljko&userId=919a63f2c7dc&source=post_page-919a63f2c7dc--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fab286cdf3ea7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmedcat-dataset-analysis-and-preparation-be8bc910bd6d&newsletterV3=919a63f2c7dc&newsletterV3Id=ab286cdf3ea7&user=Zeljko&userId=919a63f2c7dc&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}