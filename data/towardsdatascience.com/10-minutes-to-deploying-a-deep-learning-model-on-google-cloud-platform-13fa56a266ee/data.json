{"url": "https://towardsdatascience.com/10-minutes-to-deploying-a-deep-learning-model-on-google-cloud-platform-13fa56a266ee", "time": 1683009610.9765172, "path": "towardsdatascience.com/10-minutes-to-deploying-a-deep-learning-model-on-google-cloud-platform-13fa56a266ee/", "webpage": {"metadata": {"title": "10 Minutes to Deploying a Deep Learning Model on Google Cloud Platform | by Binh Phan | Towards Data Science", "h1": "10 Minutes to Deploying a Deep Learning Model on Google Cloud Platform", "description": "How to deploy a deep learning model on Google Cloud Platform, completely for free, forever"}, "outgoing_paragraph_urls": [{"url": "https://cloud.google.com/free", "anchor_text": "Google Cloud Platform using its always-free compute service", "paragraph_index": 0}, {"url": "https://github.com/fastai/fastai", "anchor_text": "FastAI deep learning library", "paragraph_index": 0}, {"url": "https://www.kaggle.com/btphan/greenr-an-image-classifier-in-fastai?scriptVersionId=33945487", "anchor_text": "follow this notebook hosted on Kaggle", "paragraph_index": 6}, {"url": "https://github.com/btphan95/greenr", "anchor_text": "greenr repo on Github", "paragraph_index": 7}, {"url": "https://www.techempower.com/benchmarks/#section=data-r17&hw=ph&test=fortune&l=zijzen-1", "anchor_text": "Starlette, along with Uvicorn, is way faster than Flask and more scalable in production", "paragraph_index": 10}, {"url": "http://34.68.160.231/", "anchor_text": "http://34.68.160.231/", "paragraph_index": 21}], "all_paragraphs": ["So you\u2019ve trained a Machine Learning model that you\u2019re ecstatic about, and now, you want to share it with the world. And so you built a web app to serve the model, only to find out that you don\u2019t know how to host this web app on the Internet 24/7. After all, if no one can see your ML model in production, does it really exist? This tutorial came out of the need to share an easy and free way to deploy a deep learning model to production on Google Cloud Platform using its always-free compute service, the f1-micro. As an example, we\u2019ll be deploying a dandelion and grass classifier built using the FastAI deep learning library. I hope that you will be able to deploy your trained model to the world in under 30 minutes, seamlessly and effortlessly.", "Requirements: You will need just the computer you have now, and a Google account!", "This tutorial will be broken down into 4 steps:", "If you haven\u2019t already, sign up for Google Cloud Platform through your Google account. You\u2019ll have to enter your credit card, but you won\u2019t be charged anything upon signing up. You\u2019ll also get $300 worth of free credits that last for 12 months! You\u2019ll be utilizing GCP\u2019s free tier, so you won\u2019t have to pay to follow this tutorial.", "Once you\u2019re in the console, go to Compute Engine and create an instance. You\u2019ll need to:", "When your instance has been created and is running, SSH into your instance by clicking on the SSH button located on the right side of the screen.", "First, let\u2019s grab the exported model that we already trained on from Github. If you\u2019re interested in learning how to train a dandelion and grass image classifier using FastAI, follow this notebook hosted on Kaggle! I recommend using the library and following the FastAI course if you\u2019re interested in deep learning.", "Clone this repository from the greenr repo on Github containing the exported model, export.pkl:", "This is where it gets a bit hacky. Our f1-micro instance only supports up to 0.6GB of RAM, meaning it\u2019s ultra-weak and not capable of installing all of our required deep learning libraries, which are upwards of 750MB in size. We\u2019re going to add swap memory to our little friend to utilize its existing HDD space as RAM to make this all work. Fortunately, I put all of this part into a script, so just run swap.shfrom our greenr repo to add 4GB of swap memory to our machine:", "Note that if you\u2019re using a stronger VM instance, then you won\u2019t have to follow this step", "Now, we\u2019re going to build a Python script that will serve our model for inference on the web using the Starlette ASGI web framework. Why Starlette and not Flask? Both are web frameworks written in Python, but Starlette, along with Uvicorn, is way faster than Flask and more scalable in production.", "Using your favorite text editor, copy the following code to a python script called app.py in the greenr-tutorial directory.", "This will create a Starlette server on port 8008 with a web page where a user can upload an image and get results (is it a dandelion or grass?)", "Before moving on, we\u2019re also going to add a file called requirements.txt, which will allow Docker to install all of our required libraries when building a container. Vim and copy the following text intorequirements.txt in the greenr-tutorial folder:", "Using Docker lets us build compact containerized environments with only the libraries and data that we need.", "First, we\u2019re going to use Docker to build a container where our app will live. This lets us run the app in its own environment, anywhere.", "verify installation by running the hello-world image (it should print an informational message verifying that installation was a success):", "Now, in the greenr-tutorial directory, you\u2019ll need to create a Dockerfile that gives Docker instructions to build a container. First, vim intoDockerfile and add the following lines:", "This Dockerfile will install the required libraries in a Python3.6 environment, add the necessary files to the container, and run the Starlette server in app.py.", "In the greenr directory, build the Docker container with the following command:", "Now, all we have to do is run our Docker container!", "Now, let\u2019s visit the External IP address of our machine, which you can find on Compute Engine. Make sure when you enter it in your browser, to format it like this (for my instance): http://34.68.160.231/", "If you see the above, then you made it to the end. Congrats!\ud83c\udf89 Now, you can keep running your machine forever, because it is part of Google\u2019s always-free tier.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "ML Engineer, prev @ Apple, MSEE @ USC, relentless optimist"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F13fa56a266ee&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2F10-minutes-to-deploying-a-deep-learning-model-on-google-cloud-platform-13fa56a266ee&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2F10-minutes-to-deploying-a-deep-learning-model-on-google-cloud-platform-13fa56a266ee&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2F10-minutes-to-deploying-a-deep-learning-model-on-google-cloud-platform-13fa56a266ee&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2F10-minutes-to-deploying-a-deep-learning-model-on-google-cloud-platform-13fa56a266ee&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----13fa56a266ee--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----13fa56a266ee--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@btphan95?source=post_page-----13fa56a266ee--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@btphan95?source=post_page-----13fa56a266ee--------------------------------", "anchor_text": "Binh Phan"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fba6bd545bb5c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2F10-minutes-to-deploying-a-deep-learning-model-on-google-cloud-platform-13fa56a266ee&user=Binh+Phan&userId=ba6bd545bb5c&source=post_page-ba6bd545bb5c----13fa56a266ee---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F13fa56a266ee&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2F10-minutes-to-deploying-a-deep-learning-model-on-google-cloud-platform-13fa56a266ee&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F13fa56a266ee&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2F10-minutes-to-deploying-a-deep-learning-model-on-google-cloud-platform-13fa56a266ee&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://pixabay.com/photos/dandelion-sky-flower-nature-seeds-463928/", "anchor_text": "Pixabay"}, {"url": "https://cloud.google.com/free", "anchor_text": "Google Cloud Platform using its always-free compute service"}, {"url": "https://github.com/fastai/fastai", "anchor_text": "FastAI deep learning library"}, {"url": "https://www.kaggle.com/btphan/greenr-an-image-classifier-in-fastai?scriptVersionId=33945487", "anchor_text": "follow this notebook hosted on Kaggle"}, {"url": "https://github.com/btphan95/greenr", "anchor_text": "greenr repo on Github"}, {"url": "https://github.com/btphan95/greenr-tutorial", "anchor_text": "https://github.com/btphan95/greenr-tutorial"}, {"url": "https://www.techempower.com/benchmarks/#section=data-r17&hw=ph&test=fortune&l=zijzen-1", "anchor_text": "Starlette, along with Uvicorn, is way faster than Flask and more scalable in production"}, {"url": "https://docs.docker.com/engine/install/ubuntu/", "anchor_text": "install Docker"}, {"url": "http://34.68.160.231/", "anchor_text": "http://34.68.160.231/"}, {"url": "https://medium.com/tag/deep-learning?source=post_page-----13fa56a266ee---------------deep_learning-----------------", "anchor_text": "Deep Learning"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----13fa56a266ee---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/tag/google-cloud-platform?source=post_page-----13fa56a266ee---------------google_cloud_platform-----------------", "anchor_text": "Google Cloud Platform"}, {"url": "https://medium.com/tag/deployment?source=post_page-----13fa56a266ee---------------deployment-----------------", "anchor_text": "Deployment"}, {"url": "https://medium.com/tag/cloud-services?source=post_page-----13fa56a266ee---------------cloud_services-----------------", "anchor_text": "Cloud Services"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F13fa56a266ee&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2F10-minutes-to-deploying-a-deep-learning-model-on-google-cloud-platform-13fa56a266ee&user=Binh+Phan&userId=ba6bd545bb5c&source=-----13fa56a266ee---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F13fa56a266ee&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2F10-minutes-to-deploying-a-deep-learning-model-on-google-cloud-platform-13fa56a266ee&user=Binh+Phan&userId=ba6bd545bb5c&source=-----13fa56a266ee---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F13fa56a266ee&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2F10-minutes-to-deploying-a-deep-learning-model-on-google-cloud-platform-13fa56a266ee&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----13fa56a266ee--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F13fa56a266ee&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2F10-minutes-to-deploying-a-deep-learning-model-on-google-cloud-platform-13fa56a266ee&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----13fa56a266ee---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----13fa56a266ee--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----13fa56a266ee--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----13fa56a266ee--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----13fa56a266ee--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----13fa56a266ee--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----13fa56a266ee--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----13fa56a266ee--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----13fa56a266ee--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@btphan95?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@btphan95?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Binh Phan"}, {"url": "https://medium.com/@btphan95/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "183 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fba6bd545bb5c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2F10-minutes-to-deploying-a-deep-learning-model-on-google-cloud-platform-13fa56a266ee&user=Binh+Phan&userId=ba6bd545bb5c&source=post_page-ba6bd545bb5c--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F46a91ac59486&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2F10-minutes-to-deploying-a-deep-learning-model-on-google-cloud-platform-13fa56a266ee&newsletterV3=ba6bd545bb5c&newsletterV3Id=46a91ac59486&user=Binh+Phan&userId=ba6bd545bb5c&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}