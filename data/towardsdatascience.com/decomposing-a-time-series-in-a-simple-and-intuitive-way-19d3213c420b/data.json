{"url": "https://towardsdatascience.com/decomposing-a-time-series-in-a-simple-and-intuitive-way-19d3213c420b", "time": 1682995560.880728, "path": "towardsdatascience.com/decomposing-a-time-series-in-a-simple-and-intuitive-way-19d3213c420b/", "webpage": {"metadata": {"title": "Decomposing a Time series in a Simple and Intuitive way | by Abhishek Mungoli | Towards Data Science", "h1": "Decomposing a Time series in a Simple and Intuitive way", "description": "We have all struggled with traditional time series models like ARIMA, Exponential smoothing etc which are not so intuitive and hard to explain to business without talking in purely statistical terms\u2026"}, "outgoing_paragraph_urls": [{"url": "https://www.kaggle.com/c/rossmann-store-sales", "anchor_text": "Roseman Store Sales Kaggle Challenge", "paragraph_index": 2}, {"url": "https://en.wikipedia.org/wiki/Exploratory_data_analysis", "anchor_text": "EDA", "paragraph_index": 8}, {"url": "https://en.wikipedia.org/wiki/Root-mean-square_deviation", "anchor_text": "Root Mean Square Error", "paragraph_index": 37}, {"url": "https://www.youtube.com/channel/UCg0PxC9ThQrbD9nM_FU1vWA", "anchor_text": "https://www.youtube.com/channel/UCg0PxC9ThQrbD9nM_FU1vWA", "paragraph_index": 46}], "all_paragraphs": ["We have all struggled with traditional time series models like ARIMA, Exponential smoothing etc which are not so intuitive and hard to explain to business without talking in purely statistical terms.", "Given Time-based sales data, intuitively what comes to our mind is figuring out patterns like monthly trends, year-over-year trends, day-wise trends, weekly peaks and so on. Thus, this motivated me to devise a methodology which can decompose a time series to find all these parameters easily and also enable us to make a prediction for the future in a more simpler and intuitive way.", "In this post, we will be using the store sales data for a period of about 2.5 years from January 2013 to June 2015 from Roseman Store Sales Kaggle Challenge.", "The bird\u2019s eye view of approaching the task to reach our end goal of identifying (decomposing) different components of a time series and translate our learnings into a simpler and more intuitive model will be :", "Let\u2019s start our journey. We have store sales for a given date. Field Open denotes whether the store was functional that day or not. Store XYZ remains closed on Sundays. So, we will take into account the days, only when the store was open.", "Graphic visualization of Store sales over the time period.", "Code to visualize Sales over time", "We see a clear peak over the months of December every year. In addition to that, a decreasing trend over the years is also visible. 2014 and 2015 show a similar trend but a clear dip when compared to 2013. A good methodology should be able to capture these variations.", "Next, we will perform an EDA to understand sales variation over days during a week.", "Code to visualize Sales during the week", "There are no sales for Sunday, as the stores remain closed. We can see a clear peak on Saturday and Monday. The weekend could be a possible reason for Saturday\u2019s increased sales. Similarly, non-functionality of stores on Sunday may lead to increased sales on Monday. A good methodology should be able to capture these variations.", "We already saw a peak in sales during the month of December, but let\u2019s re-confirm our hypothesis with similar kind of EDA for months as we did for sales over days during a week.", "Code to visualize sales across months", "Another thing, we can investigate is the sales patterns across weeks in a month. I have an intuition that, this won\u2019t be a strong pattern and sales across weeks in a month should behave similarly. But, why not test it? The world is full of surprises, isn\u2019t it? We will analyze the average sales per day of a week.", "Code to visualize Sales across weeks in a month", "Sales are on the higher side for days on first and last weeks during a month. One random guess could be the credit of salary at month-end and more people shopping.", "Every date can be uniquely identified by its year, month, week and day. The main reason to represent the date this way is to find monthly, year-over-year, day-wise, and weekly trends.", "Reason to keep week number is to identify generally whether sales increase as the month progresses, diminishes or it doesn\u2019t affect much at all. We are referring it as the weekly trends.", "Also, we will remove data points where the store remains closed. On Sundays, the store remains closed.", "After performing the feature creation and cleaning step, the data looks like", "Next, we will perform One-hot encoding of year, month, day and week fields. One hot encoding is a binary representation of categorical data. As a result of this step, we will have the following fields.", "We will start by calculating the Average Sales. We will denote it by avgSales. We have 2.5 years of data, i.e. 2013, 2014 and mid-2015. Since 2015 full-year data is not available, it is likely to add noise if used in average sales calculation. We will only use the 2013 and 2014 year sales data to calculate the avgSales.", "The main idea is to find monthly, year-over-year, day-wise, and weekly trends. We wish to attach a value to it, called index. So, we wish to derive monthly, year-over-year, day-wise, and weekly trend index. We assume that these trends are solely responsible for sales in a day, over the average sales(avgSales) we have calculated above.", "We have one-hot encoded input features. At a time, only one month will be high or set to 1, along with one day, one week number and one year. The input will take care of it. So, our input equation gets modified to :", "Let\u2019s see the form of the model\u2019s equation for 17th May 2014. In this case, the year will be 2014, the month will be May, week number will be 3rd and the day will be Saturday. All other inputs will be 0. Coefficients raised to power 0 will become 1.", "We will take log on both sides, to simplify the equation and convert it to a form where it\u2019s easy to apply linear regression. We will apply an intercept-less regression and take the antilog of model coefficients to get the monthly, year-over-year, day-wise, and weekly trend index.", "Here the dependent variable is ln(Sales)-ln(avgSales) and we will take log using base 2. We have sales data for a store for a period of about 2.5 years from January 2013 to June 2015. We will not use last month data and keep it for validating model\u2019s performance.", "Next, we will take the antilog of the model\u2019s coefficient to get the respective index.", "An important component of Time series is year over year trends. The yearly index that our model learned has clearly captured a higher trend in the year 2013 than in 2014 and 2015. The captured yearly index will assist us to decompose the yearly trend from the time series data. Let\u2019s visualize the results.", "We can clearly see a decreasing trend over the years. There can be many reasons for the decreasing trend like the drop in store quality or opening of a competitor store etc. One needs to do a deeper analysis to find that. It will be an interesting find.", "Another important component of Time series is the monthly trend. The monthly index that our model learned has clearly captured a higher trend in the month of December. It will assist us to decompose the monthly trend from the time series data. Let\u2019s visualize the results.", "In the EDA section, we have analyzed the sales over days during a week. We have seen sales on a higher side for Saturday and Monday. The day-index learned by the model is able to capture these patterns. Let\u2019s visualize the results.", "During the EDA section, we have seen a small peak over the first and last weeks during a month. The weekly index learned by the model is able to capture this pattern. Let\u2019s visualize the results.", "We will devise a new, simple and intuitive model using the above learnings and let\u2019s call it Multiplicative model. The final model equation will be :", "The yearly_index, monthly_index, day_index, and weekNbr_index will be used from the calculated tables depending on the date.", "Using the above model to make a prediction for 21 Sept 2015. It falls on September month, 3rd week and year 2015", "In parallel, a linear regression model without any constraints on intercept or logarithms on features was also trained. Let\u2019s call it Model-1 and our multiplicative model, Model-2. We tested both the models on 3-months on unseen data for 50+ stores.", "Mostly both of the models performed equally good in terms of Root Mean Square Error with similar RMSE values. There where some cases where Model-2 was a clear winner with low RMSE compared to Model1. One possible reason could be the feeding of domain-knowledge, avgSales, not allowing it to overfit and performs well on unseen data.", "Code to compare the performance of two models", "Multiplicative model (Model-2) is a clear winner for Stores 39,85 and 88", "Some crucial information and fun-facts can be derived easily from the multiplicative model. Like, if the business asks us what can we say or how can we compare the sales of May 2014 with November 2014. We use the value of the monthly, yearly, day and weekly indexes learned to answer such questions.", "What extra percentage of sales is for Nov 2014 compared to May 2014", "So, November 2014 will be 3.07% more seasonal than May 2014. We can do a similar comparison for months, weeks, days across years and get a clearer picture from the decomposed forecasting model.", "The main idea of this blog post was to tweak traditional models to decompose time series and create a simpler and intuitive model. Hope the purpose was served. Let me know what you think and how I can improve this methodology further.", "My Youtube channel for more content:", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Lead Data Scientist at Meesho | Ex-Walmart | IIIT-Hyderabad | NERIST | Insta: simplyspartanx | Youtube: https://www.youtube.com/channel/UCg0PxC9ThQrbD9nM_FU1vWA"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F19d3213c420b&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdecomposing-a-time-series-in-a-simple-and-intuitive-way-19d3213c420b&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdecomposing-a-time-series-in-a-simple-and-intuitive-way-19d3213c420b&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdecomposing-a-time-series-in-a-simple-and-intuitive-way-19d3213c420b&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdecomposing-a-time-series-in-a-simple-and-intuitive-way-19d3213c420b&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----19d3213c420b--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----19d3213c420b--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@mungoliabhishek81?source=post_page-----19d3213c420b--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@mungoliabhishek81?source=post_page-----19d3213c420b--------------------------------", "anchor_text": "Abhishek Mungoli"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F5f15354d23de&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdecomposing-a-time-series-in-a-simple-and-intuitive-way-19d3213c420b&user=Abhishek+Mungoli&userId=5f15354d23de&source=post_page-5f15354d23de----19d3213c420b---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F19d3213c420b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdecomposing-a-time-series-in-a-simple-and-intuitive-way-19d3213c420b&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F19d3213c420b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdecomposing-a-time-series-in-a-simple-and-intuitive-way-19d3213c420b&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://www.kaggle.com/c/rossmann-store-sales", "anchor_text": "Roseman Store Sales Kaggle Challenge"}, {"url": "https://en.wikipedia.org/wiki/Exploratory_data_analysis", "anchor_text": "EDA"}, {"url": "https://en.wikipedia.org/wiki/Exploratory_data_analysis", "anchor_text": "EDA"}, {"url": "https://en.wikipedia.org/wiki/Root-mean-square_deviation", "anchor_text": "Root Mean Square Error"}, {"url": "https://www.youtube.com/channel/UCg0PxC9ThQrbD9nM_FU1vWA", "anchor_text": "Abhishek MungoliHi Guys, Welcome to the channel. The channel aims to cover various topics from Machine Learning, Data Science\u2026www.youtube.com"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----19d3213c420b---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/tag/data-science?source=post_page-----19d3213c420b---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/algorithms?source=post_page-----19d3213c420b---------------algorithms-----------------", "anchor_text": "Algorithms"}, {"url": "https://medium.com/tag/forecasting?source=post_page-----19d3213c420b---------------forecasting-----------------", "anchor_text": "Forecasting"}, {"url": "https://medium.com/tag/towards-data-science?source=post_page-----19d3213c420b---------------towards_data_science-----------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F19d3213c420b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdecomposing-a-time-series-in-a-simple-and-intuitive-way-19d3213c420b&user=Abhishek+Mungoli&userId=5f15354d23de&source=-----19d3213c420b---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F19d3213c420b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdecomposing-a-time-series-in-a-simple-and-intuitive-way-19d3213c420b&user=Abhishek+Mungoli&userId=5f15354d23de&source=-----19d3213c420b---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F19d3213c420b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdecomposing-a-time-series-in-a-simple-and-intuitive-way-19d3213c420b&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----19d3213c420b--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F19d3213c420b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdecomposing-a-time-series-in-a-simple-and-intuitive-way-19d3213c420b&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----19d3213c420b---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----19d3213c420b--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----19d3213c420b--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----19d3213c420b--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----19d3213c420b--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----19d3213c420b--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----19d3213c420b--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----19d3213c420b--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----19d3213c420b--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@mungoliabhishek81?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@mungoliabhishek81?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Abhishek Mungoli"}, {"url": "https://medium.com/@mungoliabhishek81/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "611 Followers"}, {"url": "https://www.youtube.com/channel/UCg0PxC9ThQrbD9nM_FU1vWA", "anchor_text": "https://www.youtube.com/channel/UCg0PxC9ThQrbD9nM_FU1vWA"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F5f15354d23de&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdecomposing-a-time-series-in-a-simple-and-intuitive-way-19d3213c420b&user=Abhishek+Mungoli&userId=5f15354d23de&source=post_page-5f15354d23de--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F8d41b74042bf&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdecomposing-a-time-series-in-a-simple-and-intuitive-way-19d3213c420b&newsletterV3=5f15354d23de&newsletterV3Id=8d41b74042bf&user=Abhishek+Mungoli&userId=5f15354d23de&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}