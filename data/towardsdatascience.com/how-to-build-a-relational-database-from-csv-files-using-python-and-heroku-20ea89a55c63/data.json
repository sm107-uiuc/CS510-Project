{"url": "https://towardsdatascience.com/how-to-build-a-relational-database-from-csv-files-using-python-and-heroku-20ea89a55c63", "time": 1683013420.843308, "path": "towardsdatascience.com/how-to-build-a-relational-database-from-csv-files-using-python-and-heroku-20ea89a55c63/", "webpage": {"metadata": {"title": "How to Build a Relational Database from CSV Files Using Python and Heroku | by Niels G. | Towards Data Science", "h1": "How to Build a Relational Database from CSV Files Using Python and Heroku", "description": "For smaller projects, CSV is a great format for storing data. But what if you want to up your data management game? A relational database offers a more robust way to organise and manage your data. In\u2026"}, "outgoing_paragraph_urls": [{"url": "https://www.postgresql.org", "anchor_text": "PostgreSQL", "paragraph_index": 0}, {"url": "https://www.mysql.com/", "anchor_text": "MySQL", "paragraph_index": 1}, {"url": "https://www.sqlite.org/", "anchor_text": "SQLite", "paragraph_index": 1}, {"url": "https://www.postgresql.org", "anchor_text": "PostgreSQL", "paragraph_index": 1}, {"url": "https://docs.microsoft.com/en-us/office/troubleshoot/access/database-normalization-description", "anchor_text": "Normalization is the process of organising the data in your database", "paragraph_index": 5}, {"url": "http://www.heroku.com", "anchor_text": "Heroku", "paragraph_index": 9}, {"url": "https://www.heroku.com/postgres", "anchor_text": "offers a free tier for PostgreSQL", "paragraph_index": 9}, {"url": "https://gist.github.com/ngoet/1b0e8b14a4169e42d9192a9b18e73afa", "anchor_text": "are available on Github", "paragraph_index": 14}, {"url": "https://www.postgresql.org/docs/10/ddl-partitioning.html", "anchor_text": "partitioning", "paragraph_index": 15}, {"url": "https://www.psycopg.org", "anchor_text": "psycopg2", "paragraph_index": 19}, {"url": "https://www.askpython.com/python/environment-variables-in-python", "anchor_text": "environment variables", "paragraph_index": 20}, {"url": "https://devcenter.heroku.com/articles/dataclips", "anchor_text": "a neat dataclips feature", "paragraph_index": 26}, {"url": "https://www.psycopg.org", "anchor_text": "psycopg2", "paragraph_index": 27}, {"url": "https://dbeaver.io", "anchor_text": "DBeaver", "paragraph_index": 27}, {"url": "https://medium.com/@ndgoet/disclaimer-5ad928afc841", "anchor_text": "this disclaimer", "paragraph_index": 29}, {"url": "https://towardsdatascience.com/@ndgoet", "anchor_text": "my articles on Medium.com", "paragraph_index": 29}, {"url": "https://medium.com/@ndgoet/membership", "anchor_text": "https://medium.com/@ndgoet/membership", "paragraph_index": 31}], "all_paragraphs": ["For smaller projects, CSV is a great format for storing data. But what if you want to up your data management game? A relational database offers a more robust way to organise and manage your data. In this post, I show how you can transform your CSV files into a PostgreSQL database in three simple steps. I\u2019ll also discuss some the advantages of using a relational database.", "A relational database is a database that divides data into linked tables that have shared data points. These shared data points allow us to combine information and create novel tables or views with one simple query. Popular flavours of relational databases include MySQL, SQLite, and PostgreSQL.", "Building a proper relational database takes time and effort. But, when done well, it has a number of advantages.", "First, relational databases enable you to see the relationship between different parts of your data more easily. Data is divided into tables and can be combined (\u201cjoined\u201d) using Structured Query Language (SQL) queries that include simple math operations.", "Second, relational databases offer superior data management with greater consistency and flexibility. Other formats such as CSV files quickly become unmanageable, even for smaller projects. A relational database allows you enforce data types using schemas thus reducing a major potential source of error. Relational databases also offer greater flexibility since you can generate more complex data from relatively simple tables using complex queries.", "Third, relational databases solve the problem of data redundancy: a good relational database is designed around minimising data duplication and inconsistent dependencies, through a process called \u201cnormalization\u201d. Normalization is the process of organising the data in your database, and involves both creating tables and defining the relations between them.", "Fourth, relational databases have become the industry standard and database management systems (DBMS) typically offer an advanced set of features that you\u2019d want for any database such as backups, failover, and mirroring.", "One important caveat when reading the instructions below: this post is not intended to explain how to design and set up a production-level architecture for your relational database. When designing databases for a production environment, you\u2019ll want to think more carefully about permissions, creating a read-only versus write version, versioning, and so on. Instead, I show how you can quickly and easily create your own database for personal use.", "With this in mind, let\u2019s dive in and build a relational database from CSV files using Heroku and Python.", "We\u2019ll start with setting up a PostgreSQL instance on Heroku. Heroku is a platform as a service (PaaS) based on Amazon Web Services (AWS), and offers a free tier for PostgreSQL. The free plan is limited to 10,000 rows and has a maximum concurrency of 20. You also won\u2019t be able to use the more advanced features like rollback and failover, which both are advisable for any production-level database. It does have a manual backup feature, which allows you to generate and download a backup of your database.", "To set up a PostgreSQL instance on Heroku first log into your Heroku account and create a new app from the drop-down menu.", "Pick a name and region for your app and hit the \u201cCreate app\u201d button.", "Provision a PostgreSQL database for your new app.", "Finally, find and copy your database Credentials (you\u2019ll need them to set up the connection in Python). And that\u2019s it, you have your own PostgreSQL database up and running!", "In this example, we\u2019ll build a database consisting of randomly generated Medium authors and their articles, and store this data as two CSV files. The first CSV file (or: \u201ctable\u201d) is the \u201cauthor table\u201d, and the second CSV file contains data on their posts. These CSV files and the script used to generate them are available on Github.", "Let\u2019s take a look at the schemas of these tables. A \u201cschema\u201d is a formal language representation of a table in your database. It defines the columns, their names and types, the partitioning rules, and so on.", "The authors table contains a timestamp for when the entry was written to the table (row_timestamp), a universally unique identifier (UUID) for the author (author_id), the author\u2019s first and last name (author_first_name; author_last_name), and their email address (email).", "The posts table also includes a row_timestamp, a unique identifier for each article (post_id), a secondary key that refers back to the author_id column in our authors table, and each post\u2019s title (article_title).", "We\u2019ll use these schemas later when setting up our tables in our PostgreSQL database.", "In our third and final step, we need a bit of Python code to set up a connection with our PostgreSQL database using the psycopg2 library. We first create three functions to add tables to our database, and to inject data into our database. The first function, run_syntax, is a helper function that executes syntax using the database connection. The second function, create_table, takes a schema definition and table and database name and adds the table to our database. The third function, populate_table, takes a pandas data frame and populates the specified table in the database with that data.", "Note that I use environment variables for the database access credentials. It\u2019s good practice to never include such credentials in your code, even for smaller (non-production) projects. You might forget to remove them when pushing your code to Github, exposing your database to other users.", "To set up the tables in your PostgreSQL instance, you\u2019ll have to add the schema definitions that we defined earlier, and add a bit of code to execute the create_table function as shown in the script below.", "To inject data into these tables from your CSV files, use the following script:", "To use the above code in an IDE, you\u2019ll have to add your credentials as environment variables to the Python configuration (I use Pycharm). If, alternatively, you want to run the above scripts from terminal, you\u2019ll need to take some additional steps. First, add the credentials as environment variables in terminal, by running the following syntax, replacing the placeholders with the database credentials that you obtained from Heroku earlier.", "In a second step, you\u2019ll need to pass the environment variables to the Python process, by adding the following code to the db_management module shown above:", "Finally, execute the Python code to populate your database from terminal using the create_tables.py and populate_table.py scripts shown above, using the following commands:", "Now you have a PostgreSQL database that you can connect to, and query from. Let\u2019s check that this works. Heroku has a neat dataclips feature that you can use to embed query output on your website, or to share with collaborators.", "With your database in place, you can continue managing your data directly in Python using the psycopg2 library, or start using a free database tool like DBeaver. You\u2019ll now be able to use a range of simple SQL commands to view, manage, and gain new insights from your data, or use your database for other applications such as a dashboard or website.", "If you liked this article, here are some other articles you may enjoy:", "Please read this disclaimer carefully before relying on any of the content in my articles on Medium.com.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Product Manager & Data Scientist | PhD in Politics, @Oxford_University | Python, R, AWS, ML | EdTech | \ud83c\udfb7Jazz enthusiast | https://medium.com/@ndgoet/membership"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F20ea89a55c63&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-build-a-relational-database-from-csv-files-using-python-and-heroku-20ea89a55c63&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-build-a-relational-database-from-csv-files-using-python-and-heroku-20ea89a55c63&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-build-a-relational-database-from-csv-files-using-python-and-heroku-20ea89a55c63&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-build-a-relational-database-from-csv-files-using-python-and-heroku-20ea89a55c63&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----20ea89a55c63--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----20ea89a55c63--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@ndgoet?source=post_page-----20ea89a55c63--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@ndgoet?source=post_page-----20ea89a55c63--------------------------------", "anchor_text": "Niels G."}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F15971c830d36&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-build-a-relational-database-from-csv-files-using-python-and-heroku-20ea89a55c63&user=Niels+G.&userId=15971c830d36&source=post_page-15971c830d36----20ea89a55c63---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F20ea89a55c63&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-build-a-relational-database-from-csv-files-using-python-and-heroku-20ea89a55c63&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F20ea89a55c63&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-build-a-relational-database-from-csv-files-using-python-and-heroku-20ea89a55c63&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://www.postgresql.org", "anchor_text": "PostgreSQL"}, {"url": "https://www.mysql.com/", "anchor_text": "MySQL"}, {"url": "https://www.sqlite.org/", "anchor_text": "SQLite"}, {"url": "https://www.postgresql.org", "anchor_text": "PostgreSQL"}, {"url": "https://docs.microsoft.com/en-us/office/troubleshoot/access/database-normalization-description", "anchor_text": "Normalization is the process of organising the data in your database"}, {"url": "http://www.heroku.com", "anchor_text": "Heroku"}, {"url": "https://www.heroku.com/postgres", "anchor_text": "offers a free tier for PostgreSQL"}, {"url": "https://gist.github.com/ngoet/1b0e8b14a4169e42d9192a9b18e73afa", "anchor_text": "are available on Github"}, {"url": "https://www.postgresql.org/docs/10/ddl-partitioning.html", "anchor_text": "partitioning"}, {"url": "https://www.psycopg.org", "anchor_text": "psycopg2"}, {"url": "https://www.askpython.com/python/environment-variables-in-python", "anchor_text": "environment variables"}, {"url": "https://devcenter.heroku.com/articles/dataclips", "anchor_text": "a neat dataclips feature"}, {"url": "https://www.psycopg.org", "anchor_text": "psycopg2"}, {"url": "https://dbeaver.io", "anchor_text": "DBeaver"}, {"url": "https://medium.com/@ndgoet/membership", "anchor_text": "Join Medium with my referral link - Niels G.As a Medium member, a portion of your membership fee goes to writers you read, and you get full access to every story\u2026medium.com"}, {"url": "https://towardsdatascience.com/creating-and-managing-elasticsearch-indices-with-python-f676ff1c8113", "anchor_text": "Creating and Managing Elasticsearch Indices with PythonA hands-on guide to creating an ES index from a CSV file, and to managing your data with the Python Elasticsearch\u2026towardsdatascience.com"}, {"url": "https://towardsdatascience.com/automating-unit-tests-in-python-with-hypothesis-d53affdc1eba", "anchor_text": "Automating Unit Tests in Python with HypothesisUnit tests are key to producing quality code. Here\u2019s how to automate testing of Python code.towardsdatascience.com"}, {"url": "https://medium.com/python-in-plain-english/how-to-improve-your-python-code-style-with-pre-commit-hooks-e7fe3fd43bfa", "anchor_text": "How to improve your Python code style with pre-commit hooksEnforcing code style is key to streamlining development processes, and here is how to automate it.medium.com"}, {"url": "https://medium.com/@ndgoet/disclaimer-5ad928afc841", "anchor_text": "this disclaimer"}, {"url": "https://towardsdatascience.com/@ndgoet", "anchor_text": "my articles on Medium.com"}, {"url": "https://medium.com/tag/python?source=post_page-----20ea89a55c63---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/python3?source=post_page-----20ea89a55c63---------------python3-----------------", "anchor_text": "Python3"}, {"url": "https://medium.com/tag/data-science?source=post_page-----20ea89a55c63---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/programming?source=post_page-----20ea89a55c63---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/tag/database?source=post_page-----20ea89a55c63---------------database-----------------", "anchor_text": "Database"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F20ea89a55c63&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-build-a-relational-database-from-csv-files-using-python-and-heroku-20ea89a55c63&user=Niels+G.&userId=15971c830d36&source=-----20ea89a55c63---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F20ea89a55c63&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-build-a-relational-database-from-csv-files-using-python-and-heroku-20ea89a55c63&user=Niels+G.&userId=15971c830d36&source=-----20ea89a55c63---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F20ea89a55c63&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-build-a-relational-database-from-csv-files-using-python-and-heroku-20ea89a55c63&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----20ea89a55c63--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F20ea89a55c63&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-build-a-relational-database-from-csv-files-using-python-and-heroku-20ea89a55c63&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----20ea89a55c63---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----20ea89a55c63--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----20ea89a55c63--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----20ea89a55c63--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----20ea89a55c63--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----20ea89a55c63--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----20ea89a55c63--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----20ea89a55c63--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----20ea89a55c63--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@ndgoet?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@ndgoet?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Niels G."}, {"url": "https://medium.com/@ndgoet/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "501 Followers"}, {"url": "https://medium.com/@ndgoet/membership", "anchor_text": "https://medium.com/@ndgoet/membership"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F15971c830d36&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-build-a-relational-database-from-csv-files-using-python-and-heroku-20ea89a55c63&user=Niels+G.&userId=15971c830d36&source=post_page-15971c830d36--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F4662cbe98604&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-build-a-relational-database-from-csv-files-using-python-and-heroku-20ea89a55c63&newsletterV3=15971c830d36&newsletterV3Id=4662cbe98604&user=Niels+G.&userId=15971c830d36&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}