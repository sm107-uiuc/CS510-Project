{"url": "https://towardsdatascience.com/auto-docs-for-python-b545ce372e2d", "time": 1683007035.895861, "path": "towardsdatascience.com/auto-docs-for-python-b545ce372e2d/", "webpage": {"metadata": {"title": "Auto-Docs for Python. Documenting code is boring, so why\u2026 | by James Briggs | Towards Data Science", "h1": "Auto-Docs for Python", "description": "Good documentation is, whether we like it or not, absolutely crucial to the success of a project. So why is good documentation so hard to find? In reality, it is often neglected and treated as an\u2026"}, "outgoing_paragraph_urls": [{"url": "https://numpydoc.readthedocs.io/en/latest/format.html", "anchor_text": "NumPy/SciPy docstring standards", "paragraph_index": 6}, {"url": "https://github.com/jamescalam/autodocs", "anchor_text": "GitHub here", "paragraph_index": 6}, {"url": "https://docs.readthedocs.io/en/stable/intro/getting-started-with-sphinx.html", "anchor_text": "Sphinx", "paragraph_index": 7}, {"url": "https://regex101.com/", "anchor_text": "online regex tester", "paragraph_index": 24}, {"url": "https://getbootstrap.com/docs/4.4/getting-started/introduction/", "anchor_text": "Bootstrap", "paragraph_index": 36}, {"url": "https://github.com/jamescalam/autodocs", "anchor_text": "autodocs GitHub repo", "paragraph_index": 60}, {"url": "https://twitter.com/jamescalam", "anchor_text": "Twitter", "paragraph_index": 61}, {"url": "https://www.youtube.com/c/jamesbriggs", "anchor_text": "https://www.youtube.com/c/jamesbriggs", "paragraph_index": 64}], "all_paragraphs": ["Good documentation is, whether we like it or not, absolutely crucial to the success of a project. So why is good documentation so hard to find?", "In reality, it is often neglected and treated as an inferior product to the code itself. It is simply too time consuming to produce good, user-friendly documentation.", "This neglect is a mistake. The adoption of the tools we build largely rests on ease of use. If documentation is hard to navigate, comprehend, or simply not attractive to use, users will not like it.", "So, with that in mind, I believe we should all strive for simplistic, but comprehensive documentation.", "We will cover how to quickly build a auto-documentation tool for any Python project. With this, documentation can be generated for complex projects with huge amounts of code in nothing more then a few seconds.", "Regular Expressions (regex) are our friend here, we will rely on them heavily throughout the article. My intention with this article is to really focus on this aspect of the code, which I hope you will learn a lot from (I certainly have).", "If you use NumPy/SciPy docstring standards, you can even use the exact code I use, which is available on GitHub here!", "Before starting, out-of-the-box documentation tools are readily available. There is nothing wrong with using them, in fact, Sphinx, the only one I have used comprehensively is actually very good.", "However, as of yet I haven\u2019t the other tools particularly quick at producing the style of documentation that I like.", "Nonetheless, they are good and I advice you to consider all of your options. If you are happy with Sphinx (or another) tool, use it. If you want to build something in your own style (and learn regex), use this guide.", "The autodocs documenting structure can be represented as a tree like so:", "From this we can see there are several key structures we must be able to extract from our code, these are:", "We will take each of these components and their respective sub-components and use this information to develop another tree-like structure of simplistic, comprehensible documentation.", "There are a few things happening here.", "The beginning of a class can easily be identified by the word class followed by a space, a few letters, and a colon.", "To prevent us from matching everything after the beginning of a class, we identify the end of the class as the first place that a newline is directly followed by a text character.", "Functions are a little bit different. Unlike classes, where we capture everything contained within the class (so that we can extract the class methods too), we only need the function name and docstring.", "Each function also contains a name, description, and parameter list that we must extract. We do this in parts, parameter extraction is a little more complex and we will cover next.", "The function name we extract using def [\\w\\d_]+\\(, with which we remove def and (, leaving just the function name.", "Description desc and the parameter list params are extracted by pulling out the docstring with (?s)\\\"{3}.*?\\\"{3} and splitting on Parameters\\n. We then remove triple quotes and excessive white-space.", "We have our parameter list contained in params , which looks like this:", "For the most part we have already covered everything in this, except for one part \u2014 (?=\\w+ :).", "In this, we know that \\w+ : will match multiple letters followed by a space and colon. However, it is wrapped in (?=). This is called a positive lookahead assertion.", "By adding this, we are telling the regex to assert (?=) that what we have matched is immediately followed by \\w :.", "If we put this into an online regex tester, we can see it works almost perfectly, but if unfortunately misses the final parameter (as it is not followed by \\w :).", "We solve this by extracting a single parameter at a time. In this loop, if we find that no parameters have been found, we try again with a modified parameter finding regex (?s)\\w+ : .*, extracting the final parameter.", "Our final, deepest layer of extraction requires us to extract the parameter name, datatype, \u2018optional\u2019 flag, and description.", "For this, we simply split our parameter text new_param by newlines \\n. Now, at index 0 we have the first line containing the parameter name, datatype, and possibly the optional flag. Let\u2019s modify the code above to include this extraction.", "The only additional logic here is the splitting of the first line of new_param by :, giving us name and dtype. Followed by a check for the word 'optional' in dtype, giving us optional.", "Then we simply add these parameter details to the new params dictionary. Giving us something like:", "At this point, we have finished with the code that will extract everything we need from our code. We have created the tree structure we touched upon earlier:", "Anything contained within the scripts or classes row will be given a dedicated documentation page. The script page will contain a name, description, and link to any classes below it.", "When building the documentation, we will loop through every script and class contained within a project. Iteratively building the documentation for each.", "With this, we can move onto building the HTML code for our docs.", "The docs are split into four key sections:", "Before dynamically building these sections, we do need to add <head> information to our initial HTML page, we will keep it very simple for now.", "We will be using Bootstrap for the CSS and JS in our page. Within the <head> we attach the Bootstrap CSS stylesheet using the <link> element. The JS scripts are added later.", "In Python, we can either add this code into a triple quote block, or read it in from file. The variable html will initially just contain this <head> element.", "This is our script/class information appearing at the top of our page.", "As we loop through each script and class independently, we can treat them the same. The only difference between the two being that script pages will contain class sections, whereas classes will not (unless you have a class inside a class).", "For docs.py, fullpath will just contain a single entry ['docs']. But for lower levels, such as DocsBuilder , this will contain the list of layers leading to the class ['docs', 'DocsBuilder']. Our main header is therefore the last index in the list fullpath[-1].", "The top-level description is contained within desc.", "Next is our navigation section, we initialize this with our highest level page, the readme.", "Following this we loop through the items in fullpath to create a full \u2018breadcrumb path\u2019 to our current page.", "As the filenames produced will all be camel case, and include any preceding classes/scripts. We apply the same formatting to the path variable. This makes DocsBuilder -> docs.docsbuilder.", "Classes are all stored in a dictionary creatively named classes. This dictionary contains class name and description key-value pairs.", "First we check that the current level contains classes, if not, we don\u2019t add a class section.", "If we do have classes, we add the beginning of the class and class buttons section. We then loop through classes, adding a button for each item, containing the class name only.", "Next we add the end of the class buttons and the beginning of the class descriptions (and links). We loop through each item, adding the button contents. This allows us to show the class description and link when clicking on a button.", "Finally, we end the class section.", "Functions are stored in a dictionary called funcs, which is formatted as above.", "There is a lot more going on here due to the additional layer of parameters inside each function.", "All functions are contained within an unordered list <ul>, where each list item <li> consists of a single function.", "We first add the function name, followed by the function example contained within the <kbd> element, built by joining all parameters with \",\".", "Following these is the parameter table. Here we initialize the beginning of the table with <table> and <tbody> tags. A loop builds the table row by row, consisting of the parameter name and description.", "After this are several tag closing sections. As the functions section is our final dynamically built part of the page, we can add the Bootstrap JS scripts and closing tags.", "Once we have put all of these code extraction and page building scripts together, we can build documentation with just a few lines of code.", "Here of-course, everything that you have seen throughout the article has been built into the DocsBuilder class.", "All of the extraction regex we worked through is contained in the extract method. The HTML building code within the build method.", "I have run the same scripts on much larger projects containing many scripts and classes. Nonetheless, all documentation is built in an instant.", "You can find all of the code in the autodocs GitHub repo. It is by no means a finished project, so please feel free to suggest improvements or point out unnecessary code!", "If you have any other questions or suggestions, feel free to reach out via Twitter or in the comments below.", "If you enjoyed the article, you may be interested in another article I recently wrote on processing text data from the web. With a focus on data preparation for Machine Learning:", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Freelance ML engineer learning and writing about everything. I post a lot on YT https://www.youtube.com/c/jamesbriggs"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fb545ce372e2d&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fauto-docs-for-python-b545ce372e2d&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fauto-docs-for-python-b545ce372e2d&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fauto-docs-for-python-b545ce372e2d&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fauto-docs-for-python-b545ce372e2d&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----b545ce372e2d--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----b545ce372e2d--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://jamescalam.medium.com/?source=post_page-----b545ce372e2d--------------------------------", "anchor_text": ""}, {"url": "https://jamescalam.medium.com/?source=post_page-----b545ce372e2d--------------------------------", "anchor_text": "James Briggs"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fb9d77a4ca1d1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fauto-docs-for-python-b545ce372e2d&user=James+Briggs&userId=b9d77a4ca1d1&source=post_page-b9d77a4ca1d1----b545ce372e2d---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fb545ce372e2d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fauto-docs-for-python-b545ce372e2d&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fb545ce372e2d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fauto-docs-for-python-b545ce372e2d&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@aows?utm_source=medium&utm_medium=referral", "anchor_text": "adrian"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://numpydoc.readthedocs.io/en/latest/format.html", "anchor_text": "NumPy/SciPy docstring standards"}, {"url": "https://github.com/jamescalam/autodocs", "anchor_text": "GitHub here"}, {"url": "https://docs.readthedocs.io/en/stable/intro/getting-started-with-sphinx.html", "anchor_text": "Sphinx"}, {"url": "https://unsplash.com/@jse71?utm_source=medium&utm_medium=referral", "anchor_text": "Jorn Eriksen"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://regex101.com/", "anchor_text": "regex101.com"}, {"url": "https://regex101.com/", "anchor_text": "online regex tester"}, {"url": "https://unsplash.com/@helloimnik?utm_source=medium&utm_medium=referral", "anchor_text": "Hello I'm Nik \ud83c\udf9e"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://getbootstrap.com/docs/4.4/getting-started/introduction/", "anchor_text": "Bootstrap"}, {"url": "https://github.com/jamescalam/autodocs", "anchor_text": "autodocs GitHub repo"}, {"url": "https://twitter.com/jamescalam", "anchor_text": "Twitter"}, {"url": "https://towardsdatascience.com/web-scraping-and-pre-processing-for-nlp-2e78810b40f1", "anchor_text": "Web-Scraping and Pre-Processing for NLPUsing Python to scrape and process text data from the webtowardsdatascience.com"}, {"url": "https://medium.com/tag/programming?source=post_page-----b545ce372e2d---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/tag/python?source=post_page-----b545ce372e2d---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/code?source=post_page-----b545ce372e2d---------------code-----------------", "anchor_text": "Code"}, {"url": "https://medium.com/tag/productivity?source=post_page-----b545ce372e2d---------------productivity-----------------", "anchor_text": "Productivity"}, {"url": "https://medium.com/tag/html?source=post_page-----b545ce372e2d---------------html-----------------", "anchor_text": "HTML"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fb545ce372e2d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fauto-docs-for-python-b545ce372e2d&user=James+Briggs&userId=b9d77a4ca1d1&source=-----b545ce372e2d---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fb545ce372e2d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fauto-docs-for-python-b545ce372e2d&user=James+Briggs&userId=b9d77a4ca1d1&source=-----b545ce372e2d---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fb545ce372e2d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fauto-docs-for-python-b545ce372e2d&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----b545ce372e2d--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fb545ce372e2d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fauto-docs-for-python-b545ce372e2d&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----b545ce372e2d---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----b545ce372e2d--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----b545ce372e2d--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----b545ce372e2d--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----b545ce372e2d--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----b545ce372e2d--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----b545ce372e2d--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----b545ce372e2d--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----b545ce372e2d--------------------------------", "anchor_text": ""}, {"url": "https://jamescalam.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://jamescalam.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "James Briggs"}, {"url": "https://jamescalam.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "9.6K Followers"}, {"url": "https://www.youtube.com/c/jamesbriggs", "anchor_text": "https://www.youtube.com/c/jamesbriggs"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fb9d77a4ca1d1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fauto-docs-for-python-b545ce372e2d&user=James+Briggs&userId=b9d77a4ca1d1&source=post_page-b9d77a4ca1d1--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F75e31c56d187&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fauto-docs-for-python-b545ce372e2d&newsletterV3=b9d77a4ca1d1&newsletterV3Id=75e31c56d187&user=James+Briggs&userId=b9d77a4ca1d1&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}