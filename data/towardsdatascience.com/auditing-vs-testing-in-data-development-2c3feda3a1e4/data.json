{"url": "https://towardsdatascience.com/auditing-vs-testing-in-data-development-2c3feda3a1e4", "time": 1683003441.834694, "path": "towardsdatascience.com/auditing-vs-testing-in-data-development-2c3feda3a1e4/", "webpage": {"metadata": {"title": "Auditing vs. Testing in Data Development | by Ethan Knox | Towards Data Science", "h1": "Auditing vs. Testing in Data Development", "description": "The question is always at the top of the list whenever someone wants to discuss modernizing a data stack. Most often it comes from software engineers tasked with untangling a web of SQL scripts and\u2026"}, "outgoing_paragraph_urls": [{"url": "https://en.wikipedia.org/wiki/Single_responsibility_principle", "anchor_text": "Single responsibility principle", "paragraph_index": 4}, {"url": "https://en.wikipedia.org/wiki/Single_responsibility_principle", "anchor_text": "SRP", "paragraph_index": 7}, {"url": "https://en.wikipedia.org/wiki/Single_responsibility_principle", "anchor_text": "SRP", "paragraph_index": 8}, {"url": "https://www.kimballgroup.com/2014/03/design-tip-164-built-your-audit-dimension/", "anchor_text": "Kimball", "paragraph_index": 15}], "all_paragraphs": ["The question is always at the top of the list whenever someone wants to discuss modernizing a data stack. Most often it comes from software engineers tasked with untangling a web of SQL scripts and stored procs, mortified when they discover \u201cdev\u201d and \u201cprod\u201d are just different connection settings in the data developer\u2019s SQL editor. Data development has been painfully slow to evolve, and it can be argued that a lack of automated testing/test-driven development is a huge reason for this sloth. TDD and CI/CD have been explosive catalysts in the world of fast & reliable software development, and they will have the same effect on data development just as soon as they are adopted. The problem has been that how to go about data transformation/model testing is not terribly intuitive. Data adds a layer of moving parts to software design that can feel almost impossible to test; but as usual with development of any kind, if things feel too complex you probably need to think smaller. So how do you test data? Easy; you don\u2019t. You test software, and you audit data.", "The Cambridge Dictionary defines software as the instructions that control what a computer does. In the case of an ELT warehousing process, the software is SQL (or python, or R, etc.) that determines how data are changed or processed. Data are the stuff this software processes. This distinction seems obvious enough but is still important to call out explicitly because it is the root of so much confusion. When we write software tests, it is critical that we only test the software.", "Imagine you own an ice cream factory (we can all dream). Your value chain looks something like this:", "Say you decide to test your product, so you go to the store and pick up a gallon of rocky road. To your horror, you find that the ice cream is terribly sour! From this test we know there are a handful of different places things could have gone wrong:", "If a test that tells you that something went wrong but can\u2019t help you determine where in the value chain it happened, the test is worthless. Single responsibility principle tells us that any bit of software should only do one thing, and do that thing well. Our tests are no exception!", "What if instead of only going to the store to test, you set up test points:", "Now if you find a batch of sour milk at the dairy farm, there is no need to go any further. And if you get a container of bad ice cream at the end of the factory line, you know it went sour during processing.", "Auditing your data is checking the milk before anything has been done to it. The only thing an audit does (SRP) is ensure that our source data is arriving as we expect it to.", "Testing your transform/model logic is checking the ice cream after it has been processed. The only thing a test does (SRP) is ensure that given an expected data input, your code behaves as it is expected to.", "The line between audits and tests can be difficult to see at first for a few reasons:", "The easiest way to understand the audit \u2014 test model is to walk through an example.", "Here we have source data from an ecommerce website that looks like this:", "We believe it to be true that:- all records must have a user_idvalue- ip_region can only be east, west, north, or south", "So we write audits that run after every batch load from the source system:", "How your audits are run can happen in a multitude of ways (from an implementation standpoint). What is important is that:- Audits run first before any transforms.- When all audits pass, ELT proceeds as normal.- When audits fail, the failings are recorded in detail, ELT is halted and an alarm is raised.", "Note: Kimball does extensive work around audit levels and recording schemas, these are outside the scope of this text.", "A developer working on an aggregation transform may also write a test that looks for NULL values in the user_id :", "But here is the key difference: the developer\u2019s test exists only to tell them if their code is correct. The audit layer has made a promise that all records will haveuser_id values, so any NULL value during development must mean the code has a bug. The developer can safely write tests to check expected outputs based on a promised input, and when all tests pass the code is ready to ship.", "If a record comes in without a user_id, ELT stops. The belief that all records have a user_id is no longer held to be true. Investigating the user_id from the missing rows via the audit records, it is discovered that all faulty rows were from exactly 2020\u201303\u201302T11:10:53, and were caused by an application bug that has since been patched. It is also noted that no valid rows were created at that timestamp. The new promise is that all rows will have a user_id, with the exception of records created at 2020\u201303\u201302T11:10:53. The audit code is adjusted to reflect what we now believe to be true, and the application code is adjusted to deal with the new reality of the data.", "Audit records can (and often are) annotated to create context for all these complexities. The result is both a rich historical record of the evolution of your data and a highly performant development workflow that optimizes your most valuable asset \u2014 data developer bandwidth.", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F2c3feda3a1e4&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fauditing-vs-testing-in-data-development-2c3feda3a1e4&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fauditing-vs-testing-in-data-development-2c3feda3a1e4&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fauditing-vs-testing-in-data-development-2c3feda3a1e4&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fauditing-vs-testing-in-data-development-2c3feda3a1e4&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----2c3feda3a1e4--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----2c3feda3a1e4--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@ethan.m.knox?source=post_page-----2c3feda3a1e4--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@ethan.m.knox?source=post_page-----2c3feda3a1e4--------------------------------", "anchor_text": "Ethan Knox"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F37554c2b2f4&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fauditing-vs-testing-in-data-development-2c3feda3a1e4&user=Ethan+Knox&userId=37554c2b2f4&source=post_page-37554c2b2f4----2c3feda3a1e4---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F2c3feda3a1e4&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fauditing-vs-testing-in-data-development-2c3feda3a1e4&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F2c3feda3a1e4&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fauditing-vs-testing-in-data-development-2c3feda3a1e4&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@scienceinhd?utm_source=medium&utm_medium=referral", "anchor_text": "Science in HD"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://en.wikipedia.org/wiki/Single_responsibility_principle", "anchor_text": "Single responsibility principle"}, {"url": "https://en.wikipedia.org/wiki/Single_responsibility_principle", "anchor_text": "SRP"}, {"url": "https://en.wikipedia.org/wiki/Single_responsibility_principle", "anchor_text": "SRP"}, {"url": "https://www.kimballgroup.com/2014/03/design-tip-164-built-your-audit-dimension/", "anchor_text": "Kimball"}, {"url": "https://medium.com/tag/data-engineering?source=post_page-----2c3feda3a1e4---------------data_engineering-----------------", "anchor_text": "Data Engineering"}, {"url": "https://medium.com/tag/data-science?source=post_page-----2c3feda3a1e4---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/data-analysis?source=post_page-----2c3feda3a1e4---------------data_analysis-----------------", "anchor_text": "Data Analysis"}, {"url": "https://medium.com/tag/data-modeling?source=post_page-----2c3feda3a1e4---------------data_modeling-----------------", "anchor_text": "Data Modeling"}, {"url": "https://medium.com/tag/big-data-testing?source=post_page-----2c3feda3a1e4---------------big_data_testing-----------------", "anchor_text": "Big Data Testing"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F2c3feda3a1e4&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fauditing-vs-testing-in-data-development-2c3feda3a1e4&user=Ethan+Knox&userId=37554c2b2f4&source=-----2c3feda3a1e4---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F2c3feda3a1e4&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fauditing-vs-testing-in-data-development-2c3feda3a1e4&user=Ethan+Knox&userId=37554c2b2f4&source=-----2c3feda3a1e4---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F2c3feda3a1e4&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fauditing-vs-testing-in-data-development-2c3feda3a1e4&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----2c3feda3a1e4--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F2c3feda3a1e4&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fauditing-vs-testing-in-data-development-2c3feda3a1e4&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----2c3feda3a1e4---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----2c3feda3a1e4--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----2c3feda3a1e4--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----2c3feda3a1e4--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----2c3feda3a1e4--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----2c3feda3a1e4--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----2c3feda3a1e4--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----2c3feda3a1e4--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----2c3feda3a1e4--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@ethan.m.knox?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@ethan.m.knox?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Ethan Knox"}, {"url": "https://medium.com/@ethan.m.knox/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "194 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F37554c2b2f4&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fauditing-vs-testing-in-data-development-2c3feda3a1e4&user=Ethan+Knox&userId=37554c2b2f4&source=post_page-37554c2b2f4--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Ffeddb2f1ea7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fauditing-vs-testing-in-data-development-2c3feda3a1e4&newsletterV3=37554c2b2f4&newsletterV3Id=feddb2f1ea7&user=Ethan+Knox&userId=37554c2b2f4&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}