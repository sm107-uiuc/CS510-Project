{"url": "https://towardsdatascience.com/nlp-approaches-to-data-anonymization-1fb5bde6b929", "time": 1683002685.331479, "path": "towardsdatascience.com/nlp-approaches-to-data-anonymization-1fb5bde6b929/", "webpage": {"metadata": {"title": "Custom NLP Approaches to Data Anonymization | by Omri Mendels | Towards Data Science", "h1": "Custom NLP Approaches to Data Anonymization", "description": "As internet services become ubiquitous, the aspiration for internet privacy continues to grow. In recent years, different laws such like GDPR which standardize the way services collect private\u2026"}, "outgoing_paragraph_urls": [{"url": "https://aka.ms/presidio", "anchor_text": "Presidio", "paragraph_index": 2}, {"url": "https://aka.ms/presidio-demo", "anchor_text": "Check it out", "paragraph_index": 5}, {"url": "https://github.com/microsoft/presidio-research", "anchor_text": "GitHub repo for research", "paragraph_index": 8}, {"url": "https://catalog.ldc.upenn.edu/LDC2013T19", "anchor_text": "OntoNotes", "paragraph_index": 9}, {"url": "https://www.aclweb.org/anthology/W03-0419.pdf", "anchor_text": "CoNLL-2003", "paragraph_index": 9}, {"url": "https://spacy.io/usage/facts-figures#benchmarks", "anchor_text": "which is considered to be the fastest deep learning NLP model", "paragraph_index": 15}, {"url": "https://drive.google.com/file/d/17yVpFA7MmXaQFTe-HDpZuqw9fJlmzg56/view", "anchor_text": "Flair embeddings", "paragraph_index": 16}, {"url": "https://sklearn-crfsuite.readthedocs.io/en/latest/", "anchor_text": "sklearn-crfsuite Python package", "paragraph_index": 17}, {"url": "https://github.com/microsoft/presidio", "anchor_text": "Click here to get started", "paragraph_index": 25}, {"url": "https://www.linkedin.com/in/omrimendels/", "anchor_text": "LinkedIn", "paragraph_index": 26}, {"url": "https://github.com/omri374/", "anchor_text": "GitHub", "paragraph_index": 26}, {"url": "https://www.quora.com/profile/Omri-Mendels-1", "anchor_text": "Quora", "paragraph_index": 26}], "all_paragraphs": ["As internet services become ubiquitous, the aspiration for internet privacy continues to grow. In recent years, different laws such like GDPR which standardize the way services collect private information came into play. This brought the privacy aspects to the attention of every company and increased the investment in handling and anonymizing private data.", "My job at the Commercial Software Engineering (CSE) team in Microsoft is to collaborate with Microsoft\u2019s most strategic customers. Together, we develop new workloads in the fields of AI, data at scale, IoT and more. While engaging with these customers, we\u2019ve realized that the PII (Personally Identifiable Information) issue is a recurring topic and blocker for many companies who wish to extend their set of solutions, either on-premises or in the cloud.", "Therefore, we\u2019ve decided to create Presidio, a production ready open-source service, available for free, for anyone who wishes to address the data privacy problem.", "Presidio allows any user to create standard and transparent processes for anonymizing PII entities on structured and unstructured data. To do so, it exposes a set of predefined PII recognizers (for common entities like names, credit card numbers and phone numbers), and tools for extending it with new logic for identifying more specific PII entities. In this blog post, we\u2019ll focus on how Natural Language Processing could be leveraged to identify the different types of private entities.", "Presidio leverages a set of recognizers, each capable of detecting one or more PII entities in one or more languages. The process, described in figure 1, is generally comprised of 8 different steps :", "The following animation in figure 2 illustrates the same process on one specific example. Notice that when we change the context from \u201cphone number\u201d to \u201cpool card number\u201d the confidence of the phone number recognizer decreases. This is a screenshot of the Presidio Demo. Check it out.", "PII recognizers are required to detect different types of entities in free text. Different NLP approaches come to mind for such task:", "In the next section, we will focus on the work we did around improving the Named Entity Recognition rates for person names, locations and organizations.", "To improve our detection rates on these three entities, we experimented with different models. The following section describes the datasets used, different models evaluated and results. The code for running this process can be found on our GitHub repo for research.", "While some labeled datasets are available, we wanted to increase the coverage of names, organizations, and locations. Thus we started with a labeled dataset (e.g., OntoNotes or CoNLL-2003), and processed it to extract templates. These examples were later used to generate new sentences with a wider variety of entity values (names, organizations and locations) than the original dataset.", "For example, from the sentence \u201cThank you George!\u201d, where George was manually labeled as person, we extracted the following template: \u201cThank you [PERSON]!\u201d. Figure 3 provides an additional example:", "We used a fake PII dataset and multiple fake PII generators to sample entities and create new sentences. These sentences were automatically labeled during the generation process, so training new NER models was easily applicable.", "However, this process required us to do some pre-processing of the dataset and come up with creative solutions to different problems. To name a few:", "From 8,000 unique templates, we extracted 80,000 different labeled sentences. We also obtained a cleaner dataset than the previous one, as many unlabeled entities were handled during this process. The new dataset was split to train/test/validation sets, with no samples from the same template appearing in more than one set. In addition, we made 10% of the samples lower-case, as this generally represents the ratio of lowercase texts we might meet when the model is deployed. To the best of our knowledge, this the biggest PII dataset available to this day.", "Different approaches for modeling were evaluated. Specifically, we looked at Conditional Random Fields, spaCy based models and Flair based models.", "spaCy: spaCy is a production grade NLP library for tokenization, part-of-speech tagging, entity extraction, text classification and more. It contains a convolutional neural network model which is considered to be the fastest deep learning NLP model. While other models have higher accuracy on public datasets, it\u2019s likely that they suffer from longer training and inference times. spaCy also provides fast tokenization and lemmatization, which is used in the context analysis module in Presidio. We evaluated different flavors of spaCy: First, we looked at results from the pretrained spaCy models (both 2.1.0 and 2.2.0), Then, we looked at fine-tuning a pretrained spaCy model, and finally, at training a spaCy model from scratch while leveraging pretrained word embeddings (FastText).", "Flair: Flair is a deep learning NLP toolkit with promising results on public datasets. It is built on top of PyTorch, and features both special embedding techniques (called Flair embeddings) and prediction models. Furthermore, it provides easy integration with other embedding models (like BERT, ELMo) and stacking of embeddings from different models and sources. We evaluated two different Flair based models: A Flair model with BERT embeddings, and a Flair model with a stacking of Flair embeddings and GloVe embeddings.", "Conditional Random Fields (CRF): CRFs are a class of methods for sequence tagging. These discriminative graphical models learn the dependencies between predictions and are a natural fit for Named Entity Recognition tasks. Prior to the introduction of recurrent and convolutional neural networks, CRFs achieved state of the art performance on NER tasks on public datasets. They are much faster in training and prediction than neural-network-based models and provide relatively interpretable results. We evaluated only the vanilla CRF model using L-BGFS optimization, using the sklearn-crfsuite Python package.", "To conclude, here are the models we experimented with:", "4. Fine-tune an existing trained model:", "We focused on F2 (recall is more important than precision) of the PII/no-PII binary decision. We also looked at specific classes F2 and computational performance. Lastly, interpretability was an additional factor to consider.", "As can be seen in figure 4, all models achieved decent results, but Flair based models were superior.", "Although Flair models achieve higher F2 scores, they are also much slower to train and predict. Table 1 shows approximated training and inference time using the various methods evaluated. The analysis was made on one GPU machine[1].", "[1] NC6 instance on Azure: 6 vCPU, 56GiB Memory, one half NVIDIA Tesla K80, GPU memory 12GiB", "In this work, we evaluated various models for better detection rates in Presidio. We considered the trade-off between detection rates and computational performance, which is crucial in many use cases. For the datasets we evaluated, we see that there isn\u2019t a practical reason to replace the current spaCy model we use in Presidio. It is, however, possible to apply the data augmentation framework and the different models evaluated to new data, and tailor Presidio towards more domain-specific datasets. We also see that by having a CRF model instead of spaCy, we can potentially improve Presidio\u2019s run time. If performance is not an issue, for example for offline jobs, we should consider using a Flair based approach, potentially with Flair embeddings + GloVe, to improve the detection rates in Presidio.", "Presidio is fully open source and available for free, for anyone who wishes to address the data privacy problem. We also welcome contributors, pull requests or any kind of feedback. Click here to get started.", "Omri Mendels is a Senior Data Scientist @ Microsoft. You can connect with him on LinkedIn, GitHub or Quora.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Principal Data Scientist at Microsoft. Loves data, coding and bringing ML to life"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F1fb5bde6b929&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fnlp-approaches-to-data-anonymization-1fb5bde6b929&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fnlp-approaches-to-data-anonymization-1fb5bde6b929&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fnlp-approaches-to-data-anonymization-1fb5bde6b929&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fnlp-approaches-to-data-anonymization-1fb5bde6b929&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----1fb5bde6b929--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----1fb5bde6b929--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://omri-mendels.medium.com/?source=post_page-----1fb5bde6b929--------------------------------", "anchor_text": ""}, {"url": "https://omri-mendels.medium.com/?source=post_page-----1fb5bde6b929--------------------------------", "anchor_text": "Omri Mendels"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F2b84200044b9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fnlp-approaches-to-data-anonymization-1fb5bde6b929&user=Omri+Mendels&userId=2b84200044b9&source=post_page-2b84200044b9----1fb5bde6b929---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F1fb5bde6b929&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fnlp-approaches-to-data-anonymization-1fb5bde6b929&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F1fb5bde6b929&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fnlp-approaches-to-data-anonymization-1fb5bde6b929&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://aka.ms/presidio", "anchor_text": "Presidio"}, {"url": "https://aka.ms/presidio-demo", "anchor_text": "Check it out"}, {"url": "https://en.wikipedia.org/wiki/Checksum", "anchor_text": "checksum"}, {"url": "https://github.com/microsoft/presidio-research", "anchor_text": "GitHub repo for research"}, {"url": "https://catalog.ldc.upenn.edu/LDC2013T19", "anchor_text": "OntoNotes"}, {"url": "https://www.aclweb.org/anthology/W03-0419.pdf", "anchor_text": "CoNLL-2003"}, {"url": "https://spacy.io/usage/facts-figures#benchmarks", "anchor_text": "which is considered to be the fastest deep learning NLP model"}, {"url": "https://drive.google.com/file/d/17yVpFA7MmXaQFTe-HDpZuqw9fJlmzg56/view", "anchor_text": "Flair embeddings"}, {"url": "https://sklearn-crfsuite.readthedocs.io/en/latest/", "anchor_text": "sklearn-crfsuite Python package"}, {"url": "https://explosion.ai/blog/spacy-v2-2#models", "anchor_text": "better support for lower-case entities"}, {"url": "https://github.com/microsoft/presidio", "anchor_text": "Click here to get started"}, {"url": "https://aka.ms/presidio", "anchor_text": "Presidio\u2019s GitHub repo"}, {"url": "https://microsoft.github.io/presidio/", "anchor_text": "General Presidio Documentation"}, {"url": "https://github.com/microsoft/presidio-research", "anchor_text": "Research, dataset creation and modeling code"}, {"url": "https://spacy.io", "anchor_text": "spaCy"}, {"url": "https://github.com/flairnlp/flair", "anchor_text": "Flair"}, {"url": "https://www.fakenamegenerator.com/", "anchor_text": "Fake Name Generator"}, {"url": "https://github.com/joke2k/faker", "anchor_text": "Faker"}, {"url": "https://www.linkedin.com/in/omrimendels/", "anchor_text": "LinkedIn"}, {"url": "https://github.com/omri374/", "anchor_text": "GitHub"}, {"url": "https://www.quora.com/profile/Omri-Mendels-1", "anchor_text": "Quora"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----1fb5bde6b929---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/tag/naturallanguageprocessing?source=post_page-----1fb5bde6b929---------------naturallanguageprocessing-----------------", "anchor_text": "Naturallanguageprocessing"}, {"url": "https://medium.com/tag/pii?source=post_page-----1fb5bde6b929---------------pii-----------------", "anchor_text": "Pii"}, {"url": "https://medium.com/tag/privacy?source=post_page-----1fb5bde6b929---------------privacy-----------------", "anchor_text": "Privacy"}, {"url": "https://medium.com/tag/nlp?source=post_page-----1fb5bde6b929---------------nlp-----------------", "anchor_text": "NLP"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F1fb5bde6b929&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fnlp-approaches-to-data-anonymization-1fb5bde6b929&user=Omri+Mendels&userId=2b84200044b9&source=-----1fb5bde6b929---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F1fb5bde6b929&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fnlp-approaches-to-data-anonymization-1fb5bde6b929&user=Omri+Mendels&userId=2b84200044b9&source=-----1fb5bde6b929---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F1fb5bde6b929&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fnlp-approaches-to-data-anonymization-1fb5bde6b929&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----1fb5bde6b929--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F1fb5bde6b929&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fnlp-approaches-to-data-anonymization-1fb5bde6b929&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----1fb5bde6b929---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----1fb5bde6b929--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----1fb5bde6b929--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----1fb5bde6b929--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----1fb5bde6b929--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----1fb5bde6b929--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----1fb5bde6b929--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----1fb5bde6b929--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----1fb5bde6b929--------------------------------", "anchor_text": ""}, {"url": "https://omri-mendels.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://omri-mendels.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Omri Mendels"}, {"url": "https://omri-mendels.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "159 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F2b84200044b9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fnlp-approaches-to-data-anonymization-1fb5bde6b929&user=Omri+Mendels&userId=2b84200044b9&source=post_page-2b84200044b9--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fc7e20b9a4ba1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fnlp-approaches-to-data-anonymization-1fb5bde6b929&newsletterV3=2b84200044b9&newsletterV3Id=c7e20b9a4ba1&user=Omri+Mendels&userId=2b84200044b9&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}