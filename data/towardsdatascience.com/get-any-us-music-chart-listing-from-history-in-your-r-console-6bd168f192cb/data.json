{"url": "https://towardsdatascience.com/get-any-us-music-chart-listing-from-history-in-your-r-console-6bd168f192cb", "time": 1682996155.280732, "path": "towardsdatascience.com/get-any-us-music-chart-listing-from-history-in-your-r-console-6bd168f192cb/", "webpage": {"metadata": {"title": "Get any US music chart listing from history in your R console | by Keith McNulty | Towards Data Science", "h1": "Get any US music chart listing from history in your R console", "description": "We are lucky enough to live in an age where we can get pretty much any factoid we want. If we want to find out the Top Billboard 200 albums from 1980, we just need to go to the official Billboard 200\u2026"}, "outgoing_paragraph_urls": [{"url": "https://www.billboard.com/charts/billboard-200", "anchor_text": "Billboard 200 website", "paragraph_index": 0}, {"url": "https://www.billboard.com/charts/hot-100", "anchor_text": "https://www.billboard.com/charts/hot-100", "paragraph_index": 5}, {"url": "https://www.billboard.com/charts/billboard-200/1983-03-22", "anchor_text": "https://www.billboard.com/charts/billboard-200/1983-03-22", "paragraph_index": 15}, {"url": "https://github.com/keithmcnulty/scraping/", "anchor_text": "here", "paragraph_index": 18}, {"url": "https://www.linkedin.com/in/keith-mcnulty/", "anchor_text": "LinkedIn", "paragraph_index": 19}, {"url": "https://twitter.com/dr_keithmcnulty", "anchor_text": "Twitter", "paragraph_index": 19}, {"url": "https://blog.rstudio.com/2014/11/24/rvest-easy-web-scraping-with-r/", "anchor_text": "here", "paragraph_index": 20}, {"url": "https://blog.rstudio.com/2015/04/21/xml2/", "anchor_text": "here", "paragraph_index": 20}, {"url": "http://keithmcnulty.org", "anchor_text": "keithmcnulty.org", "paragraph_index": 22}], "all_paragraphs": ["We are lucky enough to live in an age where we can get pretty much any factoid we want. If we want to find out the Top Billboard 200 albums from 1980, we just need to go to the official Billboard 200 website, enter the date, and up the list comes in a nice display with album art and all that nice stuff.", "But often we don\u2019t care about the nice stuff, and we don\u2019t want to visit a website and go through several clicks to get the info we need. Wouldn\u2019t it be great if we could just get it in our console with a simple function or command.", "Well, if the website is well structured and accessing data from a structured dataset, then in all likelihood you can scrape it, meaning that you can extract the precise information you want into a vector or table, allowing you to conduct analysis or do whatever.", "In this article we are going to review elementary web scraping in R using the packages rvest and xml2. These packages are remarkably easy to use. By the end of the article we will have created a function called get_charts() which will take a date, a chart version and a vector of ranked positions as its arguments and instantly return the chart entries in those positions on that date. I hope this will encourage you to try it on countless other sources of web data.", "For this tutorial you will need to have installed dplyr, xml2 and rvest packages. You will also need to be using the Google Chrome browser.", "We will start by working out how to scrape this week\u2019s Billboard Hot 100 to get a ranked list of artists and titles. If you take a look at the Hot 100 page at https://www.billboard.com/charts/hot-100 you can observe its overall structure. It has various banners and advertising and there\u2019s quite a lot going on, but you can immediately see that there is a Hot 100 list on the page, so we know that the information we want is on this page and we will need to navigate the underlying code to find it.", "The packages rvest and xml2 in R are designed to make it easy to extract and analyse deeply nested HTML and XML code that sits behind most websites today. HTML and XML are different \u2014 I won\u2019t go into the details of that here \u2014 but you\u2019ll usually need rvest to dig down and find the specific HTML nodes that you need and xml2 to pull out the XML attributes that contain the specific data you want.", "After we load our packages, the first thing we will want to do is read the html from the web page, so we have a starting point for digging to find the nodes and attributes we want.", "Now we have a list object chart_page which contains two elements, one for the head of the webpage and the other for the body of the webpage.", "We now need to inspect the website using Chrome. Right click on the website and choose \u2018inspect\u2019. This will bring up a panel showing you all the nested HTML and XML code. As you roll your mouse over this code you will see that the part of the page that it refers to is highlighted. For example, you can see here that the section we are interested in highlights when I mouse over the highlighted <div class = \"container chart-container ...\"> which makes sense.", "If you continue to expand this section and follow this method, you will eventually cone to the specific HTML and XML code which populates the chart list. If you look close enough you will see that the chart items all have the format <div class='chart-list-item' .... We can use rvest's html_nodes() function to dive into the body of the page and the use xml2\u2019s xml_find_all() function to grab all <div> nodes that have chart-list-item as their class.", "This gives us a nested numbered list which we can click and browse through, like so:", "Now we notice that the actual XML class the contains the data we are interested in actually has a space after chart-list-item, so if we rewrite our previous command to have an extra space, this should parse out exactly the nodes that have the data that we want. Then we can use xml2\u2019s xml_attr() function to pull out the rank, artist and title into vectors.", "And there we have it, a nice list of exactly what we want, and good to know that there are 100 rows as expected:", "So that was a lot of investigative work, and digging into HTML and XML can be annoying. There are Chrome plugins like SelectorGadget that can help with this, but I find them unpredictable and prefer to just investigate the underying code like I did above.", "Now that we know where the data sits, however, we can now make this a lot more powerful. If you play with the billboard.com website, you\u2019ll notice that you can get to a specific chart on any historic date by simply editing the URL. So for example if you wanted to see the Billboard 200 as of 22nd March 1983 you just go to https://www.billboard.com/charts/billboard-200/1983-03-22.", "So, this allows us to take the code above and easily generalize it by creating a function that accepts the date, chart type and positions we are interested in. Let\u2019s write that function with some default values for date (today), chart type (default to Hot 100), and positions(top 10).", "OK, let\u2019s test our function. What were the Top 20 singles on 22nd March 1983?", "What I love about rvest and xml2 is how simple and powerful they are. Look how lean the content of the function is \u2014 it didn\u2019t take much to create something quite powerful. Give it a try with some other sources of web data and feel free to add to the Github repo here if you create any other cool scraping functions.", "Originally I was a Pure Mathematician, then I became a Psychometrician and a Data Scientist. I am passionate about applying the rigor of all those disciplines to complex people questions. I\u2019m also a coding geek and a massive fan of Japanese RPGs. Find me on LinkedIn or on Twitter.", "You can find out more about rvest here and xml2 here.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Expert and Author in Applied Mathematics, Data Science, Statistics. Also writes History, Science, Culture. Find me on Twitter or keithmcnulty.org"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F6bd168f192cb&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fget-any-us-music-chart-listing-from-history-in-your-r-console-6bd168f192cb&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fget-any-us-music-chart-listing-from-history-in-your-r-console-6bd168f192cb&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fget-any-us-music-chart-listing-from-history-in-your-r-console-6bd168f192cb&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fget-any-us-music-chart-listing-from-history-in-your-r-console-6bd168f192cb&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----6bd168f192cb--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----6bd168f192cb--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://keith-mcnulty.medium.com/?source=post_page-----6bd168f192cb--------------------------------", "anchor_text": ""}, {"url": "https://keith-mcnulty.medium.com/?source=post_page-----6bd168f192cb--------------------------------", "anchor_text": "Keith McNulty"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fa859aab532a0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fget-any-us-music-chart-listing-from-history-in-your-r-console-6bd168f192cb&user=Keith+McNulty&userId=a859aab532a0&source=post_page-a859aab532a0----6bd168f192cb---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F6bd168f192cb&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fget-any-us-music-chart-listing-from-history-in-your-r-console-6bd168f192cb&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F6bd168f192cb&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fget-any-us-music-chart-listing-from-history-in-your-r-console-6bd168f192cb&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://www.billboard.com/charts/billboard-200", "anchor_text": "Billboard 200 website"}, {"url": "https://www.billboard.com/charts/hot-100", "anchor_text": "https://www.billboard.com/charts/hot-100"}, {"url": "http://twitter.com/class", "anchor_text": "@class"}, {"url": "http://twitter.com/class", "anchor_text": "@class"}, {"url": "https://www.billboard.com/charts/billboard-200/1983-03-22", "anchor_text": "https://www.billboard.com/charts/billboard-200/1983-03-22"}, {"url": "https://www.billboard.com/charts/", "anchor_text": "https://www.billboard.com/charts/"}, {"url": "http://twitter.com/class", "anchor_text": "@class"}, {"url": "https://github.com/keithmcnulty/scraping/", "anchor_text": "here"}, {"url": "https://www.linkedin.com/in/keith-mcnulty/", "anchor_text": "LinkedIn"}, {"url": "https://twitter.com/dr_keithmcnulty", "anchor_text": "Twitter"}, {"url": "https://blog.rstudio.com/2014/11/24/rvest-easy-web-scraping-with-r/", "anchor_text": "here"}, {"url": "https://blog.rstudio.com/2015/04/21/xml2/", "anchor_text": "here"}, {"url": "https://medium.com/tag/data-science?source=post_page-----6bd168f192cb---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/music?source=post_page-----6bd168f192cb---------------music-----------------", "anchor_text": "Music"}, {"url": "https://medium.com/tag/programming?source=post_page-----6bd168f192cb---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/tag/analytics?source=post_page-----6bd168f192cb---------------analytics-----------------", "anchor_text": "Analytics"}, {"url": "https://medium.com/tag/social-media?source=post_page-----6bd168f192cb---------------social_media-----------------", "anchor_text": "Social Media"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F6bd168f192cb&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fget-any-us-music-chart-listing-from-history-in-your-r-console-6bd168f192cb&user=Keith+McNulty&userId=a859aab532a0&source=-----6bd168f192cb---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F6bd168f192cb&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fget-any-us-music-chart-listing-from-history-in-your-r-console-6bd168f192cb&user=Keith+McNulty&userId=a859aab532a0&source=-----6bd168f192cb---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F6bd168f192cb&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fget-any-us-music-chart-listing-from-history-in-your-r-console-6bd168f192cb&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----6bd168f192cb--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F6bd168f192cb&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fget-any-us-music-chart-listing-from-history-in-your-r-console-6bd168f192cb&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----6bd168f192cb---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----6bd168f192cb--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----6bd168f192cb--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----6bd168f192cb--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----6bd168f192cb--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----6bd168f192cb--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----6bd168f192cb--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----6bd168f192cb--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----6bd168f192cb--------------------------------", "anchor_text": ""}, {"url": "https://keith-mcnulty.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://keith-mcnulty.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Keith McNulty"}, {"url": "https://keith-mcnulty.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "11K Followers"}, {"url": "http://keithmcnulty.org", "anchor_text": "keithmcnulty.org"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fa859aab532a0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fget-any-us-music-chart-listing-from-history-in-your-r-console-6bd168f192cb&user=Keith+McNulty&userId=a859aab532a0&source=post_page-a859aab532a0--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F7991b3dbcee9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fget-any-us-music-chart-listing-from-history-in-your-r-console-6bd168f192cb&newsletterV3=a859aab532a0&newsletterV3Id=7991b3dbcee9&user=Keith+McNulty&userId=a859aab532a0&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://peopleanalytics-regression-book.org/", "anchor_text": "Handbook of Regression Modeling in People Analytics2021"}, {"url": "https://ona-book.org", "anchor_text": "Handbook of Graphs and Networks in People Analytics2022"}, {"url": "https://medium.com/@keith-mcnulty/books?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "See all (2)"}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}