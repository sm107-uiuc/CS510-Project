{"url": "https://towardsdatascience.com/using-geopandas-for-spatial-visualization-21e78984dc37", "time": 1683012533.595823, "path": "towardsdatascience.com/using-geopandas-for-spatial-visualization-21e78984dc37/", "webpage": {"metadata": {"title": "Using GeoPandas for Spatial Visualization | by Paul Torres | Towards Data Science", "h1": "Using GeoPandas for Spatial Visualization", "description": "Recently, I was working on a project where I was trying to build a model that could predict housing prices in King County, Washington \u2014 the area that surrounds Seattle. After looking at the features\u2026"}, "outgoing_paragraph_urls": [{"url": "https://geopandas.org/", "anchor_text": "GeoPandas", "paragraph_index": 2}, {"url": "http://pandas.pydata.org/", "anchor_text": "pandas", "paragraph_index": 3}, {"url": "https://shapely.readthedocs.io/", "anchor_text": "shapely", "paragraph_index": 3}, {"url": "https://fiona.readthedocs.io/", "anchor_text": "fiona", "paragraph_index": 3}, {"url": "https://pypi.python.org/pypi/descartes", "anchor_text": "descartes", "paragraph_index": 3}, {"url": "http://matplotlib.org/", "anchor_text": "matplotlib", "paragraph_index": 3}, {"url": "https://support.esri.com/en/technical-article/000011516", "anchor_text": "here", "paragraph_index": 6}, {"url": "https://www.kingcounty.gov/services/gis/GISData.aspx", "anchor_text": "website", "paragraph_index": 10}, {"url": "https://www.linkedin.com/in/pntorres/", "anchor_text": "LinkedIn", "paragraph_index": 28}, {"url": "https://github.com/ptorres001", "anchor_text": "Github", "paragraph_index": 28}], "all_paragraphs": ["Recently, I was working on a project where I was trying to build a model that could predict housing prices in King County, Washington \u2014 the area that surrounds Seattle. After looking at the features, I wanted a way to determine the houses\u2019 worth based on location.", "The dataset included latitude and longitude and it was easy to google them to take a look at the houses, their neighborhoods, their distance from the water, etc. But with over 17000 observations, that was a fool\u2019s task. I had to find an easier way.", "I had used Geographic Information Systems (GIS) only once before but not in Python. So I did what I do best: I googled, and ran into this amazing package called GeoPandas. I am going to let the GeoPandas team sum up what they do because they can say much better than I can.", "GeoPandas is an open source project to make working with geospatial data in python easier. GeoPandas extends the datatypes used by pandas to allow spatial operations on geometric types. Geometric operations are performed by shapely. GeoPandas further depends on fiona for file access and descartes and matplotlib for plotting. \u2014 Description from GeoPandas Website (2020)", "This blew my mind, and what I wanted was really just the most basic of the features. I am going to show you how to run this code and do what I did \u2014 plotting accurate points on a map.", "You are going to need several packages and some files in addition to the basic pandas and matplotlib. They include:", "More information about shapefiles can be found here, but the long and short of it is that these aren\u2019t normal images. They are a vector data storage format that has information linking to locations \u2014 coordinates and the rest.", "First I imported the basic packages that I needed and then the new packages:", "The Point and Polygon features are what help me match my data to the map I make.", "Next, I load in my data. This is basic pandas but for those that are new, everything in quotations is the name of the file I had to access the housing records.", "With all of the packages imported and the data ready to go, I wanted to take a look at the map I was going to be plotting. I did this by finding a shape file made by the King County government website. They have done all the hard work of surveying and cataloging the land \u2014 it would be rude to not use their freely offered services. Loading in the shape file is easy and comparable to loading in a csv file with pandas.", "You can open this up if you want to take a look at the data. The King County shape file was just a dataframe of locations matched with their school districts, geometry coordinates, and area. But the best part is when we plot it and yes, we have to plot it. This isn\u2019t an image you can just call \u2014 it will have the coordinates built in so our data can be placed down like a point on a 5th grade (x,y) graph.", "Using the below code (notice how I edited it the same way I would edit a graph):", "Before we start adding our housing data we should look at utilizing the shape file to the fullest. Let\u2019s take a look at the file.", "As you can see, the county is divided on school districts \u2014 each with a shape used as boundaries. We will now try to plot the shape file and annotate the districts using the data provided like so:", "The lists \u2014 left, right, center \u2014 are from trial and error with the placement of the district names. Some overlapped or needed to be manipulated so that they did not stray too far from their actual district.", "I\u2019ve changed the color map to gist_earth for clarity. Next, I iterated through each row using the entry in the NAME series, and placing the title at a point that was definitely in the polygon. I aligned the names based on the lists I had made earlier. And this was out output:", "Each of the regions signifies a school district in King County. This matches the data I found about the twenty school districts in the county. I never really thought about the size and shape of a county, so I googled it just to be sure.", "It seemed like the Google Maps image was the perfect hole for my puzzle piece. From here, it was just a matter of formatting my data to fit the shape file. I did that by initiating my coordinate system and creating applicable points using the latitude and longitude of my houses.", "If you were to look at an entry in geometry, you only get back that they are shapely objects. They need to be applied to our original dataframe. Below, you can see as I make a brand new dataframe that has the coordinate system built in, the old dataframe, and the addition of the points created by the intersection of the Latitude and Longitude of the houses.", "That was the last step before we can plot the houses. Now, we put it all together.", "These steps were done for each of the graphs.", "This is a great product but our goal is to learn something from this visualization. While this gives some information, like the outliers far to the eastern part of the county, it doesn\u2019t give much else. We have to play with parameters. Let\u2019s try splitting the data by price. These are the houses that are listed for less than $750,000.", "Now we graph the houses greater than or equal to $750,000.", "There is a big difference in terms of both location and quantity. But that is not the end, we can also layer them one on top of the other. We will be doing the expensive on top of the cheap because it is scarcer.", "The picture painted by this map is interesting. There is a plethora of housing in King County that falls below the bar we\u2019ve set. Most of the houses on the lower end of the price scale falls more inland than the more expensive classes.", "If you zoom in, the more expensive houses dot the waterside. They also are more centrally located around the Seattle city center. There are several physical outliers but the trend is clear.", "Overall, the visualization has done its job. We have made several determinations from the houses on the map. Pricier houses are collected around the downtown area and spread around Puget Sound. They are also a minority in the data, which could be telling for predicting housing prices. The houses priced on the cheaper side are much more numerous and have a varied location. This will be useful for further EDA.", "If you want to connect to talk more about this technique, you can find me on LinkedIn. If you would like to check out the code, take a look at my Github.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Data Scientist with a Physicist\u2019s heart. Looking through numbers to tell a story that people will care about."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F21e78984dc37&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-geopandas-for-spatial-visualization-21e78984dc37&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-geopandas-for-spatial-visualization-21e78984dc37&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-geopandas-for-spatial-visualization-21e78984dc37&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-geopandas-for-spatial-visualization-21e78984dc37&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----21e78984dc37--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----21e78984dc37--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://ptorres001.medium.com/?source=post_page-----21e78984dc37--------------------------------", "anchor_text": ""}, {"url": "https://ptorres001.medium.com/?source=post_page-----21e78984dc37--------------------------------", "anchor_text": "Paul Torres"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fbaf3066511a3&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-geopandas-for-spatial-visualization-21e78984dc37&user=Paul+Torres&userId=baf3066511a3&source=post_page-baf3066511a3----21e78984dc37---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F21e78984dc37&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-geopandas-for-spatial-visualization-21e78984dc37&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F21e78984dc37&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-geopandas-for-spatial-visualization-21e78984dc37&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://www.freepik.com/free-vector/polygonal-panda_774488.htm", "anchor_text": "vilmosv"}, {"url": "https://www.freepik.com/", "anchor_text": "Freepik"}, {"url": "https://geopandas.org/", "anchor_text": "GeoPandas"}, {"url": "http://pandas.pydata.org/", "anchor_text": "pandas"}, {"url": "https://shapely.readthedocs.io/", "anchor_text": "shapely"}, {"url": "https://fiona.readthedocs.io/", "anchor_text": "fiona"}, {"url": "https://pypi.python.org/pypi/descartes", "anchor_text": "descartes"}, {"url": "http://matplotlib.org/", "anchor_text": "matplotlib"}, {"url": "https://pypi.org/project/Shapely/", "anchor_text": "shapely"}, {"url": "https://pypi.org/project/descartes/", "anchor_text": "descartes"}, {"url": "https://support.esri.com/en/technical-article/000011516", "anchor_text": "here"}, {"url": "https://www.kingcounty.gov/services/gis/GISData.aspx", "anchor_text": "website"}, {"url": "https://www.linkedin.com/in/pntorres/", "anchor_text": "LinkedIn"}, {"url": "https://github.com/ptorres001", "anchor_text": "Github"}, {"url": "https://www.kaggle.com/harlfoxem/housesalesprediction", "anchor_text": "here"}, {"url": "https://www.kingcounty.gov/services/gis/GISData.aspx", "anchor_text": "here"}, {"url": "https://geopandas.org/", "anchor_text": "Geopandas"}, {"url": "https://pypi.org/project/Shapely/", "anchor_text": "Shapely"}, {"url": "https://pypi.org/project/descartes/", "anchor_text": "Descartes"}, {"url": "https://pypi.org/project/Fiona/", "anchor_text": "Fiona"}, {"url": "https://medium.com/tag/geopandas?source=post_page-----21e78984dc37---------------geopandas-----------------", "anchor_text": "Geopandas"}, {"url": "https://medium.com/tag/python?source=post_page-----21e78984dc37---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/spatial-analysis?source=post_page-----21e78984dc37---------------spatial_analysis-----------------", "anchor_text": "Spatial Analysis"}, {"url": "https://medium.com/tag/visualization?source=post_page-----21e78984dc37---------------visualization-----------------", "anchor_text": "Visualization"}, {"url": "https://medium.com/tag/data-science?source=post_page-----21e78984dc37---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F21e78984dc37&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-geopandas-for-spatial-visualization-21e78984dc37&user=Paul+Torres&userId=baf3066511a3&source=-----21e78984dc37---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F21e78984dc37&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-geopandas-for-spatial-visualization-21e78984dc37&user=Paul+Torres&userId=baf3066511a3&source=-----21e78984dc37---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F21e78984dc37&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-geopandas-for-spatial-visualization-21e78984dc37&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----21e78984dc37--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F21e78984dc37&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-geopandas-for-spatial-visualization-21e78984dc37&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----21e78984dc37---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----21e78984dc37--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----21e78984dc37--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----21e78984dc37--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----21e78984dc37--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----21e78984dc37--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----21e78984dc37--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----21e78984dc37--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----21e78984dc37--------------------------------", "anchor_text": ""}, {"url": "https://ptorres001.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://ptorres001.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Paul Torres"}, {"url": "https://ptorres001.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "228 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fbaf3066511a3&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-geopandas-for-spatial-visualization-21e78984dc37&user=Paul+Torres&userId=baf3066511a3&source=post_page-baf3066511a3--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fe0edd0d7aaad&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-geopandas-for-spatial-visualization-21e78984dc37&newsletterV3=baf3066511a3&newsletterV3Id=e0edd0d7aaad&user=Paul+Torres&userId=baf3066511a3&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}