{"url": "https://towardsdatascience.com/the-consequences-of-violating-linear-regression-assumptions-4f0513dd3160", "time": 1683013499.955982, "path": "towardsdatascience.com/the-consequences-of-violating-linear-regression-assumptions-4f0513dd3160/", "webpage": {"metadata": {"title": "The Consequences of Violating Linear Regression Assumptions | by Hajime Alabanza | Towards Data Science", "h1": "The Consequences of Violating Linear Regression Assumptions", "description": "Recently, a friend learning linear regression asked me what happens when assumptions like multicollinearity are violated. Despite being a former statistics student, I could only give him general\u2026"}, "outgoing_paragraph_urls": [{"url": "https://365datascience.com/ols-assumptions/", "anchor_text": "assumptions", "paragraph_index": 0}, {"url": "https://github.com/hajimealabanza/Assumptions_Simulation/blob/master/simulation.R", "anchor_text": "here", "paragraph_index": 3}, {"url": "https://www.statisticshowto.com/variance-inflation-factor/", "anchor_text": "variance inflation factor", "paragraph_index": 4}, {"url": "https://www.statisticshowto.com/mean-squared-error/", "anchor_text": "Mean squared error", "paragraph_index": 4}], "all_paragraphs": ["Recently, a friend learning linear regression asked me what happens when assumptions like multicollinearity are violated. Despite being a former statistics student, I could only give him general answers like \u201cyou won\u2019t be able to trust the estimates of your model.\u201d Unsatisfied with my response, I decided to create a real-world example, via simulation, to show what can happen to prediction and inference when certain assumptions are violated.", "Suppose researchers are interested in understanding what drives the price of a house. Let\u2019s pretend that housing prices are determined by just two variables: the size and age of the house. While age holds a negative, linear relationship with price, the size of the house has a positive, quadratic (non-linear) relationship with price. Mathematically, we can model this relationship like so:", "where Price is the price of a house in thousands of dollars, sqft is the square footage of a house in thousands, and age_years the age of the house in years. The residuals e are normally distributed with mean 0 and variance \u03c3\u2091\u00b2. Let\u2019s call this the true model since it accounts for everything that drives housing prices (excluding residuals). Since researchers don\u2019t have a crystal ball telling them what the true model is, they test out a few linear regression models. Here\u2019s what they came up with, in no particular order:", "The researchers were smart and nailed the true model (Model 1), but the other models (Models 2, 3, and 4) violate certain OLS assumptions. Lastly, let\u2019s say that there were 10K researchers who conducted the same study. Each took 50 independent observations from the population of houses and fit the above models to the data. By examining the results of these 10K models, we can see how these different models behave. The table below shows key parameters used to simulate the data (the full code can be found here):", "The researchers were very tired when putting together Model 2 and didn\u2019t realize that they included two measures for the age of the house: age_years and age_months. A good way to check for multicollinearity is by looking at the variance inflation factor (VIF). As a rule of thumb, a VIF above 5 indicates multicollinearity, which is the case for both age_years and age_months. Let\u2019s start off by comparing the predictive ability of Model 2 to Model 1 (true model). Mean squared error (MSE) is a good metric for prediction and tells you how close a model\u2019s predictions are to the actual values. The plot below shows the distribution of MSE collected from all 10K researchers.", "MSE between both models are very similar meaning that multicollinearity violations do not really impact prediction. How about inference or, in other words, the model\u2019s ability to explain? It turns out that the coefficient estimates for age_years, \u03b2\u2083, are quite different between Model 2 and Model 1:", "On average, the coefficient estimates are unbiased at -7 for both models. However, it\u2019s clear that there\u2019s much more variation from sample to sample for Model 2. What does this mean? It means that multicollinearity weakens the statistical power of Model 2. For example, in Model 2, age_years is found to be statistically significant in only 54% of the 10K models. This is problematic because almost half of researchers would believe age_years to not be statistically significant. On the other hand, in Model 1, age_years is statistically significant in all 10K models.", "Recall that the true relationship between Price and sqft is non-linear. Model 1 addresses this violation, but Model 3 does not since researchers excluded the second-order term for sqft. One tell tale sign of this violation is if plotting fitted values against residuals produces a distinctive pattern. As can be seen below, Model 3 produces a parabolic shape since the linear function does not adequately capture the relationship between Price and age_years:", "Now that we confirmed that linearity is violated, let\u2019s compare predictions across all 10K models by looking at the MSE:", "The average MSE for Model 1 is 84 compared to 113 for Model 3. To make the interpretation clearer, we can take the root mean squared error (RMSE) \u2014 the square root of MSE \u2014 to say that housing price predictions for Model 1 are on average $9,167 (\u221a84*1000) away from true prices while they are $10,614 away for Model 3. Lastly, let\u2019s dive into inference and compare the coefficient estimates for age_years between Model 1and Model 3. What you see in the plot below are the distribution of age_years coefficient estimates obtained from the 10k researchers:", "Although both models obtain the correct result of -7 on average, Model 3 is less precise since it takes on a slightly larger range of values. While this issue is not that severe for Model 3 like it is for Model 2, it\u2019s exacerbated when stronger levels of non-linearity are unaccounted for.", "Endogeneity occurs when there is a link between independent variables and the error term. Model 4 violates the no endogeneity assumption because researchers omitted sqft from the model. Remember, when relevant variables are omitted from the model, it gets absorbed by the error term. Since sqft and age_years are slightly correlated (I set this to 20% in the simulation), omitting sqft from the model causes the error term to be correlated with age_years. Let\u2019s first compare the predictive abilities of Model 1and Model 4 by examining MSE:", "Compared to Model 1, predictions for Model 4 are considerably worse, largely because sqft explains a lot of the variation in housing prices. RMSE tells us that, on average, Model 4 made predictions that were $29,099 away from true housing prices compared to $9,167 for Model 1. Next, let\u2019s focus on inference. The plot below shows what the distribution of age_years coefficients, \u03b2\u2081, for Model 4 look like across the 10K researchers:", "The average coefficient estimate is biased (hence the term omitted variable bias) since we know that the true coefficient value for age_years is -7, not -4.1. Furthermore, we can see that for 9.5K out of 10K researchers, coefficient estimates for age_years ranged from -5.5 to -2.8. This would lead the majority of researchers to underestimate the affect of age_years on Price.", "This simulation gives a flavor of what can happen when assumptions are violated. Depending on a multitude of factors (i.e. variance of residuals, number of observations, etc.), the model\u2019s ability to predict and infer will vary. Of course, it\u2019s also possible for a model to violate multiple assumptions. If there\u2019s interest, I\u2019ll cover the other assumptions in the future (homoskedasticity, normality of error term, and autocorrelation), but the three I covered should give you a good idea of the consequences of violating assumptions.", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F4f0513dd3160&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-consequences-of-violating-linear-regression-assumptions-4f0513dd3160&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-consequences-of-violating-linear-regression-assumptions-4f0513dd3160&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-consequences-of-violating-linear-regression-assumptions-4f0513dd3160&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-consequences-of-violating-linear-regression-assumptions-4f0513dd3160&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----4f0513dd3160--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----4f0513dd3160--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@hajimealabanza?source=post_page-----4f0513dd3160--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@hajimealabanza?source=post_page-----4f0513dd3160--------------------------------", "anchor_text": "Hajime Alabanza"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fb118c1f6e303&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-consequences-of-violating-linear-regression-assumptions-4f0513dd3160&user=Hajime+Alabanza&userId=b118c1f6e303&source=post_page-b118c1f6e303----4f0513dd3160---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F4f0513dd3160&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-consequences-of-violating-linear-regression-assumptions-4f0513dd3160&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F4f0513dd3160&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-consequences-of-violating-linear-regression-assumptions-4f0513dd3160&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/photos/HLA3TAFQuQs", "anchor_text": "Unsplash"}, {"url": "https://365datascience.com/ols-assumptions/", "anchor_text": "assumptions"}, {"url": "https://github.com/hajimealabanza/Assumptions_Simulation/blob/master/simulation.R", "anchor_text": "here"}, {"url": "https://www.statisticshowto.com/variance-inflation-factor/", "anchor_text": "variance inflation factor"}, {"url": "https://www.statisticshowto.com/mean-squared-error/", "anchor_text": "Mean squared error"}, {"url": "https://medium.com/tag/data-science?source=post_page-----4f0513dd3160---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/statistics?source=post_page-----4f0513dd3160---------------statistics-----------------", "anchor_text": "Statistics"}, {"url": "https://medium.com/tag/regression?source=post_page-----4f0513dd3160---------------regression-----------------", "anchor_text": "Regression"}, {"url": "https://medium.com/tag/r?source=post_page-----4f0513dd3160---------------r-----------------", "anchor_text": "R"}, {"url": "https://medium.com/tag/education?source=post_page-----4f0513dd3160---------------education-----------------", "anchor_text": "Education"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F4f0513dd3160&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-consequences-of-violating-linear-regression-assumptions-4f0513dd3160&user=Hajime+Alabanza&userId=b118c1f6e303&source=-----4f0513dd3160---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F4f0513dd3160&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-consequences-of-violating-linear-regression-assumptions-4f0513dd3160&user=Hajime+Alabanza&userId=b118c1f6e303&source=-----4f0513dd3160---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F4f0513dd3160&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-consequences-of-violating-linear-regression-assumptions-4f0513dd3160&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----4f0513dd3160--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F4f0513dd3160&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-consequences-of-violating-linear-regression-assumptions-4f0513dd3160&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----4f0513dd3160---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----4f0513dd3160--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----4f0513dd3160--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----4f0513dd3160--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----4f0513dd3160--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----4f0513dd3160--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----4f0513dd3160--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----4f0513dd3160--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----4f0513dd3160--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@hajimealabanza?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@hajimealabanza?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Hajime Alabanza"}, {"url": "https://medium.com/@hajimealabanza/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "121 Followers"}, {"url": "https://www.linkedin.com/in/halabanza/", "anchor_text": "https://www.linkedin.com/in/halabanza/"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fb118c1f6e303&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-consequences-of-violating-linear-regression-assumptions-4f0513dd3160&user=Hajime+Alabanza&userId=b118c1f6e303&source=post_page-b118c1f6e303--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fe565a8357e97&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-consequences-of-violating-linear-regression-assumptions-4f0513dd3160&newsletterV3=b118c1f6e303&newsletterV3Id=e565a8357e97&user=Hajime+Alabanza&userId=b118c1f6e303&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}