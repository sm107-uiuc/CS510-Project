{"url": "https://towardsdatascience.com/scheduling-with-ease-cost-optimization-tutorial-for-python-c05a5910ee0d", "time": 1682993906.4788558, "path": "towardsdatascience.com/scheduling-with-ease-cost-optimization-tutorial-for-python-c05a5910ee0d/", "webpage": {"metadata": {"title": "Scheduling with ease: Cost optimization tutorial for Python | by Eric Stoltz | Towards Data Science", "h1": "Scheduling with ease: Cost optimization tutorial for Python", "description": "Congratulations! You\u2019re the proud new owner of the coolest store in town. To keep the operation running, you need to ensure that you have the correct number of workers scheduled for each shift. In\u2026"}, "outgoing_paragraph_urls": [{"url": "http://www.gurobi.com/", "anchor_text": "Gurobi", "paragraph_index": 9}, {"url": "https://towardsdatascience.com/evolution-of-a-salesman-a-complete-genetic-algorithm-tutorial-for-python-6fe5d2b3ca35", "anchor_text": "tutorial", "paragraph_index": 26}, {"url": "https://github.com/ezstoltz/optimization", "anchor_text": "here", "paragraph_index": 27}], "all_paragraphs": ["Congratulations! You\u2019re the proud new owner of the coolest store in town. To keep the operation running, you need to ensure that you have the correct number of workers scheduled for each shift. In this tutorial, we\u2019ll design the lowest cost schedule for the upcoming week.", "For the coming week, each day has two shifts of 8 hours. You currently have ten employees, four of which are considered managers. For any shifts beyond 40 hours in a given week (5 total shifts), you pay your employees overtime. To be fair to your employees, you decide that everyone has to work at least 3 shifts, but no more than 7 shifts. And to ensure that the shop runs smoothly, each shift requires at least one manager.", "Before diving into the code, let\u2019s add structure to our task by defining our objective, variables, and constraints.", "In simple words, we want to design the lowest cost schedule, accounting for both regular time and overtime. We can define this mathematically as:", "Where w is our list of workers, RegCost and OTCost are the dollar costs of a regular and overtime shift for each worker, respectively, and RegShifts and OTShifts are the total number of regular and overtime shifts for each worker, respectively.", "We will create a list of variables for every worker/shift combination (e.g. [\u2018Employee1\u2019,\u2018Monday1'], [\u2018Employee2\u2019,\u2018Monday1\u2019], etc.). Each of these variables will be a binary value to signify if a worker is scheduled (1) or not (0). We\u2019ll also need to deal with the split of regular time and overtime, which we\u2019ll handle as a hybrid of variable and constraint.", "From the problem statement above, we know that there are a number of special considerations that we need to follow. To make sure that our optimized schedule is acceptable, we\u2019ll create specific constraints:", "Before diving into the the optimization model, we need some (illustrative) data to work with. Since loading data into Python is out of the scope of this tutorial, we\u2019ll move through this part quickly.", "Here\u2019s a recap of what we now have:", "Note: As can be seen in the above code, we are using a package called Gurobi. Gurobi is an optimization solver that is available for a number of programming languages. While the full version of Gurobi requires a commercial license, you can get an academic or online course license to run a limited version for free.", "We first need to create the shell of our model. We do this with the following code:", "Let\u2019s turn our structured variables into code:", "First, we need to create binary variables for each worker/shift combination. We can do this with Gurobi\u2019s addVars function (Note: if only adding one variable, use addVar instead). We specify that the variable is binary and we also read in the avail dictionary that we created before as a ub (\u201cupper bound\u201d). Each Gurobi variable has an upper and lower bound. Since we are using binary variables, naturally our variables must equal 0 or 1. By setting the upper bound equal to the values in avail , we are able to embed the constraint that certain worker/shift combinations must equal 0 (i.e. when that worker is unavailable).", "Next, we have to create variables to handle the regular and overtime hours. As was mentioned before, we\u2019ll handle this split as a combination of variable and constraint. For now, we simply create the variables for each worker without further specification. The one exception is that we set overtimeTrigger to be a binary variable (0 when there is no overtime for a given worker this week and 1 when there is overtime).", "Similarly, let\u2019s turn each constraint outlined above into code, using the addConstrs (adding multiple constraints at a time) and addConstr (adding one constraint at a time) functions.", "First, we specify that the sum of assigned workers (1 for each scheduled worker, 0 for each non-scheduled worker) for each shift equals the total shift requirement:", "Next, we deal with the split between regular time and overtime. To capture this correctly, we take a conservative approach. First, we specify that the number of regular shifts plus the number of overtime shifts is equal to the total number of shifts for each worker. Then, we ensure that the number of regular shifts is less than or equal to the number of shifts specified as our overtime trigger. We do this to ensure that regular shifts are accounted for before overtime shifts. To double down on this, we add the final constraint that says that if the number of regular shifts for a worker is less than 5 (OTTrigger), then the binary trigger for overtime is set to 0.", "With this in place, we can finish our final constraints. Similar to above, we calculate the total number of assigned shifts for each worker. We specify that this must be greater than or equal to the global input for minimum number of shifts and less than or equal to the global maximum number of shifts. Finally, we handle the requirement for each shift needs at least one manager to be staffed.", "Our objective is to minimize the total cost of the workers scheduled. We can handle this quite simply by defining a cost function that sums the total number of regular shifts times the cost of a regular shift for each worker and the total number of overtime shifts times the cost of an overtime shift for each worker. We tell Gurobi that the goal is to minimize this using ModelSense. Finally, we use setObjective to specify that Cost is the objective function.", "Before running the optimization, it can be helpful to inspect the model. A great way to do this is:", "With this code, you\u2019ll be able to see the objective function, variables, constraints, etc. listed as formulas, which can be particularly helpful to ensure that the code is producing the functions that you intended.", "After you are happy with the model, we can solve the optimization with a simple line:", "The optimize function produces an output that is fairly helpful, but doesn\u2019t give us a ton to work with. In the following steps, we\u2019ll extract more meaningful information from the model.", "First, we want to know the total cost of the proposed schedule. We find out that the cost is $7535 by running the following:", "Now, let\u2019s see a dashboard of the schedule using the following:", "Finally, let\u2019s create an alternative view of the dashboard by simply printing out the names of each employee assigned to each shift:", "Through this tutorial, we produced an end-to-end solution to an optimization problem using Python. If this piqued your interest, play around with an example of your own. Try handling continuous decision variables, multi-objective problems, quadratic optimization, infeasible models- the possibilities are endless. And if you\u2019re curious about creating your own optimization algorithms, check out my tutorial on building a genetic algorithm using Python!", "You can find a consolidated notebook here.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Energized by tackling challenging problems in complex industries"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fc05a5910ee0d&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fscheduling-with-ease-cost-optimization-tutorial-for-python-c05a5910ee0d&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fscheduling-with-ease-cost-optimization-tutorial-for-python-c05a5910ee0d&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fscheduling-with-ease-cost-optimization-tutorial-for-python-c05a5910ee0d&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fscheduling-with-ease-cost-optimization-tutorial-for-python-c05a5910ee0d&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----c05a5910ee0d--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----c05a5910ee0d--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@estoltz?source=post_page-----c05a5910ee0d--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@estoltz?source=post_page-----c05a5910ee0d--------------------------------", "anchor_text": "Eric Stoltz"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F1056c764b0a1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fscheduling-with-ease-cost-optimization-tutorial-for-python-c05a5910ee0d&user=Eric+Stoltz&userId=1056c764b0a1&source=post_page-1056c764b0a1----c05a5910ee0d---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fc05a5910ee0d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fscheduling-with-ease-cost-optimization-tutorial-for-python-c05a5910ee0d&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fc05a5910ee0d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fscheduling-with-ease-cost-optimization-tutorial-for-python-c05a5910ee0d&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "http://www.gurobi.com/", "anchor_text": "Gurobi"}, {"url": "https://towardsdatascience.com/evolution-of-a-salesman-a-complete-genetic-algorithm-tutorial-for-python-6fe5d2b3ca35", "anchor_text": "tutorial"}, {"url": "https://github.com/ezstoltz/optimization", "anchor_text": "here"}, {"url": "https://en.wikipedia.org/wiki/Gurobi", "anchor_text": "https://en.wikipedia.org/wiki/Gurobi"}, {"url": "https://www.sciencedirect.com/science/article/pii/S111001681730282X", "anchor_text": "https://www.sciencedirect.com/science/article/pii/S111001681730282X"}, {"url": "http://www.gurobi.com/documentation/8.0/examples/workforce5_py.html", "anchor_text": "http://www.gurobi.com/documentation/8.0/examples/workforce5_py.html"}, {"url": "https://medium.com/tag/programming?source=post_page-----c05a5910ee0d---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/tag/optimization?source=post_page-----c05a5910ee0d---------------optimization-----------------", "anchor_text": "Optimization"}, {"url": "https://medium.com/tag/data-science?source=post_page-----c05a5910ee0d---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/python?source=post_page-----c05a5910ee0d---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/towards-data-science?source=post_page-----c05a5910ee0d---------------towards_data_science-----------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fc05a5910ee0d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fscheduling-with-ease-cost-optimization-tutorial-for-python-c05a5910ee0d&user=Eric+Stoltz&userId=1056c764b0a1&source=-----c05a5910ee0d---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fc05a5910ee0d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fscheduling-with-ease-cost-optimization-tutorial-for-python-c05a5910ee0d&user=Eric+Stoltz&userId=1056c764b0a1&source=-----c05a5910ee0d---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fc05a5910ee0d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fscheduling-with-ease-cost-optimization-tutorial-for-python-c05a5910ee0d&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----c05a5910ee0d--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fc05a5910ee0d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fscheduling-with-ease-cost-optimization-tutorial-for-python-c05a5910ee0d&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----c05a5910ee0d---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----c05a5910ee0d--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----c05a5910ee0d--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----c05a5910ee0d--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----c05a5910ee0d--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----c05a5910ee0d--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----c05a5910ee0d--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----c05a5910ee0d--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----c05a5910ee0d--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@estoltz?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@estoltz?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Eric Stoltz"}, {"url": "https://medium.com/@estoltz/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "554 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F1056c764b0a1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fscheduling-with-ease-cost-optimization-tutorial-for-python-c05a5910ee0d&user=Eric+Stoltz&userId=1056c764b0a1&source=post_page-1056c764b0a1--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Feb4330036f4a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fscheduling-with-ease-cost-optimization-tutorial-for-python-c05a5910ee0d&newsletterV3=1056c764b0a1&newsletterV3Id=eb4330036f4a&user=Eric+Stoltz&userId=1056c764b0a1&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}