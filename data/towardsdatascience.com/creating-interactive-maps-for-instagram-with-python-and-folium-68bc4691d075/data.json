{"url": "https://towardsdatascience.com/creating-interactive-maps-for-instagram-with-python-and-folium-68bc4691d075", "time": 1683015581.453123, "path": "towardsdatascience.com/creating-interactive-maps-for-instagram-with-python-and-folium-68bc4691d075/", "webpage": {"metadata": {"title": "Create interactive maps for Instagram with Python | Towards Data Science", "h1": "Creating Interactive Maps for Instagram with Python and Folium", "description": "Learn to make beautiful, customised and interactive maps with the Python Folium library, which incorporate your Instagram posts and photos."}, "outgoing_paragraph_urls": [{"url": "https://python-visualization.github.io/folium/", "anchor_text": "Folium", "paragraph_index": 1}, {"url": "https://www.openstreetmap.org/#map=9/51.7831/-1.3046", "anchor_text": "OpenStreetMap", "paragraph_index": 4}, {"url": "http://maps.stamen.com/#terrain/12/37.7706/-122.3782", "anchor_text": "Stamen", "paragraph_index": 5}, {"url": "https://www.thunderforest.com/maps/", "anchor_text": "Thunderforest", "paragraph_index": 5}, {"url": "https://stadiamaps.com/", "anchor_text": "Stadia", "paragraph_index": 5}, {"url": "https://carto.com/basemaps/", "anchor_text": "Carto", "paragraph_index": 5}, {"url": "https://leaflet-extras.github.io/leaflet-providers/preview/", "anchor_text": "This link", "paragraph_index": 5}, {"url": "https://www.mapbox.com/maps/", "anchor_text": "Mapbox", "paragraph_index": 6}, {"url": "https://docs.python.org/3/library/json.html", "anchor_text": "json", "paragraph_index": 10}, {"url": "https://shapely.readthedocs.io/en/stable/manual.html", "anchor_text": "Shapely", "paragraph_index": 10}, {"url": "https://pubs-of-oxfordshire-map.github.io/", "anchor_text": "https://pubs-of-oxfordshire-map.github.io/", "paragraph_index": 16}, {"url": "https://pages.github.com/", "anchor_text": "Github Pages", "paragraph_index": 17}, {"url": "https://github.com/Pubs-of-Oxfordshire-Map/Pubs-of-Oxfordshire-Map.github.io", "anchor_text": "Pubs of Oxfordshire Github Repo", "paragraph_index": 19}, {"url": "https://www.instagram.com/pubsofoxfordshire/", "anchor_text": "Pubs of Oxfordshire Instagram page", "paragraph_index": 20}, {"url": "https://realfavicongenerator.net/", "anchor_text": "RealFaviconGenerator", "paragraph_index": 21}, {"url": "https://www.crummy.com/software/BeautifulSoup/", "anchor_text": "Beautiful Soup", "paragraph_index": 22}], "all_paragraphs": ["One of my weekend pursuits is to visit all the pubs in my local area of Oxfordshire in the UK. Over time, these numerous pub visits have turned into a popular \u2018Pubs of Oxfordshire\u2019 Instagram page. So it was a real shame when, in 2016, Instagram decided to remove its \u2018Photo Map\u2019 feature. The reasoning was that most users weren\u2019t actually using it. But what if your account could make good use of such a feature? Any travel, tourist or local blogging page could certainly benefit from it. I\u2019ve spent many hours fumbling with Google\u2019s customised, and rather clumsy, \u2018My Maps\u2019 feature, but the results never looked good, and it wasn\u2019t possible to integrate Instagram posts in any way. Well\u2026, as with many other data and web-related tasks, Python has an answer.", "Python has a vast ocean of libraries for different tasks, and when it comes to making beautiful, interactive maps quickly, the Folium library does the job very well. The good news is you don\u2019t need to know much Python to get this working, as I\u2019ll take you through it step-by-step.", "Let\u2019s go ahead and import Folium and the other dependencies we\u2019ll need (these will be explained as we encounter them).", "Now let\u2019s create a map \u2014 just a plain and simple basemap:", "The location=[] argument sets the coordinates of the centre of the map (in this case near Oxford, UK). The tiles= argument tells Folium to use the freely available, open-source map tiles from OpenStreetMap (OSM). There\u2019s a couple of zoom settings and lastly, the control_scale= adds a scale bar. Folium saves everything associated with your map in HTML. This means you can quickly take a look at what your map looks like by opening the .html file in your browser:", "And that\u2019s it! One line of Python and we already have a bright, colourful basemap. But where does the map come from? Folium comes with a few in-built map tilesets that you can easily specify using the tiles= argument. The default is the OSM tileset, but Folium also supports the use of publicly available map tiles from providers such as Stamen, Thunderforest, Stadia, Carto and others. This link provides a quick comparison between some of those map tiles. If you are just mapping for personal, non-commercial use, the map tiles should be free to use.", "For the purposes of my own \u2018Pubs of Oxfordshire\u2019 map, I wanted a little more control over the basemap. I wanted it to look greener, and include all the trails and footpath data available (so that people can find a nice walk near their chosen pub). Mapbox lets you customise your own map, and then access it through your personal API and access token, which you can pass into Folium:", "If you\u2019re using a 3rd party tile provider, always remember to add an attr= argument, so their work is properly credited (this shows up in the bottom-right corner of the map).", "Now let\u2019s start adding some elements to the map. The first thing I wanted to add was an overlay to show the Oxfordshire county border. I had the data for this in a GeoJSON file.", "Save the map, and open in a browser. Here\u2019s what it looks like so far:", "Now we get to some more customisation. First, we\u2019ll load in an image to use as a custom icon for the markers on the map. Then we\u2019ll load in another geographic boundary \u2014 this time the Oxford City boundary. As you can imagine, there is a higher density of pubs in Oxford city centre, compared to the rest of Oxfordshire. In order to avoid lots of markers being plotted on top of each other and a messy-looking map, we\u2019ll make use of Folium\u2019s MarkerCluster plugin (this was imported in the first step). At low zoom levels, the marker cluster groups together all the markers that fall within the Oxford City boundary. Only when zoomed in closer, will the individual markers separate. To do this, we\u2019ll make use of Python\u2019s json and Shapely libraries (also imported above), which are great for any kind of spatial operations. In the code below we use the json library to read the file, and then define a shape: oxford_boundary using the geometry attribute of the json file. Finally, we create the MarkerCluster, which also has a number of options to customise its behaviour.", "In a separate Python dictionary, I\u2019ve stored all the data associated with each pub I want to add to the map. For each pub, there\u2019s a pair of coordinates, a link to an Instagram post, the pub\u2019s website, and Google Maps directions. We\u2019re going to use these details to incorporate the Instagram post and website links into the pop-up for each marker. The dictionary looks like this:", "Now for the main legwork. Here we use a simple for-loop to run through all the pubs we want to create markers for.", "One thing to note is that each marker, needs its own instance of CustomIcon, hence why we create one on each iteration of the loop. The marker pop-up is styled using HTML. HTML is often used to design websites, but in this case, it allows us to embed the Instagram post in the pop-up using <iframe src={insta_post}. Likewise, we can add text to the pop-up and style it the way we want. Each marker is created one-by-one with its own instance of CustomIcon, Popup, coordinates and tooltip (hover-over) text. The final part of the for-loop uses the oxford_boundary shape to test whether the markers lie within the Oxford City boundary. If so, they are added to the oxford_cluster, and if not, they are added to map separately. Finally, a geolocation button is added using the imported LocateControl plugin, and the browser tab-title is set within the HTML.", "Below is a preview of what it looks like:", "The MarkerCluster can be seen over Oxford. If clicked, the map zooms in to reveal all 11 markers contained within the Oxford cluster. Each marker can be clicked on, to reveal a pop-up, complete with an embedded Instagram post and website links. Let\u2019s take a look:", "The fully-functional and interactive map can be viewed here: https://pubs-of-oxfordshire-map.github.io/.", "While it\u2019s easy to view your map by opening the .html file locally in your browser, if you want to get it online, you will need to host it somewhere. Github Pages provides a really quick and easy hosting service that creates a webpage from your .html file, which is what I\u2019ve used for the pub map. And it\u2019s free!", "Hopefully, this provides some tips and inspiration for you to experiment with Python and Folium\u2019s customised maps. Given that Folium integrates so well with a variety of 3rd party map tile providers, its huge range of options and that it supports HTML, makes it powerful enough to achieve almost any look you want.", "If you\u2019re interested in all the code, here\u2019s a link to the Pubs of Oxfordshire Github Repo where the map is hosted.", "And if you\u2019re interested in pubs around Oxfordshire, do check out the Pubs of Oxfordshire Instagram page! \ud83c\udf7a", "We could stop here, but if you want to go the extra mile, it is possible to add Favicons \u2014 also known as tab- or website icons, by editing the .html file the map is saved in. Websites like the RealFaviconGenerator let you upload an image or logo, and the website will generate a series of images in exactly the right size for various OS and browsers to render. These images will need to be placed in the root folder where the website is hosted. The generator also provides you with some HTML text which you need to insert into the <head> section of the .html file. This text points different browsers to the correct image so you get a nice website icon showing on your tab.", "We\u2019ll utilise Python\u2019s Beautiful Soup library (imported at the beginning) to read the .html file and find the <head> section. This makes it easy to append the tab_icon HTML text for the Favicons.", "I\u2019ll stop there, but if you have any thoughts or questions, feel free to leave a comment \ud83d\ude42", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Energy Science MSc, practising Python, through a combination of data, automation and GUI projects."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F68bc4691d075&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreating-interactive-maps-for-instagram-with-python-and-folium-68bc4691d075&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreating-interactive-maps-for-instagram-with-python-and-folium-68bc4691d075&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreating-interactive-maps-for-instagram-with-python-and-folium-68bc4691d075&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreating-interactive-maps-for-instagram-with-python-and-folium-68bc4691d075&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----68bc4691d075--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----68bc4691d075--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@esbernjakobsen?source=post_page-----68bc4691d075--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@esbernjakobsen?source=post_page-----68bc4691d075--------------------------------", "anchor_text": "Esbern Jakobsen"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fae6b41bb6a55&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreating-interactive-maps-for-instagram-with-python-and-folium-68bc4691d075&user=Esbern+Jakobsen&userId=ae6b41bb6a55&source=post_page-ae6b41bb6a55----68bc4691d075---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F68bc4691d075&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreating-interactive-maps-for-instagram-with-python-and-folium-68bc4691d075&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F68bc4691d075&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreating-interactive-maps-for-instagram-with-python-and-folium-68bc4691d075&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://python-visualization.github.io/folium/", "anchor_text": "Folium"}, {"url": "https://www.openstreetmap.org/#map=9/51.7831/-1.3046", "anchor_text": "OpenStreetMap"}, {"url": "http://maps.stamen.com/#terrain/12/37.7706/-122.3782", "anchor_text": "Stamen"}, {"url": "https://www.thunderforest.com/maps/", "anchor_text": "Thunderforest"}, {"url": "https://stadiamaps.com/", "anchor_text": "Stadia"}, {"url": "https://carto.com/basemaps/", "anchor_text": "Carto"}, {"url": "https://leaflet-extras.github.io/leaflet-providers/preview/", "anchor_text": "This link"}, {"url": "https://www.mapbox.com/maps/", "anchor_text": "Mapbox"}, {"url": "https://docs.python.org/3/library/json.html", "anchor_text": "json"}, {"url": "https://shapely.readthedocs.io/en/stable/manual.html", "anchor_text": "Shapely"}, {"url": "https://pubs-of-oxfordshire-map.github.io/", "anchor_text": "here"}, {"url": "https://pubs-of-oxfordshire-map.github.io/", "anchor_text": "https://pubs-of-oxfordshire-map.github.io/"}, {"url": "https://pages.github.com/", "anchor_text": "Github Pages"}, {"url": "https://github.com/Pubs-of-Oxfordshire-Map/Pubs-of-Oxfordshire-Map.github.io", "anchor_text": "Pubs of Oxfordshire Github Repo"}, {"url": "https://www.instagram.com/pubsofoxfordshire/", "anchor_text": "Pubs of Oxfordshire Instagram page"}, {"url": "https://realfavicongenerator.net/", "anchor_text": "RealFaviconGenerator"}, {"url": "https://www.crummy.com/software/BeautifulSoup/", "anchor_text": "Beautiful Soup"}, {"url": "https://medium.com/tag/python?source=post_page-----68bc4691d075---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/folium?source=post_page-----68bc4691d075---------------folium-----------------", "anchor_text": "Folium"}, {"url": "https://medium.com/tag/instagram?source=post_page-----68bc4691d075---------------instagram-----------------", "anchor_text": "Instagram"}, {"url": "https://medium.com/tag/interactive-maps?source=post_page-----68bc4691d075---------------interactive_maps-----------------", "anchor_text": "Interactive Maps"}, {"url": "https://medium.com/tag/maps?source=post_page-----68bc4691d075---------------maps-----------------", "anchor_text": "Maps"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F68bc4691d075&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreating-interactive-maps-for-instagram-with-python-and-folium-68bc4691d075&user=Esbern+Jakobsen&userId=ae6b41bb6a55&source=-----68bc4691d075---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F68bc4691d075&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreating-interactive-maps-for-instagram-with-python-and-folium-68bc4691d075&user=Esbern+Jakobsen&userId=ae6b41bb6a55&source=-----68bc4691d075---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F68bc4691d075&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreating-interactive-maps-for-instagram-with-python-and-folium-68bc4691d075&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----68bc4691d075--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F68bc4691d075&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreating-interactive-maps-for-instagram-with-python-and-folium-68bc4691d075&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----68bc4691d075---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----68bc4691d075--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----68bc4691d075--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----68bc4691d075--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----68bc4691d075--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----68bc4691d075--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----68bc4691d075--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----68bc4691d075--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----68bc4691d075--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@esbernjakobsen?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@esbernjakobsen?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Esbern Jakobsen"}, {"url": "https://medium.com/@esbernjakobsen/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "17 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fae6b41bb6a55&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreating-interactive-maps-for-instagram-with-python-and-folium-68bc4691d075&user=Esbern+Jakobsen&userId=ae6b41bb6a55&source=post_page-ae6b41bb6a55--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F988b3d04340c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreating-interactive-maps-for-instagram-with-python-and-folium-68bc4691d075&newsletterV3=ae6b41bb6a55&newsletterV3Id=988b3d04340c&user=Esbern+Jakobsen&userId=ae6b41bb6a55&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}