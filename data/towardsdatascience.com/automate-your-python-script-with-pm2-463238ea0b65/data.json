{"url": "https://towardsdatascience.com/automate-your-python-script-with-pm2-463238ea0b65", "time": 1683006050.4667819, "path": "towardsdatascience.com/automate-your-python-script-with-pm2-463238ea0b65/", "webpage": {"metadata": {"title": "Automate Your Python Script with Process Manager 2 (PM2) | by Joe T. Santhanavanich | Towards Data Science", "h1": "Automate Your Python Script with Process Manager 2 (PM2)", "description": "In Data Science, you may have to run or process your Python script periodically especially the data collection to make your workflow up-to-date as it directly related to your result accuracy. You may\u2026"}, "outgoing_paragraph_urls": [{"url": "https://www.reddit.com/r/sysadmin/comments/8szffr/its_not_just_me_right_task_scheduler_sucks_so_bad/", "anchor_text": "here", "paragraph_index": 1}, {"url": "https://github.com/Unitech/pm2", "anchor_text": "PM2", "paragraph_index": 4}, {"url": "https://crontab.guru/#0_*_*_*_*", "anchor_text": "here", "paragraph_index": 20}, {"url": "https://www.crummy.com/software/BeautifulSoup/bs4/doc/", "anchor_text": "Beautifulsoap4", "paragraph_index": 22}, {"url": "https://gist.github.com/JoeThunyathep/8c2a8ba0681c46dc6298cf62e41262bc", "anchor_text": "getCovid19Data.py", "paragraph_index": 22}, {"url": "https://joets.medium.com/about-me-table-of-content-bc775e4f9dde", "anchor_text": "Link", "paragraph_index": 30}], "all_paragraphs": ["In Data Science, you may have to run or process your Python script periodically especially the data collection to make your workflow up-to-date as it directly related to your result accuracy. You may have a Python script to run every 1,2,\u2026, xx minutes/hours or at 6 am, 9 pm, yy am/pm every day. And doing it yourself every time is tiresome and boring.", "When you google about it online, there might have already been several articles talking about it. If you are using Windows, you may consider using a Windows Task Scheduler which you can schedule your windows system to run any execute (.exe) or batch (.bat) file. Although it has a good-looking user interface, some people still don\u2019t like it so much. (Source here)", "Or if you are using macOS or Linux, you might consider using a Crontab. But you may find it difficult to manage when you have too many scripts or jobs to manage/logging.", "So, let\u2019s check this alternative solution >>>", "PM2 is the Process Manager which is built for Node.js application.", "As my experience in web development using Node.js. I had to schedule and manage several Node.js applications with CRON which give me a very hard time until I knew PM2!! My life is much better since then. The PM2 keeps my apps running forever and automatically reloads when I updated something to the app. Also, I can manually schedule the reload time with CRON or the restart delay on any application and it can run perfectly on all operation systems!!", "NO! It is true that PM2 is intended to serve Node.js application but it is not limited to the Node.js runtime. After I used PM2 for some time, I realized that it can be used to manage any programming script/runtime! From that moment, I tried it with Python and it works just fine!", "In this article, I will show an example of how you can schedule and automate your Python script using PM2!!", "Installing can be also done in one line which you can either use npm or yarn .", "If you install PM2 on your Windows 10, the first time you run it you may face an error due to the current user having an undefined ExecutionPolicy. You can fix it by the following code:", "After installation is done, you can start any python script through the PM2 by using $ pm2 start <script name> command.", "If you have multiple jobs to run, I also recommend naming each job meaningfully so that you won\u2019t get confused later. You can name each job with --name <name>. By default, PM2 will run your script with Python when you start any .py file. However, if you have several versions of Python installed in your machine, you may select a specific Python version with--interpreter <interpreter name: node, python, python3, python3.x, ...>.", "Overall, the command to start a python script would look like this:", "By PM2 default setting, it will try to make your app run forever which means your script will be automatically restarted immediately after it finishes.", "Well, that may be too much for a machine! So, there are 2 ways to set your Python script to run periodically with PM2: 1. using restart-delay 2. using cron", "You can set your Python script to run periodically with--restart-delay <xxxx ms> option. This way, after your Python script finishes its job, it will wait(sleep) for xxxx ms until the next restart.", "For example, if you want your script to restart every 10 seconds after each job, you may normally use while & time.sleep as follows in your Python:", "With the PM2, you don\u2019t need the while loop anymore, you can keep your code clean and left the restart job to PM2. The command to run your script with 10-second sleep after each job would look like this:", "You can also use cron option to schedule your Python script with--cron <'cron pattern'> . It is also important for you to deactivate the PM2 auto-restart option with --no-autorestart so it won't automatically restart itself after complete a job and will only follow the cron expression.", "For example, the command to restart your script every 1 hour (at minute 0) would look like this:", "A tip about cron: if you are new to cron. It is a time-based job scheduler in a Unix os. The cron schedule expression allows you to let your program restart periodically at a specific time. The format of cron is'<minutes 0:60> <hour 0:24> <day of month 1:31> <month 1:12> <day of week 0:6>'. I recommend that you may try to create your own cron expression through this website: here.", "Let\u2019s end this boring part and let\u2019s go through a real-world example together!", "Assume, you want to monitor and store the data of COVID-19 cases from Worldometer every 5 minutes. You can do it easily using Beautifulsoap4. For example, my Python script (getCovid19Data.py) will allow you to get the COVID-19 case data from Worldometer and store data to the CSV file (world_corona_case.csv).", "Instead of using while loop and time.sleep()inside the script or using regular cron to restart the script every 5 minutes.", "That\u2019s it! Now, the Python script gonna run every 5 minutes. Now you can check your logs with this command", "The list table will show up. You can see here all the jobs that had been run with PM2 which will contain all your Node.js app or Python script running in the background.", "You can use a commandpm2 log <id or name> to see the log of a specific job. In this example, you can use the following command:", "From the log status, you can see that the Python script stores COVID-19 data every 5 minutes and the residual of [~1.6 to 2.5 seconds] is the time that Python script used to request data and save add updated data to CSV file each time. Now, let\u2019s check the result in the result CSV file below. The PM2 works well!", "When you have several processes running with PM2. You may want to manipulate each project differently. Here is a list of some useful commands I used most.", "I hope you enjoy this article and it helps you schedule your Python script easier and apply it to your Python workflow. Feel free to share with me if you have some questions, comments, or suggestions.", "About me & Check out all my blog contents: Link", "Be Safe and Healthy!Thank you for Reading. \ud83d\udc4b\ud83d\ude04", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F463238ea0b65&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautomate-your-python-script-with-pm2-463238ea0b65&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautomate-your-python-script-with-pm2-463238ea0b65&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautomate-your-python-script-with-pm2-463238ea0b65&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautomate-your-python-script-with-pm2-463238ea0b65&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----463238ea0b65--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----463238ea0b65--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://joets.medium.com/?source=post_page-----463238ea0b65--------------------------------", "anchor_text": ""}, {"url": "https://joets.medium.com/?source=post_page-----463238ea0b65--------------------------------", "anchor_text": "Joe T. Santhanavanich"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F4f7621d2a280&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautomate-your-python-script-with-pm2-463238ea0b65&user=Joe+T.+Santhanavanich&userId=4f7621d2a280&source=post_page-4f7621d2a280----463238ea0b65---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F463238ea0b65&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautomate-your-python-script-with-pm2-463238ea0b65&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F463238ea0b65&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautomate-your-python-script-with-pm2-463238ea0b65&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://www.linkedin.com/in/ChaeyunKim/", "anchor_text": "Chaeyun Kim"}, {"url": "https://www.reddit.com/r/sysadmin/comments/8szffr/its_not_just_me_right_task_scheduler_sucks_so_bad/", "anchor_text": "here"}, {"url": "https://github.com/Unitech/pm2", "anchor_text": "PM2"}, {"url": "https://crontab.guru/#0_*_*_*_*", "anchor_text": "here"}, {"url": "https://www.crummy.com/software/BeautifulSoup/bs4/doc/", "anchor_text": "Beautifulsoap4"}, {"url": "https://gist.github.com/JoeThunyathep/8c2a8ba0681c46dc6298cf62e41262bc", "anchor_text": "getCovid19Data.py"}, {"url": "https://joets.medium.com/about-me-table-of-content-bc775e4f9dde", "anchor_text": "Link"}, {"url": "https://medium.com/tag/python?source=post_page-----463238ea0b65---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/data-science?source=post_page-----463238ea0b65---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/covid-19?source=post_page-----463238ea0b65---------------covid_19-----------------", "anchor_text": "Covid-19"}, {"url": "https://medium.com/tag/data-scraping?source=post_page-----463238ea0b65---------------data_scraping-----------------", "anchor_text": "Data Scraping"}, {"url": "https://medium.com/tag/science?source=post_page-----463238ea0b65---------------science-----------------", "anchor_text": "Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F463238ea0b65&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautomate-your-python-script-with-pm2-463238ea0b65&user=Joe+T.+Santhanavanich&userId=4f7621d2a280&source=-----463238ea0b65---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F463238ea0b65&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautomate-your-python-script-with-pm2-463238ea0b65&user=Joe+T.+Santhanavanich&userId=4f7621d2a280&source=-----463238ea0b65---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F463238ea0b65&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautomate-your-python-script-with-pm2-463238ea0b65&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----463238ea0b65--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F463238ea0b65&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautomate-your-python-script-with-pm2-463238ea0b65&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----463238ea0b65---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----463238ea0b65--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----463238ea0b65--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----463238ea0b65--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----463238ea0b65--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----463238ea0b65--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----463238ea0b65--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----463238ea0b65--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----463238ea0b65--------------------------------", "anchor_text": ""}, {"url": "https://joets.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://joets.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Joe T. Santhanavanich"}, {"url": "https://joets.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "1K Followers"}, {"url": "https://www.linkedin.com/in/thunyatheps/", "anchor_text": "https://www.linkedin.com/in/thunyatheps/"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F4f7621d2a280&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautomate-your-python-script-with-pm2-463238ea0b65&user=Joe+T.+Santhanavanich&userId=4f7621d2a280&source=post_page-4f7621d2a280--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fbe1f3ef6d3d9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautomate-your-python-script-with-pm2-463238ea0b65&newsletterV3=4f7621d2a280&newsletterV3Id=be1f3ef6d3d9&user=Joe+T.+Santhanavanich&userId=4f7621d2a280&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}