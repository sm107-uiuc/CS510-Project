{"url": "https://towardsdatascience.com/10-python-pandas-tricks-that-make-your-work-more-efficient-2e8e483808ba", "time": 1682995380.1765919, "path": "towardsdatascience.com/10-python-pandas-tricks-that-make-your-work-more-efficient-2e8e483808ba/", "webpage": {"metadata": {"title": "10 Python Pandas tricks that make your work more efficient | by Shiu-Tang Li | Towards Data Science", "h1": "10 Python Pandas tricks that make your work more efficient", "description": "Pandas is a widely used Python package for structured data. There\u2019re many nice tutorials of it, but here I\u2019d still like to introduce a few cool tricks the readers may not know before and I believe\u2026"}, "outgoing_paragraph_urls": [], "all_paragraphs": ["Pandas is a widely used Python package for structured data. There\u2019re many nice tutorials of it, but here I\u2019d still like to introduce a few cool tricks the readers may not know before and I believe they\u2019re useful.", "Everyone knows this command. But the data you\u2019re trying to read is large, try adding this argument: nrows = 5 to only read in a tiny portion of the table before actually loading the whole table. Then you could avoid the mistake by choosing wrong delimiter (it may not always be comma separated).", "(Or, you can use \u2018head\u2019 command in linux to check out the first 5 rows (say) in any text file: head -n 5 data.txt (Thanks Ilya Levinson for pointing out a typo here))", "Then, you can extract the column list by using df.columns.tolist() to extract all columns, and then add usecols = [\u2018c1\u2019, \u2018c2\u2019, \u2026] argument to load the columns you need. Also, if you know the data types of a few specific columns, you can add the argument dtype = {\u2018c1\u2019: str, \u2018c2\u2019: int, \u2026} so it would load faster. Another advantage of this argument that if you have a column which contains both strings and numbers, it\u2019s a good practice to declare its type to be string, so you won\u2019t get errors while trying to merge tables using this column as a key.", "If data preprocessing has to be done in Python, then this command would save you some time. After reading in a table, the default data types for each column could be bool, int64, float64, object, category, timedelta64, or datetime64. You can first check the distribution by", "to know all possible data types of your dataframe, then do", "to select a sub-dataframe with only numerical features.", "This is an important command if you haven\u2019t heard of it already. If you do the following commands:", "You\u2019ll find that df1 is changed. This is because df2 = df1 is not making a copy of df1 and assign it to df2, but setting up a pointer pointing to df1. So any changes in df2 would result in changes in df1. To fix this, you can do either", "This is a cool command to do easy data transformations. You first define a dictionary with \u2018keys\u2019 being the old values and \u2018values\u2019 being the new values.", "Some examples: True, False to 1, 0 (for modeling); defining levels; user defined lexical encodings.", "If we\u2019d like to create a new column with a few other columns as inputs, apply function would be quite useful sometimes.", "In the codes above, we define a function with two input variables, and use the apply function to apply it to columns \u2018c1\u2019 and \u2018c2\u2019.", "but the problem of \u2018apply\u2019 is that it\u2019s sometimes too slow. Say if you\u2019d like to calculate the maximum of two columns \u2018c1\u2019 and \u2018c2\u2019, of course you can do", "but you\u2019ll find it much slower than this command:", "Takeaway: Don\u2019t use apply if you can get the same work done with other built-in functions (they\u2019re often faster). For example, if you want to round column \u2018c\u2019 to integers, do round(df[\u2018c\u2019], 0) or df[\u2018c\u2019].round(0) instead of using the apply function: df.apply(lambda x: round(x['c'], 0), axis = 1).", "This is a command to check value distributions. For example, if you\u2019d like to check what are the possible values and the frequency for each individual value in column \u2018c\u2019 you can do", "There\u2019re some useful tricks / arguments of it:A. normalize = True: if you want to check the frequency instead of counts.B. dropna = False: if you also want to include missing values in the stats.C. df['c'].value_counts().reset_index(): if you want to convert the stats table into a pandas dataframe and manipulate itD. df['c'].value_counts().reset_index().sort_values(by='index') : show the stats sorted by distinct values in column \u2018c\u2019 instead of counts.", "When building models, you might want to exclude the row with too many missing values / the rows with all missing values. You can use .isnull() and .sum() to count the number of missing values within the specified columns.", "In SQL we can do this using SELECT * FROM \u2026 WHERE ID in (\u2018A001\u2019, \u2018C022\u2019, \u2026) to get records with specific IDs. If you want to do the same thing with pandas, you can do", "You have a numerical column, and would like to classify the values in that column into groups, say top 5% into group 1, 5\u201320% into group 2, 20%-50% into group 3, bottom 50% into group 4. Of course, you can do it with pandas.cut, but I\u2019d like to provide another option here:", "which is fast to run (no apply function used).", "Again this is a command that everyone would use. I\u2019d like to point out two tricks here. The first one is", "You can use this command to print out the first five rows of what are going to be written into the file exactly.", "Another trick is dealing with integers and missing values mixed together. If a column contains both missing values and integers, the data type would still be float instead of int. When you export the table, you can add float_format=\u2018%.0f\u2019 to round all the floats to integers. Use this trick if you only want integer outputs for all columns \u2014 you\u2019ll get rid of all annoying \u2018.0\u2019s.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Mathematician \u2192 Data scientist \u2192 Software engineer"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F2e8e483808ba&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2F10-python-pandas-tricks-that-make-your-work-more-efficient-2e8e483808ba&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2F10-python-pandas-tricks-that-make-your-work-more-efficient-2e8e483808ba&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2F10-python-pandas-tricks-that-make-your-work-more-efficient-2e8e483808ba&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2F10-python-pandas-tricks-that-make-your-work-more-efficient-2e8e483808ba&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----2e8e483808ba--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----2e8e483808ba--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@shiutangli?source=post_page-----2e8e483808ba--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@shiutangli?source=post_page-----2e8e483808ba--------------------------------", "anchor_text": "Shiu-Tang Li"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F1e77e054ef75&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2F10-python-pandas-tricks-that-make-your-work-more-efficient-2e8e483808ba&user=Shiu-Tang+Li&userId=1e77e054ef75&source=post_page-1e77e054ef75----2e8e483808ba---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F2e8e483808ba&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2F10-python-pandas-tricks-that-make-your-work-more-efficient-2e8e483808ba&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F2e8e483808ba&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2F10-python-pandas-tricks-that-make-your-work-more-efficient-2e8e483808ba&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/", "anchor_text": "https://unsplash.com/"}, {"url": "https://medium.com/tag/data-science?source=post_page-----2e8e483808ba---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/python?source=post_page-----2e8e483808ba---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/pandas-dataframe?source=post_page-----2e8e483808ba---------------pandas_dataframe-----------------", "anchor_text": "Pandas Dataframe"}, {"url": "https://medium.com/tag/pandas?source=post_page-----2e8e483808ba---------------pandas-----------------", "anchor_text": "Pandas"}, {"url": "https://medium.com/tag/dataframes?source=post_page-----2e8e483808ba---------------dataframes-----------------", "anchor_text": "Dataframes"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F2e8e483808ba&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2F10-python-pandas-tricks-that-make-your-work-more-efficient-2e8e483808ba&user=Shiu-Tang+Li&userId=1e77e054ef75&source=-----2e8e483808ba---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F2e8e483808ba&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2F10-python-pandas-tricks-that-make-your-work-more-efficient-2e8e483808ba&user=Shiu-Tang+Li&userId=1e77e054ef75&source=-----2e8e483808ba---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F2e8e483808ba&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2F10-python-pandas-tricks-that-make-your-work-more-efficient-2e8e483808ba&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----2e8e483808ba--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F2e8e483808ba&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2F10-python-pandas-tricks-that-make-your-work-more-efficient-2e8e483808ba&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----2e8e483808ba---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----2e8e483808ba--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----2e8e483808ba--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----2e8e483808ba--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----2e8e483808ba--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----2e8e483808ba--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----2e8e483808ba--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----2e8e483808ba--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----2e8e483808ba--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@shiutangli?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@shiutangli?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Shiu-Tang Li"}, {"url": "https://medium.com/@shiutangli/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "1.5K Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F1e77e054ef75&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2F10-python-pandas-tricks-that-make-your-work-more-efficient-2e8e483808ba&user=Shiu-Tang+Li&userId=1e77e054ef75&source=post_page-1e77e054ef75--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fceccfcc5a7a4&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2F10-python-pandas-tricks-that-make-your-work-more-efficient-2e8e483808ba&newsletterV3=1e77e054ef75&newsletterV3Id=ceccfcc5a7a4&user=Shiu-Tang+Li&userId=1e77e054ef75&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}