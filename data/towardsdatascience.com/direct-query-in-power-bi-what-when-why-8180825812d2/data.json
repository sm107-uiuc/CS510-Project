{"url": "https://towardsdatascience.com/direct-query-in-power-bi-what-when-why-8180825812d2", "time": 1683014941.9708211, "path": "towardsdatascience.com/direct-query-in-power-bi-what-when-why-8180825812d2/", "webpage": {"metadata": {"title": "Direct Query in Power BI \u2014 What, When & Why? | by Nikola Ilic | Towards Data Science", "h1": "Direct Query in Power BI \u2014 What, When & Why?", "description": "As soon as you plan to get some data to work with, Power BI asks you to choose Data Connectivity mode. If you\u2019ve read this article, or even better, started with this one, you should probably be\u2026"}, "outgoing_paragraph_urls": [{"url": "https://towardsdatascience.com/how-to-reduce-your-power-bi-model-size-by-90-b2f834c9f12e", "anchor_text": "this article", "paragraph_index": 1}, {"url": "https://towardsdatascience.com/vertipaq-brain-muscles-behind-power-bi-eecd6c8891e3", "anchor_text": "this one", "paragraph_index": 1}, {"url": "https://towardsdatascience.com/inside-vertipaq-in-power-bi-compress-for-success-68b888d9d463", "anchor_text": "this article", "paragraph_index": 5}, {"url": "https://towardsdatascience.com/how-i-speed-up-my-power-bi-report-5x-155255415895", "anchor_text": "number of visuals on the report page", "paragraph_index": 24}, {"url": "https://datamozart.medium.com/membership", "anchor_text": "Become a member and read every story on Medium!", "paragraph_index": 29}, {"url": "http://eepurl.com/gOH8iP", "anchor_text": "here", "paragraph_index": 30}, {"url": "http://data-mozart.com", "anchor_text": "data-mozart.com", "paragraph_index": 32}], "all_paragraphs": ["When working with Power BI, one of the first decisions you need to make is the following:", "As soon as you plan to get some data to work with, Power BI asks you to choose Data Connectivity mode. If you\u2019ve read this article, or even better, started with this one, you should probably be familiar with the Import option, and how the Tabular model works in the background of Power BI to support your queries and generate lightning fast reports.", "In this article, I want to go more in-depth on the DirectQuery option, as I have a feeling that this option is still underused (for good or for bad, we\u2019ll try to examine in this article).", "As its name suggests, DirectQuery is a method of retrieving data, that pulls the data directly from the data source, at the query time! The last part of the sentence holds the key \u2014 while Import mode stores the snapshot of your data in-memory \u2014 DirectQuery (DQ) doesn\u2019t store any data. For every single request, it goes straight to the data source (which is in 99% of cases SQL database), and pulls the data from there.", "So, data resides within its original source before, during, and after the query execution!", "When interacting with the report, your users generate a query (or set of queries in most cases), that needs to be executed in order to satisfy the requests. As you may recall from this article, the Tabular model consists of Formula Engine (FE) and Storage Engine (SE). Formula Engine accepts the request, creates a query plan, and then, depending on your choice between Import vs DirectQuery mode, generates the query to target the respective data source.", "As you may notice, when you choose the DQ option, Formula Engine will \u201ctranslate\u201d DAX to a SQL and send the query directly to the data source.", "Once you\u2019ve chosen the DirectQuery option, Power BI will not import data from the underlying tables. It will hold only their metadata.", "The great news is: you can use Composite models in Power BI. In simple words, this means that you can combine DQ and Import mode within your data model, setting the preferred option for every single table!", "As you may see, once I\u2019ve created my Power BI data model using the DQ option, when I open my data in the Model View, under Advanced, I can choose which Storage mode to apply for the selected table. Important notice: you can switch from Direct Query to Import mode, but not vice versa!", "Dual mode is like a hybrid \u2014 a combination of Import mode and DirectQuery. Data from the table is being loaded into memory, but at the query time, it can be also retrieved directly from the source.", "Honestly, this is a \u201cMillion $\u201d question:)\u2026And, as in most cases, the only correct answer is: \u201cIt depends\u201d. But, let\u2019s check on what it depends!", "If your workload requires one of the scenarios mentioned above (\u201creal-time\u201d analytics, and/or too large data model), DirectQuery would be an obvious choice.", "However, let\u2019s examine some general pros and cons of using DirectQuery in more frequent cases:", "The most important consideration when using DirectQuery is that overall user experience depends almost exclusively on the performance of the underlying data source. That means, if your source database is not optimized for the analytic workload (missing indexes; inappropriate indexes; inadequate data modeling in place, so that query needs to target multiple tables), your report performance will suck!", "Additionally, the number of users that interact with the report in parallel will also have an impact. Imagine the scenario where 10 people browsing the report page with 20 visuals on it \u2014 that will generate 200 queries to an underlying data source at the same time! Keep in mind that each visual will generate (at least) one query to a data source!", "And, if there is a realistic chance that you can improve those two by applying different techniques, you should also keep in mind that there are also some things that you can\u2019t control, such as:", "As I mentioned above, there are different techniques to improve the performance of the data source (assuming that you have access to an underlying data source and can apply structural changes).", "Once you are in Power BI, you should stick with the following best practices when using DirectQuery mode:", "You can see the M statement which Power Query generated to satisfy our request, but if you right-click on that step and select the View Native Query option, you can also see the SQL query that will be sent to a SQL Server database:", "Now, for these simple transformations, Formula Engine is smart enough to do everything in one iteration. But, if you perform some more complex stuff, turn on SQL Server Profiler or DAX Studio, and have fun watching how many requests had been sent to your source database\u2026", "If you go to Options, under the Current File, you can specify a value for the Maximum connections per data source (by default is 10).", "Most of these options are self-explanatory. Basically, you can restrict slicers and filters, because by default when you change one slicer value, all the slicers will generate the query to a data source (even those which haven\u2019t changed)!", "Therefore, you can add the \u201cApply\u201d button, so that the user can specifically choose which portion of data needs to be refreshed. Of course, that will impact your report design, since you need to provide additional space for those buttons:", "You should also carefully think about the number of visuals on the report page \u2014 the more visuals, the longer time needed for data retrieval.", "Finally, you should turn off cross-highlighting and cross-filtering between the visuals, as that will reduce the number of queries generated. You can turn off these features either on the whole report level (in Options -> Query reduction -> check the option: Disabling cross highlighting/filtering by default), or for the specific visuals only.", "One more recommendation is of key importance \u2014 talk to your users, try to explain to them the difference between Import mode and DirectQuery, what benefits can they get by using each of these two, but also which downsides to expect (especially when choosing DQ mode).", "As you may conclude on your own: Choosing the right tool for the job is the best possible recommendation, if you are considering using DirectQuery.", "Carefully evaluate your potential workloads and try to identify all pros and cons of both the Import and DirectQuery approach, before making the final decision.", "Become a member and read every story on Medium!", "Subscribe here to get more insightful data articles!", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Data Mozart \u2014 Make Music from your Data!| data-mozart.com | @DataMozart | Microsoft Data Platform MVP | Power BI Addict | Blogger, speaker, learner\u2026"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F8180825812d2&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdirect-query-in-power-bi-what-when-why-8180825812d2&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdirect-query-in-power-bi-what-when-why-8180825812d2&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdirect-query-in-power-bi-what-when-why-8180825812d2&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdirect-query-in-power-bi-what-when-why-8180825812d2&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----8180825812d2--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----8180825812d2--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://datamozart.medium.com/?source=post_page-----8180825812d2--------------------------------", "anchor_text": ""}, {"url": "https://datamozart.medium.com/?source=post_page-----8180825812d2--------------------------------", "anchor_text": "Nikola Ilic"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F64005b7daa38&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdirect-query-in-power-bi-what-when-why-8180825812d2&user=Nikola+Ilic&userId=64005b7daa38&source=post_page-64005b7daa38----8180825812d2---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F8180825812d2&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdirect-query-in-power-bi-what-when-why-8180825812d2&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F8180825812d2&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdirect-query-in-power-bi-what-when-why-8180825812d2&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://towardsdatascience.com/how-to-reduce-your-power-bi-model-size-by-90-b2f834c9f12e", "anchor_text": "this article"}, {"url": "https://towardsdatascience.com/vertipaq-brain-muscles-behind-power-bi-eecd6c8891e3", "anchor_text": "this one"}, {"url": "https://towardsdatascience.com/inside-vertipaq-in-power-bi-compress-for-success-68b888d9d463", "anchor_text": "this article"}, {"url": "https://towardsdatascience.com/rows-or-columns-where-should-i-put-my-index-on-65d429692dee", "anchor_text": "Columnstore indexes for large analytical workloads"}, {"url": "https://docs.microsoft.com/en-us/sql/relational-databases/views/create-indexed-views?view=sql-server-ver15", "anchor_text": "Indexed View"}, {"url": "https://towardsdatascience.com/tiq-part-1-how-to-destroy-your-power-bi-model-with-auto-date-time-8fec32b22aff", "anchor_text": "separate Date dimension"}, {"url": "https://towardsdatascience.com/tiq-part-3-ultimate-guide-to-date-dimension-creation-98b951ffa68c", "anchor_text": "Date table established"}, {"url": "https://towardsdatascience.com/how-i-speed-up-my-power-bi-report-5x-155255415895", "anchor_text": "number of visuals on the report page"}, {"url": "https://datamozart.medium.com/membership", "anchor_text": "Become a member and read every story on Medium!"}, {"url": "http://eepurl.com/gOH8iP", "anchor_text": "here"}, {"url": "https://youtu.be/7dssvnKEmCA", "anchor_text": "https://youtu.be/7dssvnKEmCA"}, {"url": "https://medium.com/tag/data-science?source=post_page-----8180825812d2---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/towards-data-science?source=post_page-----8180825812d2---------------towards_data_science-----------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/tag/power-bi?source=post_page-----8180825812d2---------------power_bi-----------------", "anchor_text": "Power Bi"}, {"url": "https://medium.com/tag/data-modeling?source=post_page-----8180825812d2---------------data_modeling-----------------", "anchor_text": "Data Modeling"}, {"url": "https://medium.com/tag/data-visualization?source=post_page-----8180825812d2---------------data_visualization-----------------", "anchor_text": "Data Visualization"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F8180825812d2&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdirect-query-in-power-bi-what-when-why-8180825812d2&user=Nikola+Ilic&userId=64005b7daa38&source=-----8180825812d2---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F8180825812d2&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdirect-query-in-power-bi-what-when-why-8180825812d2&user=Nikola+Ilic&userId=64005b7daa38&source=-----8180825812d2---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F8180825812d2&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdirect-query-in-power-bi-what-when-why-8180825812d2&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----8180825812d2--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F8180825812d2&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdirect-query-in-power-bi-what-when-why-8180825812d2&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----8180825812d2---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----8180825812d2--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----8180825812d2--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----8180825812d2--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----8180825812d2--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----8180825812d2--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----8180825812d2--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----8180825812d2--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----8180825812d2--------------------------------", "anchor_text": ""}, {"url": "https://datamozart.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://datamozart.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Nikola Ilic"}, {"url": "https://datamozart.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "2.1K Followers"}, {"url": "http://data-mozart.com", "anchor_text": "data-mozart.com"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F64005b7daa38&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdirect-query-in-power-bi-what-when-why-8180825812d2&user=Nikola+Ilic&userId=64005b7daa38&source=post_page-64005b7daa38--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F9fc5611a2826&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdirect-query-in-power-bi-what-when-why-8180825812d2&newsletterV3=64005b7daa38&newsletterV3Id=9fc5611a2826&user=Nikola+Ilic&userId=64005b7daa38&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}