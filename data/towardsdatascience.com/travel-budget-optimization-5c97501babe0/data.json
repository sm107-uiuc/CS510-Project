{"url": "https://towardsdatascience.com/travel-budget-optimization-5c97501babe0", "time": 1683001646.965945, "path": "towardsdatascience.com/travel-budget-optimization-5c97501babe0/", "webpage": {"metadata": {"title": "Traveling through Europe (in a nerdy way) | by Cintia Bruscantini | Towards Data Science", "h1": "Traveling through Europe (in a nerdy way)", "description": "Get the most out of Google flights with a scraping tool that allows you to put limitations to Google\u2019s flexibility, and optimize for best itinerary with minimum budget."}, "outgoing_paragraph_urls": [{"url": "https://www.google.com/flights", "anchor_text": "https://www.google.com/flights", "paragraph_index": 1}], "all_paragraphs": ["Being a travel lover, my next year\u2019s goal is to travel as much as I can. I\u2019m not very picky with destinations; however, I do have a few limitations. First, I can only travel on weekends since I work in an office from Monday to Friday. Second, I want to visit as many different cities as possible with a minimum budget. And third, I don\u2019t want to spend a ridiculous amount of time on a plane. So let\u2019s see how to find an optimal travel itinerary in an automatic way.", "Having in mind my flexibility and limitations, I tried many flight searchers and I ended up choosing https://www.google.com/flights (Google understands me so well). Here one can choose a departing city and leave the destination empty to explore options. One can also select to travel with flexible dates, e.g. all weekend trips in the next 6 months, with a few clicks:", "However, I find their definition of the weekend to be useless. See, for instance, the screenshot above. You can see there a flight to Prague, departing Thu, 2 Apr. Thank you, Google, for the cheap option, but I have to be at the office on Friday. Similarly, it offers some other options for other cities to depart on Saturday night and return on Sunday morning, great if you were only interested in getting to know airports.", "So, Google, with great flexibility comes great responsibility, and your assumption of what a weekend trip is, is just wrong.", "Ok, let\u2019s give Google less flexibility. Let\u2019s tell Google that I want to travel anywhere in Europe, round trip from Amsterdam, on the weekend of Dec. 13th to 15th 2019, departing Friday between 18.00 and 24.00 hs and returning Sunday between 16.00 and 24.00 hs. This is the link to that search:", "In that URL, AMS refers to Amsterdam, and you can also see there the dates we chose and the time restrictions.", "The search logic in the URL is quite straightforward:", "where city_code is the IATA airport code, departure_date and return_date format is yyyy-mm-dd; takeoff_after, takeoff_until, return_after, and return_until format is HHMM; and max_budget format is an integer that defines the maximum price in euros. The er argument defines the area to look for destinations. You can play with the zoom, and change those numbers to whatever area you are interested in.", "Following this simple URL logic, I created a python library that scans Google flights and saves the trips in a CSV file. You can find the code in this repo:", "You can download it, import the library, and then call it by creating the GoogleFlights object with a CSV filename. Then, you can scan all destinations anywhere by calling the createDataWorldwide method like:", "The arguments of the createDataWorldwide method are the following. The travel_lenght_list is an array with the number of nights you want to scan, e.g. [2,3] will scan trips with 2 and 3 nights. The start_period is the first departing date to start scanning; therefore, if you want to scan all roundtrips departing on Saturday and returning on Sunday make sure that start_period is a Saturday, and travel_lenght_list=[1]. The end_period is the last departing date to scan; in my case any date in December 2020. The argument steps_days is how many days to jump between scanning departing dates; thus, if steps_days=7 it will scan weekly departure flights, and if steps_days=1 it will scan every day departure flights. I use takeoff_after and takeoff_until to scan only trips that depart after 18 hs. because I want to travel on Friday after work. Similarly, I use return_after and return_until to scan flights that return to Amsterdam after 17 hs. because I want to spend some time on Sunday morning walking around the city. Finally, you can specify the number of passengers with nr_passengers.", "For my use case, I used my python library to scrape all round trips for every weekend in 2020 from Amsterdam to any destination, for 2 passengers with a price lower than 300 euros.", "My definition of a weekend is departing Friday after 18 hs. and returning Sunday after 17 hs, but one can change it easily. This is how I use the library to achieve what I want:", "and it creates a CSV file. A small sample of the file looks like:", "There are no options available for Nov. and Dec. 2020 yet, so the last weekend I found flights for was Oct. 16th, 2020.", "Now I can call the method optimum_weekends, to find the lowest budget itinerary for 2020.", "The argument duration_max filters out flights that are more than x hours long. I chose duration_max=7 since I don\u2019t want to fly for more than 7 hours. Argument from_start specifies a date to start the itinerary. The argument allow_max_city_duplicates filter out itineraries that have more than x duplicate destinations. This method creates thousands of possible itineraries by selecting permutations of destinations for each date for all weekends in 2020. The output is an itinerary with the lowest budget possible for the trips scanned. This is how the output looks like:", "The total budget I need to travel every weekend in 2020 (excluding Nov. and Dec.), for 2 passengers, roundtrip from Amsterdam, is 7670 euros. I will get to know 26 different cities in 42 weekends (yay!), and I won\u2019t need to take any leave date at work.", "Actually, I\u2019m not interested in visiting multiple times the same city, so let\u2019s remove duplicate cities and let\u2019s keep the cheapest option.", "I look forward to people using the tool to come up with other optimization strategies based on different limitations, or improvements suggestions. On the top of my head, one can use the tool to find the cheapest dates to travel to a specific destination in 2020; or investigate if flight prices change within the day or intra-week or with IP country; or find fare errors. The sky is not the limit, it is the goal :).", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "I\u2019m a Data Scientist, electronic engineer, with a PhD in Engineering, working on dynamic pricing, and with research background on remote sensing."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F5c97501babe0&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftravel-budget-optimization-5c97501babe0&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftravel-budget-optimization-5c97501babe0&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftravel-budget-optimization-5c97501babe0&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftravel-budget-optimization-5c97501babe0&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----5c97501babe0--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----5c97501babe0--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@cintibrus?source=post_page-----5c97501babe0--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@cintibrus?source=post_page-----5c97501babe0--------------------------------", "anchor_text": "Cintia Bruscantini"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fe76d4e97036d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftravel-budget-optimization-5c97501babe0&user=Cintia+Bruscantini&userId=e76d4e97036d&source=post_page-e76d4e97036d----5c97501babe0---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F5c97501babe0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftravel-budget-optimization-5c97501babe0&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F5c97501babe0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftravel-budget-optimization-5c97501babe0&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://www.google.com/flights", "anchor_text": "https://www.google.com/flights"}, {"url": "https://www.google.com/flights#flt=/m/0k3p..2019-12-12*./m/0k3p.2019-12-16;c:EUR;e:1;dt:1800-2400*1600-2400;ls:1w;sd:1;t:e", "anchor_text": "https://www.google.com/flights#flt=AMS..2019-12-13*.AMS.2019-12-15;c:EUR;e:1;dt:1800-2400*1600-2400;ls:1w;sd:1;t:e"}, {"url": "https://www.google.com/flights?hl=en#flt=/m/0k3p..{departure_date}*./m/0k3p.{return_date};c:EUR;e:1;dt:{takeoff_after}-{takeoff_until}*{return_after}-{return_until};ls:1w;p:{max_budget}00.2.EUR;px:1;sd:1;er:296254327.-269199219.671078146.490175781;t:e", "anchor_text": "https://www.google.com/flights?hl=en#flt={city_code}..{departure_date}*.{city_code}.{return_date};c:EUR;e:1;dt:{takeoff_after}-{takeoff_until}*{return_after}-{return_until};ls:1w;p:{max_budget}.0.EUR;px:1;sd:1;er:296254327.-269199219.671078146.490175781;t:e"}, {"url": "https://gitlab.com/cintibrus/scrap_flights", "anchor_text": "https://gitlab.com/cintibrus/scrap_flights"}, {"url": "https://medium.com/tag/travel?source=post_page-----5c97501babe0---------------travel-----------------", "anchor_text": "Travel"}, {"url": "https://medium.com/tag/data-science?source=post_page-----5c97501babe0---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/python?source=post_page-----5c97501babe0---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/programming?source=post_page-----5c97501babe0---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/tag/technology?source=post_page-----5c97501babe0---------------technology-----------------", "anchor_text": "Technology"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F5c97501babe0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftravel-budget-optimization-5c97501babe0&user=Cintia+Bruscantini&userId=e76d4e97036d&source=-----5c97501babe0---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F5c97501babe0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftravel-budget-optimization-5c97501babe0&user=Cintia+Bruscantini&userId=e76d4e97036d&source=-----5c97501babe0---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F5c97501babe0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftravel-budget-optimization-5c97501babe0&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----5c97501babe0--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F5c97501babe0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftravel-budget-optimization-5c97501babe0&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----5c97501babe0---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----5c97501babe0--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----5c97501babe0--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----5c97501babe0--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----5c97501babe0--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----5c97501babe0--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----5c97501babe0--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----5c97501babe0--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----5c97501babe0--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@cintibrus?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@cintibrus?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Cintia Bruscantini"}, {"url": "https://medium.com/@cintibrus/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "63 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fe76d4e97036d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftravel-budget-optimization-5c97501babe0&user=Cintia+Bruscantini&userId=e76d4e97036d&source=post_page-e76d4e97036d--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F612d97cf9969&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftravel-budget-optimization-5c97501babe0&newsletterV3=e76d4e97036d&newsletterV3Id=612d97cf9969&user=Cintia+Bruscantini&userId=e76d4e97036d&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}