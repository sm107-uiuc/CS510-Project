{"url": "https://towardsdatascience.com/automating-aws-server-shut-down-for-deep-learning-5d5de1301c70", "time": 1683003320.777316, "path": "towardsdatascience.com/automating-aws-server-shut-down-for-deep-learning-5d5de1301c70/", "webpage": {"metadata": {"title": "Automating AWS Server Shut-Down for Deep Learning | by Harrison Jansma | Towards Data Science", "h1": "Automating AWS Server Shut-Down for Deep Learning", "description": "Lately, I have been working with an AWS EC2 server for a machine learning project. Every article I have come across has said the same thing\u2026 \u201cDon't forget to shutdown your EC2 instance\u201d. Reading this\u2026"}, "outgoing_paragraph_urls": [{"url": "https://course.fast.ai/start_aws.html", "anchor_text": "here", "paragraph_index": 4}, {"url": "https://aws.amazon.com/cli/", "anchor_text": "here", "paragraph_index": 5}, {"url": "https://console.aws.amazon.com/iam", "anchor_text": "IAM", "paragraph_index": 6}, {"url": "https://git-scm.com/downloads", "anchor_text": "here", "paragraph_index": 11}], "all_paragraphs": ["Lately, I have been working with an AWS EC2 server for a machine learning project. Every article I have come across has said the same thing\u2026 \u201cDon't forget to shutdown your EC2 instance\u201d. Reading this gives me anxiety. Just the thought of leaving a GPU on to burn a hole in my pocket makes me irrationally sweaty.", "So I decided to make a Bash script to spin up a server, SSH in so I can work on my project, then shut down the server when I log out. I even saved a shortcut for the script on my Desktop so that I can start working with two clicks.", "Unfortunately, the process to get the script working was not straightforward and mildly infuriating. So I decided to write a quick post so the community can have the same peace of mind.", "*My work station is a Windows 10 PC, so these steps may be different for a Mac.*", "You will need to have an AWS account as well as have instantiated an AWS EC2 instance. FastAI has a tutorial on how to do this here. If this is your first time creating a GPU instance, you may have to request a limit increase for \u201cp-type\u201d instances. For me, this took about two days to hear back from AWS.", "You will need the AWS CLI so the Bash script can make calls to spin-up/shut-down the server. You can download the CLI from here.", "In the next few steps, we will create a User for yourself in AWS IAM and then generate and save security credentials so we can use the AWS CLI.", "If you have a User in your IAM console, you do not need a new one. Just make sure that you have your user's \u201csecurity credentials.\u201d", "If you create a user, make sure to give it \u201cProgrammatic Access\u201d. Next, you will generate security keys for the user.", "In the Windows command prompt, you will need to run aws configure and follow the prompts. Fill in the Access Key ID and Secret Access Key with the key you got from the IAM console. Set your default region to the region your server is located in.", "With these steps completed, you should be able to access your AWS instances from the command line. Try running aws ec2 describe-instances, you should see a list of your EC2 instances.", "If you haven\u2019t already, install Git-Bash from here. You will need this to run the Bash Script.", "The next step is to connect Git-Bash to the AWS CLI. To do this, you need to create a .bashrc file in the root directory of bash. Open up a Git-Bash terminal and do the following.", "This will open up a text editor. Where you can paste the following.", "Now the Git-Bash terminal will recognize the command aws. If you skip this step, you will get the error bash: aws: command not found. Make sure that the file-path inserted above directs to aws.exe in your file directory.", "Once completed, exit the vim terminal by typing esc then:wq then hit enter. For the changes to take effect, you will need to close and re-open Git-Bash. Do this and execute aws . You should see the following.", "With that, we are very close to our goal. Making a Bash script that automates spinning-up, logging into, and shutting down an EC2 server.", "Now we can finish up and write that script. In your bash terminal navigate to wherever you want the script (for me cd C://Users/harrison/Desktop ) then run vim aws.sh", "*Note: I will periodically make improvements to this script.*", "Fill in INSTANCE_ID with the instance-id of your EC2 instance. Fill in SSH_KEY with the path to your SSH key.", "Now when you want to start working in your EC2 server, just run the bash script and you will be connected to your server. From there, you can run a jupyter notebook or load in python scripts from GitHub. When you exit out of the instance, the script will continue running and turn-off the server for you.", "aws ec2 start-instances \u2014 instance-ids $INSTANCE_ID starts the EC2 instance.", "You need the server\u2019s public DNS to log-in. Unfortunately, the DNS can change when you turn the server off. The below code queries for the server\u2019s public DNS.", "aws ec2 stop-instances \u2014 instance-ids $INSTANCE_ID stops the EC2 instance.", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F5d5de1301c70&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautomating-aws-server-shut-down-for-deep-learning-5d5de1301c70&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautomating-aws-server-shut-down-for-deep-learning-5d5de1301c70&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautomating-aws-server-shut-down-for-deep-learning-5d5de1301c70&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautomating-aws-server-shut-down-for-deep-learning-5d5de1301c70&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----5d5de1301c70--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----5d5de1301c70--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://harrisonjansma.medium.com/?source=post_page-----5d5de1301c70--------------------------------", "anchor_text": ""}, {"url": "https://harrisonjansma.medium.com/?source=post_page-----5d5de1301c70--------------------------------", "anchor_text": "Harrison Jansma"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Ff78a75e220e5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautomating-aws-server-shut-down-for-deep-learning-5d5de1301c70&user=Harrison+Jansma&userId=f78a75e220e5&source=post_page-f78a75e220e5----5d5de1301c70---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F5d5de1301c70&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautomating-aws-server-shut-down-for-deep-learning-5d5de1301c70&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F5d5de1301c70&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautomating-aws-server-shut-down-for-deep-learning-5d5de1301c70&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@artbyhybrid?utm_source=medium&utm_medium=referral", "anchor_text": "Hybrid"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://course.fast.ai/start_aws.html", "anchor_text": "here"}, {"url": "https://aws.amazon.com/cli/", "anchor_text": "here"}, {"url": "https://console.aws.amazon.com/iam", "anchor_text": "IAM"}, {"url": "https://git-scm.com/downloads", "anchor_text": "here"}, {"url": "https://medium.com/tag/data-science?source=post_page-----5d5de1301c70---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/software-engineering?source=post_page-----5d5de1301c70---------------software_engineering-----------------", "anchor_text": "Software Engineering"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----5d5de1301c70---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/tag/deep-learning?source=post_page-----5d5de1301c70---------------deep_learning-----------------", "anchor_text": "Deep Learning"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F5d5de1301c70&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautomating-aws-server-shut-down-for-deep-learning-5d5de1301c70&user=Harrison+Jansma&userId=f78a75e220e5&source=-----5d5de1301c70---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F5d5de1301c70&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautomating-aws-server-shut-down-for-deep-learning-5d5de1301c70&user=Harrison+Jansma&userId=f78a75e220e5&source=-----5d5de1301c70---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F5d5de1301c70&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautomating-aws-server-shut-down-for-deep-learning-5d5de1301c70&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----5d5de1301c70--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F5d5de1301c70&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautomating-aws-server-shut-down-for-deep-learning-5d5de1301c70&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----5d5de1301c70---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----5d5de1301c70--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----5d5de1301c70--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----5d5de1301c70--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----5d5de1301c70--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----5d5de1301c70--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----5d5de1301c70--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----5d5de1301c70--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----5d5de1301c70--------------------------------", "anchor_text": ""}, {"url": "https://harrisonjansma.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://harrisonjansma.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Harrison Jansma"}, {"url": "https://harrisonjansma.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "5.6K Followers"}, {"url": "https://harrisonjansma.com", "anchor_text": "https://harrisonjansma.com"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Ff78a75e220e5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautomating-aws-server-shut-down-for-deep-learning-5d5de1301c70&user=Harrison+Jansma&userId=f78a75e220e5&source=post_page-f78a75e220e5--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F9a15d2dbbbc2&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautomating-aws-server-shut-down-for-deep-learning-5d5de1301c70&newsletterV3=f78a75e220e5&newsletterV3Id=9a15d2dbbbc2&user=Harrison+Jansma&userId=f78a75e220e5&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}