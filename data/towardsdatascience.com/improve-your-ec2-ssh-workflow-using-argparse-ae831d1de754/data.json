{"url": "https://towardsdatascience.com/improve-your-ec2-ssh-workflow-using-argparse-ae831d1de754", "time": 1683007940.019006, "path": "towardsdatascience.com/improve-your-ec2-ssh-workflow-using-argparse-ae831d1de754/", "webpage": {"metadata": {"title": "Improve Your EC2 SSH Workflow Using argparse | by Jenny Lee | Towards Data Science", "h1": "Improve Your EC2 SSH Workflow Using argparse", "description": "Data science work often requires the use of advanced big data analytic techniques against huge datasets and parallel or distributed computing for fast model training and tuning. While most of the\u2026"}, "outgoing_paragraph_urls": [{"url": "https://www.datacamp.com/community/tutorials/aws-ec2-beginner-tutorial", "anchor_text": "tutorial", "paragraph_index": 2}, {"url": "https://docs.python.org/3/howto/argparse.html", "anchor_text": "introduction", "paragraph_index": 3}, {"url": "https://medium.com/u/451599b1142a?source=post_page-----ae831d1de754--------------------------------", "anchor_text": "Jeff Hale", "paragraph_index": 3}, {"url": "https://towardsdatascience.com/learn-enough-python-to-be-useful-argparse-e482e1764e05", "anchor_text": "Learn Enough Python to be Useful: argparse", "paragraph_index": 3}, {"url": "https://www.hamvocke.com/blog/a-guide-to-customizing-your-tmux-conf/", "anchor_text": "site", "paragraph_index": 16}], "all_paragraphs": ["Data science work often requires the use of advanced big data analytic techniques against huge datasets and parallel or distributed computing for fast model training and tuning. While most of the data science workflow, especially in the exploratory and development stages, can be carried out on one\u2019s laptop or desktop, it is often impractical or impossible to rely exclusively on a local development environment due to its limitations in processing power, memory, and storage.", "To this point, the role of cloud computing technologies such as those provided by Amazon Web Services\u2019 Elastic Compute Cloud (EC2) has never been more important, particularly in the context of deploying big data applications into production at scale. As the availability of such services changes how we design and implement DS architectures, it has also pushed data scientists toward greater dependence on the processing and storage capabilities of cloud computing in their early development workflow.", "If you haven\u2019t used EC2 (or any other similar cloud service) yet, this DataCamp tutorial provides a nice, motivating introduction. I use an EC2 instance daily, and because I believe many of you do as well, I\u2019d like to share a simple Python script that incorporates a few nifty tricks using the argparse module to improve your EC2 SSH workflow and create an optimal EC2 instance environment. When you establish a connection through SSH, the script will allow you to:", "If you\u2019re unfamiliar with argparse, check out this gentle introduction or Jeff Hale\u2019s Learn Enough Python to be Useful: argparse.", "Place this script in your home bin directory, for example /Users/jlee/bin. I have named my file as ec2 (without the .py extension, for convenience). Then, mark the file as a script by running:", "This line adds a positional argument session, which will let you start a new tmux session (or attach to an existing one if the name exists) each time you SSH into your remote instance.", "In other words, no more typing/looking up the tmux cheatsheet to remember tmux new -s new_session every time you want to launch a tmux session with a specific name.", "If you set nargs (number of args) to \"?\", the argument definition will consume zero or one argument on the command line being parsed.", "In other words, not passing in a string name for the session argument will give you the option of connecting to your EC2 instance without a tmux session. Extend the original argv list (lines 16\u201321) with:", "jupyter is an optional (vs. positional) argument, indicated by a preceding -- (or its short version, -j). For optional arguments, we specify a new keyword, action. If we give it the value 'store_true', it will set the value True to args.jupyter if the option is specified. Not specifying it implies False.", "Thus, in the code below, passing the jupyter argument will make your localhost:8888 point to the remote server\u2019s 8888 port. Therefore, when you run jupyter notebook on your EC2 instance, it will forward its port 8888 to port 8888 of your local machine, thereby allowing you to access the remote jupyter notebook from your local browser.", "Now, if you run jupyter notebook from the command line, it will give you something like:", "Simply copy and paste that token URL into your local browser, and you will be accessing your remote Jupyter notebook in no time.", "If you want to customize your tmux, create a configuration file named .tmux.conf in your home directory. It\u2019s a hidden file, so you won\u2019t see if it if you ls ~), but tmux will pick this file for the current user.", "Add these lines to the file and see how you like the new look of tmux:", "The result is a tmux status bar showing the current window in gray at the bottom of the terminal, distinguished from the other windows in the session, which are in green:", "Check out this site for more tmux customization options.", "Finally, here are some useful keyboard shortcuts:", "Putting it all together, you can now try running the ec2 script with one of these example commands, each of which will create an SSH connection, but with slightly different results:", "(1) will create (or attach to) a tmux session named new_sesh on SSH, with the result that when you call jupyter notebook, it will forward your remote server\u2019s port 8888 to port 8888 of your local machine.", "(2) will SSH you into your EC2 instance with port forwarding, but will not start tmux (since you didn\u2019t provide a name for session).", "(3) will create (or attach to) a tmux session called new_sesh2, but without the port forwarding (i.e., you won\u2019t be able to access the remote jupyter notebook from your local browser).", "In closing, it is certainly possible to use a bash alias(es) to achieve the effect of (1)-(3). For example, adding the following line to your .bashrc or .bash_profile script and running ssh-jlee will launch a tmux session named default and start 8888 \u2192 8888 port forwarding over the SSH connection:", "However, I think creating a parser object using argparse.ArgumentParse and passing a sequence of strings as command line arguments gives your more flexibility, transparency, control than using multiple bash aliases that hardcode all the variable behaviors in (1)\u2013(3).", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fae831d1de754&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fimprove-your-ec2-ssh-workflow-using-argparse-ae831d1de754&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fimprove-your-ec2-ssh-workflow-using-argparse-ae831d1de754&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fimprove-your-ec2-ssh-workflow-using-argparse-ae831d1de754&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fimprove-your-ec2-ssh-workflow-using-argparse-ae831d1de754&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----ae831d1de754--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----ae831d1de754--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@dzenilee?source=post_page-----ae831d1de754--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@dzenilee?source=post_page-----ae831d1de754--------------------------------", "anchor_text": "Jenny Lee"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F8231fa2cbef7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fimprove-your-ec2-ssh-workflow-using-argparse-ae831d1de754&user=Jenny+Lee&userId=8231fa2cbef7&source=post_page-8231fa2cbef7----ae831d1de754---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fae831d1de754&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fimprove-your-ec2-ssh-workflow-using-argparse-ae831d1de754&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fae831d1de754&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fimprove-your-ec2-ssh-workflow-using-argparse-ae831d1de754&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@billjelen?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Bill Jelen"}, {"url": "https://unsplash.com/s/photos/boost?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Unsplash"}, {"url": "https://www.datacamp.com/community/tutorials/aws-ec2-beginner-tutorial", "anchor_text": "tutorial"}, {"url": "https://docs.python.org/3/howto/argparse.html", "anchor_text": "introduction"}, {"url": "https://medium.com/u/451599b1142a?source=post_page-----ae831d1de754--------------------------------", "anchor_text": "Jeff Hale"}, {"url": "https://towardsdatascience.com/learn-enough-python-to-be-useful-argparse-e482e1764e05", "anchor_text": "Learn Enough Python to be Useful: argparse"}, {"url": "http://localhost:8888/?token=a7213f1213c009f4c7a6c2eddd2fded65d538e5b9ae37876&token=a7213f1213c009f4c7a6c2eddd2fded65d538e5b9ae37876", "anchor_text": "http://localhost:8888/?token=a2bc3def5g41234ed56s78zxfxc3vdfb&token=a2bc3def5g41234ed56s78zxfxc3vdfb"}, {"url": "https://www.hamvocke.com/blog/a-guide-to-customizing-your-tmux-conf/", "anchor_text": "site"}, {"url": "https://medium.com/tag/python?source=post_page-----ae831d1de754---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/data-science?source=post_page-----ae831d1de754---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/programming?source=post_page-----ae831d1de754---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/tag/software-development?source=post_page-----ae831d1de754---------------software_development-----------------", "anchor_text": "Software Development"}, {"url": "https://medium.com/tag/towards-data-science?source=post_page-----ae831d1de754---------------towards_data_science-----------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fae831d1de754&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fimprove-your-ec2-ssh-workflow-using-argparse-ae831d1de754&user=Jenny+Lee&userId=8231fa2cbef7&source=-----ae831d1de754---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fae831d1de754&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fimprove-your-ec2-ssh-workflow-using-argparse-ae831d1de754&user=Jenny+Lee&userId=8231fa2cbef7&source=-----ae831d1de754---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fae831d1de754&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fimprove-your-ec2-ssh-workflow-using-argparse-ae831d1de754&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----ae831d1de754--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fae831d1de754&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fimprove-your-ec2-ssh-workflow-using-argparse-ae831d1de754&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----ae831d1de754---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----ae831d1de754--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----ae831d1de754--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----ae831d1de754--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----ae831d1de754--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----ae831d1de754--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----ae831d1de754--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----ae831d1de754--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----ae831d1de754--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@dzenilee?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@dzenilee?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Jenny Lee"}, {"url": "https://medium.com/@dzenilee/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "445 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F8231fa2cbef7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fimprove-your-ec2-ssh-workflow-using-argparse-ae831d1de754&user=Jenny+Lee&userId=8231fa2cbef7&source=post_page-8231fa2cbef7--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F630d12d64891&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fimprove-your-ec2-ssh-workflow-using-argparse-ae831d1de754&newsletterV3=8231fa2cbef7&newsletterV3Id=630d12d64891&user=Jenny+Lee&userId=8231fa2cbef7&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}