{"url": "https://towardsdatascience.com/moneyball-linear-regression-76034259af5e", "time": 1682996501.680285, "path": "towardsdatascience.com/moneyball-linear-regression-76034259af5e/", "webpage": {"metadata": {"title": "Moneyball \u2014 Linear Regression. Using Linear Regression in Python to\u2026 | by Harry Bitten | Towards Data Science", "h1": "Moneyball \u2014 Linear Regression", "description": "In 2011, the film \u201cMoneyball\u201d was released. The film \u2014 adapted from the book by Micheal Lewis, is based on a true story, and follows Oakland A\u2019s general manager Billy Beane, who, after losing his\u2026"}, "outgoing_paragraph_urls": [{"url": "https://sabr.org/sabermetrics", "anchor_text": "Sabermetrics", "paragraph_index": 0}, {"url": "https://localwiki.org/oakland/A%27s_20_Game_Streak", "anchor_text": "20 game win streak", "paragraph_index": 0}, {"url": "https://www.kaggle.com/wduckett/moneyball-mlb-stats-19622012", "anchor_text": "Kaggle", "paragraph_index": 4}, {"url": "https://www.baseball-reference.com/", "anchor_text": "baseball-reference.com", "paragraph_index": 4}, {"url": "https://github.com/HarryBitten/MoneyballPredictions", "anchor_text": "My Github", "paragraph_index": 5}, {"url": "https://seaborn.pydata.org/", "anchor_text": "Seaborn", "paragraph_index": 11}, {"url": "https://matplotlib.org/", "anchor_text": "matplotlib", "paragraph_index": 11}], "all_paragraphs": ["In 2011, the film \u201cMoneyball\u201d was released. The film \u2014 adapted from the book by Micheal Lewis, is based on a true story, and follows Oakland A\u2019s general manager Billy Beane, who, after losing his star players, must find a way to reach the playoffs whilst faced with a tight budget. Enter Paul DePodesta, an Ivy League graduate, who, using Sabermetrics, is able to identify the \u2018bargain\u2019 players in order to build the team that go on the A\u2019s notorious 20 game win streak and see them finishing 1st in the regular season, throwing the art of sabermetrics into the limelight.", "In this post, we will attempt to recreate pieces of DePodestas statistical analysis, using linear regression in python to model the 2002 regular season results.", "Linear Regression is one of the simplest forms of supervised machine learning which models a target prediction value (usually denoted by y) based on independent variables (usually denoted by X).", "The job of a linear regression model is essentially to find a linear relationship between the input (X) and output (y).", "The dataset used can be found at Kaggle and was originally gathered from baseball-reference.com.", "The dataset contains many attributes (columns) as can be seen after importing the relevant modules, and opening with pandas (Note: the full raw code can be found at My Github)", "The main attributes that we need to be concerned with are:", "Some of these are fairly self explanatory, however there are a few attributes that require some explaining:", "Now, all three of these statistics are extremely important in this analysis. Pre-\u2019Moneyball\u2019, scouts mainly used Batting Average as a gauge of a good batter, and often a players BA would have a huge impact on their value/salary. However, DePodesta saw this as a mistake, claiming that scouts overvalued BA as a statistic, and massively undervalued OBP and SLG as a measure of a good batter. Billy Beane and the A\u2019s were then able to obtain players with high OBP and SLG at bargain prices, because the scouts overlooked these attributes.", "Let us add a new column; RD, which shows the difference between RS(Runs Scored), and RA(Runs Allowed). df['RD'] = df['RS'] - df['RA']", "Let\u2019s also make sure we only have pre-\u2019Moneyball\u2019 data, this can be done by only including data from before the 2002 regular season. df = df[df.Year < 2002]", "According to DePodesta, the A\u2019s needed 99 wins in the regular season in order to make playoffs. We can create a plot to visualise this using Seaborn, which is a data visualisation library based on matplotlib.", "Let\u2019s start by defining a nice colour palette for our plots.", "Now we can plot the Run Difference vs Wins to visualise DePodestas theory.", "As we can see, DePodestas theory seems accurate, as there has only ever been 3 instances where a team has not made playoffs with \u2265 99 wins (seen in the blue dots past the dashed black 99 wins \u2018threshold\u2019 line).", "DePodesta also calculated that in order to win 99 games and make it to the playoffs, the A\u2019s would have to score 814 runs, whilst allowing just 645, a run differential of 169. We can use many different methods to visualise the relationship between Run Difference and Wins, and we will use two of them.", "Secondly: We can use the Seaborn pairplot:", "We can already see that there is a clear linear relationship between the two, however, we can further verify this by using Pandas .corr(), which computes the pairwise correlation between columns.", "We can see a correlation of 0.938515 between Wins and Run Difference, indicating an extremely strong relationship.", "Now we know that Run Difference correlates so strongly with Wins, what attributes correlate strongly with Run Difference? As we previously mentioned, Scouts at the time relied heavily on Batting Average, and, according to DePodesta, undervalued On Base Percentage and Slugging Percentage. Again we can use the .corr() Pandas function, to compute the pairwise correlation between columns.", "Note the right hand column here, which shows RS\u2019s relationship with OBP, SLG, and BA. We can see that Batting Average is actually the least correlated attribute in respect to Runs Scored, with a correlation of 0.83. Slugging Percentage and On Base Percentage are actually correlated more highly, with 0.93 and 0.90, respectively. This confirms DePodestas idea of the undervalue placed on SLG and OBP and the relative overvaluing of BA.", "We can actually apply a bit of machine learning to further verify these claims. Firstly, by using univariate selection, to select those features that have the strongest relationship with the output variable(RD in this case). The scikit-learn library provides the SelectKBest class that allows us to pick a specific number of features. We will use the chi-squared statistical test for non-negative features to select the best features from our dataset. Firstly we need to use moneyball = df.dropna() to remove any null values from our dataset that would interfere with machine learning methods.", "Another method is to use feature importance that comes inbuilt with Tree Based Classifiers. Feature importance will give a score for each feature of the data, the higher the score, the more important or relevant the feature is towards the output variable.", "Scikit-learn provides the functionality for us to build our linear regression models. First of all, we build a model for Runs Scored, predicted using On Base Percentage and Slugging Percentage.", "We can then say that our Runs Scored model takes the form:", "Next, we do the same but for modelling Runs Allowed, using Opponents On Base Percentage and Opponents Slugging Percentage.", "We can then say that our Runs Allowed model takes the form:", "We then need to build a model to predict the number of Wins when given Run Difference.", "We can say that our Wins model takes the form:", "Now all we have left to do is get OBP, SLG, OOBP, OSLG, and simply plug them into the models!", "We know which players were transferred in and out after the 2001 season, so we can take 2001 player statistics to build the A\u2019s new 2002 team.", "So, in the end, our model predicted 805 Runs Scored, 628 Runs Allowed, and 99 games won, meaning that our model predicted that the A\u2019s would make the playoffs given their team statistics, which they did!", "Lets compare our model to DePodestas predictions:", "There are, of course, some limitations involved in this short project. For example: As we use a players previous years statistics, there is no guarantee they will be at the same level. For example, older players abilities may regress while younger players may grow. It is also important to note that we assume no injuries.", "Limitations aside, the model performance is quite remarkable and really backs up DePodestas theory and explains why the techniques he used were so heavily adopted across the entirity of baseball soon after the Oakland A\u2019s \u2018Moneyball\u2019 season.", "Thank you so much for reading my first post! I intend to keep making posts like these, mainly using data analysis and machine learning. Any feedback is welcome.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Data Science/Analysis projects and other fun stuff."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F76034259af5e&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmoneyball-linear-regression-76034259af5e&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmoneyball-linear-regression-76034259af5e&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmoneyball-linear-regression-76034259af5e&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmoneyball-linear-regression-76034259af5e&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----76034259af5e--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----76034259af5e--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@harry.bitten?source=post_page-----76034259af5e--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@harry.bitten?source=post_page-----76034259af5e--------------------------------", "anchor_text": "Harry Bitten"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F26a0c69d46fe&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmoneyball-linear-regression-76034259af5e&user=Harry+Bitten&userId=26a0c69d46fe&source=post_page-26a0c69d46fe----76034259af5e---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F76034259af5e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmoneyball-linear-regression-76034259af5e&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F76034259af5e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmoneyball-linear-regression-76034259af5e&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@jcpeacock?utm_source=medium&utm_medium=referral", "anchor_text": "Joshua Peacock"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://sabr.org/sabermetrics", "anchor_text": "Sabermetrics"}, {"url": "https://localwiki.org/oakland/A%27s_20_Game_Streak", "anchor_text": "20 game win streak"}, {"url": "https://www.kaggle.com/wduckett/moneyball-mlb-stats-19622012", "anchor_text": "Kaggle"}, {"url": "https://www.baseball-reference.com/", "anchor_text": "baseball-reference.com"}, {"url": "https://github.com/HarryBitten/MoneyballPredictions", "anchor_text": "My Github"}, {"url": "https://seaborn.pydata.org/", "anchor_text": "Seaborn"}, {"url": "https://matplotlib.org/", "anchor_text": "matplotlib"}, {"url": "https://medium.com/tag/data-science?source=post_page-----76034259af5e---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/data-analysis?source=post_page-----76034259af5e---------------data_analysis-----------------", "anchor_text": "Data Analysis"}, {"url": "https://medium.com/tag/data-visualization?source=post_page-----76034259af5e---------------data_visualization-----------------", "anchor_text": "Data Visualization"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----76034259af5e---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/tag/towards-data-science?source=post_page-----76034259af5e---------------towards_data_science-----------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F76034259af5e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmoneyball-linear-regression-76034259af5e&user=Harry+Bitten&userId=26a0c69d46fe&source=-----76034259af5e---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F76034259af5e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmoneyball-linear-regression-76034259af5e&user=Harry+Bitten&userId=26a0c69d46fe&source=-----76034259af5e---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F76034259af5e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmoneyball-linear-regression-76034259af5e&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----76034259af5e--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F76034259af5e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmoneyball-linear-regression-76034259af5e&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----76034259af5e---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----76034259af5e--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----76034259af5e--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----76034259af5e--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----76034259af5e--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----76034259af5e--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----76034259af5e--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----76034259af5e--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----76034259af5e--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@harry.bitten?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@harry.bitten?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Harry Bitten"}, {"url": "https://medium.com/@harry.bitten/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "72 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F26a0c69d46fe&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmoneyball-linear-regression-76034259af5e&user=Harry+Bitten&userId=26a0c69d46fe&source=post_page-26a0c69d46fe--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F9fced5664ed8&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmoneyball-linear-regression-76034259af5e&newsletterV3=26a0c69d46fe&newsletterV3Id=9fced5664ed8&user=Harry+Bitten&userId=26a0c69d46fe&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}