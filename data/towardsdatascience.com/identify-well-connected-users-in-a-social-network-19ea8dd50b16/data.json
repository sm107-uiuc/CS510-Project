{"url": "https://towardsdatascience.com/identify-well-connected-users-in-a-social-network-19ea8dd50b16", "time": 1683006639.795723, "path": "towardsdatascience.com/identify-well-connected-users-in-a-social-network-19ea8dd50b16/", "webpage": {"metadata": {"title": "Identify well-connected Users in an Undirected Graph | by G\u00fcnter R\u00f6hrich | Towards Data Science", "h1": "Identify well-connected Users in an Undirected Graph", "description": "I recently figured one of my former employers had a similar-to-Facebook social network in place, hence there is a huge amount of data that can't wait to be analysed."}, "outgoing_paragraph_urls": [{"url": "http://www.math.cmu.edu/~ctsourak/tsourICDM08.pdf", "anchor_text": "Carnegie Mellon University", "paragraph_index": 4}, {"url": "http://linkedin.com/in/groehrich", "anchor_text": "linkedin.com/in/groehrich", "paragraph_index": 24}], "all_paragraphs": ["I recently figured one of my former employers had a similar-to-Facebook social network in place, hence there was a huge amount of data that could not wait to be analysed. The social network was quite mature, well developed and most importantly, also used a lot. So I decided to get into the relationship data in a bit more detail.", "While browsing the web I found a way to make \u201ccounting connection quality\u201d a feasible and fun task. The key words here are counting triangles. This seems to be sound method to find well connected users through examining how many relations they share with a third person. To make this a bit more tangible, lets do a brief example.", "Person A knows Person B, Person B knows Person C. Simple and no triangle, hence not what we are looking for.", "Person A knows Person B, Person B knows Person C and Person C knows Person A. Well, this is exactly what we are looking for, because we here see, that these three people share a max of 2 connections within this constellation. Hence, a maximum of connections.", "An interesting hands-on about counting triangles in a matrix in a paper published by Carnegie Mellon University [1]. This paper is already providing very understandable pseudo code snippets \u2014 however, we will look into another approach later on. Charalampos E. Tsourakakis (Carnegie Mellon University) proposed an extensively tested and accurate method (95%+) to count the triangles in a network through \u201cthe sum of cubes of eigenvalues\u201d.", "In regular English wording, we are calculating the total number of triangles in an undirected graph, where lambda expresses the i-th eigenvalue. To obtain the number of triangles, we require the sum of cubes of eigenvalues. Please note the division by 6. This can be derived from three nodes that are involved by a triangle, and as we are counting each triangle as 2, we need to multiply the denominator \u2014 we will find this \u2018magic 6\u2019 again further below.", "If you are one of those \u2018Eigen-people\u2019 (joke originated from MIT Prof. Gilbert Strang [2]) I am pretty sure the above equation looks interesting to you. According to Tsourakakis, we are required to provide data in the form stated below. The given pseudo and Python code require the calculation/creation of an adjacency matrix (\u201cgraph\u201d) and the calculation of all i Lambdas:", "This is a quite straightforward task for your computer program:", "So, what we now see there is a total of 3 triangles in our graph example, which is a perfect match to what we could see in our chart. There are the three triangles (0,1,2), (1,3,4) and (1,3,7), hence users 0,1,2,3,4,7 seem fairly well connected compared to users 5 or 6.", "Now let\u2019s move on to a more random problem where we have not tweaked the data before, in order to observe a specific output. For this purpose, let\u2019s create an artificial sparse dataset. I have chosen a simple random sample from a dataset of possible 20 users \u2014 in reality this is of course a lot more, therefore we will consider a sparse matrix that is addressed through coordinates, although this would not be necessary for our artificial dataset.", "Now we can examine our random data \u2014 please note we will also stick to our first smaller example for the proof that this process works. In the above lines we created some random connections. If we observed (8,7) and (16,8) we would hope for another (16,7) pair in order to obtain a triangle. Note that users cannot be friends with themselves!", "What the random function created is the following \u2014 on the first sight, I assume we can work with that (duplicates are fine, self-references must be avoided):", "When first checking for the mode values in the two coordinates X and Y, we get the values {2, 3, 7, 17} that co-occur with the mode. The query referred to find these values is simple, we just check whether each list\u2019s element[0] or [1] equals our mode (X == 2) | (Y == 2). As we intended to store sparse data in a respective data structure, let\u2019s move on with a sparse matrix. For this purpose, I created a quick snipped that will support your understanding.", "It may now seem likely that triangles occur for the set given before. In order to count triangles on a larger scale for a specific row (where every row represents X[index_number] ) \u2014 and this is now different to our first approach where we counted overall triangles! \u2014 we require another equation to evaluate this result.", "I was not able to tackle this problem for quite some time, but when doing some exercises I found a very good solution set out by much appreciated Prof. Richard Vuduc [3] (UC Berkeley, Georgia Tech). For the task of finding triangles I borrowed a linear algebraic approach which I could learn from Prof. Vuduc in one of his brilliant notebooks.", "First, we create a dot product of the matrix (where M and M.T are always equivalent). This will count all connections from one user to another. As we will see, there are also some \u201cover counts\u201d. These will disappear, when the dot product is eventually \u201cmasked\u201d with a pairwise multiplication of the initial matrix M.", "In a last step, and eventually we are able to obtain the users that are fairly well connected, we will count triangles per user. Please note that any given number cannot be considered as \u201cthere are n triangles for person m\u201d, but the results can be ordered, which will allow you to identify best or least connected users.", "Remark: As mentioned earlier, if we summed up all connections and divided this number by our magic 6 ( 1/3 for a triangle and 1/2 as we counted triangles as 2), we will again see the number of total triangle connections.", "As already assumed from the mode value obtained, connections with user 2 were most likely to result in a triangle, this can also be observed in our example data. High triangle values are highlighted with an asterisk:", "What we can derive from this example: Values that are related to a triangle do have a relatively high value, however we also need to consider that additional simple connections will also increase our overall value. This can especially be observed in the cases 10 and 17 which are both non-triangle and triangle cases.", "As I mentioned earlier, we will again have a look at our starting example, just to make sure our results are plausible. As user 1 is part of 3 overall triangles, we would of course expect this user to have the highest score. The result of the exact same steps, applied to our first small data set confirms our expectation and shows the following:", "I hope I could provide you with a small but useful example of how to identify connected items in an undirected graph and use sparse matrices to store and process the data. I would love to hear, how you applied this logic to other topics. See you next time", "[1] Charalampos E. Tsourakakis, Fast Counting of Triangles in Large Real Networks: Algorithms and Laws", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Data Scientist @ Mondi Group \u2022 Georgia Tech \ud83c\udf93 \u2022 linkedin.com/in/groehrich"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F19ea8dd50b16&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fidentify-well-connected-users-in-a-social-network-19ea8dd50b16&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fidentify-well-connected-users-in-a-social-network-19ea8dd50b16&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fidentify-well-connected-users-in-a-social-network-19ea8dd50b16&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fidentify-well-connected-users-in-a-social-network-19ea8dd50b16&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----19ea8dd50b16--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----19ea8dd50b16--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://guenterroehrich.medium.com/?source=post_page-----19ea8dd50b16--------------------------------", "anchor_text": ""}, {"url": "https://guenterroehrich.medium.com/?source=post_page-----19ea8dd50b16--------------------------------", "anchor_text": "G\u00fcnter R\u00f6hrich"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F3718a9423801&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fidentify-well-connected-users-in-a-social-network-19ea8dd50b16&user=G%C3%BCnter+R%C3%B6hrich&userId=3718a9423801&source=post_page-3718a9423801----19ea8dd50b16---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F19ea8dd50b16&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fidentify-well-connected-users-in-a-social-network-19ea8dd50b16&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F19ea8dd50b16&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fidentify-well-connected-users-in-a-social-network-19ea8dd50b16&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@alinnnaaaa?utm_source=medium&utm_medium=referral", "anchor_text": "Alina Grubnyak"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "http://www.math.cmu.edu/~ctsourak/tsourICDM08.pdf", "anchor_text": "Carnegie Mellon University"}, {"url": "https://medium.com/tag/data-science?source=post_page-----19ea8dd50b16---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/graph?source=post_page-----19ea8dd50b16---------------graph-----------------", "anchor_text": "Graph"}, {"url": "https://medium.com/tag/sparse-matrix?source=post_page-----19ea8dd50b16---------------sparse_matrix-----------------", "anchor_text": "Sparse Matrix"}, {"url": "https://medium.com/tag/numpy?source=post_page-----19ea8dd50b16---------------numpy-----------------", "anchor_text": "Numpy"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----19ea8dd50b16---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F19ea8dd50b16&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fidentify-well-connected-users-in-a-social-network-19ea8dd50b16&user=G%C3%BCnter+R%C3%B6hrich&userId=3718a9423801&source=-----19ea8dd50b16---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F19ea8dd50b16&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fidentify-well-connected-users-in-a-social-network-19ea8dd50b16&user=G%C3%BCnter+R%C3%B6hrich&userId=3718a9423801&source=-----19ea8dd50b16---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F19ea8dd50b16&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fidentify-well-connected-users-in-a-social-network-19ea8dd50b16&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----19ea8dd50b16--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F19ea8dd50b16&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fidentify-well-connected-users-in-a-social-network-19ea8dd50b16&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----19ea8dd50b16---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----19ea8dd50b16--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----19ea8dd50b16--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----19ea8dd50b16--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----19ea8dd50b16--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----19ea8dd50b16--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----19ea8dd50b16--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----19ea8dd50b16--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----19ea8dd50b16--------------------------------", "anchor_text": ""}, {"url": "https://guenterroehrich.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://guenterroehrich.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "G\u00fcnter R\u00f6hrich"}, {"url": "https://guenterroehrich.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "158 Followers"}, {"url": "http://linkedin.com/in/groehrich", "anchor_text": "linkedin.com/in/groehrich"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F3718a9423801&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fidentify-well-connected-users-in-a-social-network-19ea8dd50b16&user=G%C3%BCnter+R%C3%B6hrich&userId=3718a9423801&source=post_page-3718a9423801--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F276478487b6b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fidentify-well-connected-users-in-a-social-network-19ea8dd50b16&newsletterV3=3718a9423801&newsletterV3Id=276478487b6b&user=G%C3%BCnter+R%C3%B6hrich&userId=3718a9423801&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}