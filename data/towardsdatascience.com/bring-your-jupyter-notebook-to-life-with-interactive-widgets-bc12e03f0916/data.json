{"url": "https://towardsdatascience.com/bring-your-jupyter-notebook-to-life-with-interactive-widgets-bc12e03f0916", "time": 1682996034.312684, "path": "towardsdatascience.com/bring-your-jupyter-notebook-to-life-with-interactive-widgets-bc12e03f0916/", "webpage": {"metadata": {"title": "Bring your Jupyter Notebook to life with interactive widgets | by Semi Koen | Towards Data Science", "h1": "Bring your Jupyter Notebook to life with interactive widgets", "description": "How to create dynamic dashboards in a Jupyter notebook using ipywidgets. A step by step tutorial on how to make your notebooks interactive and take them to the next level."}, "outgoing_paragraph_urls": [{"url": "https://ipywidgets.readthedocs.io/en/stable/user_guide.html", "anchor_text": "ipywidgets", "paragraph_index": 0}, {"url": "https://ipywidgets.readthedocs.io/en/stable/examples/Widget%20List.html", "anchor_text": "documentation", "paragraph_index": 14}, {"url": "https://data.london.gov.uk/dataset/number-international-visitors-london", "anchor_text": "Number of International Visitors to London", "paragraph_index": 22}, {"url": "https://github.com/bloomberg/bqplot", "anchor_text": "bqplot", "paragraph_index": 59}, {"url": "https://github.com/jupyter-widgets/pythreejs", "anchor_text": "pythreejs", "paragraph_index": 59}, {"url": "https://github.com/maartenbreddels/ipyvolume", "anchor_text": "ipyvolume", "paragraph_index": 59}, {"url": "https://github.com/jupyter-widgets/ipyleaflet", "anchor_text": "ipyleaflet", "paragraph_index": 59}, {"url": "https://github.com/pbugnion/gmaps", "anchor_text": "gmaps", "paragraph_index": 59}, {"url": "https://ipywidgets.readthedocs.io/en/stable/examples/Widget%20Custom.html", "anchor_text": "here", "paragraph_index": 60}, {"url": "https://medium.com/@semika", "anchor_text": "\u2018Follow\u2019 me", "paragraph_index": 62}], "all_paragraphs": ["Traditionally, every time you need to modify the output of your notebook cells, you need to change the code and rerun the affected cells. This can be cumbersome, inefficient and error prone and in the case of a non-technical user it may even be impracticable. This is where the ipywidgets come into play: they can be embedded in the notebook and provide a user friendly interface to collect the user input and see the impact the changes have on the data/results, without having to interact with the code; your notebooks can be transformed from static documents to dynamic dashboards \u2014 ideal for showcasing your data story!", "\u26a0\ufe0f Scope: There are limited resources on ipywidgets and the very few tutorials out there are either incomplete or focusing on the interact function/decorator. This is a complete tutorial of how you can take full control of the widgets to create powerful dashboards.", "We will start with the basics: adding a widget and explaining how the events work and we will progressively develop a dashboard.I will guide you step by step, building on the examples as we go.", "If you have ever created a graphical user interface (GUI) then you already know what a widget is. But let\u2019s give a quick definition anyway:A widget is a GUI element, such as a button, dropdown or textbox, which resides in the browser and allows us to control the code and the data by responding to events and invoking specified handlers.", "These GUI elements can be assembled and customised to create complex dashboards.", "Throughout this article we will see some of them in action.", "To start using the library we need to install the ipywidgets extension. If using conda, we type this command in the terminal:", "For pip, it will be a two-step process: 1. install and 2. enable:", "In order to incorporate widgets in the notebook we have to import the module, as shown below:", "To add a slider, we can define the minimum and maximum values, the interval size (step), a description and an initial value:", "The display() function renders a widget object in an input cell.First import:", "Then pass the widget as a parameter in the display() function:", "To read the value of a widget, we will query its value property. Similarly, we can set a widget\u2019s value:", "We can synchronise the values of two widgets by using the jslink() function.", "For a full list of widgets you can check out the documentation, or run the following command:", "The widgets can respond to events, which are raised when a user interacts with them. A simple example is clicking on a button \u2014 we are expecting an action to take place.", "Depending on its specific features, each widget exposes different events. An event handler will be executed every time the event is fired.", "Event handler is a callback function in response to an event, that operates asynchronously and handles the inputs received.", "Here we will create a simple button called btn. The on_click method is invoked when the button is clicked.", "Our event handler, btn_eventhandler, will print a short message with the button\u2019s caption \u2014 note that the input argument of the handler, obj, is the button object itself which allows us to access its properties.", "To bind the event with the handler, we assign the latter to the button\u2019s on_click method.", "What will bring us nicely to the next section is that the output appears in the same cell as the button itself. So let\u2019s move on to see how we can add more flexibility to our notebook!", "In this section we will explore how to use widgets to control a dataframe. The sample dataset I have chosen is \u2018Number of International Visitors to London\u2019 which shows totals of London\u2019s visitors with regards to nights, visits and spend, broken down by year, quarter, purpose, duration, mode and country.", "Initially, we will get the data and load it into a dataframe:", "Suppose we would like to filter the dataframe by year. We will first define a dropdown and populate it with the list of unique year values.", "In order to do this, we will create a generic function, unique_sorted_values_plus_ALL, which will find the unique values, sort them and then add the ALL item at the start, so the user could remove the filter.", "Now we will initialise the dropdown:", "The dropdown widget exposes the observe method, which takes a function that will be invoked when the value of the dropdown changes. As such, we will next create the observer handler to filter the dataframe by the selected values \u2014 note that the input argument of the handler, change, contains information about the changes that took place which allows us to access the new value (change.new).If the new value is ALL we remove the filter, otherwise we apply it:", "We will then bind the handler to the dropdown:", "So far so good, but the output of all the queries is accumulating in this very same cell; i.e. if we select a new year from the dropdown, a new dataframe will render underneath the first one, on the same cell.The desired behaviour though, is to refresh the contents of the dataframe each time.", "The solution to this is to capture the cell output in a special kind of widget, namely Output, and then display it in another cell.", "We will slightly tweak the code to:", "We will then display the output in a new cell:", "As you can see the output is rendered in a new cell and the filtering is working as expected! \ud83d\udc4d", "Continuing the previous example, let\u2019s assume we would also like to filter by purpose too.", "If we go ahead and add another dropdown, we will quickly realise the dataframe only responds to the filter by the dropdown which was recently changed. What we need to do is to link the two together so it can work on both values (i.e. year and purpose).", "Let\u2019s see how it should work:", "Firstly we need a common output for both dropdowns:", "Then we create a new function, common_filtering, that will be called by both the event handlers. This function will apply a filter on the dataframe for both year AND purpose:We are clearing the output, then we check if any of the values is ALL, in which case we consider that the respective filter is removed. When both filters are present, in the else statement, we apply the & operation in both filters. Finally we capture the output:", "We amend the event handlers to call the common_filtering function and pass the change.new value as well as the current value of the other dropdown:", "We bind the handlers to the dropdowns, and that\u2019s it!", "We have put the basis for our dashboard so far by filtering and displaying the data of the London dataset. We will carry on by colouring the numeric values based on a user selected value.", "A useful numeric widget is the BoundedFloatText; we will give it a min, max and initial value, and the incremental step.", "In order to colour the dataframe cells, we will define this function:", "Now we will minimally amend the common_filtering function to:", "The existing event handlers need to be adjusted to pass the bounded_num.value:", "And finally we will plug-in the event handler of the new widget:", "Next we will be adding a new graph to plot a basic univariate density of the number of visits (KDE \u2192 Kernel Density Estimation). We will use seaborn, so let\u2019s import the libraries:", "Continuing the previous use-case, we will capture the plot in a new output variable:", "We will now amend the common_filtering function to plot the new diagram:", "Lastly, the only thing we need to do is to display the outputs in a new cell:", "Up until now our user interface is functional but is taking up a lot of real estate.", "We will first arrange the input widgets horizontally. The HBox will add widgets to it one at a time from left-to-right:", "Next we will create a container for the output. Tab is great for this. The 1st tab will host the dataframe and the 2nd one the graph.", "Finally we will stack the input widgets and the tab on top of each other with a VBox.", "It feels a bit \u2018jammed\u2019, so as a last step, we will polish our dashboard by adding some space. We will define a Layout giving 50px margin between the items.", "We will call this layout for each item:", "and ta da\u2026. Our finished dashboard:", "PS: For presentation purposes, in some of these demos I have used a subset of the dataset i.e.: df_london = df_london.sample(250).", "There are a few third party widgets you can use too, with most popular ones being:\u2022 2-D charting: bqplot\u2022 3-D visualisation: pythreejs and ipyvolume\u2022 Mapping: ipyleaflet and gmaps.", "You can also build your own custom widgets! For more info take a look here.", "We saw a fairly wide range of widgets in action but we still have only scratched the surface here \u2014 we can build really complex and extensive GUIs using ipywidgets. I hope you all agree they deserve a place in any Data Scientist\u2019s toolbox as they enhance our productivity and add a lot of value during data exploration.", "I regularly write about Technology & Data on Medium \u2014 if you would like to read my future posts then please \u2018Follow\u2019 me!", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Passionate about creating elegant software. Fuelled by iced coffees & witty words. Currently in Japan. Opinions are my own; often flawed"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fbc12e03f0916&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbring-your-jupyter-notebook-to-life-with-interactive-widgets-bc12e03f0916&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbring-your-jupyter-notebook-to-life-with-interactive-widgets-bc12e03f0916&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbring-your-jupyter-notebook-to-life-with-interactive-widgets-bc12e03f0916&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbring-your-jupyter-notebook-to-life-with-interactive-widgets-bc12e03f0916&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----bc12e03f0916--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----bc12e03f0916--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://semika.medium.com/?source=post_page-----bc12e03f0916--------------------------------", "anchor_text": ""}, {"url": "https://semika.medium.com/?source=post_page-----bc12e03f0916--------------------------------", "anchor_text": "Semi Koen"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Faabf98f9b9a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbring-your-jupyter-notebook-to-life-with-interactive-widgets-bc12e03f0916&user=Semi+Koen&userId=aabf98f9b9a&source=post_page-aabf98f9b9a----bc12e03f0916---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fbc12e03f0916&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbring-your-jupyter-notebook-to-life-with-interactive-widgets-bc12e03f0916&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fbc12e03f0916&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbring-your-jupyter-notebook-to-life-with-interactive-widgets-bc12e03f0916&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://medium.com/towards-data-science/data-science-in-the-real-world/home", "anchor_text": "Data Science in the Real World"}, {"url": "https://ipywidgets.readthedocs.io/en/stable/user_guide.html", "anchor_text": "ipywidgets"}, {"url": "https://ipywidgets.readthedocs.io/en/stable/examples/Widget%20List.html", "anchor_text": "documentation"}, {"url": "https://data.london.gov.uk/dataset/number-international-visitors-london", "anchor_text": "Number of International Visitors to London"}, {"url": "https://data.london.gov.uk/download/number-international-visitors-london/b1e0f953-4c8a-4b45-95f5-e0d143d5641e/international-visitors-london-raw.csv", "anchor_text": "https://data.london.gov.uk/download/number-international-visitors-london/b1e0f953-4c8a-4b45-95f5-e0d143d5641e/international-visitors-london-raw.csv"}, {"url": "https://github.com/bloomberg/bqplot", "anchor_text": "bqplot"}, {"url": "https://github.com/jupyter-widgets/pythreejs", "anchor_text": "pythreejs"}, {"url": "https://github.com/maartenbreddels/ipyvolume", "anchor_text": "ipyvolume"}, {"url": "https://github.com/jupyter-widgets/ipyleaflet", "anchor_text": "ipyleaflet"}, {"url": "https://github.com/pbugnion/gmaps", "anchor_text": "gmaps"}, {"url": "https://ipywidgets.readthedocs.io/en/stable/examples/Widget%20Custom.html", "anchor_text": "here"}, {"url": "https://medium.com/@semika", "anchor_text": "\u2018Follow\u2019 me"}, {"url": "https://medium.com/tag/data-science?source=post_page-----bc12e03f0916---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----bc12e03f0916---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/tag/programming?source=post_page-----bc12e03f0916---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/tag/women-in-tech?source=post_page-----bc12e03f0916---------------women_in_tech-----------------", "anchor_text": "Women In Tech"}, {"url": "https://medium.com/tag/ds-in-the-real-world?source=post_page-----bc12e03f0916---------------ds_in_the_real_world-----------------", "anchor_text": "Ds In The Real World"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fbc12e03f0916&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbring-your-jupyter-notebook-to-life-with-interactive-widgets-bc12e03f0916&user=Semi+Koen&userId=aabf98f9b9a&source=-----bc12e03f0916---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fbc12e03f0916&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbring-your-jupyter-notebook-to-life-with-interactive-widgets-bc12e03f0916&user=Semi+Koen&userId=aabf98f9b9a&source=-----bc12e03f0916---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fbc12e03f0916&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbring-your-jupyter-notebook-to-life-with-interactive-widgets-bc12e03f0916&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----bc12e03f0916--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fbc12e03f0916&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbring-your-jupyter-notebook-to-life-with-interactive-widgets-bc12e03f0916&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----bc12e03f0916---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----bc12e03f0916--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----bc12e03f0916--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----bc12e03f0916--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----bc12e03f0916--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----bc12e03f0916--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----bc12e03f0916--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----bc12e03f0916--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----bc12e03f0916--------------------------------", "anchor_text": ""}, {"url": "https://semika.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://semika.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Semi Koen"}, {"url": "https://semika.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "7.7K Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Faabf98f9b9a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbring-your-jupyter-notebook-to-life-with-interactive-widgets-bc12e03f0916&user=Semi+Koen&userId=aabf98f9b9a&source=post_page-aabf98f9b9a--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F31f7468ed9ff&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbring-your-jupyter-notebook-to-life-with-interactive-widgets-bc12e03f0916&newsletterV3=aabf98f9b9a&newsletterV3Id=31f7468ed9ff&user=Semi+Koen&userId=aabf98f9b9a&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}