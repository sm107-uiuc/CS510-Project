{"url": "https://towardsdatascience.com/missing-data-effects-on-the-correlation-between-ice-cream-sales-and-temperature-f4bb2b3fcde1", "time": 1683016206.960253, "path": "towardsdatascience.com/missing-data-effects-on-the-correlation-between-ice-cream-sales-and-temperature-f4bb2b3fcde1/", "webpage": {"metadata": {"title": "Missing Data Effects on the Correlation Between Ice Cream Sales and Temperature | by Luciano Vilas Boas | Towards Data Science", "h1": "Missing Data Effects on the Correlation Between Ice Cream Sales and Temperature", "description": "Every single time I come across a data set that has no missing data, I instantaneously start to get very skeptical about the data integrity and the data cleaning that, supposedly, was done\u2026"}, "outgoing_paragraph_urls": [{"url": "https://www.mathsisfun.com/data/correlation.html", "anchor_text": "here", "paragraph_index": 30}, {"url": "https://www.imsbio.co.jp/RGM/R_rdfile?f=mvnmle/man/mlest.Rd&d=R_CC", "anchor_text": "here", "paragraph_index": 56}, {"url": "http://dept.stat.lsa.umich.edu/~jerrick/courses/stat701/notes/mi.html", "anchor_text": "here", "paragraph_index": 59}], "all_paragraphs": ["Every single time I come across a data set that has no missing data, I instantaneously start to get very skeptical about the data integrity and the data cleaning that, supposedly, was done beforehand.", "We should never close our eyes and avoid dealing with missing data. We need to investigate and comprehend why we may do not have missing data, and/or why we do have missing data. In any case, it does not hurt to ask, but moreover, it\u2019s our responsibility to truly care about the data we work with.", "Two rule of thumbs: always question a data set that has no missing data! Likewise, always question a data set that has missing data!", "While one might see that not having missing data is a good thing, which ultimately is, the reality is that it is very common to find datasets with missing data. This phenomenon can occur for a myriad of different reasons, and understanding why, is important in order to mitigate this problem. Our focus today will be on techniques we can use to better manage missing data, and not so much on why this happens.", "In particular, we will focus on missing data for numeric values, because that is usually the bottom neck when dealing with missing data, and where a LOT of people make mistakes.", "That said, there are basically two main approaches to deal with such a common problem:", "A- Dropping observations where missing data is present (such as rows and columns, for instance).", "B- Utilizing imputation to fill the blank space with a value, which is based on some statistical metric, or other parameters.", "One of the first things you want to do when exploring any data set is hunting down for missing values. Once you have detected the presence of NAs (missing values), you want to work on trying to understand why they are missing, and if the effort to get the \u201coriginal\u201d data is worthy or not. Or even if there is a possibility of doing so. You got to decide on this trade-off as quickly as possible.", "The truth is that, regardless of the technique you use to deal with the missing data, none of them will be better than having the original data. So, if you have the means, it\u2019s always good making an effort to get a data set with no missing data (that sounds very na\u00efve, huh?!).", "You can follow these three basic steps when first assessing a data set that you\u2019ve never seen before \u2014 assuming it has missing data:", "I \u2014 Get a total count of missing data. Establish an initial threshold for dealing with them. This will depend on the size and nature of your data set \u2014 there is no \u201cone size fits all\u201d solution here. For instance, if the total missing data just accounts for about ~1% of the total data, you may want to decide on dropping those observations. Remember, every time you delete features and/or observations, you are potentially reducing the power of your analysis.", "II \u2014 Explore the reasons we have missing data. One way to do that is to perform a test called \u201cLittle\u2019s Missing Completely at Random (MCAR) Test\u201d. This test will check whether or not the missing data are missing completely at random or not.", "III \u2014 Check for patterns on missing data. The common patterns are arbitrary (random) and monotone (systematic). To check patterns, you can plot a graph that helps you to visualize the missing data. Usually, the arbitrary, which tends to have a random pattern is the one we find the most.", "Alright, now that we\u2019ve scratched a little bit of the surface, let\u2019s circle back to our two main strategies to deal with missing data.", "I noticed that many research papers take this approach when facing missing data. In many cases, people decide to drop features and observations. I guess this seems like a \u201csafe place\u201d to be, but the reality is that by deleting data we reduce our chances to optimize our analysis. Because some data sets are difficult to get, we want to avoid dropping observations and features as much as possible.", "What one should do, is test different techniques and look for outputs that can give a better outcome. For that, consider the questions you are trying to answer, and the problems you are trying to solve. The perfect world is to not have missing data, but the truth is: real-world data, most likely, will have missing data, and there is not a perfect way or technique to deal with this issue.", "Here is where things get interesting. There are different imputations techniques available that we can pick from. Imputation can be scary, and in some cases not ideal. It\u2019s rough terrain, and maybe one of the reasons people just prefer to drop data off.", "In the next section, we will perform an experiment to see how three different ways to deal with missing data can influence, for example, the correlation between two variables: temperature and ice cream sales throughout a given year.", "In this experiment, I present you with three practical ways to deal with missing data:", "1- Dropping rows where missing data is present.", "2- Using mean/median to input values where we have missing data.", "3- Using Maximum Likelihood Estimation to input data.", "The idea is to show how these three techniques influence the correlation between ice cream sales and temperature. Moreover, we will see the worst and the best one to use. I caution you that, we have to understand that every data set is unique, so, you might get a different result if you try that on a different data set.", "The idea is to open the discussion and give the idea that we must experiment before, blinding, picking a technique.", "In the table below, you will see the values registered for all months of the year. We have all values for Temperature (in Fahrenheit), and the Monthly Sales ($). As you can see, there are no missing values.", "That\u2019s our starting pointing, and what we will use as a benchmark to analyze the impact of the techniques, we listed above, when deciding what to do when facing missing data.", "Below are some basic statistics of the original data set (with no NAs). You won\u2019t see the standard deviation here because I want to keep this simple and straightforward. However, depending on the technique you choose to deal with missing data, you can expect an effect of that on the standard deviation (and variance) as well.", "Also, here is a plot, so we can better visualize the events over time:", "Just by looking at the two plots, we can see a strong pattern. Both lines mimic each other. In other words, if one goes up, the other goes up as well, and vice-versa. I will not explore the concept between causation versus correlation here.", "However, the correlation between Temperature and Sales is about 0.96. This is a very strong correlation. In this case, it\u2019s a high positive correlation. Check this link here to learn a bit more.", "I won\u2019t cover collinearity in this post, but it\u2019s worth mention that, if we were working on a regression model, we would have to investigate for collinearity. In the next plot, we can find the correlation score and other insights like the distribution of these two variables we are studying.", "We can better visualize this strong correlation by plotting this following scatterplot, with the confidence interval. This will be an important plot to keep in mind when we start messing up with this data set.", "Okay, this was all very basic analysis. Many people would assume that, if the Temperature increases, the Ice Cream Sales would increase as well. Nothing really special up to this point, right?!", "The point of doing all of this was just to show an analysis performed on a \u201cperfect\u201d data set. By perfect, I just mean without missing data. Now we know how the real numbers look like.", "The problem when we first get a data set with missing values is that we would never know how things would look like IF we have all data (no NAs). That is the reason why I did all of this initial assessment, to show you the \u201cperfect world\u201d.", "Continuing on our experiment, we know introduce missing values into the data set. For example, looking at the following table, you\u2019ll notice that we don\u2019t know how much we sold in March (column \u201cMonthly Sales\u201d has NA for March, for example).", "In this approach, we are going to drop any row\u2014 in this case, month \u2014 that has missing data in any of the columns. This method is also known as \u201cComplete-Case Analysis\u201d. The problem with that is that, in this process, we ended up throwing out the original data that we had.", "As you can see below, after dropping all NAs, the entire data for March is gone. On top of that, we now have fewer observations. Instead of 12, we have 7.", "It turns out that, the correlation between Temperature and Sales is now 0.85. Although, we can say that this new correlation still strong, it was a significant drop already.", "The thing is that, when you drop variables using a real data set, you never know how much you\u2019ve lost. Here, we were able to measure a little bit of that and get a glance at how dropping variables can affect your analysis.", "Check out the next plot looks like, after dropping NAs:", "As a general rule of thumb, we should just decide on dropping variables, if the amount of missing data is small. Probably, somewhere in the neighborhood of 1% or so. Obviously, this is not set in stone, you have to experiment always.", "I confess I\u2019m guilty of that. I mean, who has never used the mean or median to input data before?! This is one of the most intuitive ideas that comes to one\u2019s mind. But please, from now on, do never use this method again.", "\u201cWe mean it, but I promise we\u2019re not mean\u201d \u2014 Lorde", "Using the same table used to drop the NAs, we know filled the missing values with the mean as follows:", "Keep in mind that using the mean or median, the results are quite similar. For simplicity, I am only showing the example using the mean. But, using the median is also bad \u2014 usually less harmful though.", "As shown above, know we kept the same number of observations \u2014 12 months \u2014 but the effects of using the mean were devastating.", "Our correlation went free falling. We have now a correlation score of 0.36 between Temperature and Sales. See below:", "In short, we can assume that there is no strong correlation between those two variables anymore. This is how bad using the mean was to our data set in this particular experiment.", "That totally shaped our analysis. Check this next graph out:", "Let\u2019s say you are in the business of selling Ice Cream. If you know that the Temperature will increase in the next week or so, normally, you would get prepare for an increment in your sales. But, with this weak correlation we got, you cannot go around and stock too much Ice Cream anymore!", "That\u2019s is because the confidence interval is too large. Although you can still expect to increase your sales, you cannot just bet on that too much. This alone complicates the decision-making process.", "In this scenario, people may find themselves \u201chaving\u201d to gamble, and that is definitely what we don\u2019t want to do!", "I mean, never use the mean!", "Can we do better than that? We sure can!", "One of the best methods to input data is the Maximum Likelihood Estimation (MLE). This method \u201cFinds the maximum likelihood estimates of the mean vector and variance-covariance matrix for multivariate normal data with (potentially) missing values.\u201d After getting the covariance scores, we need to convert that from covariance into correlation. Check the documentation here.", "As we see below, we got a correlation score of 0.93 between Temperature [2], and Sales [3].", "The downside of using this method is that we don\u2019t have much documentation available. Nevertheless, experimenting was the whole point of writing and doing all of these testings.", "There are other methods available that I didn\u2019t have the time to cover here, such as MICE (Multiple Imputation with Chained Equations). More here.", "In a nutshell, there is no magical formula to deal with missing data. What we want is, to mitigate the effect of having missing data in any given data set.", "The biggest takeaway is that we must experiment with different approaches for dealing with missing data. What worked here, might not work on a different data set (really?).", "My goal was to bring attention to this subject because people overlook it quite often. They pick one approach and they married to that. It is always good to try different things and see what gives you the best outcome possible.", "We saw here that using mean, was the worst method; but taking advantage of MLE was the best one. Dropping out missing values was better than using the mean.", "One of the limitations is because this data set is so tiny, and the correlation very strong, it can be hard to come to a sound conclusion. For instance, even when dropping the data, the correlation was still strong. This might not be the case when trying this technique on a different data set.", "Next time you come across a data set containing NAs, think about the possibilities you have in your belt to better deal with that. Just don\u2019t ever consider using the mean or median. Please.", "Warning! The data in this example has nothing to do with what we\u2019ve been talking about so far.", "Let me make sure to emphasize a good practice when handling missing data, particularly, when introducing imputation.", "Unfortunately, many people when imputing data, regardless of the method, tend to fill the missing values in the original feature (row/column). The problem with that, is that assuming you\u2019ll pass that data to somebody else to work with it, she/he will never know that we had missing data, and they will have no idea of the method you used either. On top of that, you can also forget that you did the imputation on the data set. Following this simple trick can help you with getting neat documentation processing.", "If you still don\u2019t get it, here is an illustration I came up with (this is all dumb/fictional data):", "Picture this, let\u2019s say you sell some electronics and for whatever reason, you don\u2019t have the Price for the Laptop item. You decide applying some imputation (IMP) to fill that space, but instead of doing this directly on the Price column, you create a new column \u2014 Price_IMP \u2014 and fill that blank space with a value. Next, you create an additional feature \u2014 Price_IMP_Y/N \u2014 to function as a binary indicator to quick eye spot where the imputation was applied. Voila! You just created a simple way to keep track of imputations.", "How you name your new features it\u2019s up to you and your team. The point here is that, whenever you are using imputation, you must indicate that someway somehow, and keep the original feature intact. Don\u2019t forget to disclose what method you used and why.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Data Scientist focused on Higher Education Administration."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Ff4bb2b3fcde1&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmissing-data-effects-on-the-correlation-between-ice-cream-sales-and-temperature-f4bb2b3fcde1&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmissing-data-effects-on-the-correlation-between-ice-cream-sales-and-temperature-f4bb2b3fcde1&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmissing-data-effects-on-the-correlation-between-ice-cream-sales-and-temperature-f4bb2b3fcde1&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmissing-data-effects-on-the-correlation-between-ice-cream-sales-and-temperature-f4bb2b3fcde1&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----f4bb2b3fcde1--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----f4bb2b3fcde1--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://lucianovilasboas-69787.medium.com/?source=post_page-----f4bb2b3fcde1--------------------------------", "anchor_text": ""}, {"url": "https://lucianovilasboas-69787.medium.com/?source=post_page-----f4bb2b3fcde1--------------------------------", "anchor_text": "Luciano Vilas Boas"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F4d23aa9f8387&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmissing-data-effects-on-the-correlation-between-ice-cream-sales-and-temperature-f4bb2b3fcde1&user=Luciano+Vilas+Boas&userId=4d23aa9f8387&source=post_page-4d23aa9f8387----f4bb2b3fcde1---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ff4bb2b3fcde1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmissing-data-effects-on-the-correlation-between-ice-cream-sales-and-temperature-f4bb2b3fcde1&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ff4bb2b3fcde1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmissing-data-effects-on-the-correlation-between-ice-cream-sales-and-temperature-f4bb2b3fcde1&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://www.freepik.com/user6694312", "anchor_text": "user6694312"}, {"url": "https://www.freepik.com/stolyevych-yuliya", "anchor_text": "stolyevych_yuliya"}, {"url": "https://www.mathsisfun.com/data/correlation.html", "anchor_text": "here"}, {"url": "https://www.mathsisfun.com/data/correlation.html", "anchor_text": "here"}, {"url": "https://www.imsbio.co.jp/RGM/R_rdfile?f=mvnmle/man/mlest.Rd&d=R_CC", "anchor_text": "here"}, {"url": "http://dept.stat.lsa.umich.edu/~jerrick/courses/stat701/notes/mi.html", "anchor_text": "here"}, {"url": "https://medium.com/tag/missing-values?source=post_page-----f4bb2b3fcde1---------------missing_values-----------------", "anchor_text": "Missing Values"}, {"url": "https://medium.com/tag/handling-missing-values?source=post_page-----f4bb2b3fcde1---------------handling_missing_values-----------------", "anchor_text": "Handling Missing Values"}, {"url": "https://medium.com/tag/data-science?source=post_page-----f4bb2b3fcde1---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Ff4bb2b3fcde1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmissing-data-effects-on-the-correlation-between-ice-cream-sales-and-temperature-f4bb2b3fcde1&user=Luciano+Vilas+Boas&userId=4d23aa9f8387&source=-----f4bb2b3fcde1---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Ff4bb2b3fcde1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmissing-data-effects-on-the-correlation-between-ice-cream-sales-and-temperature-f4bb2b3fcde1&user=Luciano+Vilas+Boas&userId=4d23aa9f8387&source=-----f4bb2b3fcde1---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ff4bb2b3fcde1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmissing-data-effects-on-the-correlation-between-ice-cream-sales-and-temperature-f4bb2b3fcde1&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----f4bb2b3fcde1--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Ff4bb2b3fcde1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmissing-data-effects-on-the-correlation-between-ice-cream-sales-and-temperature-f4bb2b3fcde1&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----f4bb2b3fcde1---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----f4bb2b3fcde1--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----f4bb2b3fcde1--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----f4bb2b3fcde1--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----f4bb2b3fcde1--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----f4bb2b3fcde1--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----f4bb2b3fcde1--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----f4bb2b3fcde1--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----f4bb2b3fcde1--------------------------------", "anchor_text": ""}, {"url": "https://lucianovilasboas-69787.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://lucianovilasboas-69787.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Luciano Vilas Boas"}, {"url": "https://lucianovilasboas-69787.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "45 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F4d23aa9f8387&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmissing-data-effects-on-the-correlation-between-ice-cream-sales-and-temperature-f4bb2b3fcde1&user=Luciano+Vilas+Boas&userId=4d23aa9f8387&source=post_page-4d23aa9f8387--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F7c83dca3f1a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmissing-data-effects-on-the-correlation-between-ice-cream-sales-and-temperature-f4bb2b3fcde1&newsletterV3=4d23aa9f8387&newsletterV3Id=7c83dca3f1a&user=Luciano+Vilas+Boas&userId=4d23aa9f8387&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}