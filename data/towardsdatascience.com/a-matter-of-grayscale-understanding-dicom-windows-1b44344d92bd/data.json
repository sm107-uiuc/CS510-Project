{"url": "https://towardsdatascience.com/a-matter-of-grayscale-understanding-dicom-windows-1b44344d92bd", "time": 1683016315.376578, "path": "towardsdatascience.com/a-matter-of-grayscale-understanding-dicom-windows-1b44344d92bd/", "webpage": {"metadata": {"title": "A Matter of Grayscale: Understanding Dicom Windows | by Amrit Virdee | Towards Data Science", "h1": "A Matter of Grayscale: Understanding Dicom Windows", "description": "DICOM images typically contain between 12\u201316 bits/pixel, which corresponds to approximately 4,096 to 65,536 shades of gray\u00b9. Most medical displays and regular computer screens are often limited to 8\u2026"}, "outgoing_paragraph_urls": [{"url": "https://www.kaggle.com/c/rsna-str-pulmonary-embolism-detection", "anchor_text": "dataset", "paragraph_index": 8}, {"url": "https://github.com/fastai/fastai", "anchor_text": "fastai", "paragraph_index": 8}, {"url": "https://github.com/asvcode/MedicalImaging", "anchor_text": "github", "paragraph_index": 9}, {"url": "https://github.com/asvcode/MedicalImaging", "anchor_text": "page", "paragraph_index": 9}, {"url": "https://asvcode.github.io/MedicalImaging/", "anchor_text": "tutorial blog on medical imaging", "paragraph_index": 9}, {"url": "https://towardsdatascience.com/understanding-dicoms-835cd2e57d0b", "anchor_text": "Understanding DICOMS", "paragraph_index": 27}, {"url": "https://www.ncbi.nlm.nih.gov/pmc/articles/PMC3043920/", "anchor_text": "1) Increasing the Number of Gray Shades in Medical Display Systems \u2014 How Much is Enough?", "paragraph_index": 28}, {"url": "https://www.youtube.com/watch?v=KZld-5W99cI", "anchor_text": "2) Understanding CT windows, levels and densities", "paragraph_index": 29}], "all_paragraphs": ["DICOM images typically contain between 12\u201316 bits/pixel, which corresponds to approximately 4,096 to 65,536 shades of gray\u00b9. Most medical displays and regular computer screens are often limited to 8 bits or 256 shades of gray. There are high end medical displays that can display 1024 shades of gray (like the ones optimized for mammography).", "However even with a computer screen that can display 256 shades of gray our eyes can typically only detect a 6% change in grayscale\u00b2", "That means we can typically only detect about 100/6 = 17 shades of gray.", "The Hounsfield Unit\u00b3(HU) scale is a quantitative scale used for describing radiodensity. It applies a linear transformation where the radiodensity of distilled water at standard pressure and temperature (STP) is defined as 0 HU, while the radiodensity of air at STP is defined as -1000 HU.", "Most images will require viewing between -1000 HU (which is a reference for air) and +1000 HU (which typically references hard bone).", "So a DICOM image can have a range of approximately 2000 HU (from -1000 HU to +1000 HU) and if we wanted to display this range on a computer screen which can only display 256 shades of grey:", "Then each shade of gray would have a difference of 8 HU.", "The human eye can only detect a 6% change in grayscale so for humans to detect a difference in densities (within the image range of 2000 HU), each variation has to vary by: 256/17\u22178=120 HU. The difference between normal and pathologically altered tissue is usually a lot less than 120 HU and this is why applying windows is important.", "To explain how windowing works we use this dataset, import the fastai libraries and load a test image.", "For more information on how to use fastai\u2019s medical imaging module head over to my github page or my tutorial blog on medical imaging(which is better for viewing notebook tutorials :))", "The difference when using fastai is that by default it will display the normalized image when the show function is used.", "Clearly there is a lot more depth displayed in the image. However this can be an issue when trying to localize areas that are normal to those that have been pathologically altered due to a condition. In most cases the difference in Hounsfield units between normal and pathologically altered tissue can be very small.", "The normalized image displays a wide range of tissue densities(ranging from -1000HU (air) to around +1000HU (bone)). As mentioned above a regular computer screen can only display 256 shades of grey and our eye can only deduct about a 6% change in grayscale\u00b2", "The basis of applying windows is to focus down the 256 shades of grey into a narrow region of Hounsfled units that contain the relevant densities of tissues we may be interested in.", "The fastai medical imaging library conveniently provides a number of window ranges that can be used by its windowed function. The windows can be called by using dicom_windows", "Window pixel values are calculated using the following formulas:", "Using the brain window as an example: it has a window width of 80 and a window level of 40.", "In this case the lowest_visible_value will be 0 and the highest_visible_value of 80. This means that every pixel value greater than 80 will show up as white and any value below 0 will show up as black.", "To see what this looks like at the pixel level we can scale down to a small portion of the image and see what effect windowing has.", "Scale down even further (picture above is to illustrate the area of the image we are looking at)", "We can now plot each pixel value", "Using the lung window which has a window width of 1500 and a window level of -600.", "In this case the lowest_visible_value will be -1350 and the highest_visible_value of +150. This means that every pixel value greater than +150 will show up as white and any value below -1350 will show up as black.", "The pixel intensities have been scaled to values within the window range. To check that the window range is working as planned we can compare the pixel values of the original and the windowed image. Any pixel value above +150 will show up as white and any pixel value below -1350 will show up as black with various shades between those values.", "Starting with the first pixel on the left, pixel value of 234 is higher than the highest_visible_value of +150 so this pixel will show up as white on the windowed image (represented by a 1.0). The pixel value at column 21 is -731 which is not below the lowest_visible_value of -1350 so will not be shown as black but is represented by a shaded color(depending on the cmap setting) with a value of 0.4.", "There are numerous window ranges as specified indicom_windows or you could create your own by specifying the window width and window center. These are the most common window ranges used when particularly looking at images of the lungs.", "Each window highlights particular ranges that make it easier for a radiologist to see if there are any changes between normal and pathologically altered tissue. If we compare the 3 images above with a non-windowed image we can clearly see why windowing is important.", "If you are interested in learning more about DICOMs you can read my article Understanding DICOMS which is also published in Towards Data Science.", "(1) Increasing the Number of Gray Shades in Medical Display Systems \u2014 How Much is Enough?", "(2) Understanding CT windows, levels and densities", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Machine Learning Researcher| Health Informatics | Pharmacist | Mapping Medication"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F1b44344d92bd&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-matter-of-grayscale-understanding-dicom-windows-1b44344d92bd&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-matter-of-grayscale-understanding-dicom-windows-1b44344d92bd&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-matter-of-grayscale-understanding-dicom-windows-1b44344d92bd&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-matter-of-grayscale-understanding-dicom-windows-1b44344d92bd&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----1b44344d92bd--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----1b44344d92bd--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@pillview?source=post_page-----1b44344d92bd--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@pillview?source=post_page-----1b44344d92bd--------------------------------", "anchor_text": "Amrit Virdee"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F4e42e92485d8&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-matter-of-grayscale-understanding-dicom-windows-1b44344d92bd&user=Amrit+Virdee&userId=4e42e92485d8&source=post_page-4e42e92485d8----1b44344d92bd---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F1b44344d92bd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-matter-of-grayscale-understanding-dicom-windows-1b44344d92bd&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F1b44344d92bd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-matter-of-grayscale-understanding-dicom-windows-1b44344d92bd&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://web.archive.org/web/20070926231241/http://www.intl.elsevierhealth.com/e-books/pdf/940.pdf", "anchor_text": "[Image Credit]"}, {"url": "https://www.kaggle.com/c/rsna-str-pulmonary-embolism-detection", "anchor_text": "dataset"}, {"url": "https://github.com/fastai/fastai", "anchor_text": "fastai"}, {"url": "https://github.com/asvcode/MedicalImaging", "anchor_text": "github"}, {"url": "https://github.com/asvcode/MedicalImaging", "anchor_text": "page"}, {"url": "https://asvcode.github.io/MedicalImaging/", "anchor_text": "tutorial blog on medical imaging"}, {"url": "https://github.com/fastai/fastai/blob/master/nbs/60_medical.imaging.ipynb", "anchor_text": "[credit]"}, {"url": "https://towardsdatascience.com/understanding-dicoms-835cd2e57d0b", "anchor_text": "Understanding DICOMS"}, {"url": "https://www.ncbi.nlm.nih.gov/pmc/articles/PMC3043920/", "anchor_text": "1) Increasing the Number of Gray Shades in Medical Display Systems \u2014 How Much is Enough?"}, {"url": "https://www.youtube.com/watch?v=KZld-5W99cI", "anchor_text": "2) Understanding CT windows, levels and densities"}, {"url": "https://en.wikipedia.org/wiki/Hounsfield_scale", "anchor_text": "3) Hounsfield scale"}, {"url": "https://medium.com/tag/medical?source=post_page-----1b44344d92bd---------------medical-----------------", "anchor_text": "Medical"}, {"url": "https://medium.com/tag/medical-imaging?source=post_page-----1b44344d92bd---------------medical_imaging-----------------", "anchor_text": "Medical Imaging"}, {"url": "https://medium.com/tag/fastai?source=post_page-----1b44344d92bd---------------fastai-----------------", "anchor_text": "Fastai"}, {"url": "https://medium.com/tag/dicom?source=post_page-----1b44344d92bd---------------dicom-----------------", "anchor_text": "Dicom"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F1b44344d92bd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-matter-of-grayscale-understanding-dicom-windows-1b44344d92bd&user=Amrit+Virdee&userId=4e42e92485d8&source=-----1b44344d92bd---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F1b44344d92bd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-matter-of-grayscale-understanding-dicom-windows-1b44344d92bd&user=Amrit+Virdee&userId=4e42e92485d8&source=-----1b44344d92bd---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F1b44344d92bd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-matter-of-grayscale-understanding-dicom-windows-1b44344d92bd&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----1b44344d92bd--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F1b44344d92bd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-matter-of-grayscale-understanding-dicom-windows-1b44344d92bd&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----1b44344d92bd---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----1b44344d92bd--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----1b44344d92bd--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----1b44344d92bd--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----1b44344d92bd--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----1b44344d92bd--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----1b44344d92bd--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----1b44344d92bd--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----1b44344d92bd--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@pillview?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@pillview?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Amrit Virdee"}, {"url": "https://medium.com/@pillview/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "215 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F4e42e92485d8&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-matter-of-grayscale-understanding-dicom-windows-1b44344d92bd&user=Amrit+Virdee&userId=4e42e92485d8&source=post_page-4e42e92485d8--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F2a80a0ca8ac0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-matter-of-grayscale-understanding-dicom-windows-1b44344d92bd&newsletterV3=4e42e92485d8&newsletterV3Id=2a80a0ca8ac0&user=Amrit+Virdee&userId=4e42e92485d8&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}