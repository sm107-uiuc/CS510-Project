{"url": "https://towardsdatascience.com/mapping-locations-of-reported-pot-holes-in-toronto-using-python-376402d8da53", "time": 1682995333.995459, "path": "towardsdatascience.com/mapping-locations-of-reported-pot-holes-in-toronto-using-python-376402d8da53/", "webpage": {"metadata": {"title": "Mapping Locations of Reported Pot Holes in Toronto using Python | by Mumtahin Monzoor | Towards Data Science", "h1": "Mapping Locations of Reported Pot Holes in Toronto using Python", "description": "Welcome to my first tutorial on visualizing locations of reported pot holes around Toronto. My name is Mumtahin and I am a Data Science professional currently working in the Canadian Payments\u2026"}, "outgoing_paragraph_urls": [{"url": "https://www.toronto.ca/city-government/data-research-maps/open-data/open-data-catalogue/#e2634d40-0dbf-4d91-12fa-83f039307e93", "anchor_text": "open data", "paragraph_index": 1}, {"url": "https://github.com/mmonzoor/introductory_pot_hole_viz", "anchor_text": "repository", "paragraph_index": 1}, {"url": "https://medium.com/codingthesmartway-com-blog/getting-started-with-jupyter-notebook-for-python-4e7082bd5d46", "anchor_text": "here", "paragraph_index": 3}, {"url": "http://www.mmonzoor.com/pot_holes.html", "anchor_text": "http://www.mmonzoor.com/pot_holes.html", "paragraph_index": 19}], "all_paragraphs": ["Welcome to my first tutorial on visualizing locations of reported pot holes around Toronto. My name is Mumtahin and I am a Data Science professional currently working in the Canadian Payments industry. The biggest skill for both data analytics and data science projects involves understanding data preparation. The amount of work needed to gather data for analytics / research varies on the task at hand. My aim for this tutorial is to provide a basic introduction to cleaning data and graphically representing it because this has been one of the key aspects of my day to day assignments.", "For this tutorial, we will be fetching structured data in JSON format from a publicly accessible API endpoint provided by open data (maintained by the City of Toronto). You can read through this article and understand the step by step process or if you are familiar with the concepts below feel free use the Jupyter Notebook in my Github repository for your own exploration!", "For this tutorial, please make sure you have a version of Python 3 installed. I am using Python 3.6.6.", "If you want to set up and run my Jupyter Notebook, make sure you have Jupyter notebook installed. For a short and beginner friendly tutorial on setting up Jupyter Notebook, please go here.", "We have an API endpoint hit provided by 311 Toronto. First, we need to construct a query with parameters that reflect the information we actually want. The API we are going to connect with has data on a wide array topics such as data on reports for garbage collection, graffiti removal, and other city services along with the actual pot hole data we want. It doesn\u2019t make sense for us to query and potentially bog down servers to fetch information that we do not want in the first place.", "So far, what do we know? We know we want just data related to reported pot holes. According to the README doc posted by 311 and looking at the open data catalogue, we also know the following information:", "When deciding a date range, it is hard to pick a meaningful time that shows us valuable results. Since our analysis is on pot holes some prior knowledge about the cause of pot holes can be helpful. During the time of deep freezing and thawing results in cracks on the road which is responsible for causing pot holes. As I am writing the article, Toronto is going through periods of freezing and thawing resulting in the city experiencing higher than usual reports. Based on this knowledge, it will be interesting to view the data for the last 4 months.", "Given that we want 4 months of data, it is important to keep in mind the maximum record limit that is set in place for API response. The 311 Toronto API has a limit of 1000 records in its response object. Having a size limit or a rate limit when working with APIs is fairly common. This is a way to ensure that 311 Toronto\u2019s servers are not overloaded trying to full-fill a bunch of requests and can provide a good quality of service. In order to comply to 1000 record limit, I first spot checked total number of records from various months. I found that on average data from a month period is below the 1000 record limit. Given that recently the city has had higher than usual reports, our data may get cut off by the limit but we should still still have enough data points for our visualization. We are going to take our date range (4 months) and partition it into 29 day periods and make synchronous requests for each of the 29 day chunks.", "Now that we have a function that chunks the days, we will go ahead and pick our start and end range dates. We know that pot holes are problematic during the season of freezing and thawing around late winter and spring. Knowing this, it would be interesting to look at data from this winter because we have had some alternating cold days and warm days. We have defined our date parameters below but feel free to grab this notebook from my Github and change the dates around for more insight. If you run the notebook in my repository or create your own version based on this tutorial, feel free to play around with the date ranges.", "Using the function written above, we have a list of dates reflecting the chunks of date ranges. From this list, I am going to take every even index item as my start date and every odd item index as my end date.", "Using the parameters we already know from the 311 Readme doc, we can add parameters like service_code, jursidiction_id, start_date, and end_date. Our API request will take each of the start and end date range partitions from above. We will make 5 in total.", "Now that we have a giant list (data_clob) containing nested JSON of the returned results, we see that every item starts with the key \u2018service_requests\u2019. We are interested in the value of each \u2018service_requests\u2019.", "Pandas can read your data from a bunch of formats like csv, dictionary, lists, SQL queries and put it into a data frame for you. If you explore this dataframe, you can see that we have some important columns like long (longitude) and lat(for latitude).", "Based on the information from the README doc, we can drop the following columns: \u2018agency_responsible\u2019, \u2018service_notice\u2019, and \u2018zipcode\u2019.", "We can calculate the estimated number of days for investigating a report based on the time different between \u2018requested_datetime\u2019 and \u2018updated_datetime\u2019. The \u2018expected_datetime\u2019 seems to indicate the expected date to fix the pot hole but it commonly gets populated with a constant date value. I am unsure as to what the reasoning behind this auto-population is for some reports.", "In the gist below, I take string date values for requested_datetime, updated_datetime, and expected_datetime and convert to datetime object with pandas\u2019 to_datetime method (line 4, 5, and 6).", "Once we have our dataframe, we calculate the mean days required for investigations and repairs. Using these mean values, we set up a threshold that decides if a service request was slow or quick.", "Using the breakdown above, we took the corresponding longitude and latitude to map the location of the pot holes using mplleaflet.", "The file above saves as an HTML which contains our final visualization.", "You can view the interactive result here: http://www.mmonzoor.com/pot_holes.html", "So far we have learned about working with structured data like JSON objects, making API calls through GET requests, cleaning data with pandas, and visualizing the cleaned data through matplotlib. Now that you have a clean dataframe, feel free to investigate problems or questions that you maybe wondering about your city. If your city has an available open data catalogue like 311 Toronto, try mimicking this tutorial and maybe you will find out some interesting insights! I hope this tutorial was helpful and I am willing to answer any questions to the best of my knowledge so feel free to comment.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Data Science Professional working in the Canadian Payments Industry. Hobbies include travelling, trying out new food, and reading!"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F376402d8da53&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmapping-locations-of-reported-pot-holes-in-toronto-using-python-376402d8da53&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmapping-locations-of-reported-pot-holes-in-toronto-using-python-376402d8da53&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmapping-locations-of-reported-pot-holes-in-toronto-using-python-376402d8da53&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmapping-locations-of-reported-pot-holes-in-toronto-using-python-376402d8da53&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----376402d8da53--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----376402d8da53--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@mmonzoor?source=post_page-----376402d8da53--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@mmonzoor?source=post_page-----376402d8da53--------------------------------", "anchor_text": "Mumtahin Monzoor"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fc91b37f5823d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmapping-locations-of-reported-pot-holes-in-toronto-using-python-376402d8da53&user=Mumtahin+Monzoor&userId=c91b37f5823d&source=post_page-c91b37f5823d----376402d8da53---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F376402d8da53&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmapping-locations-of-reported-pot-holes-in-toronto-using-python-376402d8da53&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F376402d8da53&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmapping-locations-of-reported-pot-holes-in-toronto-using-python-376402d8da53&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://www.toronto.ca/city-government/data-research-maps/open-data/open-data-catalogue/#e2634d40-0dbf-4d91-12fa-83f039307e93", "anchor_text": "open data"}, {"url": "https://github.com/mmonzoor/introductory_pot_hole_viz", "anchor_text": "repository"}, {"url": "https://medium.com/codingthesmartway-com-blog/getting-started-with-jupyter-notebook-for-python-4e7082bd5d46", "anchor_text": "here"}, {"url": "https://secure.toronto.ca/webwizard/ws/requests.json?", "anchor_text": "https://secure.toronto.ca/webwizard/ws/requests.json?"}, {"url": "http://www.mmonzoor.com/pot_holes.html", "anchor_text": "http://www.mmonzoor.com/pot_holes.html"}, {"url": "https://github.com/mmonzoor/introductory_pot_hole_viz", "anchor_text": "mmonzoor/introductory_pot_hole_vizContribute to mmonzoor/introductory_pot_hole_viz development by creating an account on GitHub.github.com"}, {"url": "https://medium.com/tag/data-science?source=post_page-----376402d8da53---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/data-analytics?source=post_page-----376402d8da53---------------data_analytics-----------------", "anchor_text": "Data Analytics"}, {"url": "https://medium.com/tag/data-visualization?source=post_page-----376402d8da53---------------data_visualization-----------------", "anchor_text": "Data Visualization"}, {"url": "https://medium.com/tag/toronto?source=post_page-----376402d8da53---------------toronto-----------------", "anchor_text": "Toronto"}, {"url": "https://medium.com/tag/python?source=post_page-----376402d8da53---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F376402d8da53&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmapping-locations-of-reported-pot-holes-in-toronto-using-python-376402d8da53&user=Mumtahin+Monzoor&userId=c91b37f5823d&source=-----376402d8da53---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F376402d8da53&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmapping-locations-of-reported-pot-holes-in-toronto-using-python-376402d8da53&user=Mumtahin+Monzoor&userId=c91b37f5823d&source=-----376402d8da53---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F376402d8da53&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmapping-locations-of-reported-pot-holes-in-toronto-using-python-376402d8da53&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----376402d8da53--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F376402d8da53&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmapping-locations-of-reported-pot-holes-in-toronto-using-python-376402d8da53&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----376402d8da53---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----376402d8da53--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----376402d8da53--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----376402d8da53--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----376402d8da53--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----376402d8da53--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----376402d8da53--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----376402d8da53--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----376402d8da53--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@mmonzoor?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@mmonzoor?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Mumtahin Monzoor"}, {"url": "https://medium.com/@mmonzoor/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "29 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fc91b37f5823d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmapping-locations-of-reported-pot-holes-in-toronto-using-python-376402d8da53&user=Mumtahin+Monzoor&userId=c91b37f5823d&source=post_page-c91b37f5823d--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fusers%2Fc91b37f5823d%2Flazily-enable-writer-subscription&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmapping-locations-of-reported-pot-holes-in-toronto-using-python-376402d8da53&user=Mumtahin+Monzoor&userId=c91b37f5823d&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}