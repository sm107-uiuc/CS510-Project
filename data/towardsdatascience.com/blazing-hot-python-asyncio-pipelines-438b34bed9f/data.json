{"url": "https://towardsdatascience.com/blazing-hot-python-asyncio-pipelines-438b34bed9f", "time": 1683016312.099086, "path": "towardsdatascience.com/blazing-hot-python-asyncio-pipelines-438b34bed9f/", "webpage": {"metadata": {"title": "Blazing Hot Python AsyncIO Pipelines | by Dewald Abrie | Towards Data Science", "h1": "Blazing Hot Python AsyncIO Pipelines", "description": "Pipelined functions can be very powerful for memory efficient and readable code. These are functions where the output of the one feeds into the input of the next. Some example applications would be\u2026"}, "outgoing_paragraph_urls": [], "all_paragraphs": ["Pipelined functions can be very powerful for memory efficient and readable code. These are functions where the output of the one feeds into the input of the next. Some example applications would be:", "Using Python\u2019s asyncio library for concurrent operations is fast and resource efficient, especially for IO-bound tasks.", "This article will show you how to build your own pipelines that can run very efficiently, especially if you do a lot of IO operations like web requests or database queries. A followup article will make it even easier by providing a library to abstract away most of the underlying mechanics shown below.", "Python generators have a send() method which can be used to send data into the generator when it calls yield. Put this into an infinite loop, and you get a stage in your pipeline that constantly waits for input, does something with it and sends to the next stage.", "You can use this kind of push-based approach to send to multiple other generators in a fan-out pattern, hence we assume we have a list of target generators.", "When we create our generator from our generator function, we have to prime it by sending in None. This makes the generator advance through the function code until it hits the first yield statement.", "We can wait for input using our synchronous python generator, but process that input (simulated by the sleep function) asynchronously using a coroutine. We do this by putting the processing and sending code in the async def inner function.", "On each iteration in the loop we get an input value and spawn an asyncio task. We keep track of all the spawned tasks in a global tasks list.", "Our main function also has to be a coroutine which is run in an event loop. This is done by asyncio.run(main()). Note how \u2014 inside main \u2014 we await all the tasks to finish using the async.gather() function. This has to be done twice since we submit tasks in two stages. Pretty awkward for now.", "The asyncio.Queue class also has a handy task_done() method. The queue object tracks how many times get() and task_done() has been called. If the same number of times, it assumes all items that have been taken from the queue have also been processed and it allows itself to be joined (if the queue is empty). This allows us to await on q.join() in order know if a stage is complete and we can avoid calling asyncio.gather() multiple times.", "We can create simple synchronous pipelines by using python generators. By swapping to asyncio queues and coroutines, we can have very efficient IO pipelines and stay in control of our spawned tasks.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Exploring the limits of software, data, and ML."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F438b34bed9f&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fblazing-hot-python-asyncio-pipelines-438b34bed9f&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fblazing-hot-python-asyncio-pipelines-438b34bed9f&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fblazing-hot-python-asyncio-pipelines-438b34bed9f&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fblazing-hot-python-asyncio-pipelines-438b34bed9f&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----438b34bed9f--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----438b34bed9f--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://dewaldabrie.medium.com/?source=post_page-----438b34bed9f--------------------------------", "anchor_text": ""}, {"url": "https://dewaldabrie.medium.com/?source=post_page-----438b34bed9f--------------------------------", "anchor_text": "Dewald Abrie"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F84212e2d5238&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fblazing-hot-python-asyncio-pipelines-438b34bed9f&user=Dewald+Abrie&userId=84212e2d5238&source=post_page-84212e2d5238----438b34bed9f---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F438b34bed9f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fblazing-hot-python-asyncio-pipelines-438b34bed9f&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F438b34bed9f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fblazing-hot-python-asyncio-pipelines-438b34bed9f&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@joshuanewton?utm_source=medium&utm_medium=referral", "anchor_text": "Joshua Newton"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://medium.com/tag/asyncio?source=post_page-----438b34bed9f---------------asyncio-----------------", "anchor_text": "Asyncio"}, {"url": "https://medium.com/tag/data-science?source=post_page-----438b34bed9f---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/data-engineering?source=post_page-----438b34bed9f---------------data_engineering-----------------", "anchor_text": "Data Engineering"}, {"url": "https://medium.com/tag/concurrency?source=post_page-----438b34bed9f---------------concurrency-----------------", "anchor_text": "Concurrency"}, {"url": "https://medium.com/tag/directed-acyclic-graph?source=post_page-----438b34bed9f---------------directed_acyclic_graph-----------------", "anchor_text": "Directed Acyclic Graph"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F438b34bed9f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fblazing-hot-python-asyncio-pipelines-438b34bed9f&user=Dewald+Abrie&userId=84212e2d5238&source=-----438b34bed9f---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F438b34bed9f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fblazing-hot-python-asyncio-pipelines-438b34bed9f&user=Dewald+Abrie&userId=84212e2d5238&source=-----438b34bed9f---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F438b34bed9f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fblazing-hot-python-asyncio-pipelines-438b34bed9f&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----438b34bed9f--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F438b34bed9f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fblazing-hot-python-asyncio-pipelines-438b34bed9f&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----438b34bed9f---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----438b34bed9f--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----438b34bed9f--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----438b34bed9f--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----438b34bed9f--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----438b34bed9f--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----438b34bed9f--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----438b34bed9f--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----438b34bed9f--------------------------------", "anchor_text": ""}, {"url": "https://dewaldabrie.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://dewaldabrie.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Dewald Abrie"}, {"url": "https://dewaldabrie.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "26 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F84212e2d5238&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fblazing-hot-python-asyncio-pipelines-438b34bed9f&user=Dewald+Abrie&userId=84212e2d5238&source=post_page-84212e2d5238--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Ff9eab37f52a1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fblazing-hot-python-asyncio-pipelines-438b34bed9f&newsletterV3=84212e2d5238&newsletterV3Id=f9eab37f52a1&user=Dewald+Abrie&userId=84212e2d5238&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}