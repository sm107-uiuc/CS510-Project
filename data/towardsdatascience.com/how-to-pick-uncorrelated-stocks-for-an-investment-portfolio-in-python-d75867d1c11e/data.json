{"url": "https://towardsdatascience.com/how-to-pick-uncorrelated-stocks-for-an-investment-portfolio-in-python-d75867d1c11e", "time": 1683015696.426233, "path": "towardsdatascience.com/how-to-pick-uncorrelated-stocks-for-an-investment-portfolio-in-python-d75867d1c11e/", "webpage": {"metadata": {"title": "How to pick uncorrelated stocks for an investment portfolio in Python | by Gianluca Malato | Towards Data Science", "h1": "How to pick uncorrelated stocks for an investment portfolio in Python", "description": "Portfolio investing is a fascinating kind of investment that can potentially lead to satisfactory returns. According to Modern Portfolio Theory, it\u2019s always a good idea to select stocks or ETFs that\u2026"}, "outgoing_paragraph_urls": [{"url": "https://towardsdatascience.com/questions-96667b06af5", "anchor_text": "rules and guidelines", "paragraph_index": 2}, {"url": "https://towardsdatascience.com/readers-terms-b5d780a700a4", "anchor_text": "Reader Terms", "paragraph_index": 2}, {"url": "https://github.com/gianlucamalato/machinelearning/blob/master/Stocks_correlation.ipynb", "anchor_text": "https://github.com/gianlucamalato/machinelearning/blob/master/Stocks_correlation.ipynb", "paragraph_index": 10}, {"url": "https://github.com/datasets/s-and-p-500-companies/tree/master/data", "anchor_text": "https://github.com/datasets/s-and-p-500-companies/tree/master/data", "paragraph_index": 11}, {"url": "http://YourDataTeacher.com", "anchor_text": "YourDataTeacher.com", "paragraph_index": 23}], "all_paragraphs": ["Portfolio investing is a fascinating kind of investment that can potentially lead to satisfactory returns. According to Modern Portfolio Theory, it\u2019s always a good idea to select stocks or ETFs that show a low correlation.", "Let\u2019s see why and how to select stocks measuring their correlation in Python.", "Note from Towards Data Science\u2019s editors: While we allow independent authors to publish articles in accordance with our rules and guidelines, we do not endorse each author\u2019s contribution. You should not rely on an author\u2019s works without seeking professional advice. See our Reader Terms for details.", "Correlation between stocks is a measure of how the returns of a stock interfere with the returns of another one. If two stocks are highly correlated, they will likely move in the same direction (i.e. if a stock price rises, the other stock price rises too) or in the opposite direction.", "Mathematically speaking, the linear correlation index between two stocks, say a and b, is defined as:", "where the numerator is the covariance between the stocks and denominator is the product of the standard deviations.", "This number spans from -1 to 1. If it\u2019s -1, the stocks move in the opposite directions (i.e. if one stock rises, the other stock goes down), if it\u2019s equal to 1, the stock move perfectly in the same direction. If it\u2019s equal to 0, the stocks are uncorrelated and their movements are independent of each other. We must look for these uncorrelated stocks.", "If we build a portfolio made by some stocks and their weights are x, the variance of the portfolio is:", "So, as long as the correlation between stocks is positive, the variance of our portfolio increases with respect to the sum of the variances and so does its risk. Some may argue that we would like stocks that are negatively correlated, but in this case, there wouldn\u2019t be any return, because if a stock rises, the other stock falls and the net return is 0.", "So, the idea is to keep our stocks uncorrelated in order to remove the second term and avoid a higher variance. That is the purpose of a branch of Modern Portfolio Theory and there are mathematical tools that allow us to optimize variance according to the weights x. For this article, we are going to focus on selecting those stocks that show an absolute value of the linear correlation nearly equal to 0.", "In this part of the article, we are going to work with S&P 500 stocks and we are going to find the couples of stocks that are less correlated to each other. Everything can be found in my GitHub repository: https://github.com/gianlucamalato/machinelearning/blob/master/Stocks_correlation.ipynb", "We\u2019re going to use pandas library to perform all the calculations, while the list of S&P constituents will be downloaded from this GitHub repository: https://github.com/datasets/s-and-p-500-companies/tree/master/data", "First of all, let\u2019s import some useful libraries:", "Then we want to get all the S&P 500 stocks in a historical time range, for example from 2018 to 2019. Let\u2019s first download S&P 500 historical data in order to get the effective trading days in this period.", "Now we can scroll the tickers data frame and download the historical data for each symbol. Since some stocks in our list may have been delisted or may be too new, we check if each stock has been traded in the trading days of the S&P 500. If not, we discard the stock. This happens if the stock is not part of S&P 500 anymore or if it\u2019s too new according to our historical time range. Since we want to have a homogeneous time interval, we discard such stocks.", "Then, for each stock, we calculate the daily percentage return.", "This is the total data frame. Each column is the daily return of a stock whose name is the name of the column. The index is the date.", "We can now calculate the linear correlation between each stock using the Pandas\u2019 \u201ccorr\u201d method, then we can normalize this table using the \u201cmelt\u201d method to transpose the columns into rows.", "As you can see, we have the correlation of each stock with itself (which is obviously 1) and we get the correlation of stock A with stock B and of B with A, which is the same since correlation is symmetrical. We can remove these useless records and calculate the absolute value of the correlation index.", "Then we can sort our table by the absolute value ascending, so we have the less correlated pairs of stocks in the first records.", "And, finally, this is the table of the less correlated pairs of stocks of S&P 500 in the 2018\u20132019 period.", "Calculating the correlation between stocks is useful and must be done by every portfolio investor. However, the correlation may change during time, so it may be useful to calculate it periodically in order to adjust an investment portfolio and to make it not suffer from sudden correlations that may increase the overall risk.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Theoretical Physicists, Data Scientist and fiction author. I teach Data Science, statistics and SQL on YourDataTeacher.com. E-mail: gianluca@gianlucamalato.it"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fd75867d1c11e&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-pick-uncorrelated-stocks-for-an-investment-portfolio-in-python-d75867d1c11e&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-pick-uncorrelated-stocks-for-an-investment-portfolio-in-python-d75867d1c11e&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-pick-uncorrelated-stocks-for-an-investment-portfolio-in-python-d75867d1c11e&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-pick-uncorrelated-stocks-for-an-investment-portfolio-in-python-d75867d1c11e&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----d75867d1c11e--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----d75867d1c11e--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://gianlucamalato.medium.com/?source=post_page-----d75867d1c11e--------------------------------", "anchor_text": ""}, {"url": "https://gianlucamalato.medium.com/?source=post_page-----d75867d1c11e--------------------------------", "anchor_text": "Gianluca Malato"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F1f015e9ee21d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-pick-uncorrelated-stocks-for-an-investment-portfolio-in-python-d75867d1c11e&user=Gianluca+Malato&userId=1f015e9ee21d&source=post_page-1f015e9ee21d----d75867d1c11e---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fd75867d1c11e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-pick-uncorrelated-stocks-for-an-investment-portfolio-in-python-d75867d1c11e&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fd75867d1c11e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-pick-uncorrelated-stocks-for-an-investment-portfolio-in-python-d75867d1c11e&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@markuswinkler?utm_source=medium&utm_medium=referral", "anchor_text": "Markus Winkler"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://towardsdatascience.com/questions-96667b06af5", "anchor_text": "rules and guidelines"}, {"url": "https://towardsdatascience.com/readers-terms-b5d780a700a4", "anchor_text": "Reader Terms"}, {"url": "https://github.com/gianlucamalato/machinelearning/blob/master/Stocks_correlation.ipynb", "anchor_text": "https://github.com/gianlucamalato/machinelearning/blob/master/Stocks_correlation.ipynb"}, {"url": "https://github.com/datasets/s-and-p-500-companies/tree/master/data", "anchor_text": "https://github.com/datasets/s-and-p-500-companies/tree/master/data"}, {"url": "https://medium.com/tag/investing?source=post_page-----d75867d1c11e---------------investing-----------------", "anchor_text": "Investing"}, {"url": "https://medium.com/tag/portfolio?source=post_page-----d75867d1c11e---------------portfolio-----------------", "anchor_text": "Portfolio"}, {"url": "https://medium.com/tag/finance?source=post_page-----d75867d1c11e---------------finance-----------------", "anchor_text": "Finance"}, {"url": "https://medium.com/tag/python?source=post_page-----d75867d1c11e---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/data-science?source=post_page-----d75867d1c11e---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fd75867d1c11e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-pick-uncorrelated-stocks-for-an-investment-portfolio-in-python-d75867d1c11e&user=Gianluca+Malato&userId=1f015e9ee21d&source=-----d75867d1c11e---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fd75867d1c11e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-pick-uncorrelated-stocks-for-an-investment-portfolio-in-python-d75867d1c11e&user=Gianluca+Malato&userId=1f015e9ee21d&source=-----d75867d1c11e---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fd75867d1c11e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-pick-uncorrelated-stocks-for-an-investment-portfolio-in-python-d75867d1c11e&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----d75867d1c11e--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fd75867d1c11e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-pick-uncorrelated-stocks-for-an-investment-portfolio-in-python-d75867d1c11e&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----d75867d1c11e---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----d75867d1c11e--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----d75867d1c11e--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----d75867d1c11e--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----d75867d1c11e--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----d75867d1c11e--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----d75867d1c11e--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----d75867d1c11e--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----d75867d1c11e--------------------------------", "anchor_text": ""}, {"url": "https://gianlucamalato.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://gianlucamalato.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Gianluca Malato"}, {"url": "https://gianlucamalato.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "2.8K Followers"}, {"url": "http://YourDataTeacher.com", "anchor_text": "YourDataTeacher.com"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F1f015e9ee21d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-pick-uncorrelated-stocks-for-an-investment-portfolio-in-python-d75867d1c11e&user=Gianluca+Malato&userId=1f015e9ee21d&source=post_page-1f015e9ee21d--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fadb09bc451d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-pick-uncorrelated-stocks-for-an-investment-portfolio-in-python-d75867d1c11e&newsletterV3=1f015e9ee21d&newsletterV3Id=adb09bc451d&user=Gianluca+Malato&userId=1f015e9ee21d&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}