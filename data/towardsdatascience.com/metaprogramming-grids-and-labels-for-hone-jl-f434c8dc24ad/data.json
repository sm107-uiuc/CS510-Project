{"url": "https://towardsdatascience.com/metaprogramming-grids-and-labels-for-hone-jl-f434c8dc24ad", "time": 1683013069.3618948, "path": "towardsdatascience.com/metaprogramming-grids-and-labels-for-hone-jl-f434c8dc24ad/", "webpage": {"metadata": {"title": "Metaprogramming Grids And Labels For Hone.jl | by Emma Boudreau | Towards Data Science", "h1": "Metaprogramming Grids And Labels For Hone.jl", "description": "Last time we left off on the work with Hone.jl, a modular, object-oriented graphing library that uses meta-programming to provide an extendable platform, we had run into quite a large sum of issues\u2026"}, "outgoing_paragraph_urls": [], "all_paragraphs": ["Last time we left off on the work with Hone.jl, a modular, object-oriented graphing library that uses meta-programming to provide an extendable platform, we had run into quite a large sum of issues. Firstly, the grids were drawing incredibly inaccurately, making them virtually useless. This also created an additional blocker in that labels cannot be added to such a grid. Our resulting plots looked something like this:", "Additionally, although the points were lining up correctly with our coordinates plotted, they were certainly not lining up with our axis and grid. This is because the origin point of Compose illustrations is not where a Data-Scientist would typically think that the origin point of their graph would be. Instead, the origin of the Y axis is actually in the top left-hand corner. As a result, a point plotted for example at (5,5) would be in the top left rather than the bottom left.", "Another thing that I wanted to dramatically alter about Hone is the entire way that plots are assembled. Previously, meta-expressions would be thrown together and parsed in a long and messy meta-programming mess. I wanted to change this. The entire idea of Hone revolves around being modular. In a pinch, you should easily be able to add a different grid from somewhere else, or even run a different coordinate parser for some different results. However, with the way the scatter functions are now this is simply not possible.", "Probably the most prominent and horrible issues I have been facing with Hone is the grid. The grid is drawn based on divisions of measurements with the frame, which one would suppose would be pretty simple. Here\u2019s the math:", "This is certainly code that would appear to work at first glance. First, we get the frame\u2019s width and height and divide it by our number of divisions. After that, we iteratively add each expression for each line until we reach the width or height of the frame. We do this in a while loop, of course, which holds the control flow while the total is less than the width or height of the corresponding frame.", "I think the real problem here really goes to demonstrate how a very minor inconsistency or issue can create a really big problem in the future. The division amount for the X axis is calculated by dividing the width by the number of divisions in the grid. The problem here is that the X grid lines correspond with the lines that would represent values on the Y axis, and exactly the opposite is true for the Y lines. How could we fix this? Although it might be confusing at times, this can be fixed by simply reversing our X\u2019s and Y\u2019s", "Likewise, we will need to follow this idea when we approach the challenge of creating labels for the grid. All that is changed in this example is that the ylen is divided in the division_amount X, and the xlen is divided in the division_amount Y. As a result, we have a beautiful grid that looks like this:", "The next type that I wanted to create, now that we have working Grids and Label types is of course labels for the X and Y axis. We will start with parameters. We have two choices for getting grid positions, we could either", "While saving them into the grid type might give us some ease of use in terms of parameters, I believe it will make it much more difficult to implement more custom features in the future. Part of the problem with doing something like that is that GridLabels isn\u2019t meant to be a wrap-up function that combines many elements into a frame, but rather a feature that can be added or removed from a frame. In that regard, it is more similar to many of the methods that fall into the HDraw.jl file, rather than the HPlot.jl file. Our Grid Labels are also going to need our x and y values in order to generate the labels themselves.", "We can obtain the frame, which we will need for some calculations from the grid type. In my original version of this function, I decided to try and store the values for the grid\u2019s positions in the type:", "This was done by getting the percentage of the value in reference to the frame\u2019s height, which the grid\u2019s mathematics are based off of. It\u2019s important to remember that ever object\u2019s position in Hone is directly proportional to the frame on top of it, just like in most graphics work. We then multiply this percentage by the highest value in topx. In the example of having four grid-lines, we would then have .25 incrementally up to 1 each multiplied by the maximum value in our data for the labels, and the highest value in our resolution for our position. However, I found that storing data like this in the Grid type created a lot more problems than solutions.", "In my second revision, however, I revised that idea and created something a little better:", "The final product will be revealed after I explain my frustration with one more issue with the Hone library\u2026", "If you\u2019ve ever taken a small peek at the scatter functions in Hone, and understood that some of the code in them were directly contradictory to the methodology behind Hone, then you most certainly weren\u2019t alone. Rather than having functions to do things like parse coordinates or add lines to plots, I thought it would be a brilliant idea to instead hard-code snippets into functions one at a time to do so. Visit exhibit A:", "Not only is this function a little ugly, it requires its own unique type in order to transmit its own tag into the frame. Rather than being a collection of objects generated automatically with inputs, it is itself some objects with a collection of objects serving alongside it. In the context of Hone.jl, and what the very idea of Hone.jl is; this just doesn\u2019t make any sense. My first action took against such a thing was to create an entirely seperate function to create Axis types:", "That was relatively straightforward! Next, I decided to do the same thing with the coordinates in order to slim down the function even further.", "After all of that copy and pasting and slight refactoring, we have a cute little function that looks like this:", "I like this because it focuses a lot more on the objects as objects and the frame as a holder for the objects, rather than the entire array scatter being our composition of objects smashed into meta-expressions with other types alongside it. With these solutions, I did also notice another issue revealing itself. If you recall, the origin point for Compose is most certainly not where you would expect it to be. Rather than being in the bottom left, it is in the top left. As a result, many of our y coordinates are reversed, and thus do not match up with our new grid labels.", "To fix this, I simply subtracted our new value by the height and used it as our input y.", "After all of this great work done to the Hone library, I am excited to reveal to you the new default plot as of version 0.0.5!", "In my personal opinion, the improvement here is beyond dramatic. Firstly, we have data accurately represented, not upside-down, not in the wrong place. The X and Y for this visualization are both [5,10,15,20], which is precisely what the plot reads. On top of that, we can actually see where we are in location around the actual data with our new straight grid and grid-labels!", "I am incredibly excited with where Hone.jl is now, and where it is going to be very shortly! There is a lot of work to do, but I am hoping that the base of the graphing architecture is very near being done, and all of my work-around bug fixes aren\u2019t going to need to exist anymore! (In a perfect world.) Regardless of the occasional difficulty, I have learned a lot from this project and I am very excited to see its effectiveness in mine as well as other\u2019s usage of it!", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Ff434c8dc24ad&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmetaprogramming-grids-and-labels-for-hone-jl-f434c8dc24ad&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmetaprogramming-grids-and-labels-for-hone-jl-f434c8dc24ad&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmetaprogramming-grids-and-labels-for-hone-jl-f434c8dc24ad&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmetaprogramming-grids-and-labels-for-hone-jl-f434c8dc24ad&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----f434c8dc24ad--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----f434c8dc24ad--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://emmettgb.medium.com/?source=post_page-----f434c8dc24ad--------------------------------", "anchor_text": ""}, {"url": "https://emmettgb.medium.com/?source=post_page-----f434c8dc24ad--------------------------------", "anchor_text": "Emma Boudreau"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fea170050148c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmetaprogramming-grids-and-labels-for-hone-jl-f434c8dc24ad&user=Emma+Boudreau&userId=ea170050148c&source=post_page-ea170050148c----f434c8dc24ad---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ff434c8dc24ad&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmetaprogramming-grids-and-labels-for-hone-jl-f434c8dc24ad&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ff434c8dc24ad&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmetaprogramming-grids-and-labels-for-hone-jl-f434c8dc24ad&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://github.com/emmettgb/Emmetts-DS-NoteBooks/blob/master/Julia/HonePt9.ipynb", "anchor_text": "Notebook"}, {"url": "https://towardsdatascience.com/adding-control-to-my-modular-graphing-library-2c5424a8d3b7", "anchor_text": "Previous Article"}, {"url": "https://github.com/emmettgb/Hone.jl", "anchor_text": "https://github.com/emmettgb/Hone.jl"}, {"url": "https://medium.com/tag/programming?source=post_page-----f434c8dc24ad---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/tag/julia?source=post_page-----f434c8dc24ad---------------julia-----------------", "anchor_text": "Julia"}, {"url": "https://medium.com/tag/metaprogramming?source=post_page-----f434c8dc24ad---------------metaprogramming-----------------", "anchor_text": "Metaprogramming"}, {"url": "https://medium.com/tag/software-development?source=post_page-----f434c8dc24ad---------------software_development-----------------", "anchor_text": "Software Development"}, {"url": "https://medium.com/tag/data-science?source=post_page-----f434c8dc24ad---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Ff434c8dc24ad&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmetaprogramming-grids-and-labels-for-hone-jl-f434c8dc24ad&user=Emma+Boudreau&userId=ea170050148c&source=-----f434c8dc24ad---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Ff434c8dc24ad&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmetaprogramming-grids-and-labels-for-hone-jl-f434c8dc24ad&user=Emma+Boudreau&userId=ea170050148c&source=-----f434c8dc24ad---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ff434c8dc24ad&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmetaprogramming-grids-and-labels-for-hone-jl-f434c8dc24ad&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----f434c8dc24ad--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Ff434c8dc24ad&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmetaprogramming-grids-and-labels-for-hone-jl-f434c8dc24ad&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----f434c8dc24ad---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----f434c8dc24ad--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----f434c8dc24ad--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----f434c8dc24ad--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----f434c8dc24ad--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----f434c8dc24ad--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----f434c8dc24ad--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----f434c8dc24ad--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----f434c8dc24ad--------------------------------", "anchor_text": ""}, {"url": "https://emmettgb.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://emmettgb.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Emma Boudreau"}, {"url": "https://emmettgb.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "4.6K Followers"}, {"url": "https://twitter.com/emmettboudgie", "anchor_text": "https://twitter.com/emmettboudgie"}, {"url": "https://github.com/emmettgb", "anchor_text": "https://github.com/emmettgb"}, {"url": "https://ems.computer/", "anchor_text": "https://ems.computer/"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fea170050148c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmetaprogramming-grids-and-labels-for-hone-jl-f434c8dc24ad&user=Emma+Boudreau&userId=ea170050148c&source=post_page-ea170050148c--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Ff16bf42bb45f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmetaprogramming-grids-and-labels-for-hone-jl-f434c8dc24ad&newsletterV3=ea170050148c&newsletterV3Id=f16bf42bb45f&user=Emma+Boudreau&userId=ea170050148c&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}