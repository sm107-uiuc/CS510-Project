{"url": "https://towardsdatascience.com/how-i-created-an-interactive-scrolling-visualisation-with-d3-js-and-how-you-can-too-e116372e2c73", "time": 1683004264.7152882, "path": "towardsdatascience.com/how-i-created-an-interactive-scrolling-visualisation-with-d3-js-and-how-you-can-too-e116372e2c73/", "webpage": {"metadata": {"title": "How I Created an Interactive, Scrolling Visualisation with D3.js, and how you can too | by Cuthbert Chow | Towards Data Science", "h1": "How I Created an Interactive, Scrolling Visualisation with D3.js, and how you can too", "description": "The web is littered with stunning examples of scrolling and interactive visualisations, often built using D3. If you\u2019ve ever read such feature pieces from Bloomberg or the New York Times, I\u2019m sure\u2026"}, "outgoing_paragraph_urls": [{"url": "https://datasetsearch.research.google.com/", "anchor_text": "google\u2019s dataset search tool", "paragraph_index": 4}, {"url": "https://github.com/cuthchow/college-majors-visualisation", "anchor_text": "here", "paragraph_index": 11}, {"url": "https://vallandingham.me/scroller.html", "anchor_text": "from his original article", "paragraph_index": 11}, {"url": "https://colorhunt.co/", "anchor_text": "Color Hunt", "paragraph_index": 25}], "all_paragraphs": ["The web is littered with stunning examples of scrolling and interactive visualisations, often built using D3. If you\u2019ve ever read such feature pieces from Bloomberg or the New York Times, I\u2019m sure you know what I\u2019m talking about. Some of my favourite examples of this form are:", "There\u2019s something satisfying about the way in which the visual elements comport themselves after each scroll event, bending to your control. Often times, I have a huge smile on my face as I scroll up and down the page, watching all the shapes and colours fly around. It\u2019s a sensation reminiscent of discovering the secrets held by the data on your own, which is what I believe makes these presentations so convincing. It also provides a much more commanding narrative flow, which would otherwise be lacking in more static pieces. Browsing through these articles, it may appear that such visualisations would be extremely complicated to produce on your own, and you may assume they are best left to the editors and writers of top-shelf publications. But I\u2019m here to help dispel this notion: Anyone can make one, including you!", "After reading through a bunch of online resources (I will leave a list of these at the end of the article), I decided to take a stab at creating one myself. As I\u2019ve mentioned before, the best way of learning a new tool, technique, skill or ability is to put it to use, before you even know if you\u2019re capable of doing that thing. And so that is exactly what I did over the course of a week.", "(This article will assume you have some basic familiarity with D3.js and how it works)", "After browsing through a series of datasets, I settled on one which I found hosted on Kaggle, which originally came from the analytics blog Fivethirtyeight (if you\u2019re looking for cool datasets, check out google\u2019s dataset search tool). It was a (slightly outdated) dataset about college majors around the United States. It had information on the number enrolled in each college major, as well as the median, 75th percentile and 25th percentile salaries from those students. Interestingly, it also provided information on the male/female representation for each major, which I thought would be a good point of focus for the piece.", "With the dataset decided, I started exploring the data using Python and Pandas in Jupyter notebooks, looking for any interesting trends or points I would want to emphasise in a visualisation. I also made rough, crude approximations of the graphs I would want to show in the final product.", "My general conception of the visualisation was that the college majors would each be represented by a bubble. The bubbles would then change form and colour based on the type of data I was trying to highlight (ie gender discrepancies, median salary, category grouping etc.). When the bubbles would be grouped in by specific attributes, I wanted to achieve this through a D3 force simulation, so that the bubbles would appear to be gravitating towards an unseen force.", "After some exploration, I knew that I wanted to focus on the impact that gender distribution within a major has on the median salary of its graduates. I would strongly suggest that you take a deep dive into your data before starting any of the visualisation process, because you want to have some semblance of the interactions you have in mind before actually sitting down to code the final product.", "If you want a really quick way of observing relationships between variables, the python visualisation package seaborn has a \u2018pairplot()\u2019 method to help you do just this, which creates a matrix of scatterplots between all of the variables in the dataframe passed to it.", "Now we have a solid idea of the things we want to include, we are ready to start creating.", "This is (obviously) the most important part of every scroller you build. But conveniently, it\u2019s also the most reusable part, meaning that after you build it once, you should be good to go.", "In fact, I\u2019ve created a template version of the scroller functionality, which you can find right here. (credits again to Jim Vallandingham, as much of the code used was sourced from his original article. In fact, he wrote a similar article on creating a scroller, with an emphasis on the scrolling mechanics, so you should read that first. In this article, I will focus on the elements which I found confusing, and put a greater emphasis on the part of actually creating the visualisation).", "The entire visualisation should be contained within a single HTML page. Within the page, there is a div which contains all the elements, and within that div, there are two separate divs for the text and the visualisation.", "Within the \u2018sections\u2019 div are a bunch of section elements, each with the class \u2018step\u2019. Each one of these sections should contain a distinct section of text, and correspond to one phase or part of the visualisation. It is when the user moves between sections that the visualisation will be updated,", "You can size and position these elements as you wish, so long as you keep the #vis element fixed on the page (using display: fixed), so it doesn\u2019t move as the user scrolls. You can also tweak the height of each .step element based on how much text you want to include per section.", "Here is the code which handles the scroll events. I\u2019ve added comments to clarify certain parts.", "All of the above code is saved in a separate script file. We then create a main script file, which is responsible for updating the visualisation every time the viewer changes sections.", "With the generic components of the scroller sorted out, what you do from here is going to vary greatly based on the type of visualisation you are hoping to construct. Nonetheless, I can hopefully offer some broad brush advice that may come in handy, and which I wish I had been aware of sooner in the process.", "The essential idea is that all the elements that you need for the visualisation should be created when the page loads. I created a function called drawInitial(), and invoked it once the data was loaded in. This involves creating all the scales, axes, shapes, for simulations and other elements which you will need in the visualisation.", "Once they are all created, you can simply set their opacity attribute to 0 to ensure that they don\u2019t show up until required by the visualisation. Make sure each set of features (ie a set of axes for a particular chart, or a detail callout) has associated class or ID names, so that you can reference those specific features when required.", "I found it useful to create a cleaning function, which would be invoked at each step. I would pass in the chart type which I was trying to create, and the function would remove (or hide, rather) all the elements which were extraneous to that chart, thus saving me from having to write a lot of duplicated code. This is what part of the function looks like:", "As I mentioned, I would be using force simulations to group the circle elements in several of the phases. The key thing to remember is to \u2018reheat\u2019 the force simulation every time you bring it back into use. Force simulations in D3 have an alpha value, which is a cooling parameter that gradually decrements over time, and reduce how much the force impact the nodes. You should reset the alpha back to a certain value every time you restart the force, to make sure it has enough \u2018energy\u2019 to get to the desired state. You can also tweak the alpha decay rate to affect how quickly the simulation settles down to an equilibrium state.", "This part is key: Always use transitions when changing the state of the visualisation, even if that change is something you want to be instantaneous. By utilising D3\u2019s transition feature (even if the duration is 0), you allow the changes to be interrupted. This means that if the user is scrolling through the sections quickly, one transition can be overridden by a subsequent one, avoiding the case where you are left with an awkward, invalid state.", "SVG elements are ordered based on when they were appended to the parent element. Think of it like throwing paint on a canvas: the last layer of paint is the one that\u2019s visible on top. You could reorder elements by removing them from their parent element, and then appending them again to the very end. Alternatively, you could make use of D3\u2019s .raise() and .lower() methods, which conveniently do this exact process for you when given a selection of elements.", "Colours are an indispensable component of good data visualisation. For parts of my project, I was trying to encode with colour 16 different categories of college majors. This led to an elaborate process for selecting colours, as I wanted to avoid any two hues which were too similar and thus easily confused.", "I highly recommend using Color Hunt in building your palettes. It\u2019s a website where other creatives have constructed and shared their own palettes, and it allows you to easily copy the hex-codes of the hues which you want, and to save your own palettes as well for future use.", "Hopefully, this has demystified at least part of the process of making a scrolling visualisation. It\u2019s honestly much easier than it looks, and so definitely go find an interesting dataset and try it out for yourself!", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Self-taught data scientist and university student from Hong Kong, residing in Vancouver, using data to tell stories and change minds"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fe116372e2c73&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-i-created-an-interactive-scrolling-visualisation-with-d3-js-and-how-you-can-too-e116372e2c73&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-i-created-an-interactive-scrolling-visualisation-with-d3-js-and-how-you-can-too-e116372e2c73&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-i-created-an-interactive-scrolling-visualisation-with-d3-js-and-how-you-can-too-e116372e2c73&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-i-created-an-interactive-scrolling-visualisation-with-d3-js-and-how-you-can-too-e116372e2c73&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----e116372e2c73--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----e116372e2c73--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://cuthbertchow.medium.com/?source=post_page-----e116372e2c73--------------------------------", "anchor_text": ""}, {"url": "https://cuthbertchow.medium.com/?source=post_page-----e116372e2c73--------------------------------", "anchor_text": "Cuthbert Chow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fbff07afa23c2&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-i-created-an-interactive-scrolling-visualisation-with-d3-js-and-how-you-can-too-e116372e2c73&user=Cuthbert+Chow&userId=bff07afa23c2&source=post_page-bff07afa23c2----e116372e2c73---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fe116372e2c73&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-i-created-an-interactive-scrolling-visualisation-with-d3-js-and-how-you-can-too-e116372e2c73&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fe116372e2c73&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-i-created-an-interactive-scrolling-visualisation-with-d3-js-and-how-you-can-too-e116372e2c73&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://cuthchow.github.io/college-majors-visualisation/", "anchor_text": "Best College MajorsMost people want a degree which will enable them to make a lot of money upon graduation. Here are (almost) all the\u2026cuthchow.github.io"}, {"url": "https://cuthchow.github.io/college-majors-visualisation/", "anchor_text": "Visualisation"}, {"url": "https://github.com/cuthchow/college-majors-visualisation", "anchor_text": "Code (Github Repo)"}, {"url": "https://pudding.cool/2017/03/hamilton/index.html", "anchor_text": "exemplary visualisation of very line in Hamilton"}, {"url": "https://www.nytimes.com/interactive/2014/06/05/upshot/how-the-recession-reshaped-the-economy-in-255-charts.html", "anchor_text": "told in 255 different charts."}, {"url": "http://www.r2d3.us/visual-intro-to-machine-learning-part-1/", "anchor_text": "absolutely mind-boggling piece, visualising the inner mechanics of Machine Learning"}, {"url": "http://thewaterweeat.com", "anchor_text": "quirky visualisation, breaking down the amount of water which we consume"}, {"url": "https://www.nytimes.com/interactive/2015/01/09/sports/the-dawn-wall-el-capitan.html", "anchor_text": "treacherous climb up El Capitan\u2019s dawn wall"}, {"url": "https://vallandingham.me/scroll_talk/examples/", "anchor_text": "so many more"}, {"url": "https://datasetsearch.research.google.com/", "anchor_text": "google\u2019s dataset search tool"}, {"url": "https://github.com/cuthchow/college-majors-visualisation", "anchor_text": "here"}, {"url": "https://vallandingham.me/scroller.html", "anchor_text": "from his original article"}, {"url": "https://colorhunt.co/", "anchor_text": "Color Hunt"}, {"url": "https://vallandingham.me/scroller.html", "anchor_text": "article on scrollers"}, {"url": "https://vallandingham.me", "anchor_text": "blog"}, {"url": "https://sxywu.com", "anchor_text": "work"}, {"url": "https://www.youtube.com/watch?v=A4vNRIgvyH0&t=6s", "anchor_text": "YouTube channel"}, {"url": "https://www.youtube.com/redirect?redir_token=dBTsb_HDyTWCsMwuJWv8gpTFwrN8MTU4Mjg5NDEzNUAxNTgyODA3NzM1&event=video_description&v=A4vNRIgvyH0&q=https%3A%2F%2Fwww.twitch.tv%2Fsxywu", "anchor_text": "Twitch streams"}, {"url": "https://bl.ocks.org/mbostock", "anchor_text": "blocks"}, {"url": "https://bost.ocks.org/mike/scroll/", "anchor_text": "how to scroll"}, {"url": "https://medium.com/tag/data-visualization?source=post_page-----e116372e2c73---------------data_visualization-----------------", "anchor_text": "Data Visualization"}, {"url": "https://medium.com/tag/data-science?source=post_page-----e116372e2c73---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/d3js?source=post_page-----e116372e2c73---------------d3js-----------------", "anchor_text": "D3js"}, {"url": "https://medium.com/tag/web-design?source=post_page-----e116372e2c73---------------web_design-----------------", "anchor_text": "Web Design"}, {"url": "https://medium.com/tag/design?source=post_page-----e116372e2c73---------------design-----------------", "anchor_text": "Design"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fe116372e2c73&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-i-created-an-interactive-scrolling-visualisation-with-d3-js-and-how-you-can-too-e116372e2c73&user=Cuthbert+Chow&userId=bff07afa23c2&source=-----e116372e2c73---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fe116372e2c73&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-i-created-an-interactive-scrolling-visualisation-with-d3-js-and-how-you-can-too-e116372e2c73&user=Cuthbert+Chow&userId=bff07afa23c2&source=-----e116372e2c73---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fe116372e2c73&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-i-created-an-interactive-scrolling-visualisation-with-d3-js-and-how-you-can-too-e116372e2c73&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----e116372e2c73--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fe116372e2c73&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-i-created-an-interactive-scrolling-visualisation-with-d3-js-and-how-you-can-too-e116372e2c73&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----e116372e2c73---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----e116372e2c73--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----e116372e2c73--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----e116372e2c73--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----e116372e2c73--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----e116372e2c73--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----e116372e2c73--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----e116372e2c73--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----e116372e2c73--------------------------------", "anchor_text": ""}, {"url": "https://cuthbertchow.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://cuthbertchow.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Cuthbert Chow"}, {"url": "https://cuthbertchow.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "120 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fbff07afa23c2&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-i-created-an-interactive-scrolling-visualisation-with-d3-js-and-how-you-can-too-e116372e2c73&user=Cuthbert+Chow&userId=bff07afa23c2&source=post_page-bff07afa23c2--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fe0b347b71453&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-i-created-an-interactive-scrolling-visualisation-with-d3-js-and-how-you-can-too-e116372e2c73&newsletterV3=bff07afa23c2&newsletterV3Id=e0b347b71453&user=Cuthbert+Chow&userId=bff07afa23c2&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}