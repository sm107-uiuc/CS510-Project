{"url": "https://towardsdatascience.com/large-scale-visualizations-and-mapping-with-datashader-d465f5c47fb5", "time": 1682994372.481318, "path": "towardsdatascience.com/large-scale-visualizations-and-mapping-with-datashader-d465f5c47fb5/", "webpage": {"metadata": {"title": "Large Scale Visualizations and Mapping with Datashader | by Finn Qiao | Towards Data Science", "h1": "Large Scale Visualizations and Mapping with Datashader", "description": "If you\u2019ve ever tried to create a swarm plot or relational plot of over 100,000 points with Matplotlib or Seaborn, you would be no stranger to the scenario of twiddling your thumbs as the plot loads\u2026"}, "outgoing_paragraph_urls": [{"url": "https://github.com/pyviz/datashader", "anchor_text": "Datashader", "paragraph_index": 2}, {"url": "http://datashader.org/", "anchor_text": "Datashader site", "paragraph_index": 3}, {"url": "http://numba.pydata.org/", "anchor_text": "Numba", "paragraph_index": 4}, {"url": "http://dask.pydata.org/", "anchor_text": "Dask", "paragraph_index": 4}, {"url": "https://www.youtube.com/watch?v=fB3cUrwxMVY", "anchor_text": "great video on Youtube", "paragraph_index": 5}, {"url": "https://data.sfgov.org/Economy-and-Community/Registered-Business-Locations-San-Francisco/g8m3-pdis/data", "anchor_text": "DataSF", "paragraph_index": 6}, {"url": "https://gist.github.com/jcrist/a9dfc6e8f8bce3b4ae30", "anchor_text": "Color maps", "paragraph_index": 16}, {"url": "https://github.com/finnqiao/datashader_test", "anchor_text": "Github", "paragraph_index": 26}, {"url": "https://www.linkedin.com/in/finnqiao/", "anchor_text": "LinkedIn", "paragraph_index": 26}], "all_paragraphs": ["If you\u2019ve ever tried to create a swarm plot or relational plot of over 100,000 points with Matplotlib or Seaborn, you would be no stranger to the scenario of twiddling your thumbs as the plot loads.", "When the plot is finally drawn, the result might not reveal much about the data due to the sheer number of points or the order in which different categories are plotted.", "Computational efficiency and over-plotting are just two of many issues of plotting large datasets. Luckily, Datashader is a great option to represent large datasets in a meaningful manner quickly.", "According to the official Datashader site:", "\u201cThe computation-intensive steps in this process are written in Python but transparently compiled to machine code using Numba and flexibly distributed across cores and processors using Dask , providing a highly optimized rendering pipeline that makes it practical to work with extremely large datasets even on standard hardware.\u201d", "For those interested, there is a great video on Youtube that shines light on issues in conventional visualization and how Datashader helps to solve them.", "The dataset we are using Datashader on is from DataSF and includes all tax-paying businesses in San Francisco.", "The column \u201cBusiness Location\u201d contains the location data for each business in the following string format:", "The following steps were thus taken to clean the data:", "To plot these points in Datashader, we have to first convert latitude and longitude coordinates into Web Mercator coordinates.", "The Web Mercator coordinate system is used for web mapping applications. It\u2019s popularity can be attributed to its adoption by Google Maps. In order to plot with Datashader, we would have to project latitude, longitude pairs onto this new plane. Datashader has an inbuilt method that does this for us: lnglat_to_meters", "We then take the 1st and 99th percentile as bounds for the map displayed. These percentile values are chosen to drop outliers from determining the map bounds. These coordinates are then projected again to the Web Mercator plane.", "After projecting coordinates to the new plane, we can start setting up the map.", "We set up partial objects \u201cexport\u201d and \u201ccm\u201d. \u201cexport\u201d helps to export the plot created to a predetermined path while \u201ccm\u201d helps with the color mapping.", "The canvas object ds.Canvas() is set up with predetermined widths and heights. The SF object containing the bounds of the map are also passed in.", "The pandas dataframe we had been working with previous is converted to a Dask dataframe and points are generated on the canvas using the x, y pair passed in (easting and northing columns in this case).", "Now that the setup is complete, we can start plotting and exporting the plots with a single line of code as shown below. Color maps, normalizations are all parameters that can be readily changed.", "Plotting 100,000 businesses across San Francisco clearly outlines the streets where these businesses are located. It seems that there is the heaviest concentration of businesses in the Financial District and the Mission District.", "Where are the oldest businesses located? We can run a filter for the businesses in the top decile for business age.", "Unsurprisingly, the oldest businesses are heavily concentrated in the Financial District.", "What about different business categories? Lets plot the distribution of food service businesses and real estate businesses.", "There are relatively fewer food services in the Richmond and Sunset districts. However, there seems to be quite a few real estate businesses in those areas as they are residential areas.", "Enough with the black background though. How would you overlay these points on an actual map? Datashader makes this quite easy in conjunction with Holoviews, Geoviews, and Bokeh.", "Other columns can also be used in aggregator functions. For example, we can use the mean value of business age in each area to determine the display of the points.", "The resulting plot does indeed show a higher density of older businesses (dark blue points) around the north east area of San Francisco.", "There is still so much more that can be done with Datashader and a mere 100,000 points were plotted in this example. Further customization options and actual big data are waiting to be explored in further projects using Datashader and its accompanying packages. GPS data for example would be really interesting to visualize as they often contain millions (or billions) of points and routes can be traced and analyzed.", "The resultant code can be found on Github and feel free to connect on LinkedIn! Thanks for reading and happy holidays!", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Food \u00b7 Travel \u00b7 Technology \u00b7 Product \u00b7 Strategy"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fd465f5c47fb5&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Flarge-scale-visualizations-and-mapping-with-datashader-d465f5c47fb5&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Flarge-scale-visualizations-and-mapping-with-datashader-d465f5c47fb5&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Flarge-scale-visualizations-and-mapping-with-datashader-d465f5c47fb5&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Flarge-scale-visualizations-and-mapping-with-datashader-d465f5c47fb5&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----d465f5c47fb5--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----d465f5c47fb5--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@finnqiao?source=post_page-----d465f5c47fb5--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@finnqiao?source=post_page-----d465f5c47fb5--------------------------------", "anchor_text": "Finn Qiao"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F511a811ea993&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Flarge-scale-visualizations-and-mapping-with-datashader-d465f5c47fb5&user=Finn+Qiao&userId=511a811ea993&source=post_page-511a811ea993----d465f5c47fb5---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fd465f5c47fb5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Flarge-scale-visualizations-and-mapping-with-datashader-d465f5c47fb5&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fd465f5c47fb5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Flarge-scale-visualizations-and-mapping-with-datashader-d465f5c47fb5&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://github.com/pyviz/datashader", "anchor_text": "Datashader"}, {"url": "http://datashader.org/", "anchor_text": "Datashader site"}, {"url": "http://numba.pydata.org/", "anchor_text": "Numba"}, {"url": "http://dask.pydata.org/", "anchor_text": "Dask"}, {"url": "https://www.youtube.com/watch?v=fB3cUrwxMVY", "anchor_text": "great video on Youtube"}, {"url": "https://data.sfgov.org/Economy-and-Community/Registered-Business-Locations-San-Francisco/g8m3-pdis/data", "anchor_text": "DataSF"}, {"url": "https://gist.github.com/jcrist/a9dfc6e8f8bce3b4ae30", "anchor_text": "Color maps"}, {"url": "https://github.com/finnqiao/datashader_test", "anchor_text": "Github"}, {"url": "https://www.linkedin.com/in/finnqiao/", "anchor_text": "LinkedIn"}, {"url": "https://medium.com/tag/data-visualization?source=post_page-----d465f5c47fb5---------------data_visualization-----------------", "anchor_text": "Data Visualization"}, {"url": "https://medium.com/tag/python?source=post_page-----d465f5c47fb5---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/tech?source=post_page-----d465f5c47fb5---------------tech-----------------", "anchor_text": "Tech"}, {"url": "https://medium.com/tag/technology?source=post_page-----d465f5c47fb5---------------technology-----------------", "anchor_text": "Technology"}, {"url": "https://medium.com/tag/data-science?source=post_page-----d465f5c47fb5---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fd465f5c47fb5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Flarge-scale-visualizations-and-mapping-with-datashader-d465f5c47fb5&user=Finn+Qiao&userId=511a811ea993&source=-----d465f5c47fb5---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fd465f5c47fb5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Flarge-scale-visualizations-and-mapping-with-datashader-d465f5c47fb5&user=Finn+Qiao&userId=511a811ea993&source=-----d465f5c47fb5---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fd465f5c47fb5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Flarge-scale-visualizations-and-mapping-with-datashader-d465f5c47fb5&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----d465f5c47fb5--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fd465f5c47fb5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Flarge-scale-visualizations-and-mapping-with-datashader-d465f5c47fb5&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----d465f5c47fb5---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----d465f5c47fb5--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----d465f5c47fb5--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----d465f5c47fb5--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----d465f5c47fb5--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----d465f5c47fb5--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----d465f5c47fb5--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----d465f5c47fb5--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----d465f5c47fb5--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@finnqiao?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@finnqiao?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Finn Qiao"}, {"url": "https://medium.com/@finnqiao/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "609 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F511a811ea993&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Flarge-scale-visualizations-and-mapping-with-datashader-d465f5c47fb5&user=Finn+Qiao&userId=511a811ea993&source=post_page-511a811ea993--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F3294a2317ce2&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Flarge-scale-visualizations-and-mapping-with-datashader-d465f5c47fb5&newsletterV3=511a811ea993&newsletterV3Id=3294a2317ce2&user=Finn+Qiao&userId=511a811ea993&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}