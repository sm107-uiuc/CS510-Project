{"url": "https://towardsdatascience.com/udacity-data-scientice-nano-degree-capstone-project-create-customer-segmentation-report-for-852d3e6d3180", "time": 1682996272.381723, "path": "towardsdatascience.com/udacity-data-scientice-nano-degree-capstone-project-create-customer-segmentation-report-for-852d3e6d3180/", "webpage": {"metadata": {"title": "Create Customer Segmentation Report for Arvato Financial Services | by KuanYao Huang | Towards Data Science", "h1": "Create Customer Segmentation Report for Arvato Financial Services", "description": "By creating customer segmentation and comparing to general population, one can know which part of the general population are more likely to be customer and which part are not. I analyzed demographics\u2026"}, "outgoing_paragraph_urls": [{"url": "https://www.kaggle.com/c/udacity-arvato-identify-customers", "anchor_text": "here", "paragraph_index": 3}, {"url": "https://github.com/HuangKY/DSND_Term2_Capstone_Arvato", "anchor_text": "Github repository here", "paragraph_index": 3}], "all_paragraphs": ["By creating customer segmentation and comparing to general population, one can know which part of the general population are more likely to be customer and which part are not. I analyzed demographics data for customers of a mail-order sales company in Germany, comparing it to demographics information for the general population.", "Firstly, I used different approaches to pre-process the data, and then I used unsupervised learning techniques, PCA (Principle Componets Analysis) and k-NN (k-nearest neighbor algorithm), to perform customer segmentation and to identify the core customer traits of the company.", "Secondly, with demographics information for targets of a marketing campaign for the company, I used different models to predict which individuals are most likely to convert into customers.", "Finally, I also tested the model in competition through kaggle, where the competition is here, and all the contents discussed is based on the jupyter notebook uploaded to Github repository here.", "The goal includes four parts as follows:", "In the segmentation part, explained variance ratio is be used in the PCA process. Explained variance accounts for the ability to describe the whole feature variance, the more the explained variance, the more import of the component.", "In the supervised model prediction parts, precision is mainly used as main metric.", "There are four datasets, all of which have identical demographics features (only part of them are different)", "In addition to the above data, there are two additional meta-data:", "Also, I created a file called DIAS_Attributes_Values_2017_details.csv based on the DIAS Attributes \u2014 Values 2017.xlsx file, so that I can map each attribute to its type or missing value coding.", "During the Data pre-processing process, I re-encode the missing or unknown value as Nan to make sure the value are all encoded consistently. For example, the \u2018-1\u2019 value means unknown in AGER_TYP attribute, I substitute it with np.nan.", "In each attribute, the proportion of missing value is calculated. Looking into the distribution of missing ratio, most attribute are below 20%. Therefore, I deleted the outliers based on this criterion. (Fig. 1)", "Missing data in each row is also evaluted. It can be seen that most rows have no missing value, so I will drop all the rows that have at least one missing value. (Fig. 2) However, in order to make sure the data I drop have no big inference to the whole data, I will check the distribution for some features.", "By comparing the distribution of values for at least five attributes between the two subsets: the data that does not include deleted rows and the data that only include the rows deleted, there is no large difference between the two. (Fig. 3) So I will preserve this criterion in dealing with the missing value in rows.", "There are four types of data in the data: ordinal, numeric, categorical and mixed. For ordinal variables, although the values might not be linearly related, I assume the ordinal variables as interval variables here. The remaining categorical and mixed variables will be re-encoded and selected.", "Regarding categorical variables, for instance, the OST_WEST_KZ feature includes values of \u2018W\u2019 and \u2018O\u2019, which is binary. I re-encode it as 0 and 1 numerical binary variable. On the other hand, the CAMEO_DEUG_2015 feature includes \u2018X\u2019 value that is not described in the details documents so I re-encode it as Nan. For the remaining categorical variables, I plotted the correlation graph to understand whether the features that shared common characteristics. (Fig. 4)", "Based on the graph above, LP_FAMILIE_FEIN and LP_FAMILIE_GROB are highly correlated, and LP_STATUS_FEIN and LP_STATUS_GROB are also highly correlated. Since LP_FAMILIE_FEIN and LP_STATUS_FEIN are too detailed, I dropped those two here. In addition, although CAMEO_DEUG_2015and CAMEO_DEU_2015 are not plotted in the graph above, based on the description file both of them are very similar. So I dropped CAMEO_DEU_2015 to simplify. Finally, there is another feature EINGEFUEGT_AM that is not described in the document, I dropped this one as well. After re-encoding and selecting the categorical variables, I used get_dummies method in Pandas to transform to dummy value.", "In addition to the categorical variables, there are six mixed features as follows:", "By looking into CAMEO_INTL_2015 attribute, it seemed the attribute can be separated into two interval variables: one is related to wealth and the other one is related to lifestage, so I used map method to re-encode that feature. Regarding LP_LEBENSPHASE_FEIN and LP_LEBENSPHASE_GROB, since both of them describe the life stage of a person which shares similar traits to CAMEO_INTL_2015, I dropped the two attributes here. On the other hand, the PLZ8_BAUMAX and WOHNLAGE attributes can be regarded as interval variables to some extent, I preserved them here. Finally, looking in to PRAEGENDE_JUGENDJAHRE feature, it looks it can also be separated into two parts: decades and movement. Therefore I created two functions to process this variable.", "After all the pre-processing and re-encoding process, the Udacity_AZDIAS_052018.csv is cleaned and transformed to pandas daframe object azdias_informative_dummy. I also create a function clean_data that includes all the process mentioned above, so that for each demographic data, the cleaning process is assured and remain the same.", "Finally, some features got Nans during the re-encoding process, so I used Imputer to subsitute with means.Then I used StandardScaler to scale all the features. To have a check for the final output, I have count the number of Nans (missing ratio) in each attribute. (Fig. 5)", "From almost 425 features, I conducted PCA to extract import features of the general population. Knowing the main explained variance for each attribute, I decided to use first 6 components in that after 6th componets, the accumulated variance increases slowly. (Fig. 6 and Fig. 7)", "After selecting the main PCA componets, I used KMeans method to apply clustering. In order to decide how many clusters I should use, I investigate the number of clusterings to the KMeans score. It is showed that when the number of clusterings increases to about 30, the error (score) gets low enough and does not change rapidly. Therefore, I chose 30 as the number of clusterings. (Fig. 8)", "All the process and methods used above are also applied to customer data. Therefore, I can get the clusterings labels for both general population data and customer data.(Fig. 9) By plotting the distribution of the clusterings, I got the results of difference across the two datasets. (Fig. 10)", "Here in the table where gp_portion means the proportion of of the clusterings in general population and cs_portion means the proportion of of the clustering in customer population showed that the difference between customers and general population is largest in clusters 21 and 28, and lowest in clusters 6 and 20.", "In the supervised learning model part, since the data shares the same demographic features from the general population, all the pre-processing is the same as in the customer segmentation parts. However, in order to assure the cleaned columns are the same and all the rows are preserved, the clean_data function is revised to clean_data_preserve_row. After the preprocessing process, I used the same algorithm in the segmentation report part to get the PCA values and clusterings.", "The independent variables are the original cleaned features, the 6 PCA components and the clustering label. The dependent variable is the RESPONSE column in the dataset. In order to predict the the RESPONSE value, which is 0 or 1 binary value, I used three models: logistic regression, random forest and k-NN to predict. GridSearch is also conducted to get the best parameters.", "Firstly, I will discuss the 6 PCA components, and then I will use the clustering results above to understand the difference between general population and the customers.", "For each PCA components, I showed the top feature details in order to get know to the characteristics. (Fig. 11 and Fig. 12) The first column shows the importance for each feature.", "Here is the summary based on the details of each component. For convenience, I will name each component and explain in behind.", "PCA component 1 : Rich People Index. Due to low mobility (moving patterns), high share of 1\u20132 family houses in the PLZ8, high share of cars per household, lots of buildings in the microcell and high financial interest. It might be some people who care about financial news or products, and living in a busy city area and tend to live alone or live with partner only.", "PCA component 2: Young and Wandering Index. The person\u2019s birth is mainly in 90s with digital media, not a money saver, has high online affinity, not a financial investor, and not traditional minded.", "PCA compoent 3: Car Brand Mania Index. Due to high share of BMW & Mercedes Benz, upper class cars or sportscars, and high share of top German manufacturer (Mercedes, BMW).", "PCA compoent 4: Online Shopper Index. Due to high transaction activity, high transaction activity MAIL-ORDER, high density of inhabitants per square kilometer, and large number of 6\u201310 family houses.", "PCA component 5: Car Life Index. Due to high share of cars with an engine power between 61 and 120 KW, high share of cars with no preowner, large number of cars with 5 seats, high share of Asian Manufacturers, and high share of newbuilt cars", "PCA compoent 6: Anti-society Index. Due to low dreamily affinity, low familiar minded, low cultural and social minded, and not religious.", "In addition to the PCA components, I also compared the difference between the general population and customers. As mentioned in the previous section, I got the results below from Fig. 9 and Fig. 10.", "Looking into each clusters, here is the characteristic for each (take the criterion of absolute value of 3 for convenience):", "Combining all the information above, here is the summary.", "To sum up, the target of the campaign should focus on the users who are not young and shops online often. On the other hand, for those who are very rich or interested to cars a lot or have anti-society traits, there might be no need to send the campaign to them.", "Data was separated into training data and test data. However, the results were not good. For the three models (logistic regression, random forest and k-NN), none of them has good precision. I will discuss it in the next justification part.", "Because the origin data is unbalanced (most RESPONSE is 0, value 1 is below 1 %), I have tried the following parts to solve the issue:", "However, none of them increased the precision. I will leave this part in the improvement section in the end.", "Also, I have upload the prediction from the test data to kaggle. As mentioned, the performance of the model is not good, so the score is also bad. (Fig. 13)", "In the Segmentation part, I have performed data pre-processing and used PCA method combined with k-NN to get the clusterings of different population. The difference was discussed and I have known that which population might be potential customers and which population might not. With understanding the difference, a company can be much more focus on their target, and then increase conversion rate or lower down their marketing cost. The impact is large.", "In the supervised learning part, however, the performance of models were not good. It might be resulted from the biased data distribution where most value of dependent variable are 0. Further investigation is needed.", "In order to increase the performance of the supervised learning model, the following parts might be conducted.", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F852d3e6d3180&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fudacity-data-scientice-nano-degree-capstone-project-create-customer-segmentation-report-for-852d3e6d3180&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fudacity-data-scientice-nano-degree-capstone-project-create-customer-segmentation-report-for-852d3e6d3180&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fudacity-data-scientice-nano-degree-capstone-project-create-customer-segmentation-report-for-852d3e6d3180&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fudacity-data-scientice-nano-degree-capstone-project-create-customer-segmentation-report-for-852d3e6d3180&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----852d3e6d3180--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----852d3e6d3180--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@musictenors?source=post_page-----852d3e6d3180--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@musictenors?source=post_page-----852d3e6d3180--------------------------------", "anchor_text": "KuanYao Huang"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F9967102ae431&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fudacity-data-scientice-nano-degree-capstone-project-create-customer-segmentation-report-for-852d3e6d3180&user=KuanYao+Huang&userId=9967102ae431&source=post_page-9967102ae431----852d3e6d3180---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F852d3e6d3180&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fudacity-data-scientice-nano-degree-capstone-project-create-customer-segmentation-report-for-852d3e6d3180&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F852d3e6d3180&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fudacity-data-scientice-nano-degree-capstone-project-create-customer-segmentation-report-for-852d3e6d3180&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@christiannkoepke?utm_source=medium&utm_medium=referral", "anchor_text": "Christiann Koepke"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://www.kaggle.com/c/udacity-arvato-identify-customers", "anchor_text": "here"}, {"url": "https://github.com/HuangKY/DSND_Term2_Capstone_Arvato", "anchor_text": "Github repository here"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----852d3e6d3180---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/tag/data-science?source=post_page-----852d3e6d3180---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/data-visualization?source=post_page-----852d3e6d3180---------------data_visualization-----------------", "anchor_text": "Data Visualization"}, {"url": "https://medium.com/tag/clustering?source=post_page-----852d3e6d3180---------------clustering-----------------", "anchor_text": "Clustering"}, {"url": "https://medium.com/tag/segmentation?source=post_page-----852d3e6d3180---------------segmentation-----------------", "anchor_text": "Segmentation"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F852d3e6d3180&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fudacity-data-scientice-nano-degree-capstone-project-create-customer-segmentation-report-for-852d3e6d3180&user=KuanYao+Huang&userId=9967102ae431&source=-----852d3e6d3180---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F852d3e6d3180&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fudacity-data-scientice-nano-degree-capstone-project-create-customer-segmentation-report-for-852d3e6d3180&user=KuanYao+Huang&userId=9967102ae431&source=-----852d3e6d3180---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F852d3e6d3180&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fudacity-data-scientice-nano-degree-capstone-project-create-customer-segmentation-report-for-852d3e6d3180&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----852d3e6d3180--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F852d3e6d3180&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fudacity-data-scientice-nano-degree-capstone-project-create-customer-segmentation-report-for-852d3e6d3180&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----852d3e6d3180---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----852d3e6d3180--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----852d3e6d3180--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----852d3e6d3180--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----852d3e6d3180--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----852d3e6d3180--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----852d3e6d3180--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----852d3e6d3180--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----852d3e6d3180--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@musictenors?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@musictenors?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "KuanYao Huang"}, {"url": "https://medium.com/@musictenors/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "21 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F9967102ae431&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fudacity-data-scientice-nano-degree-capstone-project-create-customer-segmentation-report-for-852d3e6d3180&user=KuanYao+Huang&userId=9967102ae431&source=post_page-9967102ae431--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fusers%2F9967102ae431%2Flazily-enable-writer-subscription&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fudacity-data-scientice-nano-degree-capstone-project-create-customer-segmentation-report-for-852d3e6d3180&user=KuanYao+Huang&userId=9967102ae431&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}