{"url": "https://towardsdatascience.com/the-ultimate-eda-visualization-in-r-e6aff6afe5c1", "time": 1683000206.272054, "path": "towardsdatascience.com/the-ultimate-eda-visualization-in-r-e6aff6afe5c1/", "webpage": {"metadata": {"title": "The ultimate EDA visualization in R | by David Zhao | Towards Data Science", "h1": "The ultimate EDA visualization in R", "description": "This article introduces a kind of plot called rain cloud plot. The article mainly present some adjustments and improvements to the default code to make the plot satisfy broader needs."}, "outgoing_paragraph_urls": [{"url": "https://orchid00.github.io/tidy_raincloudplot", "anchor_text": "Paula Andrea Martinez", "paragraph_index": 2}, {"url": "https://micahallen.org/2018/03/15/introducing-raincloud-plots/", "anchor_text": "Dr. Micah Allen", "paragraph_index": 2}, {"url": "https://gist.github.com/dgrtwo/eb7750e74997891d7c20", "anchor_text": "David Robinson", "paragraph_index": 2}, {"url": "http://www.worldvaluessurvey.org/WVSDocumentationWV5.jsp", "anchor_text": "World Value Survey Wave 5", "paragraph_index": 3}, {"url": "https://github.com/DavidykZhao/Data_for_raincloud_plot.git", "anchor_text": "from here", "paragraph_index": 3}, {"url": "http://cran.r-project.org/web/packages/RColorBrewer/index.html", "anchor_text": "RColorBrewer", "paragraph_index": 10}, {"url": "https://moderndata.plot.ly/create-colorful-graphs-in-r-with-rcolorbrewer-and-plotly/", "anchor_text": "RColorBrewer", "paragraph_index": 11}, {"url": "https://rdrr.io/github/GuangchuangYu/gglayer/man/geom_flat_violin.html", "anchor_text": "here", "paragraph_index": 23}, {"url": "https://github.com/RainCloudPlots/RainCloudPlots", "anchor_text": "here", "paragraph_index": 28}, {"url": "http://ykzhao.com", "anchor_text": "ykzhao.com", "paragraph_index": 31}], "all_paragraphs": ["Recently I was doing EDA (exploratory data analysis) for a research project. My colleague introduced a plot to me called rain cloud plot. It is a combination of dot plot, box plot and kernel density (or you could think of it as a half violin plot), which really conveys a myriad of information yet in a visually pleasant way (thus a lot of times we mistakenly call it rainbow plot :) ). A sample of the plot can be seen below:", "It looks amazing, isn\u2019t it? I was astonished by the eventual look of the plot even though I made it!", "Please note that this post is built upon the great work by Paula Andrea Martinez, Dr. Micah Allen, and David Robinson. Thus I will not reinvent the wheel by presenting all the details to make the plot; but rather, I will introduce some possible tricks you might need in order to make such plot suits your needs.", "I will use the dataset from the World Value Survey Wave 5 as an example. I have cleaned the dataset which you could simply git clone from here. A glimpse of the dataset is here:", "The country column has 22 unique country values:", "Argentina, Australia, Brazil, Bulgaria, Canada, Chile, Finland, France, Georgia, Hungary, Japan, Mexico, Netherlands, Norway, Poland, Romania, Serbia, Slovenia, Sweden, United Kingdom, United States, and Uruguay.", "The rest of the columns correspond to respondents\u2019 answers to 6 questions related to the essential characteristics of democracy, on a 1\u201310 scale. For example, for each variable above, there was a question prompt like this:", "Many things may be desirable, but not all of them are essential characteristics of democracy. Please tell me for each of the following things how essential you think it is as a characteristic of democracy.", "(1) Government taxes rich to subsidize poor;", "Use this scale where 1 means \u2018not at all an essential characteristic of democracy\u2019 and 10 means it definitely is \u2018an essential characteristic of democracy.\u2019", "Another thing you need in order to create the plot is the R package RColorBrewer.", "RColorBrewer is an R package that allows users to create colourful graphs with pre-made color palettes that visualize data in a clear and distinguishable manner. There are 3 categories of palettes: qualitative, diverging, and sequential.", "The code sample provided in the above links would work for most of the times if you do not have a large dataset featuring many groups (in this case, country). However, it will certainly break when you have \u201cmany\u201d groups. The cutoff value is around 8\u201312 depending on the specific color palette you choose and put in the following code.", "Thus if you have a dataset like our case example here, which a lot of times you will have in the real analytical settings, the above R code would break and yield that obnoxious error:", "You will see this because ggplot could not fetch enough colors from the color palette we chose (\u201cSpectral\u201d in this case) for our 22 groups/countries. However, all of the default palettes only featured 8\u201312 colors. Thus we need to \u201ccut\u201d the palette into smaller intervals thus creating more colors to fit our groups. We could do so by manually \u201ccut\u201d the default palette and create a new palette through the colorRampPalette function", "This will cut our original palette intro 22 small intervals and extract the corresponding color. I have tried some of the default palettes and I like the palette \u201cSet2\u201d the most. I actually created 26 colors rather than 22 because this would allow the last few groups to have colors that are brighter and more saturated.", "Have a try on different palettes and combination of colors that please you the most :)", "This is a more subtle problem and it will only be evident if you have skewed data. The reason it is subtle is that the code will not complain about anything and generate the fancifully colorful plots as you requested. However, after you put it into production and report you may be asked \u201cwhy don\u2019t they look like they are on the same scale?\u201d", "Let me show you an example. Please compare the following figures with tax as the plotted variable in the first figure and civil_rights in the second.", "Figure 1 looks as expected and we see a nice depiction of the spread of our data.", "Figure 2 looks bizarre, isn\u2019t it? The density plot looks thin and squashed and it seems that they are not on the same scale as figure 1. But let me tell you that the code to generate both figures is exactly the same with no error at all!", "The problem lies in the distribution of the data and the specificities of the density plot. The civil_rights variable in figure 2 is way more skewed towards the top than the tax variable, meaning that more people think protection of civil rights is definitely an essential characteristic of democracy; than they think that Government taxes rich to subsidize poor as a definitely essential characteristic of democracy. The median for certain country in the civil_rights variable is almost 9. This much skewness directly causes the density estimation of the pdf shoot out of the range of 10 and extends to even 12! However, the rain cloud plot default to cap/trim the density at 10 thus leading to the loss of area of densities out of the range of 10, causing the density plot to look like it is squashed and compressed.", "So far there is no good solution to append the loss of area to the top value 10. However, after researching a bit I found there is a parameter in the raincloud plot that will help our interpretation of the plot.", "The key here is the parameter scale = \"width\" . This parameter is documented in here. And according to this doc:", "if \u201carea\u201d (default), all violins have the same area (before trimming the tails). If \u201ccount\u201d, areas are scaled proportionally to the number of observations. If \u201cwidth\u201d, all violins have the same maximum width.", "If we set scale = \"width\" this is what those two figures would look like:", "We could see the plots, especially figure 4, are no longer as compressed as figure 2, and the distribution of the variable WITHIN each country becomes more evident. This is exactly what we want here, to understand the distribution WITHIN each country. One caveat here is that since we configure the largest density width to be the same, the area of the densities is not the same (even though it wasn\u2019t in figure 2 given the trimmed-out area is not constant across countries). This drawback is especially evident in Sweden in figure 4. However, given our goal is to view the distribution WITHIN not BETWEEN countries, I think the adjusted version works better for us here.", "I hope this article could clear the obstacles you may encounter when you try to make the amazing rain cloud plot. I could envision a broader presence of it in academia and industry for its elegance in condensing tons of information.", "A final note is that the implementation of rain cloud plot in Python and Matlab can also be found in here.", "I hope you find this article useful in your life. Please feel free to let me know if you have further questions related to rain cloud plot :)", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Social science (Communication) PhD candidate, M.S. in Statistics, Data scientist, ykzhao.com"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fe6aff6afe5c1&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-ultimate-eda-visualization-in-r-e6aff6afe5c1&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-ultimate-eda-visualization-in-r-e6aff6afe5c1&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-ultimate-eda-visualization-in-r-e6aff6afe5c1&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-ultimate-eda-visualization-in-r-e6aff6afe5c1&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----e6aff6afe5c1--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----e6aff6afe5c1--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@davidzhao_25439?source=post_page-----e6aff6afe5c1--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@davidzhao_25439?source=post_page-----e6aff6afe5c1--------------------------------", "anchor_text": "David Zhao"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fd3d1bce95226&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-ultimate-eda-visualization-in-r-e6aff6afe5c1&user=David+Zhao&userId=d3d1bce95226&source=post_page-d3d1bce95226----e6aff6afe5c1---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fe6aff6afe5c1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-ultimate-eda-visualization-in-r-e6aff6afe5c1&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fe6aff6afe5c1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-ultimate-eda-visualization-in-r-e6aff6afe5c1&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://orchid00.github.io/tidy_raincloudplot", "anchor_text": "Paula Andrea Martinez"}, {"url": "https://micahallen.org/2018/03/15/introducing-raincloud-plots/", "anchor_text": "Dr. Micah Allen"}, {"url": "https://gist.github.com/dgrtwo/eb7750e74997891d7c20", "anchor_text": "David Robinson"}, {"url": "http://www.worldvaluessurvey.org/WVSDocumentationWV5.jsp", "anchor_text": "World Value Survey Wave 5"}, {"url": "https://github.com/DavidykZhao/Data_for_raincloud_plot.git", "anchor_text": "from here"}, {"url": "http://cran.r-project.org/web/packages/RColorBrewer/index.html", "anchor_text": "RColorBrewer"}, {"url": "https://moderndata.plot.ly/create-colorful-graphs-in-r-with-rcolorbrewer-and-plotly/", "anchor_text": "RColorBrewer"}, {"url": "https://orchid00.github.io/tidy_raincloudplot", "anchor_text": "Paula Andrea Martinez"}, {"url": "https://rdrr.io/github/GuangchuangYu/gglayer/man/geom_flat_violin.html", "anchor_text": "here"}, {"url": "https://github.com/RainCloudPlots/RainCloudPlots", "anchor_text": "here"}, {"url": "https://medium.com/tag/r?source=post_page-----e6aff6afe5c1---------------r-----------------", "anchor_text": "R"}, {"url": "https://medium.com/tag/rain-cloud?source=post_page-----e6aff6afe5c1---------------rain_cloud-----------------", "anchor_text": "Rain Cloud"}, {"url": "https://medium.com/tag/visualization?source=post_page-----e6aff6afe5c1---------------visualization-----------------", "anchor_text": "Visualization"}, {"url": "https://medium.com/tag/social-science?source=post_page-----e6aff6afe5c1---------------social_science-----------------", "anchor_text": "Social Science"}, {"url": "https://medium.com/tag/programming?source=post_page-----e6aff6afe5c1---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fe6aff6afe5c1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-ultimate-eda-visualization-in-r-e6aff6afe5c1&user=David+Zhao&userId=d3d1bce95226&source=-----e6aff6afe5c1---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fe6aff6afe5c1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-ultimate-eda-visualization-in-r-e6aff6afe5c1&user=David+Zhao&userId=d3d1bce95226&source=-----e6aff6afe5c1---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fe6aff6afe5c1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-ultimate-eda-visualization-in-r-e6aff6afe5c1&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----e6aff6afe5c1--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fe6aff6afe5c1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-ultimate-eda-visualization-in-r-e6aff6afe5c1&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----e6aff6afe5c1---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----e6aff6afe5c1--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----e6aff6afe5c1--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----e6aff6afe5c1--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----e6aff6afe5c1--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----e6aff6afe5c1--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----e6aff6afe5c1--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----e6aff6afe5c1--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----e6aff6afe5c1--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@davidzhao_25439?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@davidzhao_25439?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "David Zhao"}, {"url": "https://medium.com/@davidzhao_25439/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "80 Followers"}, {"url": "http://ykzhao.com", "anchor_text": "ykzhao.com"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fd3d1bce95226&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-ultimate-eda-visualization-in-r-e6aff6afe5c1&user=David+Zhao&userId=d3d1bce95226&source=post_page-d3d1bce95226--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Faa0303257fbf&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-ultimate-eda-visualization-in-r-e6aff6afe5c1&newsletterV3=d3d1bce95226&newsletterV3Id=aa0303257fbf&user=David+Zhao&userId=d3d1bce95226&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}