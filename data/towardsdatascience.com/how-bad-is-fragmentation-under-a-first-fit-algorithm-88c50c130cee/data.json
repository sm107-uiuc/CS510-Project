{"url": "https://towardsdatascience.com/how-bad-is-fragmentation-under-a-first-fit-algorithm-88c50c130cee", "time": 1683011365.0865762, "path": "towardsdatascience.com/how-bad-is-fragmentation-under-a-first-fit-algorithm-88c50c130cee/", "webpage": {"metadata": {"title": "How Bad is Fragmentation Under a First-Fit Algorithm? | by Matthew Ward | Towards Data Science", "h1": "How Bad is Fragmentation Under a First-Fit Algorithm?", "description": "Sometimes I read about operating systems because I want to know how my computer works. I\u2019ve run Linux distributions as my primary OS for about 10 years, so having a familiarity with these concepts\u2026"}, "outgoing_paragraph_urls": [{"url": "https://github.com/wardm4/frag-simulation", "anchor_text": "here", "paragraph_index": 19}, {"url": "http://amindformadness.com", "anchor_text": "amindformadness.com", "paragraph_index": 25}], "all_paragraphs": ["Sometimes I read about operating systems because I want to know how my computer works. I\u2019ve run Linux distributions as my primary OS for about 10 years, so having a familiarity with these concepts allows me to greatly customize and optimize my system.", "One topic that the general public is probably interested in is:", "What is fragmentation, and why am I supposed to defrag my computer sometimes?", "Although, maybe no one born after 1990 has even heard of defragging due to the massive boom in memory size of computers.", "What I\u2019m going to describe is not how memory management is actually done on any modern operating system, but it will give a feel for why fragmentation happens (and what this even is).", "I often find it instructive to write my own simulations when trying to understand a concept. I\u2019ll give the code I used to run a really simple first-fit algorithm simulation so we can see just how bad it can get.", "The first-fit algorithm is exactly what it sounds like. You visualize memory as a bar that fills up. Each program has a size, and you look for the first hole big enough for it to fit. Here\u2019s a picture I made to illustrate:", "You download the blue program, and it goes into the first (left-most) area no problem. You download the red, and the first available hole is right next to the blue. Same for the green.", "Then you realize you don\u2019t want the red anymore, so you delete it. This leaves a hole. When you download the purple program your memory management notices the hole and tries to fit it there. Woops. The hole was too small, so it moves on to find the first hole that it fits in (hence the name \u201cfirst-fit algorithm\u201d).", "Eventually, you may delete the green as well, and something might go in the big hole leftover from the red and green, but it probably won\u2019t fill the whole thing.", "Once these holes start appearing, they are hard to get rid of. This is called external fragmentation. I wrote a simulation of this to see just how bad it can get. Although the program does nothing more than the simple thing I just showed, it is kind of long and confusing, so let\u2019s take it one step at a time.", "I made two classes. The first one allowed me to pretend like I was downloading a program. Each program came with a random size from 1 to 10, the position where it was placed into memory, and the amount of time until I deleted it (a random number from 1 to 20).", "This class is just the stick of memory. It has a total size that we will take to be 100 in our simulations and it has a list of the programs that are currently in memory (the programs keep track of their positions).", "I made a function that adds a program into the memory stick. This just looks for the first available hole for which it fits into. Unfortunately, I ended up not seeing a slick uniform way to do it and cobbled together something by cases. I check the hole before the first program separately and the hole after the last program separately.", "I made a sort method because when I appended a new program to the list, it was just stuck at the end despite having a position that could be in the middle. This just orders them by position. Lastly, I have a program that gets removed if enough time has passed.", "Lastly, I just simulate for 100 time steps. At each time step, I try to stick in one randomly generated program. I then make all the time-to-deletion parameters decrease. I check whether any are 0 and remove those. I sort the list and then repeat.", "Here are some of the final results:", "This one had 66% memory use, so external fragmentation led to about 34% waste.", "This one was slightly better at 69% use.", "This one was quite a bit worse at 43% use and hence 57% waste. The full code can be found on GitHub here.", "It\u2019s fun to play around with different sizes of memory and lengths of time to delete stuff to get a feel for how that changes things. Fragmentation will obviously not be a huge problem if the amount of space you try to use is sufficiently less than your total memory.", "On the other hand, as these simulations show, the answer to the title question is that it can be pretty bad. These simulations are actually accurate (if my old Operating System Concepts 7th Edition textbook is correct), because you can mathematically prove that the expected space you waste with this algorithm is roughly 33% (I ran a lot more simulations than I showed you and this was what I usually saw).", "There is no need to fear, though. Old operating systems did use some variant on this, but all modern operating systems use something called paging which completely avoids external fragmentation (there is something called internal fragmentation that I didn\u2019t talk about).", "Just for fun, I decided I would \u201cprove\u201d to you that this algorithm is only bad when you use a sufficiently large proportion of memory (i.e. probably never on a modern computer!). Here\u2019s such a simulation result where your programs are too small for the wasted space to ever matter:", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Lifelong learner and creator. More information at amindformadness.com"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F88c50c130cee&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-bad-is-fragmentation-under-a-first-fit-algorithm-88c50c130cee&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-bad-is-fragmentation-under-a-first-fit-algorithm-88c50c130cee&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-bad-is-fragmentation-under-a-first-fit-algorithm-88c50c130cee&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-bad-is-fragmentation-under-a-first-fit-algorithm-88c50c130cee&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----88c50c130cee--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----88c50c130cee--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@wardmj4?source=post_page-----88c50c130cee--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@wardmj4?source=post_page-----88c50c130cee--------------------------------", "anchor_text": "Matthew Ward"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fad7e5fa173f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-bad-is-fragmentation-under-a-first-fit-algorithm-88c50c130cee&user=Matthew+Ward&userId=ad7e5fa173f&source=post_page-ad7e5fa173f----88c50c130cee---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F88c50c130cee&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-bad-is-fragmentation-under-a-first-fit-algorithm-88c50c130cee&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F88c50c130cee&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-bad-is-fragmentation-under-a-first-fit-algorithm-88c50c130cee&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@clemhlrdt?utm_source=medium&utm_medium=referral", "anchor_text": "Cl\u00e9ment H"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://github.com/wardm4/frag-simulation", "anchor_text": "here"}, {"url": "https://medium.com/tag/mathematics?source=post_page-----88c50c130cee---------------mathematics-----------------", "anchor_text": "Mathematics"}, {"url": "https://medium.com/tag/algorithms?source=post_page-----88c50c130cee---------------algorithms-----------------", "anchor_text": "Algorithms"}, {"url": "https://medium.com/tag/simulation?source=post_page-----88c50c130cee---------------simulation-----------------", "anchor_text": "Simulation"}, {"url": "https://medium.com/tag/operating-systems?source=post_page-----88c50c130cee---------------operating_systems-----------------", "anchor_text": "Operating Systems"}, {"url": "https://medium.com/tag/statistics?source=post_page-----88c50c130cee---------------statistics-----------------", "anchor_text": "Statistics"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F88c50c130cee&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-bad-is-fragmentation-under-a-first-fit-algorithm-88c50c130cee&user=Matthew+Ward&userId=ad7e5fa173f&source=-----88c50c130cee---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F88c50c130cee&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-bad-is-fragmentation-under-a-first-fit-algorithm-88c50c130cee&user=Matthew+Ward&userId=ad7e5fa173f&source=-----88c50c130cee---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F88c50c130cee&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-bad-is-fragmentation-under-a-first-fit-algorithm-88c50c130cee&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----88c50c130cee--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F88c50c130cee&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-bad-is-fragmentation-under-a-first-fit-algorithm-88c50c130cee&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----88c50c130cee---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----88c50c130cee--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----88c50c130cee--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----88c50c130cee--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----88c50c130cee--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----88c50c130cee--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----88c50c130cee--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----88c50c130cee--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----88c50c130cee--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@wardmj4?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@wardmj4?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Matthew Ward"}, {"url": "https://medium.com/@wardmj4/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "1.3K Followers"}, {"url": "http://amindformadness.com", "anchor_text": "amindformadness.com"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fad7e5fa173f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-bad-is-fragmentation-under-a-first-fit-algorithm-88c50c130cee&user=Matthew+Ward&userId=ad7e5fa173f&source=post_page-ad7e5fa173f--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F4b9b6891d7cb&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-bad-is-fragmentation-under-a-first-fit-algorithm-88c50c130cee&newsletterV3=ad7e5fa173f&newsletterV3Id=4b9b6891d7cb&user=Matthew+Ward&userId=ad7e5fa173f&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}