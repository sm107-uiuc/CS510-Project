{"url": "https://towardsdatascience.com/who-is-a-potential-customer-2d76af153f57", "time": 1683006027.794585, "path": "towardsdatascience.com/who-is-a-potential-customer-2d76af153f57/", "webpage": {"metadata": {"title": "Who is a Potential Customer?. Online purchasing intention prediction\u2026 | by Pei Guo | Towards Data Science", "h1": "Who is a Potential Customer?", "description": "Every day online shopping sites receive a huge number of visits. However, only a small portion of the visits turned into purchases. They will be able to launch target promotions that benefit both the\u2026"}, "outgoing_paragraph_urls": [{"url": "https://link.springer.com/article/10.1007/s00521-018-3523-0", "anchor_text": "research", "paragraph_index": 2}, {"url": "https://github.com/guo-pei/who-is-a-potential-customer", "anchor_text": "Github", "paragraph_index": 2}, {"url": "https://support.google.com/analytics/answer/1009409?hl=en", "anchor_text": "bounce rate", "paragraph_index": 5}, {"url": "https://support.google.com/analytics/answer/2525491?hl=en", "anchor_text": "exit rate", "paragraph_index": 5}, {"url": "https://support.google.com/analytics/answer/2695658?hl=en", "anchor_text": "page value", "paragraph_index": 5}, {"url": "https://github.com/guo-pei/who-is-a-potential-customer", "anchor_text": "Github", "paragraph_index": 20}, {"url": "https://github.com/guo-pei/who-is-a-potential-customer", "anchor_text": "Github", "paragraph_index": 34}, {"url": "https://github.com/guo-pei/who-is-a-potential-customer", "anchor_text": "Github", "paragraph_index": 38}, {"url": "https://www.linkedin.com/in/pei-guo/", "anchor_text": "Linkedin", "paragraph_index": 42}, {"url": "http://linkedin.com/in/pei-guo/", "anchor_text": "linkedin.com/in/pei-guo/", "paragraph_index": 44}], "all_paragraphs": ["Every day online shopping sites receive a huge number of visits. However, only a small portion of the visits turned into purchases.", "What if the shopping sites know which customer groups are more likely to make purchases?", "They will be able to launch target promotions that benefit both the websites and the customers. Today we will explore this problem using the power of machine learning. The dataset is from the research of C. Okan Sakar. We will use different methodologies from the research in this project. If you would like to reproduce this project, you can find all the resources in my Github.", "The dataset consists of 12,330 sessions(rows) of online shopping visits to a website. The data is within a 1 year period to avoid any tendency. 18 features are used to describe each session, divided into numeric and categorical features. Feature \u201cRevenue\u201d is the label of our binary classification problem. Our goal is to use all the other 17 features below to predict the label \u201cRevenue\u201d, that is to see whether a visit session will end up with a transaction or not.", "Here are the descriptions of the features, referenced to the paper.", "It\u2019s worth note that Google Analytics metrics are used in numeric features: bounce rate measures whether a customer leaves a page without further visiting another one; exit rate tells you how often a page is the last page of a session; page value shows which page contributed more to the site\u2019s revenue.", "We will follow the workflow above to find the best model for customer purchase intension prediction.", "We need to make a lot of decisions on model selections and feature selections in this project. The decisions are made based on these metrics: Accuracy, Recall, Precision, and F1. Let me explain them using our business case.", "In our dataset, there is a customer behind each online visit session. If we predict \u201cRevenue\u201d is 1, it means this customer who initiated the session is more likely to make a purchase. However, our prediction is not always correct. The table below shows the different scenarios.", "Assumptions: 1. $100 revenue for each order placed and $5 cost for each coupon sent. 2. A likely customer with a coupon will make a purchase and an unlikely customer with a coupon will NOT make a purchase.", "As seen from the above table, we want more \u201ctrue positive(TP)\u201d to happen and to avoid \u201cfalse negative(FN)\u201d as much as possible. How do we apply this to a machine learning model? The classification metrics:", "Of all the likely customers, how many of them the model can identify correctly. A high recall requires both high TP and low FN. It can identify a large portion of likely customers to reduce lost sales. Meanwhile more unlikely customers(FP) will also receive the coupons. This is fine when the lost sales cost is greater than the coupon cost.", "Of all the \u201clikely\u201d customers our model predicted, how many of them are actually correct, not false positive. A high precision score requires both high TP and low FP. It can make sure a larger portion of predicted likely customers are correct. More coupons are used, fewer wasted coupons. However more other likely customers will be ignored to cause lost sales.", "A value that balances recall and precision scores with consideration of both.", "The percentage of the predicted results are correct. This metric only works when the classes are balanced. We don\u2019t use it for unbalanced data.", "As a result of the above, in this project, we will use the Recall score as our main metric when making decisions on model selections. When recall scores are similar, we will also consider F1 scores.", "Usually only a small portion of the visits ended up into transactions, we suspect the data is imbalanced. After testing it below, we found the transaction conversion rate is only 18.3%. This means later we need to make a balance adjustment on the data for modeling.", "The categorical data need to be converted into numeric for further analysis.", "The data set is highly imbalanced. All the models tend to fit towards the majority class, so in order to improve the model performance, we need to balance the data first. I used the SMOTE oversizing technique, the result is that both classes have the same number of samples.", "Now we can use Accuracy as a metric for a balanced dataset. I chose 7 classifiers as model candidates. I split the dataset into 80% train and 20% test. Then the train set is fitted into each model without tuning. Here we get a baseline accuracy ranking. I will choose the top 4 models as my baseline models: Random forest, EXTRA trees, ADAboost and logistic regression. We now prioritize on accuracy to recall, because we need unbiased models. Then later select high recall models within the high accuracy models.", "Feature engineering and model tuning will be performed later on the 4 models. For code details please refer to my Github page.", "My goal is to reduce the number of features and increase the metric values at the same time. With fewer features, the cost of data collection is reduced, as well as the computing time and cost. Three feature selection techniques were used to give a comprehensive decision: information values, sklearn\u2019s SelectFromModel(), and the correlation values.", "Which features can give us more information in prediction than other features? Let\u2019s try sklearn\u2019s SelectFromModel() to filter the importance weights of the features. This gives us three features as important features. We will keep them and continue exploring the other two methods for feature selection.", "The heatmap on the left shows the correlations among all the features. The darker the color, the higher the correlation. What we want to see is that the features are very correlated with the label \u201cRevenue\u201d but not correlated with one another. But some features are highly correlated with another feature. This means only one of the correlated features can be kept. How do we know which one to keep? The information values (IV) will help us.", "Now, we will use information values to rank all the features and find the ones that have medium to strong prediction power.", "The function below will calculate the information value of each feature.", "With all the calculations above, now we have the results below:", "The tables above show the 8 features kept for further modeling:", "How did I make the decisions?", "The flowchart on the left is my thought process.", "Now we have fewer features, let\u2019s see if they can help improve our models:", "We have great results! All the recall values are improved greatly after feature selection and the other metrics look good as well.", "We have 7 categorical features. Even though they are converted to numeric values earlier, all the values of a categorical feature are in one column. What if we make each value its own feature? Let\u2019s dummy the categorical feature variable! After processing the data, now we have 29 features and 1 label.", "Why we don\u2019t use the dummy variables in the 1st round feature selection? Because it is not effective to dummy the low information value features and make too many new features. That will lower the models\u2019 performance.", "Now we will use the same techniques in the 1st round feature selection process to select the new features. For details, please refer to my Github.", "Now the heat map above shows the 7 features + 1 label after a new round of feature selection. Note that no two features are correlated (this is great), and the Pagevalues_bins_above_0 feature is very relevant to Revenue", "Now let\u2019s see the performance of these new features on the models.", "We can see that EXTRA trees and AdaBoost have improved recall scores while the other two models don\u2019t perform as well as before. EXTRA trees model has a lower recall than AdaBoost but a higher F1. So we will keep both models for now for the next step, model tuning.", "Now we have narrowed down to two models: EXTRA trees and AdaBoost. By tuning their hyper-parameters, we could potentially increase the recall score even further. For model tuning techniques, I will use RandomizedSearchCV first. It will randomly run the model through a list of hyper-parameters we defined. Once we have the best performance through RandomizedSearch, we will use GridSearch to further improve the model by running through a narrower list of hyper-parameters. For details, please check my Github.", "The picture above shows that both models were improved by using a randomized search, then grid search. The final recall scores only have 0.002 difference. We then look at F1 and accuracy scores. EXTRA trees model has much higher scores in both metrics. As a result, it is our final model.", "In this project, we built a binary classification machine learning model to predict the purchase intension of customers on an online shopping site. After several rounds of feature selections and model selections, we determine the best model for our data is EXTRA trees and the features to fit in the model are as below.", "EXTRA trees model we built in this project can capture 83% of the likely customers. This means if the marketing team send the coupons to all the likely customers predicted by this model, the coupons will cover 83% of all the actual likely customer in the market. This model can definitely help the marketing team make effective marketing strategies!", "Thank you for your time in reading this article. I hope it gives you some inspirations in your own project. If you like my article, please give it a clap. Connect with me on Linkedin is always welcomed! Happy learning!", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Data Science Enthusiast. Looking for opportunities to join a Data Science team. linkedin.com/in/pei-guo/"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F2d76af153f57&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwho-is-a-potential-customer-2d76af153f57&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwho-is-a-potential-customer-2d76af153f57&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwho-is-a-potential-customer-2d76af153f57&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwho-is-a-potential-customer-2d76af153f57&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----2d76af153f57--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----2d76af153f57--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@guopei?source=post_page-----2d76af153f57--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@guopei?source=post_page-----2d76af153f57--------------------------------", "anchor_text": "Pei Guo"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F4cc7960aec&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwho-is-a-potential-customer-2d76af153f57&user=Pei+Guo&userId=4cc7960aec&source=post_page-4cc7960aec----2d76af153f57---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F2d76af153f57&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwho-is-a-potential-customer-2d76af153f57&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F2d76af153f57&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwho-is-a-potential-customer-2d76af153f57&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@davidveksler?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "David Veksler"}, {"url": "https://unsplash.com/s/photos/online-shopping?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Unsplash"}, {"url": "https://link.springer.com/article/10.1007/s00521-018-3523-0", "anchor_text": "research"}, {"url": "https://github.com/guo-pei/who-is-a-potential-customer", "anchor_text": "Github"}, {"url": "https://support.google.com/analytics/answer/1009409?hl=en", "anchor_text": "bounce rate"}, {"url": "https://support.google.com/analytics/answer/2525491?hl=en", "anchor_text": "exit rate"}, {"url": "https://support.google.com/analytics/answer/2695658?hl=en", "anchor_text": "page value"}, {"url": "https://unsplash.com/@victoriano?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Victoriano Izquierdo"}, {"url": "https://unsplash.com/s/photos/selection?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Unsplash"}, {"url": "https://github.com/guo-pei/who-is-a-potential-customer", "anchor_text": "Github"}, {"url": "https://unsplash.com/@amartino20?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Anthony Martino"}, {"url": "https://unsplash.com/s/photos/choose?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Unsplash"}, {"url": "https://github.com/guo-pei/who-is-a-potential-customer", "anchor_text": "Github"}, {"url": "https://unsplash.com/@denisseleon?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Denisse Leon"}, {"url": "https://unsplash.com/s/photos/tune?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Unsplash"}, {"url": "https://github.com/guo-pei/who-is-a-potential-customer", "anchor_text": "Github"}, {"url": "https://www.linkedin.com/in/pei-guo/", "anchor_text": "Linkedin"}, {"url": "https://medium.com/tag/feature-engineering?source=post_page-----2d76af153f57---------------feature_engineering-----------------", "anchor_text": "Feature Engineering"}, {"url": "https://medium.com/tag/data-science?source=post_page-----2d76af153f57---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----2d76af153f57---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/tag/marketing-strategies?source=post_page-----2d76af153f57---------------marketing_strategies-----------------", "anchor_text": "Marketing Strategies"}, {"url": "https://medium.com/tag/online-shopping?source=post_page-----2d76af153f57---------------online_shopping-----------------", "anchor_text": "Online Shopping"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F2d76af153f57&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwho-is-a-potential-customer-2d76af153f57&user=Pei+Guo&userId=4cc7960aec&source=-----2d76af153f57---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F2d76af153f57&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwho-is-a-potential-customer-2d76af153f57&user=Pei+Guo&userId=4cc7960aec&source=-----2d76af153f57---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F2d76af153f57&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwho-is-a-potential-customer-2d76af153f57&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----2d76af153f57--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F2d76af153f57&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwho-is-a-potential-customer-2d76af153f57&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----2d76af153f57---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----2d76af153f57--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----2d76af153f57--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----2d76af153f57--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----2d76af153f57--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----2d76af153f57--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----2d76af153f57--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----2d76af153f57--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----2d76af153f57--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@guopei?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@guopei?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Pei Guo"}, {"url": "https://medium.com/@guopei/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "108 Followers"}, {"url": "http://linkedin.com/in/pei-guo/", "anchor_text": "linkedin.com/in/pei-guo/"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F4cc7960aec&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwho-is-a-potential-customer-2d76af153f57&user=Pei+Guo&userId=4cc7960aec&source=post_page-4cc7960aec--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F16e2738ab548&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwho-is-a-potential-customer-2d76af153f57&newsletterV3=4cc7960aec&newsletterV3Id=16e2738ab548&user=Pei+Guo&userId=4cc7960aec&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}