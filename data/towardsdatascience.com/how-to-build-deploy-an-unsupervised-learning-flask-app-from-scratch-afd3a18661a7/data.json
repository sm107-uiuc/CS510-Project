{"url": "https://towardsdatascience.com/how-to-build-deploy-an-unsupervised-learning-flask-app-from-scratch-afd3a18661a7", "time": 1683013935.685793, "path": "towardsdatascience.com/how-to-build-deploy-an-unsupervised-learning-flask-app-from-scratch-afd3a18661a7/", "webpage": {"metadata": {"title": "Build & Deploy an Unsupervised Learning Flask App from Scratch | by Soah | Towards Data Science", "h1": "Build & Deploy an Unsupervised Learning Flask App from Scratch", "description": "In this blog post, I will give a detailed explanation on how to set up a color palette generator web app. I will cover the basics of setting up the flask app architecture, building the back-end with\u2026"}, "outgoing_paragraph_urls": [{"url": "https://www.curiousily.com/", "anchor_text": "https://www.curiousily.com/", "paragraph_index": 46}], "all_paragraphs": ["In this blog post, I will give a detailed explanation on how to set up a color palette generator web app. I will cover the basics of setting up the flask app architecture, building the back-end with the k-means unsupervised learning algorithm in python, and the front end in html, css, and javascript. I will also cover connecting the front end with the back-end using jQuery library and deploying the final app to Heroku.", "Here is a quick demo of what we\u2019ll be building.", "The entire code for the project can be found on my GitHub:", "Are you ready? Let\u2019s get the ball rolling!", "Setting up a basic flask app is simple. Just follow the following steps:", "When you are done, the structure of your demo_app should look somewhat like this:", "Now we can turn our attention to populating the files we just created.", "The .flaskenv file: In this file, we will set the flask environment variable as development and we will link the file to the main.py file.", "The main.py file: In this file, we will just import our flask app from the application folder.", "The config.py file: In this file, we will create a secret key for cookies. This will be important once we deploy our app on Heroku.", "The k-means.py file: Our k-means algorithm will go into this file.", "The requirements.txt file: In this file you will record all the dependencies that your application requires to run. For populating this file, you will first need to enter the virtual environment. You can do this by simply cd-ing into the root directory and running venv/scripts/activate from your command line. Now within the venv just run pip freeze >requirements.txt to record all your current dependencies. Remember you will need to update this file with all dependencies as you build the app. You may notice that flask is not installed within the venv. Just install it using the pip install flask command and update the requirements.txt file.", "The __init__.py file: Here we just initialize the app object and connect it to the routes.py file", "The routes.py file: Here we define functions that run when the user routes to a certain web address. Just to check everything is done correctly, define a function \u2018run\u2019 that returns the string \u2018flask app is running!\u2019 when the user routes to \u2018/\u2019 after the local server address.", "Return to the command line (make sure that you are within the virtual environment and run the command \u2018flask run\u2019. You should get an output providing the address where your app is running. Copy and paste that into your browser and you should get the following output.", "If everything works fine up till now, congratulations! You are now ready to move ahead to the next phase of building the palette generator app.", "Now we can start writing the k-means algorithm for our palette generator app.", "K-means algorithm is a very simple unsupervised machine learning technique. This algorithm takes n data points and partitions them into k clusters based on the distance between the data points and the centroid of the clusters. The algorithm aims to minimize the distance of each data point from the centroid of the cluster it is classified into. The number of clusters is usually specified by an external input to the algorithm. For the palette generator app, we want the algorithm to identify clusters of similarly colored pixels.", "We begin by importing all the necessary dependencies and making a get_points function. The get_points function takes in an image, resizes it to 200 by 400 pixel, and converts it to RGB format. The function then creates a list of rgb tuples for each pixel in the pre-processed image. The annotated code is given below.", "Now first we will create two classes called Point and Clusters with the attributes as shown in the code embed below. Then we will create a function for finding the Euclidean distance between two pixels in terms of their rgb values.", "Now we have to create a k-means class with a few functions. We will first have an initializer with the attributes for the class, namely the number of clusters and the minimum difference for each cluster.", "Then we create the calculate_center function which basically calculates the average r, g, b value of a cluster and converts it into a Point class with these values.", "The assign_points function calculates the Euclidean distance of every point in an image from the centroid of every cluster and assigns the point to the cluster with which the point has the smallest distance. It returns a list of points for each cluster.", "The fit function use the earlier defined functions to make clusters from a list of points in an image.", "Finally, we will use everything we have defined up-till now to construct the get_colors() function. This function will take in an image and the number of clusters as input arguments and will return a list of hex values for the colors. The length of the list will be equal to the input for the number of clusters.", "Now we can create the front end in html and css. In the template folder, create an index.html file. You can choose to either write the entire html code in the index.html file or just keep the basic html skeleton in index.html file and write the rest of the code in small html files in the includes folder. I prefer the latter option because it is much easier to write and debug the code when it is in small snippets rather than in one huge file. Whenever you wish to include the code in a small file, just copy all the code into the newly created file and in the index.html file include {% include \u2018file_path_to_your_html_file\u2019 %}. An example for the header would be: <div id=\u2019header\u2019>{% include \u201cIncludes/header.html\u201d %}</div>.", "For the html, you need to create three things:", "Add a bit of styling using css. Save your css files in the css folder within the static folder and reference them in your index.html file.", "You can also add java script functionality by linking your .js files in the java script folder in static to the index.html file.", "Now that you have the front-end built, we can start working with the routes.py file.", "In the route.py file, we will add a function to render the page upon routing to the server address.", "Now we need to have a way of passing the user input to the k-means algorithm and passing the results from the algorithm back to the user. We will assume that we get a json object called message from the page which has two keys: image and name. The value for image key is a base 64 encoded image while the value for the name is the user input for the number of colors. We will decode the image object to a format Python can process and will then pass it to our fit() function imported from the k-means.py file. Then we will use the output which if you remember is a list of hex codes for the colors and will convert it into a dictionary called response. We will then convert the dictionary into a json object using the jsonify function.", "With our routes.py file complete, we can turn our attention to the index.js file where we will be writing all the jQuery code.", "Okay so there\u2019s a lot going on at the jQuery side, I will try my best to explain it in an easy to understand manner.", "My idea is to read the image input and display the image on the app. When the user presses the \u2018Get color palette\u2019 button, the output from the k-means algorithm is used to display the names of colors and the fill in the circles in the color palette area.", "To achieve this we first need to define a function to read the uploaded image. You need to have some basic familiarity with jQuery to understand the code below. Your code is very likely to be different from mine because of the differences in my html code and your html code, but I think the general idea should be the same. So the function basically reads the image file input when the image file is loaded and strips off the metadata from the image. I have plugged in a console.log() function for the image just to see if everything is working fine.", "We also need to have a function to handle the displaying of colors and color names after the \u2018Get color palette\u2019 button is clicked. For doing this I came up with the following code.", "The code generates the json object called message that we use in the routes.py file. The code also brings in the response json object from the routes.py file to use for changing the colors of circles and displaying color names in color palette area of the app.", "You can add more tweaks to the jQuery code to further customize the app.", "Once you are satisfied with the jQuery, you can deploy your app to Heroku. For deploying to Heroku, we will need to create a Procfile in the root directory.", "Install the gunicorn package in your virtual environment.", "You will also need to create a wsgi.py file with the following code:", "Also remember to update the requirements.txt file with all added dependencies and update the POST address to \u2018your app name\u2019.herokuapp.com", "Now create a git repository with the git init and git add commands (You can also create it early on and track the changes you make in the project)", "In order to upload the content to Heroku, create an account on Heroku and install the Heroku CLI on your machine. Login to Heroku from the command line by typing heroku login and following the instructions. Once done, create a new Heroku app using the command: heroku create <a unique name for your app>. Now push your app to heroku using git by the command: git push heroku master. You should receive a long output including a web address for your app.", "If you find errors, you can always debug using the command heroku logs \u2014 tail. Once you have gotten rid of any errors (or are lucky to not have any), navigate to the web page to find your app deployed in its full glory!", "My code for the k-means algorithm is derived from an amazing Colab notebook that can be found on Venelin\u2019s website: https://www.curiousily.com/. You should definitely check out Venelin\u2019s blog. It\u2019s superb! :)", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Engineering student at University of Cambridge. Passionate about coding, books, and art."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fafd3a18661a7&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-build-deploy-an-unsupervised-learning-flask-app-from-scratch-afd3a18661a7&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-build-deploy-an-unsupervised-learning-flask-app-from-scratch-afd3a18661a7&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-build-deploy-an-unsupervised-learning-flask-app-from-scratch-afd3a18661a7&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-build-deploy-an-unsupervised-learning-flask-app-from-scratch-afd3a18661a7&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----afd3a18661a7--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----afd3a18661a7--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://soah.medium.com/?source=post_page-----afd3a18661a7--------------------------------", "anchor_text": ""}, {"url": "https://soah.medium.com/?source=post_page-----afd3a18661a7--------------------------------", "anchor_text": "Soah"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F305321cbf647&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-build-deploy-an-unsupervised-learning-flask-app-from-scratch-afd3a18661a7&user=Soah&userId=305321cbf647&source=post_page-305321cbf647----afd3a18661a7---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fafd3a18661a7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-build-deploy-an-unsupervised-learning-flask-app-from-scratch-afd3a18661a7&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fafd3a18661a7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-build-deploy-an-unsupervised-learning-flask-app-from-scratch-afd3a18661a7&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://github.com/Saffafatima12/palette-generator-app", "anchor_text": "Saffafatima12/palette-generator-appYou can't perform that action at this time. You signed in with another tab or window. You signed out in another tab or\u2026github.com"}, {"url": "https://www.curiousily.com/", "anchor_text": "https://www.curiousily.com/"}, {"url": "https://medium.com/tag/unsupervised-learning?source=post_page-----afd3a18661a7---------------unsupervised_learning-----------------", "anchor_text": "Unsupervised Learning"}, {"url": "https://medium.com/tag/flask?source=post_page-----afd3a18661a7---------------flask-----------------", "anchor_text": "Flask"}, {"url": "https://medium.com/tag/web-app-development?source=post_page-----afd3a18661a7---------------web_app_development-----------------", "anchor_text": "Web App Development"}, {"url": "https://medium.com/tag/heroku?source=post_page-----afd3a18661a7---------------heroku-----------------", "anchor_text": "Heroku"}, {"url": "https://medium.com/tag/k-means?source=post_page-----afd3a18661a7---------------k_means-----------------", "anchor_text": "K Means"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fafd3a18661a7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-build-deploy-an-unsupervised-learning-flask-app-from-scratch-afd3a18661a7&user=Soah&userId=305321cbf647&source=-----afd3a18661a7---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fafd3a18661a7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-build-deploy-an-unsupervised-learning-flask-app-from-scratch-afd3a18661a7&user=Soah&userId=305321cbf647&source=-----afd3a18661a7---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fafd3a18661a7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-build-deploy-an-unsupervised-learning-flask-app-from-scratch-afd3a18661a7&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----afd3a18661a7--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fafd3a18661a7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-build-deploy-an-unsupervised-learning-flask-app-from-scratch-afd3a18661a7&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----afd3a18661a7---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----afd3a18661a7--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----afd3a18661a7--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----afd3a18661a7--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----afd3a18661a7--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----afd3a18661a7--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----afd3a18661a7--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----afd3a18661a7--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----afd3a18661a7--------------------------------", "anchor_text": ""}, {"url": "https://soah.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://soah.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Soah"}, {"url": "https://soah.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "16 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F305321cbf647&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-build-deploy-an-unsupervised-learning-flask-app-from-scratch-afd3a18661a7&user=Soah&userId=305321cbf647&source=post_page-305321cbf647--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fc28fa6226138&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-build-deploy-an-unsupervised-learning-flask-app-from-scratch-afd3a18661a7&newsletterV3=305321cbf647&newsletterV3Id=c28fa6226138&user=Soah&userId=305321cbf647&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}