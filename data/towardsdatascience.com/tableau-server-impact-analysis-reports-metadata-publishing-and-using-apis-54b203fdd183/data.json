{"url": "https://towardsdatascience.com/tableau-server-impact-analysis-reports-metadata-publishing-and-using-apis-54b203fdd183", "time": 1683006986.550817, "path": "towardsdatascience.com/tableau-server-impact-analysis-reports-metadata-publishing-and-using-apis-54b203fdd183/", "webpage": {"metadata": {"title": "Tableau Server impact analysis reports: metadata, publishing, and using APIs | by Elliott Stam | Towards Data Science", "h1": "Tableau Server impact analysis reports: metadata, publishing, and using APIs", "description": "In the first three articles in this series, we touched on Tableau\u2019s Metadata API and internal PostgreSQL database and demonstrated how you can combine them to build powerful datasets that fuel our\u2026"}, "outgoing_paragraph_urls": [{"url": "https://help.tableau.com/current/api/hyper_api/en-us/index.html", "anchor_text": "Hyper API", "paragraph_index": 6}, {"url": "https://help.tableau.com/current/api/rest_api/en-us/REST/rest_api.htm", "anchor_text": "REST API", "paragraph_index": 6}, {"url": "https://twitter.com/hashtag/datadev?lang=en", "anchor_text": "#DataDev", "paragraph_index": 10}, {"url": "https://gist.github.com/divinorum-webb/450b8b81c7544629fa71ff682b1522e0", "anchor_text": "GitHub gist", "paragraph_index": 16}, {"url": "https://github.com/divinorum-webb/tableau-api-lib", "anchor_text": "tableau-api-lib", "paragraph_index": 18}, {"url": "https://help.tableau.com/current/api/rest_api/en-us/REST/rest_api_ref.htm", "anchor_text": "Tableau\u2019s REST API reference", "paragraph_index": 18}, {"url": "https://github.com/tableau/server-client-python", "anchor_text": "Tableau Server Client", "paragraph_index": 19}, {"url": "https://help.tableau.com/current/api/rest_api/en-us/REST/rest_api_ref.htm#publish_data_source", "anchor_text": "desired endpoint", "paragraph_index": 20}, {"url": "https://gist.github.com/divinorum-webb/a300f41bca41677113e4a49012365e95", "anchor_text": "this GitHub gist", "paragraph_index": 35}], "all_paragraphs": ["In the first three articles in this series, we touched on Tableau\u2019s Metadata API and internal PostgreSQL database and demonstrated how you can combine them to build powerful datasets that fuel our impact analysis efforts.", "If this is your first time tuning into this series, here are the previous milestones for your convenience:", "The last milestone we completed left us with a CSV file containing a combination of Metadata API output (the core of our impact analysis) and PostgreSQL output (adds extra flavor including the count of user views and last interaction date).", "This article explores some relevant next steps: once we have the data we want, how should we store that data? Can we publish the data so other Tableau users are free to build their own interactive reports?", "One viable option for handling this data is to turn it into a Tableau .hyper extract and publish it to Tableau Server. This is what we will focus on in the sections below.", "By the end of this article, we will have a workflow that builds upon our previous milestones, packages that data into a Tableau .hyper extract, and publishes that data to our Tableau environment.", "Two new tools are entering the picture in this article: Tableau\u2019s Hyper API and REST API. Note that if you have any previous experience using Tableau\u2019s legacy Extract API or the legacy Tableau SDK, the Hyper API is what you should be using moving forward (Tableau 10.5+) for building your extract files.", "The Hyper API allows us to create high-performance data extracts, and leaves the door open to being able to append or remove data from those extracts. The .hyper extract files are first-class citizens in the Tableau world, so this is an upgrade for us compared to the alternative of continuing to use CSV or JSON files.", "You could go to a sushi restaurant and order macaroni and cheese, but who does that? It\u2019s a similar story with data storage in Tableau. Why use a CSV on Tableau Server when Tableau has built an entire extract engine around .hyper files? Order the damn sushi.", "Once we have our .hyper extract file ready to go, we will pass the baton to Tableau\u2019s REST API to publish the extract as a datasource on Tableau Server (or Tableau Online).", "Nothing fancy here, just two straightforward use cases that build upon some excellent tools provided by the Tableau dev team. Shoutout to the #DataDev community!", "If you need to catch up, feel free to scroll up to the top and click on the articles which will walk you through steps to complete the earlier milestones.", "In the sections below, we pick up right where we left off at the end of the second milestone. We have the core data we need to build customized impact analysis reports, and now we want to place this data into a .hyper extract and publish it to Tableau Server (or Tableau Online).", "In the spirit of bringing all the various tools under one roof, I am using Python as the overlord that orchestrates all the various tools at play. Here is how we can use the Hyper API to turn our existing data into a .hyper extract.", "Let\u2019s first define a local file path where our .hyper file will be stored (this builds upon the Python code already developed in the previous milestone \u2014 see the consolidated GitHub gist at the end of the article for complete code):", "I borrowed some template code from the Hyper API documentation and adapted it to build an extract from a Pandas DataFrame, as seen in the GitHub gist below. Consolidated code encompassing the entire process is included at the end of the article.", "This GitHub gist covers the code snippet relevant to this section, but note that running it by itself will not work (use the consolidated GitHub gist at the end of the article for that).", "In my own testing, I also needed to do a bit of cleanup on the DataFrame to get the Hyper API to not complain about certain inputs being null. In particular, datetime and date columns have been a thorn in my side when moving from a pandas DataFrame to a .hyper extract, so I tend to force the date columns to type \u2018str\u2019 and then convert that text back to a date within Tableau. This side-steps the headache of worrying about whether a date is represented as date, datetime, timestamp, or any other specific date format.", "Now that we have our extract file, let\u2019s push it to Tableau Server (or Tableau Online). The library I\u2019ll use here is tableau-api-lib, which I developed and maintain. It\u2019s designed to mirror the REST API endpoints found on Tableau\u2019s REST API reference.", "The primary difference between this library and other Python / Tableau REST API libraries (such as Tableau\u2019s own Tableau Server Client library) is that this library is designed such that if you see an endpoint in the Tableau documentation, that endpoint will be implemented with the same naming convention.", "For example, right now we need to publish a data source. Looking at the Tableau Server REST API reference, we find the desired endpoint:", "The tableau-api-lib implementation of the \u2018Publish Data Source\u2019 endpoint provides us an instance method we can call like this:", "Let\u2019s get that extract published! But before we publish it, we need to know the project (and more importantly, the project ID) that we are publishing to.", "We can fetch information about our projects easily using tableau-api-lib (note that \u2018conn\u2019 in the sample code represents a connection to Tableau Server \u2014 see the full code at the end of the article for more details):", "Here\u2019s what my \u2018projects_df\u2019 looks like:", "Now let\u2019s publish the extract to my \u2018Test Alt\u2019 project.", "We can now peek inside the \u2018response\u2019 variable to verify that this publish request succeeded:", "Now that the extract is published, we can verify that it\u2019s on Tableau Server and we can connect to it with Tableau Desktop to build our visuals.", "And here\u2019s a quick visual I built in Tableau Desktop with a connection to that published extract:", "One small note about how I handled date fields earlier: since I am connecting to a published extract, I need to build a calculated field that converts each of my \u2018date\u2019 fields into a date using Tableau\u2019s DATE() function.", "This doesn\u2019t bother me at all, because I have been burned so many times by having to replace data sources that I always build placeholder calculations for my fields and try to avoid using the \u2018raw\u2019 fields as they land in Tableau. But that is a conversation for another article!", "That does it for this tutorial on taking our first two milestones (tapping into the Metadata API and internal PostgreSQL database) and storing that data into a Tableau .hyper extract.", "Stay tuned for the next milestone, where we will take a closer look at how this data can be used within Tableau dashboards to build out interactive impact analysis visuals!", "Milestone 4 (ETA is 5/13/2020): build our first impact analysis dashboard using the datasource published in this article.", "Milestone 5 (ETA is 5/20/2020): demonstrate how you can pull Metadata from ALL sites. In Milestone 1, we extracted data from the Metadata API. By default, that data is specific to the site you are authenticated into. Using the REST API, we can iterate over all available sites and extract Metadata for the entire server.", "Use this GitHub gist as a template for implementing our third milestone. Keep in mind that the code here is just one possible method of getting the job done, and adapt it as you see fit.", "The code is starting to get long (~300 lines). Do I recommend having your production code look like it does here? Nope. But having everything in one file is convenient for getting a proof of concept up and running. I\u2019ll leave it up to you on how you integrate this into your own workflows.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Data scientist and author. Sometimes seen falling down mountains with a snowboard strapped to my feet."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F54b203fdd183&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftableau-server-impact-analysis-reports-metadata-publishing-and-using-apis-54b203fdd183&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftableau-server-impact-analysis-reports-metadata-publishing-and-using-apis-54b203fdd183&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftableau-server-impact-analysis-reports-metadata-publishing-and-using-apis-54b203fdd183&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftableau-server-impact-analysis-reports-metadata-publishing-and-using-apis-54b203fdd183&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----54b203fdd183--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----54b203fdd183--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@elliottstam?source=post_page-----54b203fdd183--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@elliottstam?source=post_page-----54b203fdd183--------------------------------", "anchor_text": "Elliott Stam"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fd193f11526c9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftableau-server-impact-analysis-reports-metadata-publishing-and-using-apis-54b203fdd183&user=Elliott+Stam&userId=d193f11526c9&source=post_page-d193f11526c9----54b203fdd183---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F54b203fdd183&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftableau-server-impact-analysis-reports-metadata-publishing-and-using-apis-54b203fdd183&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F54b203fdd183&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftableau-server-impact-analysis-reports-metadata-publishing-and-using-apis-54b203fdd183&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@rohanmakhecha?utm_source=medium&utm_medium=referral", "anchor_text": "Rohan Makhecha"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://towardsdatascience.com/building-tableau-server-impact-analysis-reports-why-and-how-191be0ce5015", "anchor_text": "Building Tableau Server impact analysis reports: why and how"}, {"url": "https://towardsdatascience.com/tableau-server-impact-analysis-reports-accessing-metadata-9e08e5fb5633", "anchor_text": "Tableau Server impact analysis reports: accessing metadata"}, {"url": "https://towardsdatascience.com/tableau-server-impact-analysis-reports-combine-metadata-with-postgresql-47447b830513", "anchor_text": "Tableau Server impact analysis reports: combine metadata with PostgreSQL"}, {"url": "https://help.tableau.com/current/api/hyper_api/en-us/index.html", "anchor_text": "Hyper API"}, {"url": "https://help.tableau.com/current/api/rest_api/en-us/REST/rest_api.htm", "anchor_text": "REST API"}, {"url": "https://twitter.com/hashtag/datadev?lang=en", "anchor_text": "#DataDev"}, {"url": "https://gist.github.com/divinorum-webb/450b8b81c7544629fa71ff682b1522e0", "anchor_text": "GitHub gist"}, {"url": "https://github.com/divinorum-webb/tableau-api-lib", "anchor_text": "tableau-api-lib"}, {"url": "https://help.tableau.com/current/api/rest_api/en-us/REST/rest_api_ref.htm", "anchor_text": "Tableau\u2019s REST API reference"}, {"url": "https://github.com/tableau/server-client-python", "anchor_text": "Tableau Server Client"}, {"url": "https://help.tableau.com/current/api/rest_api/en-us/REST/rest_api_ref.htm#publish_data_source", "anchor_text": "desired endpoint"}, {"url": "https://gist.github.com/divinorum-webb/a300f41bca41677113e4a49012365e95", "anchor_text": "this GitHub gist"}, {"url": "https://medium.com/tag/data-science?source=post_page-----54b203fdd183---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/programming?source=post_page-----54b203fdd183---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/tag/python?source=post_page-----54b203fdd183---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/tableau?source=post_page-----54b203fdd183---------------tableau-----------------", "anchor_text": "Tableau"}, {"url": "https://medium.com/tag/automation?source=post_page-----54b203fdd183---------------automation-----------------", "anchor_text": "Automation"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F54b203fdd183&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftableau-server-impact-analysis-reports-metadata-publishing-and-using-apis-54b203fdd183&user=Elliott+Stam&userId=d193f11526c9&source=-----54b203fdd183---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F54b203fdd183&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftableau-server-impact-analysis-reports-metadata-publishing-and-using-apis-54b203fdd183&user=Elliott+Stam&userId=d193f11526c9&source=-----54b203fdd183---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F54b203fdd183&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftableau-server-impact-analysis-reports-metadata-publishing-and-using-apis-54b203fdd183&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----54b203fdd183--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F54b203fdd183&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftableau-server-impact-analysis-reports-metadata-publishing-and-using-apis-54b203fdd183&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----54b203fdd183---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----54b203fdd183--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----54b203fdd183--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----54b203fdd183--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----54b203fdd183--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----54b203fdd183--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----54b203fdd183--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----54b203fdd183--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----54b203fdd183--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@elliottstam?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@elliottstam?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Elliott Stam"}, {"url": "https://medium.com/@elliottstam/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "509 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fd193f11526c9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftableau-server-impact-analysis-reports-metadata-publishing-and-using-apis-54b203fdd183&user=Elliott+Stam&userId=d193f11526c9&source=post_page-d193f11526c9--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F2f1f73d79eed&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftableau-server-impact-analysis-reports-metadata-publishing-and-using-apis-54b203fdd183&newsletterV3=d193f11526c9&newsletterV3Id=2f1f73d79eed&user=Elliott+Stam&userId=d193f11526c9&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}