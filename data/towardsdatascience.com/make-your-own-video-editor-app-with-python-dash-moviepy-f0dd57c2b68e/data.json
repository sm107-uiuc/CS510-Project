{"url": "https://towardsdatascience.com/make-your-own-video-editor-app-with-python-dash-moviepy-f0dd57c2b68e", "time": 1683013779.210227, "path": "towardsdatascience.com/make-your-own-video-editor-app-with-python-dash-moviepy-f0dd57c2b68e/", "webpage": {"metadata": {"title": "Make Your Own Video Editor App with Python, Dash, & Moviepy! | by Steve Kiefer | Towards Data Science", "h1": "Make Your Own Video Editor App with Python, Dash, & Moviepy!", "description": "Plotly\u2019s Dash framework is a great Python library for quickly and easily making interactive web apps without coding HTML or JavaScript! Moviepy is an excellent library for programmatically editing\u2026"}, "outgoing_paragraph_urls": [{"url": "https://plotly.com/dash/", "anchor_text": "Dash", "paragraph_index": 0}, {"url": "https://zulko.github.io/moviepy/", "anchor_text": "Moviepy", "paragraph_index": 0}, {"url": "https://github.com/np-8/dash-uploader", "anchor_text": "np-8\u2019s Dash-uploader", "paragraph_index": 0}, {"url": "https://github.com/thedirtyfew/dash-extensions/", "anchor_text": "thedirtyfew\u2019s", "paragraph_index": 0}, {"url": "https://github.com/thedirtyfew/dash-extensions/", "anchor_text": "ServerSideOutput", "paragraph_index": 0}, {"url": "https://github.com/shkiefer/dash_large_files", "anchor_text": "this GitHub repository", "paragraph_index": 0}, {"url": "https://github.com/thedirtyfew/dash-extensions/", "anchor_text": "Dash-Extensions", "paragraph_index": 6}, {"url": "https://dash-bootstrap-components.opensource.faculty.ai/", "anchor_text": "Dash-bootstrap-components", "paragraph_index": 9}], "all_paragraphs": ["Plotly\u2019s Dash framework is a great Python library for quickly and easily making interactive web apps without coding HTML or JavaScript! Moviepy is an excellent library for programmatically editing video files. However, out-of-the-box Dash is subject to browser storage limits which makes working with storage-hungry video files difficult. This article will cover how we can use np-8\u2019s Dash-uploader library to get around the ~100MB\u2013200MB browser storage limits which opens Dash apps up to very large user input files (video or data). We will also touch on thedirtyfew\u2019s ServerSideOutput (part of dash-extensions) which allows for easy storing of data on the server. You can check out this GitHub repository which contains 3 Dash app files that I will go through below.", "Ok, let's start with some data! I made a script (st_make_data.py) that creates a file with a json-like format, simulating sensor data that came over serial from a microcontroller. The data is just a sine and cosine curve. I used this to make a few files with increasing numbers of rows (10k, 100k, 1m, & 5m rows) which corresponded to ~0.8MB, 8MB, 82MB, & 409MB file sizes.", "Here we have a simple Dash app (user_large_data_sql.py) that takes in the data, parses it and plots it (allowing the user to chose data for each axes). There are 2 options for uploading data: the standard Dash dcc.Store object and the Dash-uploader du.Upload object (which also uses its own dcc.Store object to old the filename).", "The callback for this is a little special. It checks the context to see which upload object was fired. If the standard upload object was fired it parses the base64 object and collects the lines from the file as you would with small data. All this callback does, in the end, is enable a button for processing the data, but this is where we run into trouble with the larger files.", "The next callback does the processing (after pressing the Process Data button). It processes the base64 data from the dcc.Upload component or opens the file on the server if it came via the Dash-uploader component. We then create an sqlite engine and write the processed dataframe data to it.", "When files are uploaded via teh Dash-uploader object, even the largest file works just fine! The only issue is plotting. In the plotting callback I limit the total rows to plot to 200k so as not to overload the browser. This can be handled with resampling (for the plot) if needed but that seemed like a bit much for this example.", "In the last example I created temporary database files to store the large data on the server. The ServerSideOutput enrichment from the Dash-Extensions library makes storing data on the server much simpler. Instead of reading and writing files (and having to hang on to filenames) we just send the object back in the callback. In this case, its the processed Dataframe. The key things to note are the special ServersideOutput() at the top of the decorator and that we are just passing the df in the return statement. The user_large_data_cache.py file uses the server-side caching.", "Now coding up a full-blown video editor in a web app is not practical. But automating some simple tasks for users that may not be media-editing-savvy can be helpful. Add a company logo or some text to videos. Or make a time-lapse. Maybe convert format and shrink down for adding to presentations. There could be lots of relatively simple canned editing schemes that a team could use.", "With large file upload capability, we can now get video files from users onto the server for processing. Moviepy has tons of capability. The example app that we will walk through is barely going to scratch what it can do.", "I\u2019m using Dash-bootstrap-components to help with the layout and styling. The du.Upload is the dash-uploader component for large file uploads. Then I add a few dbc.FormGroups to house the user inputs. The global variable APP_ID keeps component names unique when combining multiple Dash apps. Its not needed here, just habit. I\u2019m taking advantage of the Moviepy TextClip.list(\u2018font\u2019) method to get system available fonts and populating the dropdown on initial load. At the end, I have 2 Div elements for sending the image preview (first frame of the final movie) and a video preview.", "As far as callbacks go the first is the dash-uploader callback that links the local filename into the dcc.Store component. Another callback inspects the duration of the uploaded video and populates the Subclip End (s) and Video Width (px) user inputs. These can be over-ridden by the user but its nice to know the limits.", "The main two callbacks are for creating the preview frame and preview (and final) video. For the preview image, I basically apply all of the video edits but instead of attaching the mask to the clip, I apply it using numpy functions before sending the array to PIL. PIL is used to write the image data to a buffer then encode to base64 string so the image data is embedded directly without having to deal with a file on disk.", "The video preview callback also creates the full size movie and returns the link info and enables the download button. This should probably be separated since you have to wait until both the preview and final videos are created before you can preview it. Homework!", "Now I setup my Dash files a little differently. I enclose all of the callbacks in a add_dash() function which takes the Dash app object and attaches the callbacks when called. This helps when integrating multiple Dash apps together. See this article for more on that:", "With this setup, I do all of the configuration inside of the if __name == \u2018__main__\u2019 statement.", "Well, that\u2019s it. I hope you found this useful and it helps you solve your large-user-file woes. Thanks for reading!", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Aerospace structural analyst and python enthusiast"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Ff0dd57c2b68e&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmake-your-own-video-editor-app-with-python-dash-moviepy-f0dd57c2b68e&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmake-your-own-video-editor-app-with-python-dash-moviepy-f0dd57c2b68e&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmake-your-own-video-editor-app-with-python-dash-moviepy-f0dd57c2b68e&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmake-your-own-video-editor-app-with-python-dash-moviepy-f0dd57c2b68e&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----f0dd57c2b68e--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----f0dd57c2b68e--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://steve-kiefer.medium.com/?source=post_page-----f0dd57c2b68e--------------------------------", "anchor_text": ""}, {"url": "https://steve-kiefer.medium.com/?source=post_page-----f0dd57c2b68e--------------------------------", "anchor_text": "Steve Kiefer"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F852d4ffe8c1d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmake-your-own-video-editor-app-with-python-dash-moviepy-f0dd57c2b68e&user=Steve+Kiefer&userId=852d4ffe8c1d&source=post_page-852d4ffe8c1d----f0dd57c2b68e---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ff0dd57c2b68e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmake-your-own-video-editor-app-with-python-dash-moviepy-f0dd57c2b68e&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ff0dd57c2b68e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmake-your-own-video-editor-app-with-python-dash-moviepy-f0dd57c2b68e&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://pixabay.com/users/NASA-Imagery-10/?utm_source=link-attribution&utm_medium=referral&utm_campaign=image&utm_content=205", "anchor_text": "NASA-Imagery"}, {"url": "https://pixabay.com/?utm_source=link-attribution&utm_medium=referral&utm_campaign=image&utm_content=205", "anchor_text": "Pixabay"}, {"url": "https://plotly.com/dash/", "anchor_text": "Dash"}, {"url": "https://zulko.github.io/moviepy/", "anchor_text": "Moviepy"}, {"url": "https://github.com/np-8/dash-uploader", "anchor_text": "np-8\u2019s Dash-uploader"}, {"url": "https://github.com/thedirtyfew/dash-extensions/", "anchor_text": "thedirtyfew\u2019s"}, {"url": "https://github.com/thedirtyfew/dash-extensions/", "anchor_text": "ServerSideOutput"}, {"url": "https://github.com/shkiefer/dash_large_files", "anchor_text": "this GitHub repository"}, {"url": "https://github.com/thedirtyfew/dash-extensions/", "anchor_text": "Dash-Extensions"}, {"url": "https://dash-bootstrap-components.opensource.faculty.ai/", "anchor_text": "Dash-bootstrap-components"}, {"url": "https://towardsdatascience.com/embed-multiple-dash-apps-in-flask-with-microsoft-authenticatio-44b734f74532", "anchor_text": "Embed Multiple Dash Apps in Flask with Microsoft AuthenticatioPhew! A journey (by examples) to get all the parts to come together to build a scalable template for multiple Dash apps\u2026towardsdatascience.com"}, {"url": "https://medium.com/tag/python?source=post_page-----f0dd57c2b68e---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/dash?source=post_page-----f0dd57c2b68e---------------dash-----------------", "anchor_text": "Dash"}, {"url": "https://medium.com/tag/plotly?source=post_page-----f0dd57c2b68e---------------plotly-----------------", "anchor_text": "Plotly"}, {"url": "https://medium.com/tag/video-editing?source=post_page-----f0dd57c2b68e---------------video_editing-----------------", "anchor_text": "Video Editing"}, {"url": "https://medium.com/tag/web-app-development?source=post_page-----f0dd57c2b68e---------------web_app_development-----------------", "anchor_text": "Web App Development"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Ff0dd57c2b68e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmake-your-own-video-editor-app-with-python-dash-moviepy-f0dd57c2b68e&user=Steve+Kiefer&userId=852d4ffe8c1d&source=-----f0dd57c2b68e---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Ff0dd57c2b68e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmake-your-own-video-editor-app-with-python-dash-moviepy-f0dd57c2b68e&user=Steve+Kiefer&userId=852d4ffe8c1d&source=-----f0dd57c2b68e---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ff0dd57c2b68e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmake-your-own-video-editor-app-with-python-dash-moviepy-f0dd57c2b68e&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----f0dd57c2b68e--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Ff0dd57c2b68e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmake-your-own-video-editor-app-with-python-dash-moviepy-f0dd57c2b68e&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----f0dd57c2b68e---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----f0dd57c2b68e--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----f0dd57c2b68e--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----f0dd57c2b68e--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----f0dd57c2b68e--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----f0dd57c2b68e--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----f0dd57c2b68e--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----f0dd57c2b68e--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----f0dd57c2b68e--------------------------------", "anchor_text": ""}, {"url": "https://steve-kiefer.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://steve-kiefer.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Steve Kiefer"}, {"url": "https://steve-kiefer.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "104 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F852d4ffe8c1d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmake-your-own-video-editor-app-with-python-dash-moviepy-f0dd57c2b68e&user=Steve+Kiefer&userId=852d4ffe8c1d&source=post_page-852d4ffe8c1d--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fa1bfb596e058&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmake-your-own-video-editor-app-with-python-dash-moviepy-f0dd57c2b68e&newsletterV3=852d4ffe8c1d&newsletterV3Id=a1bfb596e058&user=Steve+Kiefer&userId=852d4ffe8c1d&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}