{"url": "https://towardsdatascience.com/building-production-level-weather-visualizer-app-in-a-day-e360a68116c7", "time": 1683016926.6297338, "path": "towardsdatascience.com/building-production-level-weather-visualizer-app-in-a-day-e360a68116c7/", "webpage": {"metadata": {"title": "Production-level App With Streamlit and Climacell API in a day | Towards Data Science", "h1": "Building Production-level Weather Visualizer App in A Day", "description": "Build a production level Weather Visualizer using Climacell API and Streamlit. Input coordinates of your location and get weather patterns in an instant with laser-focused precision."}, "outgoing_paragraph_urls": [{"url": "https://www.climacell.co/weather-api/", "anchor_text": "Weather API", "paragraph_index": 0}, {"url": "https://share.streamlit.io/bextuychiev/climacell_weather_visualizer/app.py", "anchor_text": "link", "paragraph_index": 3}, {"url": "https://www.climacell.co/weather-api/", "anchor_text": "Weather API", "paragraph_index": 7}, {"url": "https://developer.climacell.co/v3/reference", "anchor_text": "Weather API", "paragraph_index": 9}, {"url": "https://developer.climacell.co/sign-up", "anchor_text": "link", "paragraph_index": 9}, {"url": "https://www.streamlit.io/gallery", "anchor_text": "this", "paragraph_index": 13}, {"url": "https://developer.climacell.co/sign-up", "anchor_text": "sign up", "paragraph_index": 21}, {"url": "https://docs.mapbox.com/help/how-mapbox-works/access-tokens/", "anchor_text": "here", "paragraph_index": 23}, {"url": "https://developer.climacell.co/v3/reference", "anchor_text": "Weather API", "paragraph_index": 27}, {"url": "https://www.climacell.co/weather-api/", "anchor_text": "Weather API", "paragraph_index": 31}, {"url": "https://docs.streamlit.io/en/stable/", "anchor_text": "documentation", "paragraph_index": 35}, {"url": "https://towardsdatascience.com/fuzzywuzzy-fuzzy-string-matching-in-python-beginners-guide-9adc0edf4b35?source=your_stories_page-------------------------------------", "anchor_text": "article", "paragraph_index": 38}, {"url": "https://www.linkedin.com/in/bextuychiev/", "anchor_text": "https://www.linkedin.com/in/bextuychiev/", "paragraph_index": 45}], "all_paragraphs": ["About 3 days ago, I got introduced to a Weather API by Climacell. Unlike many other APIs I have faced, it was dead simple, had a generous free plan and there was absolutely no need for external packages/wrappers required (or building one in some cases). Install requests, get an API key and you were done.", "Being a data scientist (or trying to be one), I immediately started exploring the ideas for building something useful using the data of the API. I also wanted it to be something rare and stand out from the crowd.", "Turns out, this was a perfect learning opportunity for me. I have been putting off checking out Streamlit, which is all the hype now, and decided to use it for this project. I went over the documentation and before even trying out an example, I already fell in love with it. I spent around 3\u20134 hours experimenting with the library and reading the documentation cover-to-cover. And in a day, I was displaying the realtime temperatures of my hometown on a plotly ScatterMapbox on my Streamlit web-app. (More on that later). How crazy is that?", "Check out the app on this link. It is deployed on Streamlit Sharing!", "API stands for Application Programming Interface", "Imagine a database. Normally, you would use SQL to fetch data from a remote or a database server. But with APIs, you mostly send HTTP GET requests. Just like databases have tables, APIs have endpoints. Each database table has a name, each API endpoint has a special URL. As simple as that.", "Getting data from API is named making an API call. With some APIs, you would have to use special packages called wrappers to make requests to the API. Sometimes, you just have to know the endpoint URL and you can get the information with requests or urllib modules.", "Just like I did on the web-app, let me show you an example of how you can get the current temperature for New York City using Weather API of Climacell:", "Explanation of the code coming in the last section\u2026", "For this project, I used the Weather API of Climacell. As I stated before, as soon as you sign up using this link for the free plan, you will get access to your private dashboard where you can see your API key.", "As you can see, the free plan (no credit card required) is perfect for everyday use. The rates are only limited hourly and daily.", "Before we move on to the code, make sure you get your API key to follow along.", "Even though developed in 2013, 2019 has seen a massive surge in the usage of the framework. I think the framework\u2019s main attraction is its dead simplicity and blazing fast development cycle. It has been such a blessing for people in the data sphere who hate static notebooks but are too lazy to use web-development to deploy their models into a web-app.", "You can see some of the apps developed using Streamlit on this link.", "To create apps using Streamlit, you should install it via pip:", "Then, you can import it using a standard alias and build on:", "For example, here is a sample code to create this exact section on Streamlit, though it can do so much more, as you will see later:", "To run the above code in a browser, navigate to the directory of the script and run this command on shell:", "By recreating this project, you can improve on these skills:", "First things first, if you want to run the app on your own machine, you can do so by cloning the repo in your desired directory:", "Next, to install the dependencies, run:", "After that, if you have not already, you should sign up for Climacell and get an API key. To hide your API keys when pushing the code to GitHub, you can store them as environment variables. Environment variables are best for passwords, API keys. You can set them like this:", "After saving an environment variable, you can access its value anywhere in the script by using os module:", "Next, to display the maps, you will need a free access token from Mapbox. Instructions here. After that, you guessed it, you should store it in the environment variables:", "Finally, you can run the app by calling:", "When the app launches as a separate tab in your browser, you land on the page where you can choose the app mode. The default is the \u2018Instructions and code explanation\u2019 section which will contain the instructions here. If you are reading this, you can directly choose Run the app where you will be directed to this page:", "To get real-time weather patterns, you should choose the method of inputting location.", "The default is using a single (latitude, longitude) location and it is the best since it only makes one API call. For the input fields, you can input any unit and coordinate location, and Weather API fetches the results which are visualized using Plotly\u2019s scatter_mapbox:", "To see the temperature, you can hover over the point on the app and zoom in, out, drag around to explore the map itself, courtesy of Plotly.", "The next two options of location input are a little different. Custom country-input takes any string for the country (typos, partial names are allowed) and does a fuzzy string matching under the hood.", "If there is a match from data/worldcities.csv, pandas will subset the dataframe for that country taking only top <25 countries based on population size. Using each cities location, the app makes an API call and visualizes the results (it will take a while):", "The last option is just a plain old dropdown of available countries, nothing fancy. It will visualize the results in the same way as above. I think I don\u2019t have to tell you that in the last 2 methods, to visualize one country, the app makes 25 API calls. It means after 4 inputs, you have to wait an hour before you can try the app again because of the hourly limit of the Weather API free plan.", "The script is over 300 lines and growing. Though I cannot explain line by line, I will elaborate on critical points of the app. The best way to understand the source code is getting your hands dirty by experimenting around.", "Even though apps are single scripts, Streamlit encourages good software development practices.", "For this reason, a wrapper function, main() was created to be called under the __main__. For each app mode, separate functions were created and each function containing individual helper functions to do specific tasks.", "The functions which are of most interest are under the Run app section. I will only focus on 'backend' functions which perform string matching, making API calls, and plotting the results. You can learn how I implemented the logic with Streamlit by reading its documentation like I did or reading up some tutorials (I will probably be making some too).", "Firstly, fuzzy string matching was performed using fuzzywuzzy package:", "After the user inputs the country string, it will be inserted into the above function first. Using the unique countries list, fuzzywuzzy extracts the best matching country to the input string. If the similarity score is over 80, it is considered a match and that country will be returned. Otherwise, an error message will be raised by Streamlit code to tell the user to try again:", "I wrote an entire article on fuzzy string matching. You can read that one too, to master this awesome skill:", "The above function is a bit large, I even removed some parts for this article. After we get the country, a separate function will query the top 25 cities (maybe less, depends on the data) of the country based on population size and inserts it into the above function. Then, the function will use its lat and lon columns to make an API call. The API calls are made using an apply function which is much faster than for loops and more modular.", "After the temperatures are fetched, they will be stored back into the data frame as a separate column to be plotted later:", "Finally, we plot the data frame and the results with map_plot. It plots each (lat, lon) pair as a separate point on scatterp_mapbox. The dots will be colored with a sequential palette using the temperatures. Hovering over the points will display the temperature for that coordinate location.", "The dropdown method is performed in a similar manner. For the single coordinate method, instead of inputting a data frame of 25 rows, only one row will be inserted though I created separate functions for each task.", "Disclaimer: All views expressed in this article are my own and do not represent the opinions of any entity whatsoever with which I have been, am now, or will be affiliated.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "BEXGBoost | DataCamp Instructor |\ud83e\udd47Top 10 AI/ML Writer on Medium | Kaggle Master | https://www.linkedin.com/in/bextuychiev/"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fe360a68116c7&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuilding-production-level-weather-visualizer-app-in-a-day-e360a68116c7&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuilding-production-level-weather-visualizer-app-in-a-day-e360a68116c7&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuilding-production-level-weather-visualizer-app-in-a-day-e360a68116c7&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuilding-production-level-weather-visualizer-app-in-a-day-e360a68116c7&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----e360a68116c7--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----e360a68116c7--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://ibexorigin.medium.com/?source=post_page-----e360a68116c7--------------------------------", "anchor_text": ""}, {"url": "https://ibexorigin.medium.com/?source=post_page-----e360a68116c7--------------------------------", "anchor_text": "Bex T."}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F39db050c2ac2&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuilding-production-level-weather-visualizer-app-in-a-day-e360a68116c7&user=Bex+T.&userId=39db050c2ac2&source=post_page-39db050c2ac2----e360a68116c7---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fe360a68116c7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuilding-production-level-weather-visualizer-app-in-a-day-e360a68116c7&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fe360a68116c7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuilding-production-level-weather-visualizer-app-in-a-day-e360a68116c7&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://www.pexels.com/@pixabay?utm_content=attributionCopyText&utm_medium=referral&utm_source=pexels", "anchor_text": "Pixabay"}, {"url": "https://www.pexels.com/photo/close-up-of-gear-shift-over-black-background-248539/?utm_content=attributionCopyText&utm_medium=referral&utm_source=pexels", "anchor_text": "Pexels"}, {"url": "https://www.climacell.co/weather-api/", "anchor_text": "Weather API"}, {"url": "https://share.streamlit.io/bextuychiev/climacell_weather_visualizer/app.py", "anchor_text": "link"}, {"url": "https://www.climacell.co/weather-api/", "anchor_text": "Weather API"}, {"url": "https://medium.com/@ibexorigin", "anchor_text": "author"}, {"url": "https://developer.climacell.co/v3/reference", "anchor_text": "Weather API"}, {"url": "https://developer.climacell.co/sign-up", "anchor_text": "link"}, {"url": "https://medium.com/@ibexorigin", "anchor_text": "author"}, {"url": "https://medium.com/@ibexorigin", "anchor_text": "author"}, {"url": "https://medium.com/@ibexorigin", "anchor_text": "author"}, {"url": "https://medium.com/@ibexorigin", "anchor_text": "author"}, {"url": "https://www.streamlit.io/gallery", "anchor_text": "this"}, {"url": "https://medium.com/@ibexorigin", "anchor_text": "author"}, {"url": "https://developer.climacell.co/sign-up", "anchor_text": "sign up"}, {"url": "https://docs.mapbox.com/help/how-mapbox-works/access-tokens/", "anchor_text": "here"}, {"url": "https://medium.com/@ibexorigin", "anchor_text": "author"}, {"url": "https://developer.climacell.co/v3/reference", "anchor_text": "Weather API"}, {"url": "https://medium.com/@ibexorigin", "anchor_text": "author"}, {"url": "https://medium.com/@ibexorigin", "anchor_text": "author"}, {"url": "https://www.climacell.co/weather-api/", "anchor_text": "Weather API"}, {"url": "https://docs.streamlit.io/en/stable/", "anchor_text": "documentation"}, {"url": "https://towardsdatascience.com/fuzzywuzzy-fuzzy-string-matching-in-python-beginners-guide-9adc0edf4b35?source=your_stories_page-------------------------------------", "anchor_text": "article"}, {"url": "https://towardsdatascience.com/fuzzywuzzy-fuzzy-string-matching-in-python-beginners-guide-9adc0edf4b35", "anchor_text": "FuzzyWuzzy: Fuzzy String Matching in Python, Beginner\u2019s Guide\u2026 and hands-on practice on a real-world datasettowardsdatascience.com"}, {"url": "https://medium.com/tag/artificial-intelligence?source=post_page-----e360a68116c7---------------artificial_intelligence-----------------", "anchor_text": "Artificial Intelligence"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----e360a68116c7---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/tag/data-science?source=post_page-----e360a68116c7---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/programming?source=post_page-----e360a68116c7---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/tag/software-development?source=post_page-----e360a68116c7---------------software_development-----------------", "anchor_text": "Software Development"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fe360a68116c7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuilding-production-level-weather-visualizer-app-in-a-day-e360a68116c7&user=Bex+T.&userId=39db050c2ac2&source=-----e360a68116c7---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fe360a68116c7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuilding-production-level-weather-visualizer-app-in-a-day-e360a68116c7&user=Bex+T.&userId=39db050c2ac2&source=-----e360a68116c7---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fe360a68116c7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuilding-production-level-weather-visualizer-app-in-a-day-e360a68116c7&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----e360a68116c7--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fe360a68116c7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuilding-production-level-weather-visualizer-app-in-a-day-e360a68116c7&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----e360a68116c7---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----e360a68116c7--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----e360a68116c7--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----e360a68116c7--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----e360a68116c7--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----e360a68116c7--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----e360a68116c7--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----e360a68116c7--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----e360a68116c7--------------------------------", "anchor_text": ""}, {"url": "https://ibexorigin.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://ibexorigin.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Bex T."}, {"url": "https://ibexorigin.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "16.4K Followers"}, {"url": "https://www.linkedin.com/in/bextuychiev/", "anchor_text": "https://www.linkedin.com/in/bextuychiev/"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F39db050c2ac2&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuilding-production-level-weather-visualizer-app-in-a-day-e360a68116c7&user=Bex+T.&userId=39db050c2ac2&source=post_page-39db050c2ac2--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F22cea38b90f3&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuilding-production-level-weather-visualizer-app-in-a-day-e360a68116c7&newsletterV3=39db050c2ac2&newsletterV3Id=22cea38b90f3&user=Bex+T.&userId=39db050c2ac2&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}