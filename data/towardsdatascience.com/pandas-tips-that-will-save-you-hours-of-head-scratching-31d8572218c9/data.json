{"url": "https://towardsdatascience.com/pandas-tips-that-will-save-you-hours-of-head-scratching-31d8572218c9", "time": 1683002840.769214, "path": "towardsdatascience.com/pandas-tips-that-will-save-you-hours-of-head-scratching-31d8572218c9/", "webpage": {"metadata": {"title": "Pandas tips that will save you hours of head-scratching | by Roman Orac | Towards Data Science", "h1": "Pandas tips that will save you hours of head-scratching", "description": "When revisiting a problem you\u2019ve worked on in the past and finding out that the code doesn\u2019t work is frustrating. Making your Data Analysis experiments reproducible saves time for you and others in\u2026"}, "outgoing_paragraph_urls": [{"url": "https://romanorac.github.io/assets/notebooks/2020-01-13-reproducibility-in-pandas.ipynb", "anchor_text": "Jupyter notebook", "paragraph_index": 1}, {"url": "https://jupyterlab-code-formatter.readthedocs.io/en/latest/installation.html#installation-step-1-installing-the-plugin-itself", "anchor_text": "installation guide", "paragraph_index": 18}, {"url": "https://twitter.com/romanorac", "anchor_text": "Twitter", "paragraph_index": 30}, {"url": "https://twitter.com/romanorac/status/1328952374447267843", "anchor_text": "tweet", "paragraph_index": 30}], "all_paragraphs": ["When revisiting a problem you\u2019ve worked on in the past and finding out that the code doesn\u2019t work is frustrating. Making your Data Analysis experiments reproducible saves time for you and others in the long term. These tips will help you to write reproducible pandas code, which is important when you are working in a team, on personal projects that you plan to revisit in the future or share with others.", "To run the examples download this Jupyter notebook.", "Here are a few links that might interest you:", "Some of the links above are affiliate links and if you go through them to make a purchase I\u2019ll earn a commission. Keep in mind that I link courses because of their quality and not because of the commission I receive from your purchases.", "To Step Up Your Pandas Game, read:", "To make your pandas experiment reproducible, start with outputting the system information and versions of python packages. You (or your colleague) can thank me later. Some functions may be deprecated, broken or are unavailable in older versions of a certain package. Note, Python packages are intentionally printed out with == so that you can use the output directly with pip to install them.", "I use the following template to output system information and versions of packages.", "Once I had this great idea that instead of writing each time import pandas as pd, import numpy as np, etc. Jupyter Notebook could automatically import them.", "Sounds great? Well, it didn\u2019t end well. After a while, I forgot about my custom configuration and soon later I got questions like \u201cDid you even run the code because it fails on the first line!\u201d, \u201cHow does this code work on your machine?\u201d.", "When using randomly generated data, setting the seed is a must. In case you are using a Machine Learning model, you should also set the random seed (if available) so that the model returns deterministic output.", "Let\u2019s look at the example. We set the random seed and output a random sample with 10 pseudorandom numbers. As expected the second run has different pseudorandom numbers than the first one. Note, pandas uses numpy under the hood so we need to set the seed with numpy.", "What happens when we set the same seed again? We reset the seed and we get the same sequence of numbers as above. This makes deterministic pseudorandom number generator.", "A code block with 10 lines of pandas code can be most probably rewritten in 5 lines by a pandas expert, but code understandability suffers. We tend to do the same as we get better and better with the tool. We may know what the code does today, but will we remember in a month? Will Junior Analysist know what is this mumbo jumbo?", "Probably not! When the code gets complex, you should write a comment or two. Not just when doing data analysis with pandas, but when coding in general.", "Write safety checks instead of comments, like \u201cThis part of the code doesn\u2019t support Null values or duplicates\u201d. It will take the same amount of time, but the user will notice safety checks for sure as they will break execution in the case of a problem.", "Let\u2019s look at the example below.", "The Dataframe has duplicated index value 4. We can use duplicated function to detect duplicated index and then break execution with assert statement.", "Jupyter Notebooks are notorious for unformatted, ugly code. The main reason for this is that early versions didn\u2019t have code formaters. After they did, it wasn\u2019t trivial to install them. But this is not the case anymore.", "I use jupyterlab-code-formatter with JupyterLab and it works well. Here is the installation guide. Let me know in the comments if you need any help installing it.", "Properly formatted code will increase the chance you won\u2019t throw it away and start over.", "I find it a good practice to output the shape of a DataFrame after each transformation. This helps to spot bugs when there is an incorrect number of rows or columns after reading, merging, etc. This way we can find mistakes by only reviewing the outputs of the shape function without rerunning the notebook.", "Let\u2019s inner join the example DataFrame with itself. It has only 5 rows so we expect that the new DataFrame will also have 5 rows.", "The new DataFrame has 7 rows instead of 5.", "We see that the problem occurs because of a duplicated index. We spot a bug right away by using the shape function.", "There are cases when we have the input data, we know how the output should look, but we don\u2019t know how to write steps in-between (we\u2019ve all been there). The next step is usually to ask a question on Stack Overflow or Reddit or ask a colleague for help.", "We can make collaborative problem solving much easier by writing reproducible questions:", "A good practice is to make DataFrame output copy-paste friendly. Never heard of it? Let me explain with an example.", "Pandas has a read_clipboard method which does as the name suggests. We can copy the output from above and run the command below and it will replicate the DataFrame. Try it for yourself. We can also change the separator to tabs \\t or any other separator if necessary.", "This copy-paste procedure doesn\u2019t work with MultiIndex. So try to avoid them when asking questions.", "These were few tips to make your pandas experiments reproducible. Did you enjoy the post? Let me know in the comments below.", "Follow me on Twitter, where I regularly tweet about Data Science and Machine Learning.", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F31d8572218c9&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpandas-tips-that-will-save-you-hours-of-head-scratching-31d8572218c9&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpandas-tips-that-will-save-you-hours-of-head-scratching-31d8572218c9&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpandas-tips-that-will-save-you-hours-of-head-scratching-31d8572218c9&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpandas-tips-that-will-save-you-hours-of-head-scratching-31d8572218c9&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----31d8572218c9--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----31d8572218c9--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://romanorac.medium.com/?source=post_page-----31d8572218c9--------------------------------", "anchor_text": ""}, {"url": "https://romanorac.medium.com/?source=post_page-----31d8572218c9--------------------------------", "anchor_text": "Roman Orac"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F68bf0657a0cd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpandas-tips-that-will-save-you-hours-of-head-scratching-31d8572218c9&user=Roman+Orac&userId=68bf0657a0cd&source=post_page-68bf0657a0cd----31d8572218c9---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F31d8572218c9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpandas-tips-that-will-save-you-hours-of-head-scratching-31d8572218c9&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F31d8572218c9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpandas-tips-that-will-save-you-hours-of-head-scratching-31d8572218c9&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://romanorac.github.io/assets/notebooks/2020-01-13-reproducibility-in-pandas.ipynb", "anchor_text": "Jupyter notebook"}, {"url": "https://www.humanfirst.ai/", "anchor_text": "Labeling and Data Engineering for Conversational AI and Analytics"}, {"url": "https://imp.i115008.net/c/2402645/880006/11298", "anchor_text": "Data Science for Business Leaders"}, {"url": "https://imp.i115008.net/c/2402645/788201/11298", "anchor_text": "Intro to Machine Learning with PyTorch"}, {"url": "https://imp.i115008.net/c/2402645/803127/11298", "anchor_text": "Become a Growth Product Manager"}, {"url": "https://amzn.to/3ncTG7D", "anchor_text": "Deep Learning (Adaptive Computation and ML series)"}, {"url": "https://aigents.co/skills", "anchor_text": "Free skill tests for Data Scientists & Machine Learning Engineers"}, {"url": "https://towardsdatascience.com/pandas-analytics-server-d9abceec888b", "anchor_text": "Pandas analytics serverAn open-source project that simplifies connecting pandas to a realtime data feed, testing hypothesis and visualizing\u2026towardsdatascience.com"}, {"url": "https://jupyterlab-code-formatter.readthedocs.io/en/latest/installation.html#installation-step-1-installing-the-plugin-itself", "anchor_text": "installation guide"}, {"url": "https://twitter.com/romanorac", "anchor_text": "Twitter"}, {"url": "https://twitter.com/romanorac/status/1328952374447267843", "anchor_text": "tweet"}, {"url": "https://unsplash.com/@cmhedger?utm_source=medium&utm_medium=referral", "anchor_text": "Courtney Hedger"}, {"url": "https://unsplash.com/?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://medium.com/tag/data-science?source=post_page-----31d8572218c9---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/python?source=post_page-----31d8572218c9---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/programming?source=post_page-----31d8572218c9---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/tag/analytics?source=post_page-----31d8572218c9---------------analytics-----------------", "anchor_text": "Analytics"}, {"url": "https://medium.com/tag/software-engineering?source=post_page-----31d8572218c9---------------software_engineering-----------------", "anchor_text": "Software Engineering"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F31d8572218c9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpandas-tips-that-will-save-you-hours-of-head-scratching-31d8572218c9&user=Roman+Orac&userId=68bf0657a0cd&source=-----31d8572218c9---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F31d8572218c9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpandas-tips-that-will-save-you-hours-of-head-scratching-31d8572218c9&user=Roman+Orac&userId=68bf0657a0cd&source=-----31d8572218c9---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F31d8572218c9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpandas-tips-that-will-save-you-hours-of-head-scratching-31d8572218c9&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----31d8572218c9--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F31d8572218c9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpandas-tips-that-will-save-you-hours-of-head-scratching-31d8572218c9&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----31d8572218c9---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----31d8572218c9--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----31d8572218c9--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----31d8572218c9--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----31d8572218c9--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----31d8572218c9--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----31d8572218c9--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----31d8572218c9--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----31d8572218c9--------------------------------", "anchor_text": ""}, {"url": "https://romanorac.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://romanorac.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Roman Orac"}, {"url": "https://romanorac.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "7.7K Followers"}, {"url": "https://romanorac.medium.com/membership", "anchor_text": "https://romanorac.medium.com/membership"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F68bf0657a0cd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpandas-tips-that-will-save-you-hours-of-head-scratching-31d8572218c9&user=Roman+Orac&userId=68bf0657a0cd&source=post_page-68bf0657a0cd--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fa69c18dd3c04&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpandas-tips-that-will-save-you-hours-of-head-scratching-31d8572218c9&newsletterV3=68bf0657a0cd&newsletterV3Id=a69c18dd3c04&user=Roman+Orac&userId=68bf0657a0cd&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}