{"url": "https://towardsdatascience.com/how-to-use-angular-to-deploy-tensorflow-web-apps-5675b5a042cc", "time": 1683009196.244829, "path": "towardsdatascience.com/how-to-use-angular-to-deploy-tensorflow-web-apps-5675b5a042cc/", "webpage": {"metadata": {"title": "How to Use Angular To Deploy TensorFlow Web Apps | by James Briggs | Towards Data Science", "h1": "How to Use Angular To Deploy TensorFlow Web Apps", "description": "In the new age of machine learning and AI, Python is undoubtedly the go-to language for any budding engineer. Clean, pseudocode looking syntax \u2014 and the biggest scientific computing and machine\u2026"}, "outgoing_paragraph_urls": [{"url": "https://github.com/jamescalam/meditations_ai", "anchor_text": "GitHub repo is here", "paragraph_index": 16}, {"url": "https://towardsdatascience.com/tagged/the-meditations", "anchor_text": "these articles", "paragraph_index": 16}, {"url": "https://github.com/jamescalam/meditations_ai/tree/master/incl_models/LSTM_e256_sl100_0414", "anchor_text": "from here", "paragraph_index": 17}, {"url": "https://nodejs.org/en/download/", "anchor_text": "install Node from here", "paragraph_index": 23}, {"url": "https://www.angularjswiki.com/angular/is-node-js-required-for-angular-2-or-angular/#:~:text=Reasons%20why%20we%20need%20Node.&text=%E2%80%9CAngular%E2%80%9D%20is%20entirely%20new%20framework,them%20in%20plain%20JavaScript%20i.e.%2C%20.&text=We%20need%20to%20use%20Node,can%20deploy%20them%20in%20production.", "anchor_text": "functionalities", "paragraph_index": 23}, {"url": "http://brackets.io/", "anchor_text": "Brackets", "paragraph_index": 31}, {"url": "https://code.visualstudio.com/download", "anchor_text": "VS Code", "paragraph_index": 31}, {"url": "https://getbootstrap.com/", "anchor_text": "Bootstrap", "paragraph_index": 32}, {"url": "https://www.tensorflow.org/js/tutorials/setup#typescript", "anchor_text": "recommended by TensorFlow", "paragraph_index": 55}, {"url": "https://github.com/jamescalam/meditations_ai/blob/master/incl_models/LSTM_e256_sl100_0414/char2idx.json", "anchor_text": "this char2idx dictionary", "paragraph_index": 59}, {"url": "https://gist.github.com/jamescalam/b54dba89fc02feb7e08dc5017e6ac38d", "anchor_text": "indexOfMax", "paragraph_index": 61}, {"url": "https://w3techs.com/technologies/details/cp-javascript/", "anchor_text": "Usage statistics of JavaScript as client-side programming language on websites", "paragraph_index": 76}, {"url": "https://www.youtube.com/c/jamesbriggs", "anchor_text": "https://www.youtube.com/c/jamesbriggs", "paragraph_index": 78}], "all_paragraphs": ["In the new age of machine learning and AI, Python is undoubtedly the go-to language for any budding engineer. Clean, pseudocode looking syntax \u2014 and the biggest scientific computing and machine learning communities in the world have produced the perfect language for developers looking to make their machines a little smarter.", "However, deploying anything built with Python to the masses is not easy. The most effective route in building something that anyone can use is web development.", "Almost everyone with a computer has access to the internet and a web browser. Even those without will often have access via their phones.", "Web development with Python is possible. The two biggest frameworks being Django and Flask \u2014 both very good, but neither compare to those available to JavaScript.", "Used by 96% of all websites worldwide [1] \u2014 JavaScript dominates in client-side web browser languages. Naturally, this is the space to be for web development.", "Fortunately, frameworks like Angular and Node make building web apps a much easier experience. With very little time we can build dynamic, interactive, and fast apps.", "In this article, we will take a text generation model built-in Python and integrate it into an interactive web app using Angular. There\u2019s a lot of detail here, so for reference:", "We will keep this part short, so we can focus more on Angular next.", "The model is a natural language generator. It uses character level embedding alongside a pretty standard LSTM network.", "It was built and trained in Python, using TensorFlow 2.", "Training data consists of The Meditations by Marcus Aurelius and Moral Letters to Lucilius by Seneca \u2014 both of these are influential texts within the realm of Stoic philosophy.", "What the model produces is a particularly eloquent sort of gibberish.", "\u201cAnd remember that the term Rational was intended to signify a dispersion, or a resolution into atoms, or annihilation, it is either extinction or change.\u201d \u2014 AI Marcus Aurelius, circa 2020", "In Python, we open the console, load the model, and type something for the model to work with.", "Everything that follows is produced by the model.", "We want to reproduce this functionality but implemented within an easily distributed web app. I\u2019m certainly no designer \u2014 but we will try and make it look cool too.", "If you do want to learn more about the model, the GitHub repo is here, and I have described the build process in these articles (the first should cover enough).", "It takes time to build, so you can download the model and mappings, model.h5 and char2idx.json respectively, from here.", "First, we need to translate the model into something readable by JavaScript.", "First, pip install tensorflowjs installs the model compiler we need to translate the model from h5 to json.", "Open the command line and navigate to the project folder containing modelname.json. Once there we can type the following:", "This produces our model in JSON format, which we will later load into our web app.", "Angular is a wonderful web app framework. It is lightweight, well structured, and has a huge following.", "To set up our environment, we first install Node from here. We won't be using Node directly, but it provides several functionalities we need to develop apps in Angular.", "Once installed, we can use the Node Package Manager (NPM) to install packages \u2014 just like with pip for Python.", "The first one we need is the Angular CLI (command-line interface) \u2014 which we will use to quickly generate templates for different parts of our app. We open our own command line and type:", "Now we can use the Angular CLI to create a project. Still in the command line, first navigate to where we want the project to be. Then, for a project called nlg-project, we will type ng new nlg-project \u2014 we will then be asked about routing and stylesheets:", "Our new project directory should look similar to that shown. We can initialize a local server for this project with ng serve.", "Our server will be hosted at localhost:4200 \u2014 typing this into our browser gives us the default Angular app page.", "We will be using TensorFlow.js and jQuery in our app. These can be installed with:", "After installation, both libraries can be found within the node_modules directory. The server must also be restarted before using either library in our code to avoid this:", "This is all we need for Angular. Most editors can be used for our Angular projects, but I would recommend trying Brackets or VS Code (I prefer the latter).", "We will be styling the majority of our web app using Bootstrap. Bootstrap is a pre-formatted CSS framework. It hosts a range of useful pre-styled but flexible elements. Thanks to Bootstrap, we can create a clean and dynamic page easily.", "To install, we type npm install bootstrap --save.", "Angular uses src/styles.css to style the web app. So now we have Bootstrap installed, we simply import bootstrap.css by adding the following to styles.css:", "We don\u2019t want the default web page, so let\u2019s update it. The HTML code is contained inside src/app/app.component.html.", "Let\u2019s just place a simple header and paragraph so we can see we have changed the right file and implemented Bootstrap correctly:", "Now we have everything in place, we can begin integrating the model itself.", "Angular works by modularizing our apps into different parts. We have already seen the \u2018app\u2019 component in src/app \u2014 which behaves as the master/top-level layer, in which we place all other components.", "To create a new component, we go back to the Angular CLI. Make sure the command line is located in the project directory and generate our text-gen component with:", "Here, we use the Angular CLI ng to generate a new component called text-gen. If we take a look in the app directory, we will notice several new files:", "This is our new text-gen component. To place the component on the web app page, we must add the component identifier to app.component.html \u2014 the name of the component selector is contained in text-gen.component.ts below:", "So, to include this component in our app, we simply add <app-text-gen><app-text-gen/> to our code in app.component.html. Move everything previously contained in app.component.html to text-gen.component.html.", "Back in src/app/text-gen we can start putting together our model.", "First, in text-gen.component.ts, let\u2019s write the code to load the model:", "For me, the most confusing part here is async and await \u2014 the rest differs little from Python.", "In Python, we run one line of code at a time \u2014 waiting for the current line to finish processing before moving to the next.", "JavaScript, however, can run through our code script in parallel. So whilst line one is still processing, lines two, three, and four have already been executed \u2014 we call this asynchronous execution.", "If this sounds like a logic nightmare to you \u2014 trust me when I say, it is.", "The loadLayersModel function is asynchronous. To deal with this correctly we need to make the loading function asynchronous using async \u2014 allowing us to await the loadLayersModel function.", "Using await here makes this small part of the code synchronous (like Python). We use this again when loading and building the char2idx and idx2char mappings too.", "Our load function at the moment is not built into our text-gen component. To do this cleanly we can integrate it with the existing class definition.", "Inside the TextGenComponent class, there exists a function called ngOnInit \u2014 on class initialization, this function gets called immediately. Therefore, if we place our load function into this, we load the model as soon as the page loads.", "Modifying ngOnInit, we get the following:", "At this point you may (or may not) come across the following error:", "If so, we navigate to tfconfig.json and add \"skipLibCheck\": true as recommended by TensorFlow, like so:", "We\u2019ve loaded the model, character to index mappings, and character array. Now we need to write a function that takes an input in the form of text and uses this to output more text as predicted by our model.", "We can break this up into three parts:", "The first part is the conversion of text to a numeric array. To do this, we use the getNum function:", "getNum takes char2idx and the input text, and returns an encoded version of this same text. For example, with this char2idx dictionary we get:", "This is the most complex part of our code, but it is doing little more than:", "Note that the indexOfMax function finds the index of the highest value in the array \u2014 we keep this just outside our class.", "This part is the easiest, and we have actually already implemented it in line 39 of the prediction loop:", "All it does is pass the predicted index to idx2char, returning the English character and concatenating it to the current text string. Iteratively generating our predicted text.", "These parts are all implemented via the generate function \u2014 which is added as another method inside the TextGenComponent class.", "Both getNum and indexOfMax methods are added outside of the component class.", "When we put all of this together inside text-gen.component.ts we get our functioning version of the script:", "Now, all we need to do is connect our front-page elements \u2014 <textarea> and <button> \u2014 to the internals of our component.", "Navigate to src/text-gen/text-gen.component.html and add this:", "First, we need to tie the text displayed inside <textarea> to the text variable contained inside TextGenComponent. This is easily done by adding [value]=\"text\" to the <textarea> element.", "Now, when generate runs, it updates TextGenComponent.text with the new text \u2014 which in turn updates <textarea>.", "The final part is telling Angular to run generate when the \u2018Meditate\u2019 button is clicked. Again, this is super easy, just add (click)=\"generate( meditationInput.value)\".", "meditationInput refers to the <textarea> element, whilst .value captures the text inside that \u2014 passing it to our generate function.", "With that, we are done! The app is far from beautiful (as I said \u2014 I\u2019m no designer), but the functionality is all there:", "I will save further development, design, and cleanup for a later article for the sake of brevity \u2014 this guide is already far longer than I had intended!", "Despite its length, I hope this article has been useful. Feel free to ask questions or tell me what is unclear. Those of you out there who have used JavaScript/TypeScript, or Angular \u2014 let me know what needs work.", "[1] Usage statistics of JavaScript as client-side programming language on websites, W3 Techs", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Freelance ML engineer learning and writing about everything. I post a lot on YT https://www.youtube.com/c/jamesbriggs"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F5675b5a042cc&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-use-angular-to-deploy-tensorflow-web-apps-5675b5a042cc&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-use-angular-to-deploy-tensorflow-web-apps-5675b5a042cc&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-use-angular-to-deploy-tensorflow-web-apps-5675b5a042cc&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-use-angular-to-deploy-tensorflow-web-apps-5675b5a042cc&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----5675b5a042cc--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----5675b5a042cc--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://jamescalam.medium.com/?source=post_page-----5675b5a042cc--------------------------------", "anchor_text": ""}, {"url": "https://jamescalam.medium.com/?source=post_page-----5675b5a042cc--------------------------------", "anchor_text": "James Briggs"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fb9d77a4ca1d1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-use-angular-to-deploy-tensorflow-web-apps-5675b5a042cc&user=James+Briggs&userId=b9d77a4ca1d1&source=post_page-b9d77a4ca1d1----5675b5a042cc---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F5675b5a042cc&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-use-angular-to-deploy-tensorflow-web-apps-5675b5a042cc&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F5675b5a042cc&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-use-angular-to-deploy-tensorflow-web-apps-5675b5a042cc&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@grohsfabian?utm_source=medium&utm_medium=referral", "anchor_text": "Fabian Grohs"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://towardsdatascience.com/recurrent-ensemble-learning-caffdcd94092", "anchor_text": "text with the highest score"}, {"url": "https://github.com/jamescalam/meditations_ai", "anchor_text": "GitHub repo is here"}, {"url": "https://towardsdatascience.com/tagged/the-meditations", "anchor_text": "these articles"}, {"url": "https://github.com/jamescalam/meditations_ai/tree/master/incl_models/LSTM_e256_sl100_0414", "anchor_text": "from here"}, {"url": "https://nodejs.org/en/download/", "anchor_text": "install Node from here"}, {"url": "https://www.angularjswiki.com/angular/is-node-js-required-for-angular-2-or-angular/#:~:text=Reasons%20why%20we%20need%20Node.&text=%E2%80%9CAngular%E2%80%9D%20is%20entirely%20new%20framework,them%20in%20plain%20JavaScript%20i.e.%2C%20.&text=We%20need%20to%20use%20Node,can%20deploy%20them%20in%20production.", "anchor_text": "functionalities"}, {"url": "http://brackets.io/", "anchor_text": "Brackets"}, {"url": "https://code.visualstudio.com/download", "anchor_text": "VS Code"}, {"url": "https://getbootstrap.com/", "anchor_text": "Bootstrap"}, {"url": "https://www.tensorflow.org/js/tutorials/setup#typescript", "anchor_text": "recommended by TensorFlow"}, {"url": "https://github.com/jamescalam/meditations_ai/blob/master/incl_models/LSTM_e256_sl100_0414/char2idx.json", "anchor_text": "this char2idx dictionary"}, {"url": "https://gist.github.com/jamescalam/b54dba89fc02feb7e08dc5017e6ac38d", "anchor_text": "indexOfMax"}, {"url": "https://w3techs.com/technologies/details/cp-javascript/", "anchor_text": "Usage statistics of JavaScript as client-side programming language on websites"}, {"url": "https://medium.com/tag/python?source=post_page-----5675b5a042cc---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/web-development?source=post_page-----5675b5a042cc---------------web_development-----------------", "anchor_text": "Web Development"}, {"url": "https://medium.com/tag/data-science?source=post_page-----5675b5a042cc---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/technology?source=post_page-----5675b5a042cc---------------technology-----------------", "anchor_text": "Technology"}, {"url": "https://medium.com/tag/editors-pick?source=post_page-----5675b5a042cc---------------editors_pick-----------------", "anchor_text": "Editors Pick"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F5675b5a042cc&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-use-angular-to-deploy-tensorflow-web-apps-5675b5a042cc&user=James+Briggs&userId=b9d77a4ca1d1&source=-----5675b5a042cc---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F5675b5a042cc&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-use-angular-to-deploy-tensorflow-web-apps-5675b5a042cc&user=James+Briggs&userId=b9d77a4ca1d1&source=-----5675b5a042cc---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F5675b5a042cc&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-use-angular-to-deploy-tensorflow-web-apps-5675b5a042cc&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----5675b5a042cc--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F5675b5a042cc&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-use-angular-to-deploy-tensorflow-web-apps-5675b5a042cc&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----5675b5a042cc---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----5675b5a042cc--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----5675b5a042cc--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----5675b5a042cc--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----5675b5a042cc--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----5675b5a042cc--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----5675b5a042cc--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----5675b5a042cc--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----5675b5a042cc--------------------------------", "anchor_text": ""}, {"url": "https://jamescalam.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://jamescalam.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "James Briggs"}, {"url": "https://jamescalam.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "9.6K Followers"}, {"url": "https://www.youtube.com/c/jamesbriggs", "anchor_text": "https://www.youtube.com/c/jamesbriggs"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fb9d77a4ca1d1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-use-angular-to-deploy-tensorflow-web-apps-5675b5a042cc&user=James+Briggs&userId=b9d77a4ca1d1&source=post_page-b9d77a4ca1d1--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F75e31c56d187&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-use-angular-to-deploy-tensorflow-web-apps-5675b5a042cc&newsletterV3=b9d77a4ca1d1&newsletterV3Id=75e31c56d187&user=James+Briggs&userId=b9d77a4ca1d1&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}