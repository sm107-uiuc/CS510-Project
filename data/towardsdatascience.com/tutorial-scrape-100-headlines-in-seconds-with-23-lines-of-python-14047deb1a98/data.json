{"url": "https://towardsdatascience.com/tutorial-scrape-100-headlines-in-seconds-with-23-lines-of-python-14047deb1a98", "time": 1683007291.620663, "path": "towardsdatascience.com/tutorial-scrape-100-headlines-in-seconds-with-23-lines-of-python-14047deb1a98/", "webpage": {"metadata": {"title": "Tutorial: Scrape 100 Headlines in Seconds With 23 Lines of Python | by Jack Bandy | Towards Data Science", "h1": "Tutorial: Scrape 100 Headlines in Seconds With 23 Lines of Python", "description": "If you need to do any kind of web scraping, Scrapy is almost impossible to pass up. With built-in features such as parallel requests, user agent spoofing, robots.txt policies, and more, you can build\u2026"}, "outgoing_paragraph_urls": [{"url": "https://gist.github.com/jackbandy/208028b404d8c6a6f822397e306a5a34", "anchor_text": "Here", "paragraph_index": 2}, {"url": "https://newsapi.org", "anchor_text": "NewsAPI", "paragraph_index": 2}, {"url": "https://github.com/pandas-dev/pandas", "anchor_text": "Pandas", "paragraph_index": 3}, {"url": "https://github.com/scrapy/scrapy", "anchor_text": "Scrapy", "paragraph_index": 3}, {"url": "https://github.com/buriy/python-readability", "anchor_text": "Readability", "paragraph_index": 3}, {"url": "https://pip.pypa.io/en/stable/installing/", "anchor_text": "pip installed", "paragraph_index": 3}, {"url": "https://gist.github.com/jackbandy/208028b404d8c6a6f822397e306a5a34", "anchor_text": "gist", "paragraph_index": 8}, {"url": "https://twitter.com/jackbandy", "anchor_text": "Twitter", "paragraph_index": 17}], "all_paragraphs": ["If you need to do any kind of web scraping, Scrapy is almost impossible to pass up. With built-in features such as parallel requests, user agent spoofing, robots.txt policies, and more, you can build a powerful web scraper with just a few lines of code.", "In this tutorial, I will show how to create a basic Scrapy Spider that collects headlines from news articles. On most websites, you can do this without worrying about paywalls, bot detection, or weird parsing tricks, so I will leave those worries for another tutorial.", "Here is a file with 100 random urls, from a dataset I have been collecting from NewsAPI. The first few lines look like this:", "We will use three open-source libraries (and their dependencies): Pandas, Scrapy, and Readability. Assuming you already have pip installed, you can ensure your computer has these by running the following command in your terminal:", "Then, make the folder where you want to organize the project and navigate to it:", "Now, we can create the spider. Scrapy has a startproject command that sets up a whole project, but I have found that can be bloated. We\u2019ll keep it simple by making our own spider which, as promised, comes in at just 23 lines (including comments and whitespace \ud83d\ude42). These are the contents of a file titled headline_scraper.py :", "Unlike a normal python script, we need to use scrapy\u2019s runspider command to run the file. Choose where to save the output using the -o flag:", "That\u2019s everything! Below is an explanation of what\u2019s going on in the code.", "Besides importing libraries and declaring PATH_TO_DATA(a link to the gist where the 100 urls are stored), here is what the initial lines are doing:", "(If you want to use a different file with your own urls, simply replace PATH_TO_DATA with the location of your file. Then, either make sure the column of urls is labeled \u201curl,\u201d or replace .url with .name_of_your_column It can be on your machine, i.e., PATH_TO_DATA=/Users/Jack/Desktop/file.csv )", "Now that we have initialized the spider, we need to tell it what to actually do when it gets to a web page.", "To actually extract the headline, we must implement the parse method. Scrapy automatically sends the http response to this method whenever it retrieves a url from the list of start_urls , then it is totally up to you what to do with it. Here\u2019s what this version does:", "Again, this part is very customizable. If you wanted to try getting the full text of the article, just change the yield lines to include doc.summary() as follows.", "This will make an additional column calledfull_text in the resulting .csv file, with readability\u2019s best attempt at extracting the article text.", "Here is the output file from runningscrapy runspider headline_scraper.py -o scraped_headlines.csv:", "Boom! Well, at least for the most part. Scrapy is very error tolerant out of the box, so only 95/100 urls came back. The 5 that didn\u2019t come back encountered some kind of http error, like the 404 error you sometimes see browsing the web. Additionally, some rows (7 by my count) say \u201cwarning\u201d and \u201cAre you a robot?\u201d rather than providing actual headline. (Bloomberg seems to have very effective bot detection.)", "There are many strategies to deal with bot detection, some of which are already implemented in Scrapy. Let me know if you are interested, and I can cover those strategies in a future tutorial.", "If you have any questions, comments, or issues with the code, feel free to reach out by responding to this post or messaging me on Twitter. Thanks!", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "PhD student studying AI, ethics, and media. Trying to share things I learn in plain english. \ud83d\udc26 @jackbandy"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F14047deb1a98&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftutorial-scrape-100-headlines-in-seconds-with-23-lines-of-python-14047deb1a98&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftutorial-scrape-100-headlines-in-seconds-with-23-lines-of-python-14047deb1a98&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftutorial-scrape-100-headlines-in-seconds-with-23-lines-of-python-14047deb1a98&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftutorial-scrape-100-headlines-in-seconds-with-23-lines-of-python-14047deb1a98&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----14047deb1a98--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----14047deb1a98--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://jackbandy.medium.com/?source=post_page-----14047deb1a98--------------------------------", "anchor_text": ""}, {"url": "https://jackbandy.medium.com/?source=post_page-----14047deb1a98--------------------------------", "anchor_text": "Jack Bandy"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F8d75f62d60c4&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftutorial-scrape-100-headlines-in-seconds-with-23-lines-of-python-14047deb1a98&user=Jack+Bandy&userId=8d75f62d60c4&source=post_page-8d75f62d60c4----14047deb1a98---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F14047deb1a98&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftutorial-scrape-100-headlines-in-seconds-with-23-lines-of-python-14047deb1a98&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F14047deb1a98&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftutorial-scrape-100-headlines-in-seconds-with-23-lines-of-python-14047deb1a98&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@benballaschottner?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Bence Balla-Schottner"}, {"url": "https://unsplash.com/s/photos/spider-web?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Unsplash"}, {"url": "https://gist.github.com/jackbandy/208028b404d8c6a6f822397e306a5a34", "anchor_text": "Here"}, {"url": "https://newsapi.org", "anchor_text": "NewsAPI"}, {"url": "https://github.com/pandas-dev/pandas", "anchor_text": "Pandas"}, {"url": "https://github.com/scrapy/scrapy", "anchor_text": "Scrapy"}, {"url": "https://github.com/buriy/python-readability", "anchor_text": "Readability"}, {"url": "https://pip.pypa.io/en/stable/installing/", "anchor_text": "pip installed"}, {"url": "https://gist.github.com/jackbandy/208028b404d8c6a6f822397e306a5a34", "anchor_text": "gist"}, {"url": "https://docs.scrapy.org/en/latest/topics/spiders.html", "anchor_text": "Spiders"}, {"url": "https://github.com/buriy/python-readability", "anchor_text": "readability\u2019s"}, {"url": "https://www.crummy.com/software/BeautifulSoup/", "anchor_text": "BeautifulSoup"}, {"url": "https://github.com/codelucas/newspaper/", "anchor_text": "Newspaper"}, {"url": "https://unsplash.com/@lincon_street?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Divyadarshi Acharya"}, {"url": "https://unsplash.com/s/photos/web-scrape?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Unsplash"}, {"url": "https://twitter.com/jackbandy", "anchor_text": "Twitter"}, {"url": "https://medium.com/tag/data-science?source=post_page-----14047deb1a98---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/web-scraping?source=post_page-----14047deb1a98---------------web_scraping-----------------", "anchor_text": "Web Scraping"}, {"url": "https://medium.com/tag/python?source=post_page-----14047deb1a98---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/tutorial?source=post_page-----14047deb1a98---------------tutorial-----------------", "anchor_text": "Tutorial"}, {"url": "https://medium.com/tag/programming?source=post_page-----14047deb1a98---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F14047deb1a98&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftutorial-scrape-100-headlines-in-seconds-with-23-lines-of-python-14047deb1a98&user=Jack+Bandy&userId=8d75f62d60c4&source=-----14047deb1a98---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F14047deb1a98&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftutorial-scrape-100-headlines-in-seconds-with-23-lines-of-python-14047deb1a98&user=Jack+Bandy&userId=8d75f62d60c4&source=-----14047deb1a98---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F14047deb1a98&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftutorial-scrape-100-headlines-in-seconds-with-23-lines-of-python-14047deb1a98&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----14047deb1a98--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F14047deb1a98&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftutorial-scrape-100-headlines-in-seconds-with-23-lines-of-python-14047deb1a98&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----14047deb1a98---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----14047deb1a98--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----14047deb1a98--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----14047deb1a98--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----14047deb1a98--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----14047deb1a98--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----14047deb1a98--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----14047deb1a98--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----14047deb1a98--------------------------------", "anchor_text": ""}, {"url": "https://jackbandy.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://jackbandy.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Jack Bandy"}, {"url": "https://jackbandy.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "238 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F8d75f62d60c4&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftutorial-scrape-100-headlines-in-seconds-with-23-lines-of-python-14047deb1a98&user=Jack+Bandy&userId=8d75f62d60c4&source=post_page-8d75f62d60c4--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F6654c366aa3a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftutorial-scrape-100-headlines-in-seconds-with-23-lines-of-python-14047deb1a98&newsletterV3=8d75f62d60c4&newsletterV3Id=6654c366aa3a&user=Jack+Bandy&userId=8d75f62d60c4&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}