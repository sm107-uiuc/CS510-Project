{"url": "https://towardsdatascience.com/big-data-modeling-25c64d456308", "time": 1683017761.730064, "path": "towardsdatascience.com/big-data-modeling-25c64d456308/", "webpage": {"metadata": {"title": "Big Data Modeling: Engineering Big Data Warehouses | Towards Data Science", "h1": "[big] Data Modeling", "description": "A modern update of dimensional data modeling techniques for big data warehouses. This proposes revisions to adapt the Kimball methodology to big data."}, "outgoing_paragraph_urls": [{"url": "https://www.kimballgroup.com/", "anchor_text": "Ralph Kimball", "paragraph_index": 0}, {"url": "https://www.kimballgroup.com/data-warehouse-business-intelligence-resources/kimball-techniques/dimensional-modeling-techniques/", "anchor_text": "dimensional data modeling techniques", "paragraph_index": 20}], "all_paragraphs": ["Dimensional data modeling has been around for a long time but it wasn\u2019t until Ralph Kimball popularized the concept in the late 1980s and early 1990s that it really picked up steam. Many aspects of dimensional data modeling assumed the data warehouse would be confined to a single-server database (either RDBMS or OLAP). However, with the popularity of distributed computing and storage systems in the last 15 years, many of these assumptions no longer apply. The methods and techniques of dimensional data modeling popularized by Ralph Kimball 25 years ago require some revision.", "Many seasoned data engineers will probably remember the old days when Ralph Kimball and Bill Inmon battled it out in the data warehouse wars. For those not familiar, these were two very different approaches for building a data warehouse which is beyond the scope of this article. While Kimball had a larger following, many of Inmon\u2019s ideas still survive to this day and the majority of modern data warehouses are based upon ideas from both camps. That being said, I believe it was Kimball\u2019s use of dimensional data modeling that had the biggest impact on how data warehouses are designed and operate today.", "The overarching theme of dimensional data modeling is simple: organize data in such a way that it is quick & easy to understand & query for analysis & reporting. To this day, this theme (mostly) still applies; the only thing that has changed is that today\u2019s data warehouse has far more uses than just analysis and reporting. Data science, machine learning, and algorithm engineering are just a few of the emerging uses for big data stored in modern data warehouses. Of course, this revision doesn\u2019t require us to come up with an entirely new way of modeling data; it simply means that \u2014 with some minor tweaks \u2014 dimensional data modeling can satisfy the (big) data needs of today\u2019s much wider audience.", "I\u2019m proposing a list of revisions and updates to bring dimensional data modeling into the world of big data. We may need to add/revise this list in the future but this is probably a pretty good start:", "From a data modeling point of view, snowflake schemas have basically won; but that doesn\u2019t mean star schemas just gave up. All it means is that we should have different tables for many of the different levels of granularity a dimension might hold (which is the approach of a snowflake schema). However, we should still de-normalize lower-granularity attributes into parent dimensions (which is the approach of a star schema) to reduce the number of shuffle stages that a query will require to execute in a distributed computing environment.", "Consider a scenario where we have product_type_d and product_subtype_d dimensions. We\u2019ll want all of the attributes of product_subtype_d included (via de-normalization) in product_type_d. Of course, this begs the question: if we have all of the information in product_type_d, then why do we need the product_subtype_d table? The answer is that we still need a dimension at the granularity of product subtype so that fact tables with a product_subtype_id foreign key can still perform a simple join for dimension attributes.", "Basically, merging the two techniques yields us the best of both worlds. The only cost is in storage. So while you may want to be careful doing this for extremely large dimensions; it is well worth the cost for the majority of use cases.", "As cool as I thought surrogate keys were when I first learned about them, they have turned out to be nothing but trouble and can be extremely difficult to maintain in today\u2019s environment. Using natural keys is perfectly fine. If your dimension has a composite primary key and you want to simplify querying (so that the join doesn\u2019t need to be made with two columns); just concatenate them together with a reasonable delimiter to produce a single key based upon multiple natural keys. Surrogate keys can make re-stating data a total nightmare and my next point eliminates the only good reason they were ever really needed in the first place.", "The vast majority of the time, a Type-0 or Type-1 SCD will do the trick. Unless there is an exceptionally critical reason, I avoid using Type-2 SCD\u2019s. In over 15 years of data modeling, I have only come across a handful of real use-cases for Type-2 SCDs. While they can be a very powerful feature in a data warehouse, they are very seldom actually used (even when data consumers swear that they need it).", "If you need to implement a Type-2 SCD, do not use surrogate keys. Instead, use the natural key in combination with date/timestamp fields representing effective and expiration dates in the SCD. This is only slightly more complicated to query but is far more flexible, much easier to implement, and avoids the need for surrogate keys.", "This is a somewhat new concept that I think needs to be added to the data modeling toolbox. Snapshot dimensions wouldn\u2019t have made sense in an RDBMS but make perfect sense in a big data environment. What are they? Take a dimension (for example: customer_d) and add a partition column (for example: as_of_date). Each day that your ETL runs all you need to do is pick up data in the previous as_of_date, read event data about inserts/updates/deletes to customers, process the combined dataset and write the result to a new as_of_date partition.", "Some of the benefits to this approach are:", "Is this a waste of space? Sure. But the extra space this requires is probably a lot cheaper than having a customer dimension with corrupted data and no quick and easy way to fix it. Think of it less as a waste of space and more as an insurance policy. Additionally, it is relatively simple to create a clean-up job that drops old partitions that are no longer needed.", "Denormalizing some attributes into fact tables isn\u2019t as taboo as it once was. Part of the reason why this was frowned upon in the past was because of how an RDBMS would store data in tables. With the advent of columnar data storage formats like Parquet and ORC; this is no longer a huge concern. For a field to be denormalized, it should meet one of the following requirements:", "If one of these requirements are met, then I consider the advantages and disadvantages to denormalizing an attribute into a fact table:", "It is important to understand that this list of advantages and disadvantages is just a starting point and that each point may carry a different weight. In the end, this is one of those situations where the artistic side of data modeling becomes just as important as the scientific side.", "Like surrogate keys, I thought these were cool when I first learned about them; but, in practice, I never really found a lot of use for them. In addition, by their very nature, they required you to perform UPDATE operations to a large number of random rows in a fact table. Random UPDATE operations and big data are sworn enemies \u2014 and their battleground is your cluster. Unless you need the heat from your cluster to make it through the winter, find some other way to model your fact tables.", "While complex data types violate the most important rule of normal forms (atomic columns); much of the traditional teachings of dimensional data modeling broke several of these rules as anyway. With a bit of common sense and caution; complex data types can be extremely powerful in a modern data warehouse.", "Here are some examples of powerful use-cases where complex types should probably be used.", "Of course, with great power comes great responsibility, so here are some points of caution to consider about complex types:", "Much can be learned by reviewing Ralph Kimball\u2019s dimensional data modeling techniques. While the technology may have changed (which inspired me to write this article), the core idea remains the same: a data warehouse should be designed with the data consumer\u2019s requirements as a top priority.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "I am a data engineer with over 15 years of experience in a variety of related fields including data science, software engineering, and business intelligence."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F25c64d456308&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbig-data-modeling-25c64d456308&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbig-data-modeling-25c64d456308&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbig-data-modeling-25c64d456308&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbig-data-modeling-25c64d456308&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----25c64d456308--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----25c64d456308--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://datadj.medium.com/?source=post_page-----25c64d456308--------------------------------", "anchor_text": ""}, {"url": "https://datadj.medium.com/?source=post_page-----25c64d456308--------------------------------", "anchor_text": "John Souza"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F4b08cb2b7111&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbig-data-modeling-25c64d456308&user=John+Souza&userId=4b08cb2b7111&source=post_page-4b08cb2b7111----25c64d456308---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F25c64d456308&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbig-data-modeling-25c64d456308&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F25c64d456308&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbig-data-modeling-25c64d456308&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://towardsdatascience.com/tagged/making-sense-of-big-data", "anchor_text": "Making Sense of Big Data"}, {"url": "https://www.kimballgroup.com/", "anchor_text": "Ralph Kimball"}, {"url": "https://www.kimballgroup.com/data-warehouse-business-intelligence-resources/kimball-techniques/dimensional-modeling-techniques/", "anchor_text": "dimensional data modeling techniques"}, {"url": "https://medium.com/tag/big-data?source=post_page-----25c64d456308---------------big_data-----------------", "anchor_text": "Big Data"}, {"url": "https://medium.com/tag/data-modeling?source=post_page-----25c64d456308---------------data_modeling-----------------", "anchor_text": "Data Modeling"}, {"url": "https://medium.com/tag/data-engineering?source=post_page-----25c64d456308---------------data_engineering-----------------", "anchor_text": "Data Engineering"}, {"url": "https://medium.com/tag/data-warehouse?source=post_page-----25c64d456308---------------data_warehouse-----------------", "anchor_text": "Data Warehouse"}, {"url": "https://medium.com/tag/making-sense-of-big-data?source=post_page-----25c64d456308---------------making_sense_of_big_data-----------------", "anchor_text": "Making Sense Of Big Data"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F25c64d456308&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbig-data-modeling-25c64d456308&user=John+Souza&userId=4b08cb2b7111&source=-----25c64d456308---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F25c64d456308&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbig-data-modeling-25c64d456308&user=John+Souza&userId=4b08cb2b7111&source=-----25c64d456308---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F25c64d456308&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbig-data-modeling-25c64d456308&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----25c64d456308--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F25c64d456308&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbig-data-modeling-25c64d456308&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----25c64d456308---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----25c64d456308--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----25c64d456308--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----25c64d456308--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----25c64d456308--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----25c64d456308--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----25c64d456308--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----25c64d456308--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----25c64d456308--------------------------------", "anchor_text": ""}, {"url": "https://datadj.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://datadj.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "John Souza"}, {"url": "https://datadj.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "106 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F4b08cb2b7111&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbig-data-modeling-25c64d456308&user=John+Souza&userId=4b08cb2b7111&source=post_page-4b08cb2b7111--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F12be730327e1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbig-data-modeling-25c64d456308&newsletterV3=4b08cb2b7111&newsletterV3Id=12be730327e1&user=John+Souza&userId=4b08cb2b7111&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}