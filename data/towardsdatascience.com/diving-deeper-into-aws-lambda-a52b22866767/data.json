{"url": "https://towardsdatascience.com/diving-deeper-into-aws-lambda-a52b22866767", "time": 1683002732.404055, "path": "towardsdatascience.com/diving-deeper-into-aws-lambda-a52b22866767/", "webpage": {"metadata": {"title": "Diving deeper into AWS Lambda. Understand Lambda's basic\u2026 | by Gabriel dos Santos Gon\u00e7alves | Towards Data Science", "h1": "Diving deeper into AWS Lambda", "description": "Amazon Lambda has become an essential serverless service for the development of Cloud Infrastructure. The idea behind a FaaS (Function as a service) allows programmers to focus on coding, increasing\u2026"}, "outgoing_paragraph_urls": [{"url": "https://medium.com/@PaulDJohnston/serverless-its-much-much-more-than-faas-a342541b982e", "anchor_text": "FaaS (Function as a service)", "paragraph_index": 0}, {"url": "https://towardsdatascience.com/introduction-to-amazon-lambda-layers-and-boto3-using-python3-39bd390add17", "anchor_text": "In another article", "paragraph_index": 1}, {"url": "https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/lambda.html", "anchor_text": "boto3", "paragraph_index": 1}, {"url": "https://aws.amazon.com/whitepapers/?nc1=h_ls&whitepapers-main.sort-by=item.additionalFields.sortDate&whitepapers-main.sort-order=desc&whitepapers-main.q=lambda&whitepapers-main.q_operator=AND", "anchor_text": "AWS white papers", "paragraph_index": 3}, {"url": "https://aws.amazon.com/amazon-linux-ami/?nc1=h_ls", "anchor_text": "Amazon Linux", "paragraph_index": 6}, {"url": "https://medium.com/hackernoon/im-afraid-you-re-thinking-about-aws-lambda-cold-starts-all-wrong-7d907f278a4f", "anchor_text": "Cold Start", "paragraph_index": 8}, {"url": "https://medium.com/free-code-camp/heres-how-to-make-your-cloud-infrastructure-stable-secure-and-scalable-f9f4749697d6", "anchor_text": "designing your cloud infrastructure.", "paragraph_index": 10}, {"url": "https://mafft.cbrc.jp/alignment/software/", "anchor_text": "MAFFT Aligner", "paragraph_index": 13}, {"url": "https://mafft.cbrc.jp/alignment/software/linuxportable.html", "anchor_text": "portable package", "paragraph_index": 13}, {"url": "https://boto3.amazonaws.com/v1/documentation/api/latest/index.html", "anchor_text": "Boto3", "paragraph_index": 19}, {"url": "https://docs.aws.amazon.com/lambda/latest/dg/python-context-object.html", "anchor_text": "Lambda Context Object", "paragraph_index": 23}], "all_paragraphs": ["Amazon Lambda has become an essential serverless service for the development of Cloud Infrastructure. The idea behind a FaaS (Function as a service) allows programmers to focus on coding, increasing their productivity and the flexibility of modern systems based on microservices.", "In another article, I introduced the basic concepts of AWS Lambda, how to set up your first function with Python, use external libraries (Lambda Layers) and invoke the function using boto3.", "In this article, we are going to explore other features and expand usability with AWS Lambda functions.", "Most of the information presented in this article was extracted from AWS white papers, and from articles cited in the Resources session.", "Lambda is a high-scale, provision-free serverless compute offering based on functions. It provides the cloud logic layer for your application. Lambda functions can be triggered by a variety of events that occur on AWS or on supporting third-party services.", "This may not be the best definition, as it relies too much on vague, abstract concepts and doesn\u2019t define the elements that are part of Lambda. Even if you managed to run some AWS Lambda functions before, and somehow are familiar with the interface, what happens behind when you call your function may still be a mystery for you.", "From an infrastructure standpoint, every AWS Lambda is part of a container running Amazon Linux (referenced as Function Container). The code files and assets you create for your AWS Lambda are called Function Code Package and are stored on an S3 bucket managed by AWS. Whenever a Lambda function is triggered, the Function Code Package is downloaded from the S3 bucket to the Function container and installed on its Lambda runtime environment. This process can be easily scaled, and multiple calls for a specific Lambda function can be performed without any trouble by the AWS infrastructure.", "Lambda size limits on Function Code Package are 50MB for compressed and 250MB for extracted folders and are probably related to the need of loading it from S3 to the Function Container every time the function is called. If the Function Code package was larger than the current limits, the loading process would probably have its efficiency compromised.", "When you call a Lambda Function, it follows the steps described above and executes the code. After finishing the execution, the Lambda Container stays available for a few minutes, before being terminated. This is called a Cold Start.", "If you call the same function and the Lambda Container is still available (haven\u2019t been terminated yet), AWS uses this container to execute your new call. This process of using active function containers is called Warm Container and it increases the response speed of your Lambda (Figure 2).", "Another important aspect of AWS Lambda is that it\u2019s a Stateless service, meaning \u201cyour code cannot make assumptions about state\u201d. Even when you use Warm Containers, the state and data generated by the last call can\u2019t be used by the new call, meaning the Container is restarted every new call. One way Lambda deals with these limitations is by using data from Stateful services like S3, DynamoDB, RDS, etc. So keep this in mind when you are designing your cloud infrastructure.", "AWS offers a wide variety of runtimes (languages) like Ruby, Python, Node.js, Java, Go and .NET, and you also can run any code or packages you\u2019ve uploaded inside your deployment package. Meaning you can use your Lambda function running the mentioned languages, but sometimes you need to execute your function with a tool that is run through the command line, like a bash file. As the infrastructure behind AWS Lambda is not transparent, it can be tricky to implement it, as you can\u2019t simply call an executable stored on your Lambda deployment package.", "The key to run executable files on AWS Lambda is to:", "To illustrate this process, we are going to use a bash command-line tool called MAFFT Aligner, which is a bioinformatic tool for performing sequence alignment. We can download the portable package to run it locally on any folder of our machine. We would run the following commands to execute it:", "To replicate this process using AWS Lambda we would use the following code:", "The first two functions, load_file_from_S3 and upload_file_to_S3 , are used to get files that are stored on S3 and save the output of the Mafft tool back to S3 so we access it after (remember that Lambda is stateless, so when the function is terminated everything is deleted from the environment). One important detail is that you can only use the Lambda\u2019s temporary folder to save files, so lines 10 and 18 explicit the path to /tmp/.", "The lambda_handler function (line 22) contains all the necessary commands to load, execute and save files using Mafft tool. Lines 25 to 28 specify the variables (names of input, output files and S3 buckets). The executable files for Mafft are copied from the Function Code Package to /tmp/ folder (lines 40 and 41) and permission are granted for executing it using chmod (lines 43 and 44). Finally, the tool is executed through the command line using os.system() (line 47) and the output file is uploaded to an S3 bucket (line 50).", "By using the same logic presented here you can expand the functionality of your Lambda functions by packaging executables coded in different languages.", "Every time your AWS Lambda is run, the function logs are stored on CloudWatch, making it easier to monitor the execution. For every Function Container, CloudWatch generates one Log Stream. So when you are tracking Cold Start calls, you would have a one call-one log relation. The problem starts when you have Warm Containers, the log stream for the active container would have information about multiple Lambda calls, making it a little bit tricky to parse the information.", "Boto3 is an incredible library to integrate pipelines and systems hosted on AWS using Python, making some processes much easier to perform. To deal with the problem of Warm Containers logs, I developed a code to process logs data from CloudWatch using boto3. To run it, you need to provide information about 3 important variables related to each Lambda call:", "A) Log Group: It\u2019s the name generated by CloudWatch for your Lambda Function. The convention is aws/lambda/your_lambda_name .", "B) Stream Name: This is the name for the log created for each Lambda Function Container executed. If you execute a Lambda function using a Warm Container, the logs for the current and past executions would have the same Stream Name, they would belong to the same log.", "C) Request ID: This a unique identifier generated for each Lambda execution.", "You can find these values by accessing the Lambda Context Object inside the lamdbda_handler function.", "Next, you can use these values to run the function parsing_lambda_logs to extract only the lines of logs related to a specific RequestId.", "The code above also returns the lambda_status which tells you if there was an error during the execution of that Lambda call, for that specific RequestId. So you can integrate your Lambda calls with this function to monitor if your system is working properly.", "As mentioned in the introduction, the idea of this article was to give a little bit more details on how AWS Lambda works and how to perform a few important processes to provide you more resources when designing your Cloud Infrastructure. I hope AWS Lambda is now less of a \u2018black-box\u2019, and that you can explore more its possibilities and functionalities.", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fa52b22866767&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdiving-deeper-into-aws-lambda-a52b22866767&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdiving-deeper-into-aws-lambda-a52b22866767&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdiving-deeper-into-aws-lambda-a52b22866767&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdiving-deeper-into-aws-lambda-a52b22866767&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----a52b22866767--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----a52b22866767--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@gabrielsgoncalves?source=post_page-----a52b22866767--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@gabrielsgoncalves?source=post_page-----a52b22866767--------------------------------", "anchor_text": "Gabriel dos Santos Gon\u00e7alves"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F28d0c7765c4e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdiving-deeper-into-aws-lambda-a52b22866767&user=Gabriel+dos+Santos+Gon%C3%A7alves&userId=28d0c7765c4e&source=post_page-28d0c7765c4e----a52b22866767---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fa52b22866767&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdiving-deeper-into-aws-lambda-a52b22866767&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fa52b22866767&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdiving-deeper-into-aws-lambda-a52b22866767&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@jeremybishop?utm_source=medium&utm_medium=referral", "anchor_text": "Jeremy Bishop"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://medium.com/@PaulDJohnston/serverless-its-much-much-more-than-faas-a342541b982e", "anchor_text": "FaaS (Function as a service)"}, {"url": "https://towardsdatascience.com/introduction-to-amazon-lambda-layers-and-boto3-using-python3-39bd390add17", "anchor_text": "In another article"}, {"url": "https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/lambda.html", "anchor_text": "boto3"}, {"url": "https://aws.amazon.com/whitepapers/?nc1=h_ls&whitepapers-main.sort-by=item.additionalFields.sortDate&whitepapers-main.sort-order=desc&whitepapers-main.q=lambda&whitepapers-main.q_operator=AND", "anchor_text": "AWS white papers"}, {"url": "https://aws.amazon.com/amazon-linux-ami/?nc1=h_ls", "anchor_text": "Amazon Linux"}, {"url": "https://medium.com/hackernoon/im-afraid-you-re-thinking-about-aws-lambda-cold-starts-all-wrong-7d907f278a4f", "anchor_text": "Cold Start"}, {"url": "https://medium.com/free-code-camp/heres-how-to-make-your-cloud-infrastructure-stable-secure-and-scalable-f9f4749697d6", "anchor_text": "designing your cloud infrastructure."}, {"url": "https://mafft.cbrc.jp/alignment/software/", "anchor_text": "MAFFT Aligner"}, {"url": "https://mafft.cbrc.jp/alignment/software/linuxportable.html", "anchor_text": "portable package"}, {"url": "https://boto3.amazonaws.com/v1/documentation/api/latest/index.html", "anchor_text": "Boto3"}, {"url": "https://docs.aws.amazon.com/lambda/latest/dg/python-context-object.html", "anchor_text": "Lambda Context Object"}, {"url": "https://medium.com/@gabrielsgoncalves", "anchor_text": "profile page"}, {"url": "https://medium.com/@gabrielsgoncalves/membership", "anchor_text": "referral link"}, {"url": "https://medium.com/@PaulDJohnston/serverless-its-much-much-more-than-faas-a342541b982e", "anchor_text": "Serverless: It\u2019s much much more than FaaSaka Data, Logic and Infrastructure \u2014 how do they fit together?medium.com"}, {"url": "https://towardsdatascience.com/introduction-to-amazon-lambda-layers-and-boto3-using-python3-39bd390add17", "anchor_text": "Introduction to Amazon Lambda, Layers and boto3 using Python3A serverless approach for Data Scientiststowardsdatascience.com"}, {"url": "https://aws.amazon.com/whitepapers/?nc1=h_ls&whitepapers-main.sort-by=item.additionalFields.sortDate&whitepapers-main.sort-order=desc", "anchor_text": "AWS Whitepapers & GuidesExpand your knowledge of the cloud with AWS technical content authored by AWS and the AWS community, including\u2026aws.amazon.com"}, {"url": "https://medium.com/hackernoon/im-afraid-you-re-thinking-about-aws-lambda-cold-starts-all-wrong-7d907f278a4f", "anchor_text": "I\u2019m afraid you\u2019re thinking about AWS Lambda cold starts all wrongWhen I discuss AWS Lambda cold starts with folks in the context of API Gateway, I often get responses along the line\u2026medium.com"}, {"url": "https://read.acloud.guru/does-coding-language-memory-or-package-size-affect-cold-starts-of-aws-lambda-a15e26d12c76", "anchor_text": "How does language, memory and package size affect cold starts of AWS Lambda?Comparing the cold start times of AWS Lambda using different languages, memory allocation, and sizes of deployment\u2026read.acloud.guru"}, {"url": "https://medium.com/free-code-camp/heres-how-to-make-your-cloud-infrastructure-stable-secure-and-scalable-f9f4749697d6", "anchor_text": "Here\u2019s how to make your cloud infrastructure stable, secure, and scalable.Startup DevOps is hardmedium.com"}, {"url": "https://medium.com/free-code-camp/microservices-from-idea-to-starting-line-ae5317a6ff02", "anchor_text": "Understanding Microservices: From Idea To Starting LineOver the last two months, I have invested most of my free time learning the complete ins-and-outs of what the\u2026medium.com"}, {"url": "https://medium.com/tag/aws?source=post_page-----a52b22866767---------------aws-----------------", "anchor_text": "AWS"}, {"url": "https://medium.com/tag/lambda-function?source=post_page-----a52b22866767---------------lambda_function-----------------", "anchor_text": "Lambda Function"}, {"url": "https://medium.com/tag/aws-lambda?source=post_page-----a52b22866767---------------aws_lambda-----------------", "anchor_text": "AWS Lambda"}, {"url": "https://medium.com/tag/cloud-services?source=post_page-----a52b22866767---------------cloud_services-----------------", "anchor_text": "Cloud Services"}, {"url": "https://medium.com/tag/serverless?source=post_page-----a52b22866767---------------serverless-----------------", "anchor_text": "Serverless"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fa52b22866767&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdiving-deeper-into-aws-lambda-a52b22866767&user=Gabriel+dos+Santos+Gon%C3%A7alves&userId=28d0c7765c4e&source=-----a52b22866767---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fa52b22866767&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdiving-deeper-into-aws-lambda-a52b22866767&user=Gabriel+dos+Santos+Gon%C3%A7alves&userId=28d0c7765c4e&source=-----a52b22866767---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fa52b22866767&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdiving-deeper-into-aws-lambda-a52b22866767&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----a52b22866767--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fa52b22866767&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdiving-deeper-into-aws-lambda-a52b22866767&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----a52b22866767---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----a52b22866767--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----a52b22866767--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----a52b22866767--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----a52b22866767--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----a52b22866767--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----a52b22866767--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----a52b22866767--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----a52b22866767--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@gabrielsgoncalves?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@gabrielsgoncalves?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Gabriel dos Santos Gon\u00e7alves"}, {"url": "https://medium.com/@gabrielsgoncalves/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "442 Followers"}, {"url": "http://bigdata.com.br", "anchor_text": "bigdata.com.br"}, {"url": "http://www.linkedin.com/in/gabrielsantosgoncalves", "anchor_text": "www.linkedin.com/in/gabrielsantosgoncalves"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F28d0c7765c4e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdiving-deeper-into-aws-lambda-a52b22866767&user=Gabriel+dos+Santos+Gon%C3%A7alves&userId=28d0c7765c4e&source=post_page-28d0c7765c4e--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F939f1ba5dbc6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdiving-deeper-into-aws-lambda-a52b22866767&newsletterV3=28d0c7765c4e&newsletterV3Id=939f1ba5dbc6&user=Gabriel+dos+Santos+Gon%C3%A7alves&userId=28d0c7765c4e&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}