{"url": "https://towardsdatascience.com/predicting-happiness-using-random-forest-1e6477affc24", "time": 1683013889.148452, "path": "towardsdatascience.com/predicting-happiness-using-random-forest-1e6477affc24/", "webpage": {"metadata": {"title": "Predicting happiness using Random Forest | by Chan Min Yi | Towards Data Science", "h1": "Predicting happiness using Random Forest", "description": "Why do we try to predict happiness? Being able to predict happiness means that we are able to manipulate or try to improve certain components in order to increase our own happiness, and possibly\u2026"}, "outgoing_paragraph_urls": [{"url": "http://www.worldvaluessurvey.org/WVSDocumentationWV7.jsp", "anchor_text": "#WorldValuesSurvey", "paragraph_index": 1}], "all_paragraphs": ["Why do we try to predict happiness? Being able to predict happiness means that we are able to manipulate or try to improve certain components in order to increase our own happiness, and possibly national happiness for governments. I found Random Forest (RF) to be the simplest and most efficient package, so let\u2019s get started!", "The data obtained from the #WorldValuesSurvey contains >290 questions & consist of ~69k responses after removing missing data for happiness levels. It is a cross-national survey across the years, and the questionnaire can be found on the website. In particular, we will be looking at the 2017\u20132020 data set. The size of the data set makes it optimal for machine learning.", "To start with, we will be using the RF classifier* since we would like the machine to predict the level of happiness in groups (Very happy, Quite happy, Not very happy, Not at all happy).*side-note, a RF regressor is used when looking for a number that can take a range of values e.g any value between 0 and 1.", "Let\u2019s start by getting the columns of only the questions and removing negative values* in the responses to Q46 that asks about happiness levels.", "*Negative values are either respondents saying they don\u2019t know, have no answer, were not asked or the response was missing. These values would make it harder for the machine to classify them, since it increases the number of categories and are not what we are looking for.", "The data set remaining is shown below:", "The next concern is that we would have to deal with missing values in other columns. There are 3 options to consider:", "Since the third option is not viable, we will have to check which option, 1 or 2, would give the highest accuracy. In this case, I found that replacing with 0 makes it more accurate.", "Now we set the \u2018label\u2019 for the machine to recognize the feature that I want it to predict and split the data into train and test sets.", "The process of training and testing is simple. To improve the predictive power and/or model speed, we can simply modify the parameters within the RF classifier.", "n_estimators \u2014 number of trees the algorithm builds before majority voting", "max_features \u2014 maximum number of features random forest considers to split a node", "min_sample_leaf \u2014 the minimum number of leafs required to split an internal node.", "n_jobs \u2014 number of processors it is allowed to use. If = 1, only use one processor. If =-1, no limit", "random_state \u2014 makes the model\u2019s output replicable i.e always produce the same results given the same hyperparameters and training data", "The model takes 1.3 minutes to train ~52k training rows and >290 columns, and 1 second to test. The accuracy was 63.70%. If we had chosen to fill the missing values with the mean, the accuracy would be 63.55%. But what\u2019s important is finding out what influences the machine\u2019s prediction, since those would be the variables that we want to look at. We certainly cannot expect everyone to answer 290+ questions, or try to work on all 290 aspects to improve happiness (that\u2019s going to cost a lot). So we\u2019ll be looking at the feature importances.", "If you recall, feature_list contains the columns of all other variables except Q46. The goal is to understand which are the variables that influence the prediction.", "Feature importances sum to 1 and what we notice is that certain variables have a greater influence over the prediction compared to the others, and almost every variable has some form of influence, albeit extremely small because there are just too many variables. The next thing is to continue improving our model to allow us to better understand happiness.", "Let\u2019s take the top 20 features, and set up a new model using just these 20 variables (+ var itself). We\u2019ll repeat the data cleaning and same RF model. I got an accuracy of 64.47%. If we had chosen to replace missing values with the mean, the accuracy would be 64.41%. What is surprising here is that with smaller number of variables, the model becomes more accurate (from 63.70% to 64.47%). This is likely because the other variables were generating noise in the model and causing it to be less accurate.", "This time, it is clearer to tell which variables were more important. You may refer to the questionnaire found on WVS for more detailed information. I will give a summary of the topics that the questions covered.", "Let\u2019s look at the graph of actual vs predicted values for the first 200 test values. For greater visibility of the whole test set, let\u2019s also do a simple count for the difference in values of predicted and actual (predicted minus actual).", "The model appears to be slightly more negative than positive in predicting the happiness levels, but would still be considered otherwise balanced!", "What I have done is to examine the key questions out of >290 in the WVS that is more relevant to happiness levels. This would mean that we can try to focus specifically on these aspects when examining happiness.", "Looking at the questionnaire, we would also notice that Q261 and Q262 are the same thing (age and year born), so we could remove 1 of them to include another feature. For Q266,267,268 (country of birth of the respondent and parents) they appear to be repeats, but are not exactly the same thing since immigration/cross-cultural marriage may occur. Nonetheless, we could consider removing 2 of them since the occurrence is minimal.", "Individual level:Life satisfaction, health, finances, freedom, age, safety, religion, marriage, and family.National level:country, perception of corruption, democracy/political influence, national pride", "In particular, health, finances and age were the top features that were deemed as important by the machine. In this sense, the individual level factors has a greater influence on one\u2019s happiness level compared to the national level factors.", "However, I noticed that the WVS did not have data on sleep hours, which was a key element that was observed in my earlier post. Nonetheless, it is still very much useful as we can consider those aspects for further analysis! I\u2019ll be back with more insights into the correlation between those aspects and happiness, to determine how we can improve our happiness levels. Until then, remember to stay happy!", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "A university student passionate about how data can guide our decisions!"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F1e6477affc24&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpredicting-happiness-using-random-forest-1e6477affc24&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpredicting-happiness-using-random-forest-1e6477affc24&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpredicting-happiness-using-random-forest-1e6477affc24&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpredicting-happiness-using-random-forest-1e6477affc24&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----1e6477affc24--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----1e6477affc24--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@chanminyi?source=post_page-----1e6477affc24--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@chanminyi?source=post_page-----1e6477affc24--------------------------------", "anchor_text": "Chan Min Yi"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F237391d36370&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpredicting-happiness-using-random-forest-1e6477affc24&user=Chan+Min+Yi&userId=237391d36370&source=post_page-237391d36370----1e6477affc24---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F1e6477affc24&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpredicting-happiness-using-random-forest-1e6477affc24&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F1e6477affc24&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpredicting-happiness-using-random-forest-1e6477affc24&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@mikepetrucci?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Mike Petrucci"}, {"url": "https://unsplash.com/@mikepetrucci?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Unsplash"}, {"url": "http://www.worldvaluessurvey.org/WVSDocumentationWV7.jsp", "anchor_text": "#WorldValuesSurvey"}, {"url": "https://medium.com/tag/happiness?source=post_page-----1e6477affc24---------------happiness-----------------", "anchor_text": "Happiness"}, {"url": "https://medium.com/tag/random-forest?source=post_page-----1e6477affc24---------------random_forest-----------------", "anchor_text": "Random Forest"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----1e6477affc24---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/tag/python?source=post_page-----1e6477affc24---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F1e6477affc24&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpredicting-happiness-using-random-forest-1e6477affc24&user=Chan+Min+Yi&userId=237391d36370&source=-----1e6477affc24---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F1e6477affc24&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpredicting-happiness-using-random-forest-1e6477affc24&user=Chan+Min+Yi&userId=237391d36370&source=-----1e6477affc24---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F1e6477affc24&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpredicting-happiness-using-random-forest-1e6477affc24&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----1e6477affc24--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F1e6477affc24&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpredicting-happiness-using-random-forest-1e6477affc24&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----1e6477affc24---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----1e6477affc24--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----1e6477affc24--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----1e6477affc24--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----1e6477affc24--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----1e6477affc24--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----1e6477affc24--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----1e6477affc24--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----1e6477affc24--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@chanminyi?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@chanminyi?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Chan Min Yi"}, {"url": "https://medium.com/@chanminyi/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "16 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F237391d36370&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpredicting-happiness-using-random-forest-1e6477affc24&user=Chan+Min+Yi&userId=237391d36370&source=post_page-237391d36370--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Febae62734740&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpredicting-happiness-using-random-forest-1e6477affc24&newsletterV3=237391d36370&newsletterV3Id=ebae62734740&user=Chan+Min+Yi&userId=237391d36370&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}