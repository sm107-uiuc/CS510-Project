{"url": "https://towardsdatascience.com/automating-portfolio-optimization-using-python-9f344b9380b9", "time": 1683008753.029699, "path": "towardsdatascience.com/automating-portfolio-optimization-using-python-9f344b9380b9/", "webpage": {"metadata": {"title": "Automating Portfolio Optimization and Allocation using Python | by Sanket Karve | Towards Data Science", "h1": "Automating Portfolio Optimization and Allocation using Python", "description": "Use Python to automate optimization of portfolio using Modern Portfolio Theory. The article will discuss computation of portfolios with maximum Sharpe ratios and minimum volatility"}, "outgoing_paragraph_urls": [], "all_paragraphs": ["Modern Portfolio Theory (MPT) or mean-variance analysis is a mathematical model/study for developing and creating a portfolio which aims to maximize the return for a given amount of risk. The math is largely based on the assumption and experience that an average human prefers a less risky portfolio. The risk mitigation can be done by either investing in traditional safe havens or by diversification \u2014 a cause championed by the MPT.", "The theory was introduced by Henry Markowitz in the 1950s, for which he was awarded the Nobel prize. While the MPT has had its fair share of criticisms, partly due to its backward looking tendencies and inabilities to factor in force majeures/trends in business and economy, I find the tool valuable to gauge the risk of one\u2019s portfolio holdings by measuring the volatility as a proxy.", "I will be using Python to automate the optimization of the portfolio. The concepts of the theory are mentioned below in brief:-", "The expected return of a portfolio is calculated by multiplying the weight of the asset by its return and summing the values of all the assets together. To introduce a forward looking estimate, probability may be introduced to generate and incorporate features in business and economy.", "Portfolio variance is used as the measure of risk in this model. A higher variance will indicate a higher risk for the asset class and the portfolio. The formula is expressed as", "The Sharpe ratio measures the return of an investment in relation to the risk-free rate (Treasury rate) and its risk profile. In general, a higher value for the Sharpe ratio indicates a better and more lucrative investment. Thus if comparing two portfolio\u2019s with similar risk profiles, given all else equal it would be better to invest in the portfolio with a higher Sharpe Ratio.", "This plot measure risk vs returns and is used to select the most optimum portfolio to invest into after considering the risk profile and the characteristics of the investor. The efficient frontier is essential the part of the curve in the first and second quadrants depending on the objective and investor ability/characteristics.", "The Capital Allocation Line (CAL) is essentially a tangent to the efficient frontier. The point of intersection between the tangent and the frontier is considered to be the optimal investment which has maximum returns for a given risk profile, under normal conditions", "We will first import all the relevant libraries to help make our life easier as we progress.", "Additionally, a critical library is the PyPortfolioOpt which contains functions to help us with the optimization of the portfolio. We will install the library with the following commands", "Import the functions which will be required further on -", "2. Scrapping Stock and Financial Data from the Web", "We will pull data from Yahoo! Finance for various stock tickers. The tickers I have used are Boston Scientific, Berkshire Hathway, Invesco Trust, S&P Index Fund, AES Corp., and Sealed Air Corp. The tickers have been chosen to spread the investment across various industries.", "After inputting the tickers, we need to create a blank dataframe which will be used to capture all the prices of the stocks via a loop. For the purpose of this exercise, I have filtered down to capture the Adjusted Close value of the stocks that we are studying.", "Check if any values captured are \u2018NaN\u2019. Of less importance will be zero values. In case, there are NaN values \u2014 good practice will be to either consider a different time series or fill in the data with the average price of D-1, D+1. In case of a large void I would prefer not considering and deleting the time series data rather than inserting a zero value.", "We will move ahead with the calculations for the optimization of the portfolio. Start with capturing the expected return and the variance of the portfolio chosen.", "Proceed by computing and storing the values for a portfolio weight with maximum Sharpe ratio and minimum volatility respectively.", "This will provide you the weight of different holdings. In case you want to minimize \u2018zero\u2019 holding or weight feel free to use L2 regression. Additionally, the weight_bounds have been set from -1 to 1 for allowing computation of \u2018shorting\u2019 stocks. The same exercise will be undertaken for the minimum variance portfolio.", "4. Plotting the Efficient Frontier and Optimizing Portfolio Allocation", "The final step is the plot the efficient frontier for visual purposes, and calculate the asset allocation (i.e. no of shares to purchase or short) for a given dollar amount of a portfolio. For the purpose of this exercise, I have considered $10,000 \u2014 the default starting value on investopedia.", "This will provide you with the optimized portfolio as seen below", "The same can be done for calculating the portfolio with the maximum Sharpe ratio.", "Investing is said to be part art part science. Python and its libraries allow us to automate optimization and save valuable time in the process of doing so. However, it must be noted that these techniques in isolation are unlikely to be the best way to approach investing.", "Moving ahead, I will post about how we can choose stocks to replicate an index fund via machine learning to build our portfolio and many other functions which Python can assist us with. Finally, I have also created a program to calculate potential losses or variations in share prices using monte carlo simulations. This tool may be used in tandem with this portfolio optimizer.", "The information above is in no means expert investment advise or practices and is merely an effort by the me discuss how Python can be used to automate portfolio optimization via the Modern Portfolio Theory (MPT). For the complete source code or for any discussion, feel free to reach out", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F9f344b9380b9&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautomating-portfolio-optimization-using-python-9f344b9380b9&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautomating-portfolio-optimization-using-python-9f344b9380b9&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautomating-portfolio-optimization-using-python-9f344b9380b9&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautomating-portfolio-optimization-using-python-9f344b9380b9&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----9f344b9380b9--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----9f344b9380b9--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://sanketkarve.medium.com/?source=post_page-----9f344b9380b9--------------------------------", "anchor_text": ""}, {"url": "https://sanketkarve.medium.com/?source=post_page-----9f344b9380b9--------------------------------", "anchor_text": "Sanket Karve"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F6ac0f287c66e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautomating-portfolio-optimization-using-python-9f344b9380b9&user=Sanket+Karve&userId=6ac0f287c66e&source=post_page-6ac0f287c66e----9f344b9380b9---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F9f344b9380b9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautomating-portfolio-optimization-using-python-9f344b9380b9&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F9f344b9380b9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautomating-portfolio-optimization-using-python-9f344b9380b9&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@nick604?utm_source=medium&utm_medium=referral", "anchor_text": "Nick Chong"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://towardsdatascience.com/var-calculation-using-monte-carlo-simulations-40b2bb417a67", "anchor_text": "VaR Calculation Using Monte Carlo SimulationsAutomating calculations of Value at Risk (VaR) to manage portfolio risk, equity and stocks in Python using Monte\u2026towardsdatascience.com"}, {"url": "https://medium.com/tag/python?source=post_page-----9f344b9380b9---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/finance?source=post_page-----9f344b9380b9---------------finance-----------------", "anchor_text": "Finance"}, {"url": "https://medium.com/tag/investing?source=post_page-----9f344b9380b9---------------investing-----------------", "anchor_text": "Investing"}, {"url": "https://medium.com/tag/portfolio-optimisation?source=post_page-----9f344b9380b9---------------portfolio_optimisation-----------------", "anchor_text": "Portfolio Optimisation"}, {"url": "https://medium.com/tag/portfolio-management?source=post_page-----9f344b9380b9---------------portfolio_management-----------------", "anchor_text": "Portfolio Management"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F9f344b9380b9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautomating-portfolio-optimization-using-python-9f344b9380b9&user=Sanket+Karve&userId=6ac0f287c66e&source=-----9f344b9380b9---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F9f344b9380b9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautomating-portfolio-optimization-using-python-9f344b9380b9&user=Sanket+Karve&userId=6ac0f287c66e&source=-----9f344b9380b9---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F9f344b9380b9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautomating-portfolio-optimization-using-python-9f344b9380b9&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----9f344b9380b9--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F9f344b9380b9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautomating-portfolio-optimization-using-python-9f344b9380b9&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----9f344b9380b9---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----9f344b9380b9--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----9f344b9380b9--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----9f344b9380b9--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----9f344b9380b9--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----9f344b9380b9--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----9f344b9380b9--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----9f344b9380b9--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----9f344b9380b9--------------------------------", "anchor_text": ""}, {"url": "https://sanketkarve.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://sanketkarve.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Sanket Karve"}, {"url": "https://sanketkarve.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "136 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F6ac0f287c66e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautomating-portfolio-optimization-using-python-9f344b9380b9&user=Sanket+Karve&userId=6ac0f287c66e&source=post_page-6ac0f287c66e--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F458af60b6fa5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautomating-portfolio-optimization-using-python-9f344b9380b9&newsletterV3=6ac0f287c66e&newsletterV3Id=458af60b6fa5&user=Sanket+Karve&userId=6ac0f287c66e&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}