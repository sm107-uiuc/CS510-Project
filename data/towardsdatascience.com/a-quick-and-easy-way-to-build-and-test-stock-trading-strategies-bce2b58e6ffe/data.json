{"url": "https://towardsdatascience.com/a-quick-and-easy-way-to-build-and-test-stock-trading-strategies-bce2b58e6ffe", "time": 1683012634.0779881, "path": "towardsdatascience.com/a-quick-and-easy-way-to-build-and-test-stock-trading-strategies-bce2b58e6ffe/", "webpage": {"metadata": {"title": "A Quick and Easy way to Build and Test Stock Trading Strategies | by Gojo Satoru | Towards Data Science", "h1": "A Quick and Easy way to Build and Test Stock Trading Strategies", "description": "Note from Towards Data Science\u2019s editors: While we allow independent authors to publish articles in accordance with our rules and guidelines, we do not endorse each author\u2019s contribution. You should\u2026"}, "outgoing_paragraph_urls": [{"url": "https://towardsdatascience.com/questions-96667b06af5", "anchor_text": "rules and guidelines", "paragraph_index": 0}, {"url": "https://towardsdatascience.com/readers-terms-b5d780a700a4", "anchor_text": "Reader Terms", "paragraph_index": 0}, {"url": "https://www.backtrader.com/", "anchor_text": "backtrader", "paragraph_index": 2}, {"url": "https://towardsdatascience.com/3-python-concepts-in-under-3-minutes-d7dd33a14550", "anchor_text": "3 Python Concepts in under 3 minutes", "paragraph_index": 3}], "all_paragraphs": ["Note from Towards Data Science\u2019s editors: While we allow independent authors to publish articles in accordance with our rules and guidelines, we do not endorse each author\u2019s contribution. You should not rely on an author\u2019s works without seeking professional advice. See our Reader Terms for details.", "Backtesting is the hallmark of quantitative trading. Backtesting takes historical or synthetic market data and tests the profitability of algorithmic trading strategies. This topic demands expertise in statistics, computer science, mathematics, finance, and economics. This is exactly why in large quantitative trading firms there are specific roles for individuals with immense knowledge (usually at the doctorate level) of the respective subjects. The necessity for expertise cannot be understated as it separates winning (or seemingly winning) trading strategies from losers. My goal for this article is to break up what I consider an elementary backtesting process into a few different sections\u2026", "The main backtesting engine will be built in Python using a library called backtrader. Backtrader makes it incredibly easy to build trading strategies and implement them on historical data immediately. The entire library centers around the Cerebro class. As the name implies, you can think of this as the brain or engine of the backtest.", "I decided to build a function so I can parameterize different aspects of the backtest on the fly (and eventually build a pipeline). The next backtrader class we need to discuss is the Strategy class. If you look at the function I built to house the instance of Cerebro you\u2019ll see that it takes a strategy as an input \u2014 this is expecting a backtrader Strategy class or subclass. Subclasses of the Strategy class are exactly what we will be using to build our own strategies. If you need a polymorphism & inheritance refresher or don\u2019t know what that means see my article 3 Python Concepts in under 3 minutes. Let\u2019s build a strategy for our backtest\u2026", "In the MainStrategy, Strategy subclass above I create fields that we are interested in knowing about before making a trading decision. Assuming a daily data frequency the fields we have access to every step in time during the backstep are\u2026", "It doesn\u2019t take a genius to understand that you cannot use the high, low, and close to make an initial or intraday trading decision as we don\u2019t have access to that information in realtime. However, it is useful if you want to store it and access that information from previous days.", "The big question in your head right now should be where is the data coming from?", "The answer to that question is in the structure of the backtrader library. Before we run the function housing Cerebro we will add all the strategies we want to backtest, and a data feed \u2014 the rest is all taken care of as the Strategy superclass holds the datas series housing all the market data.", "This makes our lives extremely easy.", "Let\u2019s finish the MainStrategy class by making a simple long-only mean reversion style trading strategy. To access a tick of data we override the next function and add trading logic\u2026", "Every day gets a z-score calculated for it (number of standard deviations from the mean) based on its magnitude we will buy or sell equity. Please note, yes I am using the day\u2019s close to make the decision, but I\u2019m also using the day\u2019s close as an entry price to my trade \u2014 it would be wiser to use the next days open.", "The next step is to add the strategy to our function housing the Cerebro instance\u2026", "In the code above I add the strategy provided to the function to the Cerebro instance. This is beyond the scope of the article but I felt pressed to include it. If the strategy that we are backtesting requires additional data (some AI model) we can provide it in the args parameter and add it to the Strategy subclass.", "Next, we need to find a source of historical or synthetic data.", "I use historical and synthetic market data synonymously as some researchers have found synthetic data indistinguishable (and therefore is more abundant as its generative) from other market data. For the purposes of this example we will be using the YahooFinance data feed provided by backtrader, again making implementation incredibly easy\u2026", "It\u2019s almost ridiculous how easy it is to add a data feed to our backtest. The data object uses backtraders YahooFinanceData class to retrieve data based on the symbol, fromdate, and todate. Afterwards, we simply add that data to the Cerebro instance. The true beauty in backtrader\u2019s architecture comes in realizing that the data is automatically placed within, and iterated through every strategy added to the Cerebro instance.", "There are a variety of metrics used to evaluate the performance of a trading strategy, we\u2019ll cover a few in this section. Again, backtrader makes it extremely easy to add analyzers or performance metrics. First, let\u2019s set an initial cash value for our Cerebro instance\u2026", "There are a variety of metrics we can use to evaluate risk, return, and performance \u2014 let\u2019s look at a few of them\u2026", "As referenced in the show Billions, the amount of return per unit of risk, the Sharpe Ratio. Defined as follows\u2026", "Several downfalls, and assumptions. It\u2019s based on historical performance, assumes normal distributions, and can often be used to incorrectly compare portfolios. However, it\u2019s still a staple to any strategy or portfolio.", "An interesting metric I\u2019ve always enjoyed using as it includes volume of transactions in a given period. Computed by multiplying the SQN by the number of trades and dividing the product by 100. Below is a chart of values across different segments, regions, and sectors.", "Let\u2019s now add these metrics to Cerebro and run the backtest\u2026", "Now, all we have to do is run the code above and we get the performance of our strategy based on the metrics we specified\u2026", "This is less of a section more of a collection of resources that I have for implementing trading strategies. If you want to move forward and implement your strategy in a live market check out these articles\u2026", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fbce2b58e6ffe&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-quick-and-easy-way-to-build-and-test-stock-trading-strategies-bce2b58e6ffe&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-quick-and-easy-way-to-build-and-test-stock-trading-strategies-bce2b58e6ffe&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-quick-and-easy-way-to-build-and-test-stock-trading-strategies-bce2b58e6ffe&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-quick-and-easy-way-to-build-and-test-stock-trading-strategies-bce2b58e6ffe&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----bce2b58e6ffe--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----bce2b58e6ffe--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://infinitevoid.medium.com/?source=post_page-----bce2b58e6ffe--------------------------------", "anchor_text": ""}, {"url": "https://infinitevoid.medium.com/?source=post_page-----bce2b58e6ffe--------------------------------", "anchor_text": "Gojo Satoru"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fba54f7458d02&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-quick-and-easy-way-to-build-and-test-stock-trading-strategies-bce2b58e6ffe&user=Gojo+Satoru&userId=ba54f7458d02&source=post_page-ba54f7458d02----bce2b58e6ffe---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fbce2b58e6ffe&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-quick-and-easy-way-to-build-and-test-stock-trading-strategies-bce2b58e6ffe&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fbce2b58e6ffe&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-quick-and-easy-way-to-build-and-test-stock-trading-strategies-bce2b58e6ffe&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://www.pexels.com/@pixabay?utm_content=attributionCopyText&utm_medium=referral&utm_source=pexels", "anchor_text": "Pixabay"}, {"url": "https://www.pexels.com/photo/sky-space-dark-galaxy-2150/?utm_content=attributionCopyText&utm_medium=referral&utm_source=pexels", "anchor_text": "Pexels"}, {"url": "https://towardsdatascience.com/questions-96667b06af5", "anchor_text": "rules and guidelines"}, {"url": "https://towardsdatascience.com/readers-terms-b5d780a700a4", "anchor_text": "Reader Terms"}, {"url": "https://www.backtrader.com/", "anchor_text": "backtrader"}, {"url": "https://towardsdatascience.com/3-python-concepts-in-under-3-minutes-d7dd33a14550", "anchor_text": "3 Python Concepts in under 3 minutes"}, {"url": "https://www.vantharp.com/trading/june-2019-system-quality-number-report-the-sqn-report-by-van-k-tharp-ph-d/#:~:text=I%20apply%20a%20version%20of,below%20%2D0.7%20is%20very%20weak.", "anchor_text": "VanTharp"}, {"url": "https://towardsdatascience.com/algorithmic-trading-with-python-8fbf1c279e77", "anchor_text": "Algorithmic Trading with Python"}, {"url": "https://medium.com/swlh/build-an-ai-stock-trading-bot-for-free-4a46bec2a18", "anchor_text": "Build an AI Stock Trading Bot for Free"}, {"url": "https://medium.com/swlh/algorithmic-trading-system-development-1a5a200af260", "anchor_text": "Algorithmic Trading System Development"}, {"url": "https://towardsdatascience.com/multithreading-in-python-for-finance-fc1425664e74", "anchor_text": "Multithreading in Python for Finance"}, {"url": "https://medium.com/swlh/build-a-profitable-stock-trading-bot-6ba376cba955", "anchor_text": "How to Build a Profitable Stock Trading Bot"}, {"url": "https://medium.com/swlh/build-a-neural-network-to-manage-a-stock-portfolio-bb13964990bc", "anchor_text": "Build a Neural Network to Manage a Stock Portfolio"}, {"url": "https://medium.com/tag/finance?source=post_page-----bce2b58e6ffe---------------finance-----------------", "anchor_text": "Finance"}, {"url": "https://medium.com/tag/artificial-intelligence?source=post_page-----bce2b58e6ffe---------------artificial_intelligence-----------------", "anchor_text": "Artificial Intelligence"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----bce2b58e6ffe---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/tag/python?source=post_page-----bce2b58e6ffe---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/data-science?source=post_page-----bce2b58e6ffe---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fbce2b58e6ffe&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-quick-and-easy-way-to-build-and-test-stock-trading-strategies-bce2b58e6ffe&user=Gojo+Satoru&userId=ba54f7458d02&source=-----bce2b58e6ffe---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fbce2b58e6ffe&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-quick-and-easy-way-to-build-and-test-stock-trading-strategies-bce2b58e6ffe&user=Gojo+Satoru&userId=ba54f7458d02&source=-----bce2b58e6ffe---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fbce2b58e6ffe&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-quick-and-easy-way-to-build-and-test-stock-trading-strategies-bce2b58e6ffe&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----bce2b58e6ffe--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fbce2b58e6ffe&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-quick-and-easy-way-to-build-and-test-stock-trading-strategies-bce2b58e6ffe&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----bce2b58e6ffe---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----bce2b58e6ffe--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----bce2b58e6ffe--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----bce2b58e6ffe--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----bce2b58e6ffe--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----bce2b58e6ffe--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----bce2b58e6ffe--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----bce2b58e6ffe--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----bce2b58e6ffe--------------------------------", "anchor_text": ""}, {"url": "https://infinitevoid.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://infinitevoid.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Gojo Satoru"}, {"url": "https://infinitevoid.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "3.9K Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fba54f7458d02&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-quick-and-easy-way-to-build-and-test-stock-trading-strategies-bce2b58e6ffe&user=Gojo+Satoru&userId=ba54f7458d02&source=post_page-ba54f7458d02--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F12974241ff14&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-quick-and-easy-way-to-build-and-test-stock-trading-strategies-bce2b58e6ffe&newsletterV3=ba54f7458d02&newsletterV3Id=12974241ff14&user=Gojo+Satoru&userId=ba54f7458d02&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}