{"url": "https://towardsdatascience.com/create-interactive-globe-earthquake-plot-in-python-b0b52b646f27", "time": 1683016944.083943, "path": "towardsdatascience.com/create-interactive-globe-earthquake-plot-in-python-b0b52b646f27/", "webpage": {"metadata": {"title": "Create \u201cInteractive Globe + Earthquake Plot in Python with Plotly | by Ryota Kiuchi | Towards Data Science | Towards Data Science", "h1": "Create Interactive Globe + Earthquake Plot in Python with Plotly", "description": "In this post, I demonstrate to create an interactive 3D-spherical plot like Google Earth using topography data."}, "outgoing_paragraph_urls": [{"url": "https://chart-studio.plotly.com/~empet/14813/heatmap-plot-on-a-spherical-map/#/", "anchor_text": "Plotly Chart Studio: Heatmap plot on a spherical map", "paragraph_index": 4}, {"url": "https://www.noaa.gov/", "anchor_text": "NOAA (National Oceanic and Atmospheric Administration", "paragraph_index": 5}, {"url": "https://www.ngdc.noaa.gov/mgg/global/", "anchor_text": "here", "paragraph_index": 5}, {"url": "https://chart-studio.plotly.com/~empet/14813/heatmap-plot-on-a-spherical-map/#/", "anchor_text": "Plotly Chart Studio: Heatmap plot on a spherical map", "paragraph_index": 9}, {"url": "https://earthquake.usgs.gov/earthquakes/search/", "anchor_text": "the U.S. Geological Survey (USGS) website", "paragraph_index": 21}, {"url": "https://en.wikipedia.org/wiki/Gutenberg%E2%80%93Richter_law#:~:text=In%20seismology%2C%20the%20Gutenberg%E2%80%93Richter,of%20at%20least%20that%20magnitude.&text=are%20constants%2C%20i.e.%20they%20are,values%20of%20N%20and%20M.", "anchor_text": "Gutenberg-Richter law", "paragraph_index": 21}], "all_paragraphs": ["Through creating this interactive plot, you can get the following ideas.- Deeper insights and more realistic application example to use Plotly- Especially, handle with the spherical plot in which Matplotlib poorly handle with- Get familiar with the global data characterized by latitude and longitude through the topography and earthquake data- The most important point is that visualizing earthquake distribution in this post makes you imagine where most of the earthquakes occurred (which is along the plate boundary).", "We need to install Plotly via pip:", "Or if you want to install via Anaconda:", "1. Create the Interactive Globe2. Plot the Global Earthquake Distribution on the Interactive Globe", "1\u20131. Download and import the topography data1\u20132. Convert geographical coordinates (latitude/longitude) into spherical coordinates to plot on the sphere.(Plotly Chart Studio: Heatmap plot on a spherical map)1\u20133. Create the map using Plotly", "The 1 arc-minute global relief model of Earth\u2019s surface (ETOPO1 Global Relief Model) is published by NOAA (National Oceanic and Atmospheric Administration). Download the ETOPO1 data from here.* In here, we use the \u201cETOPO1_Ice_g_gdal.grd\u201d file which is a grid-registered netCDF file of ETOPO1 Ice Surface.", "Firstly, importing the values of latitude, longitude, and topography from the downloaded NetCDF file using the Etopo function.", "Input: longitude (lon_area) and latitude (lat_area) based on the selected area, and resolution.Output: mesh shape longitude (lon), latitude (lat) within the selected area, and topography (topo) based on resolution.* resolution has to be in degree unit and the highest resolution will be 0.0167 degree", "To make the spherical plot using the imported longitude (lon) and latitude (lat) data, we convert these data into the spherical coordinates. The idea is not complicated. Just converting from the orthogonal coordinate to the spherical coordinate using the basic math functional form.", "How to make it in Python? See details described at Plotly Chart Studio: Heatmap plot on a spherical map", "Here we plot the interactive Globe using the data of latitude, longitude described as the spherical coordinated, and topography.", "Firstly, we call the Etopo function defined in Step. 1 to read the array of longitude (lon_topo), latitude (lat_topo), and topography (topo) covering the whole globe. If the resolution is too high, the size of data becomes huge due to the 3-dimensional data. Here we adopt 0.8 degrees as the value of resolution.", "And then, converting to the spherical coordinates using the created function of mapping_map_to_sphere", "We also need to define the color scale of the topography we plot. The color scale in this example is defined as follows:", "We prepare the plot using Plotly as follows:", "To make our plot more brilliant, the axes are removed as follows:", "Figure title (\u20183D spherical topography map\u2019), font (\u2018Courier New\u2019), and its associated settings are described here.", "Note that, black and white are selected as the background and font color, respectively, to make our globe being in the universe:", "Finally, we create the plot and export as an HTML file.Once you create the HTML file, you can check your plot using the Web browser (Google Chrome, Safari, \u2026) in the local environment.", "In the above plot, the topography data was displayed as the color without any three-dimensional shapes. Here we create those shapes by converting xs, ys, and zs. The following code describes how to create and make the figure just like what we did in the previous plot:", "2\u20131. Prepare the earthquake data2\u20132. Prepare plate boundary plot and convert coordinates2\u20133. Plot the earthquake distribution on the interactive globe created above", "In this post, we download the earthquake data from the U.S. Geological Survey (USGS) website. This earthquake catalog data includes the dates, location parameters (longitude, latitude, and depth), magnitudes that describe the size of the earthquake, and so on. You can select the earthquake by filtering these parameters. I would recommend downloading only for larger magnitude events (e.g. M > 5) due to the huge numbers of earthquakes you have to handle (For a given frequency of magnitude 4.0 or larger events there will be 10 times as many magnitude 3.0 or larger quakes and 100 times as many magnitude 2.0 or larger quakes ! \u2014 Gutenberg-Richter law)", "Here we import the earthquake data downloaded above using pandas. And then create NumPy arrays for five parameters we will use (date, longitude, latitude, depth, magnitude). Three location parameters (longitude, latitude, and depth) are used as the x, y, and z, and magnitude is used for the plot size. For the plot color, we create two cases using depth, and Timefrom_RefYears (years since 2000) which is calculated using np.datetime64 and np.timedelta64 function.", "Here we convert earthquake longitude and latitude to the spherical coordinates as described in 1\u20132, and create a color bar used for depth and Timefrom_RefYears. For a color bar, we adopt matplotlib color bar and convert to Plotly format.", "Firstly, we slightly change the location parameters using depth to create a three-dimensional effect for the earthquake plot. Although earthquakes occur under the ground (of course!), we plot the earthquake distribution above the interactive globe to make them visible.", "In this post, we will plot the earthquake distribution on the interactive globe created in Step 1. However, in order to make an earthquake distribution more clear, we also plot this distribution on just a simple plate boundaries map. In this step, we prepare that plate boundary map. This procedure is already clearly explained in these posts:", "Using these new location parameters, we make the three different ways of Plotly function as follows:", "Firstly, we create an inner black sphere to hide inside of the globe:", "Then create the 3D plot using the plate boundary data we prepared at 2.2:", "Thanks for reading this article and hope you enjoy your own plot. I\u2019m happy to get any comments from all of you!", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Data Science / Machine Learning / Ph.D. (Geophysics, Seismology)"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fb0b52b646f27&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreate-interactive-globe-earthquake-plot-in-python-b0b52b646f27&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreate-interactive-globe-earthquake-plot-in-python-b0b52b646f27&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreate-interactive-globe-earthquake-plot-in-python-b0b52b646f27&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreate-interactive-globe-earthquake-plot-in-python-b0b52b646f27&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----b0b52b646f27--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----b0b52b646f27--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://rkiuchir.medium.com/?source=post_page-----b0b52b646f27--------------------------------", "anchor_text": ""}, {"url": "https://rkiuchir.medium.com/?source=post_page-----b0b52b646f27--------------------------------", "anchor_text": "Ryota Kiuchi"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F286ded138c49&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreate-interactive-globe-earthquake-plot-in-python-b0b52b646f27&user=Ryota+Kiuchi&userId=286ded138c49&source=post_page-286ded138c49----b0b52b646f27---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fb0b52b646f27&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreate-interactive-globe-earthquake-plot-in-python-b0b52b646f27&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fb0b52b646f27&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreate-interactive-globe-earthquake-plot-in-python-b0b52b646f27&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://www.google.com/earth/", "anchor_text": "Google Earth"}, {"url": "https://plotly.com/", "anchor_text": "Plotly"}, {"url": "https://rkiuchir.github.io/3DSpherical_Topography.html", "anchor_text": "Enjoy in here!"}, {"url": "https://chart-studio.plotly.com/~empet/14813/heatmap-plot-on-a-spherical-map/#/", "anchor_text": "Plotly Chart Studio: Heatmap plot on a spherical map"}, {"url": "https://www.noaa.gov/", "anchor_text": "NOAA (National Oceanic and Atmospheric Administration"}, {"url": "https://www.ngdc.noaa.gov/mgg/global/", "anchor_text": "here"}, {"url": "https://www.ngdc.noaa.gov/mgg/global/", "anchor_text": "NOAA ETOPO1 Global Relief Model"}, {"url": "https://chart-studio.plotly.com/~empet/14813/heatmap-plot-on-a-spherical-map/#/", "anchor_text": "Plotly Chart Studio: Heatmap plot on a spherical map"}, {"url": "https://rkiuchir.github.io/SphericalTopography.html", "anchor_text": "Demo"}, {"url": "https://rkiuchir.github.io/3DSpherical_Topography.html", "anchor_text": "Demo"}, {"url": "https://earthquake.usgs.gov/earthquakes/search/", "anchor_text": "the U.S. Geological Survey (USGS) website"}, {"url": "https://en.wikipedia.org/wiki/Gutenberg%E2%80%93Richter_law#:~:text=In%20seismology%2C%20the%20Gutenberg%E2%80%93Richter,of%20at%20least%20that%20magnitude.&text=are%20constants%2C%20i.e.%20they%20are,values%20of%20N%20and%20M.", "anchor_text": "Gutenberg-Richter law"}, {"url": "https://earthquake.usgs.gov/earthquakes/search/", "anchor_text": "USGS Search Earthquake Catalog"}, {"url": "https://plot.ly/~Dreamshot/9152", "anchor_text": "https://plot.ly/~Dreamshot/9152"}, {"url": "https://rkiuchir.github.io/SphericalTopography_EQ_depth.html", "anchor_text": "Demo"}, {"url": "https://rkiuchir.github.io/SphericalTopography_EQ_year.html", "anchor_text": "Demo"}, {"url": "https://rkiuchir.github.io/Spherical_EQdist.html", "anchor_text": "Demo"}, {"url": "https://towardsdatascience.com/pandas-cheat-sheet-for-data-preprocessing-cd1bcd607426", "anchor_text": "Pandas Cheat Sheet for Data PreprocessingPractical guide about how to preprocess data with Pandastowardsdatascience.com"}, {"url": "https://rkiuchir.medium.com/20-background-image-in-python-basemap-using-arcgis-api-78c0d12b93be", "anchor_text": "20 Background Image in Python Basemap Using ArcGIS APIHere is the summary of 20 different kinds of maps you can draw using ArcGIS API and Matplotlib Basemap.rkiuchir.medium.com"}, {"url": "https://rkiuchir.github.io/", "anchor_text": "R. Kiuchi - SeismologyEdit descriptionrkiuchir.github.io"}, {"url": "https://medium.com/tag/python?source=post_page-----b0b52b646f27---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/plotly?source=post_page-----b0b52b646f27---------------plotly-----------------", "anchor_text": "Plotly"}, {"url": "https://medium.com/tag/data-visualization?source=post_page-----b0b52b646f27---------------data_visualization-----------------", "anchor_text": "Data Visualization"}, {"url": "https://medium.com/tag/earth?source=post_page-----b0b52b646f27---------------earth-----------------", "anchor_text": "Earth"}, {"url": "https://medium.com/tag/earthquake?source=post_page-----b0b52b646f27---------------earthquake-----------------", "anchor_text": "Earthquake"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fb0b52b646f27&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreate-interactive-globe-earthquake-plot-in-python-b0b52b646f27&user=Ryota+Kiuchi&userId=286ded138c49&source=-----b0b52b646f27---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fb0b52b646f27&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreate-interactive-globe-earthquake-plot-in-python-b0b52b646f27&user=Ryota+Kiuchi&userId=286ded138c49&source=-----b0b52b646f27---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fb0b52b646f27&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreate-interactive-globe-earthquake-plot-in-python-b0b52b646f27&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----b0b52b646f27--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fb0b52b646f27&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreate-interactive-globe-earthquake-plot-in-python-b0b52b646f27&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----b0b52b646f27---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----b0b52b646f27--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----b0b52b646f27--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----b0b52b646f27--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----b0b52b646f27--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----b0b52b646f27--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----b0b52b646f27--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----b0b52b646f27--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----b0b52b646f27--------------------------------", "anchor_text": ""}, {"url": "https://rkiuchir.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://rkiuchir.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Ryota Kiuchi"}, {"url": "https://rkiuchir.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "281 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F286ded138c49&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreate-interactive-globe-earthquake-plot-in-python-b0b52b646f27&user=Ryota+Kiuchi&userId=286ded138c49&source=post_page-286ded138c49--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fc5e50fcae2ba&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreate-interactive-globe-earthquake-plot-in-python-b0b52b646f27&newsletterV3=286ded138c49&newsletterV3Id=c5e50fcae2ba&user=Ryota+Kiuchi&userId=286ded138c49&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}