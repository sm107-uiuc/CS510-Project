{"url": "https://towardsdatascience.com/how-to-do-a-sentiment-analysis-in-realtime-using-the-jupyter-notebook-kafka-and-nltk-4470aa8c3c30", "time": 1683003359.539358, "path": "towardsdatascience.com/how-to-do-a-sentiment-analysis-in-realtime-using-the-jupyter-notebook-kafka-and-nltk-4470aa8c3c30/", "webpage": {"metadata": {"title": "How to do a sentiment analysis in real-time using the Jupyter notebook, Kafka and NLTK | by Bogdan Cojocar | Towards Data Science", "h1": "How to do a sentiment analysis in real-time using the Jupyter notebook, Kafka and NLTK", "description": "In this article, we will discuss how we can use the Jupyter notebook to do sentiment analysis on data coming from a Kafka cluster. In this first step we need to run docker compose to create our kafka\u2026"}, "outgoing_paragraph_urls": [{"url": "https://github.com/BogdanCojocar/medium-articles/tree/master/jupyter_kafka", "anchor_text": "Github", "paragraph_index": 1}], "all_paragraphs": ["In this article, we will discuss how we can use the Jupyter notebook to do sentiment analysis on data coming from a Kafka cluster.", "TL;DR: The whole project code is on Github.", "In this first step we need to run docker compose to create our kafka cluster. This will run a bunch of docker containers that will create various elements of the cluster like zookeeper, brokers, topics, ksql.", "Now very briefly, kafka is a distributed streaming platform capable of handling a large number of messages, that are organised into topics. To be able to process a topic in parallel it has to be split into partitions, and the data from these partitions are stored into separate machines called brokers. And finally, zookeeper is used to manage the resources of the brokers in the clusters. This are the elements from the vanilla version of kafka. The confluent platform adds ksql as a query engine.", "Running docker-compose up in the root of the project will create the cluster. You should see something like the image bellow if everything has run successfully.", "The ksql service will run on port 8088 and the kafka broker will be available on port 9092. We need this information to connect to kafka from jupyter. When you are finished working on the cluster you can stop all the containers by running docker-compose down.", "We are using a few python packages that maybe we have not used before, therefore we need to install them. At the root of the project, we have a requirements.txt file. To install it run the following command in the console:", "To be able to consume data in realtime we first must write some messages into kafka. We will use the confluent_kafka library in python to write a producer:", "We will send some very simple JSON messages { 'data' : value } , where value is a sentence from a predefined list. For each message, we write into the queue we also need to assign a key. We will assign a random one based on the uuid to achieve a good distribution into the cluster. In the end, we also run a flush command to ensure that all the messages are sent.", "Once we run the confluent_kafka_producer we should receive a log telling us that the data has been sent correctly:", "Next, we need to create the ksql client that will help us to run all the commands for this interface:", "We can now create a table that we will use to query the data:", "Similar to our JSON message the table will have just one field called data and the type is varchar which is suitable for our string sentences.", "Once we run the table creation command we can check if everything runs successfully by checking what ksql tables we have available:", "And we should be able to see the one we created:", "We can run SQL queries on kafka now. Let\u2019s get the latest 5 messages from it:", "To be able to work easier with this data, we parse it and store it into a dictionary:", "And finally, we can run our sentiment analysis algorithm on these 5 sentences. As stated before we will use a pre trained vader algorithm from NLTK :", "We treat theTypeError as a signal that we have reached the end of the list for our messages. We can visualise the results:", "Each row represents the result for one sentence, and the sentiment can be either positive, neutral or negative. This is it! We can see how in a few steps we can process and analyse realtime data in the Jupyter notebook in an environment that is easy to use for the data scientists.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Big data consultant. I write about the wonderful world of data."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F4470aa8c3c30&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-do-a-sentiment-analysis-in-realtime-using-the-jupyter-notebook-kafka-and-nltk-4470aa8c3c30&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-do-a-sentiment-analysis-in-realtime-using-the-jupyter-notebook-kafka-and-nltk-4470aa8c3c30&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-do-a-sentiment-analysis-in-realtime-using-the-jupyter-notebook-kafka-and-nltk-4470aa8c3c30&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-do-a-sentiment-analysis-in-realtime-using-the-jupyter-notebook-kafka-and-nltk-4470aa8c3c30&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----4470aa8c3c30--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----4470aa8c3c30--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@bogdan.cojocar?source=post_page-----4470aa8c3c30--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@bogdan.cojocar?source=post_page-----4470aa8c3c30--------------------------------", "anchor_text": "Bogdan Cojocar"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fa5d35fbaadc8&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-do-a-sentiment-analysis-in-realtime-using-the-jupyter-notebook-kafka-and-nltk-4470aa8c3c30&user=Bogdan+Cojocar&userId=a5d35fbaadc8&source=post_page-a5d35fbaadc8----4470aa8c3c30---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F4470aa8c3c30&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-do-a-sentiment-analysis-in-realtime-using-the-jupyter-notebook-kafka-and-nltk-4470aa8c3c30&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F4470aa8c3c30&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-do-a-sentiment-analysis-in-realtime-using-the-jupyter-notebook-kafka-and-nltk-4470aa8c3c30&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "http://comp.social.gatech.edu/papers/icwsm14.vader.hutto.pdf", "anchor_text": "vader"}, {"url": "https://github.com/BogdanCojocar/medium-articles/tree/master/jupyter_kafka", "anchor_text": "Github"}, {"url": "http://localhost:8088'", "anchor_text": "http://localhost:8088'"}, {"url": "https://medium.com/tag/python?source=post_page-----4470aa8c3c30---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/kafka?source=post_page-----4470aa8c3c30---------------kafka-----------------", "anchor_text": "Kafka"}, {"url": "https://medium.com/tag/data-science?source=post_page-----4470aa8c3c30---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/data-engineering?source=post_page-----4470aa8c3c30---------------data_engineering-----------------", "anchor_text": "Data Engineering"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----4470aa8c3c30---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F4470aa8c3c30&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-do-a-sentiment-analysis-in-realtime-using-the-jupyter-notebook-kafka-and-nltk-4470aa8c3c30&user=Bogdan+Cojocar&userId=a5d35fbaadc8&source=-----4470aa8c3c30---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F4470aa8c3c30&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-do-a-sentiment-analysis-in-realtime-using-the-jupyter-notebook-kafka-and-nltk-4470aa8c3c30&user=Bogdan+Cojocar&userId=a5d35fbaadc8&source=-----4470aa8c3c30---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F4470aa8c3c30&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-do-a-sentiment-analysis-in-realtime-using-the-jupyter-notebook-kafka-and-nltk-4470aa8c3c30&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----4470aa8c3c30--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F4470aa8c3c30&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-do-a-sentiment-analysis-in-realtime-using-the-jupyter-notebook-kafka-and-nltk-4470aa8c3c30&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----4470aa8c3c30---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----4470aa8c3c30--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----4470aa8c3c30--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----4470aa8c3c30--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----4470aa8c3c30--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----4470aa8c3c30--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----4470aa8c3c30--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----4470aa8c3c30--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----4470aa8c3c30--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@bogdan.cojocar?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@bogdan.cojocar?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Bogdan Cojocar"}, {"url": "https://medium.com/@bogdan.cojocar/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "566 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fa5d35fbaadc8&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-do-a-sentiment-analysis-in-realtime-using-the-jupyter-notebook-kafka-and-nltk-4470aa8c3c30&user=Bogdan+Cojocar&userId=a5d35fbaadc8&source=post_page-a5d35fbaadc8--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Ffaedcd759ecc&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-do-a-sentiment-analysis-in-realtime-using-the-jupyter-notebook-kafka-and-nltk-4470aa8c3c30&newsletterV3=a5d35fbaadc8&newsletterV3Id=faedcd759ecc&user=Bogdan+Cojocar&userId=a5d35fbaadc8&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}