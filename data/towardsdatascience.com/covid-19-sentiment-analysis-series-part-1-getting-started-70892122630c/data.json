{"url": "https://towardsdatascience.com/covid-19-sentiment-analysis-series-part-1-getting-started-70892122630c", "time": 1683008502.6009011, "path": "towardsdatascience.com/covid-19-sentiment-analysis-series-part-1-getting-started-70892122630c/", "webpage": {"metadata": {"title": "COVID-19 Sentiment Analysis Series, Part 1: Getting Started | by Noah Muluberhan-Berhe | Towards Data Science", "h1": "COVID-19 Sentiment Analysis Series, Part 1: Getting Started", "description": "What I found quite striking about the lockdown is the loss of community that came with meeting friends for a drink, or talking to colleagues around someone\u2019s computer. With that, we lost a sense of\u2026"}, "outgoing_paragraph_urls": [], "all_paragraphs": ["What I found quite striking about the lockdown is the loss of community that came with meeting friends for a drink, or talking to colleagues around someone\u2019s computer.", "With that, we lost a sense of how everyone was doing, a feeling of being heard, and the shared voice that brought society together.", "I wanted to counteract this in some small way by looking to Twitter to understand how Londoners were reacting to events. Who have we warmed to? And what has brought us anger and frustration?", "This will be a 3-part series where we will look at a few ways one could approach this question\u2026", "Part 1: Getting started: how to get your tweets, how to score tweets for sentiment, conducting some high-level correlation analysis.", "Part 2: Hypothesis testing: how to confirm to a high degree of statistical confidence differences in sentiment for organisations, using word-clouds to see what the public really thought of someone!", "Part 3: Modelling: showing step-by-step how to apply Frequentist and Bayesian approaches to modelling the winners and losers of the lockdown, I will also be outlining clearly what each approach offers us in answering this question.", "I attempted to use the Twitter API to retrieve tweets about the virus, however, the Search API restricts historical calls to 7 days, luckily I found a Python Twitter scraper called GetOldTweets3 which helped me round this:", "I found there were stability issues when scraping Twitter, resulting in \u201cHTTP Error 429: Too Many Requests\u201d when I hit Twitter quotas or \u201cHTTP Error 503: Service Temporarily Unavailable\u201d when I lost connection with their server.", "Both errors will cause the data collected to be lost, so try/except is your friend\u2026 in the case of these exceptions, I asked the function to wait 15 minutes before re-trying, and made sure I was printing plenty of progress updates for the user\u2026 including a timer when the function was in time-out\u2026", "Attempt 1 of 3 retrieving 2020\u201305\u201330An error occurred during an HTTP request: HTTP Error 429: Too Many Requests", "At the time of writing, I have collected 550,000 tweets over a 3 month period from Londoners with the search-string \u201ccoronavirus OR covid OR covid-19 OR covid19\u201d, and saved these to my GitHub as daily csv files.", "We want to extract who/what Londoners were tweeting about so we can find the main drivers of sentiment\u2026", "I experimented a little with spaCy\u2019s NLP pipeline:", "First using the Part-of-Speech Tagger to retrieve proper nouns (although it worked well, I found this unsuited to my goal as it retrieved many non-entities).", "Then using the Entity Recognizer to retrieve anything the pre-trained pipeline recognised as a \u2018PERSON\u2019 or an \u2018ORG\u2019.", "Then (out of interest) I used the EntityRuler to over-ride the Entity Recognition with my own custom list (I looked at two: Boris Johnson and the NHS).", "Although the EntityRuler was the most precise it was quite tedious and required manually setting up a rule for each entity, so I opted for the Entity Recognizer:", "I used the VADER (Valence Aware Dictionary and sEntiment Reasoner) Python library specifically because it has been tuned to deal with sentiment expressed on social media. It combines a lexicon approach with a rule-based approach to provide a high level of accuracy when scoring sentiment on social media.", "Their GitHub provides more details from the research paper that gave us VADER, but in summary:", "VADER then goes beyond just looking at the sentiment rating of individual words, the study also looked at the impact of syntax on sentence-level sentiment\u2026", "The code is very simple to implement: initialise the SentimentIntensityAnalyzer() class then apply the polarity_scores() method (which I did inside a map function).This returned an array containing 4 different sentiment measures per tweet: POS, COMPOUND, NEU, NEG.", "3 of the scores (POS/NEU/NEG) quantified what fraction of that tweet contained POS/NEU/NEG words (e.g. POS = no. positive words in tweet/total no. words in tweet).", "I decided, however, to use COMPOUND (or, valence) in the following analyses as it explains succinctly the degree of polarity for BOTH poles: positive and negative. It\u2019s also normalised to between -1 to +1 (+1 most positive, -1 most negative) with respect to the length of that text, enabling use as a comparison measure. Researchers have typically classed a score > 0.05 as positive, and <-0.05 as negative, which I will also be adopting.", "I found a dataset on Kaggle that had collated Public Health England\u2019s statistics on the cases and deaths from Coronavirus. I started to plot this in Matplotlib together with the average daily sentiment observed from the tweets:", "I learned a couple of things from seeing the data like this:", "We can see that broadly, yes.", "For example, sentiment (ie, compound score) vs daily deaths has a negative correlation of -41%. This increases to -50% when you add a 1-day lag to the death toll, suggesting there could have been some delay in people reacting to the previous day\u2019s news.", "After some early instability in the correlation, we were able to see something interesting:", "The correlation was largely negative through March and April i.e. \u201can increase in the no. cases /deaths (more positive) happens in line with a deterioration in overall sentiment (more negative score).\u201d which is also what we saw looking at the sentiment and cases/deaths trends over time.", "The correlation has since turned positive, with sentiment remaining relatively unchanged even as daily death numbers became minimal, suggesting that Londoners have found other reasons now for their ire.", "Having collected our data, we\u2019re now ready to dive deeper and understand Londoners a bit better.", "In the next post, I will be using hypothesis testing (and lots of it!) to verify to a high degree of statistical confidence if there really was a difference in attitude towards different organisations. I will show how to set the tests up, and explain what assumptions we are relying on in each test (and how to test for these).", "We will also see how to visualise people\u2019s REAL opinions in wordcloud form\u2026 e.g. we saw the NHS as \u201ccaring\u201d, \u201csupportive\u201d, \u201cheroic\u201d, \u201cprotective\u201d, \u201chelpful\u201d\u2026 but did we think the same of the government? And what effect did the #ClapforCarers have on this?", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Data Science | Finance | Management Consulting"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F70892122630c&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcovid-19-sentiment-analysis-series-part-1-getting-started-70892122630c&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcovid-19-sentiment-analysis-series-part-1-getting-started-70892122630c&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcovid-19-sentiment-analysis-series-part-1-getting-started-70892122630c&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcovid-19-sentiment-analysis-series-part-1-getting-started-70892122630c&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----70892122630c--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----70892122630c--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@noah.berhe?source=post_page-----70892122630c--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@noah.berhe?source=post_page-----70892122630c--------------------------------", "anchor_text": "Noah Muluberhan-Berhe"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F36db8d98670a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcovid-19-sentiment-analysis-series-part-1-getting-started-70892122630c&user=Noah+Muluberhan-Berhe&userId=36db8d98670a&source=post_page-36db8d98670a----70892122630c---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F70892122630c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcovid-19-sentiment-analysis-series-part-1-getting-started-70892122630c&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F70892122630c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcovid-19-sentiment-analysis-series-part-1-getting-started-70892122630c&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@purzlbaum?utm_source=medium&utm_medium=referral", "anchor_text": "\ud83c\udde8\ud83c\udded Claudio Schwarz | @purzlbaum"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://unsplash.com/@kmitchhodge?utm_source=medium&utm_medium=referral", "anchor_text": "K. Mitch Hodge"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://medium.com/@noah.berhe/covid-19-sentiment-analysis-series-part-2-hypothesis-testing-3db511875165", "anchor_text": "Part 2"}, {"url": "https://medium.com/tag/covid-19?source=post_page-----70892122630c---------------covid_19-----------------", "anchor_text": "Covid-19"}, {"url": "https://medium.com/tag/twitter-sentiment?source=post_page-----70892122630c---------------twitter_sentiment-----------------", "anchor_text": "Twitter Sentiment"}, {"url": "https://medium.com/tag/spacy?source=post_page-----70892122630c---------------spacy-----------------", "anchor_text": "Spacy"}, {"url": "https://medium.com/tag/vader?source=post_page-----70892122630c---------------vader-----------------", "anchor_text": "Vader"}, {"url": "https://medium.com/tag/correlation?source=post_page-----70892122630c---------------correlation-----------------", "anchor_text": "Correlation"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F70892122630c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcovid-19-sentiment-analysis-series-part-1-getting-started-70892122630c&user=Noah+Muluberhan-Berhe&userId=36db8d98670a&source=-----70892122630c---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F70892122630c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcovid-19-sentiment-analysis-series-part-1-getting-started-70892122630c&user=Noah+Muluberhan-Berhe&userId=36db8d98670a&source=-----70892122630c---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F70892122630c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcovid-19-sentiment-analysis-series-part-1-getting-started-70892122630c&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----70892122630c--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F70892122630c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcovid-19-sentiment-analysis-series-part-1-getting-started-70892122630c&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----70892122630c---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----70892122630c--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----70892122630c--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----70892122630c--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----70892122630c--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----70892122630c--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----70892122630c--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----70892122630c--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----70892122630c--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@noah.berhe?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@noah.berhe?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Noah Muluberhan-Berhe"}, {"url": "https://medium.com/@noah.berhe/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "33 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F36db8d98670a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcovid-19-sentiment-analysis-series-part-1-getting-started-70892122630c&user=Noah+Muluberhan-Berhe&userId=36db8d98670a&source=post_page-36db8d98670a--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Ff406dbc34969&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcovid-19-sentiment-analysis-series-part-1-getting-started-70892122630c&newsletterV3=36db8d98670a&newsletterV3Id=f406dbc34969&user=Noah+Muluberhan-Berhe&userId=36db8d98670a&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}