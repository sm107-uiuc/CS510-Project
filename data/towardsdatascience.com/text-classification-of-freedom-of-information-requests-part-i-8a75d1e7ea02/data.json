{"url": "https://towardsdatascience.com/text-classification-of-freedom-of-information-requests-part-i-8a75d1e7ea02", "time": 1682994995.818586, "path": "towardsdatascience.com/text-classification-of-freedom-of-information-requests-part-i-8a75d1e7ea02/", "webpage": {"metadata": {"title": "Text Classification of Freedom of Information Requests: Part I | by Scott Jones | Towards Data Science", "h1": "Text Classification of Freedom of Information Requests: Part I", "description": "The province of Ontario, Canada is obligated to respond to requests for information under the Freedom of Information and Protection of Privacy Act (FIPPA). More specifically, the Municipal Freedom of\u2026"}, "outgoing_paragraph_urls": [{"url": "https://chairnerd.seatgeek.com/fuzzywuzzy-fuzzy-string-matching-in-python/", "anchor_text": "fuzzywuzzy", "paragraph_index": 5}, {"url": "https://towardsdatascience.com/multi-class-text-classification-with-scikit-learn-12f1e60e0a9f", "anchor_text": "excellent article on multi-class text classification", "paragraph_index": 17}, {"url": "https://towardsdatascience.com/text-classification-of-freedom-of-information-requests-part-ii-4d57b080d179", "anchor_text": "follow-up article", "paragraph_index": 23}], "all_paragraphs": ["The province of Ontario, Canada is obligated to respond to requests for information under the Freedom of Information and Protection of Privacy Act (FIPPA). More specifically, the Municipal Freedom of Information and Protection of Privacy Act (MFIPPA) allows persons of any age, from any location, to issue such a request. The information, as is relevant to the individual, may include print, film, emails, drawings, photographs, etc. provided that the released content does not infringe upon another individual\u2019s access to privacy. In this post, we will attempt to predict the decision rendered by a municipality, namely Kitchener-Waterloo, Ontario (Part I) and later Toronto (Part II).", "The data used is made available under the open data portal of each city. Any identifying information has been previously removed.", "Using the limited Kitchener-Waterloo data set will allow us to baseline some of our metrics and prototype our techniques. These data are made available via an API and cover the years 1992\u20132016.", "Once it is all aggregated and converted to a Pandas dataframe, we need to take a closer look at what we have. Among the possible \u201cdecisions\u201d are the following:", "All disclosed 238Partly exempted 197Withdrawn 116No records exist 54Information disclosed in part 50Partly non-existent 32Nothing disclosed 28No record exists 21All Information disclosed 16Forwarded out 15Abandoned 13All information disclosed 13No responsive records exist 11Correction refused 3Non-existent 3Correction made 2Transferred to Region of Waterloo Public Health 2All disclosed 2Transferred 1No information disclosed 1Statement of disagreement filed 1No additional records exist 1Correction granted 1Request withdrawn 1", "There is clearly some overlap here among the possible decisions, of which there are 24. While these could (and have been) be merged manually in not too much time, what if there were hundreds of such classes, differing only in the presence (or absence) of a space? Or an \u2018s\u2019? Or in the manner of capitalization? The python package fuzzywuzzy, developed by SeatGeek, is perfect for this type of fuzzy string matching.", "The package offers four ways to probe the likeness of two strings. Essentially, \u2018fuzz_ratio\u2019 compares entire strings, \u2018fuzz_partial_ratio\u2019 searches the strings for partial matches, \u2018fuzz_token_sort_ratio\u2019 compares out-of-order strings, and \u2018fuzz_token_set_ratio\u2019 extends token sort for longer strings. Each returns a similarity ratio (the higher the more alike), whereafter a threshold can be set at an acceptable cutoff. Let\u2019s test the performance of each.", "All disclosed 240Partly exempted 197Withdrawn 116No records exist 75Information disclosed in part 50Partly non-existent 32No information disclosed 30Nothing disclosed 28Forwarded out 15Abandoned 13No responsive records exist 11Non-existent 3Correction refused 3Correction made 2Transferred to Region of Waterloo Public Health 2Statement of disagreement filed 1No additional records exist 1Transferred 1Correction granted 1Request withdrawn 1Name: Decision, dtype: int6420", "Not bad. We have merged four classes (i.e. \u2018No records exist\u2019 and \u2018No record exists\u2019) but things like \u2018No information disclosed\u2019 and \u2018Nothing disclosed\u2019 clearly mean the same. The 80% cutoff has been decided by trail-and-error. Let\u2019s try a partial ratio:", "All disclosed 240Partly exempted 197Request withdrawn 117No responsive records exist 87No information disclosed 80Non-existent 35Nothing disclosed 28Forwarded out 15Abandoned 13Correction refused 3Transferred 3Correction made 2Statement of disagreement filed 1Correction granted 1Name: Decision, dtype: int6414", "Another six classes merged, but the algorithm doesn\u2019t really know what to do with the substring \u2018disclosed\u2019. It has combined \u2018Information disclosed in part\u2019 with \u2018No information disclosed\u2019 which do not mean the same thing.", "All disclosed 240Partly exempted 197Withdrawn 116No information disclosed 80No records exist 75Partly non-existent 32Nothing disclosed 28Forwarded out 15Abandoned 13No responsive records exist 11Correction refused 3Non-existent 3Correction made 2Transferred to Region of Waterloo Public Health 2Transferred 1No additional records exist 1Statement of disagreement filed 1Correction granted 1Request withdrawn 1Name: Decision, dtype: int6419", "Similar to the basic ratio case.", "No information disclosed 348Partly exempted 197Request withdrawn 117No responsive records exist 87Non-existent 35Forwarded out 15Abandoned 13Correction refused 3Transferred 3Correction made 2Statement of disagreement filed 1Correction granted 1Name: Decision, dtype: int6412", "The most aggressive matching case yet, but again we are tripped up on \u2018disclosed\u2019 as now we no longer have the case \u2018All disclosed\u2019, which is unacceptable. The partial ratio case seems to be a compromise \u2014 perhaps we can further merge a couple of categories manually. We will see what happens when the Toronto data is added in Part II.", "All disclosed 240Partly exempted 197Request withdrawn 130No responsive records exist 122Nothing disclosed 108Forwarded out 18Correction made 3Correction refused 3Statement of disagreement filed 1Name: Decision, dtype: int64", "Everything looks distinct now. Let\u2019s cut off the classes where there is a big drop-off in numbers:", "The remainder of this article will borrow heavily from Susan Li\u2019s excellent article on multi-class text classification. The expectation is that based on the smaller size of our dataset and the fact that the text itself is fairly opaque, our results will not be very good. A quick overview of our data:", "The classes are not as unbalanced as we might have thought. The \u2018category_id\u2019 column is an integer representation of the possible decision cases. Now, calculate a tf-idf vector for each request, removing all stop words.", "Print the common bigrams and unigrams for each class.", "# \u2018All disclosed \u2018: . Most correlated unigrams:. assistance.personal . Most correlated bigrams:. information removed.removed competition# \u2018No responsive records exist\u2019: . Most correlated unigrams:. site.phase . Most correlated bigrams:. assessment address.site assessment# \u2018Nothing disclosed\u2019: . Most correlated unigrams:. bus.2014 . Most correlated bigrams:. complete ontario.works file# \u2018Partly exempted\u2019: . Most correlated unigrams:. competition.94 . Most correlated bigrams:. information competition.rabies control# \u2018Request withdrawn\u2019: . Most correlated unigrams:. provincial.evaluation . Most correlated bigrams:. treatment plant.provincial offences", "This is what was meant when I said the requests themselves were fairly opaque in terms of being able to classify by eye. At least there appears to be good separation between the classes.", "As expected the performance is exceptionally poor. Let\u2019s look at the confusion matrix.", "Well, the model is at least trying. In the follow-up article we\u2019ll attempt to improve this both by significantly adding to the available data and by trying a series of binary classifiers on each class.", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F8a75d1e7ea02&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftext-classification-of-freedom-of-information-requests-part-i-8a75d1e7ea02&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftext-classification-of-freedom-of-information-requests-part-i-8a75d1e7ea02&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftext-classification-of-freedom-of-information-requests-part-i-8a75d1e7ea02&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftext-classification-of-freedom-of-information-requests-part-i-8a75d1e7ea02&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----8a75d1e7ea02--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----8a75d1e7ea02--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@scottcurtisjones?source=post_page-----8a75d1e7ea02--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@scottcurtisjones?source=post_page-----8a75d1e7ea02--------------------------------", "anchor_text": "Scott Jones"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F7ec43ca7275c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftext-classification-of-freedom-of-information-requests-part-i-8a75d1e7ea02&user=Scott+Jones&userId=7ec43ca7275c&source=post_page-7ec43ca7275c----8a75d1e7ea02---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F8a75d1e7ea02&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftext-classification-of-freedom-of-information-requests-part-i-8a75d1e7ea02&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F8a75d1e7ea02&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftext-classification-of-freedom-of-information-requests-part-i-8a75d1e7ea02&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://chairnerd.seatgeek.com/fuzzywuzzy-fuzzy-string-matching-in-python/", "anchor_text": "fuzzywuzzy"}, {"url": "https://towardsdatascience.com/multi-class-text-classification-with-scikit-learn-12f1e60e0a9f", "anchor_text": "excellent article on multi-class text classification"}, {"url": "https://towardsdatascience.com/text-classification-of-freedom-of-information-requests-part-ii-4d57b080d179", "anchor_text": "follow-up article"}, {"url": "https://github.com/scjones5/foi-kw", "anchor_text": "https://github.com/scjones5/foi-kw"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----8a75d1e7ea02---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/tag/multi-classifications?source=post_page-----8a75d1e7ea02---------------multi_classifications-----------------", "anchor_text": "Multi Classifications"}, {"url": "https://medium.com/tag/nlp?source=post_page-----8a75d1e7ea02---------------nlp-----------------", "anchor_text": "NLP"}, {"url": "https://medium.com/tag/fuzz?source=post_page-----8a75d1e7ea02---------------fuzz-----------------", "anchor_text": "Fuzz"}, {"url": "https://medium.com/tag/information-technology?source=post_page-----8a75d1e7ea02---------------information_technology-----------------", "anchor_text": "Information Technology"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F8a75d1e7ea02&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftext-classification-of-freedom-of-information-requests-part-i-8a75d1e7ea02&user=Scott+Jones&userId=7ec43ca7275c&source=-----8a75d1e7ea02---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F8a75d1e7ea02&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftext-classification-of-freedom-of-information-requests-part-i-8a75d1e7ea02&user=Scott+Jones&userId=7ec43ca7275c&source=-----8a75d1e7ea02---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F8a75d1e7ea02&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftext-classification-of-freedom-of-information-requests-part-i-8a75d1e7ea02&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----8a75d1e7ea02--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F8a75d1e7ea02&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftext-classification-of-freedom-of-information-requests-part-i-8a75d1e7ea02&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----8a75d1e7ea02---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----8a75d1e7ea02--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----8a75d1e7ea02--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----8a75d1e7ea02--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----8a75d1e7ea02--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----8a75d1e7ea02--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----8a75d1e7ea02--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----8a75d1e7ea02--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----8a75d1e7ea02--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@scottcurtisjones?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@scottcurtisjones?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Scott Jones"}, {"url": "https://medium.com/@scottcurtisjones/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "29 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F7ec43ca7275c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftext-classification-of-freedom-of-information-requests-part-i-8a75d1e7ea02&user=Scott+Jones&userId=7ec43ca7275c&source=post_page-7ec43ca7275c--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fusers%2F7ec43ca7275c%2Flazily-enable-writer-subscription&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftext-classification-of-freedom-of-information-requests-part-i-8a75d1e7ea02&user=Scott+Jones&userId=7ec43ca7275c&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}