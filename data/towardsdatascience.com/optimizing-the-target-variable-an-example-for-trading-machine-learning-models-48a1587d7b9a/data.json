{"url": "https://towardsdatascience.com/optimizing-the-target-variable-an-example-for-trading-machine-learning-models-48a1587d7b9a", "time": 1683009208.1109009, "path": "towardsdatascience.com/optimizing-the-target-variable-an-example-for-trading-machine-learning-models-48a1587d7b9a/", "webpage": {"metadata": {"title": "Optimizing the\u2026 Target Variable (?) An Example for Trading Machine Learning Models | by Mauricio Letelier | Towards Data Science", "h1": "Optimizing the\u2026 Target Variable (?) An Example for Trading Machine Learning Models", "description": "Yup, you read correctly, Optimizing the Target Variable. You might be thinking, \u201cbut, that\u2019s like cheating\u201d or \u201ccan you change the past?\u201d. Stop worrying! I\u2019m neither a liar nor a time traveler who\u2026"}, "outgoing_paragraph_urls": [{"url": "https://www.kaggle.com/c/titanic", "anchor_text": "Titanic", "paragraph_index": 1}, {"url": "https://www.kaggle.com/c/digit-recognizer", "anchor_text": "MNIST", "paragraph_index": 1}, {"url": "https://www.youtube.com/watch?v=pWgdh-m6EzU", "anchor_text": "this", "paragraph_index": 7}, {"url": "https://www.youtube.com/watch?v=zEG_xUcGHwg", "anchor_text": "here", "paragraph_index": 7}, {"url": "https://www.investopedia.com/terms/t/take-profitorder.asp", "anchor_text": "T/P,", "paragraph_index": 19}, {"url": "https://www.investopedia.com/terms/s/stop-lossorder.asp", "anchor_text": "S/L", "paragraph_index": 19}, {"url": "https://en.wikipedia.org/wiki/Expected_return", "anchor_text": "here", "paragraph_index": 29}, {"url": "https://www.investopedia.com/terms/l/long.asp", "anchor_text": "long positions", "paragraph_index": 31}, {"url": "https://towardsdatascience.com/probabilistic-machine-learning-approach-to-trading-macd-business-understanding-6b81f465aef6", "anchor_text": "here", "paragraph_index": 33}, {"url": "https://www.binance.com/en/support/articles/115000583311", "anchor_text": "BNB the fees", "paragraph_index": 35}, {"url": "https://quoteinvestigator.com/2014/05/22/solve/", "anchor_text": "problem-solving process", "paragraph_index": 44}, {"url": "https://quoteinvestigator.com/2014/03/29/sharp-axe/", "anchor_text": "axe", "paragraph_index": 44}, {"url": "https://github.com/MauricioLetelier/Optimizing-the-target-variable", "anchor_text": "repo", "paragraph_index": 71}, {"url": "https://medium.com/@maletelier", "anchor_text": "Medium", "paragraph_index": 102}, {"url": "http://www.linkedin.com/in/maletelier", "anchor_text": "Linkedin", "paragraph_index": 102}, {"url": "https://twitter.com/maletelier", "anchor_text": "Twitter", "paragraph_index": 102}, {"url": "https://towardsdatascience.com/questions-96667b06af5", "anchor_text": "rules and guidelines", "paragraph_index": 103}, {"url": "https://towardsdatascience.com/readers-terms-b5d780a700a4", "anchor_text": "Reader Terms", "paragraph_index": 103}, {"url": "https://www.linkedin.com/in/maletelier", "anchor_text": "https://www.linkedin.com/in/maletelier", "paragraph_index": 105}], "all_paragraphs": ["Yup, you read correctly, Optimizing the Target Variable. You might be thinking, \u201cbut, that\u2019s like cheating\u201d or \u201ccan you change the past?\u201d. Stop worrying! I\u2019m neither a liar nor a time traveler who attempts to change the past just to improve his machine learning models (There are plenty of more exciting things to do with that power).", "If you went for your first dataset, learning about Titanic, where you tried everything to predict if the passenger survived, or the MNIST database, where there were numbers that even you couldn\u2019t recognize, you might be a little confused. \u201cCan this guy optimize if a passenger survived\u201d or \u201cIs he choosing that a nine is a four to improve their accuracy.\u201d", "The obvious answer is no. But as you will see, there are times where the target variable is not a fact (maybe a fact, but not a fact-fact). So today, we are going to talk about our favorite friend when it\u2019s about supervised learning!", "I want to present to you this issue comparing it to a dart competition (can you think a better example if we are talking about targets?). The typical professional competition is divided in legs, in which of them the players attempt to reach the 501 points EXACTLY with the condition that in the last throw, the dart has to go into a \u201cdouble,\u201d which means that, reaching any zone on the outer ring or the \u201cbull\u201d (50), will end the leg. Every player has three darts per turn.", "Looking at the numbers, it might look evident that every player will try to score the biggest possible number on their first turns. And in the actual competitions happens like that: they began mainly aiming at 60.", "The interesting part shows up when they have to finish the game. Visualize a final turn where you have 441 points (60 to go). You must hit a \u201cdouble,\u201d so aiming the 60 isn\u2019t a possibility. After thinking a little bit, you throw praying for a 50, and miraculously you get it!.", "You now have 10 points to go, so you can throw directly to the outer 10 points zone to close the game. You throw, and you weren\u2019t even close, you hit an 8. In your last chance, you aim to the outer 2 zone. All the stadium is waiting, your opponent is swallowing his saliva, and you had a final thought \u201cwhen I became a dart pro?\u201d, but you forget that for a second, take a deep breath, and finally throw\u2026 The outcome? You made it! The leg is for you.", "There are hundreds of combinations to score 60, so after every throw, you must be flexible and check where you are standing at (while doing this I saw great matches, first is this and the revenge here, thank me later). Incredible, you can show off with your friends about your dart knowledge, but what can we take from that?", "Well, what happens in real-life problems is the same as that occurs with darts: your goal is to win the game, but you can throw to different zones to achieve that goal! The dartboard is static, but your target might be continuously changing!.", "Ok, but how are you going to connect that with a real problem?. Don\u2019t get impatient, let me give you some context first.", "When you want to train a machine learning model for trading, there are countless ways of doing it. You can train auto-regressive models and follow the predicted movement. Also, you can create explanatory variables to predict a positive or negative target defining signals in strategic points, and If talking about that was the goal of this article, I think we could discuss your ideas for hours.", "Our goal is related to the title, so, I will not elaborate much on that, because defining a way to confront this problem is a world on its own. Instead, I will give you a quick overview of a specific possible approach. If you feel that you want more about that, I recommend you to start by the following:", "It\u2019s a good first step also if, after reading what\u2019s coming, you feel overwhelmed by some concepts and want to understand them clearly. It also has some important details about the construction of the model. Technical aspects will be tackled superficially here. But, don\u2019t worry, if you are more interested in the idea of optimizing the target variable, I prepared a gentle introduction for you.", "The fact that we will be using stock prices to elaborate on all the ideas doesn\u2019t mean that you need to know anything about trading to stay here. The trading problem will be just a tool!.", "Also, we will be making big efforts in the problem formulation and in the outcome interpretation of our models to connect them with business value, this goes beyond than just struggling for accuracy!", "So stay here! It will totally worth it, and because I belong to the square-type person, let\u2019s start with the schedule!", "Thinking about the trading problem, imagine that we have some explanatory variables, all of them created based on the stock volume and price. We also develop a method that determines what happens first: an I% increase or a D% decrease in the next N periods.", "Our goal will be to predict which of the two outcomes is more likely to happen based on our variables (Supervised learning!). That can be seen as a binary classification problem. We tag with 1s when the first close price reached is the increase, and with 0s otherwise. We are all set!", "Wait\u2026 Are we? But, what about the I% and D%? How do we choose those numbers? Finally, the questions that we needed to start!", "As you can see, our target will be different depending on which numbers we choose to determine failure or success. If we first reach the I%, we will call it our T/P, otherwise, we will call it S/L.", "For a better understanding of this, I prepared for you a simple graphic representation. Let\u2019s analyze this with the stock price of our future company, \u201cProbabilistic ML Trading Inc.\u201d The value of 1 stock will be 100 USD$ on the first day, and in the following 12 days, the values will be 96, 110, 104, 91, 84, 93, 107, 118, 111, 101, 91, 80 respectively.", "In the chart below, there will be four cases, and everyone will represent the same stock prices. You will see the T/P and S/L points as green and red horizontal lines. Every scatters color will be an increase-decrease (I-D) combination. The order will be as follow:", "Despite the final crash of our company, it\u2019s a great visualization to understand what\u2019s happening.", "As you can see, we reach our final point when the price is out of the predefined lines. The target variable was the same on the first and on the third case. But for the second and the fourth, it was precisely the opposite. A model trained based on the same variables could think that the price will go up, while the other can be sure that it is going down. Interesting huh!.", "That\u2019s what I meant when I told you that our target variable is a fact but not a fact-fact. It\u2019s a fact because we can\u2019t change the close price \u2014 for our darts example we can\u2019t change the dartboard \u2014 , nevertheless, it\u2019s not a fact-fact, because depending on the condition that we set for the outcome, our target could be different \u2014 We might be aiming for a \u201cdouble\u201d \u2014 .", "I\u2019m sure that this can be applied on different types of problems, so if you start thinking about your target variable, not as a static building and more about a Lego figure, I\u2019m sure that you can gain a lot of value for yourself and your company!.", "As a quick example, let\u2019s think about the churn problem when you define when a customer is about to leave. There are decisions to be taken. Visualize a monthly subscription, when you are designing the problem, you must choose when the customer is going away. What if instead of defining that he is \u201cchurning\u201d the next month, you choose two or three?", "That could lead you to different models! Imagine that the retention strategy has better results when the customers are not ABOUT to churn, but when they are just THINKING about it. Maybe using a more extensive period will result in higher retention rates! Independent of the model, your business goal could have a much better outcome. So we need to define our metrics based on business attributes of the problem.", "This 1.1 section, was just for you to look another example of the applications of this idea, but I know that you still feel a little curious about how we will test these concepts on our trading real problem, so stay with me! I didn\u2019t make this ridiculously hard effort on this first part, to lose my sight of the core content. In fact, this introduction it\u2019s just a tool to motivate you to read what\u2019s coming.", "Ok, why is this an opportunity? To explain this, it\u2019s crucial for us to (re)visit the concept of expected return. To keep it short, it\u2019s just the sum of the product between the return of a scenario and its probability (here for further details).", "Our goal is to maximize the expected return, besides of the accuracy of the model, you should also think about the formulation that will address the most value.", "In the particular trading problem, we need to relate the I% and the D% to that expression. To make a simple start, let\u2019s imagine that we will not even train a model. We want to go into the market randomly. We will choose different combinations of I% and D%, and I will show you in the charts and equations what\u2019s happening. Also, let\u2019s say that we will just be holding long positions.", "Technical Note: The data for our work today will be retrieved from Binance, selecting the last 550 days of the ETH-USDT pair, on a 5-minute interval. There are 157.912 data points.", "We will use N=200, which on a 5-minute interval, it\u2019s something like 17 hours for the outcomes. If the price never crosses the barrier, will be marked as \u2018No Outcome\u2019. The code for data gathering from Binance was explained in greater detail here.", "Let\u2019s check out how to retrieve the data with the important features.", "In this case, we will assume that if we have \u2018no outcome,\u2019 we will lose just the fees (if you activate your Binance profile, you get 0.075% for takers and 0.075% for makers paying with BNB the fees). We will buy 100 USDT of ETH every time. Here is the method which defines the outcome.", "Forward you will see that we will train different models, so the code is created with that on the mind. The matrix has on it every combination. This is the way that we will save every scenario:", "To begin we will see two different cases (I=3%, D=-1.5%) and (I=1.5%, D=-1.5%). What can we expect from these two? If your first thought was that we could anticipate a lot more \u201cdecrease\u201d and \u201cno outcome\u201d cases on the first one, we might be starting to understand each other!. Let\u2019s compare them!.", "This happens because the higher the value for D% is more difficult for the price to reach that point.", "But, what is the expected return for them? Well, I leave you here the generalized formula (0.), and then the calculation for both cases. The value will be assuming 100 entries of 100 USDT each one (if you want just the expected return for a single instance, just divide the expected return by 100).", "Ok, the formulas could have been annoying, but they are an excellent basis to start building what we are going to do. I didn\u2019t do this just with two cases. In fact, I made a grid for every combination in \u201cmatrix\u201d.", "Because I know that you are waiting to SEE something, I created this 3d scatterplot, the y-axis is the positive outcome barrier, x-axis the negative one, and the z-axis will represent the expected return of one entry.", "As you can see, we can\u2019t beat the market with random entries. But, by choosing near the [2,-0.3] zone, we get values close to 0, despite the fees and the randomness!. So depending on the combination of I% and D%, we might be in a better or worse position to go into the market, just by defining our target variable thoughtfully.", "But as you know, we need to train a model, so the procedure isn\u2019t as direct as this was. But that\u2019s a matter of the next section, the mission of this one, was only to introduce to you how different combinations of our target variable can affect our expected return depending on its behavior.", "Thinking about a proposed solution, we need a little pause to give the opportunity for our creativity to flourish. Also, we won\u2019t be coding a single line in this section. I wanted to use the clich\u00e9 quote of Einstein about the problem-solving process, or the Abraham Lincoln one about the axe. But as you will see in the embedded words, there is no evidence that they even said them. Anyway\u2026 I know that you get the\u00a0point.", "The first thing on our roadmap should be: what actually represents a higher or lower I% or D%?. Did you notice that in our scenarios chart, a higher value of them resulted in a higher probability of waiting longer times? Well, let\u2019s elaborate on why that\u2019s happening.", "The first reason seems obvious: given that the increases or decreases are not that high for a particular time period, we need to wait for more periods to reach the value. If we have a trend, the value needs it\u2019s time to advance at their own pace.", "So we can notice is that there has to be some proportionality between the data granularity (time interval) and the expected I% or D%. If we want to predict the value of the stock in the next year doesn\u2019t make any sense to look at the last 8 hours. Because of that, we should look in a plausible neighborhood for those values.", "The second reason it\u2019s more important though: imagine that we buy just before an uptrend and we first wanted a 5% increase, after some hours of the price trespassing that threshold. We think \u201cWhy we have to leave now?\u2026 is going up\u201d. Well, we wait a little bit, and we see that the price started going down. There can be reversals! We can mislead our model!", "Why is a reversal so significant? Because when we went in, the signals said that the market was going up and, indeed, happened! But when there is a reversal, the signs might be telling precisely the opposite. The signals that we saw were valid only until a certain point! So if a have a signal on the period T, that signal will start losing value every second!.", "This is exactly the same when the value of the I% or D% is too little: a slight perturbation on the price could have an outcome in the opposite direction that the signals were telling because we defined a super short space for the stock to move.", "So, what\u2019s the main takeaway from this? The signals have a threshold on the I% and D% where they are not related anymore to that outcome resulting in models showing more randomness than they should.", "Ok, now that we have some principles, we can start thinking about a solution. How can we select our D% and I%? For this, we should think again about what\u2019s our goal: maximize the expected return! I won\u2019t stop repeating it! But how do we do that, we can\u2019t construct a formula and optimize based on an objective function checking out the constraints, because we need to train the model first.", "To continue, we need to define some things about this specific case.We will assume that we have all the feature engineering process done and choose to train a Random Forest.", "So\u2026 how will we evaluate the model performance? We can choose some data, and separate it into a test set and a train set. The test data will represent a scenario that we don\u2019t know, and it could be seen as a simulation of the strategy that we will use. To avoid misunderstandings, we will choose the data randomly but balanced.", "You could rush into this solution:", "The model will give us a probability of going into the market. If we can trust the predict_proba method (which determines the odds of the outcomes of a particular case and will be our protagonist from now on), we know what is the probability of success (that we will call P(p)) if we go in. Besides, if we multiply the P(p) by the return of the scenario, we could know before even training the model what\u2019s our best choice.", "It\u2019s worth saying that P(p)+P(n)=1 if we have two outcomes (P(n) being the probability of a negative outcome), and the predict_proba method knows that.", "For instance, we evaluate a case where we choose I=1.5% and D=-1%. If we forget about fees, we would just need a P(p) of 0.4 or higher (calculation below). But without even looking at the model and its results, it seems hard to optimize the combination for our target variable: how can we know how many cases will accomplish that condition?.", "Another problem is that, in general, the model is not perfectly calibrated, the predict_proba could tell us 0.4, but in the test set, it could be doing much better or much worse. The critical thing here is that we can\u2019t avoid training the model.", "Our solution needs to evaluate every model that we train and check for the return on every P(p) that could give us positive amounts. In order to do that, you will see in the next section charts about how we will create the return scenarios, but for now, I will explain the idea.", "We will train our model, and with the test data, we will calculate the probability of a positive outcome (P(p)) for every data point given the condition that the P(p) should be higher than a specific value. We will evaluate every case with a probability higher than a certain number, and we will check how many of them actually succeed.", "We can assume that we will be investing the same amount of money on every trade: 100 USDT. Here is where the importance of doing this on percentage shines because of the simplicity of our final money amount. We can just calculate the real return, just changing a little bit of our original formula.", "Did you notice the difference? It was just to change the \u201c% Cases\u201d for the respective \u201ccases.\u201d For example, if we train a model where I%=1.5 and D=-1%, where 1,000 data points had a probability of I>0.5. We will see how many of them actually were accurate; for this case, we will say that 450 with a positive outcome and 50 with no outcome. We can translate that in the following:", "In this particular case, we would end up with a profit of 24.875 USDT at the end of the period.", "You can notice that the value of the return depends on the number of cases and the quality of the entries. In the case of the model, if we ask for higher probabilities, we will have fewer cases. That\u2019s our main trade-off! Many \u201cregular entries\u201d could be worse or better than a few \u201cgood ones.\u201d", "So there will be two optimization processes! First, we will maximize the return given a P(p) on every model. And after that, we will evaluate the best return on every model for all the combinations!", "This will be similar to what a grid-search does, but in our case, we won\u2019t be calibrating the parameters, we will be comparing their return! And instead of changing the parameters, we will be changing our target variable as I promised!", "Seems like a good plan? If you are on board, let\u2019s see the results of the solution we just built!", "All the elaboration process may have been a little harsh, but it\u2019s about to pay off!", "Technical note: I took a 20% balanced data for the following evaluation, the other part was to train the model. Given that we used 550 days, we might say that the returns are expected on 110 random days. I preferred this approach instead of evaluating this on an uptrend or a downtrend because I think it\u2019s more reliable.", "Besides, I will only add the gist for the model training and model evaluation in this section. The chart code will be in the gists and in the jupyter notebook that I will leave you in this repo. I just uploaded the results because the models are too heavy.", "Following the principles that we set in section 3, if we have 18 hours to see the outcome, it\u2019s reasonable to do 0.3 separation barriers. Also, the fact that we can\u2019t know when it is too much or too little the signal to mislead our model, we should try a lot of combinations!.", "In this section, we will train a lot of Random Forests, every one based on a different combination of I% and D% (\u201cmatrix\u201d). That will lead us to find the exact probability that we should ask for the model, to determine if we can go into the market, maximizing our return.", "Here is the code for the models, I save them because the training took something like 5 minutes for each model and for 169 you can do the math on your own to understand that it took a night just to train them:", "In section 4.1, we will understand with one of the combinations what\u2019s happening every time that we test a new one. In section 4.2, what are we all expecting: the target variable optimization\u2026 Finally!", "As I told you before, here, will be more charts! And I will start by showing you one, so we can reinforce what we did in the last section. The first barplot contains the results of the model on the I%=1.5 and D=-1.5 combination. Also, the number of cases on top of every bar.", "The x-axis represents the filter of the P(p)>X output (all the cases that meet this condition) that we will use to select the cases that the model is predicting as market entries. The bar height represents the success rate, and the scatterplot points can be seen as the return of that particular point.", "Don\u2019t feel overwhelmed! There is a lot of information here, but if you take a pause to understand it, you will see that there is nothing to fear. At the end of this section, you can revisit this chart, and I swear! It will make total sense. I will divide this analysis into two parts: in the first, we will be discussing the information that predict_proba is giving us, and in the second, we will be analyzing the return.", "You might have noticed that the predict_proba method it\u2019s the star of this blog post, and now I will explain to you why. This part of the data science process, it\u2019s crucial because it\u2019s when we understand the confidence that the model is giving us.", "For this combination, I will divide them into three, depending on the probability and explaining what that number represents for our case. Just notice that I\u2019m using 0.5 because I% is the same as the D%:", "Now returning to the chart, you can notice that every bar is a particular confidence range filtered based on the x-axis number. The success rate went higher on every bar. This is because every bar on the right of the other is a little pickier than the one on their left side!.", "That also means that we have fewer cases when we go to the right, and as discussed in the 3rd section, with fewer cases, our return reaches a point when it can\u2019t climb anymore. But that\u2019s a matter of 4.1.2 section.", "I emphasized the P(p) filter just to remember to you that the threshold chosen should be connected to the business value in the problem, using the AUC-ROC curve may not be enough. You need to relate the results of your model to your objective function!.", "The return is calculated with the formulas that we constructed in the last section. I just made them a little punishment or reward for the \u201cno outcome cases\u201d depending on the S/L and T/P points. For example, if we had [-3.6,0.3], the value is probably beyond 0, so that effect is incorporated (details in the code).", "If you think that we went in with 100 USDT on every trade, don\u2019t freak out because of the 750% on 110 days returns that the chart is showing. The returns are not that high because you can have a lot of simultaneous trades waiting to reach the threshold. So you will need more than 100 USDT to apply those strategies.", "So, the return is the value that we will be looking to optimize. It will be easier now to analyze the scatterplot points. In this particular case, you can see clearly that the return finds a point (on 0.485 approx) where it has 0 return and keeps going up until 0.55 where it reaches the highest return. After that, as expected, it goes down, because being too picky involves having fewer opportunities.", "Looking at this gives us a great insight: Just by choosing a correct threshold of our P(p) could be the difference between reaching or not reaching our business goals.", "But, as you know, we won\u2019t be stopping there. Our main goal is to optimize the target variable, defining the best I% and D% combination. Now it\u2019s time to evaluate these models! The following code could avoid repeating the whole process of the past sections, but I will present it to you anyway. This is due to the save and load process of the model and data. It could be avoided with a faster option.", "We load the data and the model with the respective features recreating the environment trained. In the second half of the code, we use the P(p) filter to save all the probabilities with the success rate, to analyze them in the future.", "On every one of them, we will repeat the procedure of the first part of this section, obtaining the local best return. After that, we will compare the best return on every combination. Here you will see the return of our best five models!", "The first thing that we notice is that the return is the same at the firsts P(p) filters. That\u2019s because the model never gives us a probability lower than 0.25, so the return was the same as going into the market randomly. Another important thing is that in all the models, the return goes back to 0 because there aren\u2019t enough cases reaching that P(p) value.", "As you can see, in the five cases, the models cross the 0 return barrier when P(p) is higher than a value where the probability can handle the difference between I% and D%. For example, the model [2.4, -3.6] lasts a little more than the others to reach the peak, because you need more positive cases to neutralize the negative ones.", "Our winner [3.9, -3.6], was able to reach more than 3,000 USDT of return! That\u2019s incredible because if we had used only the section 4.1 criteria \u2014 evaluating just one combination \u2014 we would have ended up with just 750 USDT of return.", "The value of optimizing the target variable was stunning! And now that you have learned all the important things needed to understand the chart that we saw at the beginning of this section, I can now add the same chart, but for our optimal case.", "The optimal case is to look for S/L of -3.6%, and T/P of 3.9%, also we should go into the market for every case where P(p)>0.53. Looking at this, we can finish this section with a self-importance smile on our face. It\u2019s something like 0.85 USDT of expected return per trade, including the fees!", "What I intended to do here was focusing our attention on the business value that could give us the model. We change the probability filter dynamically and the outcome definition to improve the return of our strategies.", "Further improvements could be doing this analysis with a cross-validation mean. Also, a lot can be done with the measurement of the return, for example, it could be divided by the number of simultaneous average trades, to normalize every dollar invested, but I think it\u2019s enough for today.", "I hope that you could see that there are other things that can be evaluated besides the model accuracy. If you read one of my past articles, you know what\u2019s coming. Our main takeaways:", "That\u2019s all for today, folks. If you reach this part, I hope that these twenty-something minutes were worth it.", "If I feel your warm support \u2014 as I did with the last one \u2014 I can bring you new things! Leave your comments and ideas below! It\u2019s super important for me to read your thoughts.", "It\u2019s mandatory that you don\u2019t invest nor trade using this strategy because the primary purpose of this article was talking about the target variable. The idea of trading: it\u2019s just a tool to access a real problem and real data. If you follow this unproven system, you are prone to lose your savings!.", "If you liked it, follow me on Medium and Linkedin. If you want to write to me, I\u2019m recently on Twitter. I will gladly talk with you!", "Note from Towards Data Science\u2019s editors: While we allow independent authors to publish articles in accordance with our rules and guidelines, we do not endorse each author\u2019s contribution. You should not rely on an author\u2019s works without seeking professional advice. See our Reader Terms for details.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Chilean \ud83c\udde8\ud83c\uddf1 | Quant Finance \ud83d\udcc8 | Azure Data Scientist Associate \u2601\ufe0f | https://www.linkedin.com/in/maletelier \ud83d\udc68\u200d\ud83d\udcbc"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F48a1587d7b9a&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Foptimizing-the-target-variable-an-example-for-trading-machine-learning-models-48a1587d7b9a&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Foptimizing-the-target-variable-an-example-for-trading-machine-learning-models-48a1587d7b9a&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Foptimizing-the-target-variable-an-example-for-trading-machine-learning-models-48a1587d7b9a&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Foptimizing-the-target-variable-an-example-for-trading-machine-learning-models-48a1587d7b9a&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----48a1587d7b9a--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----48a1587d7b9a--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://maletelier.medium.com/?source=post_page-----48a1587d7b9a--------------------------------", "anchor_text": ""}, {"url": "https://maletelier.medium.com/?source=post_page-----48a1587d7b9a--------------------------------", "anchor_text": "Mauricio Letelier"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F1697a1a4db50&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Foptimizing-the-target-variable-an-example-for-trading-machine-learning-models-48a1587d7b9a&user=Mauricio+Letelier&userId=1697a1a4db50&source=post_page-1697a1a4db50----48a1587d7b9a---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F48a1587d7b9a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Foptimizing-the-target-variable-an-example-for-trading-machine-learning-models-48a1587d7b9a&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F48a1587d7b9a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Foptimizing-the-target-variable-an-example-for-trading-machine-learning-models-48a1587d7b9a&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@clemono2?utm_source=medium&utm_medium=referral", "anchor_text": "Clem Onojeghuo"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://www.kaggle.com/c/titanic", "anchor_text": "Titanic"}, {"url": "https://www.kaggle.com/c/digit-recognizer", "anchor_text": "MNIST"}, {"url": "https://en.wikipedia.org/wiki/Darts#/media/File:Dartboard_heatmap.svg", "anchor_text": "Wikipedia"}, {"url": "https://en.wikipedia.org/wiki/Darts#/media/File:Dartboard_heatmap.svg", "anchor_text": "Wikipedia"}, {"url": "https://www.pngitem.com/middle/iibmbTi_dart-png-transparent-background-dart-png-png-download/", "anchor_text": "here"}, {"url": "https://www.youtube.com/watch?v=pWgdh-m6EzU", "anchor_text": "this"}, {"url": "https://www.youtube.com/watch?v=zEG_xUcGHwg", "anchor_text": "here"}, {"url": "https://towardsdatascience.com/probabilistic-machine-learning-approach-to-trading-macd-business-understanding-6b81f465aef6", "anchor_text": "Probabilistic Machine Learning Approach to Trading + MACD Business UnderstandingAt the end of the article, you will know how to structure a trading problem in a probabilistic way. Also, you will\u2026towardsdatascience.com"}, {"url": "https://www.investopedia.com/terms/e/expectedreturn.asp", "anchor_text": "expected return"}, {"url": "https://www.investopedia.com/terms/t/take-profitorder.asp", "anchor_text": "T/P,"}, {"url": "https://www.investopedia.com/terms/s/stop-lossorder.asp", "anchor_text": "S/L"}, {"url": "https://unsplash.com/@stairhopper?utm_source=medium&utm_medium=referral", "anchor_text": "Alex Holyoake"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://en.wikipedia.org/wiki/Expected_return", "anchor_text": "here"}, {"url": "https://www.investopedia.com/terms/l/long.asp", "anchor_text": "long positions"}, {"url": "https://towardsdatascience.com/probabilistic-machine-learning-approach-to-trading-macd-business-understanding-6b81f465aef6", "anchor_text": "here"}, {"url": "https://www.binance.com/en/support/articles/115000583311", "anchor_text": "BNB the fees"}, {"url": "https://gist.github.com/MauricioLetelier/1d856a86d9f1b21d43a022babdd85ec1", "anchor_text": "gist"}, {"url": "https://quoteinvestigator.com/2014/05/22/solve/", "anchor_text": "problem-solving process"}, {"url": "https://quoteinvestigator.com/2014/03/29/sharp-axe/", "anchor_text": "axe"}, {"url": "https://unsplash.com/@ugurpeker?utm_source=medium&utm_medium=referral", "anchor_text": "Ugur Peker"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://unsplash.com/@jamie452?utm_source=medium&utm_medium=referral", "anchor_text": "Jamie Street"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://github.com/MauricioLetelier/Optimizing-the-target-variable", "anchor_text": "repo"}, {"url": "https://imgflip.com/memegenerator/Panik-Kalm-Panik", "anchor_text": "imgflip"}, {"url": "https://gist.github.com/MauricioLetelier/81aa8b69f7a12d0ec34e89564613d1cc", "anchor_text": "here"}, {"url": "https://gist.github.com/MauricioLetelier/08e18dbc47869181b0098d7c88bb6a37", "anchor_text": "Gist"}, {"url": "https://medium.com/@maletelier", "anchor_text": "Medium"}, {"url": "http://www.linkedin.com/in/maletelier", "anchor_text": "Linkedin"}, {"url": "https://twitter.com/maletelier", "anchor_text": "Twitter"}, {"url": "https://towardsdatascience.com/questions-96667b06af5", "anchor_text": "rules and guidelines"}, {"url": "https://towardsdatascience.com/readers-terms-b5d780a700a4", "anchor_text": "Reader Terms"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----48a1587d7b9a---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/tag/data-science?source=post_page-----48a1587d7b9a---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/cryptocurrency?source=post_page-----48a1587d7b9a---------------cryptocurrency-----------------", "anchor_text": "Cryptocurrency"}, {"url": "https://medium.com/tag/ai?source=post_page-----48a1587d7b9a---------------ai-----------------", "anchor_text": "AI"}, {"url": "https://medium.com/tag/technology?source=post_page-----48a1587d7b9a---------------technology-----------------", "anchor_text": "Technology"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F48a1587d7b9a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Foptimizing-the-target-variable-an-example-for-trading-machine-learning-models-48a1587d7b9a&user=Mauricio+Letelier&userId=1697a1a4db50&source=-----48a1587d7b9a---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F48a1587d7b9a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Foptimizing-the-target-variable-an-example-for-trading-machine-learning-models-48a1587d7b9a&user=Mauricio+Letelier&userId=1697a1a4db50&source=-----48a1587d7b9a---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F48a1587d7b9a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Foptimizing-the-target-variable-an-example-for-trading-machine-learning-models-48a1587d7b9a&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----48a1587d7b9a--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F48a1587d7b9a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Foptimizing-the-target-variable-an-example-for-trading-machine-learning-models-48a1587d7b9a&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----48a1587d7b9a---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----48a1587d7b9a--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----48a1587d7b9a--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----48a1587d7b9a--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----48a1587d7b9a--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----48a1587d7b9a--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----48a1587d7b9a--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----48a1587d7b9a--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----48a1587d7b9a--------------------------------", "anchor_text": ""}, {"url": "https://maletelier.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://maletelier.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Mauricio Letelier"}, {"url": "https://maletelier.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "504 Followers"}, {"url": "https://www.linkedin.com/in/maletelier", "anchor_text": "https://www.linkedin.com/in/maletelier"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F1697a1a4db50&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Foptimizing-the-target-variable-an-example-for-trading-machine-learning-models-48a1587d7b9a&user=Mauricio+Letelier&userId=1697a1a4db50&source=post_page-1697a1a4db50--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fae1f467aa193&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Foptimizing-the-target-variable-an-example-for-trading-machine-learning-models-48a1587d7b9a&newsletterV3=1697a1a4db50&newsletterV3Id=ae1f467aa193&user=Mauricio+Letelier&userId=1697a1a4db50&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}