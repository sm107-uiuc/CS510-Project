{"url": "https://towardsdatascience.com/airflow-how-and-when-to-use-it-2e07108ac9f5", "time": 1683007597.488516, "path": "towardsdatascience.com/airflow-how-and-when-to-use-it-2e07108ac9f5/", "webpage": {"metadata": {"title": "Airflow: how and when to use it. Along with knowing how to use Airflow\u2026 | by Alexa Griffith | Towards Data Science", "h1": "Airflow: how and when to use it", "description": "Airflow is a popular tool used for managing and monitoring workflows. It works well for most of our data science workflows at Bluecore, but there are some use cases where other tools perform better\u2026"}, "outgoing_paragraph_urls": [{"url": "https://airflow.apache.org/", "anchor_text": "Airflow", "paragraph_index": 0}, {"url": "https://airflow.apache.org/", "anchor_text": "Bluecore", "paragraph_index": 0}, {"url": "https://airflow.apache.org/docs/stable/", "anchor_text": "Airflow documentation", "paragraph_index": 1}, {"url": "https://airflow.apache.org/docs/stable/concepts.html", "anchor_text": "A DAG is a collection of all the tasks you want to run, organized in a way that reflects their relationships and dependencies.", "paragraph_index": 6}, {"url": "https://www.datadoghq.com/product/", "anchor_text": "datadog", "paragraph_index": 10}, {"url": "https://github.com/", "anchor_text": "Github", "paragraph_index": 13}, {"url": "https://medium.com/@alexagriffith/airflow-how-and-when-to-use-it-advanced-238ea6b63f13", "anchor_text": "Airflow: how and when to use it (Advanced)", "paragraph_index": 22}], "all_paragraphs": ["Airflow is a popular tool used for managing and monitoring workflows. It works well for most of our data science workflows at Bluecore, but there are some use cases where other tools perform better. Along with knowing how to use Airflow, it is also important to know when to use it.", "\u201cAirflow is a platform to programmatically author, schedule and monitor workflows.\u201d \u2014 Airflow documentation", "Sounds pretty useful, right? Well, it is! Airflow makes it easy to monitor the state of a pipeline in their UI, and you can build DAGs with complex fan-in and fan-out relationships between tasks. They also add:", "\u201cRich command line utilities make performing complex surgeries on DAGs a snap.\u201d", "This made me laugh because sometimes working with Airflow feels like brain surgery, and other times it works out and it feels like the go home the next day kind.", "Before we get into the more complicated aspects of Airflow, let\u2019s review a few core concepts.", "A DAG is a collection of all the tasks you want to run, organized in a way that reflects their relationships and dependencies.", "DAG, or directed acyclic graphs, are a collection of all of the tasks, units of work, in the pipeline. The tasks are organized by their relationships and dependencies between each other. For example, if you want to query database one and then load the results into database two, you want to run the task to query database one directly before the task to load the results to database two. Directed acyclic graph implies that your pipeline can only move forwards, not backwards. A task can retry, but a task can\u2019t be rerun after it has completed and another task downstream has begun.", "The DAG page is the homepage in the Airflow UI. The DAG schedules are shown and can be turned on/off.", "What makes Airflow so useful is its ability to handle complex relationships between tasks. You can easily construct tasks that fan-in and fan-out.", "Below is an example of a workflow we use at Bluecore. It is a very simple DAG that uses the AppEngineOperator to call a command we created in AppEngine that makes a query and returns the list of Bluecore\u2019s active partners. Next, we use a PythonOperator to update the Airflow variable. If the update task succeeded or failed, we send the appropriate metric to datadog.", "\u201cTasks are generated when instantiating operator objects.\u201d -Airflow documentation", "Tasks are ideally independent pieces that don\u2019t rely on information from another task. Operator class objects turn into tasks when they are run. Operator classes can be imported, and instantiating the class produces the class object. The instantiating (running the operator code) of that object is the task. The nuances between a task and an operator can be confusing at first, so I found making this diagram helpful.", "Concepts are nice, but you may be asking yourself, how do I actually write the code to create a DAG? Well, at Bluecore, we have a Github repository specifically for python files defining the dags. For example, you may create example_dag.py and start by defining the DAG object. You would import the DAG class from Airflow, and define the parameters you need.", "Next, write each task. Setting the dag parameter to the dag object correlates the task with the DAG.", "Finally, define the relationships between the tasks.", "Putting the DAG and task definitions, along with defining the upstream/downstream tasks all together results in a DAG definition file.", "Variables are another useful component of Airflow. We use variables for two basic purposes: environment-related and model-specific parameters. Variables are accessible in the DAG file, and, for example, the project id or image tag can be updated without having to make any DAG changes. This is particularly useful if you have multiple environments, such as QA and production. Additionally, some of our models don\u2019t run for all of our partners but for a specific set of partners. We have a separate DAG that updates the variable containing the model-specific partners, and then when the model runs, it pulls its list of partners from the variable.", "Pools control the number of resources a DAG is allowed to consume at one time. Pools should be defined depending on how quickly tasks finish and how quickly the DAG needs to finish. Make sure that when using a pool, you aren\u2019t using someone else\u2019s, or both DAGs may not complete as quickly as expected.", "Ideally, tasks are independent of one another, but at times, that is impossible to do and tasks need to communicate. This intercommunication is done by an xcom. XComs can be \u201cpushed\u201d (sent) or \u201cpulled\u201d (received) between tasks.", "For example, you may need to push the return value of one task to the xcom table so that you can pull the value from the xcom table in the next task and use it as a parameter. In the simple DAG example previously described in the DAGs section, the list of active partners was pushed to the xcom table by the first task, and the second task pulled the partner list from the xcom table and set the list as an Airflow variable.", "We reviewed when to use Airflow (when your pipeline needs to support fan-in/-out), how to build a DAG, why DAGs are useful, and about various Airflow components. In summary, we learned about", "Now you have the tools you need to start creating your DAG building complex data pipelines in! If you are interested in learning more, see Airflow: how and when to use it (Advanced) for more information on operators, structuring DAGs, and scaling issues with Airflow.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Software Engineer at Bloomberg. All opinions are my own! :)"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F2e07108ac9f5&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fairflow-how-and-when-to-use-it-2e07108ac9f5&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fairflow-how-and-when-to-use-it-2e07108ac9f5&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fairflow-how-and-when-to-use-it-2e07108ac9f5&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fairflow-how-and-when-to-use-it-2e07108ac9f5&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----2e07108ac9f5--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----2e07108ac9f5--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@alexagriffith?source=post_page-----2e07108ac9f5--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@alexagriffith?source=post_page-----2e07108ac9f5--------------------------------", "anchor_text": "Alexa Griffith"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F999a07abb36a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fairflow-how-and-when-to-use-it-2e07108ac9f5&user=Alexa+Griffith&userId=999a07abb36a&source=post_page-999a07abb36a----2e07108ac9f5---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F2e07108ac9f5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fairflow-how-and-when-to-use-it-2e07108ac9f5&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F2e07108ac9f5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fairflow-how-and-when-to-use-it-2e07108ac9f5&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://airflow.apache.org/", "anchor_text": "Airflow"}, {"url": "https://airflow.apache.org/", "anchor_text": "Bluecore"}, {"url": "https://airflow.apache.org/docs/stable/", "anchor_text": "Airflow documentation"}, {"url": "https://airflow.apache.org/docs/stable/concepts.html", "anchor_text": "A DAG is a collection of all the tasks you want to run, organized in a way that reflects their relationships and dependencies."}, {"url": "https://www.datadoghq.com/product/", "anchor_text": "datadog"}, {"url": "https://github.com/", "anchor_text": "Github"}, {"url": "https://medium.com/@alexagriffith/airflow-how-and-when-to-use-it-advanced-238ea6b63f13", "anchor_text": "Airflow: how and when to use it (Advanced)"}, {"url": "https://medium.com/tag/airflow?source=post_page-----2e07108ac9f5---------------airflow-----------------", "anchor_text": "Airflow"}, {"url": "https://medium.com/tag/data-science?source=post_page-----2e07108ac9f5---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/software-engineering?source=post_page-----2e07108ac9f5---------------software_engineering-----------------", "anchor_text": "Software Engineering"}, {"url": "https://medium.com/tag/bluecore?source=post_page-----2e07108ac9f5---------------bluecore-----------------", "anchor_text": "Bluecore"}, {"url": "https://medium.com/tag/towards-data-science?source=post_page-----2e07108ac9f5---------------towards_data_science-----------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F2e07108ac9f5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fairflow-how-and-when-to-use-it-2e07108ac9f5&user=Alexa+Griffith&userId=999a07abb36a&source=-----2e07108ac9f5---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F2e07108ac9f5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fairflow-how-and-when-to-use-it-2e07108ac9f5&user=Alexa+Griffith&userId=999a07abb36a&source=-----2e07108ac9f5---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F2e07108ac9f5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fairflow-how-and-when-to-use-it-2e07108ac9f5&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----2e07108ac9f5--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F2e07108ac9f5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fairflow-how-and-when-to-use-it-2e07108ac9f5&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----2e07108ac9f5---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----2e07108ac9f5--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----2e07108ac9f5--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----2e07108ac9f5--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----2e07108ac9f5--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----2e07108ac9f5--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----2e07108ac9f5--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----2e07108ac9f5--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----2e07108ac9f5--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@alexagriffith?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@alexagriffith?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Alexa Griffith"}, {"url": "https://medium.com/@alexagriffith/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "255 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F999a07abb36a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fairflow-how-and-when-to-use-it-2e07108ac9f5&user=Alexa+Griffith&userId=999a07abb36a&source=post_page-999a07abb36a--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F631237e4e72a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fairflow-how-and-when-to-use-it-2e07108ac9f5&newsletterV3=999a07abb36a&newsletterV3Id=631237e4e72a&user=Alexa+Griffith&userId=999a07abb36a&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}