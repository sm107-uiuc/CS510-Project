{"url": "https://towardsdatascience.com/nlp-on-edinburgh-fringe-2019-data-aa71dca818b4", "time": 1682997534.9663491, "path": "towardsdatascience.com/nlp-on-edinburgh-fringe-2019-data-aa71dca818b4/", "webpage": {"metadata": {"title": "NLP on Edinburgh Fringe 2019 data | by Christopher Doughty | Towards Data Science", "h1": "NLP on Edinburgh Fringe 2019 data", "description": "In this post, we dive into the basics of scraping websites, cleaning text data, and Natural Language Processing (NLP). I\u2019ve based the context of this project around the Edinburgh Fringe, the world\u2019s\u2026"}, "outgoing_paragraph_urls": [], "all_paragraphs": ["In this post, we dive into the basics of scraping websites, cleaning text data, and Natural Language Processing (NLP). I\u2019ve based the context of this project around the Edinburgh Fringe, the world\u2019s largest arts festival, currently taking place between the 2nd and 26th of August.", "For my analysis, I wanted to acquire text about all of the events taking place during the Fringe festival. This text data was located across several webpages, which would take a long time to manually extract.", "This is where the Python library requests helps us out, as it can be used to make HTTP requests to a particular webpage. From the response of making a HTTP request, the website text data can be obtained. This text data, however, is a large scroll of text, and this is where the library BeautifulSoup is implemented to parse the returning HTML we get from the webpage so that we can efficiently extract only the content we want.", "The below code snippet demonstrates making a request to a webpage and parsing the response through BeautifulSoup:", "Within the returned variable soup, we can search for particular classes in the HTML using commands such as soup.find_all(\u2018\u2019, class_=\u2019CLASS_NAME\u2019). Using this approach, I acquired data for 5,254 festival events, including fields of the event name, a brief description of the event, ticket prices, and the number of shows being performed.", "After getting a data set, typically the next step is to explore what you have. I was interested to know what the distribution of ticket prices was across the events. A restricted view of this data is shown below:", "From the chart, we can see that over 25% of all events are free to attend, with \u00a35\u2013\u00a320 holding a large portion of the distribution. Deeper analysis into the data revealed shows costing more than \u00a360, most of which were technical masterclasses or food/drink tasting sessions. What I was really interested in, though, was the types of shows taking place, for which we need to start working with our text data.", "When using text for data science projects, the data will almost always require some level of cleaning before it is passed to any models we want to apply. With my data, I combined the event name and description text into a single field called df[\u2018text\u2019]. The following code shows a few of the steps that were taken to clean our text:", "With each row in our DataFrame now containing a field of cleaned text data, we can proceed to inspect the language behind it. One of the more simple methods is called Bag of Words (BOW), which creates a vocabulary of all the unique words occurring in our data. We can do this using CountVectorizer imported from sklearn. As part of setting up the vectorizer, we include the parameter stopwords=\u2018english\u2019, which removes common words from the dataset such as the, and, of, to, in, etc. The following code performs this on our text:", "The final line prints the shape of the matrix we have created, which in this case had a shape of (5254, 26,869). This is a sparse matrix of all the words in our corpus and their presence in each of the supplied sentences. One benefit of this matrix is that it can display the most common words in our dataset; the following code snippet shows how:", "From the fringe data, the top ten most-frequent words in our data are:", "This is to be expected and doesn\u2019t tell us much about the depth of what is on offer. Let\u2019s try mapping how events might be connected to each other.", "When working within NLP, we are often aiming to understand what a particular string of text is about by looking at the words that make up that text. One measure of how important a word might be is its term frequency (TF); this is how frequently a word occurs in a document. However, there are words that can occur many times but may not be important; some of these are the stopwords that have already been removed.", "Another approach that we can take is to look at a term\u2019s inverse document frequency (IDF), which decreases the weight for commonly used words and increases the weight for words that are not used very much in a collection of documents. We can combine TF and IDF (TF-IDF). TF-IDF is a method for emphasising words that occur frequently in a given observation while at the same time de-emphasising words that occur frequently across many observations. This technique is great at determining which words will make good features. For this project, we are going to use the TF-IDF vectorizer from scikit-learn. We can use the following code to fit our text to the TF-IDF model:", "From the matrix X, we can understand each of our events\u2019 text in the form of a vector of the words. To find similar events, we are going to use a method called cosine similarities, which again we can import from sklearn. The following snippet demonstrates how to perform this on a single event (X[5]), and the output shows the most relevant events and their similarity score (a score of 1 would be the same text).", "Repeating this process across all of the events leads to the creation of a map of all events and how similar events link together.", "What is interesting about the network graph above is the vast number of events that have no relationships to others in the network. These are scattering around the edge of the network and highlight the degree of originality on show at the Fringe festival. In the middle, we can see a few clusters with a high degree of overlap between events. In the final stage of the project, we model these clusters and try to assign themes to them.", "Latent Dirichlet Allocation (LDA) is a model that generates topics based on word frequency. We use it here for finding particular themes in our Fringe data about the types of events taking place. The code below shows how to get started with this approach:", "The above code is just an example of running the LDA model and printing the output topics and the most important words. From the output of the LDA, I used Principal Coordinate Analysis to be able to create a 2D projection of our topics:", "Being able to plot the topics from running LDA is useful for observing where topics are overlapping and tuning the model. It also provides a method for understanding the different types of events taking place during the festival such as music, comedy, poetry, dance, and writing.", "Our analysis demonstrates that, with the basics of NLP methods and techniques, we can interrogate a small dataset of text to gain insight. The BoW model, despite being simple, provides a fast view on the number of words present and the main ones used in the text, although it wasn\u2019t much of a surprise for our data that words such as \u2018comedy\u2019, \u2018fringe\u2019, and \u2018edinburgh\u2019 were the most common.", "Expanding on this, TF-IDF provides a way to start thinking about sentences rather than words, with the addition of cosine-similarities providing a method to start grouping observations. This showed us the extent of original events present in the Fringe with low common text between other events.", "Finally, with LDA we get our model to produce topics where groups of events are allocated to a theme. This allows us to gauge the main types of events happening throughout the festival.", "There are several other methods for NLP worth investigating. As part of the project, I also used Word2Vec and TSNE; however, the findings from these have not been presented.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Data Science Manager at Monzo. BSc Behavioural Biology from the University of St. Andrews"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Faa71dca818b4&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fnlp-on-edinburgh-fringe-2019-data-aa71dca818b4&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fnlp-on-edinburgh-fringe-2019-data-aa71dca818b4&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fnlp-on-edinburgh-fringe-2019-data-aa71dca818b4&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fnlp-on-edinburgh-fringe-2019-data-aa71dca818b4&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----aa71dca818b4--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----aa71dca818b4--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@penguinstrikes?source=post_page-----aa71dca818b4--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@penguinstrikes?source=post_page-----aa71dca818b4--------------------------------", "anchor_text": "Christopher Doughty"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F39b3b7cb3f5c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fnlp-on-edinburgh-fringe-2019-data-aa71dca818b4&user=Christopher+Doughty&userId=39b3b7cb3f5c&source=post_page-39b3b7cb3f5c----aa71dca818b4---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Faa71dca818b4&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fnlp-on-edinburgh-fringe-2019-data-aa71dca818b4&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Faa71dca818b4&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fnlp-on-edinburgh-fringe-2019-data-aa71dca818b4&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://url_to_query'", "anchor_text": "https://url_to_query'"}, {"url": "https://medium.com/tag/data-science?source=post_page-----aa71dca818b4---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/nlp?source=post_page-----aa71dca818b4---------------nlp-----------------", "anchor_text": "NLP"}, {"url": "https://medium.com/tag/edinburgh-fringe?source=post_page-----aa71dca818b4---------------edinburgh_fringe-----------------", "anchor_text": "Edinburgh Fringe"}, {"url": "https://medium.com/tag/data-visualization?source=post_page-----aa71dca818b4---------------data_visualization-----------------", "anchor_text": "Data Visualization"}, {"url": "https://medium.com/tag/analysis?source=post_page-----aa71dca818b4---------------analysis-----------------", "anchor_text": "Analysis"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Faa71dca818b4&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fnlp-on-edinburgh-fringe-2019-data-aa71dca818b4&user=Christopher+Doughty&userId=39b3b7cb3f5c&source=-----aa71dca818b4---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Faa71dca818b4&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fnlp-on-edinburgh-fringe-2019-data-aa71dca818b4&user=Christopher+Doughty&userId=39b3b7cb3f5c&source=-----aa71dca818b4---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Faa71dca818b4&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fnlp-on-edinburgh-fringe-2019-data-aa71dca818b4&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----aa71dca818b4--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Faa71dca818b4&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fnlp-on-edinburgh-fringe-2019-data-aa71dca818b4&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----aa71dca818b4---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----aa71dca818b4--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----aa71dca818b4--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----aa71dca818b4--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----aa71dca818b4--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----aa71dca818b4--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----aa71dca818b4--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----aa71dca818b4--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----aa71dca818b4--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@penguinstrikes?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@penguinstrikes?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Christopher Doughty"}, {"url": "https://medium.com/@penguinstrikes/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "35 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F39b3b7cb3f5c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fnlp-on-edinburgh-fringe-2019-data-aa71dca818b4&user=Christopher+Doughty&userId=39b3b7cb3f5c&source=post_page-39b3b7cb3f5c--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fe9df6b016575&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fnlp-on-edinburgh-fringe-2019-data-aa71dca818b4&newsletterV3=39b3b7cb3f5c&newsletterV3Id=e9df6b016575&user=Christopher+Doughty&userId=39b3b7cb3f5c&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}