{"url": "https://towardsdatascience.com/data-science-as-code-build-an-ai-project-like-an-it-project-7377fb55df13", "time": 1683008854.607476, "path": "towardsdatascience.com/data-science-as-code-build-an-ai-project-like-an-it-project-7377fb55df13/", "webpage": {"metadata": {"title": "Data Science as Code. Tackling an AI project from an IT\u2026 | by Vincent Levorato | Towards Data Science", "h1": "Data Science as Code", "description": "Thinking about AI projects as IT projects can help organizations to move forward in their deployment plan of data science projects and stops the \"proof-of-concepts-only\" curse."}, "outgoing_paragraph_urls": [{"url": "https://www.dataiku.com", "anchor_text": "Dataiku", "paragraph_index": 0}, {"url": "https://rapidminer.com", "anchor_text": "Rapid Miner", "paragraph_index": 0}, {"url": "https://www.knime.com", "anchor_text": "Knime", "paragraph_index": 0}, {"url": "https://www.salesforce.com/fr/products/einstein-analytics/overview/", "anchor_text": "Salesforce Einstein Analytics", "paragraph_index": 0}, {"url": "https://www.sap.com/france/products/cloud-analytics.html", "anchor_text": "SAP Analytics", "paragraph_index": 0}, {"url": "https://kedro.readthedocs.io", "anchor_text": "Kedro", "paragraph_index": 0}, {"url": "https://dvc.org", "anchor_text": "DVC", "paragraph_index": 0}, {"url": "https://docs.dagster.io", "anchor_text": "Dagster", "paragraph_index": 0}, {"url": "https://mlflow.org", "anchor_text": "MLflow", "paragraph_index": 0}, {"url": "http://egc2017.imag.fr/defi/", "anchor_text": "EGC 2017 academic challenge", "paragraph_index": 7}, {"url": "https://github.com/vlevorato/dsbox/blob/master/dsbox/examples/tree_disease_usecase/tree_disease_dag_with_pg.py", "anchor_text": "can be found here", "paragraph_index": 16}, {"url": "https://github.com/vlevorato/dsbox", "anchor_text": "my GitHub repo", "paragraph_index": 17}, {"url": "https://www.linkedin.com/in/vlevorato/", "anchor_text": "https://www.linkedin.com/in/vlevorato/", "paragraph_index": 23}], "all_paragraphs": ["A lot of articles deals with the subject of AI or data science with IT industrialization problematic. There is also a lot of tools to handle this problematic, from a mostly no-code approach (Dataiku, Rapid Miner, Knime, Salesforce Einstein Analytics, SAP Analytics, etc.) with more or less success, and some tools which are close to code (Kedro, DVC, Dagster, MLflow, etc.).", "If all of these tools have their advantages, I\u2019m not really comfortable with them, as I consider an AI project being an IT project first, meaning code.", "Disclaimer: I don\u2019t include in this writing AI managed services available in the cloud, like tools from the GCP AI platform, which are built to go in production easily if one has enough skills with the chosen provider (with certain restrictions however).", "If an enterprise considers an AI project as an IT project, a psychological barrier will be crossed, and it should demystify this kind of project. Indeed, organizations might consider an AI project as an IT project: when a web-application is built, a team is set, with for instance a back-end developer, a front-end developer, a product owner, etc., where the mentioned tech profiles are needed to deal with the technical parts of such an application. For an AI project, replace the back-end developer by a data engineer, the frond-end developer by a data scientist for instance, keep your product owner, and here you are: apart from the skills of the team and the business objective, the course of the project follows the same pattern. For instance, if you are using Scrum as your agile framework for usual developing and delivering, you should be able to use it with your AI projects. Of course, there are some specificities in AI projects which are, perhaps, less common than \u201cclassical\u201d IT projects. But even \u201cclassical\u201d IT projects have their specificities: an online retail web-application based on PHP and JS technologies doesn\u2019t involve the same team profiles as an IoT embedded application written in C++. And the same goes for AI projects.", "In this article, I\u2019ll present a small architecture and some code giving a final AI solution going into production, let\u2019s say for \u201cmiddle data\u201d (not big data, meaning having less than several TB) and for batch processing.", "Having an on-premise architecture (Fig 1.), we have all we need for an AI solution:", "To run the workflow code example below, a sandbox environnement where all these services are on the same server is sufficient, and the code presented here doesn\u2019t need MinIO and Celery, which are replaced by the local filesystem and Local executor respectively (which can be totally fine with tiny AI projects and mid-level SLA, if a few of data governance is applied, like backuping system or IT DRP for instance).", "The chosen use case to illustrate my article is based on the french EGC 2017 academic challenge: it consists of a prediction task to determine, from data relating to green spaces of Grenoble city, France (left photo), whether a tree has a defect or not.", "Data contains features such as planting year, tree species, geolocation, tree diameter or stage of development.", "The data science part won\u2019t be discuss here as it\u2019s simple to obtain good performances (just for information, scores used by the challenge were accuracy and F-score). Two datasets will be used: one for training and one for evaluating performance.", "To facilitate code development in an AI project, I package my stuff into a Python library, DSBox, that you can use freely.", "I focus here only on the OPS part of the package. This part is divided into two main pieces:", "Basically, Airflow operators are stateless. Once a task is finished, logs apart, no state is kept, and you can\u2019t pass information between tasks directly, even if some native mechanisms could be used in some cases (XCom variables or inlets/outlets). Data Operator simply overrides Airflow Base Operator, containing one or two Data Units managing the input and/or the output data stream (Fig 2.).", "Before talking about IT production, as a Data Scientist, I mainly manipulate Pandas dataframes in a Jupyter notebook when first tackling a problem. If I make my best to write a factorized, structured and decoupled code, I obviously don\u2019t want to re-write all my work if I want it to go in production. That is what a Data Operator is made for: write a function that takes a dataframe as input parameter, and returns a dataframe. It can handle others types of dataframes (Dask, Vaex), but I prefer focus on Pandas dataframe during this article for simplicity.", "As explained, the function used by the data operator takes an input dataframe, does some process (here a very simple fillna operation), and returns the result as a dataframe. To make the whole works, I need to first define the Data Units composing the input and output data stream. Let\u2019s say that I need to read a CSV file with character \u2018;\u2019 as separator, and want to write the result to a Parquet file:", "I can now write a standard Airflow DAG program which has one task defined by my Data Operator.", "Let\u2019s go back to our tree disease prediction use case. The complete workflow code with a final export to a Postgres database can be found here. Our DAG is well interpreted by the Airflow scheduler as expected (Fig 3.).", "I won\u2019t enter in the details of each ML tasks of the final DAG (Fig 4.), as you can explore the full code on my GitHub repo, as it follows the classic data science pattern (joining, cleaning, feature engineering, train, predict, measure performance, expose results). Above all, the main idea is to explicitly declare all datasets read and write operations via data units. Yes, I\u2019ve done a lot of Java \u2615\ufe0f before. All operators don\u2019t read AND write data, some of them just read, for instance the \u201cModel_learning\u201d task that fit a model, and doesn\u2019t write any data but the serialization of the model itself that will be used by the \u201cModel_prediction\u201d task. To avoid coupling data paths to the workflow program, a meta-data management file or tool should be used to not have hard coded paths.Note: the SubDagOperator is used here for pedagogic purpose only and is not recommended to be used in production.", "To finalize the use case, data needs to be exposed to business, and the proposed architecture precisely proposes Apache Superset to achieve this. I created a very simple dashboard (Fig 5.) with a map having each tree of the test dataset with their predicted disease label (0 or 1) with the Mapbox layout making some clusters automatically, depending on how you zoom in. A (poor) sunburst graph gives the proportion of predicted ill trees.", "Having an AI solution made to facilitate the \u201cgoing-to-production\u201d is not so difficult if the project is tackled from an IT point of view.", "As you can see, having an AI solution made to facilitate the \u201cgoing-to-production\u201d is not so difficult if the project is tackled from an IT point of view, even if in this article, several elements have been deliberately set aside (tests, CI/CD, meta-data management, etc.). Finally, it is more about knowing if your organization is already able to smoothly deliver IT applications or not. Among all the metrics to measure the efficiency of delivery, one of them is time (or frequency): with \u201cdata science as code\u201d pattern, I\u2019m able to deliver a new version of a product each week, and I\u2019m doing so in real life. So first, think about delivering frequently (if needed), with a base of a delivery per month for a good start. If you already doing that or even faster, congratulations: you already know how to put an AI project in production.", "More advanced AI archictecture concepts will be discussed in a future article, as this solution cannot easily scale up and has some limitations.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Lead Data Scientist @ Prisma Media. Freelance consultant in data science and AI architectures. Computer science PhD. https://www.linkedin.com/in/vlevorato/"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F7377fb55df13&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdata-science-as-code-build-an-ai-project-like-an-it-project-7377fb55df13&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdata-science-as-code-build-an-ai-project-like-an-it-project-7377fb55df13&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdata-science-as-code-build-an-ai-project-like-an-it-project-7377fb55df13&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdata-science-as-code-build-an-ai-project-like-an-it-project-7377fb55df13&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----7377fb55df13--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----7377fb55df13--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://vincent-levorato.medium.com/?source=post_page-----7377fb55df13--------------------------------", "anchor_text": ""}, {"url": "https://vincent-levorato.medium.com/?source=post_page-----7377fb55df13--------------------------------", "anchor_text": "Vincent Levorato"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Ff8f5915c2893&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdata-science-as-code-build-an-ai-project-like-an-it-project-7377fb55df13&user=Vincent+Levorato&userId=f8f5915c2893&source=post_page-f8f5915c2893----7377fb55df13---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F7377fb55df13&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdata-science-as-code-build-an-ai-project-like-an-it-project-7377fb55df13&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F7377fb55df13&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdata-science-as-code-build-an-ai-project-like-an-it-project-7377fb55df13&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@irfansimsar", "anchor_text": "\u0130rfan Simsar"}, {"url": "https://unsplash.com", "anchor_text": "Unsplash"}, {"url": "https://www.dataiku.com", "anchor_text": "Dataiku"}, {"url": "https://rapidminer.com", "anchor_text": "Rapid Miner"}, {"url": "https://www.knime.com", "anchor_text": "Knime"}, {"url": "https://www.salesforce.com/fr/products/einstein-analytics/overview/", "anchor_text": "Salesforce Einstein Analytics"}, {"url": "https://www.sap.com/france/products/cloud-analytics.html", "anchor_text": "SAP Analytics"}, {"url": "https://kedro.readthedocs.io", "anchor_text": "Kedro"}, {"url": "https://dvc.org", "anchor_text": "DVC"}, {"url": "https://docs.dagster.io", "anchor_text": "Dagster"}, {"url": "https://mlflow.org", "anchor_text": "MLflow"}, {"url": "https://unsplash.com/@florianolv?utm_source=medium&utm_medium=referral", "anchor_text": "Florian Olivo"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "http://egc2017.imag.fr/defi/", "anchor_text": "EGC 2017 academic challenge"}, {"url": "https://github.com/vlevorato/dsbox", "anchor_text": "vlevorato/dsboxPackage made by V. Levorato. This package provides: specific Operators for Apache Airflow in order to manage Data\u2026github.com"}, {"url": "https://github.com/vlevorato/dsbox/blob/master/dsbox/examples/tree_disease_usecase/tree_disease_dag_with_pg.py", "anchor_text": "can be found here"}, {"url": "https://github.com/vlevorato/dsbox", "anchor_text": "my GitHub repo"}, {"url": "https://medium.com/tag/data-science?source=post_page-----7377fb55df13---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/ai-projects?source=post_page-----7377fb55df13---------------ai_projects-----------------", "anchor_text": "Ai Projects"}, {"url": "https://medium.com/tag/code?source=post_page-----7377fb55df13---------------code-----------------", "anchor_text": "Code"}, {"url": "https://medium.com/tag/apache-airflow?source=post_page-----7377fb55df13---------------apache_airflow-----------------", "anchor_text": "Apache Airflow"}, {"url": "https://medium.com/tag/it-delivery?source=post_page-----7377fb55df13---------------it_delivery-----------------", "anchor_text": "It Delivery"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F7377fb55df13&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdata-science-as-code-build-an-ai-project-like-an-it-project-7377fb55df13&user=Vincent+Levorato&userId=f8f5915c2893&source=-----7377fb55df13---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F7377fb55df13&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdata-science-as-code-build-an-ai-project-like-an-it-project-7377fb55df13&user=Vincent+Levorato&userId=f8f5915c2893&source=-----7377fb55df13---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F7377fb55df13&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdata-science-as-code-build-an-ai-project-like-an-it-project-7377fb55df13&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----7377fb55df13--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F7377fb55df13&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdata-science-as-code-build-an-ai-project-like-an-it-project-7377fb55df13&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----7377fb55df13---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----7377fb55df13--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----7377fb55df13--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----7377fb55df13--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----7377fb55df13--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----7377fb55df13--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----7377fb55df13--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----7377fb55df13--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----7377fb55df13--------------------------------", "anchor_text": ""}, {"url": "https://vincent-levorato.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://vincent-levorato.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Vincent Levorato"}, {"url": "https://vincent-levorato.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "31 Followers"}, {"url": "https://www.linkedin.com/in/vlevorato/", "anchor_text": "https://www.linkedin.com/in/vlevorato/"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Ff8f5915c2893&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdata-science-as-code-build-an-ai-project-like-an-it-project-7377fb55df13&user=Vincent+Levorato&userId=f8f5915c2893&source=post_page-f8f5915c2893--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fb973cd1f890b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdata-science-as-code-build-an-ai-project-like-an-it-project-7377fb55df13&newsletterV3=f8f5915c2893&newsletterV3Id=b973cd1f890b&user=Vincent+Levorato&userId=f8f5915c2893&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}