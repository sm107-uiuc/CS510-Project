{"url": "https://towardsdatascience.com/how-to-build-an-accounting-system-using-sqlite-2ce31f8b8652", "time": 1683004902.1985002, "path": "towardsdatascience.com/how-to-build-an-accounting-system-using-sqlite-2ce31f8b8652/", "webpage": {"metadata": {"title": "How to Build an Accounting System using SQLite | by Kenneth Infante | Towards Data Science", "h1": "How to Build an Accounting System using SQLite", "description": "This is the advice that I always give whenever someone asks me how to learn programming. Practically, it means that you have to solve things or choose projects that are relevant to you \u2014 either in\u2026"}, "outgoing_paragraph_urls": [{"url": "https://central.xero.com/s/article/Locked-and-system-accounts-in-your-chart-of-accounts", "anchor_text": "here", "paragraph_index": 31}, {"url": "https://github.com/kennethjhim/medium_acctg_database_design/blob/master/db_blank.db", "anchor_text": "link", "paragraph_index": 70}, {"url": "https://sqlitebrowser.org/", "anchor_text": "here", "paragraph_index": 71}, {"url": "https://github.com/kennethjhim/medium_acctg_database_design/blob/master/new_data-services.xlsx", "anchor_text": "here", "paragraph_index": 72}, {"url": "https://sqlite.org/lang_with.html", "anchor_text": "here", "paragraph_index": 78}, {"url": "https://leanpub.com/accountingdatabasedesign", "anchor_text": "Accounting Database Design", "paragraph_index": 88}, {"url": "https://leanpub.com/powerqueryguidetopandas", "anchor_text": "PowerQuery Guide to Pandas", "paragraph_index": 89}, {"url": "https://leanpub.com/powerqueryguidetopandas", "anchor_text": "Leanpub", "paragraph_index": 89}, {"url": "https://twitter.com/iamkennethcpa", "anchor_text": "Twitter", "paragraph_index": 90}, {"url": "https://www.linkedin.com/in/kennethinfante/", "anchor_text": "Linkedin", "paragraph_index": 90}], "all_paragraphs": ["This is the advice that I always give whenever someone asks me how to learn programming. Practically, it means that you have to solve things or choose projects that are relevant to you \u2014 either in your work or personal life.", "Mindlessly going to tutorials in Youtube, reading programming books, copying code from Reddit posts, etc. will get you nowhere if you\u2019re starting to learn programming.", "In this post, I\u2019m going to show you how to build a crude accounting database using SQLite.", "So, why create an accounting database? Why not just copy public data, shove them to SQLite, and practice from there?", "The reason is that creating an accounting database is advance enough to cover all the aspects of databases and SQL \u2014 from queries to joins to views and CTEs.", "Coming from an accounting background, I think that this is the best project to learn SQL. After all, programming is a tool to solve problems. Hence, might as well \u201csolve\u201d a difficult one to fully learn SQL.", "I got the inspiration to create an accounting system using SQL by observing how Xero works. For those who are not familiar with it, Xero is a cloud accounting software originated in New Zealand. It has now expanded to Australia, the US, Canada, and the UK.", "The good thing about Xero is that it has a nice clean interface and a lot of apps to choose from to extend its functionality.", "Disclaimer: I\u2019m not an engineer nor developer at Xero and these observations may not exactly correspond to how the system works as it is always updated. Certainly, the SQL presented here is not the exact SQL design that Xero use as their system needs to scale. But this is a very interesting project so let\u2019s do it!", "Before you get excited too much, let\u2019s have a crash course first on accounting.", "That equation has basically three parts", "The right-hand side describes how the assets were financed \u2014 either thru Liabilities or Equity.", "We can expand the above equation to break down the Equity", "Assets = Liabilities + Beginning Equity + Revenues \u2014 Expenses", "These 5 accounts \u2014 Assets, Liabilities, Equity, Revenues, & Expenses \u2014 are the account types that you typically see in an accounting system.", "Then there\u2019s the concept of Debit and Credit. I could go on and discuss these two in-depth but for this post, all you need to know is that in every transaction:", "These two equations generally govern what\u2019s happening in the whole accounting cycle. These two equations will also serve as a guide in creating our own accounting database.", "Coming from an accounting background, I think that this is the best project to learn SQL. After all, programming is a tool to solve problems. Hence, might as well \u201csolve\u201d a difficult one to fully learn SQL.", "The important thing to remember is that Xero is designed in such a way that it will be useful to business owners (not accountants) in the day-to-day operations of the business.", "As such, it designed around transaction cycles and internal control.", "The basic transaction cycles are the following", "Xero implements these cycles as follows", "Sales CycleSales are entered into Xero using Invoices. Imagine the business issuing actual paper invoices for sales (cash sales or on account). This is the exact thing that Xero wants to replicate.", "The invoices can be printed directly from the software and they are automatically numbered in increasing order.", "Under the hood, invoices increase the Sales account and Accounts Receivable (AR) account.", "Purchases CycleBills are entered into Xero using Bills. Again, imagine the business issuing actual bills for purchases (cash purchases or on account). This is the usual case for utilities and Inventory. This is also the thing that Xero wants to replicate.", "The bills can be printed directly from the software and can be used to supplement any approval procedures done by the business.", "Under the hood, bills increase the Purchases account and Accounts Payable (AP) account.", "Cash CycleThis involves all transactions pertaining to Cash. There are 4 types", "That\u2019s the on the transaction cycles part.", "For internal control, you need to understand the concept of system accounts.", "Xero has a comprehensive article for understanding system accounts here. But for our purposes, we\u2019re only going to discuss the following system accounts", "These accounts cannot be used in Manual journals. This means that Xero wants you to use Invoices, Bills, and Cash Transactions (Invoice Payments, Bill Payments, Received Money, and Spent Money) to support the balance of these accounts. This is Xero\u2019s implementation of internal control if you will.", "Of course, you can use the non-system version of the AR, AP, and Bank accounts by creating them in the Chart of Accounts (COA). However, you cannot use the AR, AP, and Bank account types for them.", "The important thing to remember is that Xero is designed in such a way that it will be useful to business owners (not accountants) in the day-to-day operations of the business.", "Designing an accounting is really complex. It will take multiple blog posts just to cover this topic. Hence, for simplicity, we\u2019re going to create the following assumptions (not exactly how Xero implements these)", "That\u2019s it for our assumptions. After designing our database, the reader can lift these assumptions and try mimicking Xero as much as possible.", "Now before reconstructing our version of Xero\u2019s database structure, let\u2019s have a crash course on databases.", "A database is a collection of tables. Each table consists of rows of data called records. The columns are called fields.", "The program to work with a database is called a Database Management System or DBMS. As a simple analogy, DBMS is to Excel program, database is to Excel workbook and table is to an Excel worksheet.", "There are two main differences between a database and an Excel workbook.", "Meaning, you cannot edit data in a database by going over the directly to the data and editing it. (Other DBMS programs have GUIs that allow you to directly access data in a database and edit it like a spreadsheet. But under the hood, that action issues an SQL command).", "Relationships can be one-to-one, one-to-many, or many-to-many.", "One-to-one relationship means \u201ca table row is related to only one row in another table and vice versa\u201d. An example would be employee name to tax identification number.", "This kind is usually included in a single table Employees as there\u2019s really no benefit of separating the data into two tables.", "One-to-many on the hand means \u201ca table row is related to only one or more rows in another table but not vice versa\u201d. An example is Invoices to InvoiceLines. An invoice may have multiple lines but an invoice line belongs only to a particular invoice.", "And as you might have guessed it, many-to-many means \u201ca table row is related to only one or more rows in another table and vice versa\u201d. An example would be a system that implements partial payments.", "An invoice may be paid partially by different payment transactions and a payment may pay different invoices partially.", "How would a database knows these relationships?It\u2019s simple. It\u2019s through the use of primary and foreign keys.", "Primary keys are necessary to distinguish one row from another. They uniquely identify each row of data in a table.", "Foreign keys, on the other hand, are primary keys from another table. Hence, by relating the primary keys and foreign keys, the database relationships are persisted.", "For one-to-many, the \u201cone\u201d side contains the primary key and the \u201cmany\u201d contains this primary as its foreign key. In our above example, to get all the lines belonging to an invoice, we query the InvoiceLines table where the foreign key equals a particular invoice number.", "For many to many, the relationship is broken down into two one-to-many relationships through a use of a third table called the \u201cjoining\u201d table. For example, our partial payment system will have the Invoices table, Payments table, and InvoicePayments table as the joining table. The primary keys of the InvoicePayments table will be a composite key consisting of the primary keys for the Invoices and Payments table as follows", "Take note that the joining table does not contain any other data as it does not have any other purpose aside from joining the Invoices and Payments tables.", "To get the invoices paid by a certain payment transaction, say PAY 1, we join the Invoices and Payments tables through the joining table and query for the payment_id = \u201cPAY 1\u201d.", "That\u2019s it for the basics of a database. We\u2019re now ready to design our database.", "As a simple analogy, DBMS is to Excel program, database is to Excel workbook and table is to an Excel worksheet.", "Now that we have a basic understanding of Xero to start creating a rough sketch of its database structure. Take note that I\u2019m going to use Table_Name format. That\u2019s is capitalized-first-letter words separated by underscores. I\u2019m also going to use pluralized names for the table names.", "For the Sales Cycle, we\u2019re going to have the following tables", "For the Purchases Cycle, we\u2019re going to have the following tables", "For the Cash Cycle, we\u2019re going to have the following tables (Payment tables we\u2019re already created above)", "Conceptually, our database structure is as follows", "This diagram is called Entity-Relationship Diagram or ERD in the database parlance. One-to-many relationships are designated by 1 \u2014 M and many-to-many by M \u2014 M.", "The joining tables are not shown in the above diagram as they are implicit in the tables with many-to-many relationships.", "Now it\u2019s time to implement our model in SQL. Let\u2019s start by defining some conventions first.", "The primary key will have field/column name of id, and the foreign key will have the format table_id where table is the name of the table of the \u201cmany\u201d side in singular form. For example, in the Invoices table, the foreign key will be customer_id.", "Time for the SQL code. Here it is.", "Even though SQL is a bit relax with regards to syntax, you should strive to maintain consistency in your SQL code.", "Take note also of the relationships shown in the ERD above. Remember also that the foreign key is on the many side.", "Order is important as some tables serve as a dependency to another because of the foreign key. For example, you have to create first Invoice_Payments first before the Invoice table as the former is a dependency of the latter. The trick here is to start with the edges of the ERD as those are the ones with the least number of foreign keys.", "You could also download a sample database in SQLite with no content in this link.", "To view it, you can use the free and open-sourced SQLite Browser. Download it here!", "Now that we have the sample database, let\u2019s input data to it. Sample data can be downloaded from here \u2014 just break it down to CSVs as needed.", "Take note that credits are shown as positives and credits as negatives.", "For this post, I just used DB Browser\u2019s import feature to import CSVs from the above Excel file. For example, to import Customers.csv", "If you issue the following SQL command, it should show all the Customers in our database", "To prove that our database works as a crude accounting system, let\u2019s create the Trial Balance.", "The first step is to create the transaction views for our Invoices, Bills, Received_Moneys, and Spent_Moneys transactions. The code will be as follows", "In the first two statements, I\u2019m using a CTE (with the keyword recursive). CTEs are useful as I\u2019m combining 4 tables to get a single view for Invoice transactions and corresponding payments. You could learn more above CTEs in SQLite here.", "After executing the above command, your database should have the following 4 views.", "Finally, we create the code for the Trial Balance or TB for short. Note that TB is just a collection of the balances of our transactions taking note of the rules we laid down when we designed our database.", "The above code contains multiple SQL queries joined by the command union all. I\u2019ve annotated each query to show what each is trying to achieve.", "For example, the first query tries to get all the credits for the Invoice transactions (mostly Sales). The second one for the debits of the Bill transactions (mostly Purchases) and so on.", "Executing it should result in the following TB.", "You can put this in Excel to check that debits equal to credits (which I did). Total debits and credits are 14115 and -14115 respectively.", "Creating an accounting system is really complex. We essentially explored the whole gamut of database design \u2014 from concepts to ERD to creation to querying it. Pat yourself on the back for reaching this far.", "Take note that we deliberately limited our database to focus more on the concepts. You can lift these and try to build another one without the restrictions.", "That\u2019s it! You\u2019re now an SQL ninja! Congratulations!", "Check out my second book Accounting Database Design soon to be published on Leanpub!", "Check out also my first book PowerQuery Guide to Pandas on Leanpub.", "Follow me on Twitter and Linkedin.", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F2ce31f8b8652&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-build-an-accounting-system-using-sqlite-2ce31f8b8652&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-build-an-accounting-system-using-sqlite-2ce31f8b8652&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-build-an-accounting-system-using-sqlite-2ce31f8b8652&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-build-an-accounting-system-using-sqlite-2ce31f8b8652&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----2ce31f8b8652--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----2ce31f8b8652--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@kennethjhim?source=post_page-----2ce31f8b8652--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@kennethjhim?source=post_page-----2ce31f8b8652--------------------------------", "anchor_text": "Kenneth Infante"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F87299d2771bb&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-build-an-accounting-system-using-sqlite-2ce31f8b8652&user=Kenneth+Infante&userId=87299d2771bb&source=post_page-87299d2771bb----2ce31f8b8652---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F2ce31f8b8652&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-build-an-accounting-system-using-sqlite-2ce31f8b8652&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F2ce31f8b8652&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-build-an-accounting-system-using-sqlite-2ce31f8b8652&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@scienceinhd?utm_source=medium&utm_medium=referral", "anchor_text": "Science in HD"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://central.xero.com/s/article/Locked-and-system-accounts-in-your-chart-of-accounts", "anchor_text": "here"}, {"url": "https://github.com/kennethjhim/medium_acctg_database_design/blob/master/db_blank.db", "anchor_text": "link"}, {"url": "https://sqlitebrowser.org/", "anchor_text": "here"}, {"url": "https://github.com/kennethjhim/medium_acctg_database_design/blob/master/new_data-services.xlsx", "anchor_text": "here"}, {"url": "https://sqlite.org/lang_with.html", "anchor_text": "here"}, {"url": "https://unsplash.com/@ianstauffer?utm_source=medium&utm_medium=referral", "anchor_text": "Ian Stauffer"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://leanpub.com/accountingdatabasedesign", "anchor_text": "Accounting Database Design"}, {"url": "https://leanpub.com/powerqueryguidetopandas", "anchor_text": "PowerQuery Guide to Pandas"}, {"url": "https://leanpub.com/powerqueryguidetopandas", "anchor_text": "Leanpub"}, {"url": "https://twitter.com/iamkennethcpa", "anchor_text": "Twitter"}, {"url": "https://www.linkedin.com/in/kennethinfante/", "anchor_text": "Linkedin"}, {"url": "https://medium.com/tag/sql?source=post_page-----2ce31f8b8652---------------sql-----------------", "anchor_text": "Sql"}, {"url": "https://medium.com/tag/database?source=post_page-----2ce31f8b8652---------------database-----------------", "anchor_text": "Database"}, {"url": "https://medium.com/tag/accounting-system?source=post_page-----2ce31f8b8652---------------accounting_system-----------------", "anchor_text": "Accounting System"}, {"url": "https://medium.com/tag/xero?source=post_page-----2ce31f8b8652---------------xero-----------------", "anchor_text": "Xero"}, {"url": "https://medium.com/tag/accounting?source=post_page-----2ce31f8b8652---------------accounting-----------------", "anchor_text": "Accounting"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F2ce31f8b8652&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-build-an-accounting-system-using-sqlite-2ce31f8b8652&user=Kenneth+Infante&userId=87299d2771bb&source=-----2ce31f8b8652---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F2ce31f8b8652&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-build-an-accounting-system-using-sqlite-2ce31f8b8652&user=Kenneth+Infante&userId=87299d2771bb&source=-----2ce31f8b8652---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F2ce31f8b8652&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-build-an-accounting-system-using-sqlite-2ce31f8b8652&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----2ce31f8b8652--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F2ce31f8b8652&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-build-an-accounting-system-using-sqlite-2ce31f8b8652&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----2ce31f8b8652---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----2ce31f8b8652--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----2ce31f8b8652--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----2ce31f8b8652--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----2ce31f8b8652--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----2ce31f8b8652--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----2ce31f8b8652--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----2ce31f8b8652--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----2ce31f8b8652--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@kennethjhim?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@kennethjhim?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Kenneth Infante"}, {"url": "https://medium.com/@kennethjhim/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "108 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F87299d2771bb&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-build-an-accounting-system-using-sqlite-2ce31f8b8652&user=Kenneth+Infante&userId=87299d2771bb&source=post_page-87299d2771bb--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F6d1fd1aa1e00&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-build-an-accounting-system-using-sqlite-2ce31f8b8652&newsletterV3=87299d2771bb&newsletterV3Id=6d1fd1aa1e00&user=Kenneth+Infante&userId=87299d2771bb&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}