{"url": "https://towardsdatascience.com/pandas-tips-tricks-need-for-speed-54e217cc6aa0", "time": 1683002192.24648, "path": "towardsdatascience.com/pandas-tips-tricks-need-for-speed-54e217cc6aa0/", "webpage": {"metadata": {"title": "Pandas Tips & Tricks: Need For Speed | by Joseph Robinson, Ph.D. | Towards Data Science", "h1": "Pandas Tips & Tricks: Need For Speed", "description": "A favorite 1-line of code: map features from a list of strings as keys to a dictionary pointing to the feature vector and follow a functional programming paradigm for optimal performance."}, "outgoing_paragraph_urls": [{"url": "https://towardsdatascience.com/demo-for-rfiw-2020-task-1-kinship-verification-8a8ed7081bcc", "anchor_text": "My last post", "paragraph_index": 0}, {"url": "https://pandas.pydata.org/", "anchor_text": "Pandas", "paragraph_index": 0}, {"url": "https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html", "anchor_text": "DataFrame", "paragraph_index": 2}, {"url": "https://numpy.org/", "anchor_text": "NumPy", "paragraph_index": 6}, {"url": "https://realpython.com/numpy-array-programming/", "anchor_text": "here", "paragraph_index": 8}, {"url": "https://www.w3schools.com/python/python_dictionaries.asp", "anchor_text": "dictionary object", "paragraph_index": 11}, {"url": "https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.apply.html", "anchor_text": "apply", "paragraph_index": 11}, {"url": "https://web.northeastern.edu/smilelab/fiw/", "anchor_text": "FIW", "paragraph_index": 14}, {"url": "https://towardsdatascience.com/demo-for-rfiw-2020-task-1-kinship-verification-8a8ed7081bcc", "anchor_text": "a previous post", "paragraph_index": 16}, {"url": "https://medium.com/u/e8cce06956c9?source=post_page-----54e217cc6aa0--------------------------------", "anchor_text": "Rahul Agarwal", "paragraph_index": 16}, {"url": "https://towardsdatascience.com/demo-for-rfiw-2020-task-1-kinship-verification-8a8ed7081bcc#4d14", "anchor_text": "Section on ROC", "paragraph_index": 16}, {"url": "https://www.jrobsvision.com", "anchor_text": "https://www.jrobsvision.com", "paragraph_index": 20}], "all_paragraphs": ["My last post demonstrated a simple process for evaluating a set of face pairs to determine whether or not the two are blood relatives. Several snippets were breezed over like black boxes. Let us look at one of those snippets, a simple 1-liner: a Python Pandas feature I recently learned and now use frequently.", "The DataFrame contains the list of face pairs p1 and p2 (Fig. 1) and features (type dict) with filenames as the keys and face encodings as values.", "So there you are! In just 1 line of code, we apply a scoring metric to millions of pairs without memory or speed concerns while creating a column for scores for pairs as part of the same DataFrame.", "Before we can appreciate this, let us ensure we see the problem.", "First, read the data structs described above.", "How to measure the similarity of all pairs (i.e., compute a score per row)?", "BUST #1. One could loop, which is one of the least optimal ways of using Pandas or NumPy. For instance,", "THIS IS SLOW. WAY TOO SLOW!!!", "We are not leveraging the best of pandas or even the vectorizing capabilities of NumPy. Learn more here.", "So what else could we do?", "BUST #2. We could read the entire matrix into memory, but this would not only be redundant, for there are typically millions of pairs, each element a vector of size 512 (i.e., 512 x 8 bytes). Thus, I/O overhead will be slow, and memory usage would be non-optimal and, in most cases, an insufficient amount of memory.", "SOLUTION. We could map the keys of the dictionary object to a list of faces. Then, apply a metric on each row (i.e., face A and face B, or column A and B). Hence, each row will have a score for the respective pair.", "Thus, Python Pandas provides a fantastic solution.", "where we specify axis=1, meaning apply across columns (i.e., row-by-row).", "Nearly 18x speedup with little to no effort! Note that the ratio in speedup will only increase with increasing sample sizes. Here, only a subset of FIW was used for demo purposes.", "This potent trick generalizes to many cases come across in ML-based problems.", "In the attempt to match a blog's length to the amount of information provided in a previous post, a few points worthy of emphasis were skipped or skimmed over. Rahul Agarwal made a clever remark about the ROC curve, from which it dawned on me \u2014 no analysis or definition was provided, just implementation. Thus, I updated accordingly (See Section on ROC). Then, other parts seemed worthy of additional explanation. This motivated this blog on my favorite line of code of that post: a narrow topic, a quick blog.", "As a new blogger, I plan to learn, adapt, and improve moving forward. Furthermore, it is you I write to. Thus, your opinion, response, and questions are of great value for this new hobby of mine. Please share any positive and negative thoughts. Ask questions. Suggest improvements or even branch off with an idea of your own!", "All-in-all, I hope you enjoyed it. Stay tuned for more blogs!", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Works at NEU & Tufts. Phd (NEU \u201820). Focus: applied ML w emphasis on vision, big data, automatic face understanding. https://www.jrobsvision.com"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F54e217cc6aa0&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpandas-tips-tricks-need-for-speed-54e217cc6aa0&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpandas-tips-tricks-need-for-speed-54e217cc6aa0&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpandas-tips-tricks-need-for-speed-54e217cc6aa0&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpandas-tips-tricks-need-for-speed-54e217cc6aa0&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----54e217cc6aa0--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----54e217cc6aa0--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://jvision.medium.com/?source=post_page-----54e217cc6aa0--------------------------------", "anchor_text": ""}, {"url": "https://jvision.medium.com/?source=post_page-----54e217cc6aa0--------------------------------", "anchor_text": "Joseph Robinson, Ph.D."}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F8049fa781539&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpandas-tips-tricks-need-for-speed-54e217cc6aa0&user=Joseph+Robinson%2C+Ph.D.&userId=8049fa781539&source=post_page-8049fa781539----54e217cc6aa0---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F54e217cc6aa0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpandas-tips-tricks-need-for-speed-54e217cc6aa0&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F54e217cc6aa0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpandas-tips-tricks-need-for-speed-54e217cc6aa0&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/photos/dast7B6U2Aw", "anchor_text": "Unsplash"}, {"url": "https://towardsdatascience.com/demo-for-rfiw-2020-task-1-kinship-verification-8a8ed7081bcc", "anchor_text": "My last post"}, {"url": "https://pandas.pydata.org/", "anchor_text": "Pandas"}, {"url": "https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.head.html", "anchor_text": "head"}, {"url": "https://www.mathsisfun.com/data/binomial-distribution.html", "anchor_text": "Nchoose(2"}, {"url": "https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html", "anchor_text": "DataFrame"}, {"url": "https://numpy.org/", "anchor_text": "NumPy"}, {"url": "https://realpython.com/numpy-array-programming/", "anchor_text": "here"}, {"url": "https://www.w3schools.com/python/python_dictionaries.asp", "anchor_text": "dictionary object"}, {"url": "https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.apply.html", "anchor_text": "apply"}, {"url": "https://web.northeastern.edu/smilelab/fiw/", "anchor_text": "FIW"}, {"url": "https://towardsdatascience.com/demo-for-rfiw-2020-task-1-kinship-verification-8a8ed7081bcc", "anchor_text": "a previous post"}, {"url": "https://medium.com/u/e8cce06956c9?source=post_page-----54e217cc6aa0--------------------------------", "anchor_text": "Rahul Agarwal"}, {"url": "https://towardsdatascience.com/demo-for-rfiw-2020-task-1-kinship-verification-8a8ed7081bcc#4d14", "anchor_text": "Section on ROC"}, {"url": "https://medium.com/u/a4ef3a4ada4f?source=post_page-----54e217cc6aa0--------------------------------", "anchor_text": "Sofia Heisler"}, {"url": "https://engineering.upside.com/a-beginners-guide-to-optimizing-pandas-code-for-speed-c09ef2c6a4d6", "anchor_text": "A Beginners Guide to Optimizing Pandas Code for Speed"}, {"url": "https://medium.com/u/ffd7e98955c4?source=post_page-----54e217cc6aa0--------------------------------", "anchor_text": "Robbert van der Gugten"}, {"url": "https://medium.com/bigdatarepublic/advanced-pandas-optimize-speed-and-memory-a654b53be6c2", "anchor_text": "Advanced Pandas: Optimize speed and memory"}, {"url": "https://medium.com/u/b7def7a159d6?source=post_page-----54e217cc6aa0--------------------------------", "anchor_text": "Selvaratnam Lavinan"}, {"url": "https://towardsdatascience.com/understanding-the-need-for-optimization-when-using-pandas-8ce23b83330c", "anchor_text": "Understanding the need for optimization when using Pandas"}, {"url": "https://medium.com/tag/python?source=post_page-----54e217cc6aa0---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/data-science?source=post_page-----54e217cc6aa0---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/data?source=post_page-----54e217cc6aa0---------------data-----------------", "anchor_text": "Data"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----54e217cc6aa0---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/tag/functional-programming?source=post_page-----54e217cc6aa0---------------functional_programming-----------------", "anchor_text": "Functional Programming"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F54e217cc6aa0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpandas-tips-tricks-need-for-speed-54e217cc6aa0&user=Joseph+Robinson%2C+Ph.D.&userId=8049fa781539&source=-----54e217cc6aa0---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F54e217cc6aa0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpandas-tips-tricks-need-for-speed-54e217cc6aa0&user=Joseph+Robinson%2C+Ph.D.&userId=8049fa781539&source=-----54e217cc6aa0---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F54e217cc6aa0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpandas-tips-tricks-need-for-speed-54e217cc6aa0&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----54e217cc6aa0--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F54e217cc6aa0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpandas-tips-tricks-need-for-speed-54e217cc6aa0&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----54e217cc6aa0---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----54e217cc6aa0--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----54e217cc6aa0--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----54e217cc6aa0--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----54e217cc6aa0--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----54e217cc6aa0--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----54e217cc6aa0--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----54e217cc6aa0--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----54e217cc6aa0--------------------------------", "anchor_text": ""}, {"url": "https://jvision.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://jvision.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Joseph Robinson, Ph.D."}, {"url": "https://jvision.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "388 Followers"}, {"url": "https://www.jrobsvision.com", "anchor_text": "https://www.jrobsvision.com"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F8049fa781539&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpandas-tips-tricks-need-for-speed-54e217cc6aa0&user=Joseph+Robinson%2C+Ph.D.&userId=8049fa781539&source=post_page-8049fa781539--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F9ebb7f96ef51&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpandas-tips-tricks-need-for-speed-54e217cc6aa0&newsletterV3=8049fa781539&newsletterV3Id=9ebb7f96ef51&user=Joseph+Robinson%2C+Ph.D.&userId=8049fa781539&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}