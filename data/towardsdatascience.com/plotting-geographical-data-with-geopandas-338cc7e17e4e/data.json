{"url": "https://towardsdatascience.com/plotting-geographical-data-with-geopandas-338cc7e17e4e", "time": 1683004152.2362082, "path": "towardsdatascience.com/plotting-geographical-data-with-geopandas-338cc7e17e4e/", "webpage": {"metadata": {"title": "Plotting Geographical Data with Geopandas & Geoplot | by Anh Minh Nguyen | Towards Data Science", "h1": "Plotting Geographical Data with Geopandas & Geoplot", "description": "Traveling back to February 2019, I had been working as a researcher for a media company. My job involved lots of data and spreadsheets to store and analyze it. But for such a fast-growing industry\u2026"}, "outgoing_paragraph_urls": [{"url": "https://www.coderschool.vn/en/", "anchor_text": "CoderSchool", "paragraph_index": 0}, {"url": "https://help.tableau.com/current/pro/desktop/en-us/maps_howto_simple.htm", "anchor_text": "Tableau", "paragraph_index": 1}, {"url": "https://geopandas.org/", "anchor_text": "Geopandas", "paragraph_index": 3}, {"url": "https://residentmario.github.io/geoplot/index.html", "anchor_text": "Geoplot", "paragraph_index": 3}, {"url": "http://opendata.hcmgis.vn/", "anchor_text": "HCMGIS OpenData", "paragraph_index": 5}, {"url": "https://residentmario.github.io/geoplot/plot_references/plot_reference.html", "anchor_text": "Documentation", "paragraph_index": 9}], "all_paragraphs": ["Traveling back to February 2019, I had been working as a researcher for a media company. My job involved lots of data and spreadsheets to store and analyze it. But for such a fast-growing industry with millions rows of new data flowing in every day, Microsoft Excel was hardly sufficient to get the job done. It could easily take a whole morning just to update a few spreadsheets as the performance of Excel quickly deteriorates when working with large data. I was looking out to learn some new tools for my works and I found a Data Analysis with Python course at CoderSchool. To someone with a business background like me, coding felt like rocket science and it was not something that I thought I would be interested in. Nevertheless, being frustrated with Excel constantly crashing, I gave it a try anyway and OMG, it was mind blowing. I have been coding since then and now I am teaching at the same school where I learnt my first line of code.", "One of the topic that I have been encountering very frequently in my jobs was working with geographical data. Before I knew Python, it was a very challenging task to plot data on a map. One of our options was Tableau and its Map function (Source: Tableau). One limitation of Tableau, however, is that it can only plot data by Provinces in Vietnam, while many of the projects required data to be illustrated by Districts.", "In that regard, Python provides much more flexibility and also more customization options when plotting on a map.", "Geopandas and Geoplot are two Python libraries that allow us to handle and visualize geographical data. Geopandas is based on pandas and extends its features to allow manipulating geometric data type. Geoplot, similarly, is built on top of matplotlib for cartographic plots. If you are unfamiliar with pandas and matplotlib, I suggest these two articles to get you started:", "In this example, I will be running the code in a Colab Notebook environment. First, we will need to install Geopandas and Geoplot:", "Geometric data of countries around the world are widely available on the Internet. They come in many different formats, most of which are supported by geopandas. Geometric data of provinces in Vietnam is available on HCMGIS OpenData. In this example, I will use the JSON format. Geopandas has the function read_file to read geometric data from a source. This returns a Geopandas DataFrame containing many columns, but we will only need to care about the Name (District), Province and geometry column.", "Notice the data in the geometry column: they are in MULTIPOLYGON format, which represents the shape and the location of the district on the world map.", "We will also need some data to plot on the map. I have prepared some sample data in the form of a .csv file. It contains the numerical data of some districts in Vietnam and the province they belong to. We can read the file with pandas.", "In order to illustrate our example data on the map, we will need to combine it geopandaswith the geometric data. This can be achieved with the method merge.", "We can now make a map with geoplot. In this example, I am making a Choropleth map, where the value of our variable Data (hue) is represented by the color of the polygons. Geoplot has more options for map types, check out their Documentation.", "The map does not look very nice, but we can add some tweaks to make it better!", "It is probably not a good idea to plot all districts in Vietnam together as there are so many of them. Instead, we can break down the country by region. For example, I can select only four provinces to plot by applying a filter to the DataFrame.", "Change the figsize argument to configure the size of the map and cmap for the color palette used for polygons.", "What we often want to do is to add some labels to the plot (i.e. name of the districts and the values of the variable). Since geoplot is built on top of matplotlib, we can do this using the plt.text. However, it requires the position of the label on the plot. The method centroid returns a x-y coordinate of the point in the center the polygon, which is just what we need!", "Now we can add some labels to the plot with matplotlib.", "Notice those messy text cluster on the lower right corner? It is because the districts in Ho Chi Minh City are too small and their labels are too closed to each other. One solution is to exclude the labels of Ho Chi Minh City\u2019s districts from the map.", "Another very helpful feature of geopandas is to combine multiple polygons together into larger chunks. This is particularly useful when, for example, you want to visualize the data by Provinces instead of Districts. geopandas has the dissolve() function to aggregate Districts data rows into the respective Provinces.", "The Provinces are now in the index of the DataFrame, so the code to draw the labels will need small modification.", "Geopandas and Geoplot are two very useful Python libraries to visualize geographical data. They require more efforts but also allow much more control over the plot.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Data Science Enthusiast. Curious Learner. Cat Person."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F338cc7e17e4e&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fplotting-geographical-data-with-geopandas-338cc7e17e4e&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fplotting-geographical-data-with-geopandas-338cc7e17e4e&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fplotting-geographical-data-with-geopandas-338cc7e17e4e&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fplotting-geographical-data-with-geopandas-338cc7e17e4e&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----338cc7e17e4e--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----338cc7e17e4e--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@minhanhng.4an?source=post_page-----338cc7e17e4e--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@minhanhng.4an?source=post_page-----338cc7e17e4e--------------------------------", "anchor_text": "Anh Minh Nguyen"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F107449c33b29&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fplotting-geographical-data-with-geopandas-338cc7e17e4e&user=Anh+Minh+Nguyen&userId=107449c33b29&source=post_page-107449c33b29----338cc7e17e4e---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F338cc7e17e4e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fplotting-geographical-data-with-geopandas-338cc7e17e4e&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F338cc7e17e4e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fplotting-geographical-data-with-geopandas-338cc7e17e4e&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://www.mapuipatterns.com/choropleth-map/", "anchor_text": "Map UI Patterns"}, {"url": "https://www.coderschool.vn/en/", "anchor_text": "CoderSchool"}, {"url": "https://help.tableau.com/current/pro/desktop/en-us/maps_howto_simple.htm", "anchor_text": "Tableau"}, {"url": "https://community.tableau.com/groups/vietnam/blog/2018/05/08/t%C3%ADnh-n%C4%83ng-m%E1%BB%9Bi-tr%C3%AAn-tableau-2018", "anchor_text": "Tableau Community Forums"}, {"url": "https://geopandas.org/", "anchor_text": "Geopandas"}, {"url": "https://residentmario.github.io/geoplot/index.html", "anchor_text": "Geoplot"}, {"url": "https://towardsdatascience.com/a-quick-introduction-to-the-pandas-python-library-f1b678f34673", "anchor_text": "A Quick Introduction to the \u201cPandas\u201d Python LibrarySome Backgroundtowardsdatascience.com"}, {"url": "https://towardsdatascience.com/data-visualization-using-matplotlib-16f1aae5ce70", "anchor_text": "Data Visualization using MatplotlibData Visualization is an important part of business activities as organizations nowadays collect a huge amount of data\u2026towardsdatascience.com"}, {"url": "http://opendata.hcmgis.vn/", "anchor_text": "HCMGIS OpenData"}, {"url": "https://residentmario.github.io/geoplot/plot_references/plot_reference.html", "anchor_text": "Documentation"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F338cc7e17e4e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fplotting-geographical-data-with-geopandas-338cc7e17e4e&user=Anh+Minh+Nguyen&userId=107449c33b29&source=-----338cc7e17e4e---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F338cc7e17e4e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fplotting-geographical-data-with-geopandas-338cc7e17e4e&user=Anh+Minh+Nguyen&userId=107449c33b29&source=-----338cc7e17e4e---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F338cc7e17e4e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fplotting-geographical-data-with-geopandas-338cc7e17e4e&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----338cc7e17e4e--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F338cc7e17e4e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fplotting-geographical-data-with-geopandas-338cc7e17e4e&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----338cc7e17e4e---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----338cc7e17e4e--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----338cc7e17e4e--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----338cc7e17e4e--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----338cc7e17e4e--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----338cc7e17e4e--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----338cc7e17e4e--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----338cc7e17e4e--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----338cc7e17e4e--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@minhanhng.4an?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@minhanhng.4an?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Anh Minh Nguyen"}, {"url": "https://medium.com/@minhanhng.4an/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "206 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F107449c33b29&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fplotting-geographical-data-with-geopandas-338cc7e17e4e&user=Anh+Minh+Nguyen&userId=107449c33b29&source=post_page-107449c33b29--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fa4f7d5e790f9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fplotting-geographical-data-with-geopandas-338cc7e17e4e&newsletterV3=107449c33b29&newsletterV3Id=a4f7d5e790f9&user=Anh+Minh+Nguyen&userId=107449c33b29&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}