{"url": "https://towardsdatascience.com/quick-guide-to-dockerized-training-in-aws-sagemaker-with-code-example-94909c17556c", "time": 1683015720.924361, "path": "towardsdatascience.com/quick-guide-to-dockerized-training-in-aws-sagemaker-with-code-example-94909c17556c/", "webpage": {"metadata": {"title": "Quick Guide to Dockerized Training in AWS Sagemaker (with Code Example) | by Zora Li | Oct, 2020 | Medium | Towards Data Science", "h1": "Quick Guide to Dockerized Training in AWS Sagemaker (with Code Example)", "description": "This post explores a way of bringing your own code and image and quickly set up training in AWS Sagemaker. It comes with an easy-to-follow-along code example and detailed instruction."}, "outgoing_paragraph_urls": [{"url": "https://docs.aws.amazon.com/cli/latest/userguide/install-cliv2-mac.html", "anchor_text": "link", "paragraph_index": 4}, {"url": "https://aws.amazon.com/free/?trk=ps_a134p000003yBfvAAE&trkCampaign=acq_paid_search_brand&sc_channel=ps&sc_campaign=acquisition_US&sc_publisher=google&sc_category=core&sc_country=US&sc_geo=NAMER&sc_outcome=acq&sc_detail=%2Baws%20%2Bfree&sc_content=Cost_bmm&sc_segment=438195701024&sc_medium=ACQ-P|PS-GO|Brand|Desktop|SU|AWS|Core|US|EN|Text&s_kwcid=AL!4422!3!438195701024!b!!g!!%2Baws%20%2Bfree&ef_id=Cj0KCQjw28T8BRDbARIsAEOMBcwCR5zop0jeg0l-y_gNpAIpY2hDfRX6e6Vh4evFgjOkWi7cb-ZFRDIaAmeoEALw_wcB:G:s&s_kwcid=AL!4422!3!438195701024!b!!g!!%2Baws%20%2Bfree&all-free-tier.sort-by=item.additionalFields.SortRank&all-free-tier.sort-order=asc", "anchor_text": "free-tier", "paragraph_index": 5}, {"url": "https://www.kaggle.com/c/house-prices-advanced-regression-techniques", "anchor_text": "House Prices: Advanced Regression Techniques", "paragraph_index": 12}, {"url": "https://docs.aws.amazon.com/sagemaker/latest/dg/docker-basics.html", "anchor_text": "this guide", "paragraph_index": 13}, {"url": "https://sagemaker.readthedocs.io/en/stable/api/training/estimators.html#sagemaker.estimator.EstimatorBase.fit", "anchor_text": "Sagemaker training API", "paragraph_index": 15}, {"url": "https://docs.aws.amazon.com/AmazonECR/latest/userguide/repository-create.html", "anchor_text": "this link", "paragraph_index": 16}, {"url": "https://sagemaker.readthedocs.io/en/stable/api/training/estimators.html#sagemaker.estimator.EstimatorBase.fit#input_mode", "anchor_text": "link", "paragraph_index": 20}, {"url": "https://github.com/zoraxl/WH002-AWS-Containerized-Training", "anchor_text": "here", "paragraph_index": 22}, {"url": "https://www.linkedin.com/in/zoraxl/", "anchor_text": "https://www.linkedin.com/in/zoraxl/", "paragraph_index": 24}], "all_paragraphs": ["Training a model is tedious, especially when training scripts consume up all of your computer power and you can do nothing but wait. It happens to me all the time - either when I am starting the model building process or I am finalizing the model with parameter tuning. Luckily, big cloud vendors provide solutions to train and deploy your model in the cloud without having to use your local capacity. AWS, Azure, and GCP all have similar offerings and I am using AWS Sagemaker here to show a way of using your own containerized docker to train the model in the cloud.", "Cloud training usually a nightmare to me when it comes to configuration. Different cloud vendors have a different structure for storage, instances, and APIs, which means we have to read through manuals and dev guides to make things function. I feel the same way when I started to use Sagemaker. But, instead of looking at their console and trying to find a solution in the UI, I find Sagemaker SDK pretty powerful. The typical or advertised usage of Sagemaker is by their pre-built algorithm. But unless if you are just shopping for a baseline model, you will have to use your own model code. Of course, you can study their manual and learn how to tune or modify their algorithm APIs, yet I believe there are more efficient ways.", "So I created this beginner guide to showcase a way of utilizing Sagemaker training instance while remaining the capacity of using docker to train your own code. I hope the solution will help those who need it!", "This exercise will need some prerequisite setup to start with. If you have used Sagemaker SDK previously, you may skip this part. Otherwise, please follow the setup carefully.", "Check this link to follow the instruction to download and install AWS CLI according to the system you are using. The example in this tutorial is using Mac-OS.", "If you don\u2019t have an account with AWS, you can sign up for one for free (note: it will require your credit card info, and be sure to read the free-tier offer in case any charges incurred).", "Log in to the console and navigate yourself to IAM. Create a user and attach the SagemakerFullAccess policy. Also, create an access key under Security Credential and download the credential .csv file.", "Once the AWS CLI is installed, you can set up with the credential .csv file you just setup. In the terminal, type in the following:", "If you are not using MFA with your user, simply fill in the info you acquired from the credential file, and you are done. Otherwise please also added your MFA profile in the configure file.", "Check your configuration. If your CLI is set up correctly, you should see the bucket listed under your account.", "This step is optional since you may use other ways for your environment. However, I will briefly walk through how to set up the Pipenv environment to let you easily follow along.", "Setting up correctly and it should lead to something like this.", "This example will use House Prices: Advanced Regression Techniques dataset, which contains 79 variables to predict the final price of each home. After comparing a bunch of models, the xgboost regressor stands out and our job is to fine-tune the regressor in the training scripts. RMSE will be the metric for model selection.", "If you are not familiarized with Docker, check this guide by AWS. What we gonna do here is to build our own docker image and push it to AWS ECR. Elastic Container Registry is a managed service by AWS to store and manage Docker images. To use it with Sagemaker SDK, we need to push the docker image to ECR to allow our training instance to pull images from there.", "The above diagram illustrates how we setup the Dockerfile. It is recommended to test your docker image locally before pushing it to ECR.", "This example will use Sagemaker training API to test perform local training in the aforesaid Docker image.", "AWS ECR provides a console for setting up the Docker repository within a few clicks. Check this link if you want to use the console. Alternatively, you can use the AWS CLI to set up the Docker repository with the command line.", "Now our image is set and ready to use.", "Once we have all preceding steps are set up properly, the workflow to kick-off training in Sagemaker is relatively simple. First, we need to store data in a specified S3 bucket. You can create one in the AWS console and upload the data or use Sagemaker SDK. And then we utilize the sagemaker.estimator to kick-off training.", "The above script will kick off a training job with the specified configuration. Check the free-tier instance to avoid charges. I am using \u201cml.c4.xlarge\u201d which should be the free-tier instance if your account is open within two months. After training is complete, you can view your training job in the Sagemaker console:", "You can also find your s3 model artifact from the same page under Output. Generally, the estimator will create a new bucket for you to store the artifacts unless you specify in the output_path . Check the link here for clarity.", "One thing to notice here, if you would like to have your model or output to be exported from the Docker, simply save the file to opt/ml/model and the Sagemaker will package your desired output to a model.tar.gz and upload it to the output bucket. You then can download and extract the file either by the S3 bucket console or Python SDK.", "For a complete example, check my repo here. Peace! \ud83e\udd17", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Data Enthusiast | Data Scientist | https://www.linkedin.com/in/zoraxl/"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F94909c17556c&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fquick-guide-to-dockerized-training-in-aws-sagemaker-with-code-example-94909c17556c&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fquick-guide-to-dockerized-training-in-aws-sagemaker-with-code-example-94909c17556c&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fquick-guide-to-dockerized-training-in-aws-sagemaker-with-code-example-94909c17556c&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fquick-guide-to-dockerized-training-in-aws-sagemaker-with-code-example-94909c17556c&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----94909c17556c--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----94909c17556c--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://zorali2788.medium.com/?source=post_page-----94909c17556c--------------------------------", "anchor_text": ""}, {"url": "https://zorali2788.medium.com/?source=post_page-----94909c17556c--------------------------------", "anchor_text": "Zora Li"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F67ce20fa0d10&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fquick-guide-to-dockerized-training-in-aws-sagemaker-with-code-example-94909c17556c&user=Zora+Li&userId=67ce20fa0d10&source=post_page-67ce20fa0d10----94909c17556c---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F94909c17556c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fquick-guide-to-dockerized-training-in-aws-sagemaker-with-code-example-94909c17556c&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F94909c17556c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fquick-guide-to-dockerized-training-in-aws-sagemaker-with-code-example-94909c17556c&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://towardsdatascience.com/tagged/making-sense-of-big-data", "anchor_text": "Making Sense of Big Data"}, {"url": "https://unsplash.com/@guibolduc?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Guillaume Bolduc"}, {"url": "https://unsplash.com/s/photos/container?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Unsplash"}, {"url": "https://docs.aws.amazon.com/cli/latest/userguide/install-cliv2-mac.html", "anchor_text": "link"}, {"url": "https://aws.amazon.com/free/?trk=ps_a134p000003yBfvAAE&trkCampaign=acq_paid_search_brand&sc_channel=ps&sc_campaign=acquisition_US&sc_publisher=google&sc_category=core&sc_country=US&sc_geo=NAMER&sc_outcome=acq&sc_detail=%2Baws%20%2Bfree&sc_content=Cost_bmm&sc_segment=438195701024&sc_medium=ACQ-P|PS-GO|Brand|Desktop|SU|AWS|Core|US|EN|Text&s_kwcid=AL!4422!3!438195701024!b!!g!!%2Baws%20%2Bfree&ef_id=Cj0KCQjw28T8BRDbARIsAEOMBcwCR5zop0jeg0l-y_gNpAIpY2hDfRX6e6Vh4evFgjOkWi7cb-ZFRDIaAmeoEALw_wcB:G:s&s_kwcid=AL!4422!3!438195701024!b!!g!!%2Baws%20%2Bfree&all-free-tier.sort-by=item.additionalFields.SortRank&all-free-tier.sort-order=asc", "anchor_text": "free-tier"}, {"url": "https://github.com/zoraxl/WH002-AWS-Containerized-Training", "anchor_text": "here"}, {"url": "https://www.kaggle.com/c/house-prices-advanced-regression-techniques", "anchor_text": "House Prices: Advanced Regression Techniques"}, {"url": "https://docs.aws.amazon.com/sagemaker/latest/dg/docker-basics.html", "anchor_text": "this guide"}, {"url": "https://sagemaker.readthedocs.io/en/stable/api/training/estimators.html#sagemaker.estimator.EstimatorBase.fit", "anchor_text": "Sagemaker training API"}, {"url": "https://docs.aws.amazon.com/AmazonECR/latest/userguide/repository-create.html", "anchor_text": "this link"}, {"url": "https://sagemaker.readthedocs.io/en/stable/api/training/estimators.html#sagemaker.estimator.EstimatorBase.fit#input_mode", "anchor_text": "link"}, {"url": "https://github.com/zoraxl/WH002-AWS-Containerized-Training", "anchor_text": "here"}, {"url": "https://medium.com/tag/aws-sagemaker?source=post_page-----94909c17556c---------------aws_sagemaker-----------------", "anchor_text": "Aws Sagemaker"}, {"url": "https://medium.com/tag/docker?source=post_page-----94909c17556c---------------docker-----------------", "anchor_text": "Docker"}, {"url": "https://medium.com/tag/data-science?source=post_page-----94909c17556c---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----94909c17556c---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/tag/making-sense-of-big-data?source=post_page-----94909c17556c---------------making_sense_of_big_data-----------------", "anchor_text": "Making Sense Of Big Data"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F94909c17556c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fquick-guide-to-dockerized-training-in-aws-sagemaker-with-code-example-94909c17556c&user=Zora+Li&userId=67ce20fa0d10&source=-----94909c17556c---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F94909c17556c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fquick-guide-to-dockerized-training-in-aws-sagemaker-with-code-example-94909c17556c&user=Zora+Li&userId=67ce20fa0d10&source=-----94909c17556c---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F94909c17556c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fquick-guide-to-dockerized-training-in-aws-sagemaker-with-code-example-94909c17556c&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----94909c17556c--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F94909c17556c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fquick-guide-to-dockerized-training-in-aws-sagemaker-with-code-example-94909c17556c&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----94909c17556c---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----94909c17556c--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----94909c17556c--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----94909c17556c--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----94909c17556c--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----94909c17556c--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----94909c17556c--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----94909c17556c--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----94909c17556c--------------------------------", "anchor_text": ""}, {"url": "https://zorali2788.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://zorali2788.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Zora Li"}, {"url": "https://zorali2788.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "13 Followers"}, {"url": "https://www.linkedin.com/in/zoraxl/", "anchor_text": "https://www.linkedin.com/in/zoraxl/"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F67ce20fa0d10&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fquick-guide-to-dockerized-training-in-aws-sagemaker-with-code-example-94909c17556c&user=Zora+Li&userId=67ce20fa0d10&source=post_page-67ce20fa0d10--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F6a46f4500e4f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fquick-guide-to-dockerized-training-in-aws-sagemaker-with-code-example-94909c17556c&newsletterV3=67ce20fa0d10&newsletterV3Id=6a46f4500e4f&user=Zora+Li&userId=67ce20fa0d10&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}