{"url": "https://towardsdatascience.com/a-gentle-introduction-to-python-for-tableau-developers-part-3-8634fa5b9dec", "time": 1683012684.812368, "path": "towardsdatascience.com/a-gentle-introduction-to-python-for-tableau-developers-part-3-8634fa5b9dec/", "webpage": {"metadata": {"title": "A gentle introduction to Python for Tableau Developers (Part 3) | by Elliott Stam | Towards Data Science", "h1": "A gentle introduction to Python for Tableau Developers (Part 3)", "description": "One of Tableau\u2019s biggest advantages is how it lets you swim around in your data. You don\u2019t always need a fine-tuned dashboard to find meaningful insights, so even someone with quite a basic\u2026"}, "outgoing_paragraph_urls": [{"url": "https://towardsdatascience.com/a-gentle-introduction-to-python-for-tableau-developers-part-2-c18095a03e0e", "anchor_text": "previous article", "paragraph_index": 1}], "all_paragraphs": ["One of Tableau\u2019s biggest advantages is how it lets you swim around in your data. You don\u2019t always need a fine-tuned dashboard to find meaningful insights, so even someone with quite a basic understanding of Tableau can make a significant impact.", "For this article, we\u2019ll play into that theme of not needing to know everything about a tool in order to build useful things with it. In our previous article, we touched on how you can create custom calculations and color visuals in Python to arrive at visuals that look quite similar to what we build in Tableau.", "Today, let\u2019s expand on what we\u2019ve learned so far. Let\u2019s see how we can take what we\u2019ve seen up to this point and apply that to a common scenario: data exploration.", "Previously, we took our \u2018Sales\u2019 and \u2018Profit\u2019 columns and created a new column named \u2018Profit Ratio\u2019. We then modified our plot from the first article, showing sales per product sub-category, and added color to the visual using our new \u2018Profit Ratio\u2019 metric:", "Whenever I teach a newcomer to Tableau how to use the software, I always plug in this visual somewhere in the mix.", "Something I view as a common mistake in data visualization is that people often think just because they can use color they always should. If we throw color randomly at our visuals, the results are typically no better than a simple table. Some visuals that get lost in the sauce can be downright confusing.", "In our use case, color is appropriate because it helps to quickly focus in on the desired \u201ca-ha\u201d revelation: higher volumes of sales do not necessarily lead to higher volumes of profits.", "If this data were representative of a real business, a natural question that follows this visual might be: what\u2019s happening that\u2019s making some of our high-sale items less profitable (let\u2019s assume this is bad) and some of our low-sale items highly profitable (let\u2019s assume this is good)?", "To provide any meaningful answers to that question, we\u2019re going to need to do a little data exploration.", "First of all, context matters. The context of this data is that we are a retail store selling products. Customers can only buy what we sell, and they are buying at prices we have set. Therefore, if we have any negative profits this is a problem of our own making. Perhaps we are losing money on some products intentionally, lowering prices to attract customers whose other purchases make up for the initial loss.", "My opinion is that regardless of what we discover, we want to land on something actionable. We need to be able to do something with the insights we generate, because otherwise what\u2019s the point?", "So rather than analyze ALL of our customers, let\u2019s focus in on our top customers. If you have a limited budget for outreach and customer service, it often makes sense to focus those resources on the top customers. For this exercise, let\u2019s define our \u2018top customers\u2019 as those who spend the most money per order. Let\u2019s keep it simple and say we\u2019re interested in getting an overview of how the sales and profitability looks for our top 10% of customers.", "For this Superstore data, that means we are looking at the top 159 customers.", "In Tableau, we would reach for a calculated field. In Python, we will want to first create a dataframe at the appropriate level of aggregation and then add a new column storing the average sales per order.", "We want to know the sales per order for each customer, so the appropriate level of aggregation here is at the customer level (Customer ID).", "To calculate the sales per order for each customer, we will need to calculate the total sales and count the number of orders for each customer.", "We can piece this together using a Pandas dataframe (note that \u2018store_df\u2019 is the dataframe storing all of the Superstore data):", "So let\u2019s read through this line by line like it\u2019s a book:", "First, let\u2019s admire a snippet of the dataframe we created in the previous step:", "Alright, so we have a dataframe with our customers, the number of orders those customers made, and the total amount spent.", "To calculate the total sales per order, all we need to do is divide the \u2018Sales\u2019 column by the \u2018order_count\u2019 column.", "In the code snippet above, we have defined a new column \u2018avg_sales_per_order\u2019 and set that to be the result of our \u2018Sales\u2019 column divided by our \u2018order_count\u2019 column.", "Here\u2019s what that looks like, now sorted in descending order by \u2018avg_sales_per_order\u2019.", "Let\u2019s do a quick side-quest. Comparing the order counts from the beginning of step 3 and the end of step 3, it seems there might be a lot of variation in the order counts of our customers.", "In an effort to better understand customer behavior, let\u2019s visualize the distribution of order counts.", "Running the line of code above gives us this:", "Ah, it looks like customers are naturally grouped into two camps. One group averages about 5 orders and the other averages about 25 orders.", "This could be a reflection of our product mix; some customers may purchase a small amount of expensive items, while other customers shop more frequently for less expensive products.", "In Tableau, one way to do this would be to create a filter for the \u2018Customer ID\u2019 field based on the calculated field for \u2018avg_sales_per_order\u2019 and only include the top 159 results.", "In Python, one potential solution is this:", "First of all, we are storing the results in a variable named \u2018top_customers_df\u2019.", "Second, we are using Pandas dataframe notation to essentially say \u201cgive us all rows of the \u2018store_df\u2019 dataframe that satisfy this condition.\u201d In our case, the condition needing to be satisfied is that any given \u2018Customer ID\u2019 encountered must also be in the \u2018Customer ID\u2019 column for the top 159 rows of our \u2018orders_per_customer_df\u2019 dataframe.", "In other words, we are filtering our store data such that we are only seeing data for the customer ID values seen in the top 159 rows of the dataframe that holds our top customers.", "Go back and check out how we defined that \u2018orders_per_customer_df\u2019 dataframe if this is not clicking. Keep in mind that the .head(x) function returns the top x number of rows for any dataframe calling it.", "Now let\u2019s take a quick look at the results, having filtered our store data to only include the top 159 customers. Let\u2019s group this by \u2018Sub-Category\u2019 and aggregate the data to see total sales, average discount percentage, total profit, and the total number of orders.", "Are you getting a feel for how these Pandas dataframes work? I recommend plugging the code in yourself and playing around with it. What happens if you change \u2018sum\u2019 to \u2018median\u2019, \u2018min\u2019, or \u2018max\u2019?", "Before looking at the code to create this visual, let\u2019s take a moment to soak it in. What are we looking at?", "On the left, we see total profits by sub-category. All of the bars where profits are above zero are colored blue. There is only one unprofitable sub-category here, and it\u2019s \u2018Tables\u2019.", "Remember \u2018Tables\u2019 from the previous article? It was the sub-category screaming for attention. What\u2019s interesting here is that Tables isn\u2019t just unprofitable, it\u2019s unprofitable even when looking at our top 10% of customers. Why is it unprofitable?", "That\u2019s where the visual on the right-hand side comes in highlighting the average discount. Once again, \u2018Tables\u2019 is screaming for attention, and here we can see that some abnormally high discounts are being given on our tables.", "There may be a good business reason to heavily discount tables (perhaps it\u2019s a loss leader), but at least now we know why tables are unprofitable: they are being discounted at >25%, which is much higher than any other product sub-category.", "Here\u2019s how the visual above works:", "The first line is something you\u2019ll often see when working with Python plotting libraries. We are establishing a figure and a set of axes. The figure is like the canvas on which the visuals will live, and the axes act as the spine of our numerical and categorical data. In the first line we define a figure with 2 pieces of real estate: 1 row with two plots side by side. The \u2018sharey\u2019 parameter says that both visuals will share a y-axis, so there is no need to list out the sub-categories twice.", "We then call on the Seaborn library, which was imported earlier under the alias \u2018sns\u2019, to plot our bar graphs. Here we define the dataframe providing our data, the columns which will provide our x-axis and y-axis, and the color gradient for each visual. The \u2018ci\u2019 parameter is set to \u2018False\u2019 to remove extra lines that would otherwise appear to show us confidence intervals. Go ahead and flip that to \u2018True\u2019 and see how the visual changes.", "The final lines are cosmetic formatting, getting rid of tick marks and such. I highly recommend tinkering with this to get comfortable with the concept of formatting through code rather than through a click-and-drag interface like Tableau. Something nice about defining formatting through code is that you can build reusable functions that always apply your favorite formatting tricks.", "So, here we are. Our attention-seeking tables got the attention they wanted all along, and we got a bit more exposure to shaping and controlling our data using Pandas dataframes.", "The data exploration here wasn\u2019t earth-shattering, but if your comfortable with the Python code we\u2019ve written up until now, then you\u2019re ready to dive into our next session!", "Tune in next time, when we\u2019ll explore joining data from different tables. Pandas makes this quite easy for us, so it\u2019ll be a breeze for us to join our \u2018Orders\u2019 data to our \u2018Returns\u2019 data and answer the question: how many of our products have been returned? What percentage of our revenue is disappearing due to returns?", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Data scientist and author. Sometimes seen falling down mountains with a snowboard strapped to my feet."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F8634fa5b9dec&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-gentle-introduction-to-python-for-tableau-developers-part-3-8634fa5b9dec&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-gentle-introduction-to-python-for-tableau-developers-part-3-8634fa5b9dec&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-gentle-introduction-to-python-for-tableau-developers-part-3-8634fa5b9dec&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-gentle-introduction-to-python-for-tableau-developers-part-3-8634fa5b9dec&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----8634fa5b9dec--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----8634fa5b9dec--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@elliottstam?source=post_page-----8634fa5b9dec--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@elliottstam?source=post_page-----8634fa5b9dec--------------------------------", "anchor_text": "Elliott Stam"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fd193f11526c9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-gentle-introduction-to-python-for-tableau-developers-part-3-8634fa5b9dec&user=Elliott+Stam&userId=d193f11526c9&source=post_page-d193f11526c9----8634fa5b9dec---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F8634fa5b9dec&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-gentle-introduction-to-python-for-tableau-developers-part-3-8634fa5b9dec&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F8634fa5b9dec&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-gentle-introduction-to-python-for-tableau-developers-part-3-8634fa5b9dec&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://towardsdatascience.com/a-gentle-introduction-to-python-for-tableau-developers-part-2-c18095a03e0e", "anchor_text": "previous article"}, {"url": "https://medium.com/tag/python?source=post_page-----8634fa5b9dec---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/tableau?source=post_page-----8634fa5b9dec---------------tableau-----------------", "anchor_text": "Tableau"}, {"url": "https://medium.com/tag/data-analysis?source=post_page-----8634fa5b9dec---------------data_analysis-----------------", "anchor_text": "Data Analysis"}, {"url": "https://medium.com/tag/data-science?source=post_page-----8634fa5b9dec---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/data-visualization?source=post_page-----8634fa5b9dec---------------data_visualization-----------------", "anchor_text": "Data Visualization"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F8634fa5b9dec&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-gentle-introduction-to-python-for-tableau-developers-part-3-8634fa5b9dec&user=Elliott+Stam&userId=d193f11526c9&source=-----8634fa5b9dec---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F8634fa5b9dec&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-gentle-introduction-to-python-for-tableau-developers-part-3-8634fa5b9dec&user=Elliott+Stam&userId=d193f11526c9&source=-----8634fa5b9dec---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F8634fa5b9dec&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-gentle-introduction-to-python-for-tableau-developers-part-3-8634fa5b9dec&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----8634fa5b9dec--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F8634fa5b9dec&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-gentle-introduction-to-python-for-tableau-developers-part-3-8634fa5b9dec&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----8634fa5b9dec---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----8634fa5b9dec--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----8634fa5b9dec--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----8634fa5b9dec--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----8634fa5b9dec--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----8634fa5b9dec--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----8634fa5b9dec--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----8634fa5b9dec--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----8634fa5b9dec--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@elliottstam?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@elliottstam?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Elliott Stam"}, {"url": "https://medium.com/@elliottstam/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "509 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fd193f11526c9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-gentle-introduction-to-python-for-tableau-developers-part-3-8634fa5b9dec&user=Elliott+Stam&userId=d193f11526c9&source=post_page-d193f11526c9--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F2f1f73d79eed&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-gentle-introduction-to-python-for-tableau-developers-part-3-8634fa5b9dec&newsletterV3=d193f11526c9&newsletterV3Id=2f1f73d79eed&user=Elliott+Stam&userId=d193f11526c9&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}