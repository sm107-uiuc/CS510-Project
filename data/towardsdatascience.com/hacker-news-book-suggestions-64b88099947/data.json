{"url": "https://towardsdatascience.com/hacker-news-book-suggestions-64b88099947", "time": 1682994258.009208, "path": "towardsdatascience.com/hacker-news-book-suggestions-64b88099947/", "webpage": {"metadata": {"title": "Analyzing Hacker News book suggestions in Python | by Alessandro Mozzato | Towards Data Science", "h1": "Analyzing Hacker News book suggestions in Python", "description": "A few days ago the traditional \u201cwhat books did you read this year\u201d thread popped up on Hacker News. The thread is full of very nice book suggestions. Attempting to make a reading list for next year I\u2026"}, "outgoing_paragraph_urls": [{"url": "https://news.ycombinator.com/item?id=18661546", "anchor_text": "thread", "paragraph_index": 0}, {"url": "https://github.com/HackerNews/API", "anchor_text": "very nice API", "paragraph_index": 1}, {"url": "https://hacker-news.firebaseio.com/v0/item/18661546.json').json()", "anchor_text": "18661546", "paragraph_index": 1}, {"url": "https://www.goodreads.com/api", "anchor_text": "Goodreads API", "paragraph_index": 7}, {"url": "https://www.goodreads.com/api/index#search.books", "anchor_text": "search.books", "paragraph_index": 8}, {"url": "https://github.com/AlessandroMozzato/hn_books", "anchor_text": "Github", "paragraph_index": 13}, {"url": "http://Booking.com", "anchor_text": "Booking.com", "paragraph_index": 15}, {"url": "https://alemozzato.com/", "anchor_text": "https://alemozzato.com/", "paragraph_index": 15}], "all_paragraphs": ["A few days ago the traditional \u201cwhat books did you read this year\u201d thread popped up on Hacker News. The thread is full of very nice book suggestions. Attempting to make a reading list for next year I though it would be fun to get the data and analyze it. In the following article I will show how I used Hacker News\u2019 API to scrape the posts content, how I selected the most common titles and checked them against Goodreads API and finally how I came up with the definitive top 20 most recommended books. As always, dealing with text data is anything but straightforward. The final result, however, is quite satisfying!", "The first step is getting the data. Luckily, Hacker News provides a very nice API to freely scrape all of its content. The API has endpoints for posts, users, top posts a few others. For this article we will use the one for posts. It\u2019s very simple to use, here is the basic syntax: v0/item/{id}/.json where id is the item we are interested in. In this case the thread\u2019s id is 18661546, so here is an example on how to get the main page data:", "The same API call is also used for the sub posts of a thread or a post, whose ids can be found in the kids key of the parent post. Looping over the kids we can get the text of every post in the thread.", "Now that we have the text data we want to extract book titles from it. One possible approach would be to look for all Amazon or Goodreads links in the article and just group by that. This is a clean approach because it doesn\u2019t depend on any text processing. However, just from taking a quick look at the thread it is clear that the vast majority of suggestions do not have any link associated to them. So I decided to go for the more difficult route: grouping ngrams together and match those ngrams with possible books.", "So, after eliminating special characters from the text I grouped together bigrams, trigrams, 4-grams and 5-grams and count the occurrences. This is an example to count bigrams:", "Usually in text application one of the first thing to do while processing the data is to eliminate stopwords, i.e. the most common words in a language, like articles and prepositions. In our case we did not eliminate stopwords from our text yet, therefore most of these ngrams would be almost exclusively composed of stopwords. In fact, here is a sample output of the top 10 most common bigrams in our data:", "Having stopwords in our data is fine, most title books would have stopwords in them so we want to keep these. However, to avoid looking up too many combinations we eliminate the ngrams that are solely composed of stopwords, keeping all the others.", "Now that we have a list of possible ngrams we will use the Goodreads API to check if these ngrams correspond to book titles. In case multiple matches are available for a search I decided to take the most recent publication as the result of the search. This is assuming that the most recent book would be the most likely match for this context. This is of course an assumption that might lead to errors.", "The Goodreads API is a bit less straightforward to use than the Hacker News one as it returns results in XML, which is less friendly to use than the JSON format. In this analysis I used the xmltodict python package to convert the XML to JSON. The API method we need is search.books which allows to search books by title, author or ISBN. Here is a code sample to get book title and author for the most recently published search result:", "This method allows us to associate ngrams to possible books. We check the list of books we get matching all ngrams with the Goodreads API against the full text data. Before performing the actual check we cut the book names eliminating punctuation (particularly semicolumns) and subtitles. We only consider the main title with assumption that most of the time only this part of the title would be used (some of the full titles in the list are actually really long!). Ranking the results we get by number of occurences in the thread we get this list:", "So Bad Blood looks to be the top most recommended book in the thread. Checking the other results most of them seems to make sense and match with the thread, including the counts. The only big mistake I could spot in the list is for position number 2, where the book Magi was identified instead of The Magicians by Lev Grossman. The latter is indeed cited 7 times in the text. This error is caused by the assumption we made of considering the most recent book out of the results from the Goodreads API. As for results that were on the original data and do not appear in the list I could not spot any obvious one beside The three body problem. This book or others from the same trilogy are cited several times in the text but because they are referred by different names or with different punctuation they were not picked up by this method. A way to solve this could be to use fuzzy matching in this step.", "In conclusion in this article I have showed how I extracted data from Hacker News, parsed it to extract book titles, checked them using the Goodreads API and matched the final list with the original text. The task proved to be quite complex as it required several assumptions and dealing with two different APIs. Moreover the final result still had some incorrect results.", "Nonetheless I managed to get a good final result. This is the list of the top 20 books recommended by Hacker News:", "The source can be viewed on Github. Comments or criticism of any type would be really appreciated.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Data Scientist at Booking.com, Climate Science PhD. https://alemozzato.com/"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F64b88099947&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhacker-news-book-suggestions-64b88099947&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhacker-news-book-suggestions-64b88099947&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhacker-news-book-suggestions-64b88099947&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhacker-news-book-suggestions-64b88099947&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----64b88099947--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----64b88099947--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@mozzatoale?source=post_page-----64b88099947--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@mozzatoale?source=post_page-----64b88099947--------------------------------", "anchor_text": "Alessandro Mozzato"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F5057d3f6df60&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhacker-news-book-suggestions-64b88099947&user=Alessandro+Mozzato&userId=5057d3f6df60&source=post_page-5057d3f6df60----64b88099947---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F64b88099947&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhacker-news-book-suggestions-64b88099947&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F64b88099947&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhacker-news-book-suggestions-64b88099947&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://news.ycombinator.com/item?id=18661546", "anchor_text": "thread"}, {"url": "https://github.com/HackerNews/API", "anchor_text": "very nice API"}, {"url": "https://hacker-news.firebaseio.com/v0/item/18661546.json').json()", "anchor_text": "18661546"}, {"url": "https://hacker-news.firebaseio.com/v0/item/18661546.json').json()", "anchor_text": "https://hackernews.firebaseio.com/v0/item/18661546.json').json()"}, {"url": "https://www.goodreads.com/api", "anchor_text": "Goodreads API"}, {"url": "https://www.goodreads.com/api/index#search.books", "anchor_text": "search.books"}, {"url": "https://www.goodreads.com/search/index.xml", "anchor_text": "https://www.goodreads.com/search/index.xml"}, {"url": "https://github.com/AlessandroMozzato/hn_books", "anchor_text": "Github"}, {"url": "https://medium.com/tag/python?source=post_page-----64b88099947---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/api?source=post_page-----64b88099947---------------api-----------------", "anchor_text": "API"}, {"url": "https://medium.com/tag/text-mining?source=post_page-----64b88099947---------------text_mining-----------------", "anchor_text": "Text Mining"}, {"url": "https://medium.com/tag/data-analysis?source=post_page-----64b88099947---------------data_analysis-----------------", "anchor_text": "Data Analysis"}, {"url": "https://medium.com/tag/data-science?source=post_page-----64b88099947---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F64b88099947&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhacker-news-book-suggestions-64b88099947&user=Alessandro+Mozzato&userId=5057d3f6df60&source=-----64b88099947---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F64b88099947&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhacker-news-book-suggestions-64b88099947&user=Alessandro+Mozzato&userId=5057d3f6df60&source=-----64b88099947---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F64b88099947&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhacker-news-book-suggestions-64b88099947&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----64b88099947--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F64b88099947&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhacker-news-book-suggestions-64b88099947&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----64b88099947---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----64b88099947--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----64b88099947--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----64b88099947--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----64b88099947--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----64b88099947--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----64b88099947--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----64b88099947--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----64b88099947--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@mozzatoale?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@mozzatoale?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Alessandro Mozzato"}, {"url": "https://medium.com/@mozzatoale/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "164 Followers"}, {"url": "http://Booking.com", "anchor_text": "Booking.com"}, {"url": "https://alemozzato.com/", "anchor_text": "https://alemozzato.com/"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F5057d3f6df60&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhacker-news-book-suggestions-64b88099947&user=Alessandro+Mozzato&userId=5057d3f6df60&source=post_page-5057d3f6df60--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fusers%2F5057d3f6df60%2Flazily-enable-writer-subscription&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhacker-news-book-suggestions-64b88099947&user=Alessandro+Mozzato&userId=5057d3f6df60&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}