{"url": "https://towardsdatascience.com/visualizing-the-stock-market-with-python-bokeh-d40d9d1f288e", "time": 1683005159.038514, "path": "towardsdatascience.com/visualizing-the-stock-market-with-python-bokeh-d40d9d1f288e/", "webpage": {"metadata": {"title": "Visualizing the Stock Market with Python Bokeh | by Barney H. | Towards Data Science", "h1": "Visualizing the Stock Market with Python Bokeh", "description": "To build your trading platform, you also need to have a way to visualize your stock market data. One of the easiest ways you can choose TradingView, which has an excellent idea to analyze financial\u2026"}, "outgoing_paragraph_urls": [{"url": "http://tradingview.com", "anchor_text": "TradingView", "paragraph_index": 0}, {"url": "https://docs.bokeh.org/en/latest/index.html", "anchor_text": "Bokeh", "paragraph_index": 2}, {"url": "https://docs.bokeh.org/en/latest/index.html", "anchor_text": "Bokeh", "paragraph_index": 3}, {"url": "https://towardsdatascience.com/free-stock-data-for-python-using-yahoo-finance-api-9dafd96cad2e", "anchor_text": "Free Stock Data for Python Using Yahoo Finance API", "paragraph_index": 10}, {"url": "https://gist.github.com/BarneyH19/20f932e8f06e1ede8b52926f3bd1ce89", "anchor_text": "here", "paragraph_index": 13}, {"url": "https://bokeh.pydata.org/en/latest/docs/reference/plotting.html", "anchor_text": "others", "paragraph_index": 17}, {"url": "https://bokeh.pydata.org/en/latest/docs/reference/models/formatters.html", "anchor_text": "documentation", "paragraph_index": 28}, {"url": "https://gist.github.com/BarneyH19/20f932e8f06e1ede8b52926f3bd1ce89", "anchor_text": "here", "paragraph_index": 35}, {"url": "https://github.com/matplotlib/mplfinance", "anchor_text": "mplfinance", "paragraph_index": 37}, {"url": "https://viserjs.github.io/", "anchor_text": "Viser", "paragraph_index": 40}, {"url": "http://alwa.info/projects/stock-portfolio/", "anchor_text": "portfolio plot", "paragraph_index": 40}], "all_paragraphs": ["To build your trading platform, you also need to have a way to visualize your stock market data. One of the easiest ways you can choose TradingView, which has an excellent idea to analyze financial market data.", "However, you might have specific requirements, like comparing two stock prices at some level. Most of the online platforms can\u2019t support this situation. Or, if you already have some automation, you need a tool to visualize your trading strategy.", "In this post, I\u2019ll show you how I start to build my visualization in my daily trading platform. I have tried a lot of visualization frameworks in past years, and Bokeh can support most of my use cases.", "Maybe you are familiar with matplotlib and seaborn for plotting in Python. However, financial data, especially price history visualization is better when it\u2019s interactive. Bokeh can create rich interactive dashboards with multiple complex charts.", "If you are interested in how I tried other frameworks, please check the appendix.", "Bokeh is a visualization library that can easily create powerful interactive plots.", "Bokeh plots can be exported as static images, or embedded into web pages. The library has a built-in app server and can build as a backend for interactive dashboards.", "On the other hand, Bokeh is also a low-level library, as it allows us to control all aspects of a plot, including interactions and styling.", "But, Bokeh is also simple-to-use and powerful as in a few lines of code you can have versatile interactive plots. To get some feeling of what Bokeh plots look like, let\u2019s take a look at a simple plot of the MSFT stock:", "To begin with visualization, we need to talk about data first.", "In this post, we will use the OHLCV data fetched from Free Stock Data for Python Using Yahoo Finance API. Check out this post first, you should be able to get data you want. Or you already have your own stock OHLC data.", "The data format is like the following:", "Here we will use MSFT daily OHLCV data as an example and build a dashboard associated with historical stock prices. And you can apply this to any financial symbols.", "You can download my example data here.", "Bokeh is straightforward to install with either conda install bokeh or pip install bokeh, depending on your setup.", "The library provides not only the Python package but also a CLI called bokeh, which is used to run bokeh app server. You can easily run Bokeh by command line bokeh serve \u2014 show xxx.py .", "After compiling, the JavaScript client library will render the visual elements and handle the UI interactions for Bokeh plots in the browser. You don\u2019t need to control the JavaScript part.", "Note that Bokeh plots created using the bokeh.plotting interface comes with a default set of basic glyphs. The glyphs come in many forms: circle glyphs, line glyphs, text, and others. For primary usage, Bokeh plots are enough.", "Each Bokeh plot consists of a set of models. The lowest-level objects that comprise Bokeh \u201cscenegraphs\u201d. These live in the bokeh.models interface. Ultimately all Bokeh plots comprised of collections of models, that give you absolute control of the plot, it\u2019s often not used directly.", "The Bokeh server is used for sharing and publishing Bokeh plots as static pages or deploying apps in the browser.", "Based on the knowledge we have above, we should be able to draw a figure with market data.", "To make plotting simpler and cleaner, we use ColumnDataSource. The ColumnDataSource is a fundamental data structure of Bokeh. Most plots, data tables, etc. will be driven by a ColumnDataSource. You can define ColumnDataSource like a dictionary and then import from pandas.dataframe .", "Using basic glyphs like vbar to render a candlestick based on the ColumnDataSource.", "The basic code is like the following:", "Run bokeh serve \u2014 show xxx.py to show the plot:", "So far, we have dealt only with standard data. There\u2019re a lot of problems with this plot. One thing is that the x-axis index is not correct. Usually, we can show the index number. However, stock prices are time-series data orders by date, we need to plot a time range and show the exact date. We need to build a map from indices to date strings.", "By default, there are only five ticks in one plot. To show each day, we have to set the number of ticks.", "After the change, now the date x-axis is much clear.", "Here we again use Bokeh\u2019s format for currencies: ($ 0.00 a), which will output values in millions. For other predefined formats and various formatters, see formatters documentation.", "You may have already noticed, Bokeh provides a toolbar to each plot. Tools allow to zoom, pan, select data and perform other actions.", "The hover tool is an inspector tool. It is generally on at all times but can be configured in the inspector\u2019s menu associated with the toolbar hidden by default. By default, the hover tool will generate a tooltip where each row contains a label and associated value.", "Updated the code by adding tooltips with labels: Datetime, Open, Close, Volume. You can add more based on your own choice.", "Here is how the tooltip after the change:", "So far, you have learned how to:", "Now you should be able to start building your dashboard to begin your algorithm trading analysis. Please leave your comments and let me know if you want to know more about this topic.", "I attached my code below, and example data is here.", "Below are my reviews of other frameworks:", "Matplotlib finance, which is deprecated and has been moved to a module called mpl_finance. Also, mpl_finance is deprecating and there will be a new version mplfinance (estimated to replace in mid-2020).", "The new mplfinace is pretty good compared to what I used last year.", "Compared with Bokeh, it\u2019s hard to make it interactively. If for the basic use cases. It should be a quick solution. Since it\u2019s still under development, I would suggest to use it by mid-2020.", "Another framework I tried and think it\u2019s worth is Viser. If you prefer JavaScript tech stack. I made a portfolio plot by Viser. However, Viser has very poor community support. You have to know a lot of tricks to make it workable with other JavaScript libraries.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Python enthusiast | Software Engineer @ Google| I love API |"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fd40d9d1f288e&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvisualizing-the-stock-market-with-python-bokeh-d40d9d1f288e&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvisualizing-the-stock-market-with-python-bokeh-d40d9d1f288e&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvisualizing-the-stock-market-with-python-bokeh-d40d9d1f288e&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvisualizing-the-stock-market-with-python-bokeh-d40d9d1f288e&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----d40d9d1f288e--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----d40d9d1f288e--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@barney.h?source=post_page-----d40d9d1f288e--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@barney.h?source=post_page-----d40d9d1f288e--------------------------------", "anchor_text": "Barney H."}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F3fe3d3a67feb&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvisualizing-the-stock-market-with-python-bokeh-d40d9d1f288e&user=Barney+H.&userId=3fe3d3a67feb&source=post_page-3fe3d3a67feb----d40d9d1f288e---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fd40d9d1f288e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvisualizing-the-stock-market-with-python-bokeh-d40d9d1f288e&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fd40d9d1f288e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvisualizing-the-stock-market-with-python-bokeh-d40d9d1f288e&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@chrisliverani?utm_source=medium&utm_medium=referral", "anchor_text": "Chris Liverani"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "http://tradingview.com", "anchor_text": "TradingView"}, {"url": "https://docs.bokeh.org/en/latest/index.html", "anchor_text": "Bokeh"}, {"url": "https://docs.bokeh.org/en/latest/index.html", "anchor_text": "Bokeh"}, {"url": "https://towardsdatascience.com/free-stock-data-for-python-using-yahoo-finance-api-9dafd96cad2e", "anchor_text": "Free Stock Data for Python Using Yahoo Finance API"}, {"url": "https://gist.github.com/BarneyH19/20f932e8f06e1ede8b52926f3bd1ce89", "anchor_text": "here"}, {"url": "https://bokeh.pydata.org/en/latest/docs/reference/plotting.html", "anchor_text": "others"}, {"url": "https://bokeh.pydata.org/en/latest/docs/reference/models/formatters.html", "anchor_text": "documentation"}, {"url": "https://gist.github.com/BarneyH19/20f932e8f06e1ede8b52926f3bd1ce89", "anchor_text": "here"}, {"url": "https://github.com/matplotlib/mplfinance", "anchor_text": "mplfinance"}, {"url": "https://viserjs.github.io/", "anchor_text": "Viser"}, {"url": "http://alwa.info/projects/stock-portfolio/", "anchor_text": "portfolio plot"}, {"url": "https://medium.com/tag/programming?source=post_page-----d40d9d1f288e---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/tag/data-visualization?source=post_page-----d40d9d1f288e---------------data_visualization-----------------", "anchor_text": "Data Visualization"}, {"url": "https://medium.com/tag/stock-market?source=post_page-----d40d9d1f288e---------------stock_market-----------------", "anchor_text": "Stock Market"}, {"url": "https://medium.com/tag/python?source=post_page-----d40d9d1f288e---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/data-science?source=post_page-----d40d9d1f288e---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fd40d9d1f288e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvisualizing-the-stock-market-with-python-bokeh-d40d9d1f288e&user=Barney+H.&userId=3fe3d3a67feb&source=-----d40d9d1f288e---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fd40d9d1f288e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvisualizing-the-stock-market-with-python-bokeh-d40d9d1f288e&user=Barney+H.&userId=3fe3d3a67feb&source=-----d40d9d1f288e---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fd40d9d1f288e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvisualizing-the-stock-market-with-python-bokeh-d40d9d1f288e&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----d40d9d1f288e--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fd40d9d1f288e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvisualizing-the-stock-market-with-python-bokeh-d40d9d1f288e&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----d40d9d1f288e---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----d40d9d1f288e--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----d40d9d1f288e--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----d40d9d1f288e--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----d40d9d1f288e--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----d40d9d1f288e--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----d40d9d1f288e--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----d40d9d1f288e--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----d40d9d1f288e--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@barney.h?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@barney.h?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Barney H."}, {"url": "https://medium.com/@barney.h/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "348 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F3fe3d3a67feb&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvisualizing-the-stock-market-with-python-bokeh-d40d9d1f288e&user=Barney+H.&userId=3fe3d3a67feb&source=post_page-3fe3d3a67feb--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fad56c6fc7eea&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvisualizing-the-stock-market-with-python-bokeh-d40d9d1f288e&newsletterV3=3fe3d3a67feb&newsletterV3Id=ad56c6fc7eea&user=Barney+H.&userId=3fe3d3a67feb&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}