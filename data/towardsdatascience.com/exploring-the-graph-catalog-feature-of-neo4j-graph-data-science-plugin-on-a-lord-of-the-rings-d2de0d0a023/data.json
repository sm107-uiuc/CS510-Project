{"url": "https://towardsdatascience.com/exploring-the-graph-catalog-feature-of-neo4j-graph-data-science-plugin-on-a-lord-of-the-rings-d2de0d0a023", "time": 1683004630.5129018, "path": "towardsdatascience.com/exploring-the-graph-catalog-feature-of-neo4j-graph-data-science-plugin-on-a-lord-of-the-rings-d2de0d0a023/", "webpage": {"metadata": {"title": "Exploring the Graph Catalog feature of Neo4j Graph data science plugin on a Lord of the Rings dataset | by Tomaz Bratanic | Towards Data Science", "h1": "Exploring the Graph Catalog feature of Neo4j Graph data science plugin on a Lord of the Rings dataset", "description": "To continue the introduction of the Neo4j Graph data science plugin, we will go over the basics and look at the graph management part of the library. This is the part of the library that is\u2026"}, "outgoing_paragraph_urls": [{"url": "https://github.com/neo4j/graph-data-science", "anchor_text": "Neo4j Graph data science plugin", "paragraph_index": 0}, {"url": "https://neo4j.com/docs/graph-data-science/1.0/management-ops/graph-catalog-ops/", "anchor_text": "official documentation", "paragraph_index": 0}, {"url": "https://github.com/morethanbooks/projects/tree/master/LotR", "anchor_text": "Lord of the Rings dataset", "paragraph_index": 5}, {"url": "http://www.morethanbooks.eu/", "anchor_text": "Jos\u00e9 Calvo", "paragraph_index": 5}, {"url": "https://github.com/morethanbooks/projects/tree/master/LotR", "anchor_text": "GitHub", "paragraph_index": 8}, {"url": "https://en.wikipedia.org/wiki/Multigraph", "anchor_text": "multigraph", "paragraph_index": 18}, {"url": "https://neo4j.com/docs/graph-data-science/1.0/algorithms/louvain/", "anchor_text": "Louvain", "paragraph_index": 35}, {"url": "https://neo4j.com/bloom/", "anchor_text": "Neo4j Bloom", "paragraph_index": 37}, {"url": "https://github.com/neo4j/graph-data-science", "anchor_text": "Graph Data Science library", "paragraph_index": 39}, {"url": "https://neo4j.com/docs/graph-data-science/1.0/management-ops/cypher-projection/", "anchor_text": "Cypher projection", "paragraph_index": 39}, {"url": "https://github.com/tomasonjo/blogs/tree/master/lotr_graph_data_science_catalog", "anchor_text": "GitHub", "paragraph_index": 40}, {"url": "http://mng.bz/GGVN", "anchor_text": "http://mng.bz/GGVN", "paragraph_index": 42}], "all_paragraphs": ["To continue the introduction of the Neo4j Graph data science plugin, we will go over the basics and look at the graph management part of the library. This is the part of the library that is responsible for projecting the stored Neo4j graph into memory, which allows for faster execution of the graph algorithms. A significant portion of the graph management section is the Graph Catalog feature. Just what is it? Let\u2019s look at the official documentation.", "Graph algorithms run on a graph data model which is a projection of the Neo4j property graph data model. A graph projection can be seen as a view over the stored graph, containing only analytical relevant, potentially aggregated, topological and property information. Graph projections are stored entirely in-memory using compressed data structures optimized for topology and property lookup operations.", "The graph catalog is a concept within the GDS library that allows managing multiple graph projections by name. Using that name, a created graph can be used many times in the analytical workflow.", "There are two distinct options to project the stored graph into memory:", "In this blog post, we will take a deep dive into the native projection option of the Graph Catalog.", "I have used the GoT dataset more times than I can remember, so I decided to explore the internet and search for new exciting graphs. I stumbled upon this Lord of the Rings dataset made available by Jos\u00e9 Calvo that we will use in this blog post.", "The dataset describes interactions between persons, places, groups, and things (The Ring). When choosing how to model this dataset, I decided to have \u201cmain\u201d nodes with two labels, primary label \u201cNode\u201d and secondary label one of the following:", "In the picture above, I added only \u201cPerson\u201d as a secondary label due to clarity. We store interactions from each book as a separate relationship, meaning that the interactions from the first book will be saved as the INTERACTS_1 relationships, second book interactions as INTERACTS_2, and so on. Keep in mind that we will treat interaction relationships as undirected and weighted. These \u201cmain\u201d nodes can also be a part of a class such as orcs, elves, men, and many more.", "As mentioned, the dataset is available on GitHub, and we can easily fetch it with the LOAD CSV statement.", "The primary reason we added two labels to \u201cmain\u201d nodes was to optimize the import of interaction relationships. Now, you might say the optimization is unnecessary due to the tiny dataset we have, and I would agree, but let\u2019s pretend we might be dealing with millions of nodes. We start by defining the unique constraint on the label \u201cNode\u201d.", "Now that we have set up the unique constraint, cypher query planner will use it to match our existing nodes much faster.", "The syntax for creating named graphs in Graph Catalog is:", "In general, with the native projection variant, there are three options to describe the nodes we want to project into memory:", "An important thing to note regarding projecting node labels:", "In the in-memory graph, all projected node labels are merged into a single label. Unlike for relationship projections, it is currently not possible to specify a filter on projected labels. If the graph is used as input for an algorithm, all nodes will be considered.", "While we can filter which node labels we want to project to the in-memory graph, additional filtering of nodes when executing graph algorithm is currently not supported.", "The syntax to describe the relationships we want to project is very similar to that of the nodes.", "The orientation parameter in the configuration map defines the direction of the relationships we want to project. Possible values are:", "An important thing to note is that the GDS library supports running graph algorithms on a multigraph. The aggregation parameter is handy when we want to convert a multigraph to a single graph(not a multigraph), but we\u2019ll take a closer look at that in another blog post.", "Let\u2019s look at some practical examples now.", "Let\u2019s start by projecting the entire graph into memory using the wildcard operator for both the nodes and the relationships.", "Most of the time, we start the graph analysis by running the (weakly) connected components algorithm to get an idea of how (dis)connected our graph really is.", "The graph as a whole consists of a single component. Usually, what you\u2019ll get with real-world data is a single super component (85+% of all nodes) and a few small disconnected components.", "After each analysis, we will release the projected graph from memory.", "In the next step, we want to ignore PART_OF relationships and only focus on INTERACTS_X relationships. We will use an array for describing relationship-types to take into account all three INTERACTS_X relationships.", "Let\u2019s run the weakly connected components algorithm on our new projected graph.", "Our new graph consists of three components. We have a single super component and two tiny components consisting of only a single node. We can deduce that locations \u201cMirkwood\u201d and \u201cOld Forest\u201d have no INTERACTS_X relationships.", "Let\u2019s use the same projected graph and only look at interactions from the first book. We can filter which relationship-types should the graph algorithm consider with the relationshipTypes parameter.", "We get more disconnected components if we take into account only interactions from the first book. This makes sense as some of the characters/locations haven\u2019t yet been introduced in the first book, so they have no INTERACTS_1 relationships.", "In the last example, we will show how to project an undirected weighted graph. We will consider only nodes labeled Person and Thing, and for relationships, we will project all the INTERACTS_X relationships along with their weight property, which will be treated as undirected.", "To run the unweighted pageRank on our projected graph, we don\u2019t have to specify any additional configuration.", "To let know the algorithm that it should take relationship weights into account, we need to use relationshipWeightProperty parameter.", "As Frodo has more interactions (defined as weight) with other characters, he comes out on top with the weighted variant of the pageRank.", "To finish this blog post, we will analyze the network of the first book. We start by running the weighted pageRank on the interaction relationships from the first book only.", "Standard suspects come on top. Frodo is by far the most central character, followed by Gandalf, Aragorn, and Sam, who are in the same ballpark of importance judging by the pageRank centrality. The Ring also shows up in the top five ladder of essential characters.", "We are also interested in the community structure of the network. We will use the Louvain modularity algorithm to determine the community structure.", "As a picture is worth more than a thousand words, we will visualize the network of the first book. PageRank is used to determine the size of the node and the community is used to determine the color of the node.", "For the first time, I will use Neo4j Bloom to visualize the network, as the latest release (1.2) adds the support of the rule-based styling of the visualization.", "We can observe that Aragorn is in the same community as Sauron and Saruman. This has nothing to do with the actual community detection algorithm, but it shows the weakness of extracting information from the text as co-occurrences graphs. I guess the next step would be obtaining knowledge from the book with the context of relationships such as friend, enemy, or others.", "I hope after reading this blog post, you got a better understanding of how to project graphs with the Graph Data Science library. Stay tuned as we still have to go through the Cypher projection part of the Graph management section.", "As always, the code is available on GitHub.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Data explorer. Turn everything into a graph. Author of Graph algorithms for Data Science at Manning publication. http://mng.bz/GGVN"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fd2de0d0a023&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fexploring-the-graph-catalog-feature-of-neo4j-graph-data-science-plugin-on-a-lord-of-the-rings-d2de0d0a023&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fexploring-the-graph-catalog-feature-of-neo4j-graph-data-science-plugin-on-a-lord-of-the-rings-d2de0d0a023&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fexploring-the-graph-catalog-feature-of-neo4j-graph-data-science-plugin-on-a-lord-of-the-rings-d2de0d0a023&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fexploring-the-graph-catalog-feature-of-neo4j-graph-data-science-plugin-on-a-lord-of-the-rings-d2de0d0a023&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----d2de0d0a023--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----d2de0d0a023--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://bratanic-tomaz.medium.com/?source=post_page-----d2de0d0a023--------------------------------", "anchor_text": ""}, {"url": "https://bratanic-tomaz.medium.com/?source=post_page-----d2de0d0a023--------------------------------", "anchor_text": "Tomaz Bratanic"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F57f13c0ea39a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fexploring-the-graph-catalog-feature-of-neo4j-graph-data-science-plugin-on-a-lord-of-the-rings-d2de0d0a023&user=Tomaz+Bratanic&userId=57f13c0ea39a&source=post_page-57f13c0ea39a----d2de0d0a023---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fd2de0d0a023&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fexploring-the-graph-catalog-feature-of-neo4j-graph-data-science-plugin-on-a-lord-of-the-rings-d2de0d0a023&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fd2de0d0a023&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fexploring-the-graph-catalog-feature-of-neo4j-graph-data-science-plugin-on-a-lord-of-the-rings-d2de0d0a023&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://github.com/neo4j/graph-data-science", "anchor_text": "Neo4j Graph data science plugin"}, {"url": "https://neo4j.com/docs/graph-data-science/1.0/management-ops/graph-catalog-ops/", "anchor_text": "official documentation"}, {"url": "https://neo4j.com/docs/graph-data-science/1.0/management-ops/native-projection/", "anchor_text": "Native projection"}, {"url": "https://neo4j.com/docs/graph-data-science/1.0/management-ops/cypher-projection/", "anchor_text": "Cypher projection"}, {"url": "https://github.com/morethanbooks/projects/tree/master/LotR", "anchor_text": "Lord of the Rings dataset"}, {"url": "http://www.morethanbooks.eu/", "anchor_text": "Jos\u00e9 Calvo"}, {"url": "https://github.com/morethanbooks/projects/tree/master/LotR", "anchor_text": "GitHub"}, {"url": "https://en.wikipedia.org/wiki/Multigraph", "anchor_text": "multigraph"}, {"url": "https://neo4j.com/docs/graph-data-science/1.0/algorithms/louvain/", "anchor_text": "Louvain"}, {"url": "https://neo4j.com/bloom/", "anchor_text": "Neo4j Bloom"}, {"url": "https://github.com/neo4j/graph-data-science", "anchor_text": "Graph Data Science library"}, {"url": "https://neo4j.com/docs/graph-data-science/1.0/management-ops/cypher-projection/", "anchor_text": "Cypher projection"}, {"url": "https://github.com/tomasonjo/blogs/tree/master/lotr_graph_data_science_catalog", "anchor_text": "GitHub"}, {"url": "https://medium.com/tag/neo4j?source=post_page-----d2de0d0a023---------------neo4j-----------------", "anchor_text": "Neo4j"}, {"url": "https://medium.com/tag/algorithms?source=post_page-----d2de0d0a023---------------algorithms-----------------", "anchor_text": "Algorithms"}, {"url": "https://medium.com/tag/graph?source=post_page-----d2de0d0a023---------------graph-----------------", "anchor_text": "Graph"}, {"url": "https://medium.com/tag/data-science?source=post_page-----d2de0d0a023---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/lord-of-the-rings?source=post_page-----d2de0d0a023---------------lord_of_the_rings-----------------", "anchor_text": "Lord Of The Rings"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fd2de0d0a023&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fexploring-the-graph-catalog-feature-of-neo4j-graph-data-science-plugin-on-a-lord-of-the-rings-d2de0d0a023&user=Tomaz+Bratanic&userId=57f13c0ea39a&source=-----d2de0d0a023---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fd2de0d0a023&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fexploring-the-graph-catalog-feature-of-neo4j-graph-data-science-plugin-on-a-lord-of-the-rings-d2de0d0a023&user=Tomaz+Bratanic&userId=57f13c0ea39a&source=-----d2de0d0a023---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fd2de0d0a023&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fexploring-the-graph-catalog-feature-of-neo4j-graph-data-science-plugin-on-a-lord-of-the-rings-d2de0d0a023&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----d2de0d0a023--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fd2de0d0a023&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fexploring-the-graph-catalog-feature-of-neo4j-graph-data-science-plugin-on-a-lord-of-the-rings-d2de0d0a023&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----d2de0d0a023---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----d2de0d0a023--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----d2de0d0a023--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----d2de0d0a023--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----d2de0d0a023--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----d2de0d0a023--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----d2de0d0a023--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----d2de0d0a023--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----d2de0d0a023--------------------------------", "anchor_text": ""}, {"url": "https://bratanic-tomaz.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://bratanic-tomaz.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Tomaz Bratanic"}, {"url": "https://bratanic-tomaz.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "3.1K Followers"}, {"url": "http://mng.bz/GGVN", "anchor_text": "http://mng.bz/GGVN"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F57f13c0ea39a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fexploring-the-graph-catalog-feature-of-neo4j-graph-data-science-plugin-on-a-lord-of-the-rings-d2de0d0a023&user=Tomaz+Bratanic&userId=57f13c0ea39a&source=post_page-57f13c0ea39a--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Feab586d298c8&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fexploring-the-graph-catalog-feature-of-neo4j-graph-data-science-plugin-on-a-lord-of-the-rings-d2de0d0a023&newsletterV3=57f13c0ea39a&newsletterV3Id=eab586d298c8&user=Tomaz+Bratanic&userId=57f13c0ea39a&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}