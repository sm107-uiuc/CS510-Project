{"url": "https://towardsdatascience.com/download-a-flask-template-ready-to-plug-in-your-business-logic-bb9375e1be09", "time": 1683009634.09251, "path": "towardsdatascience.com/download-a-flask-template-ready-to-plug-in-your-business-logic-bb9375e1be09/", "webpage": {"metadata": {"title": "Download a Flask template ready to plug in your business logic | by Anirudh @ krysins.com | Towards Data Science", "h1": "Download a Flask template ready to plug in your business logic", "description": "Let\u2019s assume after lots of hard work you have your machine learning model running the way it should. This model could be one which responds to a user\u2019s request to classify a tweet sentiment or\u2026"}, "outgoing_paragraph_urls": [{"url": "https://github.com/alsm6169/flask_server_template", "anchor_text": "github", "paragraph_index": 2}, {"url": "https://docs.sqlalchemy.org/en/13/core/engines.html", "anchor_text": "here", "paragraph_index": 13}, {"url": "https://flask.palletsprojects.com/en/1.1.x/config/", "anchor_text": "official documentation", "paragraph_index": 23}, {"url": "https://docs.sqlalchemy.org/en/13/orm/", "anchor_text": "SQLAlchemy ORM", "paragraph_index": 25}, {"url": "https://marshmallow.readthedocs.io/en/stable/marshmallow.validate.html", "anchor_text": "marshmallow", "paragraph_index": 30}], "all_paragraphs": ["Let\u2019s assume after lots of hard work you have your machine learning model running the way it should. This model could be one which responds to a user\u2019s request to classify a tweet sentiment or identify objects in an image or recommend a product or some other algorithm unique to your needs. You would now like to quickly deploy this model. The article below is an explanation of the template that I have created to get you up and running quickly.", "Flask micro service is an easy way to deploy applications. However, one soon realises that you do not want to create a large monolithic single file program. The program should be modular to support future enhancements and it should be configurable with help of a configuration file. These configuration parameters are not only for Flask but also for your business application program (remember the tweet classification application you have created). Ideally the server should appropriately log everything. Most applications also need to connect to a database and finally, the inbound request parameters needs to be validated before invoking the model api (or return error).", "Sounds quite a lot, right? It actually is quite a lot and one can easily spend quite some time building a robust framework providing these features. Here I provide a link to github that provides all the above mentioned features in a modular application.", "You should be able to clone this Flask server template, and simply run it. Once you get this running you can start tweaking it to your specific requirements.", "Here in this article, I shall only explain part of the where potentially changes are needed to customise this Flask template for your project. My underlying assumption is some level of familiarity with Flask, SQLAlchemy, Marshmallow. Just enough familiarity that if some part does not make sense it can be googled. Feel free to ask questions in the comments and I can answer/update the article to cover the points.", "If you wish to install and run the server first, then skip this explanation section in middle and follow the sequence of commands below.", "Let's start with the code organisation", "Now the explanation of the code files", "Below I shall explain the purpose of each file and the relevant portions of code which you may need to change (if any) as per your requirements.", "base_dir/flask_server_template \u2192 The main template directory", "This is the entry point of the server. It reads the application configuration file (run_params.json), initialises logger, initialises flask server and runs the server.", "This module has does two things.", "1. Read the application configuration file and creates a dictionary that can be used by another part of the application.", "2. Creates a database connection string. This connection string utilised the parameters in the configuration file. This connection string varies as per the underlying database. SQLAlchemy documentation for creating your connection string is here.", "flask_server_template/config \u2192 Here are configuration files for the logger and the business logic application", "There are two logging handlers. \u2018handler_consoleHandler\u2019 logs to screen while \u2018handler_fileHandler\u2019 into a file run_log.log. This file gets overwritten each time server is run. However, if you want to change this and create new file with timestamp you can uncomment the second line and comment the first one", "\u2018run_params\u2019 has application level configuration containing information like database server, user name, mode of running flask (development/production)", "flask_server_template/logs \u2192 The directory where run logs are created", "To use the template no changes are needed in this directory.", "This template is a working template, ideally one should be able to simply download and run. The test client is to test these functionalities.", "flask_server_template/flask_server_template \u2192 The main flask directory containing flask initialisation code, configuration settings as well as redirection of routes of appropriate function.", "\u2018__init__.py\u2019 contains the initialisation function of flask_server_template package. It has one main function \u2018create_app\u2019, which creates Flask object, sets Flask configuration, initialises the database and register the routes (URLs to their functions)", "\u2018flask_config.py\u2019 contains the configuration settings of flask. It provides general configurations for development as well as the production environment.", "Most of the commonly used parameters have already been set. For more setting options have a look at the official documentation.", "\u2018flask_routes.py\u2019 contains the mappings of the URLs to their corresponding implementation.", "Note: There is a call that does the appropriate settings of the database. @routes.before_app_first_request. This is needed if we wish to use SQLAlchemy ORM feature. More details on this in the description of flask_server_template/db below.", "For each REST API that needs to be catered to, there needs to be a mapping to a function. Sample of a single function mapping to URL is depicted here.", "flask_server_template/model \u2192 The business logic code resides here", "In module \u2018business_model.py\u2019 adds the required business logic. The general flow would look like: validate the input parameters, get the data from database, perform required business logic application and return the results.", "PS: Currently, I do not have any business logic. I am simply returning the data from database in pandas dataframe format.", "Module \u2018business_model.py\u2019 uses marshmallow to validate the URL parameters. This is a preferred way for validation as opposed to manually writing if then else statements to verify each component of the URL parameters. Verification includes data type checks (integer, string), range of values or from a specific list and/or some totally customised check.", "flask_server_template/db \u2192 The database queries and operations are in this folder", "Before I go into details here, I have to clarify a few things:", "Phew! Now I explain the code files", "This is the sqlite database with three tables", "Module \u2018db_extensions.py\u2019 has database connection object, database meta data, object containing the reflection of the database (i.e. conversion of database tables into python objects) and the code to initialise the object relationship mapping.", "Module \u2018queries_orm.py\u2019 contains queries using SQLAlchemy ORM i.e. pythonic way of accessing the database.", "Module \u2018queries_rawsql.py\u2019 contains raw sql queries.", "Disclaimer: In queries_rawsql.py there are sample parameterised queries (the where clause is with parameter). However, this format does not work for sqlite. It works fine on postgresql as well as oracle.", "I believe the best way to get up and running quickly is do the following steps", "This brings me to the end of this post. Hopefully, you find it easy to follow and use. Please let me know if you have some feedback/enhancement.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "To use my passion for learning and problem-solving to create innovative solutions that improve productivity and share my learnings to help others."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fbb9375e1be09&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdownload-a-flask-template-ready-to-plug-in-your-business-logic-bb9375e1be09&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdownload-a-flask-template-ready-to-plug-in-your-business-logic-bb9375e1be09&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdownload-a-flask-template-ready-to-plug-in-your-business-logic-bb9375e1be09&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdownload-a-flask-template-ready-to-plug-in-your-business-logic-bb9375e1be09&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----bb9375e1be09--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----bb9375e1be09--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://anirudhlohia.medium.com/?source=post_page-----bb9375e1be09--------------------------------", "anchor_text": ""}, {"url": "https://anirudhlohia.medium.com/?source=post_page-----bb9375e1be09--------------------------------", "anchor_text": "Anirudh @ krysins.com"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F491ab63054db&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdownload-a-flask-template-ready-to-plug-in-your-business-logic-bb9375e1be09&user=Anirudh+%40+krysins.com&userId=491ab63054db&source=post_page-491ab63054db----bb9375e1be09---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fbb9375e1be09&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdownload-a-flask-template-ready-to-plug-in-your-business-logic-bb9375e1be09&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fbb9375e1be09&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdownload-a-flask-template-ready-to-plug-in-your-business-logic-bb9375e1be09&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@ffstop?utm_source=medium&utm_medium=referral", "anchor_text": "Fotis Fotopoulos"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://github.com/alsm6169/flask_server_template", "anchor_text": "github"}, {"url": "https://github.com/alsm6169/flask_server_template", "anchor_text": "alsm6169/flask_server_templateFlask Server Template ready to plug in business logic. Features of this template are: Flask configuration module\u2026github.com"}, {"url": "https://docs.sqlalchemy.org/en/13/core/engines.html", "anchor_text": "here"}, {"url": "https://flask.palletsprojects.com/en/1.1.x/config/", "anchor_text": "official documentation"}, {"url": "https://docs.sqlalchemy.org/en/13/orm/", "anchor_text": "SQLAlchemy ORM"}, {"url": "https://marshmallow.readthedocs.io/en/stable/marshmallow.validate.html", "anchor_text": "marshmallow"}, {"url": "https://www.postgresqltutorial.com/postgresql-sample-database/", "anchor_text": "postgresqltutorial"}, {"url": "https://github.com/alsm6169/flask_server_template.git", "anchor_text": "https://github.com/alsm6169/flask_server_template.git"}, {"url": "https://medium.com/tag/flask?source=post_page-----bb9375e1be09---------------flask-----------------", "anchor_text": "Flask"}, {"url": "https://medium.com/tag/flask-sqlalchemy?source=post_page-----bb9375e1be09---------------flask_sqlalchemy-----------------", "anchor_text": "Flask Sqlalchemy"}, {"url": "https://medium.com/tag/flask-framework?source=post_page-----bb9375e1be09---------------flask_framework-----------------", "anchor_text": "Flask Framework"}, {"url": "https://medium.com/tag/marshmallow?source=post_page-----bb9375e1be09---------------marshmallow-----------------", "anchor_text": "Marshmallow"}, {"url": "https://medium.com/tag/flask-python-appengine?source=post_page-----bb9375e1be09---------------flask_python_appengine-----------------", "anchor_text": "Flask Python Appengine"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fbb9375e1be09&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdownload-a-flask-template-ready-to-plug-in-your-business-logic-bb9375e1be09&user=Anirudh+%40+krysins.com&userId=491ab63054db&source=-----bb9375e1be09---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fbb9375e1be09&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdownload-a-flask-template-ready-to-plug-in-your-business-logic-bb9375e1be09&user=Anirudh+%40+krysins.com&userId=491ab63054db&source=-----bb9375e1be09---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fbb9375e1be09&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdownload-a-flask-template-ready-to-plug-in-your-business-logic-bb9375e1be09&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----bb9375e1be09--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fbb9375e1be09&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdownload-a-flask-template-ready-to-plug-in-your-business-logic-bb9375e1be09&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----bb9375e1be09---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----bb9375e1be09--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----bb9375e1be09--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----bb9375e1be09--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----bb9375e1be09--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----bb9375e1be09--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----bb9375e1be09--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----bb9375e1be09--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----bb9375e1be09--------------------------------", "anchor_text": ""}, {"url": "https://anirudhlohia.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://anirudhlohia.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Anirudh @ krysins.com"}, {"url": "https://anirudhlohia.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "115 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F491ab63054db&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdownload-a-flask-template-ready-to-plug-in-your-business-logic-bb9375e1be09&user=Anirudh+%40+krysins.com&userId=491ab63054db&source=post_page-491ab63054db--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F6fb14c1da8f9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdownload-a-flask-template-ready-to-plug-in-your-business-logic-bb9375e1be09&newsletterV3=491ab63054db&newsletterV3Id=6fb14c1da8f9&user=Anirudh+%40+krysins.com&userId=491ab63054db&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}