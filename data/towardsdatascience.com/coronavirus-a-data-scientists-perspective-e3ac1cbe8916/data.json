{"url": "https://towardsdatascience.com/coronavirus-a-data-scientists-perspective-e3ac1cbe8916", "time": 1683007773.42193, "path": "towardsdatascience.com/coronavirus-a-data-scientists-perspective-e3ac1cbe8916/", "webpage": {"metadata": {"title": "Coronavirus: A Data Scientist\u2019s Perspective | by Lowri Williams | Towards Data Science", "h1": "Coronavirus: A Data Scientist\u2019s Perspective", "description": "Note from the editors: Towards Data Science is a Medium publication primarily based on the study of data science and machine learning. We are not health professionals or epidemiologists, and the\u2026"}, "outgoing_paragraph_urls": [{"url": "http://towardsdatascience.com/", "anchor_text": "Towards Data Science", "paragraph_index": 0}, {"url": "https://www.who.int/emergencies/diseases/novel-coronavirus-2019/situation-reports", "anchor_text": "here", "paragraph_index": 0}, {"url": "https://www.kaggle.com/sudalairajkumar/novel-corona-virus-2019-dataset/version/11", "anchor_text": "dataset", "paragraph_index": 4}, {"url": "https://github.com/LowriWilliams/Coronavirus", "anchor_text": "https://github.com/LowriWilliams/Coronavirus", "paragraph_index": 34}], "all_paragraphs": ["Note from the editors: Towards Data Science is a Medium publication primarily based on the study of data science and machine learning. We are not health professionals or epidemiologists, and the opinions of this article should not be interpreted as professional advice. To learn more about the coronavirus pandemic, you can click here.", "The outbreak of the new coronavirus originating from Wuhan, China has infected thousands of Chinese citizens and has spread to more than 20 countries around the world. Whereas it may be a little worrying that the World Health Organization has declared the virus as a global emergency, the data scientist in me became curious as to the data that\u2019s surrounding the epidemic and what is possible to achieve with it. Here\u2019s a piece that I wrote on my own site a few months ago about my analysis on the coronavirus data.", "It\u2019s not that difficult to find a coronavirus data source. Several news sources update their websites daily with new numbers of infected cases, where they were found, and the number of deaths. These data sources, however, are often not downloadable files or structured in any way.", "But, good old Kaggle provides again. \ud83d\ude4c\ud83c\udffb", "This dataset includes records from 32 countries with confirmed cases between 22/01/2020 and 11/02/2020. As I\u2019m writing this, the dataset is only one day behind \u2014 so it\u2019s pretty up to date!", "Before I do anything, and with any data science project, first I have to observe and pre-process the data.", "Because this dataset is in a CSV format, I can read in the data to my Python script by using Pandas. Pandas is a library that I\u2019ve been using extensively for around a year now, and boy has it saved me from the epic lists of lists I used to use! So once it\u2019s imported, I can read the CSV into a Pandas dataframe and see what\u2019s in there.", "So, what do we know? Well, if we focus on the Confirmed cases column, we can use the df[column_name].sum() function to count the total number of cases. Damn, that's a lot of confirmed cases! If we consider that the data also shows that there have been 22,307 recoveries, that means that the recovery rate is 5.97%.", "If we group the rows based on the Country column and sum the number of Confirmed cases, we can sort the output. It shows, in comparison to any other country, China indeed has a significantly larger number of confirmed cases. This might be an obvious observation given that we know from news sources that it originated in China. However, it's worth checking the data!", "We can apply exactly the same code to observe how many deaths and how many recoveries there have been in each country or province. If we group by the Province/State column, 'Hubei', the province of Wuhan, is recorded to have the highest number of confirmed cases. Again, an intuitive observation, but worth checking.", "Just by quickly eye-balling the data, it seems like it doesn\u2019t need extreme pre-processing. But I noticed three things that have ticked off my OCD and might need to be addressed before I can dive into doing anything with it, and those are:", "\u2022 In the Country column, both \u2018China\u2019 and \u2018Mainland China\u2019 are reported when they should be either \u2018China\u2019 or \u2018Mainland China\u2019.", "\u2022 Checking whether the data type of the Date column is datetime as it\u2019s easier to handle.", "\u2022 The Confirmed, Deaths, and Recovered column data types need to be integers, not floats.", "First, let\u2019s change all occurrences of \u2018Mainland China\u2019 to \u2018China\u2019. We can check if this has been successful by checking the length of the list of all unique countries in the Country column.", "Now to check the data type of the Date column. We can use Pandas\u2019 .info() function to view the data types of all the columns in the dataframe. The data type shows that the Date column is an object data type. To make my life easier, I'll change its data type to datetime. I can then access the date or time element of the date itself by using df['Date'].dt.time or df['Date'].dt.date respectively. Let's do that - I'll replace the Date column with just the date element by renaming the column as itself.", "The .info() results also confirm that the Confirmed, Deaths, and Recovered data types are floats. Ideally, you'd want these to be integer, as you can't have a decimal number of people. So, similar to the Date column, we'll change these data types.", "Great \u2014 the data is now ready to be used. At this stage, some people would also delete the columns that they don\u2019t need using del df[column_name]. I won't delete any of the columns here, as I can just select the ones that are applicable to whatever I'll be doing. Actually, I would advise not to delete columns, only because you might end up needing them and having to go through your code to find where you're deleting it sounds like an unnecessary task - so always select columns, never delete them. \ud83d\udca1", "Given that the data includes locations, the obvious initial thing to do is to to use a map visualisation. I\u2019ve only used Python to create heat-maps or bar charts using Matplotlib or Seaborn. I\u2019ve been put off creating maps in Python in the past due to the lack of documentation, and so my initial go to with this type of visualisation would be something like Tableau. But this time, I decided to pick it up again and see whether I have the patience to figure things out!", "First, let\u2019s decide what we want to visualise. Given that the dataset reports that there have been almost no deaths or recoveries outside of China, the number of confirmed cases are sparse around the world. In this case, I can use the df_country from my initial observation, where I grouped the rows based on the Country column and summed the number of Confirmed cases.", "There are several Python libraries which support creating maps. Here, I'm going to use Folium to create a bubble map. For those of you who don't know what a bubble map is, it's a sequence of circles whose sizes represent a numeric value on a territory. Or in this case, how many confirmed cases of coronavirus have been reported in different countries around the world. To do this, Folium needs the coordinates of where to mark the bubbles. To find the latitude and longitude of the countries in this dataset, I quickly scour the web and find a JSON file of coordinates, open the file, iterate over my dataframe and match the countries to their coordinates.", "If I was to map the data as it is, the radius of the bubbles would be too big to make any kind of observation. So, we need to normalise it or handle it in some way. In this case, I decided to divide the confirmed cases for all the countries other than China by 50. Why 50? Because it just looked like a nice ratio on the map. You can play around with different methods of normalisation to get something that works for you and is less manual. Why not divide the confirmed cases in China with 50? Because China has such a high number of cases, the bubble is still too big and drowns the data from surrounding countries. So, to scale it down dramatically, but also still showing that it has the highest number of cases, I divided it with 25k.", "Next, I set the parameters of the graph by choosing it as being dark and mysterious in background and that the start zoom level is at 2. I also specify that I want a popup with some text displaying the number of confirmed cases in the country that the bubble is located. Finally, I wrote a short set of rules specifying that the bubble is green if the number of confirmed cases (not the normalised version) is less than 100, yellow if it\u2019s between 101 and 500 cases, and red if it\u2019s any other value.", "And voila - here's the output! If you click on the bubbles, you'll see the total confirmed cases for that particular country. The observations that you can quickly make from the colours and sizes of the bubbles show that a large number of confirmed cases are mainly in Asia.", "Before I do any kind of prediction, let\u2019s plot the total number of confirmed cases, deaths, and recoveries across the duration of when the data was reported to see whether we have some kind of trend. To produce this graph, I grouped together the Confirmed, Deaths and Recovered columns based on the Date and summed up the values. I then used iPlotter to generate the graph in ChartJS. I\u2019ve used ChartJS in the past and I quite like the look of the charts and their interactivity.", "So, what can we tell from the graph? Well, it shows that there\u2019s a linear increase in each of the variables over 21 data points.", "Given that we don\u2019t have enough data points, it is difficult to predict the outbreak using a machine learning model or time series model such as ARIMA. But we can use the moving average (MA) part of the ARIMA and take 2 or 3 rolling moving averages to get a very rough idea of the daily number of confirmed cases going forward. Assuming that the daily number of confirmed cases will continue to grow, let\u2019s take a look at the moving average in confirmed cases over time.", "Firstly, I calculate the moving average of 2 using Pandas\u2019s rolling function. What this function does is calculate the average of every 2 rows in the dataframe. Why windows of 2? If we graph the moving average, it seems to nicely follow the same trend as the actual daily number of confirmed cases. In fact, the trend is slightly smoother than the original data, where the increase in the number of cases from 04/02/2020 to 05/02/2020 and 06/02/2020 and 07/02/2020 is only slight. I add the moving averages to the dataframe in a new column, MA.", "Let's say we want to forecast the number of confirmed cases in 6 days time. We can use the last moving average value (43,807) as the first forecasted number of cases. We can then forecast the number of cases 2 days ahead by calculating the moving average of the last actual number of cases (44,982) with the first forecasted number of cases (43,807). We can iterate over this process using a for loop until we have forecasted 6 values. We can put them in a list ready to be put into the graph function.", "As I was interested to see whether the forecast would be true, I waited 6 days for the new data to be collected. So, I'm writing the following paragraphs on the 23/02/2020. But normally, what you would do is split your dataframe into a training and testing set. You would then forecast from the training set and use the testing set to evaluate the forecast.", "I processed the new data using the same techniques as before and calculated the number of confirmed cases for each day. I then produced the following graph. The yellow line represents the actual daily number of confirmed cases, the red line represents the moving average of 2, the blue line represents the new daily number of cases for 12/02/2020-17/02/2020, and lastly, the green line represents the forecasted number of cases.", "So, what have I learnt from this analysis?", "I\u2019ve mainly realised how much pre-processing and data wrangling a short analysis requires! I\u2019ve also been quite impressed with the outputs of the Folium library and how effective maps are to visualise location based data.", "However, the results show that the forecasting method hasn\u2019t worked well. For example, on 12/02/2020, the difference between the actual number of cases and the forecast is around 20k! But, if we observe the difference in the actual number of confirmed cases between 11/02/2020 and 12/02/2020, there\u2019s an increase of around 16k cases! That wasn\u2019t expected\u2026 If we consider that the average daily growth rate in the actual confirmed cases is 0.27%, you\u2019d expect that the total number of cases on 12/02/2020 would be around 45k and not 60k. But hey, I guess that\u2019s the nature of data!", "For the full notebook, check out my GitHub repo below: https://github.com/LowriWilliams/Coronavirus", "If you enjoyed following this post, don\u2019t forget to like and share.", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fe3ac1cbe8916&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcoronavirus-a-data-scientists-perspective-e3ac1cbe8916&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcoronavirus-a-data-scientists-perspective-e3ac1cbe8916&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcoronavirus-a-data-scientists-perspective-e3ac1cbe8916&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcoronavirus-a-data-scientists-perspective-e3ac1cbe8916&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----e3ac1cbe8916--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----e3ac1cbe8916--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://lowri-a-williams.medium.com/?source=post_page-----e3ac1cbe8916--------------------------------", "anchor_text": ""}, {"url": "https://lowri-a-williams.medium.com/?source=post_page-----e3ac1cbe8916--------------------------------", "anchor_text": "Lowri Williams"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fe98db206e1b3&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcoronavirus-a-data-scientists-perspective-e3ac1cbe8916&user=Lowri+Williams&userId=e98db206e1b3&source=post_page-e98db206e1b3----e3ac1cbe8916---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fe3ac1cbe8916&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcoronavirus-a-data-scientists-perspective-e3ac1cbe8916&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fe3ac1cbe8916&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcoronavirus-a-data-scientists-perspective-e3ac1cbe8916&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "http://towardsdatascience.com/", "anchor_text": "Towards Data Science"}, {"url": "https://www.who.int/emergencies/diseases/novel-coronavirus-2019/situation-reports", "anchor_text": "here"}, {"url": "https://www.kaggle.com/sudalairajkumar/novel-corona-virus-2019-dataset/version/11", "anchor_text": "dataset"}, {"url": "https://github.com/LowriWilliams/Coronavirus", "anchor_text": "https://github.com/LowriWilliams/Coronavirus"}, {"url": "https://medium.com/tag/data-science?source=post_page-----e3ac1cbe8916---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/pandas?source=post_page-----e3ac1cbe8916---------------pandas-----------------", "anchor_text": "Pandas"}, {"url": "https://medium.com/tag/python?source=post_page-----e3ac1cbe8916---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/forecasting?source=post_page-----e3ac1cbe8916---------------forecasting-----------------", "anchor_text": "Forecasting"}, {"url": "https://medium.com/tag/data-visualization?source=post_page-----e3ac1cbe8916---------------data_visualization-----------------", "anchor_text": "Data Visualization"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fe3ac1cbe8916&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcoronavirus-a-data-scientists-perspective-e3ac1cbe8916&user=Lowri+Williams&userId=e98db206e1b3&source=-----e3ac1cbe8916---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fe3ac1cbe8916&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcoronavirus-a-data-scientists-perspective-e3ac1cbe8916&user=Lowri+Williams&userId=e98db206e1b3&source=-----e3ac1cbe8916---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fe3ac1cbe8916&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcoronavirus-a-data-scientists-perspective-e3ac1cbe8916&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----e3ac1cbe8916--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fe3ac1cbe8916&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcoronavirus-a-data-scientists-perspective-e3ac1cbe8916&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----e3ac1cbe8916---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----e3ac1cbe8916--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----e3ac1cbe8916--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----e3ac1cbe8916--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----e3ac1cbe8916--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----e3ac1cbe8916--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----e3ac1cbe8916--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----e3ac1cbe8916--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----e3ac1cbe8916--------------------------------", "anchor_text": ""}, {"url": "https://lowri-a-williams.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://lowri-a-williams.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Lowri Williams"}, {"url": "https://lowri-a-williams.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "233 Followers"}, {"url": "https://lowriwilliams.co.uk", "anchor_text": "https://lowriwilliams.co.uk"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fe98db206e1b3&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcoronavirus-a-data-scientists-perspective-e3ac1cbe8916&user=Lowri+Williams&userId=e98db206e1b3&source=post_page-e98db206e1b3--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Ff5f2750d6328&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcoronavirus-a-data-scientists-perspective-e3ac1cbe8916&newsletterV3=e98db206e1b3&newsletterV3Id=f5f2750d6328&user=Lowri+Williams&userId=e98db206e1b3&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}