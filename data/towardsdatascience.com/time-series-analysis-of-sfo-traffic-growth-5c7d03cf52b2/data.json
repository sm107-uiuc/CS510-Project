{"url": "https://towardsdatascience.com/time-series-analysis-of-sfo-traffic-growth-5c7d03cf52b2", "time": 1682997101.422865, "path": "towardsdatascience.com/time-series-analysis-of-sfo-traffic-growth-5c7d03cf52b2/", "webpage": {"metadata": {"title": "Time Series Analysis of SFO Traffic Growth | by Alexandre Zajic | Towards Data Science", "h1": "Time Series Analysis of SFO Traffic Growth", "description": "This is a writeup of a machine learning project I completed. In this post I will walk through the process of my project, and present results on what we can expect for the future of SFO. The Bay Area\u2026"}, "outgoing_paragraph_urls": [{"url": "https://github.com/Alexandre987/SFO_Time_Series", "anchor_text": "my Github", "paragraph_index": 1}, {"url": "https://data.sfgov.org/Transportation/Air-Traffic-Passenger-Statistics/rkru-6vcg", "anchor_text": "SFGov website", "paragraph_index": 4}, {"url": "https://people.duke.edu/~rnau/411arim.htm", "anchor_text": "Duke\u2019s website", "paragraph_index": 9}, {"url": "https://www.jmp.com/en_us/statistics-knowledge-portal/what-is-regression/simple-linear-regression-assumptions.html", "anchor_text": "assumptions of linearity", "paragraph_index": 21}, {"url": "https://github.com/Alexandre987/SFO_Time_Series", "anchor_text": "my Github", "paragraph_index": 21}, {"url": "https://facebook.github.io/prophet/", "anchor_text": "Facebook Prophet", "paragraph_index": 22}, {"url": "https://research.fb.com/prophet-forecasting-at-scale/", "anchor_text": "early 2017", "paragraph_index": 22}, {"url": "https://github.com/Alexandre987", "anchor_text": "my Github", "paragraph_index": 45}], "all_paragraphs": ["This is a writeup of a machine learning project I completed. In this post I will walk through the process of my project, and present results on what we can expect for the future of SFO.", "All code from this analysis can be found on my Github.", "The Bay Area is a hot market to live in right now, as the demand for tech workers and the business impact of tech continues to grow.", "Rather than analyzing more traditional measures of Bay Area demand like home prices, I wanted to look at the traffic coming in and out of SFO, to see how we can expect traffic to grow in the next 4 years.", "I took data on air traffic statistics from the SFGov website, which had passenger data on the monthly level, for each terminal and airline, both departing and arriving, from the end of 2005 to the beginning of 2019. I chose to analyze departures across the whole airport, as that would be a more accurate measure of the kind of traffic most people care about when they arrive at the airport (how long is security going to be, how many people are going to be waiting at the terminal, et cetera).", "First, I needed to clean my data. I ensured there were no null values, used matplotlib to visualize my data, and fixed other small issues with the data.", "For instance, the data from SFGov used integers for year and month values (201801 means \u201cJanuary 2018\u201d). This doesn\u2019t seem like a problem, until you see the following graph of departures over time for one particular airline:", "Once I converted the integer column to datetime, cleaned my data completely, and aggregated the smaller data points into a format that I wanted to analyze, the full version of the time series data is below:", "In general, since I am trying to predict what kind of traffic SFO will have 4 years in the future, I will make a train/test split in my data with the test set as the most recent 4 years. This way, when I measure my model\u2019s mean absolute error on the test set, it will be representative of the kind of error to expect on my actual future predictions.", "I used SARIMA as a baseline model for my time series analysis. SARIMA is just ARIMA with a seasonal component (which my data clearly has, given the visualization of the graph above). A good technical resource for the use of ARIMA is available online from Duke\u2019s website.", "SARIMA works by combining multiple simpler models together:", "Rather than fiddle with the above components manually, I wrote my own method of grid searching through the parameters to find the lowest AIC score.", "AIC balances goodness of fit while penalizing for model complexity to avoid overfitting. The model that returns the lowest AIC gives the best combination of fit along with generalizability of the model.", "After finding the lowest AIC, it was necessary to spot-check the autocorrelation and partial autocorrelation plots of my data to make sure that there wasn\u2019t any way in which my model could be improved.", "An autocorrelation plot shows the level of correlation (between -1 and 1) with past values at multiple time lags. A partial autocorrelation plot shows the level of correlation with past residuals. At a high level, if any of my autocorrelations or partial autocorrelations exceed the blue confidence band, that means that there is statistically significant correlation that we can still explain with a different SARIMA model.", "We can see that there is a perfect +1.0 correlation at a lag of 0. This makes sense, since the value at any point in time with a lag of 0 is just itself, and correlates with itself perfectly. We also see that, for the most part, aside from some slight negative partial autocorrelations at the 2 year and 3 year mark (but not the 1 year mark, curiously), there aren\u2019t any statistically significant autocorrelations. This is good enough to consider this the final version of our SARIMA model.", "The model with the lowest AIC was a SARIMA(1,1,2)(1,1,2,12). This means that my model was reaching back a maximum of 2 years to get the relevant data to predict the future. So, when I score my SARIMA model, I should only judge it based on predictions that have at least 2 years of data behind it. This is why my training predictions start in late \u201907, even though I have training data starting in \u201805.", "The resulting SARIMA is below (actual values in blue, predictions in orange):", "You can see that my model begins to diverge more and more drastically as it works to predict across the 4 years of test data.", "After getting a MAE of 5.5%, I retrained my SARIMA on the whole of the data, in order to project traffic from 2019\u20132023.", "Why does my model predict so conservatively? You can see in the last two years of real data (2017\u20132019), the growth tapers off. Since the SARIMA only has an AR seasonal component of 1 and an MA component of 2, the farthest back my model is reaching is 2 years. It continued the trend of the past 2 years into the future.", "Finally, I used Q-Q plots, and plots of the residuals to ensure that my model did not violate any assumptions of linearity when I made my model (plots not included in this post, but they are in the notebook on my Github).", "Next, I wanted to use Facebook Prophet to conduct the same analysis. Facebook Prophet is an open-source time series tool released by the Facebook team in early 2017. It does more computational work on the back-end in order to generate higher-quality time series analysis than more traditional methods like SARIMA. For instance, Prophet will look for multiple levels of seasonality (hourly, daily, weekly). It is also designed to handle outliers, non-linear seasonality, and holidays, which makes it more flexible than SARIMA.", "FB Prophet also has the advantage of being easy to use. Once your data is in the proper format, you can plug in data and see what kind of prediction you get.", "We see that Prophet performed about the same as my SARIMA model in predictions \u2014 still consistently under-guessing the growth over time. This leads me to believe that SFO traffic growth may be accelerating in a way that is unexpected in my model\u2019s training data.", "However, you can see that when Prophet is retrained on all the data, its future projection extrapolates the overall trend better than SARIMA.", "Finally, I wanted to try to build a neural net that would outperform SARIMA and FB Prophet.", "Neural nets are useful because they can capture hidden patterns through hundreds of iterations that would be missed by a human designing a parametric method like SARIMA.", "However, I had a problem. Because neural nets can easily overfit, I needed to manually separate a validation set, which was not necessary for either SARIMA (since I used AIC score to determine the best model\u2019s hyperparameters), or FB Prophet (since it runs once, and there were no hyperparameters I was tuning).", "Now our training data is getting farther and farther from the range I\u2019m actually going to be predicting \u2014 2019\u20132023.", "I am also operating with small data. My new train set only has ~80 data points to train on (one point for each month), which is much smaller than most neural nets are effectively used for. The possibility of an accurate neural net was looking less and less promising for my time series analysis.", "I was going to try 3 different kinds of neural nets, in order to see which one would handle my problem most effectively.", "When training my models, I made sure to score my models in every epoch on their performance on the validation set, in order to combat overfitting to the train set.", "I tested each architecture, and the GRU far outperformed the others.", "The best GRU model for my problem had 2 GRU layers, followed by 3 Dense layers of decreasing size (without any dropout layers). This architecture made me suspicious of overfitting. However, the graph of the test predictions below (and my eventual 2019\u20132023 prediction) were smooth enough to make me confident that my model was not overfitting.", "After fitting my GRU, when making predictions, I gave it 12 months of data and asked it to predict the next month. I would then take that prediction, incorporate it into a sliding window of the next 12 months of data, and make a prediction based off that. This means that after 12 months of predictions, my GRU was predicting on entirely synthetic data.", "Though the GRU\u2019s performance looks similar to SARIMA and FB Prophet, it actually had a significantly lower error than both.", "This means my neural net had ~20% less error in its prediction than SARIMA and Facebook Prophet, all while training on less data, predicting on itself, and preventing overfitting.", "When my GRU was retrained on all available data and made its rolling 1-month predictions based on the previous 12 months of data, it projected the following growth out to 2023:", "The smoothness of these projections made me confident that the newly trained neural net did not overfit on the whole dataset, despite the lack of dropout layers in my neural net architecture.", "In conclusion, since my GRU neural net had the lowest mean absolute error (outperforming Facebook Prophet and SARIMA by ~20%), we can be most confident with its predictions of the future.", "My GRU predicts that SFO will have an additional 1.6 million departures per year, with a total growth of 22% more annual departures by the year 2023.", "In the future, I\u2019d like to check for patterns of seasonality on the differences between arrivals and departures from SFO, for each airline. I can then see if there is a way to predict what airline is likely to have the most open seats for a particular month.", "For example, perhaps United typically has more departing passengers than arriving passengers in SFO over the holidays, indicating that their planes will be very full on the way out of SFO. But maybe Jetblue has a more advantageous arrival/departure ratio in the holiday months, meaning that you should travel with Jetblue in the holidays if you\u2019re looking to maximize your chances of being on an empty plane.", "The above pattern could hold constant across time, or it could invert for other months. I would then be able to give month-by-month recommendations for what airline to fly in the future to maximize the chance of being on an empty plane (in order to maximize leg room and free carry-on baggage space).", "Thanks for reading! If you want to keep up with my work, feel free to check out my Github.", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F5c7d03cf52b2&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftime-series-analysis-of-sfo-traffic-growth-5c7d03cf52b2&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftime-series-analysis-of-sfo-traffic-growth-5c7d03cf52b2&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftime-series-analysis-of-sfo-traffic-growth-5c7d03cf52b2&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftime-series-analysis-of-sfo-traffic-growth-5c7d03cf52b2&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----5c7d03cf52b2--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----5c7d03cf52b2--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@alexandrez987?source=post_page-----5c7d03cf52b2--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@alexandrez987?source=post_page-----5c7d03cf52b2--------------------------------", "anchor_text": "Alexandre Zajic"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F6fdb21c61cce&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftime-series-analysis-of-sfo-traffic-growth-5c7d03cf52b2&user=Alexandre+Zajic&userId=6fdb21c61cce&source=post_page-6fdb21c61cce----5c7d03cf52b2---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F5c7d03cf52b2&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftime-series-analysis-of-sfo-traffic-growth-5c7d03cf52b2&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F5c7d03cf52b2&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftime-series-analysis-of-sfo-traffic-growth-5c7d03cf52b2&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@rparmly?utm_source=medium&utm_medium=referral", "anchor_text": "Ross Parmly"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://medium.com/towards-data-science/in-depth-analysis/home", "anchor_text": "In-Depth Analysis"}, {"url": "https://github.com/Alexandre987/SFO_Time_Series", "anchor_text": "my Github"}, {"url": "https://data.sfgov.org/Transportation/Air-Traffic-Passenger-Statistics/rkru-6vcg", "anchor_text": "SFGov website"}, {"url": "https://people.duke.edu/~rnau/411arim.htm", "anchor_text": "Duke\u2019s website"}, {"url": "https://people.duke.edu/~rnau/411diff.htm", "anchor_text": "differencing"}, {"url": "https://www.jmp.com/en_us/statistics-knowledge-portal/what-is-regression/simple-linear-regression-assumptions.html", "anchor_text": "assumptions of linearity"}, {"url": "https://github.com/Alexandre987/SFO_Time_Series", "anchor_text": "my Github"}, {"url": "https://facebook.github.io/prophet/", "anchor_text": "Facebook Prophet"}, {"url": "https://research.fb.com/prophet-forecasting-at-scale/", "anchor_text": "early 2017"}, {"url": "https://github.com/Alexandre987", "anchor_text": "my Github"}, {"url": "https://medium.com/tag/data-science?source=post_page-----5c7d03cf52b2---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----5c7d03cf52b2---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/tag/timeseries?source=post_page-----5c7d03cf52b2---------------timeseries-----------------", "anchor_text": "Timeseries"}, {"url": "https://medium.com/tag/deep-learning?source=post_page-----5c7d03cf52b2---------------deep_learning-----------------", "anchor_text": "Deep Learning"}, {"url": "https://medium.com/tag/in-depth-analysis?source=post_page-----5c7d03cf52b2---------------in_depth_analysis-----------------", "anchor_text": "In Depth Analysis"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F5c7d03cf52b2&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftime-series-analysis-of-sfo-traffic-growth-5c7d03cf52b2&user=Alexandre+Zajic&userId=6fdb21c61cce&source=-----5c7d03cf52b2---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F5c7d03cf52b2&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftime-series-analysis-of-sfo-traffic-growth-5c7d03cf52b2&user=Alexandre+Zajic&userId=6fdb21c61cce&source=-----5c7d03cf52b2---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F5c7d03cf52b2&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftime-series-analysis-of-sfo-traffic-growth-5c7d03cf52b2&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----5c7d03cf52b2--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F5c7d03cf52b2&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftime-series-analysis-of-sfo-traffic-growth-5c7d03cf52b2&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----5c7d03cf52b2---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----5c7d03cf52b2--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----5c7d03cf52b2--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----5c7d03cf52b2--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----5c7d03cf52b2--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----5c7d03cf52b2--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----5c7d03cf52b2--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----5c7d03cf52b2--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----5c7d03cf52b2--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@alexandrez987?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@alexandrez987?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Alexandre Zajic"}, {"url": "https://medium.com/@alexandrez987/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "64 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F6fdb21c61cce&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftime-series-analysis-of-sfo-traffic-growth-5c7d03cf52b2&user=Alexandre+Zajic&userId=6fdb21c61cce&source=post_page-6fdb21c61cce--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fa61252227a71&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftime-series-analysis-of-sfo-traffic-growth-5c7d03cf52b2&newsletterV3=6fdb21c61cce&newsletterV3Id=a61252227a71&user=Alexandre+Zajic&userId=6fdb21c61cce&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}