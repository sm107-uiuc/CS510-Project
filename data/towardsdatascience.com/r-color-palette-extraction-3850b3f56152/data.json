{"url": "https://towardsdatascience.com/r-color-palette-extraction-3850b3f56152", "time": 1683014145.881949, "path": "towardsdatascience.com/r-color-palette-extraction-3850b3f56152/", "webpage": {"metadata": {"title": "Exploring chromatic storytelling in movies with R: color palette extraction | by Tommaso Buonocore | Towards Data Science", "h1": "Exploring chromatic storytelling in movies with R: color palette extraction", "description": "How to extract color palettes from movie frames using color quantization theory and unsupervised machine learning"}, "outgoing_paragraph_urls": [{"url": "https://towardsdatascience.com/exploring-chromatic-storytelling-with-r-part-1-8e9ddf8d4187", "anchor_text": "the first part of this colorful journey", "paragraph_index": 0}, {"url": "https://towardsdatascience.com/the-chromar-package-892b716ee2c9", "anchor_text": "the second part", "paragraph_index": 1}, {"url": "https://en.wikipedia.org/wiki/Pixel_art", "anchor_text": "stylistic choices", "paragraph_index": 5}, {"url": "https://en.wikipedia.org/wiki/K-means_clustering", "anchor_text": "K-Means clustering algorithm", "paragraph_index": 7}, {"url": "https://en.wikipedia.org/wiki/Lab_color_space", "anchor_text": "Lab color space", "paragraph_index": 7}, {"url": "http://zschuessler.github.io/DeltaE/learn/", "anchor_text": "Delta E 2000", "paragraph_index": 10}, {"url": "https://en.wikipedia.org/wiki/K-means%2B%2B", "anchor_text": "K++ algorithm", "paragraph_index": 18}, {"url": "https://github.com/detsutut/chroma", "anchor_text": "ChromaR package", "paragraph_index": 19}, {"url": "http://colormind.io/blog/generating-color-palettes-with-deep-learning/", "anchor_text": "would probably help", "paragraph_index": 22}, {"url": "http://linkedin.com/in/tbuonocore", "anchor_text": "linkedin.com/in/tbuonocore", "paragraph_index": 25}], "all_paragraphs": ["In the first part of this colorful journey, we explored some interesting chromatic examples picked up from famous movies, trying to guess the reasons behind directors\u2019 choices and scratching the surface of what can be done through R scripting.", "In the second part, we put more emphasis on technical details introducing the ChromaR toolkit, an R package that renders all the chromatic visualizations previously shown in part I.", "Instead of focusing on sequences of colors and chromatic patterns across entire movies, the cornerstone of this third part will be the visual inspection of a single frame. Specifically, our main objective will be the automatic generation of proper color palettes from any input frame.", "First things first, let\u2019s start with a few bits of color theory.", "Extracting color palettes is all about color quantization. In computer graphics, color quantization is a process that reduces the number of distinct colors used in an image.", "This technique is often used to display images with many colors on devices that can only manage a limited number of colors, due to memory limitations or stylistic choices. In these cases, finding the most representative set of color is crucial to reconstruct the original picture with the highest fidelity possible.", "The color quantization process is can be divided into two steps:", "For the ChromaR package, the choice has been to implement palette extraction through the K-Means clustering algorithm, using the Lab color space, in which Euclidean distance is more consistent with a perceptual difference.", "In this color space, the nonlinear relations for L*, a*, and b* are intended to mimic the nonlinear response of the eye.", "Different metrics have been proposed to quantify the difference between two colors fitting human perception. Here we used the first and simplest one, Delta E 76, which is a standard Euclidean distance.", "Several iterations improved this formula over the years, coming up with very accurate (and complex) metrics like Delta E 2000.", "K-means is a clustering algorithm that minimizes the within-cluster sum of squared distances between the centroid and the other points of the cluster (variance is used as a measure of cluster scatter).", "The number of clusters k represents the desired size of our color palette, where colors are determined by the RGB/Lab value of each centroid.", "To keep it simple, the distance metric chosen for ChromaR is our Delta E 76 a.k.a. Euclidean distance.", "Just like any other unsupervised machine learning algorithm, K-Means ends up marking each pixel of our frame with a label. The k distinct values this label can assume will generate our color palette.", "Going one step further, we can use these labels to reconstruct the input image with fewer colors.", "Despite its simplicity, K-Means can still produce competitive results. However, it doesn\u2019t lack drawbacks and limitations.", "K-Means is highly dependent on three things:", "To mitigate the effect of these drawbacks, ChromaR implements the K++ algorithm, which limits the fluctuations caused by the choice of the initial values, and adopts a color space based on human perception.", "All the palettes shown in this article have been generated using the ChromaR package running the following script:", "Please note that the chromaR package is still a beta and many improvements must be performed in order to make it 100% operational. Therefore, please report any bug or issues you\u2019re having!", "The automatic palette extraction tool is indeed another useful arrow in the quiver for our chromatic explorations, but can hardly challenge the levels of human evaluation. In fact, human-designed color palettes typically show some high-level structure (e.g. color gradients, hues grouped together, high contrast between colors, etc.) that is completely absent in automatically created palettes.", "However, there is still big room for improvement on this front. Generative Adversarial Networks (GANs), for instance, would probably help in generating palettes that are visually more plausible, while more complex metrics like Delta E 2000 may unlock human-like perceptions in clustering.", "Even without our warm, magical human touch, though, we can still achieve pretty impressive results!", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Ph.D. Student in Big Data & Biomedical Informatics - Pavia // Bioengineer // ML & AI Enthusiast // Geek, musician, activist // LI \u2192 linkedin.com/in/tbuonocore"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F3850b3f56152&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fr-color-palette-extraction-3850b3f56152&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fr-color-palette-extraction-3850b3f56152&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fr-color-palette-extraction-3850b3f56152&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fr-color-palette-extraction-3850b3f56152&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----3850b3f56152--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----3850b3f56152--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@detsutut?source=post_page-----3850b3f56152--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@detsutut?source=post_page-----3850b3f56152--------------------------------", "anchor_text": "Tommaso Buonocore"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F5c63ef55f821&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fr-color-palette-extraction-3850b3f56152&user=Tommaso+Buonocore&userId=5c63ef55f821&source=post_page-5c63ef55f821----3850b3f56152---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F3850b3f56152&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fr-color-palette-extraction-3850b3f56152&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F3850b3f56152&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fr-color-palette-extraction-3850b3f56152&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@sushioutlaw?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Brian McGowan"}, {"url": "https://unsplash.com/s/photos/star-wars?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Unsplash"}, {"url": "https://towardsdatascience.com/exploring-chromatic-storytelling-with-r-part-1-8e9ddf8d4187", "anchor_text": "the first part of this colorful journey"}, {"url": "https://towardsdatascience.com/exploring-chromatic-storytelling-with-r-part-1-8e9ddf8d4187", "anchor_text": "Exploring chromatic storytelling in movies with R (Part I)A colorful, data-driven journey across the chromatic world of moviestowardsdatascience.com"}, {"url": "https://towardsdatascience.com/the-chromar-package-892b716ee2c9", "anchor_text": "the second part"}, {"url": "https://towardsdatascience.com/the-chromar-package-892b716ee2c9", "anchor_text": "Exploring chromatic storytelling in movies with R: the ChromaR packagePractical insights on how to generate movie framelines and many other chromatic data-viz plotstowardsdatascience.com"}, {"url": "http://r0k.us/graphics/kodak/", "anchor_text": "Kodak"}, {"url": "https://en.wikipedia.org/wiki/Pixel_art", "anchor_text": "stylistic choices"}, {"url": "https://en.wikipedia.org/wiki/CIELAB_color_space", "anchor_text": "CIELAB"}, {"url": "https://muthu.co/reduce-the-number-of-colors-of-an-image-using-uniform-quantization/", "anchor_text": "uniform quantization"}, {"url": "https://en.wikipedia.org/wiki/Cluster_analysis", "anchor_text": "clustering problem"}, {"url": "https://en.wikipedia.org/wiki/Median_cut", "anchor_text": "median cut"}, {"url": "https://en.wikipedia.org/wiki/K-means_clustering", "anchor_text": "K-Means clustering algorithm"}, {"url": "https://en.wikipedia.org/wiki/Lab_color_space", "anchor_text": "Lab color space"}, {"url": "https://www.researchgate.net/publication/328675252_DETERMINATION_OF_THE_EFFECTS_OF_DIFFERENT_PACKAGING_METHODS_AND_MATERIALS_ON_STORAGE_TIME_OF_DRIED_APPLE", "anchor_text": "2018, Kulku"}, {"url": "https://www.bbc.com/news/world-us-canada-52557291", "anchor_text": "Elon Musk\u2019s son\u2019s name"}, {"url": "http://zschuessler.github.io/DeltaE/learn/", "anchor_text": "Delta E 2000"}, {"url": "https://en.wikipedia.org/wiki/K-means%2B%2B", "anchor_text": "K++ algorithm"}, {"url": "https://github.com/detsutut/chroma", "anchor_text": "ChromaR package"}, {"url": "http://colormind.io/blog/generating-color-palettes-with-deep-learning/", "anchor_text": "would probably help"}, {"url": "https://github.com/detsutut/chroma", "anchor_text": "detsutut/chromaChromaR is an experimental R toolkit for analyzing and exploring chromatic storytelling in movies or any other video\u2026github.com"}, {"url": "https://www.linkedin.com/in/tbuonocore/", "anchor_text": "Tommaso Buonocore \u2014 Author \u2014 Towards Data Science | LinkedInView Tommaso Buonocore\u2019s profile on LinkedIn, the world\u2019s largest professional community. Tommaso has 5 jobs listed on\u2026www.linkedin.com"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----3850b3f56152---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/tag/clustering?source=post_page-----3850b3f56152---------------clustering-----------------", "anchor_text": "Clustering"}, {"url": "https://medium.com/tag/data-visualization?source=post_page-----3850b3f56152---------------data_visualization-----------------", "anchor_text": "Data Visualization"}, {"url": "https://medium.com/tag/data-science?source=post_page-----3850b3f56152---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/colors?source=post_page-----3850b3f56152---------------colors-----------------", "anchor_text": "Colors"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F3850b3f56152&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fr-color-palette-extraction-3850b3f56152&user=Tommaso+Buonocore&userId=5c63ef55f821&source=-----3850b3f56152---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F3850b3f56152&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fr-color-palette-extraction-3850b3f56152&user=Tommaso+Buonocore&userId=5c63ef55f821&source=-----3850b3f56152---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F3850b3f56152&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fr-color-palette-extraction-3850b3f56152&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----3850b3f56152--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F3850b3f56152&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fr-color-palette-extraction-3850b3f56152&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----3850b3f56152---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----3850b3f56152--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----3850b3f56152--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----3850b3f56152--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----3850b3f56152--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----3850b3f56152--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----3850b3f56152--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----3850b3f56152--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----3850b3f56152--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@detsutut?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@detsutut?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Tommaso Buonocore"}, {"url": "https://medium.com/@detsutut/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "255 Followers"}, {"url": "http://linkedin.com/in/tbuonocore", "anchor_text": "linkedin.com/in/tbuonocore"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F5c63ef55f821&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fr-color-palette-extraction-3850b3f56152&user=Tommaso+Buonocore&userId=5c63ef55f821&source=post_page-5c63ef55f821--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fe9ce3a2a5985&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fr-color-palette-extraction-3850b3f56152&newsletterV3=5c63ef55f821&newsletterV3Id=e9ce3a2a5985&user=Tommaso+Buonocore&userId=5c63ef55f821&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}