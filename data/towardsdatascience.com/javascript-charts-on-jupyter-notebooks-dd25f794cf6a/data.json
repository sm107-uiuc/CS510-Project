{"url": "https://towardsdatascience.com/javascript-charts-on-jupyter-notebooks-dd25f794cf6a", "time": 1683008475.005623, "path": "towardsdatascience.com/javascript-charts-on-jupyter-notebooks-dd25f794cf6a/", "webpage": {"metadata": {"title": "JavaScript Charts on Jupyter Notebooks | by Andrea Ialenti | Towards Data Science", "h1": "JavaScript Charts on Jupyter Notebooks", "description": "Learn how to put Jupyter notebooks on steroids, implementing interactive visualizations with any JavaScript library"}, "outgoing_paragraph_urls": [{"url": "https://www.highcharts.com/demo/", "anchor_text": "Highcharts", "paragraph_index": 2}, {"url": "https://echarts.apache.org/en/index.html", "anchor_text": "ECharts", "paragraph_index": 2}, {"url": "https://d3js.org/", "anchor_text": "d3.js", "paragraph_index": 2}, {"url": "https://echarts.apache.org/examples/en/index.html", "anchor_text": "ECharts website", "paragraph_index": 4}, {"url": "https://www.google.com/covid19/mobility/data_documentation.html?hl=en", "anchor_text": "Google COVID-19 Community Mobility Reports", "paragraph_index": 6}, {"url": "https://www.google.com/covid19/mobility/data_documentation.html?hl=en", "anchor_text": "1", "paragraph_index": 6}, {"url": "https://ipython.readthedocs.io/en/stable/interactive/magics.html", "anchor_text": "Jupyter magic", "paragraph_index": 9}, {"url": "https://github.com/jupyter/notebook/issues/2219", "anchor_text": "unfortunately, it appears that this function lacks of good documentation", "paragraph_index": 16}, {"url": "https://codeburst.io/javascript-what-the-heck-is-a-callback-aba4da2deced", "anchor_text": "The reason why we cannot \u201csimply return\u201d the", "paragraph_index": 17}, {"url": "https://codeburst.io/javascript-what-the-heck-is-a-callback-aba4da2deced", "anchor_text": "get_data()", "paragraph_index": 17}, {"url": "https://codeburst.io/javascript-what-the-heck-is-a-callback-aba4da2deced", "anchor_text": "results, and instead we need a \u201ccallback\u201d and a global external variable, is something I won\u2019t talk about in this article to avoid drifting from the actual topic.", "paragraph_index": 17}, {"url": "https://echarts.apache.org/examples/en/editor.html?c=line-stack", "anchor_text": "the stacked line chart should be a good starting point", "paragraph_index": 18}, {"url": "https://gist.github.com/aialenti/8cf4702ae8be7f79936b4c75f1a4024a", "anchor_text": "You can find the full notebook here.", "paragraph_index": 37}, {"url": "https://medium.com/@andrea.ialenti", "anchor_text": "feel free to follow me on Medium!", "paragraph_index": 38}], "all_paragraphs": ["As a professional, I like to think about myself as an hybrid between a data scientist and a front-end developer. What I really enjoy in my work life, is to deal with projects that involve both those components. Quite often, though, there is no time to design and implement a full web application with a solid client-server architecture and a super reusable UI: in these cases, we need to fall back to something quicker.", "In the following, I\u2019ll show you how to put a Jupyter notebook on steroids, implementing an interactive and filterable visualization with just a few lines of JavaScript.", "We need to select a JS library\u00a0for\u00a0data\u00a0visualization. We have pretty much infinite options; for this guide, we want to select something easy to use. Some examples include Highcharts, ECharts or d3.js,", "We are going to use ECharts, a framework that allows to create super fancy visualizations with little effort. The library has been initially developed at Baidu, but it is now in the Apache incubator. It\u2019s licensed under Apache-2.0.", "JavaScript might not always be in the arsenal of a Data Scientist (I have found that the knowledge of this language is more common among people with a Computer Science/Programming background). If you don\u2019t know JavaScript, though, consider that these libraries make charts generation quite easy (if you are seeking for very complex interactions there might be some more work to do). The ECharts website contains tons of copy-and-paste examples that unfold pretty much all the features.", "Using these tools the only \u201chard\u201d stuff consists of manipulating data to put them in a format suitable for the specific chart type we choose.", "We will use the Google COVID-19 Community Mobility Reports* data. This dataset contains, for each country, the percent change in visits to places like grocery stores and parks within a geographic area [1], and it was designed by Google to help fight COVID-19. Let\u2019s see an extract and describe the columns:", "Great we have everything we need, let\u2019s dive into the code!", "The topic of this article is not to create a super fancy chart with ECharts, but it is to show how to enable this functionality on Jupyter notebooks. For this reason, we are only going to implement a single visualization: a multi-line chart that shows the time series for each of the KPI available in the dataset.", "Jupyter cells can interpret various types of content, from Python code to Markdown. How hard it is to inject JavaScript code? Luckily for us it\u2019s as easy as using a Jupyter magic! Through cell magics we can instruct the notebook to read the cell content in a specific way, for JavaScript we can use the %%javascript magic.", "Awesome. We know how to write JS in a cell. The workflow should be the following:", "The easiest way to do the above is to organize all the Python code in a single function, that in our case is called get_data(). For this first example, we are going to show only the time series associated with the retail_and_recreation_percent_change_from_baseline indicator.", "The JSON we\u2019ll feed to the JavaScript will have the following form:", "At this point we have our data: we only need to access them in a JavaScript cell. First, we\u2019ll need to import ECharts: to do so, we can use a module called requirejs:", "Later, we\u2019ll be able to use the above to store the ECharts object within the ech variable.", "To make JS and Python communicate we have to store somewhere the result of the get_data() function. A very simple way to make the data accessible to all the other cells is to save the output in a window property: i.e. we are going to save the JSON string in the global variable window.outputVar. While storing things in window is almost NEVER a best practice when it comes to JavaScript development, I think that we can accept this compromise to keep the code a bit simpler.", "Within a %%javascript cell, we can execute Python code using the IPython.notebook.kernel.execute() function. Without delving too much into details (unfortunately, it appears that this function lacks of good documentation), the function accepts a string as the first parameter: this string is the actual Python code that will be executed (hence we stored everything in a single function to make this part cleaner). The second parameter describes what JavaScript callbacks need to be executed after Python.", "The reason why we cannot \u201csimply return\u201d the get_data() results, and instead we need a \u201ccallback\u201d and a global external variable, is something I won\u2019t talk about in this article to avoid drifting from the actual topic. What happens in the above, though, is simply the following:", "Finally, the fun part! Let\u2019s dive into the ECharts samples to find a visualization that suits our needs (the idea is to only copy-paste-edit some code): the stacked line chart should be a good starting point:", "Simply put, the ECharts viz generation works in three steps:", "Besides all the visual nuances (colors, tooltips, etc.), the most important part consists in generating the data starting from the JSON above. We need to create two objects: one for the x-axis, and another one for the y-axis.", "The x-axis valuesThis will contain all the dates we want to display. This list needs to be saved in the xAxis property of the chart\u2019s options:", "The seriesThis will contain the actual data we want to display. The series property consists of an array of objects where each element is one of the lines in the chart:", "The code to generate the viz is the following:", "As you can see, all the code is saved within a function stored\u200a\u2014\u200aagain, sigh\u00a0:(\u200a\u2014 in the window global object; the last step is to do the final call:", "Note that in the above, we are passing the element variable to the buildChart() function. The EChart visualization will be appended to that element (i.e. the cell in which the buildChart() function is executed). The output will be the following:", "Two problems: first, the chart is unreadable \u2014 too many lines \u2014 second, we can only see one of the indicators. We\u2019d really like to have two HTML elements to select only the desired countries and the KPI to display. There are multiple ways to do this, we\u2019ll choose the simplest one!", "We\u2019ll need to slightly modify the build_data() to return ALL the KPIs. Let\u2019s rename the function as build_data_all():", "The new JSON structure is the following:", "The idea is to insert in the page two HTML select elements:", "The only difference with the previous code is that we need e to filter the JSON according to the user selection. The UI needs to update the chart every time the user changes one of the selections.", "While storing things in window is almost NEVER a best practice when it comes to JavaScript development, I think that we can accept this compromise to keep the code a bit simpler.", "The following snippet creates the two HTML select elements and appends them to the cell:", "Note that we attached the events listeners to the select boxes, so that the viz is refreshed whenever the selection is modified. Moreover, observe that all the functions are stored in the window object, to make them accessible globally.", "We are ready to implement the new function to generate the chart:", "We are towards the end, let\u2019s write the function that does the refresh when one input changes:", "Finally, let\u2019s invoke everything in a separate cell:", "You can find the full notebook here.", "Hope you enjoyed feel free to follow me on Medium!", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "I\u2019m a Data Scientist, I usually ride a giant unicorn with a rainbow mane. I love learning by explaining. \u201cLike a bicycle I need to move to keep my balance\u201d."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fdd25f794cf6a&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fjavascript-charts-on-jupyter-notebooks-dd25f794cf6a&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fjavascript-charts-on-jupyter-notebooks-dd25f794cf6a&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fjavascript-charts-on-jupyter-notebooks-dd25f794cf6a&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fjavascript-charts-on-jupyter-notebooks-dd25f794cf6a&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----dd25f794cf6a--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----dd25f794cf6a--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@andrea.ialenti?source=post_page-----dd25f794cf6a--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@andrea.ialenti?source=post_page-----dd25f794cf6a--------------------------------", "anchor_text": "Andrea Ialenti"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fc4f0dc70838c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fjavascript-charts-on-jupyter-notebooks-dd25f794cf6a&user=Andrea+Ialenti&userId=c4f0dc70838c&source=post_page-c4f0dc70838c----dd25f794cf6a---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fdd25f794cf6a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fjavascript-charts-on-jupyter-notebooks-dd25f794cf6a&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fdd25f794cf6a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fjavascript-charts-on-jupyter-notebooks-dd25f794cf6a&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://www.highcharts.com/demo/", "anchor_text": "Highcharts"}, {"url": "https://echarts.apache.org/en/index.html", "anchor_text": "ECharts"}, {"url": "https://d3js.org/", "anchor_text": "d3.js"}, {"url": "https://echarts.apache.org/examples/en/index.html", "anchor_text": "ECharts website"}, {"url": "https://www.google.com/covid19/mobility/data_documentation.html?hl=en", "anchor_text": "Google COVID-19 Community Mobility Reports"}, {"url": "https://www.google.com/covid19/mobility/data_documentation.html?hl=en", "anchor_text": "1"}, {"url": "https://www.google.com/covid19/mobility/data_documentation.html?hl=en", "anchor_text": "2"}, {"url": "https://www.google.com/covid19/mobility/data_documentation.html?hl=en", "anchor_text": "2"}, {"url": "https://www.google.com/covid19/mobility/data_documentation.html?hl=en", "anchor_text": "2"}, {"url": "https://www.google.com/covid19/mobility/data_documentation.html?hl=en", "anchor_text": "2"}, {"url": "https://www.google.com/covid19/mobility/data_documentation.html?hl=en", "anchor_text": "2"}, {"url": "https://www.google.com/covid19/mobility/data_documentation.html?hl=en", "anchor_text": "2"}, {"url": "https://ipython.readthedocs.io/en/stable/interactive/magics.html", "anchor_text": "Jupyter magic"}, {"url": "https://github.com/jupyter/notebook/issues/2219", "anchor_text": "unfortunately, it appears that this function lacks of good documentation"}, {"url": "https://codeburst.io/javascript-what-the-heck-is-a-callback-aba4da2deced", "anchor_text": "The reason why we cannot \u201csimply return\u201d the"}, {"url": "https://codeburst.io/javascript-what-the-heck-is-a-callback-aba4da2deced", "anchor_text": "get_data()"}, {"url": "https://codeburst.io/javascript-what-the-heck-is-a-callback-aba4da2deced", "anchor_text": "results, and instead we need a \u201ccallback\u201d and a global external variable, is something I won\u2019t talk about in this article to avoid drifting from the actual topic."}, {"url": "https://echarts.apache.org/examples/en/editor.html?c=line-stack", "anchor_text": "the stacked line chart should be a good starting point"}, {"url": "https://gist.github.com/aialenti/8cf4702ae8be7f79936b4c75f1a4024a", "anchor_text": "You can find the full notebook here."}, {"url": "https://medium.com/@andrea.ialenti", "anchor_text": "feel free to follow me on Medium!"}, {"url": "https://towardsdatascience.com/the-art-of-joining-in-spark-dcbd33d693c", "anchor_text": "The art of joining in SparkPractical tips to speedup joins in Sparktowardsdatascience.com"}, {"url": "https://towardsdatascience.com/clustering-pollock-1ec24c9cf447", "anchor_text": "Clustering PollockA cluster analysis on Jackson Pollock\u2019s paintings: how to use k-means to group colorstowardsdatascience.com"}, {"url": "https://medium.com/tag/data-science?source=post_page-----dd25f794cf6a---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/python?source=post_page-----dd25f794cf6a---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/javascript?source=post_page-----dd25f794cf6a---------------javascript-----------------", "anchor_text": "JavaScript"}, {"url": "https://medium.com/tag/data-visualization?source=post_page-----dd25f794cf6a---------------data_visualization-----------------", "anchor_text": "Data Visualization"}, {"url": "https://medium.com/tag/towards-data-science?source=post_page-----dd25f794cf6a---------------towards_data_science-----------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fdd25f794cf6a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fjavascript-charts-on-jupyter-notebooks-dd25f794cf6a&user=Andrea+Ialenti&userId=c4f0dc70838c&source=-----dd25f794cf6a---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fdd25f794cf6a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fjavascript-charts-on-jupyter-notebooks-dd25f794cf6a&user=Andrea+Ialenti&userId=c4f0dc70838c&source=-----dd25f794cf6a---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fdd25f794cf6a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fjavascript-charts-on-jupyter-notebooks-dd25f794cf6a&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----dd25f794cf6a--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fdd25f794cf6a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fjavascript-charts-on-jupyter-notebooks-dd25f794cf6a&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----dd25f794cf6a---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----dd25f794cf6a--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----dd25f794cf6a--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----dd25f794cf6a--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----dd25f794cf6a--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----dd25f794cf6a--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----dd25f794cf6a--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----dd25f794cf6a--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----dd25f794cf6a--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@andrea.ialenti?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@andrea.ialenti?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Andrea Ialenti"}, {"url": "https://medium.com/@andrea.ialenti/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "543 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fc4f0dc70838c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fjavascript-charts-on-jupyter-notebooks-dd25f794cf6a&user=Andrea+Ialenti&userId=c4f0dc70838c&source=post_page-c4f0dc70838c--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F38edc5d7a9a0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fjavascript-charts-on-jupyter-notebooks-dd25f794cf6a&newsletterV3=c4f0dc70838c&newsletterV3Id=38edc5d7a9a0&user=Andrea+Ialenti&userId=c4f0dc70838c&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}