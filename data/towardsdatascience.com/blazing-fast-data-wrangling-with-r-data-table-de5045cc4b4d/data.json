{"url": "https://towardsdatascience.com/blazing-fast-data-wrangling-with-r-data-table-de5045cc4b4d", "time": 1683002957.235691, "path": "towardsdatascience.com/blazing-fast-data-wrangling-with-r-data-table-de5045cc4b4d/", "webpage": {"metadata": {"title": "Blazing Fast Data Wrangling With R data.table | by Thu Vu | Towards Data Science", "h1": "Blazing Fast Data Wrangling With R data.table", "description": "I have recently noticed that every R script I wrote starts with library(data.table). And that seems a very compelling reason for me to write a post about it. You may have seen that as the machine\u2026"}, "outgoing_paragraph_urls": [{"url": "https://atrebas.github.io/post/2019-03-03-datatable-dplyr/", "anchor_text": "here", "paragraph_index": 0}, {"url": "https://cran.r-project.org/web/packages/data.table/vignettes/datatable-intro.html", "anchor_text": "data.table", "paragraph_index": 3}, {"url": "https://www.reddit.com/r/rstats/comments/ca90nk/why_i_love_datatable/", "anchor_text": "many people", "paragraph_index": 4}, {"url": "https://cran.r-project.org/web/packages/data.table/data.table.pdf", "anchor_text": "package", "paragraph_index": 5}, {"url": "https://h2oai.github.io/db-benchmark/", "anchor_text": "benchmark", "paragraph_index": 8}, {"url": "https://cran.r-project.org/web/packages/data.table/vignettes/datatable-intro.html", "anchor_text": "documentation", "paragraph_index": 28}, {"url": "https://www.beoptimized.be/pdf/R_Data_Transformation.pdf", "anchor_text": "cheat sheet", "paragraph_index": 28}], "all_paragraphs": ["Update March 2020: You can find a very interesting comparison between data.tableand dplyr here.", "I have recently noticed that every R script I wrote starts with library(data.table). And that seems a very compelling reason for me to write a post about it.", "You may have seen that as the machine learning community is developing, Python has gained enormous popularity and as a result, the Pandas library has automatically become a staple for a lot of people.", "However, if I had a choice, I would definitely prefer using R data.table for relatively large dataset data manipulation, in-depth exploration and ad-hoc analyses. Why? Because it\u2019s so fast, elegant and beautiful (sorry if I got too enthusiastic!). But hey, working with data means you\u2019ll have to turn the code upside down, mould it, clean it for maybe\u2026 uhm\u2026 a thousand times before you can actually build a machine learning model. In fact, data pre-processing usually takes 80\u201390% the time of a data science project. That\u2019s why I can\u2019t afford slow and inefficient code (and I don\u2019t think anyone should, as a data professional).", "So let\u2019s dive into what data.table is and why many people have become big fans of it.", "data.table package is an extension of data.frame package in R. It is widely used for fast aggregation of large datasets, low latency add/update/remove of columns, quicker ordered joins, and a fast file reader.", "That sounds good, right? You may think it\u2019s difficult to pick up, but actually a data.table is also a type of data.frame. So rest assured that any code you use for a data.frame will also work as well with a data.table. But believe me, once you\u2019ve used data.table, you\u2019ll never want to use the base R data.frame syntax again. Keep reading if you want to know why.", "From my own experience, working with fast code can really improve the thinking flow in the data analysis process. Speed also very important in a data science project, in which you usually have to quickly prototype an idea.", "When it comes to speed, data.table puts all other packages in Python and many other languages to shame. This is shown in this benchmark, which compares tools from R, Python and Julia. To do five data manipulations on a 50GB dataset, data.table only took on average 123s, while Spark took 381s, (py)datatable took 712s, and pandas could not do the task due to out of memory.", "One of the most powerful functions in data.table package is fread(), which imports data similarly to whatread.csv() does. But it\u2019s optimized and much much faster. Let\u2019s look at this example:", "The results will show that on average, fread() will be 3-4 times faster than read.csv() function.", "Almost every data manipulation with data.table will look like this:", "As a result, the code you write will be very consistent and easy to read. Let\u2019s take the US Census Income dataset for illustration purposes:", "In the below examples, I\u2019ll compare the code in base R, Python and data.table, so that you can easily compare them:", "> in base R you\u2019d probably write something like this:", "As you can see in this simple example, data.table removes all redundancy of repeating dt all the times, compared to Python and base R. This in turn reduces the chance of making typo mistakes (remember the coding principle DRY \u2014 Don\u2019t repeat yourself!)", "2. To aggregate age by occupation for all male workers:", "> in base R you\u2019d probably write:", "The by = term defines which column(s) you want to aggregate your data on. This data.table syntax may seem a little intimidating at first, but once you get used to it you\u2019ll never bother typing \u201cgroupby(\u2026)\u201d again.", "3. To conditionally modify values in a column, for example to increase the age of all Tech-support workers by 5 (I know it\u2019s a silly example, but just for illustration :)).", "> in base R you\u2019d probably have to write this horrible line (who has time to write dt$ so many times!):", "> in Python (there are several alternatives that are equally long):", "It\u2019s almost like a magic, isn\u2019t it? No more cumbersome repetitive code, and it keeps yourself DRY. You may have noticed the strange operator := in the data.table syntax. This operator is used to assign new values to an existing column, just like using the argument inplace=True in Python.", "4. Renaming columns is a breeze in data.table. If I want to rename occupation column as job:", "> in base R you might write:", "5. What about applying a function to several columns? Suppose you want to multiply capital_gain and capital_loss by 1000:", "You might find this syntax in data.table is a little quirky, but the .SDcols argument comes in very handy in many cases, and the general form of data.table syntax is preserved this way.", "From a few simple illustrations above, one can see that the code in R data.table is in many cases faster, cleaner and more efficient than in base R and Python. The form of data.table code is very consistent. You only need to remember:", "As an additional note, the data subsetting with i by keying a data.table even allows faster subsets, joins and sorts, which you can read more about in this documentation, or this very useful cheat sheet.", "Thank you for reading. If you like this post, I would write more about how to do advanced data wrangling with R and Python in the future posts.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Data science consultant | CS major | Youtube @Thu Vu data analytics"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fde5045cc4b4d&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fblazing-fast-data-wrangling-with-r-data-table-de5045cc4b4d&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fblazing-fast-data-wrangling-with-r-data-table-de5045cc4b4d&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fblazing-fast-data-wrangling-with-r-data-table-de5045cc4b4d&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fblazing-fast-data-wrangling-with-r-data-table-de5045cc4b4d&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----de5045cc4b4d--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----de5045cc4b4d--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@vuthihienthu.ueb?source=post_page-----de5045cc4b4d--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@vuthihienthu.ueb?source=post_page-----de5045cc4b4d--------------------------------", "anchor_text": "Thu Vu"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F4336ed7a3103&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fblazing-fast-data-wrangling-with-r-data-table-de5045cc4b4d&user=Thu+Vu&userId=4336ed7a3103&source=post_page-4336ed7a3103----de5045cc4b4d---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fde5045cc4b4d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fblazing-fast-data-wrangling-with-r-data-table-de5045cc4b4d&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fde5045cc4b4d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fblazing-fast-data-wrangling-with-r-data-table-de5045cc4b4d&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@ffstop?utm_source=medium&utm_medium=referral", "anchor_text": "Fotis Fotopoulos"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://atrebas.github.io/post/2019-03-03-datatable-dplyr/", "anchor_text": "here"}, {"url": "https://cran.r-project.org/web/packages/data.table/vignettes/datatable-intro.html", "anchor_text": "data.table"}, {"url": "https://www.reddit.com/r/rstats/comments/ca90nk/why_i_love_datatable/", "anchor_text": "many people"}, {"url": "https://cran.r-project.org/web/packages/data.table/data.table.pdf", "anchor_text": "package"}, {"url": "https://h2oai.github.io/db-benchmark/", "anchor_text": "benchmark"}, {"url": "https://archive.ics.uci.edu/ml/machine-learning-databases/adult/adult.data", "anchor_text": "https://archive.ics.uci.edu/ml/machine-learning-databases/adult/adult.data"}, {"url": "https://archive.ics.uci.edu/ml/machine-learning-databases/adult/adult.data", "anchor_text": "https://archive.ics.uci.edu/ml/machine-learning-databases/adult/adult.data"}, {"url": "https://github.com/Rdatatable/data.table/wiki", "anchor_text": "https://github.com/Rdatatable/data.table/wiki"}, {"url": "https://archive.ics.uci.edu/ml/machine-learning-databases/adult/adult.data", "anchor_text": "https://archive.ics.uci.edu/ml/machine-learning-databases/adult/adult.data"}, {"url": "https://cran.r-project.org/web/packages/data.table/vignettes/datatable-intro.html", "anchor_text": "documentation"}, {"url": "https://www.beoptimized.be/pdf/R_Data_Transformation.pdf", "anchor_text": "cheat sheet"}, {"url": "https://medium.com/tag/programming?source=post_page-----de5045cc4b4d---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/tag/data-science?source=post_page-----de5045cc4b4d---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/r?source=post_page-----de5045cc4b4d---------------r-----------------", "anchor_text": "R"}, {"url": "https://medium.com/tag/python?source=post_page-----de5045cc4b4d---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/analytics?source=post_page-----de5045cc4b4d---------------analytics-----------------", "anchor_text": "Analytics"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fde5045cc4b4d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fblazing-fast-data-wrangling-with-r-data-table-de5045cc4b4d&user=Thu+Vu&userId=4336ed7a3103&source=-----de5045cc4b4d---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fde5045cc4b4d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fblazing-fast-data-wrangling-with-r-data-table-de5045cc4b4d&user=Thu+Vu&userId=4336ed7a3103&source=-----de5045cc4b4d---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fde5045cc4b4d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fblazing-fast-data-wrangling-with-r-data-table-de5045cc4b4d&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----de5045cc4b4d--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fde5045cc4b4d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fblazing-fast-data-wrangling-with-r-data-table-de5045cc4b4d&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----de5045cc4b4d---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----de5045cc4b4d--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----de5045cc4b4d--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----de5045cc4b4d--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----de5045cc4b4d--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----de5045cc4b4d--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----de5045cc4b4d--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----de5045cc4b4d--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----de5045cc4b4d--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@vuthihienthu.ueb?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@vuthihienthu.ueb?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Thu Vu"}, {"url": "https://medium.com/@vuthihienthu.ueb/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "2.2K Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F4336ed7a3103&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fblazing-fast-data-wrangling-with-r-data-table-de5045cc4b4d&user=Thu+Vu&userId=4336ed7a3103&source=post_page-4336ed7a3103--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F7ffc48fdce92&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fblazing-fast-data-wrangling-with-r-data-table-de5045cc4b4d&newsletterV3=4336ed7a3103&newsletterV3Id=7ffc48fdce92&user=Thu+Vu&userId=4336ed7a3103&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}