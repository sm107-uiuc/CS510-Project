{"url": "https://towardsdatascience.com/extract-text-from-memes-with-python-opencv-tesseract-ocr-63c2ccd72b69", "time": 1683017511.313525, "path": "towardsdatascience.com/extract-text-from-memes-with-python-opencv-tesseract-ocr-63c2ccd72b69/", "webpage": {"metadata": {"title": "Get text from memes with python and OCR | Towards Data Science", "h1": "How to extract text from memes with Python, OpenCV and Tesseract OCR", "description": "A starting point pipeline to tackle the extraction of text from memes using Python, OpenCV, and TesseractOCR, From the raw image to the output text."}, "outgoing_paragraph_urls": [{"url": "https://github.com/tesseract-ocr/tessdoc", "anchor_text": "following this link", "paragraph_index": 2}, {"url": "https://imgflip.com/memegenerator", "anchor_text": "imageflip", "paragraph_index": 5}, {"url": "https://tesseract-ocr.github.io/tessdoc/ImproveQuality.html", "anchor_text": "documentation", "paragraph_index": 7}, {"url": "https://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_imgproc/py_filtering/py_filtering.html", "anchor_text": "OpenCV", "paragraph_index": 8}, {"url": "https://docs.opencv.org/master/d4/d86/group__imgproc__filter.html#ga9d7064d478c95d60003cf839430737ed", "anchor_text": "here", "paragraph_index": 8}, {"url": "https://github.com/tesseract-ocr/tesseract/blob/master/src/api/tesseractmain.cpp", "anchor_text": "documentation", "paragraph_index": 13}, {"url": "http://www.linkedin.com/in/egon-ferri", "anchor_text": "www.linkedin.com/in/egon-ferri", "paragraph_index": 20}], "all_paragraphs": ["Extracting text information from an image can serve different scopes.In our case, we needed to extract text to enhance the performance of our multi-modal sentiment classification model based on tweets accompanied by images. Since we found that the most common reaction pic that can be found on social media are formatted as MEMEs, we developed a pipeline to extract text from images formatted like that, and in this article, we\u2019ll present it.", "Currently (Nov 2020), the state of the art in text extraction through OCR methods is represented by Google Tesseract OCR, which is the most used open-source software to deal with this task.", "Tesseract is easy to install (following this link) and use in a python environment, through the pytesseract library.", "The environment used for this article is the following:", "The first thing to do is to import all the packages:", "We are ready to extract some text! Let\u2019s load a dummy meme to avoid breaking copyright (anyway, this meme has been done with imageflip).", "To search for text is as easy as it goes:", "And the result is\u2026\u201d a a TTY SHE aT aN Sa ithe Pet\u201d. Woooah something is going on. Tesseract is not working. The problem is that Tesseract is optimized to recognize text in typical text documents, so it can be difficult to recognize text within the image without preprocessing it. The Tesseract documentation provides a lot of ways to enhance the quality of our images. After some fine-tuning, we found a very clean method that worked perfectly on the subset of data that we used. Before diving into it, you need to know that, although these operations worked very well for our data, there are a couple of parameters that were tuned empirically. If you have a dataset that is different from the one that we used, it could be helpful to tune them a little bit.", "The first function that we applied to our image is bilateral filtering. If you want to understand deeply how it works, there is a nice tutorial on OpenCV site, and you can find the description of the parameters here.", "In a nutshell, this filter helps to remove the noise, but, in contrast with other filters, preserves edges instead of blurring them. This operation is performed by excluding from the blurring of a point the neighbors that do not present similar intensities. With the chosen parameters, the difference from the other image is not strongly perceptible, however, it led to a better final performance.", "The second operation it\u2019s pretty clear: we project our RGB images in grayscale.", "The last transformation is binarization. For every pixel, the same threshold value is applied. If the pixel value is smaller than the threshold, it is set to 0, otherwise, it is set to 255. Since we have white text, we want to blackout everything is not almost perfectly white (not exactly perfect since usually text is not \u201c255-white\u201d. We found that 240 was a threshold that could do the work. Since tesseract is trained to recognize black text, we also need to invert the colors. The function threshold from OpenCV can do the two operations jointly, by selecting the inverted binarization.", "This is the input that we want! Let\u2019s put everything into a function:", "Before running our tesseract on the final image, we can tune it a little bit to optimize the configuration. (These lists come directly from the documentation).", "There are three OEM(OCR Engine modes):", "In bald what we found to work better. Furthermore, we decided to give tesseract a whitelist of acceptable character, since we preferred to have only the capital letters in other to avoid small text and strange characters that are sometimes found by tesseract.", "Now we can check if everything is finally working:", "And the answer is\u2026\u201d WHEN TOWARDS DATA SCIENCE REFUSES YOUR ARTICLE\u201d.Et voil\u00e0! Now everything works perfectly.", "In this brief article, we defined a simple pipeline. The definition of the pipeline was driven by our precise scope. If you need something similar but different, you should obviously consider modifying it. For example, if you need also the black text that is sometimes in the upper part of memes, you could consider a double stream and a final join of the result. Anyway, we hope that this simple procedure can help you to get started!", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Data scientist and computer vision engeneer at @Elis. Interests: Data, AI, ML. Geopolitics, sports, biology. www.linkedin.com/in/egon-ferri"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F63c2ccd72b69&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fextract-text-from-memes-with-python-opencv-tesseract-ocr-63c2ccd72b69&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fextract-text-from-memes-with-python-opencv-tesseract-ocr-63c2ccd72b69&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fextract-text-from-memes-with-python-opencv-tesseract-ocr-63c2ccd72b69&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fextract-text-from-memes-with-python-opencv-tesseract-ocr-63c2ccd72b69&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----63c2ccd72b69--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----63c2ccd72b69--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@egonferri?source=post_page-----63c2ccd72b69--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@egonferri?source=post_page-----63c2ccd72b69--------------------------------", "anchor_text": "Egon Ferri"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F63744ba509df&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fextract-text-from-memes-with-python-opencv-tesseract-ocr-63c2ccd72b69&user=Egon+Ferri&userId=63744ba509df&source=post_page-63744ba509df----63c2ccd72b69---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F63c2ccd72b69&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fextract-text-from-memes-with-python-opencv-tesseract-ocr-63c2ccd72b69&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F63c2ccd72b69&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fextract-text-from-memes-with-python-opencv-tesseract-ocr-63c2ccd72b69&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://medium.com/u/5b55a481fd94?source=post_page-----63c2ccd72b69--------------------------------", "anchor_text": "Lorenzo Baiocco"}, {"url": "https://unsplash.com/@mahdi17?utm_source=medium&utm_medium=referral", "anchor_text": "Md Mahdi"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://github.com/tesseract-ocr/tessdoc", "anchor_text": "following this link"}, {"url": "https://imgflip.com/memegenerator", "anchor_text": "imageflip"}, {"url": "https://tesseract-ocr.github.io/tessdoc/ImproveQuality.html", "anchor_text": "documentation"}, {"url": "https://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_imgproc/py_filtering/py_filtering.html", "anchor_text": "OpenCV"}, {"url": "https://docs.opencv.org/master/d4/d86/group__imgproc__filter.html#ga9d7064d478c95d60003cf839430737ed", "anchor_text": "here"}, {"url": "https://github.com/tesseract-ocr/tesseract/blob/master/src/api/tesseractmain.cpp", "anchor_text": "documentation"}, {"url": "https://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_imgproc/py_filtering/py_filtering.html", "anchor_text": "Smoothing Images - OpenCV-Python Tutorials 1 documentationLearn to: Blur imagess with various low pass filters Apply custom-made filters to images (2D convolution) As for\u2026opencv-python-tutroals.readthedocs.io"}, {"url": "https://github.com/tesseract-ocr/tessdoc", "anchor_text": "tesseract-ocr/tessdocTesseract is an open source text recognition (OCR) Engine, available under the Apache 2.0 license.. The current\u2026github.com"}, {"url": "https://github.com/tesseract-ocr/tesseract", "anchor_text": "tesseract-ocr/tesseractThis package contains an OCR engine - libtesseract and a command line program - tesseract. Tesseract 4 adds a new\u2026github.com"}, {"url": "https://medium.com/tag/computer-vision?source=post_page-----63c2ccd72b69---------------computer_vision-----------------", "anchor_text": "Computer Vision"}, {"url": "https://medium.com/tag/ocr?source=post_page-----63c2ccd72b69---------------ocr-----------------", "anchor_text": "Ocr"}, {"url": "https://medium.com/tag/python?source=post_page-----63c2ccd72b69---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/data-science?source=post_page-----63c2ccd72b69---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/data-engineering?source=post_page-----63c2ccd72b69---------------data_engineering-----------------", "anchor_text": "Data Engineering"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F63c2ccd72b69&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fextract-text-from-memes-with-python-opencv-tesseract-ocr-63c2ccd72b69&user=Egon+Ferri&userId=63744ba509df&source=-----63c2ccd72b69---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F63c2ccd72b69&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fextract-text-from-memes-with-python-opencv-tesseract-ocr-63c2ccd72b69&user=Egon+Ferri&userId=63744ba509df&source=-----63c2ccd72b69---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F63c2ccd72b69&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fextract-text-from-memes-with-python-opencv-tesseract-ocr-63c2ccd72b69&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----63c2ccd72b69--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F63c2ccd72b69&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fextract-text-from-memes-with-python-opencv-tesseract-ocr-63c2ccd72b69&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----63c2ccd72b69---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----63c2ccd72b69--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----63c2ccd72b69--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----63c2ccd72b69--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----63c2ccd72b69--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----63c2ccd72b69--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----63c2ccd72b69--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----63c2ccd72b69--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----63c2ccd72b69--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@egonferri?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@egonferri?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Egon Ferri"}, {"url": "https://medium.com/@egonferri/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "49 Followers"}, {"url": "http://www.linkedin.com/in/egon-ferri", "anchor_text": "www.linkedin.com/in/egon-ferri"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F63744ba509df&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fextract-text-from-memes-with-python-opencv-tesseract-ocr-63c2ccd72b69&user=Egon+Ferri&userId=63744ba509df&source=post_page-63744ba509df--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F6c815624103b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fextract-text-from-memes-with-python-opencv-tesseract-ocr-63c2ccd72b69&newsletterV3=63744ba509df&newsletterV3Id=6c815624103b&user=Egon+Ferri&userId=63744ba509df&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}