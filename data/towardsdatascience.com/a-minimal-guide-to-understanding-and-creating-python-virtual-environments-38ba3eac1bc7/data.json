{"url": "https://towardsdatascience.com/a-minimal-guide-to-understanding-and-creating-python-virtual-environments-38ba3eac1bc7", "time": 1683013196.46495, "path": "towardsdatascience.com/a-minimal-guide-to-understanding-and-creating-python-virtual-environments-38ba3eac1bc7/", "webpage": {"metadata": {"title": "A Minimal Guide to Understanding and Creating Python Virtual Environments | by Brayton Hall | Towards Data Science", "h1": "A Minimal Guide to Understanding and Creating Python Virtual Environments", "description": "Most serious data science projects should take place in a Docker container or a virtual environment. Whether for testing or dependency management, it\u2019s just good practice, and containerizing gives\u2026"}, "outgoing_paragraph_urls": [{"url": "https://packaging.python.org/guides/installing-using-pip-and-virtual-environments/", "anchor_text": "while the documentation is seemingly straightforward", "paragraph_index": 0}, {"url": "https://en.wikipedia.org/wiki/Dependency_hell", "anchor_text": "dependency hell", "paragraph_index": 9}, {"url": "https://github.com/jazzband/pip-tools", "anchor_text": "I would recommend using", "paragraph_index": 20}], "all_paragraphs": ["Most serious data science projects should take place in a Docker container or a virtual environment. Whether for testing or dependency management, it\u2019s just good practice, and containerizing gives you greater power for debugging and understanding how things work together in a unified scope. This post is about creating a virtual environment in Python 3, and while the documentation is seemingly straightforward, there are few major points of clarity I\u2019d like to point out, especially when using Jupyter notebooks and managing kernels and dependencies.", "The Python 3 module \u2018venv\u2019 comes with Python 3\u2019s standard library. This means it\u2019s built in when you download Python 3, and so you shouldn\u2019t have to worry about installing it. Creating an actual virtual environment is quite simple:", "The first command is \u2018python3\u2019. This instructs the command line to run Python 3 scripts. Followed by \u2018-m\u2019, this option further instructs Python3 to look for a module name, in this case \u2018venv\u2019. The last argument is the name of your virtual environment, which should be relevant to the context of your intended project (e.g. \u2018statsbox\u2019 for a statistics-based virtual environment).", "Running this command will create a directory with your chosen name inside whatever directory you\u2019re currently in, so be careful to cd your way to your intended directory before running it. After a few seconds, your virtual environment should be created. For example, I ran the following command inside my home directory:", "After a few seconds, I ran ls to check my home directory, and alas, \u2018tutorial_box\u2019 is there. If we cd into any virtual environment\u2019s directory upon immediate creation, we find that it\u2019s not empty!", "Great. These are actually your basic \u2018blank slate\u2019 files which are necessary in order to get your virtual environment up and running. Just because you created a virtual environment doesn\u2019t mean you\u2019re truly inside of it (activated) yet. This is an important conceptual distinction that I find can confuse intro learners. Even if you cd into the virtual environment directory (like above), your command-line commands, your Jupyter notebooks, and your packages will still be determined by your global environment\u2019s PATH variable. That means that any Jupyter notebook you open will still have access to any packages or modules you\u2019ve installed in your global environment, and if you\u2019ve unwittingly produced a genius machine-learning model which is dependent on a package version which cannot be compiled in a different environment, then your code will break in that environment. This is common when, say, attempting to deploy a data science app with Heroku, Streamlit, Flask, Dash, etc.", "It\u2019s a good metaphor to think of a virtual environment (or Docker container) as a literal computer, a mini-computer inside your computer. In other words, just because you have the new mini-computer inside your computer doesn\u2019t mean you\u2019ve turn it on yet.", "To do so, activate your virtual environment in the command line:", "That\u2019s it! To know it\u2019s working, you should see the name of your virtual environment in the bottom left with parentheses, preceding your usual computer\u2019s current directory path. In this case, it\u2019s (tutorial_box)", "Finally, we\u2019ve created and activated our virtual environment. If you run Python 3 manually in the terminal, you\u2019ll be operating in a fresh environment, and you\u2019ll have to pip install any modules and packages you need for a new project from scratch. But remember, this is a good thing! It will save you from dependency hell down the line.", "This is the fundamental point of clarity I\u2019d like to make in this tutorial.", "So, we\u2019ve activated our virtual environment. Any Python 3 commands we run will be limited in scope to our fresh virtual environment. So what happens when we open a new Jupyter notebook?", "Well, Jupyter should still open in the browser, but if we attempt to create a new notebook, we should see the following kernel option:", "Under the \u2018New\u2019 notebook tab, we see \u2018Python 3\u2019. This is quite confusing: we have an option to create a new Jupyter notebook, but we have a potential list of kernels to choose from. In a way (somewhat different from virtual environments), these kernels are themselves virtual Python environments which will run independently of your virtual environment, even if it\u2019s activated!", "The default Python 3 kernel which appears will actually be your global Python 3 environment all over again, which completely defeats the point of using a virtual environment, since we want to control exactly which packages and modules we\u2019re using from a blank slate.", "In order to add a new kernel to your Jupyter environment which matches the virtual environment you\u2019ve just created with venv, you need to run the following command inside of an already activated virtual environment:", "This will install the kernel-creator in your virtual environment, and you\u2019ll always need to run it in a newly-created virtual environment since it\u2019s a blank slate and will not have ipykernel installed. Then, in order to finally add the kernel to your Jupyter notebooks\u2019 kernel option list, run the following:", "There are some important points here. First, the whatever_you_want name can literally be whatever you want, and it doesn\u2019t have to match the name of your virtual environment. All that matters is that the kernel you create with this command will contain all of the packages and modules inside of your currently-activated virtual environment. It, therefore, makes sense to give it a name that relates to your virtual environment, but wisely with a version number attached. Over time you may add more packages to your virtual environment, and then you\u2019ll add that virtual environment state as a new modified kernel with ipykernel . Eventually, something will break, or some installed or updated package will give you a slightly different machine learning model, and you\u2019ll want to revert to a previous Jupyter kernel. Appending your own version numbers to these kernels solves this problem, and is a virtual environment\u2019s kind of localized version control.", "Alternatively, you can always create a requirements.txt file with the command:", "That .txt file can then be installed elsewhere (everything inside of it, rather), such as a different virtual environment or Docker container.", "Alternatively, I would recommend using pip-compile , which is a pip-tools package. It\u2019s incredibly helpful for automatically generating a requirements.txt file from a manually-typed requirements.in file. It\u2019s incredibly useful, because pip-compile automatically detects all of the required dependencies for packages listed in the requirements.in file.", "That covers it all. Using venv , ipykernel , and pip-compile are all you really need to create fresh virtual environments, and hopefully, this post has clarified how they are tied together with Jupyter notebooks, kernels, and dependency management.", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F38ba3eac1bc7&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-minimal-guide-to-understanding-and-creating-python-virtual-environments-38ba3eac1bc7&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-minimal-guide-to-understanding-and-creating-python-virtual-environments-38ba3eac1bc7&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-minimal-guide-to-understanding-and-creating-python-virtual-environments-38ba3eac1bc7&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-minimal-guide-to-understanding-and-creating-python-virtual-environments-38ba3eac1bc7&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----38ba3eac1bc7--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----38ba3eac1bc7--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@braytonhall?source=post_page-----38ba3eac1bc7--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@braytonhall?source=post_page-----38ba3eac1bc7--------------------------------", "anchor_text": "Brayton Hall"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F890423eca91b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-minimal-guide-to-understanding-and-creating-python-virtual-environments-38ba3eac1bc7&user=Brayton+Hall&userId=890423eca91b&source=post_page-890423eca91b----38ba3eac1bc7---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F38ba3eac1bc7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-minimal-guide-to-understanding-and-creating-python-virtual-environments-38ba3eac1bc7&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F38ba3eac1bc7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-minimal-guide-to-understanding-and-creating-python-virtual-environments-38ba3eac1bc7&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://packaging.python.org/guides/installing-using-pip-and-virtual-environments/", "anchor_text": "while the documentation is seemingly straightforward"}, {"url": "https://www.publicdomainpictures.net/en/view-image.php?image=34228&picture=tin-on-white-background", "anchor_text": "Public Domain"}, {"url": "https://en.wikipedia.org/wiki/Dependency_hell", "anchor_text": "dependency hell"}, {"url": "https://github.com/jazzband/pip-tools", "anchor_text": "I would recommend using"}, {"url": "https://medium.com/tag/tutorial?source=post_page-----38ba3eac1bc7---------------tutorial-----------------", "anchor_text": "Tutorial"}, {"url": "https://medium.com/tag/data-science?source=post_page-----38ba3eac1bc7---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/virtual-environment?source=post_page-----38ba3eac1bc7---------------virtual_environment-----------------", "anchor_text": "Virtual Environment"}, {"url": "https://medium.com/tag/jupyter-notebook?source=post_page-----38ba3eac1bc7---------------jupyter_notebook-----------------", "anchor_text": "Jupyter Notebook"}, {"url": "https://medium.com/tag/python?source=post_page-----38ba3eac1bc7---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F38ba3eac1bc7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-minimal-guide-to-understanding-and-creating-python-virtual-environments-38ba3eac1bc7&user=Brayton+Hall&userId=890423eca91b&source=-----38ba3eac1bc7---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F38ba3eac1bc7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-minimal-guide-to-understanding-and-creating-python-virtual-environments-38ba3eac1bc7&user=Brayton+Hall&userId=890423eca91b&source=-----38ba3eac1bc7---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F38ba3eac1bc7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-minimal-guide-to-understanding-and-creating-python-virtual-environments-38ba3eac1bc7&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----38ba3eac1bc7--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F38ba3eac1bc7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-minimal-guide-to-understanding-and-creating-python-virtual-environments-38ba3eac1bc7&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----38ba3eac1bc7---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----38ba3eac1bc7--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----38ba3eac1bc7--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----38ba3eac1bc7--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----38ba3eac1bc7--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----38ba3eac1bc7--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----38ba3eac1bc7--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----38ba3eac1bc7--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----38ba3eac1bc7--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@braytonhall?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@braytonhall?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Brayton Hall"}, {"url": "https://medium.com/@braytonhall/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "99 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F890423eca91b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-minimal-guide-to-understanding-and-creating-python-virtual-environments-38ba3eac1bc7&user=Brayton+Hall&userId=890423eca91b&source=post_page-890423eca91b--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F88eb813f80ff&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-minimal-guide-to-understanding-and-creating-python-virtual-environments-38ba3eac1bc7&newsletterV3=890423eca91b&newsletterV3Id=88eb813f80ff&user=Brayton+Hall&userId=890423eca91b&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}