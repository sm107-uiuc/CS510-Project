{"url": "https://towardsdatascience.com/find-highly-correlated-stocks-with-python-77eba4fd061b", "time": 1683013910.194487, "path": "towardsdatascience.com/find-highly-correlated-stocks-with-python-77eba4fd061b/", "webpage": {"metadata": {"title": "Find Highly Correlated Stocks with Python! | Towards Data Science", "h1": "Find Highly Correlated Stocks with Python!", "description": "The ability to calculate the correlation between the movement of stocks is vital to any portfolio. Learn how to calculate it in Python within minutes!"}, "outgoing_paragraph_urls": [{"url": "https://towardsdatascience.com/questions-96667b06af5", "anchor_text": "rules and guidelines", "paragraph_index": 0}, {"url": "https://towardsdatascience.com/readers-terms-b5d780a700a4", "anchor_text": "Reader Terms", "paragraph_index": 0}, {"url": "https://www.investopedia.com/terms/p/pairstrade.asp", "anchor_text": "Pairs Trading strategy", "paragraph_index": 1}, {"url": "https://gist.github.com/shashankvemuri/a210f7399b56075cbe55c309b460fa9b", "anchor_text": "GitHub Gist", "paragraph_index": 4}, {"url": "https://pypi.org/", "anchor_text": "PyPi", "paragraph_index": 6}, {"url": "https://tradingview.com/", "anchor_text": "TradingView\u2019s", "paragraph_index": 12}], "all_paragraphs": ["Note from Towards Data Science\u2019s editors: While we allow independent authors to publish articles in accordance with our rules and guidelines, we do not endorse each author\u2019s contribution. You should not rely on an author\u2019s works without seeking professional advice. See our Reader Terms for details.", "Whether you are crafting a portfolio and want to incorporate diversification or trying to find stocks for a Pairs Trading strategy, the ability to calculate the correlation between the movement of two stocks is a must.", "Having a portfolio of stocks that are not closely correlated allows you to tap into different performing assets that will likely not drop too much together. For example, owning a portfolio of only airline stocks during the pandemic would have you down an average of about 38% on the year. However, by diversifying the portfolio with a combination of stocks from technology, retail, or virtually any other sector, the loss would be a lot less (if any at all).", "Unless you are using a Pairs Trading strategy, the best bet is to lower the amount of correlation in your portfolio to maximize the amount of diversification! And that is what we\u2019ll be doing today \u2014 calculating and sorting the correlation between a list of stocks. The process is entirely intuitive and by the end of this article, you too should be able to recreate the program within minutes and only a few lines of code!", "The entire code to the project in this article is within this GitHub Gist.", "First, we must import all the dependencies we will need throughout the program. The primary libraries we will use are Yfinance, Datetime, and Yahoo-fin. Yfinance will allow us to override deprecations in pandas-datareader, Datetime will enable us to set up the start/end dates for the prices, and Yahoo-fin will allow us to quickly get access to a list of the tickers in different indices.", "In case you do not have any of these modules installed, you can easily download them using PyPi and the pip install command in your terminal. Now that we have the dependencies set up, we can finally get into the building of our app!", "By inputting the number of years back you would like to start, we can use the datetime module to create start and end dates for the historical data. We can also set the list of tickers to the Dow Jones Industrial Average (DJIA) index, but this can be changed to your preference.", "Using pandas-datareader, we can scrape the historical data off Yahoo Finance for the dates and tickers set in the previous block of code. Since we are focusing on the correlation between the movement of stocks, we can concentrate on the Adjusted Close column and then create a new Pandas DataFrame with the base-10 logarithm of the daily percentage change. With the Pandas method .corr(), we can create a correlation matrix of the new dataframe.", "However, we are not done just yet. The correlation matrix includes redundant pairs such as AAPL to AAPL or a pair showing up twice (AAPL to MSFT and MSFT to AAPL). We can drop these and rank the dataframe to get the top absolute correlations with the functions in the gist down below.", "We can use the function get_redundant_pairs(df) to drop the correlations between two of the same stocks. By setting the variable \u201cpairs_to_drop\u201d as a set and running two for loops through each column and then every row, we can find the double pairs and return it.", "Then we can create the correlations dataframe, target absolute value numbers, and unstack it to make it easier to read. Lastly, we can call upon the get_redundant_pairs function and drop them from the resulting dataframe. Now the program should return the highest correlations among the inputted list of tickers. In this case, I had the following output for the last year worth of data in the DJIA.", "As you can see, Goldman Sachs, JP Morgan, and American Express all had strong correlations with each other as expected, given that they are all in the same industry. In order to test the output\u2019s accuracy, let\u2019s quickly plot Goldman Sachs and JP Morgan on top of each other (rebased). Using TradingView\u2019s plotting widget, we can see that despite more volatile movements by JPM, the two stocks are almost identical in the past year!", "While in this article, I focused on finding stocks with the highest absolute correlation, the possibilities are truly endless. I hope this algorithm will prove useful to you in the future. Thank you so much for reading!", "Disclaimer: The material in this article is purely educational and should not be taken as professional investment advice. Invest at your own discretion.", "If you enjoyed this article, check out some of my other Python for Finance articles below!", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Hey! I\u2019m Shashank Vemuri, a software engineer, stock trader, and entrepreneur."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F77eba4fd061b&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffind-highly-correlated-stocks-with-python-77eba4fd061b&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffind-highly-correlated-stocks-with-python-77eba4fd061b&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffind-highly-correlated-stocks-with-python-77eba4fd061b&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffind-highly-correlated-stocks-with-python-77eba4fd061b&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----77eba4fd061b--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----77eba4fd061b--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://shashank-vemuri.medium.com/?source=post_page-----77eba4fd061b--------------------------------", "anchor_text": ""}, {"url": "https://shashank-vemuri.medium.com/?source=post_page-----77eba4fd061b--------------------------------", "anchor_text": "Shashank Vemuri"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F8e7513138547&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffind-highly-correlated-stocks-with-python-77eba4fd061b&user=Shashank+Vemuri&userId=8e7513138547&source=post_page-8e7513138547----77eba4fd061b---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F77eba4fd061b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffind-highly-correlated-stocks-with-python-77eba4fd061b&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F77eba4fd061b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffind-highly-correlated-stocks-with-python-77eba4fd061b&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@ricktap?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Patrick Weissenberger"}, {"url": "https://unsplash.com/s/photos/stock-market?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Unsplash"}, {"url": "https://towardsdatascience.com/questions-96667b06af5", "anchor_text": "rules and guidelines"}, {"url": "https://towardsdatascience.com/readers-terms-b5d780a700a4", "anchor_text": "Reader Terms"}, {"url": "https://www.investopedia.com/terms/p/pairstrade.asp", "anchor_text": "Pairs Trading strategy"}, {"url": "https://gist.github.com/shashankvemuri/a210f7399b56075cbe55c309b460fa9b", "anchor_text": "GitHub Gist"}, {"url": "https://pypi.org/", "anchor_text": "PyPi"}, {"url": "https://tradingview.com/", "anchor_text": "TradingView\u2019s"}, {"url": "https://towardsdatascience.com/parse-thousands-of-stock-recommendations-in-minutes-with-python-6e3e562f156d", "anchor_text": "Parse Thousands of Stock Recommendations in Minutes with Python!Learn how to parse thousands of recommendations from top analysts in less than 3 minutes!towardsdatascience.com"}, {"url": "https://towardsdatascience.com/making-a-stock-screener-with-python-4f591b198261", "anchor_text": "Making a Stock Screener with Python!Learn how to make a powerful stock screener based on Mark Minervini\u2019s Trend Template with Python.towardsdatascience.com"}, {"url": "https://towardsdatascience.com/creating-a-finance-web-app-in-3-minutes-8273d56a39f8", "anchor_text": "Creating a Finance Web App in 3 Minutes!Learn how to create a Technical Analysis app using Streamlit in Python!towardsdatascience.com"}, {"url": "https://medium.com/tag/finance?source=post_page-----77eba4fd061b---------------finance-----------------", "anchor_text": "Finance"}, {"url": "https://medium.com/tag/python?source=post_page-----77eba4fd061b---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/investing?source=post_page-----77eba4fd061b---------------investing-----------------", "anchor_text": "Investing"}, {"url": "https://medium.com/tag/data-science?source=post_page-----77eba4fd061b---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/programming?source=post_page-----77eba4fd061b---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F77eba4fd061b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffind-highly-correlated-stocks-with-python-77eba4fd061b&user=Shashank+Vemuri&userId=8e7513138547&source=-----77eba4fd061b---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F77eba4fd061b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffind-highly-correlated-stocks-with-python-77eba4fd061b&user=Shashank+Vemuri&userId=8e7513138547&source=-----77eba4fd061b---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F77eba4fd061b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffind-highly-correlated-stocks-with-python-77eba4fd061b&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----77eba4fd061b--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F77eba4fd061b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffind-highly-correlated-stocks-with-python-77eba4fd061b&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----77eba4fd061b---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----77eba4fd061b--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----77eba4fd061b--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----77eba4fd061b--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----77eba4fd061b--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----77eba4fd061b--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----77eba4fd061b--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----77eba4fd061b--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----77eba4fd061b--------------------------------", "anchor_text": ""}, {"url": "https://shashank-vemuri.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://shashank-vemuri.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Shashank Vemuri"}, {"url": "https://shashank-vemuri.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "1.1K Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F8e7513138547&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffind-highly-correlated-stocks-with-python-77eba4fd061b&user=Shashank+Vemuri&userId=8e7513138547&source=post_page-8e7513138547--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fb802203ab313&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffind-highly-correlated-stocks-with-python-77eba4fd061b&newsletterV3=8e7513138547&newsletterV3Id=b802203ab313&user=Shashank+Vemuri&userId=8e7513138547&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}