{"url": "https://towardsdatascience.com/nitty-gritty-of-advanced-indexing-in-pandas-9850b2d50220", "time": 1683006138.098783, "path": "towardsdatascience.com/nitty-gritty-of-advanced-indexing-in-pandas-9850b2d50220/", "webpage": {"metadata": {"title": "Nitty-Gritty of Advanced Indexing in Pandas | by Padhma Muniraj | Towards Data Science", "h1": "Nitty-Gritty of Advanced Indexing in Pandas", "description": "That\u2019s so true with everything \u2014 be it the cause of your bug or the bug itself, misspelled variable names, not setting inplace = True and wondering why my DataFrame doesn\u2019t change and quite a lot\u2026"}, "outgoing_paragraph_urls": [{"url": "https://pandas.pydata.org/pandas-docs/stable/user_guide/advanced.html#hierarchical-indexing-multiindex", "anchor_text": "enables", "paragraph_index": 3}, {"url": "https://www.kaggle.com/jingbinxu/sample-of-car-data", "anchor_text": "this", "paragraph_index": 5}, {"url": "https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#indexing-label", "anchor_text": "official", "paragraph_index": 18}, {"url": "https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.loc.html", "anchor_text": "loc", "paragraph_index": 20}, {"url": "https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.xs.html", "anchor_text": "xs", "paragraph_index": 22}, {"url": "https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.query.html", "anchor_text": "query", "paragraph_index": 23}, {"url": "https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.eval.html#pandas.eval", "anchor_text": "eval()", "paragraph_index": 23}, {"url": "https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Index.get_level_values.html", "anchor_text": "get_level_values", "paragraph_index": 24}, {"url": "https://github.com/Padhma/Data-Science-Notebooks/tree/master/Data%20Analysis/Pandas/Advanced%20Indexing", "anchor_text": "here", "paragraph_index": 27}], "all_paragraphs": ["There\u2019s this beautiful quote I hear oftentimes,", "\u201cSometimes we don\u2019t see what is in front of us\u201d", "That\u2019s so true with everything \u2014 be it the cause of your bug or the bug itself, misspelled variable names, not setting inplace = True and wondering why my DataFrame doesn\u2019t change and quite a lot. Not just bugs or typos, even functionalities. We don\u2019t see the basic functionalities as the building blocks of a product. One such thing which is overlooked most of the time but plays a crucial role in Data Analysis and Manipulation is Index in Pandas.", "Indexes, Series and DataFrames are the core Pandas data structures. Indexes are the identifiers or the address to a location in a DataFrame. While manipulating one-dimensional and two-dimensional indexes are the most common practice. Learning to work with an arbitrary number of dimensions can be very handy at times. Luckily, Pandas enables the use and storage of higher-dimensional data into one-dimensional data structures like series and two-dimensional data structures like DataFrames. This is very well known as the Hierarchical indexing, Advanced Indexing, or Multi-level indexing.", "In this post, I\u2019ll explain the basic how-tos of Multi-level Indexing in real-world data.", "To start off, I have obtained this dataset from Kaggle. The dataset contains some sample data about cars and looks like the one below.", "Let\u2019s say I want to know if there are any Toyota cars with its body style as the sedan and its fuel type as diesel.", "This is one of the ways through which we can find out the desired outcome. What if we would like to know the make of all the diesel cars with its body style as the wagon and check if its price falls within $20,000?", "We still obtain the desired output but the code is not quite neat. As the query gets more complicated, the code gets more monotonous and lengthy.", "Hierarchical Indexing can help us work with an arbitrary number of dimensions. It can help us in filtering, aggregating, organizing, manipulating data for really powerful data analysis.", "Let\u2019s begin by setting indexes for the DataFrame. To create multi-indexed DataFrame we pass a list of values to the index attribute instead of a string. There are so many categorical features in my dataset, but I\u2019ll consider make first as I would like to know the details of the different set of cars. Also, I\u2019ll consider body_style and fuel_type for better organization.", "Let\u2019s take a look at the indexes and what they\u2019ve got for us.", "The multi-index contains three different attributes namely levels, codes, names.", "There can be multi-level indexes for both rows and columns. We can reset the indexes by simply passing reset_index() function to the DataFrame.", "A caveat when working with multi-level indexing is sorting the indexes before attempting to perform any slicing operation. Slicing operations will deliberately throw a warning like the one below.", "We can avoid this by, passing the sort_index() function to the multi-indexed DataFrame. Also, Pandas depends on the index being sorted for optimal retrieval and search operations. We can check if the indexes are sorted using the index.is_lexsorted() function which returns a boolean value.", "swap_level() can be used to interchange the levels within the DataFrame. It takes two parameters i and j which are the level names passed as strings. Passing this function doesn\u2019t alter the order of the values.", "stack() and unstack() functions take an additional parameter where you can choose the level to be stacked or unstacked, where the stacked level becomes the new lowest level (rightmost).", "You can go ahead and check the official Pandas documentation for more index modifications.", "Let's see if we can find if there are any Toyota cars with its body style as the sedan and its fuel type as diesel using our Multi-Indexed DataFrame.", ".loc is primarily used for label based selection where the label names are passed inside a tuple. Sometimes it is combined with pd.IndexSlice. An example would be finding all diesel cars.", "Notice, inside pd.IndexSlice the first : selects cars of all make and the second : selects cars of all body_style whereas the outer : is to select all columns.", ".xs fetches a particular cross-section of a DataFrame where the axis parameter defaults to zero axis=0 and also takes a level parameter which is an indication of which levels to be used.", ".query uses boolean expressions for filtering or slicing. Notice the use of and and or inside the query over & and | . This is because the expressions inside the query method are evaluated dynamically using the eval() function. Also, this method uses modified Python syntax by default.", "get_level_values uses a vector of label values for the requested level. Here, the level values can either be passed as integers or strings.", "More generally, loc and xs are for label based selection while query and get_level_values are helpful in generating conditional expressions for filtering. Not all of these methods work equally, each works best under different circumstances. It is upon us to select the best method of retrieval!", "All the built-in data aggregation methods such as mean(), min(), max(), sum() can be applied to hierarchical DataFrame. It is passed along with level parameter that influences which part of the data the aggregate is computed on. A simple example would be to find the mean price of all Volkswagen cars.", "Working with Pandas Indexes has always been fun and curious! Feel free to check my GitHub repo here that contains all the code mentioned in the article.", "Thanks for reading all the way down here. Let me know in the comment section if you have any concerns, feedback, or criticism. Have a good day!", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F9850b2d50220&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fnitty-gritty-of-advanced-indexing-in-pandas-9850b2d50220&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fnitty-gritty-of-advanced-indexing-in-pandas-9850b2d50220&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fnitty-gritty-of-advanced-indexing-in-pandas-9850b2d50220&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fnitty-gritty-of-advanced-indexing-in-pandas-9850b2d50220&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----9850b2d50220--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----9850b2d50220--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://padhmamuniraj.medium.com/?source=post_page-----9850b2d50220--------------------------------", "anchor_text": ""}, {"url": "https://padhmamuniraj.medium.com/?source=post_page-----9850b2d50220--------------------------------", "anchor_text": "Padhma Muniraj"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fa5a3c9ba4575&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fnitty-gritty-of-advanced-indexing-in-pandas-9850b2d50220&user=Padhma+Muniraj&userId=a5a3c9ba4575&source=post_page-a5a3c9ba4575----9850b2d50220---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F9850b2d50220&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fnitty-gritty-of-advanced-indexing-in-pandas-9850b2d50220&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F9850b2d50220&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fnitty-gritty-of-advanced-indexing-in-pandas-9850b2d50220&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@ozgut?utm_source=medium&utm_medium=referral", "anchor_text": "Ozgu Ozden"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://pandas.pydata.org/pandas-docs/stable/user_guide/advanced.html#hierarchical-indexing-multiindex", "anchor_text": "enables"}, {"url": "https://www.kaggle.com/jingbinxu/sample-of-car-data", "anchor_text": "this"}, {"url": "https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#indexing-label", "anchor_text": "official"}, {"url": "https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.loc.html", "anchor_text": "loc"}, {"url": "https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.xs.html", "anchor_text": "xs"}, {"url": "https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.query.html", "anchor_text": "query"}, {"url": "https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.eval.html#pandas.eval", "anchor_text": "eval()"}, {"url": "https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Index.get_level_values.html", "anchor_text": "get_level_values"}, {"url": "https://github.com/Padhma/Data-Science-Notebooks/tree/master/Data%20Analysis/Pandas/Advanced%20Indexing", "anchor_text": "here"}, {"url": "https://medium.com/tag/data-science?source=post_page-----9850b2d50220---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/pandas?source=post_page-----9850b2d50220---------------pandas-----------------", "anchor_text": "Pandas"}, {"url": "https://medium.com/tag/index?source=post_page-----9850b2d50220---------------index-----------------", "anchor_text": "Index"}, {"url": "https://medium.com/tag/data-analysis?source=post_page-----9850b2d50220---------------data_analysis-----------------", "anchor_text": "Data Analysis"}, {"url": "https://medium.com/tag/data-manipulation?source=post_page-----9850b2d50220---------------data_manipulation-----------------", "anchor_text": "Data Manipulation"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F9850b2d50220&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fnitty-gritty-of-advanced-indexing-in-pandas-9850b2d50220&user=Padhma+Muniraj&userId=a5a3c9ba4575&source=-----9850b2d50220---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F9850b2d50220&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fnitty-gritty-of-advanced-indexing-in-pandas-9850b2d50220&user=Padhma+Muniraj&userId=a5a3c9ba4575&source=-----9850b2d50220---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F9850b2d50220&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fnitty-gritty-of-advanced-indexing-in-pandas-9850b2d50220&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----9850b2d50220--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F9850b2d50220&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fnitty-gritty-of-advanced-indexing-in-pandas-9850b2d50220&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----9850b2d50220---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----9850b2d50220--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----9850b2d50220--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----9850b2d50220--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----9850b2d50220--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----9850b2d50220--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----9850b2d50220--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----9850b2d50220--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----9850b2d50220--------------------------------", "anchor_text": ""}, {"url": "https://padhmamuniraj.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://padhmamuniraj.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Padhma Muniraj"}, {"url": "https://padhmamuniraj.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "85 Followers"}, {"url": "https://www.linkedin.com/in/padhma-sahithya-muniraj/", "anchor_text": "https://www.linkedin.com/in/padhma-sahithya-muniraj/"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fa5a3c9ba4575&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fnitty-gritty-of-advanced-indexing-in-pandas-9850b2d50220&user=Padhma+Muniraj&userId=a5a3c9ba4575&source=post_page-a5a3c9ba4575--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F639d45ca3f1d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fnitty-gritty-of-advanced-indexing-in-pandas-9850b2d50220&newsletterV3=a5a3c9ba4575&newsletterV3Id=639d45ca3f1d&user=Padhma+Muniraj&userId=a5a3c9ba4575&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}