{"url": "https://towardsdatascience.com/the-chi-squared-test-statistic-is-a-must-for-every-data-scientist-a-case-study-in-customer-churn-bcdb17bbafb7", "time": 1683011945.5432022, "path": "towardsdatascience.com/the-chi-squared-test-statistic-is-a-must-for-every-data-scientist-a-case-study-in-customer-churn-bcdb17bbafb7/", "webpage": {"metadata": {"title": "The Chi-Squared Test Statistic is a Must For Every Data Scientist: A Case Study in Customer Churn | by Rob W | Towards Data Science", "h1": "The Chi-Squared Test Statistic is a Must For Every Data Scientist: A Case Study in Customer Churn", "description": "The chi-square statistic is a useful tool for understanding the relationship between two categorical variables. For the sake of example, let\u2019s say you work for a tech company that has rolled out a\u2026"}, "outgoing_paragraph_urls": [{"url": "https://www.kaggle.com/blastchar/telco-customer-churn", "anchor_text": "kaggle", "paragraph_index": 3}, {"url": "http://datasciencelessons.com/", "anchor_text": "datasciencelessons.com", "paragraph_index": 50}], "all_paragraphs": ["The chi-square statistic is a useful tool for understanding the relationship between two categorical variables.", "For the sake of example, let\u2019s say you work for a tech company that has rolled out a new product and you want to assess the relationship between this product and customer churn. In the age of data, tech or otherwise, many companies undergo to risk of taking evidence that is either anecdotal or perhaps a high level visualization to indicate certainty of a given relationship. The chi-square statistic gives us a way to quantify and assess the strength of a given pair of categorical variables.", "Let\u2019s explore chi-square from this lens of customer churn.", "You can download the customer churn dataset that we\u2019ll be working with from kaggle. This dataset provides details for a variety of telecom customers and whether or not they \u201cchurned\u201d or closed their account.", "Regardless of what company, teams, products, or industries you work with, the following example should be very generalizable.", "Now that we have our dataset, let\u2019s quickly use dplyr's select command to pull down the fields we'll be working with for simplicity sake. I'll also be dropping the number of levels down to two for simplicity sake. You can certainly run a chi-square test on categorical variables with more than two levels, but as we venture to understand it from the ground up, we'll keep it simple.", "Churn is going to be classified as a Yes or a No. As you just saw, StreamingTV will be encoded with either a 1 or 0.", "I won\u2019t go into great depth on exploratory data analysis here, but I will give you two quick tools to being able to assess a relationship between two categorical variables.", "Proportion tables are a great way to establish some fundamental understanding about the relationship between two categoricals", "Table gives us a quick idea of the counts in any given level, wrapping that in prop.table() allows us to see the percentage break down.", "Let\u2019s now pass both variables to our table() function", "Once you pass another variable into the proportion table, you\u2019re then able to establish where you want to assess relative proportion. In this case, the second parameter we pass to the prop.table() function, \"1\", which specifies that we'd like to see the relative proportion of records across each row or value of StreamingTV. As you can see in the above table in cases when a customer did not have streaming tv, they remained active 76% of the time, conversely if they did have streaming tv they actually stuck around less at 70%.", "Now before we go getting ahead of ourselves, saying that having streaming tv most certainly is causing more people to churn\u2026 we need to make an assessment of whether or not we really have grounds to make such a claim. Yes the proportion of return customers is lower, but the difference could be random noise. More on this shortly.", "This will give us similar information to what we just saw, but visualization tends to lend better to quickly understanding relative value.", "Let\u2019s start off with a quick bar plot with StreamingTV across the x-axis, and the fill as Churn.", "As you can see, nearly as many tv streamers churned and with a substantially lower total customer count. Similar to what we saw with proportion tables, 100% stacked bar helps assess relative distribution among values of a categorical variable. All we have to do is pass position = 'fill' to geom_bar().", "Now there appears to be some sort of relationship between the two variables, yet we don\u2019t have an assessment of the statistical significance. In other words, is it because of something about the relationship between tv streamers and customers, i.e. did they hate the service so much that they churn at a higher rate? Does their overall bill appear way to high as a product of the streaming plan, such that they churn all together?", "All great questions, and we won\u2019t have the answer to them just yet, but what we are doing is taking the first steps to assessing whether this larger investigative journey is worthwhile.", "Before we dive into the depths of creating a chi-square statistic, it\u2019s very important that you understand the purpose conceptually.", "We can see two categorical variables that appear to be related, however we don\u2019t definitively know if the disparate proportions are a product of randomness or some other underlying affect. This is where chi-square comes in. The chi-square test statistic is effectively a comparison of our distribution to the distribution we would expect, in the case that the two variables were indeed perfectly independent.", "So first things first, we need a dataset to represent said independence.", "We will be making use of the infer package. This package is incredibly useful for creating sample data for hypothesis testing, creating confidence intervals, etc.", "I won\u2019t break down all of the details on how to use infer, but at a high level, you're creating a new dataset. In this case, we want to create a dataset that looks a lot like what we just saw with the churn dataset, only this time, we want to ensure independent distribution, i.e. in cases when customers are tv streamers, we shouldn't see a greater occurrence of churn.", "Easy way to think about infer is in the following the steps of specify, hypothesize, and generate. We specify the relationship we\u2019re modeling, we input the intended distribution, independent, and finally we specify the number of replicates we want to generate. A replicate in this case will mirror the row count of our original dataset. There are instances in which you would create many replicates of the same dataset and make calculations on top of that, but not for this part of the process.", "Lets\u2019s quickly take a look at this dataset.", "As you can see we have the two variables we specified, as well as replicate. All records in this table will be replicate: 1, as we only made a single replicate.", "Let\u2019s quickly visualize our independent dataset to visualize the relative proportions now.", "As desired you can see that the relative proportions line up almost exactly. There is some randomness at play so we may not see that these two line up perfectly\u2026 but that\u2019s really the point. We\u2019re not doing this quite yet, but remember when I mentioned the idea of creating many replicates?", "What might the purpose of that be?", "If we create this sample dataset tons of times, do we ever see a gap as wide as 70% to 76% churn as we saw in our observed dataset? If so, how often do we see it? Is it so often that we don\u2019t have grounds to chalk up the difference to anything more than random noise?", "Alright enough of that rant\u2026 On to making an assessment of how much our observed data varies from our sample data.", "Now that we really understand our purpose, let\u2019s go ahead and calculate our statistic. Simply enough, our intent is to calculate the distance between each cell of our table of observed counts with that of our sample counts.", "The formula for said \u201cdistance\u201d looks like this:", "The chi-square statistic that we get is: 20.1", "So, great. We understand the purpose of the chi-square statistic, we even have it\u2026 but what we still don\u2019t know is\u2026 is a chi-square stat of 20.1 meaningful?", "Earlier in the post, we spoke about how we can use the infer package to create many, many replicates. A hypothesis test is precisely the time for that type of sampling.", "Let\u2019s use infer again, just this time we'll generate 500 replicates & calculate a chi-square statistic for each group of replicates.", "Based on the above output, you can see that each replicate has it's own stat.", "Let\u2019s use a density plot to see what our distribution of chi-square statistics looks like.", "At a first glance we can see the distribution of chi-square statistics is very right skewed. We can also see that our statistic of 20.1 is not even on the plot.", "Let\u2019s add a vertical line to show how our observed chi-square compares to the permuted distribution.", "When it comes to having sufficient evidence to reject the null hypothesis, this is promising. Null hypothesis being that there is no relationship between the two variables.", "As a final portion to this lesson on how to use chi-square statistics, let\u2019s talk about how we should go about calculating p-value.", "Earlier I mentioned the idea that we might want to know if our simulated chi-square stat was ever as large as our observed chi-square stat, and if so how often it might have occurred.", "That is the essence of p-value.", "When taking the chi-square stat of two variables that we know are independent of one another (the simulated case), what percentage of these replicates\u2019 chi-square stats are greater than or equal to our observed chi-square stat.", "In the case of our sample, we\u2019re getting a p-value of 0. As to say that in the course of 500 replicates, we never surpassed a chi-square stat of 20.1.", "As such, we would reject the null hypothesis that churn and streaming tv are independent.", "We have done a lot in such a short amount of time. It\u2019s easy to get lost when dissecting statistics concepts like the chi-square statistic. My hope is that having a strong foundational understanding of the need and corresponding calculation of this statistic lends to the right instinct for recognizing the right opportunity to put this tool to work.", "In just a few minutes, we have covered:", "If this was helpful, feel free to check out my other posts at datasciencelessons.com. Happy Data Science-ing!", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "I\u2019m a Data Science Leader sharing lessons learned & tips of the trade! Twitter: @data_lessons"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fbcdb17bbafb7&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-chi-squared-test-statistic-is-a-must-for-every-data-scientist-a-case-study-in-customer-churn-bcdb17bbafb7&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-chi-squared-test-statistic-is-a-must-for-every-data-scientist-a-case-study-in-customer-churn-bcdb17bbafb7&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-chi-squared-test-statistic-is-a-must-for-every-data-scientist-a-case-study-in-customer-churn-bcdb17bbafb7&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-chi-squared-test-statistic-is-a-must-for-every-data-scientist-a-case-study-in-customer-churn-bcdb17bbafb7&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----bcdb17bbafb7--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----bcdb17bbafb7--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@datasciencelessons?source=post_page-----bcdb17bbafb7--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@datasciencelessons?source=post_page-----bcdb17bbafb7--------------------------------", "anchor_text": "Rob W"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F7ba0440fca12&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-chi-squared-test-statistic-is-a-must-for-every-data-scientist-a-case-study-in-customer-churn-bcdb17bbafb7&user=Rob+W&userId=7ba0440fca12&source=post_page-7ba0440fca12----bcdb17bbafb7---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fbcdb17bbafb7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-chi-squared-test-statistic-is-a-must-for-every-data-scientist-a-case-study-in-customer-churn-bcdb17bbafb7&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fbcdb17bbafb7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-chi-squared-test-statistic-is-a-must-for-every-data-scientist-a-case-study-in-customer-churn-bcdb17bbafb7&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://pixabay.com/users/Pavlofox-514753/?utm_source=link-attribution&utm_medium=referral&utm_campaign=image&utm_content=1452987", "anchor_text": "Pavlofox"}, {"url": "https://pixabay.com/?utm_source=link-attribution&utm_medium=referral&utm_campaign=image&utm_content=1452987", "anchor_text": "Pixabay"}, {"url": "https://www.kaggle.com/blastchar/telco-customer-churn", "anchor_text": "kaggle"}, {"url": "http://datasciencelessons.com/", "anchor_text": "datasciencelessons.com"}, {"url": "https://medium.com/tag/data-science?source=post_page-----bcdb17bbafb7---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/statistics?source=post_page-----bcdb17bbafb7---------------statistics-----------------", "anchor_text": "Statistics"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----bcdb17bbafb7---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/tag/mathematics?source=post_page-----bcdb17bbafb7---------------mathematics-----------------", "anchor_text": "Mathematics"}, {"url": "https://medium.com/tag/data-analysis?source=post_page-----bcdb17bbafb7---------------data_analysis-----------------", "anchor_text": "Data Analysis"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fbcdb17bbafb7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-chi-squared-test-statistic-is-a-must-for-every-data-scientist-a-case-study-in-customer-churn-bcdb17bbafb7&user=Rob+W&userId=7ba0440fca12&source=-----bcdb17bbafb7---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fbcdb17bbafb7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-chi-squared-test-statistic-is-a-must-for-every-data-scientist-a-case-study-in-customer-churn-bcdb17bbafb7&user=Rob+W&userId=7ba0440fca12&source=-----bcdb17bbafb7---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fbcdb17bbafb7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-chi-squared-test-statistic-is-a-must-for-every-data-scientist-a-case-study-in-customer-churn-bcdb17bbafb7&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----bcdb17bbafb7--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fbcdb17bbafb7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-chi-squared-test-statistic-is-a-must-for-every-data-scientist-a-case-study-in-customer-churn-bcdb17bbafb7&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----bcdb17bbafb7---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----bcdb17bbafb7--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----bcdb17bbafb7--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----bcdb17bbafb7--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----bcdb17bbafb7--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----bcdb17bbafb7--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----bcdb17bbafb7--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----bcdb17bbafb7--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----bcdb17bbafb7--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@datasciencelessons?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@datasciencelessons?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Rob W"}, {"url": "https://medium.com/@datasciencelessons/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "1.6K Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F7ba0440fca12&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-chi-squared-test-statistic-is-a-must-for-every-data-scientist-a-case-study-in-customer-churn-bcdb17bbafb7&user=Rob+W&userId=7ba0440fca12&source=post_page-7ba0440fca12--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F6e82f9862de1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-chi-squared-test-statistic-is-a-must-for-every-data-scientist-a-case-study-in-customer-churn-bcdb17bbafb7&newsletterV3=7ba0440fca12&newsletterV3Id=6e82f9862de1&user=Rob+W&userId=7ba0440fca12&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}