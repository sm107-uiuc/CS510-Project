{"url": "https://towardsdatascience.com/grouping-and-aggregating-data-using-sql-7ac85d654fe4", "time": 1683007044.9729779, "path": "towardsdatascience.com/grouping-and-aggregating-data-using-sql-7ac85d654fe4/", "webpage": {"metadata": {"title": "How to group and aggregate data using SQL | by Kate Marie Lewis | Towards Data Science", "h1": "How to group and aggregate data using SQL", "description": "I have been so enjoying engaging with my friends to share my love of data science. We are powering through learning SQL, with three lessons under our belt already. If you would like to start at the\u2026"}, "outgoing_paragraph_urls": [{"url": "https://towardsdatascience.com/learn-data-science-while-practicing-social-distancing-lesson-1-making-a-table-using-sql-13fb9678282b", "anchor_text": "link to the first lesson", "paragraph_index": 0}, {"url": "https://towardsdatascience.com/tagged/ldswsd", "anchor_text": "here", "paragraph_index": 0}, {"url": "https://en.wikipedia.org/wiki/Spice_Girls_discography", "anchor_text": "Spice Girls discography", "paragraph_index": 7}, {"url": "https://en.wikipedia.org/wiki/Spice_(album)#Weekly_charts", "anchor_text": "Spice(album)", "paragraph_index": 7}, {"url": "https://en.wikipedia.org/wiki/Spiceworld_(album)", "anchor_text": "Spice World(album)", "paragraph_index": 7}, {"url": "https://en.wikipedia.org/wiki/Forever_(Spice_Girls_album)", "anchor_text": "Forever(Spice Girls Album)", "paragraph_index": 7}, {"url": "https://australian-charts.com/showinterpret.asp?interpret=Spice+Girls", "anchor_text": "Australian charts website", "paragraph_index": 7}, {"url": "https://towardsdatascience.com/what-is-the-difference-between-a-having-clause-and-a-where-clause-in-sql-ed74e0a8ad6d?source=friends_link&sk=10639653636d515c1c1870cc78d2d965", "anchor_text": "comparing WHERE and HAVING in SQL", "paragraph_index": 8}, {"url": "https://www.oreilly.com/library/view/mysql-cookbook/0596001452/ch04s02.html", "anchor_text": "great resource", "paragraph_index": 26}, {"url": "https://towardsdatascience.com/what-is-the-difference-between-an-inner-and-an-outer-join-in-sql-5b5ec8277377?source=your_stories_page---------------------------", "anchor_text": "difference between inner and outer joins in SQL", "paragraph_index": 37}, {"url": "http://www.katemarielewis.com", "anchor_text": "www.katemarielewis.com", "paragraph_index": 38}], "all_paragraphs": ["I have been so enjoying engaging with my friends to share my love of data science. We are powering through learning SQL, with three lessons under our belt already. If you would like to start at the beginning here is a link to the first lesson. All of the lessons can also be found here. Otherwise, get stuck into this lesson on grouping and aggregating data using SQL.", "Last week, we covered filtering data using SQL. Using one of my favourite shows, Charmed for example data, we went through using WHERE clauses in queries. In addition, we explored the use of the keywords IN, AND, OR, LIKE, BETWEEN and NOT.", "Now that we know how to filter data, we will move onto aggregation. We will learn how to use the keywords MIN and MAX to find the minimum and maximum of our data respectively. We will also practice using the COUNT, AVG and SUM keywords in a similar manner.", "This will also be the first lesson that we have encountered NULL values. So we will learn how to deal with them in our datasets.", "It just so happens that all of the friends I am teaching data science to, whilst self-isolating are women. So what better example to use in this lesson than the Spice Girls to celebrate a bit of girl power. We will use data on the first Spice Girls album titled Spice. This is one that was on high rotation in my house growing up.", "I think that the first Spice Girls album is the best one. Just in case people don\u2019t believe me, I want to find some data to back it up. Using Australian charts data for the singles released from each Spice Girls album, I think I can prove the first one rules!", "This dataset contains information on all the tracks in each album that the Spice Girls released. The table contains the length of each track, when each single was released, what position the song peaked at in the Australian charts and how many weeks the song was in the Australian charts. I didn\u2019t include the greatest hits album because I thought that would confuse matters.", "I got the data for this table from the Spice Girls discography Wikipedia page, the Spice(album) Wikipedia page, Spice World(album) Wikipedia page, Forever(Spice Girls Album) and on an Australian charts website.", "In this lesson I will teach you how to use the aggregating keywords MIN, MAX, COUNT, SUM and AVG in the SELECT statement. These aggregators may also be used elsewhere in queries. For example, they can be used in a HAVING clause, but that is beyond the scope of this lesson. I have written another story comparing WHERE and HAVING in SQL in case you want to learn more.", "The MAX keyword can be used to find the maximum value within a column. It can be used on many different datatypes including integers, floats, strings and dates.", "As you can see below, the syntax to use MAX involves putting the MAX keyword inside the select statement. The MAX keyword has a set of brackets after it, which is where you put the column name you want to find the maximum value of.", "Another useful keyword that can be used in conjunction with aggregators is AS. AS is used to create an alias or temporary name for the column created by the aggregator in the returned table. Since the aggregator has been used on column 1, it is useful to give the result a new name so that it is easily identifiable in the resulting table. The keyword AS may also be used to give an alias to a table, but we will cover that in our lesson on joining tables.", "The MIN keyword is used in much the same way as the MAX keyword. As you would expect, it is used to return the minimum value of the selected column.", "COUNT is a keyword used to count the number of rows in the selected column. So in the example below it would count the total number of rows in the table.", "However, COUNT is more useful when there is some filter or grouping applied to the table. In that case you would be counting the number of rows in the table that meet the filter or grouping conditions.", "Unlike MIN, MAX and COUNT, the keywords SUM and AVG are only able to be used on columns that contain numeric datatypes like integers or floats. AVG is used to return the average value of a column.", "SUM adds together the values in a numeric column. The syntax to use SUM is the same as the other aggregators.", "Grouping is very useful for summarising data that has repeated values. It is often used in conjunction with the aggregators MIN, MAX, COUNT, SUM and AVG. GROUP BY collects together identical values in the column it is applied to. Then an aggregator can be used on another column based on those groupings. The GROUP BY clause will often be used on a column that contains category values.", "For example, if you use the AVG aggregator with GROUP BY you can find the average value for one column for each group of values in another column. The syntax for this example is shown below. In this case the table returned would contain the average value from column one for each value in column two.", "A NULL value is what happens when a field has no value entered. So it is like a placeholder to let you know that there is an empty space in the table. It is different from a 0 value or an empty string \u2018\u2019 as they are still values. NULL has its own keywords.", "You can check for NULL values in a column using the IS NULL keyword. This is done in the WHERE statement and will return only the records that contain NULL values in the column specified in the WHERE statement.", "However, the more common scenario would be where you want to exclude all records that contain NULL values. In that case you can add the NOT keyword to your query. In the example below only the records that have no NULL values in column two will be included in the returned table.", "NULL values are ignored by aggregate keywords MIN, MAX, AVG, SUM and COUNT. For MIN and MAX it is fairly straight forward, you will get the minimum or maximum value in the column ignoring all NULL values. Similarly for SUM, all the values in the column that are not NULL will be added together. For AVG you get the average value of the column when all NULL values are removed.", "COUNT is only slightly more tricky, all the rows in the selected column will be counted, except for the rows containing NULL values. The only exception to that rule is shown below. In this case all of the rows of the table will be counted, regardless of whether there are NULL values.", "In contrast to the aggregators, GROUP BY does not ignore NULL values. Instead they are grouped together as a single grouping category.", "Note about special characters: In creating this table we come across a new syntactical nuance that we have not seen in the previous lessons. Some of the song names contain apostrophes. So if we surrounded the song name strings with single quotation marks \u2018\u2019 like we normally would, there would be an error. This is because the apostrophe would be confused for the closing quotation by the program. So to include a string containing an apostrophe in our table we need to use double quotations around the strings.", "The reverse can also be done if you need to have a string that contains double quotations. If you would like to learn more about special characters like quotations, this is a great resource.", "Note about TIME datatype: There is also a datatype in this table that we have not seen in any of the previous lessons. It is the TIME datatype. Time has the format \u2018hours:minutes:seconds\u2019.", "3. Click the build schema button", "4. In the right hand box put your queries", "5. Run the query below and see if it returns what you would expect it to:", "6. Run the query below and see if it returns what you would expect it to:", "7. Run the query below and see if it returns what you would expect it to:", "Exercise 1: Write a query to show which album is the best, if we define the best album as the one with the highest peak chart position of one of its singles.", "Exercise 2: Write a query to show which album is the best, if we define the best album as the one with the highest average peak chart position of all of the singles in the album.", "Exercise 3: Write a query to show which album is the best, if we define the best album as the one with the highest number of singles in the Australian charts for at least 5 weeks.", "After completing this lesson you should know:", "Next week will be our final SQL lesson. We will learn how to join tables together. There are several different ways that we can combine datasets, using the UNION, UNION ALL and JOIN keywords. If you are eager to get into looking at joins before next week I have previously written an article about the difference between inner and outer joins in SQL.", "In addition to data, my other passion is painting. You can find my wildlife art at www.katemarielewis.com", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Big data geek, neuroscientist and artist."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F7ac85d654fe4&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgrouping-and-aggregating-data-using-sql-7ac85d654fe4&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgrouping-and-aggregating-data-using-sql-7ac85d654fe4&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgrouping-and-aggregating-data-using-sql-7ac85d654fe4&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgrouping-and-aggregating-data-using-sql-7ac85d654fe4&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----7ac85d654fe4--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----7ac85d654fe4--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@katemarielewis?source=post_page-----7ac85d654fe4--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@katemarielewis?source=post_page-----7ac85d654fe4--------------------------------", "anchor_text": "Kate Marie Lewis"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Ffeb55b31bbd5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgrouping-and-aggregating-data-using-sql-7ac85d654fe4&user=Kate+Marie+Lewis&userId=feb55b31bbd5&source=post_page-feb55b31bbd5----7ac85d654fe4---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F7ac85d654fe4&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgrouping-and-aggregating-data-using-sql-7ac85d654fe4&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F7ac85d654fe4&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgrouping-and-aggregating-data-using-sql-7ac85d654fe4&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://towardsdatascience.com/tagged/ldswsd", "anchor_text": "Learn data science while social distancing"}, {"url": "https://unsplash.com/@capturedby_kiana?utm_source=medium&utm_medium=referral", "anchor_text": "Kiana Bosman"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://towardsdatascience.com/learn-data-science-while-practicing-social-distancing-lesson-1-making-a-table-using-sql-13fb9678282b", "anchor_text": "link to the first lesson"}, {"url": "https://towardsdatascience.com/tagged/ldswsd", "anchor_text": "here"}, {"url": "https://en.wikipedia.org/wiki/Spice_Girls_discography", "anchor_text": "Spice Girls discography"}, {"url": "https://en.wikipedia.org/wiki/Spice_(album)#Weekly_charts", "anchor_text": "Spice(album)"}, {"url": "https://en.wikipedia.org/wiki/Spiceworld_(album)", "anchor_text": "Spice World(album)"}, {"url": "https://en.wikipedia.org/wiki/Forever_(Spice_Girls_album)", "anchor_text": "Forever(Spice Girls Album)"}, {"url": "https://australian-charts.com/showinterpret.asp?interpret=Spice+Girls", "anchor_text": "Australian charts website"}, {"url": "https://towardsdatascience.com/what-is-the-difference-between-a-having-clause-and-a-where-clause-in-sql-ed74e0a8ad6d?source=friends_link&sk=10639653636d515c1c1870cc78d2d965", "anchor_text": "comparing WHERE and HAVING in SQL"}, {"url": "http://sqlfiddle.com/", "anchor_text": "http://sqlfiddle.com/"}, {"url": "https://www.db-fiddle.com/", "anchor_text": "https://www.db-fiddle.com/"}, {"url": "https://www.oreilly.com/library/view/mysql-cookbook/0596001452/ch04s02.html", "anchor_text": "great resource"}, {"url": "https://towardsdatascience.com/what-is-the-difference-between-an-inner-and-an-outer-join-in-sql-5b5ec8277377?source=your_stories_page---------------------------", "anchor_text": "difference between inner and outer joins in SQL"}, {"url": "http://www.katemarielewis.com", "anchor_text": "www.katemarielewis.com"}, {"url": "https://towardsdatascience.com/tagged/ldswsd", "anchor_text": "Ldswsd - Towards Data ScienceRead writing about Ldswsd in Towards Data Science. A Medium publication sharing concepts, ideas, and codes.towardsdatascience.com"}, {"url": "https://medium.com/tag/ldswsd?source=post_page-----7ac85d654fe4---------------ldswsd-----------------", "anchor_text": "Ldswsd"}, {"url": "https://medium.com/tag/data-science?source=post_page-----7ac85d654fe4---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/programming?source=post_page-----7ac85d654fe4---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/tag/technology?source=post_page-----7ac85d654fe4---------------technology-----------------", "anchor_text": "Technology"}, {"url": "https://medium.com/tag/sql?source=post_page-----7ac85d654fe4---------------sql-----------------", "anchor_text": "Sql"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F7ac85d654fe4&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgrouping-and-aggregating-data-using-sql-7ac85d654fe4&user=Kate+Marie+Lewis&userId=feb55b31bbd5&source=-----7ac85d654fe4---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F7ac85d654fe4&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgrouping-and-aggregating-data-using-sql-7ac85d654fe4&user=Kate+Marie+Lewis&userId=feb55b31bbd5&source=-----7ac85d654fe4---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F7ac85d654fe4&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgrouping-and-aggregating-data-using-sql-7ac85d654fe4&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----7ac85d654fe4--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F7ac85d654fe4&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgrouping-and-aggregating-data-using-sql-7ac85d654fe4&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----7ac85d654fe4---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----7ac85d654fe4--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----7ac85d654fe4--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----7ac85d654fe4--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----7ac85d654fe4--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----7ac85d654fe4--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----7ac85d654fe4--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----7ac85d654fe4--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----7ac85d654fe4--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@katemarielewis?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@katemarielewis?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Kate Marie Lewis"}, {"url": "https://medium.com/@katemarielewis/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "4K Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Ffeb55b31bbd5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgrouping-and-aggregating-data-using-sql-7ac85d654fe4&user=Kate+Marie+Lewis&userId=feb55b31bbd5&source=post_page-feb55b31bbd5--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fe5b8a4095c55&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgrouping-and-aggregating-data-using-sql-7ac85d654fe4&newsletterV3=feb55b31bbd5&newsletterV3Id=e5b8a4095c55&user=Kate+Marie+Lewis&userId=feb55b31bbd5&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}