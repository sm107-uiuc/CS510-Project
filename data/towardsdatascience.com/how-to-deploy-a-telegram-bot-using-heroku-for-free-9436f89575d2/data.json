{"url": "https://towardsdatascience.com/how-to-deploy-a-telegram-bot-using-heroku-for-free-9436f89575d2", "time": 1683006763.2905118, "path": "towardsdatascience.com/how-to-deploy-a-telegram-bot-using-heroku-for-free-9436f89575d2/", "webpage": {"metadata": {"title": "How to Deploy a Telegram Bot using Heroku for FREE | by Haohui | Towards Data Science", "h1": "How to Deploy a Telegram Bot using Heroku for FREE", "description": "Running your telegram bot locally suffices for simple applications. However, if you wanted to scale up your bot and enable others to use your bot even when you are not running the bot locally, you\u2026"}, "outgoing_paragraph_urls": [{"url": "https://github.com/python-telegram-bot/python-telegram-bot", "anchor_text": "python-telegram-bot library", "paragraph_index": 1}, {"url": "https://github.com/liuhh02/python-telegram-bot-heroku", "anchor_text": "Github repository", "paragraph_index": 3}, {"url": "https://yourherokuappname.herokuapp.com/.", "anchor_text": "https://yourherokuappname.herokuapp.com/.", "paragraph_index": 19}], "all_paragraphs": ["Running your telegram bot locally suffices for simple applications. However, if you wanted to scale up your bot and enable others to use your bot even when you are not running the bot locally, you will need to go one step further to deploy the bot.", "In this tutorial, I will be going through how to deploy a telegram bot you have created using the python-telegram-bot library with Heroku. What\u2019s even better is that we can do this completely for free! Forget about all the fees you incur from other hosting options, Heroku will mostly likely suffice for your needs, without you having to pay a single cent nor enter your credit card details.", "In order to do so, I will use a simple starter script taken from the examples in the python-telegram-bot Github repository where the bot simply echos whatever the user sends. You may have a different script, but I will show you which sections to modify in order to deploy the bot using Heroku.", "If you want to go straight to the files needed, head over to this Github repository to download them!", "Firstly, we will modify how the bot fetches new data. The python-telegram-bot script uses polling instead of webhooks to fetch new data. For simple testing purposes, polling is sufficient because it\u2019s simple to implement. However, the disadvantage of polling is that it is inefficient and the data it fetches is always old and never real-time. This is because polling sends a request at a predetermined frequency to detect any changes in the data, meaning it constantly checks if the data is modified, instead of being \u201cnotified\u201d when a change is made to the data.", "On the other hand, webhooks act like push notifications. Rather than fetching information, webhooks are triggered when the data is modified. This allows for realtime information and also makes it much more efficient because there is no need to continuously send requests to check for data.", "We first import os, and then set the port number to listen in for the webhook.", "Next, we modify the following line from", "What this is doing is that it changes the polling method to webhook, listening in to 0.0.0.0 with the port you specified above with the PORT variable. The token refers to the API token of your telegram bot, which should be defined at the top of the code. The next line is to set the Webhook with the link to your heroku app, which we will get to next.", "With all the changes to the python file, it should look similar to this (with your own Telegram bot token):", "We are done with editing the python-telegram-bot script, except for changing the name of your heroku app which we will get into soon. In order for heroku to recognise the following as a python app, you need the following files in the same directory:", "The python code should be inside the bot.py file, and I will go through the process to create the Procfile and requirements.txt.", "First, change the directory of your terminal / command prompt to the same directory containing your python script. Then, create a requirements.txt file containing the following line:", "This is needed to tell heroku which libraries it needs to install in order to execute the code. Assuming you are using the sample code above, the only library you need is python-telegram-bot, and the version we are using is 12.7. If you are importing other libraries to run your python code, be sure to include the other libraries as well in the requirements.txt file.", "Next, you need a Procfile. The procfile declares the process type followed by the command, in the format <process type>: <command>. Here, we are using the web process type, which receives external HTTP traffic from Heroku\u2019s routers. The command is python3 bot.py, which tells Heroku to execute the python file as you normally would with a python file locally. So your Procfile should contain the line:", "Make sure that the Procfile does not have any file extension like .txt behind it, because it won\u2019t work.", "With the three files in the same directory, we will now create the Heroku Webapp.", "A new window will be opened in your browser prompting you to login, so just click on the button.", "4. Once you are logged in, go back to the command line. Type in", "to create your new webapp. Here, heroku will assign your webapp a name as well as the link to your webapp, which should be of the format https://yourherokuappname.herokuapp.com/. Paste the URL into the bot.py code, for the line", "With all the changes to your bot.py file, it should look similar to this (with your own Telegram bot token and heroku app name, of course):", "5. Next, in your command line, type in", "The first line creates a new Git repository. The second line then tells Git that you want to include updates to a particular file in the next commit. The third line then commits the changes. In the fourth line, change \u201cYourAppName\u201d to the name of your heroku app. Lastly, the fifth line pushes everything to the server.", "You should then see the following messages:", "In particular, it will say that a Python app is detected and it will install the required libraries in the requirements.txt file using pip. Then, it will read the Procfile which specifies that the bot.py file is to be executed.", "So that\u2019s it! Once it finishes executing, you can simply head over to Telegram and message /start to your bot. It should now behave as you expect it to.", "Since you are using the free plan on heroku, the bot will sleep after 30 minutes of inactivity. So do expect the bot to take a few seconds to respond to your /start if you are using it more than 30 minutes after it was previously used. Other than that, the bot will respond almost instantaneously~", "I\u2019ve noticed that the bot stops responding after about 24 hours of inactivity (because we are using the free version of Heroku), so if you want to \u201cjolt\u201d the bot awake, one way is to make a change to one of the files (eg. changing the python3 in the procfile to python and vice versa) and then committing the changes with the lines below:", "You should see again see the messages about a Python app being detected and once it finishes executing, your bot should revive now!", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Machine learning enthusiast working on the next big project"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F9436f89575d2&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-deploy-a-telegram-bot-using-heroku-for-free-9436f89575d2&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-deploy-a-telegram-bot-using-heroku-for-free-9436f89575d2&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-deploy-a-telegram-bot-using-heroku-for-free-9436f89575d2&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-deploy-a-telegram-bot-using-heroku-for-free-9436f89575d2&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----9436f89575d2--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----9436f89575d2--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@liuhh02?source=post_page-----9436f89575d2--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@liuhh02?source=post_page-----9436f89575d2--------------------------------", "anchor_text": "Haohui"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F500dff1f8d3b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-deploy-a-telegram-bot-using-heroku-for-free-9436f89575d2&user=Haohui&userId=500dff1f8d3b&source=post_page-500dff1f8d3b----9436f89575d2---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F9436f89575d2&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-deploy-a-telegram-bot-using-heroku-for-free-9436f89575d2&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F9436f89575d2&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-deploy-a-telegram-bot-using-heroku-for-free-9436f89575d2&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@ianjbattaglia?utm_source=medium&utm_medium=referral", "anchor_text": "Ian Battaglia"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://github.com/python-telegram-bot/python-telegram-bot", "anchor_text": "python-telegram-bot library"}, {"url": "https://github.com/liuhh02/python-telegram-bot-heroku", "anchor_text": "Github repository"}, {"url": "https://community.stuart.engineering/t/webhooks-vs-polling/257", "anchor_text": "https://community.stuart.engineering/t/webhooks-vs-polling/257"}, {"url": "https://community.stuart.engineering/t/webhooks-vs-polling/257", "anchor_text": "https://community.stuart.engineering/t/webhooks-vs-polling/257"}, {"url": "https://yourherokuappname.herokuapp.com/'", "anchor_text": "https://yourherokuappname.herokuapp.com/'"}, {"url": "https://signup.heroku.com/dc", "anchor_text": "create"}, {"url": "https://devcenter.heroku.com/articles/getting-started-with-python#set-up", "anchor_text": "Heroku CLI"}, {"url": "https://git-scm.com/book/en/v2/Getting-Started-Installing-Git", "anchor_text": "install Git"}, {"url": "https://yourherokuappname.herokuapp.com/.", "anchor_text": "https://yourherokuappname.herokuapp.com/."}, {"url": "https://yourherokuappname.herokuapp.com/'", "anchor_text": "https://yourherokuappname.herokuapp.com/'"}, {"url": "https://medium.com/tag/telegram?source=post_page-----9436f89575d2---------------telegram-----------------", "anchor_text": "Telegram"}, {"url": "https://medium.com/tag/programming?source=post_page-----9436f89575d2---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/tag/python?source=post_page-----9436f89575d2---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/heroku?source=post_page-----9436f89575d2---------------heroku-----------------", "anchor_text": "Heroku"}, {"url": "https://medium.com/tag/api?source=post_page-----9436f89575d2---------------api-----------------", "anchor_text": "API"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F9436f89575d2&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-deploy-a-telegram-bot-using-heroku-for-free-9436f89575d2&user=Haohui&userId=500dff1f8d3b&source=-----9436f89575d2---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F9436f89575d2&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-deploy-a-telegram-bot-using-heroku-for-free-9436f89575d2&user=Haohui&userId=500dff1f8d3b&source=-----9436f89575d2---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F9436f89575d2&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-deploy-a-telegram-bot-using-heroku-for-free-9436f89575d2&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----9436f89575d2--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F9436f89575d2&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-deploy-a-telegram-bot-using-heroku-for-free-9436f89575d2&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----9436f89575d2---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----9436f89575d2--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----9436f89575d2--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----9436f89575d2--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----9436f89575d2--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----9436f89575d2--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----9436f89575d2--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----9436f89575d2--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----9436f89575d2--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@liuhh02?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@liuhh02?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Haohui"}, {"url": "https://medium.com/@liuhh02/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "210 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F500dff1f8d3b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-deploy-a-telegram-bot-using-heroku-for-free-9436f89575d2&user=Haohui&userId=500dff1f8d3b&source=post_page-500dff1f8d3b--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F64817874ddcf&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-deploy-a-telegram-bot-using-heroku-for-free-9436f89575d2&newsletterV3=500dff1f8d3b&newsletterV3Id=64817874ddcf&user=Haohui&userId=500dff1f8d3b&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}