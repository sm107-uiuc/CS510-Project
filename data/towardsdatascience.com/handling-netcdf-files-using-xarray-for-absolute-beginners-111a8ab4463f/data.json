{"url": "https://towardsdatascience.com/handling-netcdf-files-using-xarray-for-absolute-beginners-111a8ab4463f", "time": 1682994378.595938, "path": "towardsdatascience.com/handling-netcdf-files-using-xarray-for-absolute-beginners-111a8ab4463f/", "webpage": {"metadata": {"title": "Handling NetCDF Files using XArray for Absolute Beginners | by Eden Au | Towards Data Science", "h1": "Handling NetCDF Files using XArray for Absolute Beginners", "description": "Quick guide to manipulate NetCDF data"}, "outgoing_paragraph_urls": [{"url": "https://www.arm.gov/", "anchor_text": "Atmospheric Radiation Measurement Climate Research Facility", "paragraph_index": 2}, {"url": "https://www.ecmwf.int/", "anchor_text": "European Centre for Medium-Range Weather Forecasts", "paragraph_index": 2}, {"url": "https://edenau.github.io", "anchor_text": "edenau.github.io", "paragraph_index": 3}, {"url": "http://xarray.pydata.org/en/stable/", "anchor_text": "xarray", "paragraph_index": 4}, {"url": "http://xarray.pydata.org/en/stable/installing.html", "anchor_text": "documentation", "paragraph_index": 5}, {"url": "https://scitools.org.uk/iris/docs/latest/", "anchor_text": "iris", "paragraph_index": 10}, {"url": "https://edenau.github.io", "anchor_text": "edenau.github.io", "paragraph_index": 35}], "all_paragraphs": ["NetCDF is a machine-independent, array-oriented, multi-dimensional, self-describing, and portable data format used by various scientific communities. It has a filename extension of .nc or .cdf (though it is believed that there are subtle differences between the two). Unlike files in .csv or .xlsx, NetCDF format cannot be accessed and viewed directly using spreadsheet software.", "Even if you could, you would not do that on a 4-dimensional data with a bunch of metadata.", "I will take climate data from Atmospheric Radiation Measurement Climate Research Facility (ARM) in the United States, and European Centre for Medium-Range Weather Forecasts (ECMWF) in Europe as an example.", "Originally published on my blog edenau.github.io.", "We will use xarray library in Python for data processing. Long story short, it builds upon numpy (and dask) libraries and leverages the power of pandas, but you probably don\u2019t need to know about it. As you might know, package dependency is a pain in Python. That is why the most convenient way to get everything installed is to use the following command:", "Experienced Python programmers are recommended check the relevant documentation for more details. If you are a beginner, no worries. I made a list of dependencies that you need to check:", "If you want to visualize your dataset, you will probably need these:", "For absolute beginners, you can check your default version of Python by", "You can also check if Python3 is installed by", "To check the version of packages, use pip freeze or conda list. Things should check out if you install xarray through conda.", "iris is an alternative to xarray, but some works need to be done to make it work on Windows, and it does not work well on Mac OS. Iris is also an English word, so googling \u2018iris\u2019 gives you many irrelevant results. It was a pain for me to use iris.", "It is always a good idea to \u2018preview\u2019 and \u2018get to know\u2019 your data, its metadata and data structures. Assume you have installed netCDF4-python and the only two commands you need are ncdump and ncview. The former gives text representation of your netCDF dataset (basically metadata and the data itself), while the latter is a very powerful graphical interface for instant data visualization.", "Go to the directory of your dataset and try", "As we do not need to see the values of every data entry at the moment, -h ensures only header (metadata) is shown. You will get", "You can see dimensions, variables, and other metadata which are quite self-explanatory. Global attributes (not printed above) tells us how the data is collected and pre-processed. In this example, they are measurement data taken at 147.4E 2.1S, Manus, Papua New Guinea by ARM.", "When we look into the list of variables: 1-dim prec_sfc and 2-dim T_p, we realize that they have different dimensions(!). Precipitation rate is a scalar measurement at each time, whereas temperature is a column (measurements at different pressure levels instead of altitude levels this time) at every time. It is quite common to see 4-dim data in climate science \u2014 latitude, longitude, altitude/pressure level, time.", "Try the following command and it gives you a graphical interface that lists all variables in your dataset, and it is quite straightforward.", "xarray.DataArray is an implementation of a labelled, multi-dimensional array for a single variable, such as precipitation, temperature etc.. It has the following key properties:", "xarray.DataSet is a collection of DataArrays. Each NetCDF file contains a DataSet.", "You cannot play with the data until you read it. Use open_dataset or open_mfdataset to read a single or multiple NetCDF files, and store it in a DataSet called DS.", "Remember the 4 key properties of DataArrays? You can useDS.values, DS.var, DS.dims, DS.coords, and DS.attrs for data inspection. This will become very handy in interactive Python. Their functionalities are quite obvious and are left as an exercise to the reader(!).", "Extracting DataArrays from DataSet DS is very straightforward, as DS.<var_name> will suffice. You might consider dropping NaN entries by dropna() and selecting data with sel(). The method parameter in sel() allows us to enable the nearest neighbour (inexact) lookups by use of the methods 'pad', 'backfill', or 'nearest'. To specify a range, use slice().", "You can transform xr.DataArray to numpy.ndarray by da.values.", "It is a convention to name DataSet as DS in upper case and DataArray as da in lower case.", "Assume DataArray da has a dimension timein DateTime format, We can extract the year/month/day/dayofyear/dayofweek by da.time.dt.<year/month/day/...>. Note that the output is still in DataArray.", "The following example takes one step further and tries to compute the mean/sum of any variable for each month. We first define a new coordinate system with assign_coords(). Why? Try looking into how year and month performs in DateTime. If we need the system to be aware of the differences between January 2000 and January 2001, we need both year and month to define a new coordinate, which we call it year_month.", "We can then group data by groupby('year_month') based on our newly defined coordinate system, followed by mean()or sum() operations.", "We can merge multiple DataArrays using xr.merge(). If you attempt to merge two variables with the same name but with different values, xr.MergeError will be raised. This ensures xr.merge()is non-destructive.", "You can simply take DataArrays as arguments of matplotlib.pyplot methods. For absolute beginners, try plt.plot(), or plt.scatter() for line or scatter plots. Remember to show figures by plt.show(), or save figures by plt.savefig().", "If you need maps, cartopy library can generate one easily.", "With a few extra lines of codes, you can generate something like this:", "You can convert DataArray to numpy.ndarray as explained earlier, or convert DataSet or DataArray to pandas.DataFrame as illustrated below.", "You can also export DataArray or DataSet to NetCDF file by", "If you are interested in Python or programming in general, the following articles might be helpful:", "This tutorial was written for teaching purpose and only included the very basics of xarray. Hope this helps!", "Originally published on my blog edenau.github.io.", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F111a8ab4463f&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhandling-netcdf-files-using-xarray-for-absolute-beginners-111a8ab4463f&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhandling-netcdf-files-using-xarray-for-absolute-beginners-111a8ab4463f&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhandling-netcdf-files-using-xarray-for-absolute-beginners-111a8ab4463f&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhandling-netcdf-files-using-xarray-for-absolute-beginners-111a8ab4463f&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----111a8ab4463f--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----111a8ab4463f--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://edenau.medium.com/?source=post_page-----111a8ab4463f--------------------------------", "anchor_text": ""}, {"url": "https://edenau.medium.com/?source=post_page-----111a8ab4463f--------------------------------", "anchor_text": "Eden Au"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F9a831eeffa24&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhandling-netcdf-files-using-xarray-for-absolute-beginners-111a8ab4463f&user=Eden+Au&userId=9a831eeffa24&source=post_page-9a831eeffa24----111a8ab4463f---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F111a8ab4463f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhandling-netcdf-files-using-xarray-for-absolute-beginners-111a8ab4463f&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F111a8ab4463f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhandling-netcdf-files-using-xarray-for-absolute-beginners-111a8ab4463f&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@albertorestifo?utm_source=medium&utm_medium=referral", "anchor_text": "Alberto Restifo"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://www.arm.gov/", "anchor_text": "Atmospheric Radiation Measurement Climate Research Facility"}, {"url": "https://www.ecmwf.int/", "anchor_text": "European Centre for Medium-Range Weather Forecasts"}, {"url": "https://medium.com/p/111a8ab4463f#dce7", "anchor_text": "Prerequisites"}, {"url": "https://medium.com/p/111a8ab4463f#4715", "anchor_text": "Alternatives"}, {"url": "https://medium.com/p/111a8ab4463f#f232", "anchor_text": "Data Preview"}, {"url": "https://medium.com/p/111a8ab4463f#70a2", "anchor_text": "Terminology"}, {"url": "https://medium.com/p/111a8ab4463f#14ea", "anchor_text": "Coding using XArray"}, {"url": "https://medium.com/p/111a8ab4463f#00c2", "anchor_text": "Remarks"}, {"url": "https://edenau.github.io", "anchor_text": "edenau.github.io"}, {"url": "http://xarray.pydata.org/en/stable/", "anchor_text": "xarray"}, {"url": "http://xarray.pydata.org/en/stable/installing.html", "anchor_text": "documentation"}, {"url": "https://scitools.org.uk/iris/docs/latest/", "anchor_text": "iris"}, {"url": "https://towardsdatascience.com/5-python-features-i-wish-i-had-known-earlier-bc16e4a13bf4", "anchor_text": "5 Python features I wish I had known earlierPython tricks beyond lambda, map, and filtertowardsdatascience.com"}, {"url": "https://towardsdatascience.com/visualizing-bike-mobility-in-london-using-interactive-maps-for-absolute-beginners-3b9f55ccb59", "anchor_text": "Visualizing bike mobility in London using interactive maps and animationsExploring data visualization tools in Pythontowardsdatascience.com"}, {"url": "https://edenau.github.io", "anchor_text": "edenau.github.io"}, {"url": "https://www.unidata.ucar.edu/software/netcdf/netcdf-4/newdocs/netcdf/ncdump.html", "anchor_text": "https://www.unidata.ucar.edu/software/netcdf/netcdf-4/newdocs/netcdf/ncdump.html"}, {"url": "http://xarray.pydata.org/en/stable/", "anchor_text": "http://xarray.pydata.org/en/stable/"}, {"url": "https://scitools.org.uk/cartopy/docs/v0.15/matplotlib/intro.html", "anchor_text": "https://scitools.org.uk/cartopy/docs/v0.15/matplotlib/intro.html"}, {"url": "http://earthpy.org/cartopy_backgroung.html", "anchor_text": "http://earthpy.org/cartopy_backgroung.html"}, {"url": "https://medium.com/tag/data-science?source=post_page-----111a8ab4463f---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/python?source=post_page-----111a8ab4463f---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/climate?source=post_page-----111a8ab4463f---------------climate-----------------", "anchor_text": "Climate"}, {"url": "https://medium.com/tag/data-structures?source=post_page-----111a8ab4463f---------------data_structures-----------------", "anchor_text": "Data Structures"}, {"url": "https://medium.com/tag/technology?source=post_page-----111a8ab4463f---------------technology-----------------", "anchor_text": "Technology"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F111a8ab4463f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhandling-netcdf-files-using-xarray-for-absolute-beginners-111a8ab4463f&user=Eden+Au&userId=9a831eeffa24&source=-----111a8ab4463f---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F111a8ab4463f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhandling-netcdf-files-using-xarray-for-absolute-beginners-111a8ab4463f&user=Eden+Au&userId=9a831eeffa24&source=-----111a8ab4463f---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F111a8ab4463f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhandling-netcdf-files-using-xarray-for-absolute-beginners-111a8ab4463f&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----111a8ab4463f--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F111a8ab4463f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhandling-netcdf-files-using-xarray-for-absolute-beginners-111a8ab4463f&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----111a8ab4463f---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----111a8ab4463f--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----111a8ab4463f--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----111a8ab4463f--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----111a8ab4463f--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----111a8ab4463f--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----111a8ab4463f--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----111a8ab4463f--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----111a8ab4463f--------------------------------", "anchor_text": ""}, {"url": "https://edenau.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://edenau.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Eden Au"}, {"url": "https://edenau.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "1.7K Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F9a831eeffa24&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhandling-netcdf-files-using-xarray-for-absolute-beginners-111a8ab4463f&user=Eden+Au&userId=9a831eeffa24&source=post_page-9a831eeffa24--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fe7efa567e96e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhandling-netcdf-files-using-xarray-for-absolute-beginners-111a8ab4463f&newsletterV3=9a831eeffa24&newsletterV3Id=e7efa567e96e&user=Eden+Au&userId=9a831eeffa24&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}