{"url": "https://towardsdatascience.com/end-to-end-quantitative-trading-automating-ml-using-awscli-83035b4f6d03", "time": 1683004391.907298, "path": "towardsdatascience.com/end-to-end-quantitative-trading-automating-ml-using-awscli-83035b4f6d03/", "webpage": {"metadata": {"title": "End-to-end AWS Quantitative Analysis: Automatically Running a Script Using AWS and AWSCLI | by Boris Shabash | Towards Data Science", "h1": "End-to-end AWS Quantitative Analysis: Automatically Running a Script Using AWS and AWSCLI", "description": "In a previous post we\u2019ve explored the use of Python in order to obtain historic financial data from an online source (in our case, Yahoo! Finance). We\u2019ve developed two Python scripts; One to grab\u2026"}, "outgoing_paragraph_urls": [{"url": "https://towardsdatascience.com/end-to-end-quantitative-trading-part-1-798dcfeb165a", "anchor_text": "previous post", "paragraph_index": 0}, {"url": "https://towardsdatascience.com/production-data-processing-with-apache-spark-96a58dfd3fe7", "anchor_text": "post here by Brent Lemieux", "paragraph_index": 1}, {"url": "https://docs.aws.amazon.com/general/latest/gr/rande.html", "anchor_text": "this page", "paragraph_index": 3}, {"url": "https://towardsdatascience.com/production-data-processing-with-apache-spark-96a58dfd3fe7", "anchor_text": "Brent Lemieux\u2019s post", "paragraph_index": 5}], "all_paragraphs": ["In a previous post we\u2019ve explored the use of Python in order to obtain historic financial data from an online source (in our case, Yahoo! Finance). We\u2019ve developed two Python scripts; One to grab the data for us, and one to process the data using sklearn\u2019s Decision Tree Classifier. We then uploaded them to an S3 bucket on AWS for safekeeping and easy access from other AWS services. In this post, we will explore setting up a workflow which creates a processing server for us, trains a model on our data in that server, and then removes the server when we\u2019re done.", "AWS\u2019s pricing model is \u201cpay as you use,\u201d which means we can create a server, do some data processing on it, and then tear it down, and we\u2019ll only pay for the amount of time we\u2019ve had the server running for. Furthermore, we are going to use a client library for spinning up the server (fancy term for creating a server) and tearing it down called AWSCLI(AWS Client). I started learning what I needed to spin up servers from a post here by Brent Lemieux and I strongly encourage you to check out that post.", "First we will install and configure AWSCLI. I will be using AWSCLI v2. Once installed we can test that it works", "Then we configure it. In configuring AWSCLI this page might be useful for the default region selection.", "We should also create default roles by running", "Once we are configured, we can employ AWSCLI and spin up our servers. Reading Brent Lemieux\u2019s post, he describes how to create a bootstrap file which will initialize the server for us. You will notice we need to install packages such as pandas and matplotlib into the server since it comes with some bare minimum of python packages.", "This will be our bootstrap file:", "This bootstrap script will be the first item run when our server is set up.", "We now have our set-up script, and a basic data processing script. We\u2019re almost ready to run our code. We need to make sure our scripts can read from, and write to, S3 buckets.", "We\u2019re going to add a policy to the default roles that allows that. What does that mean? Well, when we create an EMR cluster, a collection of computers to do processing for us, we assign a role to that cluster, meaning we give it some privileges to do things like install libraries in the cluster. It\u2019s like a collection of actions our cluster will be able to do. Hopefully, we created our default roles as instructed. However, those roles don\u2019t include the privilege to interact with S3 buckets that are private. There are two ways around that:", "Navigating to the IAM console in AWS, we will find a list of all available roles:", "We will then click on each of the default roles, and select to add an inline policy", "Then we will add full read and write policies to our roles as follows:", "We can actually be much more specific with our policy and how the roles we have can interact with our S3 buckets. Now we will just pick Any for all four resource groups (accesspoints, buckets, jobs, and objects) and we can review the policy and approve it.", "More strict conditions should be chosen if the need is there.", "What we\u2019re going to do for this demo will require a large amount of RAM on our machine, more than the default values allow. So we\u2019ll have to create a configuration file which will help us circumvent that problem.", "As a general rule, big data is not usually loaded to RAM entirely but is interacted with using either HIVE, or Spark. However, to compare Spark to our classic machine learning methods, we will rebel and load a large chunk of data to RAM.", "Let\u2019s create a config file on our local machine named config.json. The config file will look as follows:", "It deals with our resource manager, YARN (Yet Another Resource Negotiator), and tells us how much memory can be allocated, for our entire application, as well as telling YARN not to check for violations on memory (only a small chunk of the entire memory will be allocated for our Python script, so we need to stop checking for violations outside of that small chunk).", "Again, this is done for the purposes of the comparison of our base sklearn Decision Tree and isn\u2019t a way big data would be handled.", "We are going to have to create a key-pair from the EC2 dashboard and download it to our computer", "Once you have the key-pair download, you will have to make it readable by running the command", "On the file using Terminal (Mac) or Git-Bash (Windows). This allows you to later connect to the instance you spun up (if it is operating).", "Finally, the moment we\u2019ve been waiting for. Using AWSCLI, from the comfort of our home, we will launch a cluster to do some work for us. To do so, we will run the following command:", "This command has a lot of stuff so let\u2019s unpack the important items:", "After typing the command on my machine, it took about 2 seconds for the cluster to launch, and another 12 minutes for it to finish everything I asked and terminate. When checking the logs on the S3 bucket, the decision tree classifier reports having run for 8 minutes doing its fitting and predicting.", "So far we\u2019ve launched a single node to do some processing for us, and mind you, we\u2019ve gained from using a machine stronger than a home laptop. The code for our analysis using sklearn is now running on a powerful computer for ~12 minutes.While this cluster isn\u2019t doing much yet in the realm of distributed computation, we\u2019ve set the ground work to see Spark in action. I\u2019ve mentioned Spark a few times here, and in the next post, I will finally showcase this framework in action on the same data we explored with our decision tree.", "I want to stop and talk a bit about costs here. One of the biggest friction points to practicing and honing AWS skills is the fact that in a world where most data science info and skills are free (free datasets from Kaggle, free programming tools such as Python and R), AWS costs money, and it\u2019s not entirely clear how much until you get the bill the day after.While learning and experimenting on the path to getting this setup right, I\u2019ve spun (set up) and tore down more than 100 clusters, and up to that point my total bill has been about $1 for signing up to AWS, plus under $5 for all those clusters. My cheap bills up to that point are largely due to the fact each of my \u201cclusters\u201d had only one instance in it (--instance-count 1), and the fact I practiced most spin up and tear down using a cluster of type m5.xlarge. I reduced the size of the dataframe to prototype and only eventually prototyped on the m5.2xlarge.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "I\u2019ve received my PhD in computing science from Simon Fraser University in 2018, and have since been dedicated to a life-long learning of data science and ML"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F83035b4f6d03&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fend-to-end-quantitative-trading-automating-ml-using-awscli-83035b4f6d03&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fend-to-end-quantitative-trading-automating-ml-using-awscli-83035b4f6d03&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fend-to-end-quantitative-trading-automating-ml-using-awscli-83035b4f6d03&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fend-to-end-quantitative-trading-automating-ml-using-awscli-83035b4f6d03&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----83035b4f6d03--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----83035b4f6d03--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@boris.shabash?source=post_page-----83035b4f6d03--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@boris.shabash?source=post_page-----83035b4f6d03--------------------------------", "anchor_text": "Boris Shabash"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F8d008f0ff99&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fend-to-end-quantitative-trading-automating-ml-using-awscli-83035b4f6d03&user=Boris+Shabash&userId=8d008f0ff99&source=post_page-8d008f0ff99----83035b4f6d03---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F83035b4f6d03&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fend-to-end-quantitative-trading-automating-ml-using-awscli-83035b4f6d03&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F83035b4f6d03&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fend-to-end-quantitative-trading-automating-ml-using-awscli-83035b4f6d03&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://www.pexels.com/@kevin-ku-92347?utm_content=attributionCopyText&utm_medium=referral&utm_source=pexels", "anchor_text": "Kevin Ku"}, {"url": "https://www.pexels.com/photo/coding-computer-data-depth-of-field-577585/?utm_content=attributionCopyText&utm_medium=referral&utm_source=pexels", "anchor_text": "Pexels"}, {"url": "https://towardsdatascience.com/tagged/building-an-aws-pipeline", "anchor_text": "Building an AWS pipeline"}, {"url": "https://towardsdatascience.com/end-to-end-quantitative-trading-part-1-798dcfeb165a", "anchor_text": "previous post"}, {"url": "https://towardsdatascience.com/production-data-processing-with-apache-spark-96a58dfd3fe7", "anchor_text": "post here by Brent Lemieux"}, {"url": "https://docs.aws.amazon.com/general/latest/gr/rande.html", "anchor_text": "this page"}, {"url": "https://towardsdatascience.com/production-data-processing-with-apache-spark-96a58dfd3fe7", "anchor_text": "Brent Lemieux\u2019s post"}, {"url": "https://gist.github.com/bshabashFD/dc7cf0fa4eb20273c003cd55fc148fbe", "anchor_text": "here"}, {"url": "https://gist.github.com/bshabashFD/80fec67dfc10c19e6eff38ed3fbb13f6", "anchor_text": "download here"}, {"url": "https://medium.com/tag/building-an-aws-pipeline?source=post_page-----83035b4f6d03---------------building_an_aws_pipeline-----------------", "anchor_text": "Building An Aws Pipeline"}, {"url": "https://medium.com/tag/data-science?source=post_page-----83035b4f6d03---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/big-data?source=post_page-----83035b4f6d03---------------big_data-----------------", "anchor_text": "Big Data"}, {"url": "https://medium.com/tag/aws?source=post_page-----83035b4f6d03---------------aws-----------------", "anchor_text": "AWS"}, {"url": "https://medium.com/tag/towards-data-science?source=post_page-----83035b4f6d03---------------towards_data_science-----------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F83035b4f6d03&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fend-to-end-quantitative-trading-automating-ml-using-awscli-83035b4f6d03&user=Boris+Shabash&userId=8d008f0ff99&source=-----83035b4f6d03---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F83035b4f6d03&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fend-to-end-quantitative-trading-automating-ml-using-awscli-83035b4f6d03&user=Boris+Shabash&userId=8d008f0ff99&source=-----83035b4f6d03---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F83035b4f6d03&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fend-to-end-quantitative-trading-automating-ml-using-awscli-83035b4f6d03&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----83035b4f6d03--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F83035b4f6d03&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fend-to-end-quantitative-trading-automating-ml-using-awscli-83035b4f6d03&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----83035b4f6d03---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----83035b4f6d03--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----83035b4f6d03--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----83035b4f6d03--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----83035b4f6d03--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----83035b4f6d03--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----83035b4f6d03--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----83035b4f6d03--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----83035b4f6d03--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@boris.shabash?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@boris.shabash?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Boris Shabash"}, {"url": "https://medium.com/@boris.shabash/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "211 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F8d008f0ff99&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fend-to-end-quantitative-trading-automating-ml-using-awscli-83035b4f6d03&user=Boris+Shabash&userId=8d008f0ff99&source=post_page-8d008f0ff99--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F4dfac71a59d7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fend-to-end-quantitative-trading-automating-ml-using-awscli-83035b4f6d03&newsletterV3=8d008f0ff99&newsletterV3Id=4dfac71a59d7&user=Boris+Shabash&userId=8d008f0ff99&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}