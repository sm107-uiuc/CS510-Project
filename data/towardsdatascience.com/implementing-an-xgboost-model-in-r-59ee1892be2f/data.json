{"url": "https://towardsdatascience.com/implementing-an-xgboost-model-in-r-59ee1892be2f", "time": 1683014678.142478, "path": "towardsdatascience.com/implementing-an-xgboost-model-in-r-59ee1892be2f/", "webpage": {"metadata": {"title": "Implementing an XGBoost Model in R | by Michael Grogan | Towards Data Science", "h1": "Implementing an XGBoost Model in R", "description": "In this example, an XGBoost model is built in R to predict incidences of customers cancelling their hotel booking. The analysis is based on data from Antonio, Almeida and Nunes (2019): Hotel booking\u2026"}, "outgoing_paragraph_urls": [{"url": "https://www.sciencedirect.com/science/article/pii/S2352340918315191", "anchor_text": "Antonio, Almeida and Nunes (2019): Hotel booking demand datasets", "paragraph_index": 0}, {"url": "https://datascience.stackexchange.com/questions/12318/how-to-interpret-the-output-of-xgboost-importance", "anchor_text": "StackExchange", "paragraph_index": 16}, {"url": "http://michael-grogan.com", "anchor_text": "michael-grogan.com", "paragraph_index": 28}], "all_paragraphs": ["In this example, an XGBoost model is built in R to predict incidences of customers cancelling their hotel booking. The analysis is based on data from Antonio, Almeida and Nunes (2019): Hotel booking demand datasets.", "The H1 dataset is used for training and validation, while H2 is used for testing purposes.", "In order to predict customers that will cancel their booking (where variable IsCanceled = 1 means a cancellation, and IsCanceled = 0 means the customer follows through with the booking), an XGBoost model is built in R with the following features:", "In order to make the data suitable for analysis with the XGBoost model in R \u2014 some data manipulation procedures are required.", "Firstly, the xgboost and Matrix libraries are loaded:", "A data frame of features is formed through defining the variables as.numeric, and also defining in factor format where appropriate. The data frame is then converted into Matrix format.", "The labels (IsCanceled) is defined as a factor.", "However, R labels the 0 values as 1 with the 1 values labelled as 2.", "In order for the data to work with XGBoost, 0 and 1 labels must be defined.", "Therefore, the label values are replaced accordingly as follows:", "The training and validation sets are split, and each is defined as a dgCMatrix \u2014 which is a special type of matrix that works with the XGBoost model in R.", "The boosting model is defined and predictions are generated:", "Here are the training and validation errors:", "From the above output, we can see that the validation error of 0.12 is significantly lower than the two reported training errors of 0.25 and 0.22.", "An importance matrix is also generated to identify the most important influencing factors on hotel cancellations:", "Here is a more detailed look at the importance matrix:", "As elaborated in the following StackExchange post \u2014 gain, cover and frequency illustrate the following:", "The gain is the most important feature in assessing the relative contribution of a feature to the model. With a gain of 0.35 for the country variable, this is indicated as the most important feature in the model, i.e. a customer\u2019s country of origin will have a significant impact in determining whether or not they ultimately cancel their hotel booking.", "From looking at the training and validation errors, it looks as though the model may have performed quite well in predicting cancellations for this particular validation set, but there is no guarantee that it will do so on other datasets.", "For this reason, a separate test set (H2) is used to verify if the XGBoost model will still perform well in predicting cancellation incidences.", "The variables across the H2 set are defined once again:", "The XGBoost model built using the H1 dataset is now used to incorporate the feature data across H2:", "Here is the yielded test error:", "The test error of 0.27 is higher than the validation error of 0.12, which we would reasonably expect when predicting new data.", "That said, the original training errors of 0.25 and 0.22 are just slightly lower than the test error \u2014 indicating that the model does not show evidence of overfitting. Should we encounter a situation where the training error is much lower than the test error \u2014 then this is clearly a problem as it indicates that the model performs well in predicting the data used to build the model but not new data.", "In this example, you have seen how to run an XGBoost model with R.", "Many thanks for reading, and any questions or feedback are greatly appreciated. You can find the relevant repository for this example with the R code and dataset, as well as other useful references below.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Data Science Consultant with expertise in economics, time series analysis, and Bayesian methods | michael-grogan.com"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F59ee1892be2f&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fimplementing-an-xgboost-model-in-r-59ee1892be2f&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fimplementing-an-xgboost-model-in-r-59ee1892be2f&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fimplementing-an-xgboost-model-in-r-59ee1892be2f&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fimplementing-an-xgboost-model-in-r-59ee1892be2f&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----59ee1892be2f--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----59ee1892be2f--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://mgcodesandstats.medium.com/?source=post_page-----59ee1892be2f--------------------------------", "anchor_text": ""}, {"url": "https://mgcodesandstats.medium.com/?source=post_page-----59ee1892be2f--------------------------------", "anchor_text": "Michael Grogan"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Feec017a8b178&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fimplementing-an-xgboost-model-in-r-59ee1892be2f&user=Michael+Grogan&userId=eec017a8b178&source=post_page-eec017a8b178----59ee1892be2f---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F59ee1892be2f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fimplementing-an-xgboost-model-in-r-59ee1892be2f&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F59ee1892be2f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fimplementing-an-xgboost-model-in-r-59ee1892be2f&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://pixabay.com/users/janjf93-3084263/", "anchor_text": "janjf93"}, {"url": "https://pixabay.com/vectors/interface-internet-program-browser-3614766/", "anchor_text": "Pixabay"}, {"url": "https://www.sciencedirect.com/science/article/pii/S2352340918315191", "anchor_text": "Antonio, Almeida and Nunes (2019): Hotel booking demand datasets"}, {"url": "https://datascience.stackexchange.com/questions/12318/how-to-interpret-the-output-of-xgboost-importance", "anchor_text": "StackExchange"}, {"url": "https://www.sciencedirect.com/science/article/pii/S2352340918315191", "anchor_text": "Antonio, Almeida and Nunes (2019): Hotel booking demand datasets"}, {"url": "https://datascience.stackexchange.com/questions/12318/how-to-interpret-the-output-of-xgboost-importance", "anchor_text": "Data Science StackExchange: How to interpret the output of XGBoost importance?"}, {"url": "https://github.com/MGCodesandStats/hotel-modelling", "anchor_text": "GitHub: MGCodesandStats/hotel-modelling"}, {"url": "https://xgboost.readthedocs.io/en/latest/R-package/xgboostPresentation.html", "anchor_text": "XGBoost Documentation: XGBoost R Tutorial"}, {"url": "https://medium.com/tag/data-science?source=post_page-----59ee1892be2f---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----59ee1892be2f---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/tag/rstats?source=post_page-----59ee1892be2f---------------rstats-----------------", "anchor_text": "Rstats"}, {"url": "https://medium.com/tag/r-programming?source=post_page-----59ee1892be2f---------------r_programming-----------------", "anchor_text": "R Programming"}, {"url": "https://medium.com/tag/boosting?source=post_page-----59ee1892be2f---------------boosting-----------------", "anchor_text": "Boosting"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F59ee1892be2f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fimplementing-an-xgboost-model-in-r-59ee1892be2f&user=Michael+Grogan&userId=eec017a8b178&source=-----59ee1892be2f---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F59ee1892be2f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fimplementing-an-xgboost-model-in-r-59ee1892be2f&user=Michael+Grogan&userId=eec017a8b178&source=-----59ee1892be2f---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F59ee1892be2f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fimplementing-an-xgboost-model-in-r-59ee1892be2f&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----59ee1892be2f--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F59ee1892be2f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fimplementing-an-xgboost-model-in-r-59ee1892be2f&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----59ee1892be2f---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----59ee1892be2f--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----59ee1892be2f--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----59ee1892be2f--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----59ee1892be2f--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----59ee1892be2f--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----59ee1892be2f--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----59ee1892be2f--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----59ee1892be2f--------------------------------", "anchor_text": ""}, {"url": "https://mgcodesandstats.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://mgcodesandstats.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Michael Grogan"}, {"url": "https://mgcodesandstats.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "1.5K Followers"}, {"url": "http://michael-grogan.com", "anchor_text": "michael-grogan.com"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Feec017a8b178&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fimplementing-an-xgboost-model-in-r-59ee1892be2f&user=Michael+Grogan&userId=eec017a8b178&source=post_page-eec017a8b178--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F3c6e2607915&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fimplementing-an-xgboost-model-in-r-59ee1892be2f&newsletterV3=eec017a8b178&newsletterV3Id=3c6e2607915&user=Michael+Grogan&userId=eec017a8b178&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}