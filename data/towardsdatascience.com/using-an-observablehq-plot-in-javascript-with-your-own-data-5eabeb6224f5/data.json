{"url": "https://towardsdatascience.com/using-an-observablehq-plot-in-javascript-with-your-own-data-5eabeb6224f5", "time": 1683016166.354455, "path": "towardsdatascience.com/using-an-observablehq-plot-in-javascript-with-your-own-data-5eabeb6224f5/", "webpage": {"metadata": {"title": "Using ObservableHQ in JavaScript with your own data. | by Daniel Ellis Research | Towards Data Science", "h1": "Using ObservableHQ in JavaScript with your own data.", "description": "Bespoke data visualisation with custom data and very little coding knowledge."}, "outgoing_paragraph_urls": [{"url": "https://observablehq.com/explore", "anchor_text": "ObservableHQ", "paragraph_index": 0}, {"url": "https://pages.github.com", "anchor_text": "github.io", "paragraph_index": 9}, {"url": "https://d3js.org", "anchor_text": "Data Driven Documents (d3)", "paragraph_index": 23}], "all_paragraphs": ["Most people struggle to pick up a new programming language and immediately make use of it. So what happens when you see a cool Web visualisation, and want to adapt the code for it \u2014 Hint: that is where ObservableHQ comes in.", "Observable notebooks allow users to take existing code and tweak only the parameters they are interested in and producing a custom visualisation tailored to their specific needs. This article aims to describe the process in which you can select a visualisation from the many available at Observable, apply your own data, and place them on your own website.", "In this tutorial we will be using an adapted version of Mike Bostocks World Airports Delaunay plot;", "and load it into a webpage.", "Conveniently the wonderful people at ObservableHQ have provided a user-friendly API which we can exploit \u2014 saving us needing to manually copy any code. As a start, we can use the following script substituting the relevant observable user and notebook names.", "Note: It is possible to do this in one step with import define from 'https://api.observablehq.com/@wolfiex/pyobservable-example.js?v=3' or to download the notebook and'./mynotebook.js' instead of the URL.", "The final thing we need to do is to import the runtime module which will be used to run our observable script. Here we add", "to the top of the script and", "after our definition of define within the run function.", "To view the output we can either upload our code to an online platform (e.g. github.io) or run a local server. The latter can be done through the use of node, electron or python if you have it installed.", "If using python you can start a simple server and navigate to the localhost URL address 127.0.0.1:8000 .", "So far we have embedded all the cells of the observable notebook, resulting in the unwieldy example below:", "Here in the interest of presentability we only wish to display the image \"chart\" and the slider \"rotate\" . To do this we change the new Runtime command within our run function.", "We begin by only displaying the \u2018chart\u2019 itself. This is done by replacing the runtime code with the snippet below.", "Many uses for visualisation in industry rely on the creation of dashboards. Here a page is split up into many sections each presenting a different bit of information. In this example, we start by creating a new div element and placing it below the <body> tag (not in the script).", "The styling here tells it that it can take the whole screen and sit in front of other DOM elements. By default, this will be on the left-hand side.", "We now update the runtime code to include the rotation slider (viewof rotate). For the sake of readability, we use a switch statement in place of multiple if statements.", "Here viewof rotate is placed within the element withid = 'topmost' instead of the main body. This produces the output below, where our slider is no longer presented underneath the chart.", "We have obtained a set of visualisations and placed them across our webpage \u2014 but how do we change their inputs to match our own data?", "In forking the notebook, we initially made some changes in the preparation of this tutorial. One of these was the introduction of a fillcolour cell to determine the colour of each circle. We begin by exploring how to change this, and then move on to supplying additional data.", "We start by assigning the new runtime command to a variable name \u2014 we shall name this main :", "We can now change the value of the fillcolour variable using the following code:", "As it stands, the data used for the plot has been uploaded to the ObservableHQ servers. Instead, we may wish to use our own data within the visualisation. In the following example, we have download theairports.csv file locally (see the points cell for the URL) and will read it in and edit it before updating the chart output.", "For simplicity, we use the Data Driven Documents (d3) library to read the CSV fiel.", "This is already used within the notebook, and therefore can be extracted within the Runtime segment of the code. Alternatively, it can be imported with the following script:", "We are now able to load the file and update the points cell of the notebook. To do this we define a \u2018parse\u2019 function to process the data read from a CSV.", "To distinguish between datasets, we also add a random component to the longitude and take 70% of the latitude values before pushing the processed data intopoints using the main.redefine function.", "And as with any good code we actually need to run it. This can be done with:", "Sometimes all we may be interested in is extracting the value of a mutable variable each time it changes during a calculation/simulation. Here rather than returning an element for display we can get back a number of functions:", "Where each of the above functions are defined as:", "In this section, we wish to apply styling which has not been defined within the observable notebook. For example, if wanted to move the rotation slider to the right-hand side, I may begin with defining a section of CSS to do so within the HTML page:", "Next, we need to tell the imported element that it belongs to this class. To do so we change our Inspector statement within the switch as follows.", "Here we have broken out the element returned by the inspector and have full access to all its attributes. Although we can access the styling components directly through item._node.style if we have multiple changes, or wish to apply the same change to many items, it is often easier just to define a class.", "And there we have it a fully live observable notebook, which we have adapted to our own webpage.", "In this tutorial we have taken a visualisation we are interested in, made a copy of it, and then embed it within a personal website and changed the variables/data within it.", "For more information on observable notebooks or javascript have a look at the information section in the documentation:", "The code used for each example can be found on the link below. This can be run using node (if installed) usingnpm i;npm start or seen using the GitHub links within this article.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Research Software Engineer specialising in High-Performance Computing and Data Visualisation. \u2014 PhD in Atmospheric Chemistry and Masters in Theoretical Physics."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F5eabeb6224f5&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-an-observablehq-plot-in-javascript-with-your-own-data-5eabeb6224f5&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-an-observablehq-plot-in-javascript-with-your-own-data-5eabeb6224f5&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-an-observablehq-plot-in-javascript-with-your-own-data-5eabeb6224f5&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-an-observablehq-plot-in-javascript-with-your-own-data-5eabeb6224f5&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----5eabeb6224f5--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----5eabeb6224f5--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://daniel-ellis.medium.com/?source=post_page-----5eabeb6224f5--------------------------------", "anchor_text": ""}, {"url": "https://daniel-ellis.medium.com/?source=post_page-----5eabeb6224f5--------------------------------", "anchor_text": "Daniel Ellis Research"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F5e126beaa2dc&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-an-observablehq-plot-in-javascript-with-your-own-data-5eabeb6224f5&user=Daniel+Ellis+Research&userId=5e126beaa2dc&source=post_page-5e126beaa2dc----5eabeb6224f5---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F5eabeb6224f5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-an-observablehq-plot-in-javascript-with-your-own-data-5eabeb6224f5&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F5eabeb6224f5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-an-observablehq-plot-in-javascript-with-your-own-data-5eabeb6224f5&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://observablehq.com/explore", "anchor_text": "ObservableHQ"}, {"url": "https://observablehq.com/@wolfiex/pyobservable-example", "anchor_text": "PyObservable ExamplePyObservable Example Fork: World Airports Delaunay Ref. @fil/geo-delaunay Ref. jasondavies.com/maps/voronoi/airportsobservablehq.com"}, {"url": "https://api.observablehq.com/@${user}/${nbk}.js?v=3`", "anchor_text": "https://api.observablehq.com/@${user}/${nbk}.js?v=3`"}, {"url": "https://cdn.jsdelivr.net/npm/@observablehq/runtime@4/dist/runtime.js", "anchor_text": "https://cdn.jsdelivr.net/npm/@observablehq/runtime@4/dist/runtime.js"}, {"url": "https://pages.github.com", "anchor_text": "github.io"}, {"url": "https://wolfiex.github.io/ObservableTutorial/base_import.html", "anchor_text": "https://wolfiex.github.io/ObservableTutorial/base_import.html"}, {"url": "https://wolfiex.github.io/ObservableTutorial/selected_display.html", "anchor_text": "https://wolfiex.github.io/ObservableTutorial/selected_display.html"}, {"url": "https://d3js.org", "anchor_text": "Data Driven Documents (d3)"}, {"url": "https://wolfiex.github.io/ObservableTutorial/local_data.html", "anchor_text": "https://wolfiex.github.io/ObservableTutorial/local_data.html"}, {"url": "https://observablehq.com/collection/@observablehq/observable-documentation", "anchor_text": "DocumentationExplore and visualize data. Share and publish your insights. Discover and be inspired.observablehq.com"}, {"url": "https://github.com/wolfiex/ObservableTutorial/blob/main/base_import.html", "anchor_text": "wolfiex/ObservableTutorialMaterials for the medium article describing how to embed an observable notebook into a web page/ \u2026github.com"}, {"url": "https://observablehq.com/@observablehq/downloading-and-embedding-notebooks", "anchor_text": "Advanced Embedding and DownloadingA notebook is a portable module that can integrate with an application\u2019s data and UI. Illustration: ClipArt ETC So\u2026observablehq.com"}, {"url": "https://github.com/observablehq/runtime", "anchor_text": "observablehq/runtimeThe Observable runtime lets you run Observable notebooks as true reactive programs in any JavaScript environment: on\u2026github.com"}, {"url": "https://medium.com/tag/observablehq?source=post_page-----5eabeb6224f5---------------observablehq-----------------", "anchor_text": "Observablehq"}, {"url": "https://medium.com/tag/d3js?source=post_page-----5eabeb6224f5---------------d3js-----------------", "anchor_text": "D3js"}, {"url": "https://medium.com/tag/visualization?source=post_page-----5eabeb6224f5---------------visualization-----------------", "anchor_text": "Visualization"}, {"url": "https://medium.com/tag/javascript?source=post_page-----5eabeb6224f5---------------javascript-----------------", "anchor_text": "JavaScript"}, {"url": "https://medium.com/tag/towards-data-science?source=post_page-----5eabeb6224f5---------------towards_data_science-----------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F5eabeb6224f5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-an-observablehq-plot-in-javascript-with-your-own-data-5eabeb6224f5&user=Daniel+Ellis+Research&userId=5e126beaa2dc&source=-----5eabeb6224f5---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F5eabeb6224f5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-an-observablehq-plot-in-javascript-with-your-own-data-5eabeb6224f5&user=Daniel+Ellis+Research&userId=5e126beaa2dc&source=-----5eabeb6224f5---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F5eabeb6224f5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-an-observablehq-plot-in-javascript-with-your-own-data-5eabeb6224f5&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----5eabeb6224f5--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F5eabeb6224f5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-an-observablehq-plot-in-javascript-with-your-own-data-5eabeb6224f5&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----5eabeb6224f5---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----5eabeb6224f5--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----5eabeb6224f5--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----5eabeb6224f5--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----5eabeb6224f5--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----5eabeb6224f5--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----5eabeb6224f5--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----5eabeb6224f5--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----5eabeb6224f5--------------------------------", "anchor_text": ""}, {"url": "https://daniel-ellis.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://daniel-ellis.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Daniel Ellis Research"}, {"url": "https://daniel-ellis.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "335 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F5e126beaa2dc&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-an-observablehq-plot-in-javascript-with-your-own-data-5eabeb6224f5&user=Daniel+Ellis+Research&userId=5e126beaa2dc&source=post_page-5e126beaa2dc--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F96febf952620&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-an-observablehq-plot-in-javascript-with-your-own-data-5eabeb6224f5&newsletterV3=5e126beaa2dc&newsletterV3Id=96febf952620&user=Daniel+Ellis+Research&userId=5e126beaa2dc&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}