{"url": "https://towardsdatascience.com/assembling-a-personal-data-science-big-data-laboratory-in-a-raspberry-pi-4-or-vms-cluster-8a1da8d49b48", "time": 1683009223.233896, "path": "towardsdatascience.com/assembling-a-personal-data-science-big-data-laboratory-in-a-raspberry-pi-4-or-vms-cluster-8a1da8d49b48/", "webpage": {"metadata": {"title": "A Data Science/Big Data Laboratory \u2014 part 3 of 4: Hive and Postgres over Ubuntu in a 3-node cluster | by Pier Taranti | Towards Data Science", "h1": "A Data Science/Big Data Laboratory \u2014 part 3 of 4: Hive and Postgres over Ubuntu in a 3-node cluster", "description": "This text can be used to support the installation in any Ubuntu 20.04 server clusters, and this is the beauty of well-designed layered software. Furthermore, if you have more nodes, you can\u2026"}, "outgoing_paragraph_urls": [{"url": "https://kontext.tech/column/hadoop/303/hiveserver2-cannot-connect-to-hive-metastore-resolutionsworkarounds", "anchor_text": "HiveServer2 Cannot Connect to Hive Metastore Resolutions/Workarounds", "paragraph_index": 61}], "all_paragraphs": ["This text can be used to support the installation in any Ubuntu 20.04 server clusters, and this is the beauty of well-designed layered software. Furthermore, if you have more nodes, you can distribute the software as you like. The text assumes you know Linux command line, including ssh, vim, and nano.", "I do not recommend starting with less than three Raspberries since you need to set the communication, and both Zookeeper and Kafka requires an odd number of nodes. If you are trying a single node this guide may be used. Still, the performance is likely to be disappointing in a Raspberry \u2014 for single node I suggest a virtual machine with a reasonable amount of RAM and processor.", "Due to size, I had to divide the tutorial into four parts :", "All configuration files are available at [1]:", "Disclaimer: This text is offered to everyone for free to use at your own risk. I took care in citing all my sources, but if you feel that something is missed, please send me a note. Since different software versions may behaviour in a distinct way due to their dependencies, I suggest using the same versions I used in your first try.", "I decided to install a mature relational database in the cluster, what is a sensible decision if you are to play with data. I opted by PostgreSQL mainly because of the mature support to GIS (I use GIS data). I placed it in node 3 since node 1 has Spark \u2014 to distribute the workload.", "I will install Hive and it couples well with PostgreSQL also, as well with MySQL and others.", "You will find several tutorials on how to install PostgreSQL, and massive documentation.", "I have experience in PostgreSQL but followed the tutorial in", "You will need to edit the following files", "I know that I was lazy and configured the PostgreSQL in a quasi \u2014 permissive way. Feel free to update, but I suggest you enforcing security only after all cluster is running without issues.", "You may want to change the sets on", "This informs PostgreSQL to listen in all network interfaces in the host.", "For convenience, I changed the password of postgres to postgres (I know it is dumb.. this is a lab, not a production environment):", "For your convenience, I left my config files in GitHub also (see on pi3)", "I set the database to be accessed by the application user/password.", "I like using the visual pgadmin4 from a windows machine to administrate the database. This tool can be installed in your notebook and used remotely:", "Note \u2014 following the default Ubuntu installer for PostgreSQL, the database manager service will start automatically on every reboot.", "Raspberry clusters tutorials I found do not discuss hive installation.", "For a better understanding on Hive I suggest the project wiki page:", "Note: Hive requires Hadoop being executed. Before starting Hive, you need to run:", "I should say that installing Hive was painful! I had already installed it in local with Derby, which is more or less straight. But I decided to distribute the environment as a production one should be:", "I instantiated a metastore database in the PostgreSQL server. A hive metastore sever connects to the database and receives connections from hiveservers2. The hiveserver2 is assessed by CLI, beeline and has a webUI.", "The hive architecture escalates very well, allowing many hiveserver and metastore. Users can connect over the network and submit their queries.", "The worst part of installing Hive in a distributed environment was that I did not find any updated tutorial in the documentation, or on the books I checked. But in the end, all worked. I will describe how to install Hive distributing the installation.", "Hive is provided in a full bundle with all functionalities. Take care in choosing the correct hive version for your Hadoop installation.", "Adding at the end of the file:", "Create the data warehouse on Hadoop filesystem:", "There is a conflict caused by library versions. Delete the guava from hive and copy the newer available in Hadoop:", "I prepared only one installation from hive and distributed it by node 1 and 2 (pi1 and pi2). The hiveserver2 will be started in pi1 and the hive-metastore in pi2 (but the config files are exactly the same).", "The configuration files must be created in:", "Note \u2014 the javax.jdo.option.ConnectionURL must point to your PostgreSQL database. I have it installed at pi3 (192.168.1.13)", "Note \u2014 the hive.metastore.uris must point to your hive metastore servers. I have my one installed at pi2 (192.168.1.12)", "Download the JDBC driver from PostgreSQL site", "Note \u2014 this is the current version, you should install the more update.", "I have installed the pgAdmin4 in my windows notebook and connected to the PostgreSQL.", "I used the pgAdmin4 GUI to execute these steps:", "First, create a new role hive with password hive (this information was used in the hivemetastore-site.xml configuration).", "After this, you need to create a new database called \u2018metastore\u2019, with user \u2018hive\u2019 as owner.", "This procedure will read the hivemetastore-site.xml to learn the connection information \u2014 IP, port, user, password, database name.", "You can check the new database on pgAdmin4 interface ou using pgsql in the command line.", "Please, refer to the final version of the .bashrc in the GitHub.", "I faced a nightmare when connecting the hiveserver2 to the hive-metastore. In the end, I successfully implemented the workaround suggested in:", "This webpage describes errors that occur because of a new authentication feature inserted in Hive 3.X for HiveServer2 client. When starting HiveServer2 service (Hive version 3.0.0).", "The suggested workaround requires to amend the proxyuser property in the file core-site.xml at Hadoop (in all nodes).", "This is reflected in the GitHub.", "Note: if things go wrong, you may need to explore the errors and services. You should consider installing the netstat, to be able to check the ports that are listening in each server.", "Now you must copy the installation to the nodes you intend to run hiveserver2, hivemetastore, and to where you would like to execute CLI (Beeline). I copied to all 3 nodes.", "In my installation, as I said before, I am using hiveserver2 in pi1 and hivemetastore in pi2. Note that the configuration files for hiveserver2 and metastore are self-contained. When starting these services, you provide parameters indicating which one you intend to start. As an example, when stating hiveserver2, Hive does not read the hivemetastore-site.xml file. Thus, it is safe for us to save both configurations in the same folder and distribute the installation.", "To copy Hive installation to the other nodes:", "You need to start Hadoop and yarn first (start-dfs.sh and start-yarn.sh) and the postgres!!!", "Initially, I prefer to start services with the verbose log; this is helpful to see if everything goes well and to learn how Hive works at the background. Please, note that both hive-metastore and hiveserver2 will require individual terminals, and a third terminal will be necessary for beeline.", "You should start first the hive-metastore.", "After initializing the hive-metastore, you should start the hiveserver2.", "You can start without the verbose log with the command hiveserver2", "After initializing this services, you can check it with jps and netstat commands.", "Now you can run beeline to check if everything goes well. I tested from pi3:", "First, start beeline and connect to the hiveserver", "Now you can access the databases in hive", "And see the tables. Hive CLI is similar to SQL.", "Hiveserver2 has a default webUI available on port 10002:", "[2] R. Tang. HiveServer2 Cannot Connect to Hive Metastore Resolutions/Workarounds (2018)", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Data scientist, PhD, experienced team leader and co-worker; result-oriented professional \u2014 always learning."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F8a1da8d49b48&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fassembling-a-personal-data-science-big-data-laboratory-in-a-raspberry-pi-4-or-vms-cluster-8a1da8d49b48&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fassembling-a-personal-data-science-big-data-laboratory-in-a-raspberry-pi-4-or-vms-cluster-8a1da8d49b48&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fassembling-a-personal-data-science-big-data-laboratory-in-a-raspberry-pi-4-or-vms-cluster-8a1da8d49b48&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fassembling-a-personal-data-science-big-data-laboratory-in-a-raspberry-pi-4-or-vms-cluster-8a1da8d49b48&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----8a1da8d49b48--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----8a1da8d49b48--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@piertaranti?source=post_page-----8a1da8d49b48--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@piertaranti?source=post_page-----8a1da8d49b48--------------------------------", "anchor_text": "Pier Taranti"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fb885a0240a08&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fassembling-a-personal-data-science-big-data-laboratory-in-a-raspberry-pi-4-or-vms-cluster-8a1da8d49b48&user=Pier+Taranti&userId=b885a0240a08&source=post_page-b885a0240a08----8a1da8d49b48---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F8a1da8d49b48&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fassembling-a-personal-data-science-big-data-laboratory-in-a-raspberry-pi-4-or-vms-cluster-8a1da8d49b48&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F8a1da8d49b48&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fassembling-a-personal-data-science-big-data-laboratory-in-a-raspberry-pi-4-or-vms-cluster-8a1da8d49b48&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://towardsdatascience.com/assembling-a-personal-data-science-big-data-laboratory-in-a-raspberry-pi-4-or-vms-cluster-ff37759cb2ec?source=friends_link&sk=3a4b90e57dc0fc0ec44a39d1aee2145c", "anchor_text": "Part 1: Introduction, Operational System and Networking"}, {"url": "https://towardsdatascience.com/assembling-a-personal-data-science-big-data-laboratory-in-a-raspberry-pi-4-or-vms-cluster-e4c5a0473025?source=friends_link&sk=d9588dd1597ee9c0811e82666b002e43", "anchor_text": "Part 2: Hadoop and Spark"}, {"url": "https://towardsdatascience.com/kafka-and-zookeeper-over-ubuntu-in-a-3-node-cluster-a-data-science-big-data-laboratory-part-4-of-4-47631730d240?source=friends_link&sk=955731d942d6f83e7f00d731e830ba30", "anchor_text": "Part 4: Kafka and Conclusion"}, {"url": "https://github.com/ptaranti/RaspberryPiCluster", "anchor_text": "ptaranti/RaspberryPiClusterConfig files for a Hadoop + Spark + Hive + Kafka + Postgresql raspberry cluster (ubuntu 20.04) The files in this\u2026github.com"}, {"url": "https://linuxize.com/post/how-to-install-postgresql-on-ubuntu-18-04/", "anchor_text": "How to Install PostgreSQL on Ubuntu 18.04PostgreSQL or Postgres is an open-source general-purpose object-relational database management system. PostgreSQL has\u2026linuxize.com"}, {"url": "https://github.com/ptaranti/RaspberryPiCluster/blob/master/pi3/etc/postgresql/12/main/pg_hba.conf", "anchor_text": "/etc/postgresql/12/main/pg_hba.conf"}, {"url": "https://github.com/ptaranti/RaspberryPiCluster/blob/master/pi3/etc/postgresql/12/main/postgresql.conf", "anchor_text": "/etc/postgresql/12/main/postgresql.con"}, {"url": "https://www.pgadmin.org/download/", "anchor_text": "DownloadpgAdmin - PostgreSQL Tools for Windows, Mac, Linux and the Webwww.pgadmin.org"}, {"url": "https://cwiki.apache.org/", "anchor_text": "https://cwiki.apache.org"}, {"url": "https://downloads.apache.org/hive/", "anchor_text": "Index of /hiveEdit descriptiondownloads.apache.org"}, {"url": "https://downloads.apache.org/hive/hive-3.1.2/apache-hive-3.1.2-bin.tar.gz", "anchor_text": "https://downloads.apache.org/hive/hive-3.1.2/apache-hive-3.1.2-bin.tar.gz"}, {"url": "https://github.com/ptaranti/RaspberryPiCluster/blob/master/pi1/home/pi/.bashrc", "anchor_text": "/home/pi/.bashrc"}, {"url": "https://github.com/ptaranti/RaspberryPiCluster/blob/master/pi1/opt/hive/conf/hivemetastore-site.xml", "anchor_text": "/opt/hive/conf/ hivemetastore-site.xml"}, {"url": "https://github.com/ptaranti/RaspberryPiCluster/blob/master/pi1/opt/hive/conf/hiveserver2-site.xml", "anchor_text": "/opt/hive/conf/hiveserver2-site.xml"}, {"url": "https://github.com/ptaranti/RaspberryPiCluster/blob/master/pi1/opt/hive/conf/hive-env.sh", "anchor_text": "/opt/hive/conf/hive-env.sh"}, {"url": "https://jdbc.postgresql.org/download.html", "anchor_text": "https://jdbc.postgresql.org/download.html"}, {"url": "http://www.slf4j.org/codes.html#multiple_bindings", "anchor_text": "http://www.slf4j.org/codes.html#multiple_bindings"}, {"url": "https://github.com/ptaranti/RaspberryPiCluster/blob/master/pi1/home/pi/.bashrc", "anchor_text": "/home/pi/.bashrc"}, {"url": "https://kontext.tech/column/hadoop/303/hiveserver2-cannot-connect-to-hive-metastore-resolutionsworkarounds", "anchor_text": "HiveServer2 Cannot Connect to Hive Metastore Resolutions/WorkaroundsSince Hive 3.x, new authentication feature for HiveServer2 client is added. When starting HiveServer2 service (Hive\u2026kontext.tech"}, {"url": "http://www.slf4j.org/codes.html#multiple_bindings", "anchor_text": "http://www.slf4j.org/codes.html#multiple_bindings"}, {"url": "http://pi1:10002/", "anchor_text": "http://pi1:10002/"}, {"url": "https://towardsdatascience.com/kafka-and-zookeeper-over-ubuntu-in-a-3-node-cluster-a-data-science-big-data-laboratory-part-4-of-4-47631730d240", "anchor_text": "A Data Science/Big Data Laboratory -part 4 of 4: Kafka and Zookeeper over Ubuntu in a 3-node\u2026Assembling a Data Science/Big Data Laboratory in a Raspberry Pi 4 or VMs cluster with Hadoop, Spark, Hive, Kafka\u2026towardsdatascience.com"}, {"url": "https://github.com/ptaranti/RaspberryPiCluster", "anchor_text": "https://github.com/ptaranti/RaspberryPiCluster"}, {"url": "https://kontext.tech/column/hadoop/303/hiveserver2-cannot-connect-to-hive-metastore-resolutionsworkarounds", "anchor_text": "HiveServer2 Cannot Connect to Hive Metastore Resolutions/Workarounds"}, {"url": "https://medium.com/tag/cluster?source=post_page-----8a1da8d49b48---------------cluster-----------------", "anchor_text": "Cluster"}, {"url": "https://medium.com/tag/hive?source=post_page-----8a1da8d49b48---------------hive-----------------", "anchor_text": "Hive"}, {"url": "https://medium.com/tag/spark?source=post_page-----8a1da8d49b48---------------spark-----------------", "anchor_text": "Spark"}, {"url": "https://medium.com/tag/hadoop?source=post_page-----8a1da8d49b48---------------hadoop-----------------", "anchor_text": "Hadoop"}, {"url": "https://medium.com/tag/kafka?source=post_page-----8a1da8d49b48---------------kafka-----------------", "anchor_text": "Kafka"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F8a1da8d49b48&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fassembling-a-personal-data-science-big-data-laboratory-in-a-raspberry-pi-4-or-vms-cluster-8a1da8d49b48&user=Pier+Taranti&userId=b885a0240a08&source=-----8a1da8d49b48---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F8a1da8d49b48&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fassembling-a-personal-data-science-big-data-laboratory-in-a-raspberry-pi-4-or-vms-cluster-8a1da8d49b48&user=Pier+Taranti&userId=b885a0240a08&source=-----8a1da8d49b48---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F8a1da8d49b48&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fassembling-a-personal-data-science-big-data-laboratory-in-a-raspberry-pi-4-or-vms-cluster-8a1da8d49b48&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----8a1da8d49b48--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F8a1da8d49b48&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fassembling-a-personal-data-science-big-data-laboratory-in-a-raspberry-pi-4-or-vms-cluster-8a1da8d49b48&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----8a1da8d49b48---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----8a1da8d49b48--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----8a1da8d49b48--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----8a1da8d49b48--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----8a1da8d49b48--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----8a1da8d49b48--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----8a1da8d49b48--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----8a1da8d49b48--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----8a1da8d49b48--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@piertaranti?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@piertaranti?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Pier Taranti"}, {"url": "https://medium.com/@piertaranti/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "26 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fb885a0240a08&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fassembling-a-personal-data-science-big-data-laboratory-in-a-raspberry-pi-4-or-vms-cluster-8a1da8d49b48&user=Pier+Taranti&userId=b885a0240a08&source=post_page-b885a0240a08--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F8b755e2373b9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fassembling-a-personal-data-science-big-data-laboratory-in-a-raspberry-pi-4-or-vms-cluster-8a1da8d49b48&newsletterV3=b885a0240a08&newsletterV3Id=8b755e2373b9&user=Pier+Taranti&userId=b885a0240a08&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}