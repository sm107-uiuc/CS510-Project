{"url": "https://towardsdatascience.com/setup-version-increment-and-automated-release-process-591d87ea1221", "time": 1683004903.2754939, "path": "towardsdatascience.com/setup-version-increment-and-automated-release-process-591d87ea1221/", "webpage": {"metadata": {"title": "Setup version increment and automated release process | by Maksym Balatsko | Towards Data Science", "h1": "Setup version increment and automated release process", "description": "I\u2019m keen on process automation and I strongly believe that time and money investments into process automation in the development phase is a primary need, no matter how long the project is going to\u2026"}, "outgoing_paragraph_urls": [{"url": "https://github.com/mbalatsko/release-version-increment", "anchor_text": "https://github.com/mbalatsko/release-version-increment", "paragraph_index": 19}], "all_paragraphs": ["I\u2019m keen on process automation and I strongly believe that time and money investments into process automation in the development phase is a primary need, no matter how long the project is going to last. When you invest in processes automation you vastly decrease further maintenance expenses.", "I think one of the topics, which is not properly covered in ML articles is release process automation and project version increment. I don\u2019t want to discuss possible release options in this post, it is not about it. Here we will discuss how to set up the release process to your CI/CD tool (Bitbucket pipelines, Gitlab pipelines, etc.) I think it is safe to say that in most cases release is a file or set of files, which will be somehow integrated into client existing solution (no matter if it is a jar file with the spring boot app inside, set of python scripts which are used for model training and predictions or a docker image in which core application runs). Problem statement: We want to manage product versions and we want to be able to return to the concrete version to be able to test and diagnose problems that happened on the production.", "To begin with, let\u2019s define what does number in version string means.", "Given a version number MAJOR.MINOR.PATCH-pre_release-label, increment the:", "Pre-release-label is the placeholder of the version, which is kept before release.", "This is a best-practice definition, but of course, you can choose your own versioning scheme. So according to this definition, we need to define three tasks:", "The next step is to define how the release would be represented in GIT history except for the git tag. There are several techniques to achieve this, the most popular are separate release branch or detached commit. In this post, we will be discussing detached commit because it could much easier be automated (no merge needed).", "Let\u2019 begin with the theory. Detached commit is a commit that doesn't belong to any branch and can be pointed only directly. How to make it searchable in the git history without knowing the commit hash? You have just to assign a git tag to it. Then you can filter git history by tags in any VCS UI.", "Somehow you have to keep actual version string. The easiest way is to keep it in a text file in the root of the repository. The policies of VERSION file:", "To your CI/CD pipelines file, you have to add three custom/manual steps/jobs, which would perform release and an appropriate increment. And optionally add step/job which runs only on feature branches and which checks if VERSION file was changed against master.", "Bash script to check if VERSION file changed against master:", "And now the most interesting part:", "I hate writing bash scripts. I use bash only to define high-level steps and run python scripts from it, because I strongly believe that bash scripts have ugly notation, are not readable for less experienced Linux users and are not maintainable in the long term perspective. fire library can help you easily write good CLI-runnable python scripts. Check out my previous post:", "VERSION file management script (nothing interesting to discuss, just file writing operations):", "Now let\u2019s develop the release script. Firstly we have to check whether the release script is running on the right branch:", "Then you have to write some release stuff such as: publish docker image or copy to S3 bucket or whatever you need. Don\u2019t forget to do it with the right VERSION file:", "Then we have to push a detached commit with modified in a previous step VERSION file:", "Fetch back to master branch and increment version with a pre-release placeholder:", "And that's it. We have created a clean release script. Now let\u2019s develop Bitbucket and Gitlab pipeline steps snippets.", "That\u2019s it! All sources you can find on my GitHub: https://github.com/mbalatsko/release-version-increment", "I hope this article will be useful and informative. I\u2019m looking forward to your feedback!", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F591d87ea1221&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsetup-version-increment-and-automated-release-process-591d87ea1221&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsetup-version-increment-and-automated-release-process-591d87ea1221&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsetup-version-increment-and-automated-release-process-591d87ea1221&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsetup-version-increment-and-automated-release-process-591d87ea1221&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----591d87ea1221--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----591d87ea1221--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@mbalatsko?source=post_page-----591d87ea1221--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@mbalatsko?source=post_page-----591d87ea1221--------------------------------", "anchor_text": "Maksym Balatsko"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Ffa6012a510db&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsetup-version-increment-and-automated-release-process-591d87ea1221&user=Maksym+Balatsko&userId=fa6012a510db&source=post_page-fa6012a510db----591d87ea1221---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F591d87ea1221&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsetup-version-increment-and-automated-release-process-591d87ea1221&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F591d87ea1221&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsetup-version-increment-and-automated-release-process-591d87ea1221&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@yancymin?utm_source=medium&utm_medium=referral", "anchor_text": "Yancy Min"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://semver.org/", "anchor_text": "https://semver.org/"}, {"url": "https://towardsdatascience.com/a-simple-way-to-create-python-cli-app-1a4492c164b6", "anchor_text": "A simple way to create python CLI appAn easy example of wrapping Machine Learning application to the command line interfacetowardsdatascience.com"}, {"url": "https://confluence.atlassian.com/bitbucket/run-pipelines-manually-861242583.html", "anchor_text": "https://confluence.atlassian.com/bitbucket/run-pipelines-manually-861242583.html"}, {"url": "https://forum.gitlab.com/t/gitlab-ci-run-pipeline-manually/13797", "anchor_text": "https://forum.gitlab.com/t/gitlab-ci-run-pipeline-manually/13797"}, {"url": "https://github.com/mbalatsko/release-version-increment", "anchor_text": "https://github.com/mbalatsko/release-version-increment"}, {"url": "https://medium.com/tag/release-management?source=post_page-----591d87ea1221---------------release_management-----------------", "anchor_text": "Release Management"}, {"url": "https://medium.com/tag/process-automation?source=post_page-----591d87ea1221---------------process_automation-----------------", "anchor_text": "Process Automation"}, {"url": "https://medium.com/tag/versioning?source=post_page-----591d87ea1221---------------versioning-----------------", "anchor_text": "Versioning"}, {"url": "https://medium.com/tag/automation?source=post_page-----591d87ea1221---------------automation-----------------", "anchor_text": "Automation"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----591d87ea1221---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F591d87ea1221&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsetup-version-increment-and-automated-release-process-591d87ea1221&user=Maksym+Balatsko&userId=fa6012a510db&source=-----591d87ea1221---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F591d87ea1221&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsetup-version-increment-and-automated-release-process-591d87ea1221&user=Maksym+Balatsko&userId=fa6012a510db&source=-----591d87ea1221---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F591d87ea1221&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsetup-version-increment-and-automated-release-process-591d87ea1221&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----591d87ea1221--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F591d87ea1221&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsetup-version-increment-and-automated-release-process-591d87ea1221&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----591d87ea1221---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----591d87ea1221--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----591d87ea1221--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----591d87ea1221--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----591d87ea1221--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----591d87ea1221--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----591d87ea1221--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----591d87ea1221--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----591d87ea1221--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@mbalatsko?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@mbalatsko?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Maksym Balatsko"}, {"url": "https://medium.com/@mbalatsko/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "144 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Ffa6012a510db&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsetup-version-increment-and-automated-release-process-591d87ea1221&user=Maksym+Balatsko&userId=fa6012a510db&source=post_page-fa6012a510db--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F1d91ba9341d2&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsetup-version-increment-and-automated-release-process-591d87ea1221&newsletterV3=fa6012a510db&newsletterV3Id=1d91ba9341d2&user=Maksym+Balatsko&userId=fa6012a510db&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}