{"url": "https://towardsdatascience.com/docker-for-data-scientists-part-1-41b0725d4a50", "time": 1683018053.984771, "path": "towardsdatascience.com/docker-for-data-scientists-part-1-41b0725d4a50/", "webpage": {"metadata": {"title": "Docker for data scientists \u2014 Part 1 | by Adam Sroka | Towards Data Science", "h1": "Docker for data scientists \u2014 Part 1", "description": "Over my time working in data science I\u2019ve seen many people struggle with (or simply ignore!!) the concept of environments. With tools like pip and condamaking it easy to install packages and\u2026"}, "outgoing_paragraph_urls": [{"url": "https://pypi.org/project/pip/", "anchor_text": "pip", "paragraph_index": 2}, {"url": "https://docs.conda.io/en/latest/", "anchor_text": "conda", "paragraph_index": 2}, {"url": "https://github.com/bndr/pipreqs", "anchor_text": "pipreqs", "paragraph_index": 3}, {"url": "https://docs.python.org/3/library/venv.html", "anchor_text": "venv", "paragraph_index": 4}, {"url": "https://virtualenv.pypa.io/en/latest/", "anchor_text": "virtualenv", "paragraph_index": 4}, {"url": "https://aws.amazon.com/machine-learning/amis/", "anchor_text": "AWS", "paragraph_index": 9}, {"url": "https://azure.microsoft.com/en-gb/services/virtual-machines/data-science-virtual-machines/", "anchor_text": "Azure", "paragraph_index": 9}, {"url": "https://cloud.google.com/deep-learning-vm", "anchor_text": "GCP", "paragraph_index": 9}, {"url": "https://www.vmware.com/topics/glossary/content/hypervisor#:~:text=A%20hypervisor%2C%20also%20known%20as,such%20as%20memory%20and%20processing.", "anchor_text": "hypervisor", "paragraph_index": 10}, {"url": "https://www.docker.com/resources/what-container", "anchor_text": "docker.com", "paragraph_index": 10}, {"url": "https://www.docker.com/resources/what-container", "anchor_text": "here", "paragraph_index": 11}, {"url": "https://www.youtube.com/watch?v=zJ6WbK9zFpI", "anchor_text": "YouTube", "paragraph_index": 12}, {"url": "https://flask.palletsprojects.com/en/1.1.x/", "anchor_text": "Flask", "paragraph_index": 14}, {"url": "https://github.com/cookiecutter/cookiecutter", "anchor_text": "Cookiecutter", "paragraph_index": 20}, {"url": "https://hub.docker.com/", "anchor_text": "Dockerhub", "paragraph_index": 24}, {"url": "https://hub.docker.com/layers/python/library/python/3.8/images/sha256-8025ddb1bb860b2907147a6d0b76e5e405587e6d7e44019d38e01b5a5bb5285f?context=explore", "anchor_text": "Python 3.8 image", "paragraph_index": 24}, {"url": "http://localhost:5000", "anchor_text": "http://localhost:5000", "paragraph_index": 32}], "all_paragraphs": ["We\u2019re going to jog through the following topics in order:", "Over my time working in data science I\u2019ve seen many people struggle with (or simply ignore!!) the concept of environments.", "With tools like pip and condamaking it easy to install packages and libraries on the fly, it can be very tempting to just download everything you\u2019ll ever need into the default environment and be done with it. Things will work fine for a while, but eventually, you need to run your project on another machine or share your model with a colleague. You send them the code and even kindly write a requirements.txt for them.", "However, like posting an envelope full of glitter, this isn\u2019t harmful but it\u2019s not pleasant either. Your colleague probably doesn\u2019t want to install buckets of irrelevant packages just to get it to run or they may even have conflicting versions of certain packages which can lead to a much bigger headache. There are ways around this such as pipreqsbut it\u2019s not ideal.", "The thing is, you know this, you\u2019re savvier than that. You were kind enough to build a project environment and save only what\u2019s needed. Perhaps using conda(like I have here) or something like venv, virtualenv, or whatever your favourite package manager is.", "Now that\u2019s better. You have a concise list of what\u2019s needed to run your project and you won\u2019t annoy everyone you work with.", "It's worth pointing out at this stage - this isn't a trivial problem. Bad practice with environments is often the first of many hurdles to getting data science teams collaborating effectively and delivering models into production.", "There\u2019s obviously a lot more to environments, but this leads us on to our next suite of problems. What if my colleague has conflicts? What if they can\u2019t be trusted to install stuff properly? Is the package available in their operating system (OS)? Also, for large complex projects that do have a lot of requirements, installing them all could take time and it adds another layer of frustration into the mix. Sometimes, multiple projects you\u2019re developing have strong interdependencies and keeping track of them all can be a nightmare.", "What if we could just bundle up everything, exactly as it is on our machine so that it can be run in the same state everywhere?", "One potential solution is to create an image of your whole system \u2014 OS, installed packages, code \u2014 everything! Then run this image as a virtual machine. This is a good option and, in fact, the approach used by many. Luckily, many people have already done this and there are plenty of virtual machine images packed with most of what you\u2019ll need to get your project going. For the budding data scientist just getting into the cloud, I\u2019d strongly advise checking out the available data science virtual machines on AWS, Azure, and GCP.", "Now, VMs are great and in many cases, they\u2019re the right solution but they can be bulky when all you want is to run a reasonably lightweight Python project. That\u2019s because VMs capture the whole OS and require something called a hypervisor to keep them working. Here\u2019s a great diagram from docker.com:", "If you want more detail on what containers are, what Docker is and how it works, the documentation here is great.", "Now, there are plenty of Docker tutorials out there and because many people come to Docker from the world of web development they tend to be geared towards getting a website up and running. This is great stuff and if you have the time, I suggest you run through some of them \u2014 this YouTube tutorial is a good start and comes with some great interactive labs. What I\u2019m going to attempt here is a walkthrough of setting up a simple service for a prediction function.", "Before we get started, you\u2019ll need to ensure you have these installed if you want to follow along:", "Let\u2019s start by creating a Flask service called app.py. I\u2019m working in the Anaconda PowerShell Prompt, on windows, using conda but the process is really similar to other terminals/environment managers.", "Start by creating a fresh environment to work in, switching to it, and installing Flask:", "Now with Flask ready to go a simple \u201cHello World!\u201d might look like this:", "Now in this case our requirements will be really simple. To generate out file use:", "You should get something like this:", "So our package has the following structure:", "The structure is pretty standard \u2014 I\u2019m a big believer in standardising project folders for ease of collaboration and reuse, watch this space for a blog about how I use Cookiecutter to achieve this for more complex projects.", "So to run this app, we just need to install our requirements into an environment with a working Python interpreter and we should be good to go. As stated earlier though, there are hidden issues we may not yet have seen around conflicts etc. Let\u2019s move on to containers and how they make things easier.", "Docker all revolves around the Dockerfile. This is a file that tells Docker how to put the container together. Note, this is a text file named Dockerfile with no extension.", "Below is a simpleDockerfile for our app:", "Under the hood, a Docker container is built layer by layer. Dockerhub is the default registry that Docker will pull images from (but it is possible to host your own privately \u2014 great for sharing work internally!). Docker will then pull your base image and start layering the other commands on top. In this case, we\u2019re starting from the Python 3.8 image. The syntax here is straightforward <base_image>:<image_tag> where the tag lets you pick specific versions or flavours of a base image.", "From there, we set the directory we want to work in, then copy all of the files in the current directory into it. Note that in this file we\u2019re using relative paths so where you run Docker from is important, it is possible to use absolute paths if that\u2019s your preference. Once everything is copied over, we use pip to install the app\u2019s requirements.", "The final line essentially defines what the first command the container should run when it initially boots. If the container is left doing nothing it will immediately close (by default \u2014 this can be tweaked).", "Now that we have our Dockerfile defined we can build it using:", "Where we\u2019re simply pointing to the files we want to build from (in this case the current directory), and using -t to give our image a name. That might look something like this:", "Our final step is to run this app to show how it\u2019ll work from Docker.", "There\u2019s a couple of parameters to highlight here:", "Once we\u2019re up and running we can check the container is working using docker ps which will show us things like name, image etc. Running these then you should have something that looks like this:", "As you can see, running a container will return an ID for it, Docker also generates a human-readable name at random, infallible_curie in this case. Both of these can be used to reference the container in other commands which is handy. Then finally, just to prove the app is working we can visit http://localhost:5000 in our browser.", "So, this might all seem pretty basic but I hope the benefits are clear \u2014 we now have a scriptable, repeatable way to record and redeploy our environments so that they\u2019ll run anywhere Docker will. This is great for collaboration, audit, and scaling our operations. In the next part of this series we\u2019ll:", "I hope this was useful, please let me know if you have any feedback. You can catch me on", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Dr Adam Sroka, Head of Machine Learning Engineering at Origami Energy, is an experienced data and AI leader helping organisations unlock value from data."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F41b0725d4a50&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdocker-for-data-scientists-part-1-41b0725d4a50&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdocker-for-data-scientists-part-1-41b0725d4a50&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdocker-for-data-scientists-part-1-41b0725d4a50&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdocker-for-data-scientists-part-1-41b0725d4a50&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----41b0725d4a50--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----41b0725d4a50--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://aesroka.medium.com/?source=post_page-----41b0725d4a50--------------------------------", "anchor_text": ""}, {"url": "https://aesroka.medium.com/?source=post_page-----41b0725d4a50--------------------------------", "anchor_text": "Adam Sroka"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fd117c49a0f57&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdocker-for-data-scientists-part-1-41b0725d4a50&user=Adam+Sroka&userId=d117c49a0f57&source=post_page-d117c49a0f57----41b0725d4a50---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F41b0725d4a50&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdocker-for-data-scientists-part-1-41b0725d4a50&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F41b0725d4a50&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdocker-for-data-scientists-part-1-41b0725d4a50&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@dstaton?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Dale Staton"}, {"url": "https://unsplash.com/s/photos/shipping-container?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Unsplash"}, {"url": "https://pypi.org/project/pip/", "anchor_text": "pip"}, {"url": "https://docs.conda.io/en/latest/", "anchor_text": "conda"}, {"url": "https://github.com/bndr/pipreqs", "anchor_text": "pipreqs"}, {"url": "https://docs.python.org/3/library/venv.html", "anchor_text": "venv"}, {"url": "https://virtualenv.pypa.io/en/latest/", "anchor_text": "virtualenv"}, {"url": "https://aws.amazon.com/machine-learning/amis/", "anchor_text": "AWS"}, {"url": "https://azure.microsoft.com/en-gb/services/virtual-machines/data-science-virtual-machines/", "anchor_text": "Azure"}, {"url": "https://cloud.google.com/deep-learning-vm", "anchor_text": "GCP"}, {"url": "https://www.vmware.com/topics/glossary/content/hypervisor#:~:text=A%20hypervisor%2C%20also%20known%20as,such%20as%20memory%20and%20processing.", "anchor_text": "hypervisor"}, {"url": "https://www.docker.com/resources/what-container", "anchor_text": "docker.com"}, {"url": "https://www.docker.com/resources/what-container", "anchor_text": "here"}, {"url": "https://www.youtube.com/watch?v=zJ6WbK9zFpI", "anchor_text": "YouTube"}, {"url": "https://www.docker.com/get-started", "anchor_text": "Install Docker Desktop"}, {"url": "https://docs.docker.com/get-docker/", "anchor_text": "Docker"}, {"url": "https://docs.docker.com/compose/install/", "anchor_text": "Docker Compose"}, {"url": "https://www.anaconda.com/products/individual", "anchor_text": "here"}, {"url": "https://flask.palletsprojects.com/en/1.1.x/", "anchor_text": "Flask"}, {"url": "http://twitter.com/app", "anchor_text": "@app"}, {"url": "https://github.com/cookiecutter/cookiecutter", "anchor_text": "Cookiecutter"}, {"url": "https://hub.docker.com/", "anchor_text": "Dockerhub"}, {"url": "https://hub.docker.com/layers/python/library/python/3.8/images/sha256-8025ddb1bb860b2907147a6d0b76e5e405587e6d7e44019d38e01b5a5bb5285f?context=explore", "anchor_text": "Python 3.8 image"}, {"url": "http://localhost:5000", "anchor_text": "http://localhost:5000"}, {"url": "https://towardsdatascience.com/docker-for-data-scientists-part-2-7655c02fe975", "anchor_text": "Docker for data scientists-Part 2A complete guide to develop a machine learning model, write an API, package it in Docker, run it anywhere, and share it\u2026towardsdatascience.com"}, {"url": "http://www.twitter.com/adzsroka", "anchor_text": "www.twitter.com/adzsroka"}, {"url": "http://www.linkedin.com/in/aesroka", "anchor_text": "www.linkedin.com/in/aesroka"}, {"url": "http://www.adamsroka.co.uk", "anchor_text": "www.adamsroka.co.uk"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----41b0725d4a50---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/tag/docker?source=post_page-----41b0725d4a50---------------docker-----------------", "anchor_text": "Docker"}, {"url": "https://medium.com/tag/data-science?source=post_page-----41b0725d4a50---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/tutorial?source=post_page-----41b0725d4a50---------------tutorial-----------------", "anchor_text": "Tutorial"}, {"url": "https://medium.com/tag/coding?source=post_page-----41b0725d4a50---------------coding-----------------", "anchor_text": "Coding"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F41b0725d4a50&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdocker-for-data-scientists-part-1-41b0725d4a50&user=Adam+Sroka&userId=d117c49a0f57&source=-----41b0725d4a50---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F41b0725d4a50&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdocker-for-data-scientists-part-1-41b0725d4a50&user=Adam+Sroka&userId=d117c49a0f57&source=-----41b0725d4a50---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F41b0725d4a50&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdocker-for-data-scientists-part-1-41b0725d4a50&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----41b0725d4a50--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F41b0725d4a50&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdocker-for-data-scientists-part-1-41b0725d4a50&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----41b0725d4a50---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----41b0725d4a50--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----41b0725d4a50--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----41b0725d4a50--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----41b0725d4a50--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----41b0725d4a50--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----41b0725d4a50--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----41b0725d4a50--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----41b0725d4a50--------------------------------", "anchor_text": ""}, {"url": "https://aesroka.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://aesroka.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Adam Sroka"}, {"url": "https://aesroka.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "790 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fd117c49a0f57&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdocker-for-data-scientists-part-1-41b0725d4a50&user=Adam+Sroka&userId=d117c49a0f57&source=post_page-d117c49a0f57--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F9546a217271a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdocker-for-data-scientists-part-1-41b0725d4a50&newsletterV3=d117c49a0f57&newsletterV3Id=9546a217271a&user=Adam+Sroka&userId=d117c49a0f57&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}