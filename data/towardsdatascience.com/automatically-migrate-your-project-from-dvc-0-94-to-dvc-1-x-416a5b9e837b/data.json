{"url": "https://towardsdatascience.com/automatically-migrate-your-project-from-dvc-0-94-to-dvc-1-x-416a5b9e837b", "time": 1683011711.717986, "path": "towardsdatascience.com/automatically-migrate-your-project-from-dvc-0-94-to-dvc-1-x-416a5b9e837b/", "webpage": {"metadata": {"title": "Automatically migrate your project from DVC\u2264 0.94 to DVC 1.x | by Simon Lousky | Towards Data Science", "h1": "Automatically migrate your project from DVC\u2264 0.94 to DVC 1.x", "description": "DVC 1.0 is here and with it comes a whole package of long-awaited features. If you are interested in a complete list of new features you should check out DVC\u2019s official release post. One of the main\u2026"}, "outgoing_paragraph_urls": [{"url": "https://dvc.org/blog/dvc-1-0-release", "anchor_text": "DVC\u2019s official release post", "paragraph_index": 0}, {"url": "https://gist.github.com/skshetry/07a3e26e6b06783e1ad7a4b6db6479da", "anchor_text": "This python script", "paragraph_index": 6}, {"url": "https://dagshub.com/?utm_source=medium&utm_medium=blog&utm_campaign=migrating-to-dvc-1", "anchor_text": "DAGsHub", "paragraph_index": 16}, {"url": "https://discord.com/invite/9gU36Y6", "anchor_text": "DAGsHub discord channel", "paragraph_index": 19}], "all_paragraphs": ["DVC 1.0 is here and with it comes a whole package of long-awaited features. If you are interested in a complete list of new features you should check out DVC\u2019s official release post. One of the main changes is the single dvc.yaml file that stores all the necessary information to describe your pipeline. This creates a clear separation between .dvc files acting as placeholders for cached files in your git repository and the description of the pipeline to run when calling dvc repro.", "One caveat to this upgrade is that migrating a repository with a large number of .dvc files to the new format is a rather involved process. In this post, I'll walk you through the process of migrating your existing project from DVC \u2264 0.94 to DVC 1.X using a single automated script, and then demonstrate a way to check that your migration was successful.", "2. I strongly recommend creating a new branch dedicated to this migration, this will also prove useful later on for comparing the old and new configuration", "3. Upgrade to the latest DVC 1.X version (now is the time).", "I recommend that you carry on reading to take a look at what the script is doing, but if you just want to run the script you can do the following from inside your directory:", "In DVC \u2264 0.94 stages were named after the files containing their details \u2014 Dvcfile or <name>.dvc. Since DVC 1 you define the name of the stage and not the name of the file containing it.", "This python script provided by one of DVC\u2019s collaborators is converting a single-stage file into a stage inside dvc.yaml and dvc.lock. It takes as arguments an original .dvc file (or Dvcfile) and the name of the stage as it should appear in our new pipeline. This means you have to manually run python migrator.py <file.dvc> <stage_name> numerous times. When it comes to a pipeline with many stages, this might become cumbersome. Moreover, some of the .dvc files don't represent stages in your pipeline but just tracked files cache information. This means they were created by DVC when running the command dvc add or dvc import. These should not appear as stages in your dvc.yaml file.", "I took the liberty to alter the script so that it could migrate an entire project with as many .dvc files as I want. In short, it will search for .dvc files that have a \"cmd\" key, and add their content as a stage in the new format. For example, if you currently have a stage file named train.dvc, the script will assume you want to call the stage train. Feel free to alter this behavior to your liking!", "You can download it like this:", "All the original .dvc files will be backed up as <old_file>.dvc.bak and two new files will be created at the root of your working directory", "The output should look like this:", "If you don\u2019t recognize this pattern, feel free to describe your problem in the comments below and I\u2019ll do my best to take a look at it.", "Otherwise, start tracking the newly generated files by running:", "That\u2019s it, you have now migrated your project to DVC 1!", "Not so fast! You want to make sure your pipeline is doing the same, and that all your data files are being tracked properly.", "Review the YAML filesOne option is to manually review the files created and verify that all the stages, deps, outs, and metrics are present and running the correct commands. Alternatively, you can\u2026", "Visually compare pipeline graphsIdeally, you would want to easily look at both your old and new pipeline in a way that will visually depict the differences in both versions. DAGsHub is a platform dedicated to the data science community, that can do that for you, and it supports both DVC 1 and older versions (and also has other cool capabilities). You are welcome to use any other tool you like to visualize the differences, but really I am biased ;-)", "By connecting your existing repository to DAGsHub, you can compare your previous pipeline with the one you created in your branch dvc-1-migration by switching branches.", "When computing the DVC 1 pipeline graph, DAGsHub is performing a slightly different computation than with the original .dvc files. This might result in nodes appearing in a different order. Other than that, nodes and edges should still be the same.", "Thank you for reading up this point, I hope you found it useful. If you have any suggestions or feedback please leave a comment below, or join the DAGsHub discord channel.", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F416a5b9e837b&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautomatically-migrate-your-project-from-dvc-0-94-to-dvc-1-x-416a5b9e837b&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautomatically-migrate-your-project-from-dvc-0-94-to-dvc-1-x-416a5b9e837b&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautomatically-migrate-your-project-from-dvc-0-94-to-dvc-1-x-416a5b9e837b&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautomatically-migrate-your-project-from-dvc-0-94-to-dvc-1-x-416a5b9e837b&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----416a5b9e837b--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----416a5b9e837b--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@simon_69599?source=post_page-----416a5b9e837b--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@simon_69599?source=post_page-----416a5b9e837b--------------------------------", "anchor_text": "Simon Lousky"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F43d66e9eb50b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautomatically-migrate-your-project-from-dvc-0-94-to-dvc-1-x-416a5b9e837b&user=Simon+Lousky&userId=43d66e9eb50b&source=post_page-43d66e9eb50b----416a5b9e837b---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F416a5b9e837b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautomatically-migrate-your-project-from-dvc-0-94-to-dvc-1-x-416a5b9e837b&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F416a5b9e837b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautomatically-migrate-your-project-from-dvc-0-94-to-dvc-1-x-416a5b9e837b&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://dvc.org/blog/dvc-1-0-release", "anchor_text": "DVC\u2019s official release post"}, {"url": "https://gist.github.com/skshetry/07a3e26e6b06783e1ad7a4b6db6479da", "anchor_text": "This python script"}, {"url": "https://dvc.org/doc/user-guide/dvc-files-and-directories#dvcyaml-file", "anchor_text": "dvc.yaml"}, {"url": "https://dvc.org/doc/user-guide/dvc-files-and-directories#dvclock-file", "anchor_text": "dvc.lock"}, {"url": "https://unsplash.com/@bendavisual?utm_source=medium&utm_medium=referral", "anchor_text": "Benjamin Davies"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://dagshub.com/?utm_source=medium&utm_medium=blog&utm_campaign=migrating-to-dvc-1", "anchor_text": "DAGsHub"}, {"url": "https://discord.com/invite/9gU36Y6", "anchor_text": "DAGsHub discord channel"}, {"url": "https://medium.com/tag/dvc?source=post_page-----416a5b9e837b---------------dvc-----------------", "anchor_text": "Dvc"}, {"url": "https://medium.com/tag/migration?source=post_page-----416a5b9e837b---------------migration-----------------", "anchor_text": "Migration"}, {"url": "https://medium.com/tag/mlops?source=post_page-----416a5b9e837b---------------mlops-----------------", "anchor_text": "Mlops"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F416a5b9e837b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautomatically-migrate-your-project-from-dvc-0-94-to-dvc-1-x-416a5b9e837b&user=Simon+Lousky&userId=43d66e9eb50b&source=-----416a5b9e837b---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F416a5b9e837b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautomatically-migrate-your-project-from-dvc-0-94-to-dvc-1-x-416a5b9e837b&user=Simon+Lousky&userId=43d66e9eb50b&source=-----416a5b9e837b---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F416a5b9e837b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautomatically-migrate-your-project-from-dvc-0-94-to-dvc-1-x-416a5b9e837b&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----416a5b9e837b--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F416a5b9e837b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautomatically-migrate-your-project-from-dvc-0-94-to-dvc-1-x-416a5b9e837b&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----416a5b9e837b---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----416a5b9e837b--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----416a5b9e837b--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----416a5b9e837b--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----416a5b9e837b--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----416a5b9e837b--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----416a5b9e837b--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----416a5b9e837b--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----416a5b9e837b--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@simon_69599?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@simon_69599?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Simon Lousky"}, {"url": "https://medium.com/@simon_69599/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "35 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F43d66e9eb50b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautomatically-migrate-your-project-from-dvc-0-94-to-dvc-1-x-416a5b9e837b&user=Simon+Lousky&userId=43d66e9eb50b&source=post_page-43d66e9eb50b--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fed519b0724c5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautomatically-migrate-your-project-from-dvc-0-94-to-dvc-1-x-416a5b9e837b&newsletterV3=43d66e9eb50b&newsletterV3Id=ed519b0724c5&user=Simon+Lousky&userId=43d66e9eb50b&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}