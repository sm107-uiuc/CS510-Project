{"url": "https://towardsdatascience.com/news-aggregator-in-2-weeks-5b38783b95e3", "time": 1683004498.739876, "path": "towardsdatascience.com/news-aggregator-in-2-weeks-5b38783b95e3/", "webpage": {"metadata": {"title": "News Aggregator in 2 weeks. A simple and fast approach for news\u2026 | by Ilya Gusev | Towards Data Science", "h1": "News Aggregator in 2 weeks", "description": "Data Clustering Contest was a two-week data science competition held by Telegram in November. The Telegram team wanted participants to build a simple yet effective news aggregator that consolidates\u2026"}, "outgoing_paragraph_urls": [{"url": "https://contest.com/data-clustering", "anchor_text": "Data Clustering Contest", "paragraph_index": 0}, {"url": "https://news.google.com", "anchor_text": "Google News", "paragraph_index": 0}, {"url": "https://www.bing.com/news", "anchor_text": "Bing News", "paragraph_index": 0}, {"url": "https://t.me/contest/137", "anchor_text": "finished on Dec 2, 2019", "paragraph_index": 1}, {"url": "https://t.me/contest/158", "anchor_text": "announced the results", "paragraph_index": 1}, {"url": "https://contest.com/data-clustering/entry1171", "anchor_text": "\u201cMindful Squirrel\u201d", "paragraph_index": 1}, {"url": "https://github.com/IlyaGusev/tgcontest", "anchor_text": "available on GitHub", "paragraph_index": 1}, {"url": "https://contest.com/docs/data_clustering", "anchor_text": "required", "paragraph_index": 4}, {"url": "https://allennlp.org/elmo", "anchor_text": "ELMo", "paragraph_index": 5}, {"url": "https://arxiv.org/abs/1810.04805", "anchor_text": "BERT", "paragraph_index": 5}, {"url": "https://fasttext.cc/", "anchor_text": "fastText", "paragraph_index": 5}, {"url": "https://fasttext.cc/docs/en/language-identification.html", "anchor_text": "a pretrained model provided by the fastText team", "paragraph_index": 6}, {"url": "https://toloka.yandex.ru/", "anchor_text": "Yandex.Toloka", "paragraph_index": 7}, {"url": "https://www.mturk.com/", "anchor_text": "Amazon Mechanical Turk", "paragraph_index": 7}, {"url": "https://github.com/yutkin/Lenta.Ru-News-Dataset", "anchor_text": "Lenta.ru", "paragraph_index": 8}, {"url": "https://www.kaggle.com/shineucc/bbc-news-dataset", "anchor_text": "BBC", "paragraph_index": 8}, {"url": "https://www.kaggle.com/rmisra/news-category-dataset", "anchor_text": "HuffPost", "paragraph_index": 8}, {"url": "https://github.com/RossiyaSegodnya/ria_news_dataset", "anchor_text": "RIA", "paragraph_index": 9}, {"url": "https://www.kaggle.com/snapcrack/all-the-news", "anchor_text": "\u201cAll the news\u201d", "paragraph_index": 9}, {"url": "https://en.wikipedia.org/wiki/Triplet_loss", "anchor_text": "triplet loss", "paragraph_index": 11}, {"url": "https://sites.cs.ucsb.edu/~veronika/MAE/summary_SLINK_Sibson72.pdf", "anchor_text": "SLINK", "paragraph_index": 13}, {"url": "https://www.cs.princeton.edu/~chazelle/courses/BIB/pagerank.htm", "anchor_text": "PageRank", "paragraph_index": 18}, {"url": "https://ilyagusev.github.io/tgcontest/en/main.html", "anchor_text": "the top to GitHub pages", "paragraph_index": 20}, {"url": "http://Booking.com", "anchor_text": "Booking.com", "paragraph_index": 23}], "all_paragraphs": ["Data Clustering Contest was a two-week data science competition held by Telegram in November. The Telegram team wanted participants to build a simple yet effective news aggregator that consolidates thousands of articles from various publishers and websites into a single page, which shows the latest news and top stories, exactly like Google News or Bing News does.", "Despite the competition finished on Dec 2, 2019, the organizers announced the results a week ago. Our team \u201cMindful Squirrel\u201d stands 3rd in the final leaderboard. In this post, we provide a brief overview of our approach and discuss the main challenges we came across. The full solution is available on GitHub. All training scripts are shared in Colab.", "The contest included five subtasks which were expected to be run sequentially on the raw data:", "The language detection step seemed to be very clear, while the other tasks raised a bunch of questions. The strict definition of \u201cnews\u201d was not given; topic criteria were not well-defined; clustering granularity and ranking criteria were also missing.", "The contest rules required the final submission to run locally on a machine under Debian with 8 cores and 16 GB RAM with no network usage. Moreover, the app had to be able to process any batch of 1000 articles within 60 seconds. The first version of the restrictions also included the penalty for solutions over 200 MB of disk space.", "These restrictions affected the range of applicable instruments and algorithms heavily. The first idea was to adopt SOTA models, such as ELMo or BERT. However, they are too large to meet the requirements. Therefore we extensively relied on a fastText library. It is the library for learning word embeddings and training text classification models created by Facebook\u2019s AI Research in 2016. The whole submission code was written in C++, and the only complex model was trained in Python with Keras.", "The solution of this task was straightforward. We utilized a pretrained model provided by the fastText team.", "We merged these two tasks into a single multi-class classification problem. Since any supervised classifier requires some amount of training data, we utilized Yandex.Toloka to label a fraction of input data. Toloka is a Russian crowdsourcing platform, just like Amazon Mechanical Turk. We spent 60$ for all the labeling both for Russian and English. We used machine translation to Russian for English texts to make it easier for Russian speaking workers.", "We also extended the dataset with publicly available data from the Lenta.ru news dataset for the Russian language and the ones from BBC and HuffPost for English.", "With all the labeled data, we trained a simple fastText classifier. The default fastText classification algorithm learns the word embeddings on the provided data and then uses their averaging for prediction. Utilizing rich pretrained word representations usually boosts the classifier performance in the case of a lack of labeled data. We trained such unsupervised vectors on the previous datasets extended by the RIA and the \u201cAll the news\u201d corpora.", "Two essential things for news clustering are rich text embeddings and robust clustering algorithm.", "Simple averaging over word vectors did not lead to good results forcing us to apply something more sophisticated. We trained the final text embeddings using a Siamese neural network architecture combined with a dot product, a dense layer, and sigmoid on top. The branch\u2019s architecture consisted of a single dense layer over the concatenation of average-, min- and max-pooling over the word vectors. We split every text into two halves and then trained the network to predict whether these parts belong to the same article or not. We mined negatives from other texts of the same publisher that were close in time to positive examples. As an objective function, we used the log loss function, though we should have used triplet loss.", "The model was still as simple as possible and had only one trainable matrix. We didn\u2019t use any neural network frameworks in the actual C++ app, only the Eigen library for matrix multiplications.", "We utilized the SLINK agglomerative clustering. The algorithm has some drawbacks, and the most important one is transitive linkage. The first point could be linked to the second, the second to the third, and as a result, the first and third fall in the same cluster, although they could be far from each other.", "The SLINK\u2019s time complexity of O(n\u00b2) prevented us from clustering all the documents at once. For overcoming this issue, we assumed that distant in time documents should not belong to the same cluster. This assumption allowed us to split the whole timeline into chunks of 10,000 documents with an overlap of 2,000 items. Then we applied clustering within each chunk and, finally, linked consecutive chunks through the overlapping documents.", "We based our title selection within a thread on the product of three components: freshness, similarity to other thread documents, and the document\u2019s source weight.", "We defined freshness as the scaled sigmoid over the difference between the document date and the date of the freshest document in the thread.", "The inner similarity between thread\u2019s documents was calculated using the same text vectors as in clustering. For each document in every thread, we calculated the mean distance to other documents in the thread.", "The PageRank algorithm over the links inside the documents allowed us to evaluate the importance of the source.", "Freshness, the source weight, and the cluster size formed the basis of thread ranking. The 99th percentile of all publish dates was chosen as the \u201ccurrent moment\u201d for the whole dataset because of possible outliers. The age of the thread was calculated from this \u201ccurrent moment\u201d.", "The most significant part of the challenge was to build a system that meets the strict hardware limitations. These constraints, as well as short contest duration, forced us to rely on simple machine learning algorithms (such as fastText) instead of sophisticated SOTA models. We did not have enough time to conduct all the experiments we wanted or to polish the final solution. There is still room for improvement, though we have implemented some modifications after the end of the contest. We also built a CI workflow that matches the output of every version of the code with canonical results and publishes the top to GitHub pages.", "Finally, we would like to thank the competition organizers for a challenging task. It was definitely a great problem to solve.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Senior Machine Learning Engineer at Booking.com"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F5b38783b95e3&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fnews-aggregator-in-2-weeks-5b38783b95e3&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fnews-aggregator-in-2-weeks-5b38783b95e3&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fnews-aggregator-in-2-weeks-5b38783b95e3&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fnews-aggregator-in-2-weeks-5b38783b95e3&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----5b38783b95e3--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----5b38783b95e3--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@phoenixilya?source=post_page-----5b38783b95e3--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@phoenixilya?source=post_page-----5b38783b95e3--------------------------------", "anchor_text": "Ilya Gusev"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F99b43d56e4b6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fnews-aggregator-in-2-weeks-5b38783b95e3&user=Ilya+Gusev&userId=99b43d56e4b6&source=post_page-99b43d56e4b6----5b38783b95e3---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F5b38783b95e3&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fnews-aggregator-in-2-weeks-5b38783b95e3&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F5b38783b95e3&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fnews-aggregator-in-2-weeks-5b38783b95e3&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://pixabay.com/ru/users/Pezibear-526143/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=502778", "anchor_text": "Pezibear"}, {"url": "https://pixabay.com/ru/?utm_source=link-attribution&utm_medium=referral&utm_campaign=image&utm_content=502778", "anchor_text": "Pixabay"}, {"url": "https://contest.com/data-clustering", "anchor_text": "Data Clustering Contest"}, {"url": "https://news.google.com", "anchor_text": "Google News"}, {"url": "https://www.bing.com/news", "anchor_text": "Bing News"}, {"url": "https://t.me/contest/137", "anchor_text": "finished on Dec 2, 2019"}, {"url": "https://t.me/contest/158", "anchor_text": "announced the results"}, {"url": "https://contest.com/data-clustering/entry1171", "anchor_text": "\u201cMindful Squirrel\u201d"}, {"url": "https://github.com/IlyaGusev/tgcontest", "anchor_text": "available on GitHub"}, {"url": "http://draw.io", "anchor_text": "draw.io"}, {"url": "https://contest.com/docs/data_clustering", "anchor_text": "required"}, {"url": "https://allennlp.org/elmo", "anchor_text": "ELMo"}, {"url": "https://arxiv.org/abs/1810.04805", "anchor_text": "BERT"}, {"url": "https://fasttext.cc/", "anchor_text": "fastText"}, {"url": "https://fasttext.cc/docs/en/language-identification.html", "anchor_text": "a pretrained model provided by the fastText team"}, {"url": "https://toloka.yandex.ru/", "anchor_text": "Yandex.Toloka"}, {"url": "https://www.mturk.com/", "anchor_text": "Amazon Mechanical Turk"}, {"url": "https://github.com/yutkin/Lenta.Ru-News-Dataset", "anchor_text": "Lenta.ru"}, {"url": "https://www.kaggle.com/shineucc/bbc-news-dataset", "anchor_text": "BBC"}, {"url": "https://www.kaggle.com/rmisra/news-category-dataset", "anchor_text": "HuffPost"}, {"url": "http://draw.io", "anchor_text": "draw.io"}, {"url": "https://github.com/RossiyaSegodnya/ria_news_dataset", "anchor_text": "RIA"}, {"url": "https://www.kaggle.com/snapcrack/all-the-news", "anchor_text": "\u201cAll the news\u201d"}, {"url": "https://en.wikipedia.org/wiki/Triplet_loss", "anchor_text": "triplet loss"}, {"url": "http://draw.io", "anchor_text": "draw.io"}, {"url": "https://sites.cs.ucsb.edu/~veronika/MAE/summary_SLINK_Sibson72.pdf", "anchor_text": "SLINK"}, {"url": "http://draw.io", "anchor_text": "draw.io"}, {"url": "http://draw.io", "anchor_text": "draw.io"}, {"url": "https://www.cs.princeton.edu/~chazelle/courses/BIB/pagerank.htm", "anchor_text": "PageRank"}, {"url": "https://ilyagusev.github.io/tgcontest/en/main.html", "anchor_text": "the top to GitHub pages"}, {"url": "https://github.com/IlyaGusev/tgcontest", "anchor_text": "Telegram Data Clustering contest solution by Mindful Squirrel"}, {"url": "https://m.habr.com/ru/post/487324/", "anchor_text": "\u041d\u043e\u0432\u043e\u0441\u0442\u043d\u043e\u0439 \u0430\u0433\u0440\u0435\u0433\u0430\u0442\u043e\u0440 \u0437\u0430 \u0434\u0432\u0435 \u043d\u0435\u0434\u0435\u043b\u0438"}, {"url": "https://towardsdatascience.com/building-a-news-aggregator-from-scratch-news-filtering-classification-grouping-in-threads-and-7b0bbf619b68", "anchor_text": "Building a news aggregator from scratch: news filtering, classification, grouping in threads and ranking"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----5b38783b95e3---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/tag/nlp?source=post_page-----5b38783b95e3---------------nlp-----------------", "anchor_text": "NLP"}, {"url": "https://medium.com/tag/fasttext?source=post_page-----5b38783b95e3---------------fasttext-----------------", "anchor_text": "Fasttext"}, {"url": "https://medium.com/tag/clustering?source=post_page-----5b38783b95e3---------------clustering-----------------", "anchor_text": "Clustering"}, {"url": "https://medium.com/tag/aggregation?source=post_page-----5b38783b95e3---------------aggregation-----------------", "anchor_text": "Aggregation"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F5b38783b95e3&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fnews-aggregator-in-2-weeks-5b38783b95e3&user=Ilya+Gusev&userId=99b43d56e4b6&source=-----5b38783b95e3---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F5b38783b95e3&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fnews-aggregator-in-2-weeks-5b38783b95e3&user=Ilya+Gusev&userId=99b43d56e4b6&source=-----5b38783b95e3---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F5b38783b95e3&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fnews-aggregator-in-2-weeks-5b38783b95e3&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----5b38783b95e3--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F5b38783b95e3&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fnews-aggregator-in-2-weeks-5b38783b95e3&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----5b38783b95e3---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----5b38783b95e3--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----5b38783b95e3--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----5b38783b95e3--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----5b38783b95e3--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----5b38783b95e3--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----5b38783b95e3--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----5b38783b95e3--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----5b38783b95e3--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@phoenixilya?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@phoenixilya?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Ilya Gusev"}, {"url": "https://medium.com/@phoenixilya/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "14 Followers"}, {"url": "http://Booking.com", "anchor_text": "Booking.com"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F99b43d56e4b6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fnews-aggregator-in-2-weeks-5b38783b95e3&user=Ilya+Gusev&userId=99b43d56e4b6&source=post_page-99b43d56e4b6--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fusers%2F99b43d56e4b6%2Flazily-enable-writer-subscription&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fnews-aggregator-in-2-weeks-5b38783b95e3&user=Ilya+Gusev&userId=99b43d56e4b6&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}