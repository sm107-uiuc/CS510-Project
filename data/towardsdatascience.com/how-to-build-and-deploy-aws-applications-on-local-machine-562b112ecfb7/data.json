{"url": "https://towardsdatascience.com/how-to-build-and-deploy-aws-applications-on-local-machine-562b112ecfb7", "time": 1683015686.386807, "path": "towardsdatascience.com/how-to-build-and-deploy-aws-applications-on-local-machine-562b112ecfb7/", "webpage": {"metadata": {"title": "How to Build and Deploy AWS Applications on Local Machine | by Siben Nayak | Towards Data Science", "h1": "How to Build and Deploy AWS Applications on Local Machine", "description": "In my previous articles, I talked about building and deploying serverless applications on AWS using Chalice and SAM. These were quick fun projects that leveraged the power of serverless computing and\u2026"}, "outgoing_paragraph_urls": [{"url": "https://towardsdatascience.com/how-to-build-a-serverless-application-using-aws-chalice-91024416d84f", "anchor_text": "Chalice", "paragraph_index": 0}, {"url": "https://towardsdatascience.com/how-to-build-a-serverless-application-using-aws-sam-b4d595fe689f", "anchor_text": "SAM", "paragraph_index": 0}, {"url": "https://towardsdatascience.com/how-to-build-a-serverless-application-using-aws-sam-b4d595fe689f", "anchor_text": "article", "paragraph_index": 4}, {"url": "https://towardsdatascience.com/how-to-build-a-serverless-application-using-aws-sam-b4d595fe689f", "anchor_text": "article", "paragraph_index": 6}, {"url": "https://towardsdatascience.com/how-to-build-a-serverless-application-using-aws-sam-b4d595fe689f", "anchor_text": "article", "paragraph_index": 34}, {"url": "https://docs.docker.com/get-docker/", "anchor_text": "here", "paragraph_index": 34}, {"url": "https://localstack.cloud/", "anchor_text": "LocalStack", "paragraph_index": 37}, {"url": "https://github.com/theawesomenayak/pet-store", "anchor_text": "here", "paragraph_index": 60}, {"url": "https://www.linkedin.com/in/theawesomenayak", "anchor_text": "https://www.linkedin.com/in/theawesomenayak", "paragraph_index": 62}], "all_paragraphs": ["In my previous articles, I talked about building and deploying serverless applications on AWS using Chalice and SAM. These were quick fun projects that leveraged the power of serverless computing and allowed us to deploy a serverless application on AWS within a few minutes.", "But many people are not able to completely leverage such tutorials due to lack of an AWS account. Setting up an AWS account and configuring a development environment can be time-consuming and sometimes lead to unwanted expenses as well (if not configured properly).", "In this article, I will walk you through the steps required to build and deploy a serverless application without having to create and setup an actual AWS account.", "This time, we will create a sample Pet Store application using Amazon API Gateway, AWS Lambda and Amazon DynamoDB. This application will have APIs for adding a new pet and fetching the list of available pets.", "We will be using AWS SAM for this tutorial. You can install and configure SAM by following the guidelines in the previous article.", "Run the sam-init command to create a new project. This will create a pet-store folder in your current directory.", "For more details about the parameters passed, please refer to the previous article.", "Let\u2019s change the pom.xml to update the name of the module to PetStore and use Java 11 instead of Java 8.", "Let\u2019s create a Pet class now to contain the attributes for the pets. We will start with simple attributes like name, age and category.", "Since we will be using Amazon DynamoDB as our data store, let\u2019s add the corresponding SDK dependencies in the pom.xml.", "This will bring in the dependencies for AWS SDK for DynamoDB and Apache HTTP Client that will be used for creating a synchronous DynamoDB client.", "We need to create a data access class to interact with Amazon DynamoDB and run our read/write queries. Create a PetStoreClient class and add the dependency on DynamoDbClient.", "We will now create two functions in PetStoreClient class to read and write items from DynamoDB.", "Adding a single item in DynamoDB is a PUT request. We will create a PutItemRequest and specify the table name and the item attributes to be added.", "We will then use the DynamoDbClient to put this item in DynamoDB.", "Reading a list of items in DynamoDB is a SCAN request. We will create a ScanRequest and specify the table name to be scanned.", "We will then use the DynamoDbClient to scan the table in DynamoDB and return a list of items.", "Note: A scan request goes through all the items in the table and hence is not recommended for real world use cases.", "We have added DynamoDbClient as a dependency in our PetStoreClient class. As a general best practice, all such dependencies in code should be resolved using Dependency Injection (DI).", "When talking about DI, Spring is the first name that pops up on our mind. However, the Spring ecosystem is HUGE and we will end up bringing in a lot of its frameworks even if we want to use just the DI part. The injection is done at runtime too, making the cold start time of Lambda even longer.", "Guice is another nice dependency injection framework that is much lighter than Spring. But just like Spring, it does the injection at runtime and hence is not a good candidate for DI as well.", "Then there is Dagger, a pure DI only framework that injects dependencies during compile time!! Its small size and compile time injection make it the perfect choice for implementing DI in Lambdas.", "I will go deeper into the details of DI and cover the use of Dagger in another article. In this article however, we will use the ageless style of static factory methods for providing dependencies.", "Let us create a class DependencyModule and declare all our dependencies in it.", "In this class, we are creating a new instance of DynamoDbClient and injecting it in our PetStoreClient. We are also creating an instance of ObjectMapper to help us deal with serialization and de-serialization of JSON objects.", "Next, we need to update the entry point for the Lambda function and add our specific endpoints for adding and retrieving pets.", "Add the following snippet to the Resources section of the template.yaml file.", "This updates our function to use the handleRequest method from App class and also adds two API endpoints for adding and retrieving pets.", "Update the Outputs section as well to reflect the new function name.", "Now that we have the code for interacting with DynamoDB ready and the dependencies sorted, we need to make changes in the Lambda handler to invoke this code.", "Update the code in App.java to invoke the functions in PetStoreClient and perform the actions according to the API request.", "Since we used static factories for dependency injection, we will not be able to effectively test our code. I will cover unit testing of cloud applications in another article. For now, we will need to delete the unit tests in order to build the project.", "From the pet-store folder, run the sam build command.", "This compiles your source code and builds any dependencies that you have in the application. It then moves all the files into the .aws-sam/build folder so that they are ready to be packaged and deployed.", "In the previous article, we discussed how SAM CLI provides the sam local command to run your application locally. This internally uses Docker to simulate the execution environment of Lambda. If you don\u2019t have Docker installed, you can get it from here.", "This was fine for the Daily News API because it fetched data from the internet and did not have dependency on any other AWS component. However, in the current project, we are relying on Amazon DynamoDB as our data store, and need access to it so that we can successfully run our application.", "Essentially, we need a way to somehow mock the services provided by AWS on our local machine so that we can test them locally without using an actual AWS account.", "LocalStack was created just to solve this problem. In it\u2019s own words:", "LocalStack provides an easy-to-use test/mocking framework for developing Cloud applications. It spins up a testing environment on your local machine that provides the same functionality and APIs as the real AWS cloud environment.", "In a nutshell, LocalStack brings all the features of AWS cloud into a docker container running locally on our machine. This enables developers to build and test their cloud applications without having to deploy them on an actual AWS cloud account.", "What does it mean for a developer?", "LocalStack is really easy to setup and start using. We will use Docker to pull in the latest image of LocalStack and start a container that runs a mock version of Amazon DynamoDB.", "Create a docker-compose.yaml file in the pet-store folder and add the following content.", "Let\u2019s take a look at some of the configuration we are using:", "Note: All LocalStack services are exposed via the edge service on port 4566. This is the only port we need to use.", "Now, we can use docker-compose to start our local version of Amazon DynamoDB in its own container.", "Now that we have a local setup of Amazon DynamoDB running, we should be able to create a table for our application.", "We had used pet-store as the table name in our code, so let\u2019s go ahead and create it. We will use AWS CLI to access Amazon DynamoDB running on our local machine and create the required table.", "Run the following command to create a table named pet-store with an attribute id as its primary key.", "Note that we have used the endpoint-url parameter to specify that we are pointing to the locally running AWS instance rather than the actual one.", "Make the following change to the DynamoDbClient code to point it to the locally running Amazon DynamoDB instance.", "Next, use sam build to build the project and run the following command to start the API locally.", "This internally creates a local server and exposes a local endpoint that replicates your REST API.", "Now, let\u2019s test our application by adding a new pet. Run the following command to add a new pet by invoking the /pets endpoint we specified earlier.", "This creates a new Pet record, adds it to our local Amazon DynamoDB, and returns the generated UUID in the response.", "Let\u2019s add another Pet to our store.", "Now, let\u2019s invoke our /pets API to get a list of pets available in our data store. We should expect to get a list of pets containing Rocket and Candle.", "Congratulations!! You just built and deployed a serverless application that uses AWS DynamoDB completely on your local machine.", "You can now go ahead and make any modifications to your App.java file. Rerun sam deploy to redeploy your changes and sam local start-api to start the local server and test the changes.", "Once you are ready for deployment, you just need to remove the endpoint overrides and you are good to go. In an ideal situation, this would be controlled by environment variables and would require absolutely no code change to make it production ready.", "The full source code for this tutorial can be found here.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Staff Software Engineer @ Intuit, ex-Amazon, Intel \u2022 Blogger \u2022 Speaker \u2022 Love Coding and Distributed Systems \u2022 https://www.linkedin.com/in/theawesomenayak"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F562b112ecfb7&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-build-and-deploy-aws-applications-on-local-machine-562b112ecfb7&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-build-and-deploy-aws-applications-on-local-machine-562b112ecfb7&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-build-and-deploy-aws-applications-on-local-machine-562b112ecfb7&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-build-and-deploy-aws-applications-on-local-machine-562b112ecfb7&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----562b112ecfb7--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----562b112ecfb7--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://theawesomenayak.medium.com/?source=post_page-----562b112ecfb7--------------------------------", "anchor_text": ""}, {"url": "https://theawesomenayak.medium.com/?source=post_page-----562b112ecfb7--------------------------------", "anchor_text": "Siben Nayak"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F843573af65d4&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-build-and-deploy-aws-applications-on-local-machine-562b112ecfb7&user=Siben+Nayak&userId=843573af65d4&source=post_page-843573af65d4----562b112ecfb7---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F562b112ecfb7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-build-and-deploy-aws-applications-on-local-machine-562b112ecfb7&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F562b112ecfb7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-build-and-deploy-aws-applications-on-local-machine-562b112ecfb7&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://towardsdatascience.com/tagged/hands-on-tutorials", "anchor_text": "Hands-on Tutorials"}, {"url": "https://www.canva.com/p/pixabay/", "anchor_text": "Pixabay"}, {"url": "https://www.canva.com/media/MADQ4_ajPZc", "anchor_text": "Canva"}, {"url": "https://towardsdatascience.com/how-to-build-a-serverless-application-using-aws-chalice-91024416d84f", "anchor_text": "Chalice"}, {"url": "https://towardsdatascience.com/how-to-build-a-serverless-application-using-aws-sam-b4d595fe689f", "anchor_text": "SAM"}, {"url": "https://towardsdatascience.com/how-to-build-a-serverless-application-using-aws-sam-b4d595fe689f", "anchor_text": "article"}, {"url": "https://towardsdatascience.com/how-to-build-a-serverless-application-using-aws-sam-b4d595fe689f", "anchor_text": "article"}, {"url": "https://towardsdatascience.com/how-to-build-a-serverless-application-using-aws-sam-b4d595fe689f", "anchor_text": "article"}, {"url": "https://docs.docker.com/get-docker/", "anchor_text": "here"}, {"url": "https://localstack.cloud/", "anchor_text": "LocalStack"}, {"url": "http://localhost:4566", "anchor_text": "http://localhost:4566"}, {"url": "http://127.0.0.1:3000/pet'", "anchor_text": "http://127.0.0.1:3000/pets'"}, {"url": "http://127.0.0.1:3000/pet'", "anchor_text": "http://127.0.0.1:3000/pets'"}, {"url": "https://github.com/theawesomenayak/pet-store", "anchor_text": "here"}, {"url": "https://medium.com/tag/aws?source=post_page-----562b112ecfb7---------------aws-----------------", "anchor_text": "AWS"}, {"url": "https://medium.com/tag/programming?source=post_page-----562b112ecfb7---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/tag/software-development?source=post_page-----562b112ecfb7---------------software_development-----------------", "anchor_text": "Software Development"}, {"url": "https://medium.com/tag/cloud-computing?source=post_page-----562b112ecfb7---------------cloud_computing-----------------", "anchor_text": "Cloud Computing"}, {"url": "https://medium.com/tag/hands-on-tutorials?source=post_page-----562b112ecfb7---------------hands_on_tutorials-----------------", "anchor_text": "Hands On Tutorials"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F562b112ecfb7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-build-and-deploy-aws-applications-on-local-machine-562b112ecfb7&user=Siben+Nayak&userId=843573af65d4&source=-----562b112ecfb7---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F562b112ecfb7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-build-and-deploy-aws-applications-on-local-machine-562b112ecfb7&user=Siben+Nayak&userId=843573af65d4&source=-----562b112ecfb7---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F562b112ecfb7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-build-and-deploy-aws-applications-on-local-machine-562b112ecfb7&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----562b112ecfb7--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F562b112ecfb7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-build-and-deploy-aws-applications-on-local-machine-562b112ecfb7&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----562b112ecfb7---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----562b112ecfb7--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----562b112ecfb7--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----562b112ecfb7--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----562b112ecfb7--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----562b112ecfb7--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----562b112ecfb7--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----562b112ecfb7--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----562b112ecfb7--------------------------------", "anchor_text": ""}, {"url": "https://theawesomenayak.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://theawesomenayak.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Siben Nayak"}, {"url": "https://theawesomenayak.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "231 Followers"}, {"url": "https://www.linkedin.com/in/theawesomenayak", "anchor_text": "https://www.linkedin.com/in/theawesomenayak"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F843573af65d4&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-build-and-deploy-aws-applications-on-local-machine-562b112ecfb7&user=Siben+Nayak&userId=843573af65d4&source=post_page-843573af65d4--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F8bfa1239f5af&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-build-and-deploy-aws-applications-on-local-machine-562b112ecfb7&newsletterV3=843573af65d4&newsletterV3Id=8bfa1239f5af&user=Siben+Nayak&userId=843573af65d4&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}