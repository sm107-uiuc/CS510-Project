{"url": "https://towardsdatascience.com/sentiment-analysis-on-the-tweets-about-distance-learning-with-textblob-cc73702b48bc", "time": 1683012485.852669, "path": "towardsdatascience.com/sentiment-analysis-on-the-tweets-about-distance-learning-with-textblob-cc73702b48bc/", "webpage": {"metadata": {"title": "Sentiment analysis on the tweets about distance learning with TextBlob | by Bar\u0131\u015f Hasdemir | Towards Data Science", "h1": "Sentiment analysis on the tweets about distance learning with TextBlob", "description": "The Covid19 Pandemic brought about distance learning in the 2020 academic term. Although some people could adapt easily, some of them found it inefficient. Nowadays, the re-opening of schools is\u2026"}, "outgoing_paragraph_urls": [{"url": "https://github.com/Bhasfe/distance_learning", "anchor_text": "here", "paragraph_index": 4}, {"url": "https://developer.twitter.com/", "anchor_text": "here", "paragraph_index": 5}, {"url": "https://github.com/Bhasfe/distance_learning/blob/master/get_tweets.py", "anchor_text": "get_tweets.py", "paragraph_index": 6}, {"url": "https://pypi.org/project/pycountry/", "anchor_text": "here", "paragraph_index": 26}, {"url": "https://scikit-learn.org/stable/modules/generated/sklearn.feature_extraction.text.TfidfVectorizer.html", "anchor_text": "here", "paragraph_index": 30}, {"url": "https://textblob.readthedocs.io/en/dev/quickstart.html#sentiment-analysis", "anchor_text": "documentation", "paragraph_index": 45}], "all_paragraphs": ["The Covid19 Pandemic brought about distance learning in the 2020 academic term. Although some people could adapt easily, some of them found it inefficient. Nowadays, the re-opening of schools is being discussed. Most experts suggest that at least one semester should be online again. As a student who passed the last semester with distance learning, I could find a lot of time to spend on learning natural language processing. Finally, I decided to explore what people think about distance learning.", "I am planning this story as an end-to-end project. We are going to explore the tweets related to distance learning to understand people\u2019s opinions (a.k.a opinion mining) and to discover facts. I will use the lexicon-based approach to determine the tweets\u2019 polarities (I\u2019ll explain it later). TextBlob will be our tool to do that. We will also build a machine learning model to predict the positivity and the negativity of the tweets by using Bernoulli Naive Bayes Classifier.", "Before starting, please make sure that the following libraries are available in your workspace.", "You can use the following commands to install non-built-in libraries.", "You can find the entire code here.", "First of all, we need a Twitter Developer Account to be allowed to use Twitter API. You can get the account here. It can take a few days to be approved. I have already completed those steps. Once I got the account, I created a text file that contains API information. It is located on the upward directory of the project. The content of the text file is the following. If you want to use it you have to replace the information with yours.", "After that, I created a py file called get_tweets.py to collect tweets (in English only) related to distance learning. You can see the entire code below.", "The code above, searches the tweets contain the following hashtags", "It also filters the retweets to avoid duplication.", "The get_tweets function stores the tweets retrieved in a temporary pandas DataFrame and saves as CSV files in the output directory. It approximately took 40 hours to collect 202.645 tweets. After that, It gave me the following files", "To concatenate all CSV files into one, I created the concatenate.py file that contains the following code.", "Ultimately, we have tweets_raw.csv file. Let\u2019s look at how it looks like.", "At a first glance, we can see that there are 202.645 tweets including the content, location, username, Retweet count, Favorites count, and the creation time features in the DataFrame. There are also some missing values in the Location column. We\u2019ll deal with them in the next step.", "According to the information above, Unnamed: 0 and Unnamed: 0.1 columns are not informative to us so we\u2019ll drop them out. The data type of Created at column also should be datetime. As well as we need to get rid of duplicated tweets if there are some.", "The tweets count has been reduced to 187.052 (There were 15.593 duplicated rows). \u201cCreated at\u201d column\u2019s data type is also changed to datatime64[ns].", "Now, let\u2019s tidy the tweets\u2019 contents up. We need to get rid of stopwords, punctuation, hashtags, mentions, links, and one or two-letter words. As well as we need to tokenize the tweets.", "Tokenization is the splitting of a sentence into words and punctuation marks. The sentence \u201cThis is an example.\u201d can be tokenized like [\u201cThis\u201d, \u201cis\u201d, \u201can\u201d, \u201cexample\u201d, \u201c.\u201d]", "Stopwords are the words that are commonly used and they don\u2019t contribute to the meaning of a sentence such as \u201ca\u201d, \u201can\u201d, \u201cthe\u201d, \u201con\u201d, \u201cin\u201d and so forth.", "Lemmatization is the process of reducing a word to its root form. This root form called a lemma. For example, the lemma of words running runs, and ran is run", "Let\u2019s define a function to do all of these operations.", "After the function call, our Processed column will be like the following. You see that the tweets are tokenized and they do not contain stopwords, hashtags, links, and one or two-letter words. We also applied the lemmatization operation on them.", "We got what we want. Do not worry about words such as learning, online, education, etc. We will deal with them later.", "Tweet lengths and number of words in the tweets might be also interesting in the exploratory data analysis. Let\u2019s get them!", "Notice that we did not use the Processed tweets.", "When we called the info function of tweets_raw DataFrame, we saw that there were some missing values in the \u201cLocation\u201d columns. The missing values are indicated as NaN. We\u2019ll fill the missing values with the \u201cunknown\u201d tag.", "How many unique locations we have?", "The outputs show us the location information is messy. There are 37.119 unique locations. We need to group them by country. To achieve this, we will use the pycountry package in python. If you are interested, you can find further information here.", "Let\u2019s define a function called get_countries which returns the country codes of the given locations.", "It worked! Now we have 156 unique country codes. We will use them for the exploratory data analysis part.", "Now it\u2019s time to vectorize the tweets. We\u2019ll use tf-idf (term frequency-inverse document term frequency) vectorization.", "Tf-idf (Term Frequency \u2014 Inverse Term Frequency) is a statistical concept to be used to get the frequency of words in the corpus. We\u2019ll use scikit-learn\u2019s TfidfVectorizer. The vectorizer will calculate the weight of each word in the corpus and will return a tf-idf matrix. You can find further information here", "td = Term frequency (number of occurrences each i in j)df = Document frequencyN = Number of documentsw = tf-idf weight for each i and j (document).", "We are going to select only the top 5000 words for tf-idf vectorization due to memory constraints. You can experiment with more by using other approaches like hashing.", "It returned us a sparse matrix. You can look at its content below.", "PAfter all, we save the new DataFrame as a CSV file to use later without performing whole operations again.", "Exploratory data analysis is an indispensable part of data science projects. We can build our models as long as we understand what our data tell us.", "First of all, let\u2019s look at the oldest and the newest tweets creation time in our data set.", "The tweets have been created between 23 July and 14 August 2020. What about the creation hours?", "The histogram demonstrates that most of the tweets are created between 12 am-17 pm in a day. The most popular hour is about 15 pm.", "Let\u2019s look at the locations that we have already processed.", "Apparently, the locations will be noninformative for us because we have 169.734 unknown locations. But we can still check the top tweeting countries.", "According to the bar plot above, United States, United Kingdom, and India are the top 3 countries in our dataset.", "Now, let\u2019s look at the most popular tweets (in terms of retweets and favorites).", "The frequent words in the tweets can also tell us a lot. Let\u2019s get them from our Tf-idf matrix.", "Apparently, people talk about \u201cpayment\u201d. \u201cHelp\u201d is one of the most frequent words. We can say that people are looking for help a lot :)", "After preprocessing and EDA, we can finally focus on our main aim in this project. We are going to calculate the tweets\u2019 sentimental features such as polarity and subjectivity by using TextBlob. It gives us these values by using the predefined word scores. You can check the documentation for more information.", "polarity is a value changes between -1 to 1. It shows us how positive or negative the sentence given is.", "subjectivity is another value changes between 0 to 1 which shows us whether the sentence is about a fact or opinion (objective or subjective).", "Let\u2019s calculate the polarity and subjectivity scores with TextBlob", "We need to classify the polarities as positive, neutral, and negative.", "We can also count them up like the following.", "The results are different than what I expected. Positive tweets are significantly more than negative ones.", "We tagged the tweets as positive, neutral, and negative so far. Let\u2019s go over our findings deeply. I will start with label counts.", "Since the lexicon-based analysis is not always reliable, we have to check the results manually. Let\u2019s see the popular (in terms of retweets and favorites) tweets that have the highest/lowest polarity scores.", "According to the results above, TextBlob has done its job correctly! We can make word clouds for each label as we did above. To do this, I will define a function. The function will take a DataFrame and a label as arguments and vectorized the Processed tweets with tf-idf vectorizer. Finally, it will make the word clouds for us. We will only look at the most popular 50 tweets because of the computational constraints. You can try with more data.", "Apparently, people whose tweets are negative find distance learning is boring, horrible, and terrible. On the other hand, some people like options for distance learning.", "Let\u2019s look at the positive and negative tweet counts by country.", "Is there any relationship between the time and tweets\u2019 polarities?", "The histogram above demonstrates that there is no relationship between the time and tweets\u2019 polarities.", "I want to finish my exploration here to keep this story short.", "We have labeled the tweets according to their polarity scores. Let\u2019s build a Machine Learning model by using a Multinomial Naive Bayes Classifier. We will use our tf-idf vectors as the features and the labels as the target.", "Now, we need to split our data into train and test sets. We\u2019ll use the stratify parameter of train_test_split since our data is unbalanced.", "Now, we can create our model. Since our earlier tf-idf vectorizer fit by the entire dataset, we have to initialize a new one. Otherwise, our model can learn by the test set.", "Although we did not do any hyperparameter tuning, the accuracy is not bad. Let\u2019s look at the confusion matrix and classification report.", "There is still a lot to do for improving the model\u2019s performance on negative tweets but I keep it for another story :)", "Finally, we can save the model to use later.", "In summary, let\u2019s remember what we did together. Firstly, we have collected the Tweets about distance learning by using Twitter API and the tweepy library. After that we applied common preprocessing steps on them such as tokenization, lemmatization, removing stopwords, and so forth. We explored the data by using summary statistics and visualization tools. After all, we used TextBlob to get polarity scores of the tweets and interpreted our findings. Consequently, we found that in our dataset most of the tweets have positive opinions about distance learning. Do not forget the fact that we only used a lexicon-based approach which is not very reliable. I hope this story will be helpful for you to understand the sentiment analysis of tweets.", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fcc73702b48bc&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsentiment-analysis-on-the-tweets-about-distance-learning-with-textblob-cc73702b48bc&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsentiment-analysis-on-the-tweets-about-distance-learning-with-textblob-cc73702b48bc&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsentiment-analysis-on-the-tweets-about-distance-learning-with-textblob-cc73702b48bc&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsentiment-analysis-on-the-tweets-about-distance-learning-with-textblob-cc73702b48bc&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----cc73702b48bc--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----cc73702b48bc--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@barishasdemir?source=post_page-----cc73702b48bc--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@barishasdemir?source=post_page-----cc73702b48bc--------------------------------", "anchor_text": "Bar\u0131\u015f Hasdemir"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fd2e514ba0025&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsentiment-analysis-on-the-tweets-about-distance-learning-with-textblob-cc73702b48bc&user=Bar%C4%B1%C5%9F+Hasdemir&userId=d2e514ba0025&source=post_page-d2e514ba0025----cc73702b48bc---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fcc73702b48bc&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsentiment-analysis-on-the-tweets-about-distance-learning-with-textblob-cc73702b48bc&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fcc73702b48bc&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsentiment-analysis-on-the-tweets-about-distance-learning-with-textblob-cc73702b48bc&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://github.com/Bhasfe/distance_learning", "anchor_text": "here"}, {"url": "https://developer.twitter.com/", "anchor_text": "here"}, {"url": "https://github.com/Bhasfe/distance_learning/blob/master/get_tweets.py", "anchor_text": "get_tweets.py"}, {"url": "https://pypi.org/project/pycountry/", "anchor_text": "here"}, {"url": "https://scikit-learn.org/stable/modules/generated/sklearn.feature_extraction.text.TfidfVectorizer.html", "anchor_text": "here"}, {"url": "https://textblob.readthedocs.io/en/dev/quickstart.html#sentiment-analysis", "anchor_text": "documentation"}, {"url": "https://www.datacamp.com/community/tutorials/simplifying-sentiment-analysis-python", "anchor_text": "https://www.datacamp.com/community/tutorials/simplifying-sentiment-analysis-python"}, {"url": "https://towardsdatascience.com/twitter-sentiment-analysis-nlp-text-analytics-b7b296d71fce", "anchor_text": "https://towardsdatascience.com/twitter-sentiment-analysis-nlp-text-analytics-b7b296d71fce"}, {"url": "https://towardsdatascience.com/real-time-twitter-sentiment-analysis-for-brand-improvement-and-topic-tracking-chapter-1-3-e02f7652d8ff", "anchor_text": "https://towardsdatascience.com/real-time-twitter-sentiment-analysis-for-brand-improvement-and-topic-tracking-chapter-1-3-e02f7652d8ff"}, {"url": "https://medium.com/better-programming/twitter-sentiment-analysis-15d8892c0082", "anchor_text": "https://medium.com/better-programming/twitter-sentiment-analysis-15d8892c0082"}, {"url": "https://www.datacamp.com/community/tutorials/stemming-lemmatization-python", "anchor_text": "https://www.datacamp.com/community/tutorials/stemming-lemmatization-python"}, {"url": "https://medium.com/tag/twitter-data?source=post_page-----cc73702b48bc---------------twitter_data-----------------", "anchor_text": "Twitter Data"}, {"url": "https://medium.com/tag/sentiment-analysis?source=post_page-----cc73702b48bc---------------sentiment_analysis-----------------", "anchor_text": "Sentiment Analysis"}, {"url": "https://medium.com/tag/textblob?source=post_page-----cc73702b48bc---------------textblob-----------------", "anchor_text": "Textblob"}, {"url": "https://medium.com/tag/data-science?source=post_page-----cc73702b48bc---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/nlp?source=post_page-----cc73702b48bc---------------nlp-----------------", "anchor_text": "NLP"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fcc73702b48bc&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsentiment-analysis-on-the-tweets-about-distance-learning-with-textblob-cc73702b48bc&user=Bar%C4%B1%C5%9F+Hasdemir&userId=d2e514ba0025&source=-----cc73702b48bc---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fcc73702b48bc&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsentiment-analysis-on-the-tweets-about-distance-learning-with-textblob-cc73702b48bc&user=Bar%C4%B1%C5%9F+Hasdemir&userId=d2e514ba0025&source=-----cc73702b48bc---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fcc73702b48bc&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsentiment-analysis-on-the-tweets-about-distance-learning-with-textblob-cc73702b48bc&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----cc73702b48bc--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fcc73702b48bc&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsentiment-analysis-on-the-tweets-about-distance-learning-with-textblob-cc73702b48bc&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----cc73702b48bc---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----cc73702b48bc--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----cc73702b48bc--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----cc73702b48bc--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----cc73702b48bc--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----cc73702b48bc--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----cc73702b48bc--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----cc73702b48bc--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----cc73702b48bc--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@barishasdemir?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@barishasdemir?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Bar\u0131\u015f Hasdemir"}, {"url": "https://medium.com/@barishasdemir/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "101 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fd2e514ba0025&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsentiment-analysis-on-the-tweets-about-distance-learning-with-textblob-cc73702b48bc&user=Bar%C4%B1%C5%9F+Hasdemir&userId=d2e514ba0025&source=post_page-d2e514ba0025--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fa8c501bc7595&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsentiment-analysis-on-the-tweets-about-distance-learning-with-textblob-cc73702b48bc&newsletterV3=d2e514ba0025&newsletterV3Id=a8c501bc7595&user=Bar%C4%B1%C5%9F+Hasdemir&userId=d2e514ba0025&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}