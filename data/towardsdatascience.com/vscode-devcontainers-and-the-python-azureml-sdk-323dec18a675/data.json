{"url": "https://towardsdatascience.com/vscode-devcontainers-and-the-python-azureml-sdk-323dec18a675", "time": 1683008730.273857, "path": "towardsdatascience.com/vscode-devcontainers-and-the-python-azureml-sdk-323dec18a675/", "webpage": {"metadata": {"title": "A Python AzureML SDK workflow with VSCode devcontainers | by Luuk van der Velden | Towards Data Science", "h1": "A Python AzureML SDK workflow with VSCode devcontainers", "description": "Microsoft is making great strides in conquering our hearts and mingling with the open source Ecosystem. The same ecosystem they openly worked against in the 00s. I confess I am in the process of\u2026"}, "outgoing_paragraph_urls": [{"url": "https://towardsdatascience.com/unifying-remote-and-local-azureml-environments-bcea1292e37f", "anchor_text": "Part 2", "paragraph_index": 1}, {"url": "https://code.visualstudio.com/blogs/2019/05/02/remote-development", "anchor_text": "vscode-dev-blog", "paragraph_index": 2}, {"url": "https://www.docker.com/blog/new-docker-desktop-wsl2-backend/", "anchor_text": "docker-wsl2-backend", "paragraph_index": 4}, {"url": "https://www.docker.com/blog/docker-desktop-for-windows-home-is-here/", "anchor_text": "docker-windows-home", "paragraph_index": 5}, {"url": "https://devblogs.microsoft.com/commandline/the-windows-subsystem-for-linux-build-2020-summary/", "anchor_text": "WSL2-dev-blog", "paragraph_index": 5}, {"url": "https://github.com/Microsoft/vscode-dev-containers", "anchor_text": "vscode-dev-containers", "paragraph_index": 6}, {"url": "https://github.com/microsoft/vscode-dev-containers/tree/master/containers/azure-machine-learning-python-3", "anchor_text": "azureml-dev-container", "paragraph_index": 6}, {"url": "https://github.com/luuk-codebeez/vscode-dev-containers/tree/for-blog", "anchor_text": "my-branch", "paragraph_index": 8}, {"url": "https://devblogs.microsoft.com/commandline/the-windows-subsystem-for-linux-build-2020-summary/", "anchor_text": "WSL2-dev-blog", "paragraph_index": 9}, {"url": "https://github.com/luuk-codebeez/vscode-dev-containers/tree/for-blog", "anchor_text": "my-branch", "paragraph_index": 11}, {"url": "https://ml.azure.com/", "anchor_text": "https://ml.azure.com", "paragraph_index": 14}, {"url": "https://docs.microsoft.com/en-us/azure/machine-learning/how-to-configure-environment#workspace", "anchor_text": "configure-workspace", "paragraph_index": 15}, {"url": "https://docs.microsoft.com/en-us/azure/machine-learning/how-to-set-up-training-targets#amlcompute", "anchor_text": "amlcompute-docs", "paragraph_index": 16}], "all_paragraphs": ["Microsoft is making great strides in conquering our hearts and mingling with the open source Ecosystem. The same ecosystem they openly worked against in the 00s. I confess I am in the process of being assimilated into the Microsoft world and am feeling good about it. In this blog I describe a development workflow for launching ML models in the cloud (AzureML) and developing code in VSCode remotely.", "See also: Part 2: Unifying remote and local AzureML environments", "Being fairly late to VSCode it took me by surprise after my usual period of denial. The remote development functionality introduced in Q2 2019 (vscode-dev-blog) really sealed the deal for me. There are three flavors to this:", "This is very rich functionality which does not disappoint in reliability. Let us take a closer look.", "Windows subsystem for Linux (WSL) has been around for a number of years. WSL2 unifies running Linux based docker containers and WSL Linux on the same architecture (docker-wsl2-backend). Importantly it removed complex virtualization from the architecture and WSL Linux runs pretty much natively. VSCode can work on code on the windows filesystem and run its server on WSL; integrating seamlessly with Python interpreters and shells.", "In this blog we suggest running the VSCode server inside a docker container on the WSL2 backend with the GUI running on the Windows desktop. WSL2 is the future and has benefits, such as Windows Home support (docker-windows-home), resource management and the potential for GPU support (WSL2-dev-blog). What we discuss also works on the historic Docker backend.", "Microsoft provides well maintained Dockerfiles containing common development tools for language and language agnostic scenarios (vscode-dev-containers). We selected the azure-machine-learning-python-3 container (azureml-dev-container), because of its Conda Python interpreter with the azureml-sdk package installed. The image derives from Ubuntu. If we include the \u201c./.devcontainer\u201d folder in any of our projects VSCode will:", "The settings for VSCode container integration are stored in \u201c./.devcontainer/devcontainer.json\u201d and allow any Dockerfile to be integrated without alteration.", "We can add our favorite development tools to these devcontainers as additional layers in the Dockerfile. Or we can build on top of a base image by calling \u201cFROM\u201d in our custom \u201cDockerfile\u201d. For instance, adding the Azure CLI with extensions and Terraform with \u201cRUN\u201d commands (my-branch). An image with your favorite development environment can be a good companion to have. We can manage our custom image in one place and provide symbolic links to it from each of our projects.", "We can develop using fully reproducible Linux tool chains and still work on a windows laptop. This is probably not convincing to a Linux or MacOS user, but if you become comfortable with these tools you will have them available almost anywhere. This is valuable if you work for companies that provide you with the infrastructure and a laptop. Another scenario would be training deep learning models with GPUs with your gaming desktop windows computer, as GPU support for WSL2 has been announced (WSL2-dev-blog).", "A prerequisite for this section is an active Azure subscription. You can easily get a free azure account with starting credits, if you can get hold of a credit card.", "Our VSCode runs within a devcontainer featuring Python and the AzureML Python SDK. The SDK contains an elaborate API spanning the entire lifecycle of an ML model. From exploration in notebooks, training and tracking the model to artifact management and deployment. This includes the provisioning and configuration of the compute for model training and the deployment targets for model scoring. Some of the tools (Azure CLI) I will reference were added in my own fork (my-branch).", "The following diagram shows the workflow we are aiming at. We launch an experiment from VSCode using the AzureML SDK inside our devcontainer and the SDK executes our code on the compute target. The compute target runs our code within a docker container as well. The specifics of the runtime environment are discussed in part 2/2 of this blog.", "Let us look at Python AzureML SDK code to:", "An AzureML workspace consists of a storage account, a docker image registry and the actual workspace with a rich UI on portal.azure.com. A new related Machine Learning studio is in open Beta and looks really good (https://ml.azure.com). The following code creates the workspace and its required services and attaches them to a new resource group.", "We need compute resources to train our ML model. We can create, orchestrate the compute clusters using the AzureML Python SDK. The workspace to create the resources in is defined by config.json file in the working directory (configure-workspace). AmlCompute stands for Azure Machine Learning Compute and it is the configuration class for the cluster. If the cluster does not exist we create one scaling from 0 to a defined maximum number of virtual machines (VMs). These VMs are running docker. We pass the provisioning configuration to the create method of the ComputeTarget class, which returns a ComputeTarget object. This object is used whenever we want to perform computations. The following code can be wrapped into a function to get the compute_target.", "We want to run a Python script on our compute cluster. In part 2/2 of this series we will go into configuring the runtime Environment in detail. Here we show the minimum code needed to run a Pyton script on a compute_target (amlcompute-docs).", "We have seen how easy it is to create an Azure ML workspace, spinning up a compute cluster and running a Python script on it. All this is tracked as an experiment within the ML studio.", "Microsoft is all-in on Machine Learning and Python and this shows. For our workflow we have added Docker/WSL2 into the mix. From a developer perspective it is important that all the pieces work together reliably to allow actual work getting done. I am impressed with the quality of the various parts of the eco-system: Docker/WSL2, VSCode and AzureML and their integration into a workflow. Of course, there are some pitfalls along the way which are summarized below.", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F323dec18a675&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvscode-devcontainers-and-the-python-azureml-sdk-323dec18a675&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvscode-devcontainers-and-the-python-azureml-sdk-323dec18a675&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvscode-devcontainers-and-the-python-azureml-sdk-323dec18a675&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvscode-devcontainers-and-the-python-azureml-sdk-323dec18a675&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----323dec18a675--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----323dec18a675--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://luukvandervelden.medium.com/?source=post_page-----323dec18a675--------------------------------", "anchor_text": ""}, {"url": "https://luukvandervelden.medium.com/?source=post_page-----323dec18a675--------------------------------", "anchor_text": "Luuk van der Velden"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Ff6c293b24331&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvscode-devcontainers-and-the-python-azureml-sdk-323dec18a675&user=Luuk+van+der+Velden&userId=f6c293b24331&source=post_page-f6c293b24331----323dec18a675---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F323dec18a675&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvscode-devcontainers-and-the-python-azureml-sdk-323dec18a675&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F323dec18a675&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvscode-devcontainers-and-the-python-azureml-sdk-323dec18a675&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://towardsdatascience.com/unifying-remote-and-local-azureml-environments-bcea1292e37f", "anchor_text": "Part 2"}, {"url": "https://code.visualstudio.com/blogs/2019/05/02/remote-development", "anchor_text": "vscode-dev-blog"}, {"url": "https://www.docker.com/blog/new-docker-desktop-wsl2-backend/", "anchor_text": "docker-wsl2-backend"}, {"url": "https://www.docker.com/blog/docker-desktop-for-windows-home-is-here/", "anchor_text": "docker-windows-home"}, {"url": "https://devblogs.microsoft.com/commandline/the-windows-subsystem-for-linux-build-2020-summary/", "anchor_text": "WSL2-dev-blog"}, {"url": "https://github.com/Microsoft/vscode-dev-containers", "anchor_text": "vscode-dev-containers"}, {"url": "https://github.com/microsoft/vscode-dev-containers/tree/master/containers/azure-machine-learning-python-3", "anchor_text": "azureml-dev-container"}, {"url": "https://github.com/luuk-codebeez/vscode-dev-containers/tree/for-blog", "anchor_text": "my-branch"}, {"url": "https://github.com/microsoft/vscode-dev-containers/tree/master/containers/azure-machine-learning-python-3", "anchor_text": "https://github.com/microsoft/vscode-dev-containers/tree/master/containers/azure-machine-learning-python-3"}, {"url": "https://devblogs.microsoft.com/commandline/the-windows-subsystem-for-linux-build-2020-summary/", "anchor_text": "WSL2-dev-blog"}, {"url": "https://github.com/luuk-codebeez/vscode-dev-containers/tree/for-blog", "anchor_text": "my-branch"}, {"url": "http://www.microsoft.com/devicelogin", "anchor_text": "www.microsoft.com/devicelogin"}, {"url": "https://ml.azure.com/", "anchor_text": "https://ml.azure.com"}, {"url": "https://docs.microsoft.com/en-us/azure/machine-learning/how-to-configure-environment#workspace", "anchor_text": "configure-workspace"}, {"url": "https://docs.microsoft.com/en-us/azure/machine-learning/how-to-set-up-training-targets#amlcompute", "anchor_text": "amlcompute-docs"}, {"url": "https://devblogs.microsoft.com/commandline/chmod-chown-wsl-improvements/", "anchor_text": "wsl-chmod-dev-blog"}, {"url": "https://stephenreescarter.net/automatic-backups-for-wsl2/", "anchor_text": "wsl-scheduling"}, {"url": "https://codebeez.nl/blogs/microsoft-and-python-machine-learning-modern-love-story-part-1/", "anchor_text": "https://codebeez.nl"}, {"url": "https://medium.com/tag/azure?source=post_page-----323dec18a675---------------azure-----------------", "anchor_text": "Azure"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----323dec18a675---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/tag/vscode?source=post_page-----323dec18a675---------------vscode-----------------", "anchor_text": "Vscode"}, {"url": "https://medium.com/tag/python?source=post_page-----323dec18a675---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/towards-data-science?source=post_page-----323dec18a675---------------towards_data_science-----------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F323dec18a675&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvscode-devcontainers-and-the-python-azureml-sdk-323dec18a675&user=Luuk+van+der+Velden&userId=f6c293b24331&source=-----323dec18a675---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F323dec18a675&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvscode-devcontainers-and-the-python-azureml-sdk-323dec18a675&user=Luuk+van+der+Velden&userId=f6c293b24331&source=-----323dec18a675---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F323dec18a675&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvscode-devcontainers-and-the-python-azureml-sdk-323dec18a675&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----323dec18a675--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F323dec18a675&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvscode-devcontainers-and-the-python-azureml-sdk-323dec18a675&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----323dec18a675---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----323dec18a675--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----323dec18a675--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----323dec18a675--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----323dec18a675--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----323dec18a675--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----323dec18a675--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----323dec18a675--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----323dec18a675--------------------------------", "anchor_text": ""}, {"url": "https://luukvandervelden.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://luukvandervelden.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Luuk van der Velden"}, {"url": "https://luukvandervelden.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "35 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Ff6c293b24331&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvscode-devcontainers-and-the-python-azureml-sdk-323dec18a675&user=Luuk+van+der+Velden&userId=f6c293b24331&source=post_page-f6c293b24331--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F7ad4b2d3ea43&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvscode-devcontainers-and-the-python-azureml-sdk-323dec18a675&newsletterV3=f6c293b24331&newsletterV3Id=7ad4b2d3ea43&user=Luuk+van+der+Velden&userId=f6c293b24331&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}