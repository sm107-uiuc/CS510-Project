{"url": "https://towardsdatascience.com/data-driven-growth-with-python-part-2-customer-segmentation-5c019d150444", "time": 1682996051.699691, "path": "towardsdatascience.com/data-driven-growth-with-python-part-2-customer-segmentation-5c019d150444/", "webpage": {"metadata": {"title": "Customer Segmentation. Segmentation by RFM clustering | by Bar\u0131\u015f Karaman | Towards Data Science", "h1": "Customer Segmentation", "description": "Segmentation by RFM clustering"}, "outgoing_paragraph_urls": [{"url": "https://towardsdatascience.com/a-b-testing-design-execution-6cf9e27c6559", "anchor_text": "9- A/B Testing Design and Execution", "paragraph_index": 2}, {"url": "https://www.kaggle.com/learn/python?source=post_page---------------------------", "anchor_text": "Python", "paragraph_index": 3}, {"url": "https://www.kaggle.com/learn/pandas?source=post_page---------------------------", "anchor_text": "Pandas", "paragraph_index": 3}, {"url": "https://jupyter.readthedocs.io/en/latest/install.html?source=post_page---------------------------", "anchor_text": "upyter Notebook", "paragraph_index": 5}, {"url": "https://www.python.org/downloads/?source=post_page---------------------------", "anchor_text": "ython", "paragraph_index": 5}, {"url": "https://medium.com/@karamanbk/data-driven-growth-with-python-part-1-know-your-metrics-812781e66a5b", "anchor_text": "previous article", "paragraph_index": 6}, {"url": "https://www.kaggle.com/vijayuv/onlineretail", "anchor_text": "here", "paragraph_index": 14}, {"url": "https://medium.com/@karamanbk/data-driven-growth-with-python-part-3-customer-lifetime-value-prediction-6017802f2e0f", "anchor_text": "Part 3", "paragraph_index": 39}, {"url": "https://gist.github.com/karamanbk/962443877d629713e0e410d52443c7d6", "anchor_text": "here", "paragraph_index": 40}, {"url": "https://app.growthmentor.com/mentors/baris-karaman", "anchor_text": "here", "paragraph_index": 42}], "all_paragraphs": ["This series of articles was designed to explain how to use Python in a simplistic way to fuel your company\u2019s growth by applying the predictive approach to all your actions. It will be a combination of programming, data analysis, and machine learning.", "I will cover all the topics in the following nine articles:", "9- A/B Testing Design and Execution", "Articles will have their own code snippets to make you easily apply them. If you are super new to programming, you can have a good introduction for Python and Pandas (a famous library that we will use on everything) here. But still without a coding introduction, you can learn the concepts, how to use your data and start generating value out of it:", "Sometimes you gotta run before you can walk \u2014 Tony Stark", "As a pre-requisite, be sure Jupyter Notebook and Python are installed on your computer. The code snippets will run on Jupyter Notebook only.", "In the previous article, we have analyzed the major metrics for our online retail business. Now we know what and how to track by using Python. It\u2019s time to focus on customers and segment them.", "But first off, why we do segmentation?", "Because you can\u2019t treat every customer the same way with the same content, same channel, same importance. They will find another option which understands them better.", "Customers who use your platform have different needs and they have their own different profile. Your should adapt your actions depending on that.", "You can do many different segmentations according to what you are trying to achieve. If you want to increase retention rate, you can do a segmentation based on churn probability and take actions. But there are very common and useful segmentation methods as well. Now we are going to implement one of them to our business: RFM.", "RFM stands for Recency - Frequency - Monetary Value. Theoretically we will have segments like below:", "As the methodology, we need to calculate Recency, Frequency and Monetary Value (we will call it Revenue from now on) and apply unsupervised machine learning to identify different groups (clusters) for each. Let\u2019s jump into coding and see how to do RFM Clustering.", "To calculate recency, we need to find out most recent purchase date of each customer and see how many days they are inactive for. After having no. of inactive days for each customer, we will apply K-means* clustering to assign customers a recency score.", "For this example, we will continue using same dataset which can be found here. Before jumping into recency calculation, let\u2019s recap the data work we\u2019ve done before.", "Our new dataframe tx_user contains recency data now:", "To get a snapshot about how recency looks like, we can use pandas\u2019 .describe() method. It shows mean, min, max, count and percentiles of our data.", "We see that even though the average is 90 day recency, median is 49.", "Our code snippet above has a histogram output to show us how is the distribution of recency across our customers.", "Now it is the fun part. We are going to apply K-means clustering to assign a recency score. But we should tell how many clusters we need to K-means algorithm. To find it out, we will apply Elbow Method. Elbow Method simply tells the optimal cluster number for optimal inertia. Code snippet and Inertia graph are as follows:", "Here it looks like 3 is the optimal one. Based on business requirements, we can go ahead with less or more clusters. We will be selecting 4 for this example:", "We have calculated clusters and assigned them to each Customer in our dataframe tx_user.", "We can see how our recency clusters have different characteristics. The customers in Cluster 1 are very recent compared to Cluster 2.", "We have added one function to our code which is order_cluster(). K-means assigns clusters as numbers but not in an ordered way. We can\u2019t say cluster 0 is the worst and cluster 4 is the best. order_cluster() method does this for us and our new dataframe looks much neater:", "Great! 3 covers most recent customers whereas 0 has the most inactive ones.", "Let\u2019s apply same for Frequency and Revenue.", "To create frequency clusters, we need to find total number orders for each customer. First calculate this and see how frequency look like in our customer database:", "Apply the same logic for having frequency clusters and assign this to each customer:", "Characteristics of our frequency clusters look like below:", "As the same notation as recency clusters, high frequency number indicates better customers.", "Let\u2019s see how our customer database looks like when we cluster them based on revenue. We will calculate revenue for each customer, plot a histogram and apply the same clustering method.", "We have some customers with negative revenue as well. Let\u2019s continue and apply k-means clustering:", "Awesome! We have scores (cluster numbers) for recency, frequency & revenue. Let\u2019s create an overall score out of them:", "The scoring above clearly shows us that customers with score 8 is our best customers whereas 0 is the worst.", "To keep things simple, better we name these scores:", "We can easily apply this naming on our dataframe:", "Now, it is the best part. Let\u2019s see how our segments distributed on a scatter plot:", "You can see how the segments are clearly differentiated from each other in terms of RFM. You can find the code snippets for graphs below:", "We can start taking actions with this segmentation. The main strategies are quite clear:", "Getting more and more exciting! In Part 3, we will be calculating and predicting lifetime value of our customers.", "You can find the jupyter notebook for this article here.", "*Ideally, what we do here can be easily achieved by using quantiles or simple binning (or Jenks natural breaks optimization to make groups more accurate) but we are using k-means to get familiar with it.", "Need help growing your company? Book a free session with me here.", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F5c019d150444&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdata-driven-growth-with-python-part-2-customer-segmentation-5c019d150444&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdata-driven-growth-with-python-part-2-customer-segmentation-5c019d150444&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdata-driven-growth-with-python-part-2-customer-segmentation-5c019d150444&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdata-driven-growth-with-python-part-2-customer-segmentation-5c019d150444&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----5c019d150444--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----5c019d150444--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@karamanbk?source=post_page-----5c019d150444--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@karamanbk?source=post_page-----5c019d150444--------------------------------", "anchor_text": "Bar\u0131\u015f Karaman"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fd48af1458440&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdata-driven-growth-with-python-part-2-customer-segmentation-5c019d150444&user=Bar%C4%B1%C5%9F+Karaman&userId=d48af1458440&source=post_page-d48af1458440----5c019d150444---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F5c019d150444&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdata-driven-growth-with-python-part-2-customer-segmentation-5c019d150444&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F5c019d150444&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdata-driven-growth-with-python-part-2-customer-segmentation-5c019d150444&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://towardsdatascience.com/tagged/data-driven-growth", "anchor_text": "Data Driven Growth with Python"}, {"url": "https://towardsdatascience.com/data-driven-growth-with-python-part-1-know-your-metrics-812781e66a5b?source=post_page---------------------------", "anchor_text": "Know Your Metrics"}, {"url": "https://towardsdatascience.com/data-driven-growth-with-python-part-3-customer-lifetime-value-prediction-6017802f2e0f?source=post_page---------------------------", "anchor_text": "Customer Lifetime Value Prediction"}, {"url": "https://towardsdatascience.com/churn-prediction-3a4a36c2129a?source=post_page---------------------------", "anchor_text": "Churn Prediction"}, {"url": "https://towardsdatascience.com/predicting-next-purchase-day-15fae5548027?source=post_page---------------------------", "anchor_text": "5- Predicting Next Purchase Day"}, {"url": "https://towardsdatascience.com/predicting-sales-611cb5a252de?source=post_page---------------------------", "anchor_text": "6- Predicting Sales"}, {"url": "https://towardsdatascience.com/market-response-models-baf9f9913298", "anchor_text": "7- Market Response Models"}, {"url": "https://towardsdatascience.com/uplift-modeling-e38f96b1ef60", "anchor_text": "8- Uplift Modeling"}, {"url": "https://towardsdatascience.com/a-b-testing-design-execution-6cf9e27c6559", "anchor_text": "9- A/B Testing Design and Execution"}, {"url": "https://www.kaggle.com/learn/python?source=post_page---------------------------", "anchor_text": "Python"}, {"url": "https://www.kaggle.com/learn/pandas?source=post_page---------------------------", "anchor_text": "Pandas"}, {"url": "https://jupyter.readthedocs.io/en/latest/install.html?source=post_page---------------------------", "anchor_text": "upyter Notebook"}, {"url": "https://www.python.org/downloads/?source=post_page---------------------------", "anchor_text": "ython"}, {"url": "https://medium.com/@karamanbk/data-driven-growth-with-python-part-1-know-your-metrics-812781e66a5b", "anchor_text": "previous article"}, {"url": "https://www.kaggle.com/vijayuv/onlineretail", "anchor_text": "here"}, {"url": "https://medium.com/@karamanbk/data-driven-growth-with-python-part-3-customer-lifetime-value-prediction-6017802f2e0f", "anchor_text": "Part 3"}, {"url": "https://gist.github.com/karamanbk/962443877d629713e0e410d52443c7d6", "anchor_text": "here"}, {"url": "https://app.growthmentor.com/mentors/baris-karaman", "anchor_text": "here"}, {"url": "https://medium.com/tag/data-science?source=post_page-----5c019d150444---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----5c019d150444---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/tag/programming?source=post_page-----5c019d150444---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/tag/entrepreneurship?source=post_page-----5c019d150444---------------entrepreneurship-----------------", "anchor_text": "Entrepreneurship"}, {"url": "https://medium.com/tag/data-driven-growth?source=post_page-----5c019d150444---------------data_driven_growth-----------------", "anchor_text": "Data Driven Growth"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F5c019d150444&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdata-driven-growth-with-python-part-2-customer-segmentation-5c019d150444&user=Bar%C4%B1%C5%9F+Karaman&userId=d48af1458440&source=-----5c019d150444---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F5c019d150444&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdata-driven-growth-with-python-part-2-customer-segmentation-5c019d150444&user=Bar%C4%B1%C5%9F+Karaman&userId=d48af1458440&source=-----5c019d150444---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F5c019d150444&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdata-driven-growth-with-python-part-2-customer-segmentation-5c019d150444&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----5c019d150444--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F5c019d150444&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdata-driven-growth-with-python-part-2-customer-segmentation-5c019d150444&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----5c019d150444---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----5c019d150444--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----5c019d150444--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----5c019d150444--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----5c019d150444--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----5c019d150444--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----5c019d150444--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----5c019d150444--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----5c019d150444--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@karamanbk?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@karamanbk?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Bar\u0131\u015f Karaman"}, {"url": "https://medium.com/@karamanbk/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "3.3K Followers"}, {"url": "https://www.linkedin.com/in/karamanbaris", "anchor_text": "https://www.linkedin.com/in/karamanbaris"}, {"url": "https://app.growthmentor.com/baris-karaman", "anchor_text": "https://app.growthmentor.com/baris-karaman"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fd48af1458440&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdata-driven-growth-with-python-part-2-customer-segmentation-5c019d150444&user=Bar%C4%B1%C5%9F+Karaman&userId=d48af1458440&source=post_page-d48af1458440--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fc6ea78ac919d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdata-driven-growth-with-python-part-2-customer-segmentation-5c019d150444&newsletterV3=d48af1458440&newsletterV3Id=c6ea78ac919d&user=Bar%C4%B1%C5%9F+Karaman&userId=d48af1458440&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}