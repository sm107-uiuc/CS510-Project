{"url": "https://towardsdatascience.com/heres-how-you-can-get-some-free-speed-on-your-python-code-with-numba-89fdc8249ef3", "time": 1682996604.9896598, "path": "towardsdatascience.com/heres-how-you-can-get-some-free-speed-on-your-python-code-with-numba-89fdc8249ef3/", "webpage": {"metadata": {"title": "Here\u2019s how you can get some free speed on your Python code with Numba | by George Seif | Towards Data Science", "h1": "Here\u2019s how you can get some free speed on your Python code with Numba", "description": "The person who said it isn\u2019t wrong either. Relative to many other programming languages, Python is slow. Benchmark game has some solid benchmarks for comparing the speed of various programming\u2026"}, "outgoing_paragraph_urls": [{"url": "https://www.superquotes.co/?utm_source=mediumtech&utm_medium=web&utm_campaign=sharing", "anchor_text": "Super Quotes newsletter", "paragraph_index": 0}, {"url": "https://benchmarksgame-team.pages.debian.net/benchmarksgame/fastest/gpp-python3.html", "anchor_text": "Benchmark game", "paragraph_index": 3}, {"url": "https://towardsdatascience.com/one-simple-trick-for-speeding-up-your-python-code-with-numpy-1afc846db418", "anchor_text": "numpy function", "paragraph_index": 12}, {"url": "https://medium.com/@george.seif94/a-tour-of-the-top-5-sorting-algorithms-with-python-code-43ea9aa02889", "anchor_text": "average complexity of O(n\u00b2)", "paragraph_index": 15}, {"url": "https://twitter.com/GeorgeSeif94", "anchor_text": "twitter", "paragraph_index": 37}, {"url": "https://www.linkedin.com/in/georgeseif/", "anchor_text": "LinkedIn", "paragraph_index": 37}], "all_paragraphs": ["Want to be inspired? Come join my Super Quotes newsletter. \ud83d\ude0e", "\u201cWe can\u2019t use Python, it\u2019s too slow.\u201d", "Anyone who\u2019s worked with Python long enough has probably heard a statement like that at one point.", "The person who said it isn\u2019t wrong either. Relative to many other programming languages, Python is slow. Benchmark game has some solid benchmarks for comparing the speed of various programming languages on different tasks.", "A common method for solving this speed problem is to re-write your code in something fast like C++ and then throw a Python wrapper on top. That\u2019ll get you the speed of C++ while maintaining the ease of using Python in your main application.", "The challenge with that of course is that you\u2019ll have to re-write the code in C++; that\u2019s a pretty time consuming process.", "The Python library Numba gives us an easy way around that challenge \u2014 free speed ups without having to write any code other than Python!", "Numba is a compiler library that transforms Python code into optimised machine code. With this transformation, Numba can make numerical algorithms that are written in Python approach the speeds of C code.", "You don\u2019t need to do anything fancy with your Python code either. Just add a single line before the Python function you want to optimise and Numba will do the rest!", "We can install Numba using pip:", "If your code has a lot of numerical operations, uses Numpy a lot, and/or has a lot of loops, then Numba should give you a good speedup.", "The most basic use of Numba is in speeding up those dreaded Python for-loops.", "First off, if you\u2019re using a loop in your Python code, it\u2019s always a good idea to first check if you can replace it with a numpy function. There are of course, cases where numpy doesn\u2019t have the function you want.", "In our first example, we\u2019re going to write a function for the Insertion sorting algorithm in Python. The function will take an unsorted list as input and return the sorted list as an output.", "The code below first constructs a list of 100,000 random integers. Then, we apply insertion sort to the list 50 times in a row and measure the average speed across all 50 of the sort operations.", "100,000 numbers is quite a lot of numbers to be sorting, especially when our sorting algorithm has an average complexity of O(n\u00b2). On my PC with an i7\u20138700k, sorting all of those numbers takes an average of 3.0104 seconds!", "Python loops are known to be slow. It\u2019s even worse here in our example where we have a while-loop inside of a for-loop. Plus, since our sorting algorithm is O(n\u00b2), as we add more items to our list, our run-time increases quadratically!", "Let\u2019s speed things up with numba.", "When we see a function that contains a loop written in pure Python, it\u2019s usually a good sign that numba can help. Check out the code below to see how it works.", "We\u2019ve only added 2 extra lines to our code. The first one is an import statement to import the jit decorator. The second is our usage of the jit decorator on our function.", "Applying the jit decorator to our function signals to numba that we want to apply the transformation to machine code to the function.", "The nopython argument specifies if we want Numba to use purely machine code or to fill in some Python code if necessary. This should usually be set to true to get the best performance unless you find that Numba throws an error.", "That\u2019s all there is to it! Just add the @jit(nopython=True) above your function and Numba will take care of the rest!", "On my PC, , sorting all of those numbers takes an average of 0.1424 seconds \u2014 that\u2019s a 21X speed up!", "Another area where Numba shines is in speeding up operations done with Numpy. This time, we\u2019re going to add together 3 fairly large arrays, about the size of a typical image, and then square them using the numpy.square() function.", "Check out the code below to see how that works in Python with a bit of Numpy.", "Notice that whenever we do basic array computations on Numpy arrays such as adding, multiplying, and squaring, the code is automatically vectorised internally by Numpy. That\u2019s why it\u2019s often much better for performance to replace pure Python code with Numpy wherever possible.", "The above code has an average run time of 0.002288 seconds for combining the arrays on my PC.", "But even Numpy code isn\u2019t as fast as the machine optimised code that Numba goes down to. The code below will perform the exact same array operations as before. This time, we\u2019ve added the vectorize decorator just above the function, signalling to numba that it should perform the machine code transformation on our function.", "The vectorize decorator takes two inputs.", "The first specifies the input type of the numpy array you will be operating on. This must be specified since Numba uses it to transform the code into its most optimal version. By knowing the input type before hand, Numba will be able to figure out exactly how your array can be most efficiently stored and operated on.", "The second input is called the \u201ctarget\u201d. It specifies how you would like to run your function:", "The parallel option tends to be much faster than the cpu option in almost all cases. The cuda option is mainly useful for very large arrays with many parallelizable operations, since in that case we can fully utilise the advantage of having so many cores on the GPU.", "The above code has an average run time of 0.001196 seconds for combining the arrays on my PC \u2014 that\u2019s about a 2X speedup. Not bad for adding a single line of code!", "Numba is going to be most effective when applied in either of these areas:", "Outside of those areas, Numba probably won\u2019t be giving you much speed. Since the advantage that comes with converting to the lower level code is gone in that case.", "In general, it\u2019s always worth giving it a quick try. Adding a single line of code above a few Python functions is worth a shot a speeding up your code by 2 to 21X!", "Follow me on twitter where I post all about the latest and greatest AI, Technology, and Science! Connect with me on LinkedIn too!", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F89fdc8249ef3&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fheres-how-you-can-get-some-free-speed-on-your-python-code-with-numba-89fdc8249ef3&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fheres-how-you-can-get-some-free-speed-on-your-python-code-with-numba-89fdc8249ef3&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fheres-how-you-can-get-some-free-speed-on-your-python-code-with-numba-89fdc8249ef3&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fheres-how-you-can-get-some-free-speed-on-your-python-code-with-numba-89fdc8249ef3&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----89fdc8249ef3--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----89fdc8249ef3--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@george.seif94?source=post_page-----89fdc8249ef3--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@george.seif94?source=post_page-----89fdc8249ef3--------------------------------", "anchor_text": "George Seif"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fe2af5c8737ec&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fheres-how-you-can-get-some-free-speed-on-your-python-code-with-numba-89fdc8249ef3&user=George+Seif&userId=e2af5c8737ec&source=post_page-e2af5c8737ec----89fdc8249ef3---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F89fdc8249ef3&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fheres-how-you-can-get-some-free-speed-on-your-python-code-with-numba-89fdc8249ef3&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F89fdc8249ef3&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fheres-how-you-can-get-some-free-speed-on-your-python-code-with-numba-89fdc8249ef3&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://www.superquotes.co/?utm_source=mediumtech&utm_medium=web&utm_campaign=sharing", "anchor_text": "Super Quotes newsletter"}, {"url": "https://benchmarksgame-team.pages.debian.net/benchmarksgame/fastest/gpp-python3.html", "anchor_text": "Benchmark game"}, {"url": "https://towardsdatascience.com/one-simple-trick-for-speeding-up-your-python-code-with-numpy-1afc846db418", "anchor_text": "numpy function"}, {"url": "https://medium.com/@george.seif94/a-tour-of-the-top-5-sorting-algorithms-with-python-code-43ea9aa02889", "anchor_text": "average complexity of O(n\u00b2)"}, {"url": "https://twitter.com/GeorgeSeif94", "anchor_text": "twitter"}, {"url": "https://www.linkedin.com/in/georgeseif/", "anchor_text": "LinkedIn"}, {"url": "https://medium.com/tag/programming?source=post_page-----89fdc8249ef3---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/tag/data-science?source=post_page-----89fdc8249ef3---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/artificial-intelligence?source=post_page-----89fdc8249ef3---------------artificial_intelligence-----------------", "anchor_text": "Artificial Intelligence"}, {"url": "https://medium.com/tag/technology?source=post_page-----89fdc8249ef3---------------technology-----------------", "anchor_text": "Technology"}, {"url": "https://medium.com/tag/innovation?source=post_page-----89fdc8249ef3---------------innovation-----------------", "anchor_text": "Innovation"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F89fdc8249ef3&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fheres-how-you-can-get-some-free-speed-on-your-python-code-with-numba-89fdc8249ef3&user=George+Seif&userId=e2af5c8737ec&source=-----89fdc8249ef3---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F89fdc8249ef3&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fheres-how-you-can-get-some-free-speed-on-your-python-code-with-numba-89fdc8249ef3&user=George+Seif&userId=e2af5c8737ec&source=-----89fdc8249ef3---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F89fdc8249ef3&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fheres-how-you-can-get-some-free-speed-on-your-python-code-with-numba-89fdc8249ef3&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----89fdc8249ef3--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F89fdc8249ef3&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fheres-how-you-can-get-some-free-speed-on-your-python-code-with-numba-89fdc8249ef3&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----89fdc8249ef3---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----89fdc8249ef3--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----89fdc8249ef3--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----89fdc8249ef3--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----89fdc8249ef3--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----89fdc8249ef3--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----89fdc8249ef3--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----89fdc8249ef3--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----89fdc8249ef3--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@george.seif94?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@george.seif94?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "George Seif"}, {"url": "https://medium.com/@george.seif94/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "21K Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fe2af5c8737ec&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fheres-how-you-can-get-some-free-speed-on-your-python-code-with-numba-89fdc8249ef3&user=George+Seif&userId=e2af5c8737ec&source=post_page-e2af5c8737ec--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fc78596234267&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fheres-how-you-can-get-some-free-speed-on-your-python-code-with-numba-89fdc8249ef3&newsletterV3=e2af5c8737ec&newsletterV3Id=c78596234267&user=George+Seif&userId=e2af5c8737ec&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}