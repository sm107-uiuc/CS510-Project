{"url": "https://towardsdatascience.com/treemap-basics-with-python-777e5ed173d0", "time": 1683011600.2606668, "path": "towardsdatascience.com/treemap-basics-with-python-777e5ed173d0/", "webpage": {"metadata": {"title": "Treemap Basics with Python. A very straightforward way to display\u2026 | by Thiago Carvalho | Towards Data Science", "h1": "Treemap Basics with Python", "description": "There\u2019s no shortage of visualizations to display how single values compose a whole. Some can be very complicated and specific; others like the one we\u2019ll explore today are quite simple and easy to\u2026"}, "outgoing_paragraph_urls": [{"url": "https://data.gov.uk/dataset/22f2484d-069c-4a08-9fe1-1aeac425af0a/animal-population-by-breed-on-1-march-2010", "anchor_text": "farm animal population by breed", "paragraph_index": 17}, {"url": "https://www.kaggle.com/gregorut/videogamesales", "anchor_text": "Video Game Sales", "paragraph_index": 23}, {"url": "http://bl.ocks.org/nbremer/94db779237655907b907", "anchor_text": "storytelling with Chord Diagrams", "paragraph_index": 30}, {"url": "https://thiagobc23.github.io/Treemaps/games.html", "anchor_text": "link", "paragraph_index": 31}, {"url": "https://github.com/Thiagobc23/Treemaps", "anchor_text": "code", "paragraph_index": 31}, {"url": "http://www.cs.umd.edu/hcil/treemap/", "anchor_text": "Treemaps University of Maryland", "paragraph_index": 33}, {"url": "https://python-graph-gallery.com/200-basic-treemap-with-python/", "anchor_text": "Python Graph Gallery \u2014 Treemap", "paragraph_index": 33}, {"url": "https://datacadamia.com/data/type/tree/treemap", "anchor_text": "Datacadamia \u2014 Treemaps", "paragraph_index": 33}, {"url": "https://plotly.com/python/treemaps/", "anchor_text": "Plotly \u2014 Treemaps", "paragraph_index": 33}, {"url": "https://plotly.com/python/interactive-html-export/", "anchor_text": "Plotly \u2014 HTML export", "paragraph_index": 33}, {"url": "https://github.com/laserson/squarify", "anchor_text": "Github \u2014 Squarify", "paragraph_index": 33}], "all_paragraphs": ["There\u2019s no shortage of visualizations to display how single values compose a whole. Some can be very complicated and specific; others like the one we\u2019ll explore today are quite simple and easy to use.", "From pies to waffles charts, the idea of showing the proportions of a whole is often an excellent beginning for storytelling. You can start with composition and then explore the distinct values individually, or compare different structures from different entities or different periods.", "The visualization was first used in the 1990s by Ben Shneiderman, an American computer scientist and professor at the University of Maryland.", "His visualization became very popular, and you can find different implementations and different algorithms for creating them in many tools and languages such as Tableau, PowerBi, Python, R, and much more.", "For the next examples, we\u2019ll use Python with Matplotlib, Squarify, and Pandas to create and design our treemaps. Later we\u2019ll get a quick look at what Plotly can do.", "There\u2019s nothing complicated about Squarify, we can simply pass a list of numbers to it, and it\u2019ll figure out the layout.", "Now, you can\u2019t get too much information from just looking at this random squares. Maybe you can have some insights about the overall composition, but you wouldn\u2019t be able to identify those squares unless you\u2019re familiar with the data itself.", "Let\u2019s get more specific and add some labels to our treemap. We can also remove the axis and soften the colours a bit.", "Cool! Did you notice how the colours changed? We reduced the alpha, and that\u2019s why their not so bright, but not only that, they also changed places.", "There\u2019s some randomness in the way colours are assigned to the squares \u2014 don\u2019t ask me why.", "Even though randomness can be useful and lead to some happy accidents, it won\u2019t always get you a colour scheme that makes sense. To avoid that, we can define our list of colours.", "Defining our colours to get a clearer picture is just one aspect of it.", "Colours can add another encoding, for example, if we had a company in different locations we might want to see how much each of them contributes to our total assets, that would be the size of the squares in our treemap.", "Then we could colormap those locations by profit, production quantities, costs, or whatever we want.", "Let\u2019s make a more accessible example just to illustrate the idea, let\u2019s say we have four companies in two locations. We can use distinct colours for different areas, and similar colours for the ones in the same place.", "Now we can have an idea of how much each one contributes, and we can also easily distinguish BC from OT.", "We can use Pandas data frames instead of lists, which opens a wide array of operations we can perform in our data and add a lot to scalability.", "Let\u2019s see how well this visualization can scale. I\u2019ll use the UK\u2019s farm animal population by breed dataset.", "Now we can pass the \u2018Number of Animals\u2019 as our size and the \u2018Breed\u2019 as our labels.", "Uh, that\u2019s not good. Too many labels!", "Let\u2019s try sorting our data frame and labelling just the largest squares.", "Awesome! With sorted data and labels just for the most significant populations, we can get some insights.", "With Plotly, we can go even further with our treemaps, grouping data, adding tooltips, and colormaps are extremely simple.", "Let\u2019s go through a quick example, just to illustrate the possibilities. I\u2019ll use a Video Game Sales dataset and Plotly Express.", "First, let\u2019s load the data and remove the empty rows.", "Now let\u2019s plot it! We\u2019ll pass the data frame, the path to the fields containing the categories, the sizes of the squares, and the intensity of the colours.", "Plotly will draw our plot with a colormap, add a colour bar, tooltips, and resize the labels according to the size of the squares.", "Ok, the labels are not readable for every square, but we do have tooltips to help us figure out the ones we can\u2019t read, and we added a lot more information here than in the previous ones.", "I\u2019m personally not a big fan of interactivity; honestly, it\u2019s hard for me to figure out how to add it to the story \u2014 I mean, we began exploring treemaps as a starter for storytelling and as a way to simplify the composition, but this visualization is not so friendly.", "With interactivity and complexity added to our visualization, I would suggest the opposite. Start with the specific insights you found by showing individual squares, or groups, and then at the end, present your full treemap to allow the user to explore it by itself.", "Take a look at Nadieh Bremer\u2019s storytelling with Chord Diagrams. Her final visualization is quite complicated. Still, the way she goes through the details before showing you the big picture is fantastic and makes the data much more understandable.", "Here\u2019s a link for the interactive viz we created, and here you can find the code.", "Thanks for reading my article. I hope you enjoyed it.", "Resources:Treemaps University of Maryland;Python Graph Gallery \u2014 Treemap;Datacadamia \u2014 Treemaps;Plotly \u2014 Treemaps;Plotly \u2014 HTML export;Github \u2014 Squarify;", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F777e5ed173d0&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftreemap-basics-with-python-777e5ed173d0&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftreemap-basics-with-python-777e5ed173d0&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftreemap-basics-with-python-777e5ed173d0&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftreemap-basics-with-python-777e5ed173d0&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----777e5ed173d0--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----777e5ed173d0--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://thiago-bernardes-carvalho.medium.com/?source=post_page-----777e5ed173d0--------------------------------", "anchor_text": ""}, {"url": "https://thiago-bernardes-carvalho.medium.com/?source=post_page-----777e5ed173d0--------------------------------", "anchor_text": "Thiago Carvalho"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F7af498f86142&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftreemap-basics-with-python-777e5ed173d0&user=Thiago+Carvalho&userId=7af498f86142&source=post_page-7af498f86142----777e5ed173d0---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F777e5ed173d0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftreemap-basics-with-python-777e5ed173d0&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F777e5ed173d0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftreemap-basics-with-python-777e5ed173d0&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://cmns.umd.edu/news-events/features/2511", "anchor_text": "Ben Shneiderman with two of his Treemap Art Project pieces"}, {"url": "https://data.gov.uk/dataset/22f2484d-069c-4a08-9fe1-1aeac425af0a/animal-population-by-breed-on-1-march-2010", "anchor_text": "farm animal population by breed"}, {"url": "https://www.kaggle.com/gregorut/videogamesales", "anchor_text": "Video Game Sales"}, {"url": "http://bl.ocks.org/nbremer/94db779237655907b907", "anchor_text": "storytelling with Chord Diagrams"}, {"url": "https://thiagobc23.github.io/Treemaps/games.html", "anchor_text": "link"}, {"url": "https://github.com/Thiagobc23/Treemaps", "anchor_text": "code"}, {"url": "http://www.cs.umd.edu/hcil/treemap/", "anchor_text": "Treemaps University of Maryland"}, {"url": "https://python-graph-gallery.com/200-basic-treemap-with-python/", "anchor_text": "Python Graph Gallery \u2014 Treemap"}, {"url": "https://datacadamia.com/data/type/tree/treemap", "anchor_text": "Datacadamia \u2014 Treemaps"}, {"url": "https://plotly.com/python/treemaps/", "anchor_text": "Plotly \u2014 Treemaps"}, {"url": "https://plotly.com/python/interactive-html-export/", "anchor_text": "Plotly \u2014 HTML export"}, {"url": "https://github.com/laserson/squarify", "anchor_text": "Github \u2014 Squarify"}, {"url": "https://medium.com/tag/data-visualization?source=post_page-----777e5ed173d0---------------data_visualization-----------------", "anchor_text": "Data Visualization"}, {"url": "https://medium.com/tag/data-science?source=post_page-----777e5ed173d0---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/python?source=post_page-----777e5ed173d0---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/treemap?source=post_page-----777e5ed173d0---------------treemap-----------------", "anchor_text": "Treemap"}, {"url": "https://medium.com/tag/data-analysis?source=post_page-----777e5ed173d0---------------data_analysis-----------------", "anchor_text": "Data Analysis"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F777e5ed173d0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftreemap-basics-with-python-777e5ed173d0&user=Thiago+Carvalho&userId=7af498f86142&source=-----777e5ed173d0---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F777e5ed173d0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftreemap-basics-with-python-777e5ed173d0&user=Thiago+Carvalho&userId=7af498f86142&source=-----777e5ed173d0---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F777e5ed173d0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftreemap-basics-with-python-777e5ed173d0&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----777e5ed173d0--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F777e5ed173d0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftreemap-basics-with-python-777e5ed173d0&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----777e5ed173d0---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----777e5ed173d0--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----777e5ed173d0--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----777e5ed173d0--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----777e5ed173d0--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----777e5ed173d0--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----777e5ed173d0--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----777e5ed173d0--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----777e5ed173d0--------------------------------", "anchor_text": ""}, {"url": "https://thiago-bernardes-carvalho.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://thiago-bernardes-carvalho.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Thiago Carvalho"}, {"url": "https://thiago-bernardes-carvalho.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "1.7K Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F7af498f86142&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftreemap-basics-with-python-777e5ed173d0&user=Thiago+Carvalho&userId=7af498f86142&source=post_page-7af498f86142--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F10a0f4458714&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftreemap-basics-with-python-777e5ed173d0&newsletterV3=7af498f86142&newsletterV3Id=10a0f4458714&user=Thiago+Carvalho&userId=7af498f86142&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}