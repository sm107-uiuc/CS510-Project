{"url": "https://towardsdatascience.com/quantifying-chatroom-toxicity-e755dd2f9ccf", "time": 1682996859.895817, "path": "towardsdatascience.com/quantifying-chatroom-toxicity-e755dd2f9ccf/", "webpage": {"metadata": {"title": "Quantifying Chatroom Toxicity. Using Machine Learning to Identify Hate\u2026 | by Jeremy Chow | Towards Data Science", "h1": "Quantifying Chatroom Toxicity", "description": "The other night I was at an SF data science meetup hosted by Twitch (beautiful office and great food!) and I struck up a conversation with some software engineers there. It turns out they were on a\u2026"}, "outgoing_paragraph_urls": [{"url": "https://github.com/jeremyrchow/harassment-classifier", "anchor_text": "here", "paragraph_index": 0}, {"url": "https://www.twitch.tv", "anchor_text": "Twitch", "paragraph_index": 1}, {"url": "https://www.linkedin.com/in/randysm/", "anchor_text": "Randy Macaraeg", "paragraph_index": 1}, {"url": "https://www.kaggle.com/c/jigsaw-toxic-comment-classification-challenge/data", "anchor_text": "competition for identifying toxic comments on Wikipedia", "paragraph_index": 2}, {"url": "https://spacy.io/models", "anchor_text": "spaCy", "paragraph_index": 7}, {"url": "https://variety.com/2018/digital/news/drake-shows-up-on-twitch-breaks-live-streaming-record-1202727867/", "anchor_text": "hundreds of thousands of concurrent viewers", "paragraph_index": 8}, {"url": "https://towardsdatascience.com/understanding-logistic-regression-using-a-simple-example-163de52ea900", "anchor_text": "This article", "paragraph_index": 9}], "all_paragraphs": ["Code used in this project can be found here.", "The other night I was at an SF data science meetup hosted by Twitch (beautiful office and great food!) and I struck up a conversation with some software engineers there. It turns out they were on a \u2018Safety\u2019 team entirely dedicated to keeping chats clean and protecting streamers and viewers in the chatroom, which makes sense because the chat interactivity is arguably the core driving experience of Twitch. With this in mind, I set out to see if I could build my own version of a chat toxicity classifier (with the help of my good friend Randy Macaraeg). Today I\u2019d like to walk you through that process!", "The first step is to find a dataset. Luckily, our friends at Kaggle hosted a competition for identifying toxic comments on Wikipedia, which offers a dataset of over 300,000 comments manually tagged with binary labels of six categories including toxic, severely toxic, obscene, threat, insult, and identity hate.", "Once we have our data, we need to go through the cleaning process. For text data sets in general, this often includes:", "In addition, dealing with online text and comments requires the further removal of items like hyperlinks, usernames, and automated messages (the most common comment in this dataset was a Wikipedia welcome message to new users).", "What preprocessing you do varies from project to project, and for this we had the best accuracy metrics doing all of the above except stemming and lemmatization, which dropped ROC AUC metric by 10%. We also considered n-grams, where you look at pairs or trios (or more) of words in addition to single words, but that also dropped our ROC AUC metric by 5%, so we ultimately moved forward without it.", "To turn words into something a machine learning algorithm can understand and process, we need to do something called vectorization. Put simply, this is the process of turning words into multi-dimensional vectors in such a way that the meaning or context of the word is correlated with where that vector points. In a sense, vectorization allows computers to quantify the meaning of words by mapping similar word meanings to similar vector spaces.", "For this application, we want rapid, context-based vectorization. Some methods such as Word2Vec and spaCy involve pre-trained, multi-gigabyte models that are trained on hundreds of thousands, if not millions of documents and then reduce the meanings of words to a set of a couple hundred numbers. These models are excellent at preserving context and meaning of words in general, but they are slow and large. This is where Term frequency inverse document frequency vectorization comes in (TF-IDF). This vectorization method looks at the number of times a word appears in a comment relative to the number of times it appears in other comments. Two things result in a higher TF-IDF score:", "Once we convert all our comments into sets of TF-IDF word vectors, the next step is modeling. The end goal is to implement a kind of auto moderation algorithm to a chatroom, requiring a fast algorithm capable of handling hundreds of thousands of concurrent viewers chatting with each other. To do this, we use basic logistic regression for classification. In essence, logistic regression uses your middle school slope formula:", "where y is the odds that something will occur (squashed between 0 and 1 using a sigmoid function), m is the unit change in y due to a change in the independent variable x and b is the bias, or the y-intercept. This article is great for a more in-depth explanation of logistic regression.", "So now we have all the pieces to build our models. At this point, we train our models by feeding each comment into our TF-IDF vectorizer, which turns that comment into a vector of 20,000 features (the maximum number of words we want to track as our vocabulary). Then we pass those 20,000 TF-IDF score features into our model. For simplicity, we train six separate models independently, one for each label. This gives us the following ROC scores!", "The area under the ROC curve tells us how many more false positives we get if we change our probability threshold to get more true positives. In the context of this project, a false positive is saying a comment is toxic when it really is not, and a true positive is correctly identifying a toxic comment. Basically, more area under the ROC curve means we get fewer additional false positives for additional true positives, which is what we want to maximize.", "As you can see, we get AUC scores of around 0.97 to 0.98, which is very close to the maximum of 1. This means we can celebrate, because our models are great at identifying true positives!", "So we\u2019ve created a model that takes in a internet comment, then spits out six probabilities for whether the comment falls into each of the six toxic categories. On a 2019 Macbook Pro, the classification speed is about 1150 messages per second! Not bad. While there are some improvements to be made, this makes a great moderation tool that can be used to alert a moderator if a hostile individual is posting in their channel.", "Keep an eye out for my next post to learn how we deployed this model online and in a twitch chatbot!", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Data Scientist passionate about using machine learning to impact business decisions and discover meaningful insights."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fe755dd2f9ccf&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fquantifying-chatroom-toxicity-e755dd2f9ccf&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fquantifying-chatroom-toxicity-e755dd2f9ccf&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fquantifying-chatroom-toxicity-e755dd2f9ccf&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fquantifying-chatroom-toxicity-e755dd2f9ccf&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----e755dd2f9ccf--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----e755dd2f9ccf--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@jeremyrchow?source=post_page-----e755dd2f9ccf--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@jeremyrchow?source=post_page-----e755dd2f9ccf--------------------------------", "anchor_text": "Jeremy Chow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fcaf26ba3661a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fquantifying-chatroom-toxicity-e755dd2f9ccf&user=Jeremy+Chow&userId=caf26ba3661a&source=post_page-caf26ba3661a----e755dd2f9ccf---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fe755dd2f9ccf&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fquantifying-chatroom-toxicity-e755dd2f9ccf&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fe755dd2f9ccf&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fquantifying-chatroom-toxicity-e755dd2f9ccf&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/photos/XA0v5hbb7HY", "anchor_text": "Unsplash"}, {"url": "https://github.com/jeremyrchow/harassment-classifier", "anchor_text": "here"}, {"url": "https://www.twitch.tv", "anchor_text": "Twitch"}, {"url": "https://www.linkedin.com/in/randysm/", "anchor_text": "Randy Macaraeg"}, {"url": "https://www.kaggle.com/c/jigsaw-toxic-comment-classification-challenge/data", "anchor_text": "competition for identifying toxic comments on Wikipedia"}, {"url": "https://spacy.io/models", "anchor_text": "spaCy"}, {"url": "https://variety.com/2018/digital/news/drake-shows-up-on-twitch-breaks-live-streaming-record-1202727867/", "anchor_text": "hundreds of thousands of concurrent viewers"}, {"url": "https://towardsdatascience.com/understanding-logistic-regression-using-a-simple-example-163de52ea900", "anchor_text": "This article"}, {"url": "https://medium.com/tag/data-science?source=post_page-----e755dd2f9ccf---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/nlp?source=post_page-----e755dd2f9ccf---------------nlp-----------------", "anchor_text": "NLP"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----e755dd2f9ccf---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/tag/tf-idf?source=post_page-----e755dd2f9ccf---------------tf_idf-----------------", "anchor_text": "Tf Idf"}, {"url": "https://medium.com/tag/towards-data-science?source=post_page-----e755dd2f9ccf---------------towards_data_science-----------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fe755dd2f9ccf&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fquantifying-chatroom-toxicity-e755dd2f9ccf&user=Jeremy+Chow&userId=caf26ba3661a&source=-----e755dd2f9ccf---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fe755dd2f9ccf&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fquantifying-chatroom-toxicity-e755dd2f9ccf&user=Jeremy+Chow&userId=caf26ba3661a&source=-----e755dd2f9ccf---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fe755dd2f9ccf&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fquantifying-chatroom-toxicity-e755dd2f9ccf&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----e755dd2f9ccf--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fe755dd2f9ccf&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fquantifying-chatroom-toxicity-e755dd2f9ccf&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----e755dd2f9ccf---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----e755dd2f9ccf--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----e755dd2f9ccf--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----e755dd2f9ccf--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----e755dd2f9ccf--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----e755dd2f9ccf--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----e755dd2f9ccf--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----e755dd2f9ccf--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----e755dd2f9ccf--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@jeremyrchow?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@jeremyrchow?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Jeremy Chow"}, {"url": "https://medium.com/@jeremyrchow/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "300 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fcaf26ba3661a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fquantifying-chatroom-toxicity-e755dd2f9ccf&user=Jeremy+Chow&userId=caf26ba3661a&source=post_page-caf26ba3661a--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F5950ea45395a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fquantifying-chatroom-toxicity-e755dd2f9ccf&newsletterV3=caf26ba3661a&newsletterV3Id=5950ea45395a&user=Jeremy+Chow&userId=caf26ba3661a&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}