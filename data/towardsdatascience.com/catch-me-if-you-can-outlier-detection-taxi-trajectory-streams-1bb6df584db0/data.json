{"url": "https://towardsdatascience.com/catch-me-if-you-can-outlier-detection-taxi-trajectory-streams-1bb6df584db0", "time": 1683000906.6114602, "path": "towardsdatascience.com/catch-me-if-you-can-outlier-detection-taxi-trajectory-streams-1bb6df584db0/", "webpage": {"metadata": {"title": "Catch me if you can: Outlier Detection in Streaming Data | by Usman Gohar | Towards Data Science", "h1": "Catch me if you can: Outlier Detection in Streaming Data", "description": "How to perform outlier detection using only spatio-temporal characteristics"}, "outgoing_paragraph_urls": [{"url": "https://www.microsoft.com/en-us/research/publication/t-drive-trajectory-data-sample/", "anchor_text": "T-Drive", "paragraph_index": 2}, {"url": "https://dl.acm.org/citation.cfm?id=3013527", "anchor_text": "Outlier Detection Over Massive Trajectory Stream", "paragraph_index": 3}, {"url": "https://dl.acm.org/citation.cfm?id=3013527", "anchor_text": "paper", "paragraph_index": 11}, {"url": "https://www.movable-type.co.uk/scripts/latlong.html", "anchor_text": "Haversine Approximation", "paragraph_index": 15}, {"url": "https://github.com/UsmanGohar/Trajectory-Outlier-Detection", "anchor_text": "ttps://github.com/UsmanGohar/Trajectory-Outlier-Detection", "paragraph_index": 22}], "all_paragraphs": ["Outlier detection is an interesting data mining task that is used quite extensively to detect anomalies in data. Outliers are points that exhibit significantly different properties than the majority of the points. To this end, outlier detection has very interesting applications such as credit card fraud detection (suspicious transactions), traffic management (drunk/rash driving) or Network Intrusions (hacks) etc. Due to the time-critical nature of these applications, there is a need for scalable outlier detection techniques.", "In this project, we will aim to detect outlier in a Taxi Dataset (Beijing), using a technique that only uses spatio-temporal characteristics to detect outliers in very large datasets. We will be using the geo-coordinates and the timestamps collected by the GPS on these taxis.", "For this project, we will be using the T-Drive dataset. This dataset has 15 million points, covers a total distance of 9 million kilometers from a total of 10,357 taxis in Beijing. This a good sample dataset because it contains a very large number of points, mimicking our real-life scenarios discussed above. Each row in this dataset corresponds to the geo-coodinates of the taxi and the timestamp.", "The algorithm that we will be using for this problem is the Outlier Detection Over Massive Trajectory Stream. To implement the algorithm, we are gonna need some background information on the technical terms.", "A trajectory of a moving object O, is defined as a sequence of trajectory points produced at time-bins t1, t2\u2026..tj denoted as Tri = {P1i , P2i , \u2026..Pji}", "If two trajectory points, Pij , Pik , in the same timebin Ti are within a distance of d of each other, where d is a distance threshold, then those two points are considered point neighbors of each other.", "In a particular window Wc, a trajectory is called a neighbor trajectory if and only if for at least thr timebins, the trajectories share point neighbors in each of these timebins.", "A Trajectory Tri is considered an outlier in window Wc, if in at least thr time-bins, there are less than k number of points that are point neighbors, where k is the neighbor count threshold.", "This definition is trying to capture the idea that if a trajectory is normal, it should have similar points in close proximity both in space and across time-bins. In other words, these trajectories need to be behaving very similarly and consistently for it to be classified as an inlier in the particular window.", "To explain the algorithm, let\u2019s take a look at the example above. We will be analyzing Trajectory Tr3 & Tr4. The dashed circles denote point neighbors for the trajectories. Let\u2019s take thr=2 and K=3:", "Tr4 has at least thr (2) number of point neighbors with Tr1 (t2,t4) & Tr3 (t2,t4) only. Since, it only has thr point neighbors for less than K trajectories (in this case only 2 trajectories), it is an outlier.", "Tr3 has at least thr (2) number of point neighbors with Tr1 (t1,t2,t3,t4), Tr2 (t1,t2,t3) & Tr4 (t2,t4). Since it has thr point neighbors for at least K=3 trajectories (Tr1,Tr2,Tr4), it is not an outlier. For more information, you can read the example in the paper.", "The first step involves loading the dataset (*.txt). Since the dataset is divided into .txt files for each taxi, we need to read all the files in the T-Drive folder.", "We also need to extract the values of timestamps (Month, Day, Hour, Mins), Latitude and Longitude. Split() is the fastest way to break the individual values in each row", "The next step, as in any data task, is cleaning the data. A quick look at the dataset reveals inconsistent sampling rates for the taxis in the dataset. Some taxi record location every min, while others skip a couple of mins. To address this, we will use linear interpolation to fill the missing values. The example below shows a missing value for timestamp (T2). The missing value is calculated by taking the mean difference between T1 and T3 and adding it to T1.", "As you know, the location stamp for each sample is in geo-coordinates. However, we need also need to calculate the distance between two coordinates to check whether the points are neighbors (d threshold). To solve this issue, we use the Haversine Approximation.", "Looking at the algorithm, it is obvious the slowest part of the algorithm is the search query. To achieve optimized performance, we will use kd-trees that are designed to cater multi-dimensional points (lat/long in our case). We can use the Scipy library to construct the kd-tree with the geo-coordinates.", "After the tree is constructed, we will use the query_ball_point() function to find the neighbors within our d threshold.", "The T-Drive dataset does not provide us with ground truth values. One way to visualize the results is plotting them on a Google Map. I used the Python client library for Google Maps API Web Services to plot the trajectories as show below.", "As you can see from the plot, most of the congested trajectories have been correctly identified as inliers. Trajectories that are not close spatio-temporally have been identified as outliers with some errors, as can be see in the map.", "This algorithm can also be used in other scenarios such as credit card fraud detection or stocks monitoring. Just like geo-coordinates, we can use stock price/volume as the characteristics to determine whether a stock would perform better or worse, for instance.", "Other works include using segmentation and partitioning to improve outlier detection results. In another article, I will cover using multiple cores to divide the workload among CPUs to achieve higher performance.", "You can find the complete code in my Git: https://github.com/UsmanGohar/Trajectory-Outlier-Detection", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F1bb6df584db0&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcatch-me-if-you-can-outlier-detection-taxi-trajectory-streams-1bb6df584db0&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcatch-me-if-you-can-outlier-detection-taxi-trajectory-streams-1bb6df584db0&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcatch-me-if-you-can-outlier-detection-taxi-trajectory-streams-1bb6df584db0&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcatch-me-if-you-can-outlier-detection-taxi-trajectory-streams-1bb6df584db0&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----1bb6df584db0--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----1bb6df584db0--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@usman.gohar?source=post_page-----1bb6df584db0--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@usman.gohar?source=post_page-----1bb6df584db0--------------------------------", "anchor_text": "Usman Gohar"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F67aae3434fac&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcatch-me-if-you-can-outlier-detection-taxi-trajectory-streams-1bb6df584db0&user=Usman+Gohar&userId=67aae3434fac&source=post_page-67aae3434fac----1bb6df584db0---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F1bb6df584db0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcatch-me-if-you-can-outlier-detection-taxi-trajectory-streams-1bb6df584db0&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F1bb6df584db0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcatch-me-if-you-can-outlier-detection-taxi-trajectory-streams-1bb6df584db0&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@zhipeng_ya?utm_source=medium&utm_medium=referral", "anchor_text": "Zhipeng Ya"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://www.microsoft.com/en-us/research/publication/t-drive-trajectory-data-sample/", "anchor_text": "T-Drive"}, {"url": "https://dl.acm.org/citation.cfm?id=3013527", "anchor_text": "Outlier Detection Over Massive Trajectory Stream"}, {"url": "https://dl.acm.org/citation.cfm?id=3013527", "anchor_text": "paper"}, {"url": "https://www.movable-type.co.uk/scripts/latlong.html", "anchor_text": "Haversine Approximation"}, {"url": "https://github.com/UsmanGohar/Trajectory-Outlier-Detection", "anchor_text": "ttps://github.com/UsmanGohar/Trajectory-Outlier-Detection"}, {"url": "https://medium.com/tag/data-science?source=post_page-----1bb6df584db0---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/time-series-analysis?source=post_page-----1bb6df584db0---------------time_series_analysis-----------------", "anchor_text": "Time Series Analysis"}, {"url": "https://medium.com/tag/outlier-detection?source=post_page-----1bb6df584db0---------------outlier_detection-----------------", "anchor_text": "Outlier Detection"}, {"url": "https://medium.com/tag/python?source=post_page-----1bb6df584db0---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/anomaly-detection?source=post_page-----1bb6df584db0---------------anomaly_detection-----------------", "anchor_text": "Anomaly Detection"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F1bb6df584db0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcatch-me-if-you-can-outlier-detection-taxi-trajectory-streams-1bb6df584db0&user=Usman+Gohar&userId=67aae3434fac&source=-----1bb6df584db0---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F1bb6df584db0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcatch-me-if-you-can-outlier-detection-taxi-trajectory-streams-1bb6df584db0&user=Usman+Gohar&userId=67aae3434fac&source=-----1bb6df584db0---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F1bb6df584db0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcatch-me-if-you-can-outlier-detection-taxi-trajectory-streams-1bb6df584db0&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----1bb6df584db0--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F1bb6df584db0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcatch-me-if-you-can-outlier-detection-taxi-trajectory-streams-1bb6df584db0&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----1bb6df584db0---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----1bb6df584db0--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----1bb6df584db0--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----1bb6df584db0--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----1bb6df584db0--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----1bb6df584db0--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----1bb6df584db0--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----1bb6df584db0--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----1bb6df584db0--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@usman.gohar?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@usman.gohar?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Usman Gohar"}, {"url": "https://medium.com/@usman.gohar/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "132 Followers"}, {"url": "https://www.linkedin.com/in/usman-gohar/", "anchor_text": "https://www.linkedin.com/in/usman-gohar/"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F67aae3434fac&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcatch-me-if-you-can-outlier-detection-taxi-trajectory-streams-1bb6df584db0&user=Usman+Gohar&userId=67aae3434fac&source=post_page-67aae3434fac--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fusers%2F67aae3434fac%2Flazily-enable-writer-subscription&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcatch-me-if-you-can-outlier-detection-taxi-trajectory-streams-1bb6df584db0&user=Usman+Gohar&userId=67aae3434fac&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}