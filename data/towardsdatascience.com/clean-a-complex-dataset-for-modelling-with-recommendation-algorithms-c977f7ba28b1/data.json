{"url": "https://towardsdatascience.com/clean-a-complex-dataset-for-modelling-with-recommendation-algorithms-c977f7ba28b1", "time": 1682995384.8032372, "path": "towardsdatascience.com/clean-a-complex-dataset-for-modelling-with-recommendation-algorithms-c977f7ba28b1/", "webpage": {"metadata": {"title": "Clean a complex dataset for modelling with recommendation algorithms | by Diego Usai | Towards Data Science", "h1": "Clean a complex dataset for modelling with recommendation algorithms", "description": "First part of a Market Basket Analysis project in which I source, explore and format a complex dataset suitable for modelling with recommendation algorithms"}, "outgoing_paragraph_urls": [{"url": "https://en.wikipedia.org/wiki/Affinity_analysis", "anchor_text": "(also referred to as Affinity Analysis)", "paragraph_index": 3}, {"url": "http://www.netflixprize.com", "anchor_text": "(The Netflix Prize)", "paragraph_index": 4}, {"url": "http://archive.ics.uci.edu/ml/index.php", "anchor_text": "UCI Machine Learning Repository", "paragraph_index": 6}, {"url": "http://archive.ics.uci.edu/ml/datasets/online+retail", "anchor_text": "Online Retail", "paragraph_index": 7}, {"url": "http://archive.ics.uci.edu/ml/datasets/online+retail", "anchor_text": "Attribute Information", "paragraph_index": 11}, {"url": "https://github.com/DiegoUsaiUK/Market_Basket_Analysis", "anchor_text": "my GitHub profile", "paragraph_index": 31}, {"url": "http://www.linkedin.com/in/diegousaiuk/", "anchor_text": "www.linkedin.com/in/diegousaiuk/", "paragraph_index": 33}], "all_paragraphs": ["Recently I wanted to learn something new and challenged myself to carry out an end-to-end Market Basket Analysis. To continue to challenge myself, I\u2019ve decided to put the results of my efforts before the eyes of the data science community. And what better forum for my first ever series of posts than one of my favourite data science blogs!", "This is the first of three post arranged as follows:", "Part 1: explore and cleanse a dataset suitable for modelling with recommendation algorithmsPart 2: apply various Product Recommendation models with the recommenderlab R package Part 3: implement the best performing model in a Shiny Web Application", "Market Basket Analysis or MBA (also referred to as Affinity Analysis) is a set of data mining and data analysis techniques used to understand customers shopping behaviours and uncover relationships among the products that they buy. By analysing the likes of retail basket composition, transactional data, or browsing history, these methods can be used to suggest to customers items they might be interested in. Such recommendations can promote customer loyalty, increase conversion rate by helping customers to find relevant products faster and boost cross-selling and up-selling by suggesting additional items or services.", "Recommendation systems are widely employed in several industries. Online retailer Amazon uses these methods to recommend to their customers products that other people often buy together (\u2018customers who bought this item also bought\u2026\u2019). Every Monday since 2015 entertainment company Spotify suggests to their users a tailored playlist of 30 songs they\u2019ve never listened to based on their consumption history. In 2009 Netflix famously ran a competition (The Netflix Prize) which awarded a $1M Grand Prize to the team that improved the predictions of their movie recommendation system.", "Market Basket Analysis also finds applications in such areas as:", "The data for this project comes from the UCI Machine Learning Repository, an online archive of large datasets which includes a wide variety of data types, analysis tasks, and application areas.", "In this project I\u2019m using the Online Retail dataset, donated to UCI in 2015 by the School of Engineering at London South Bank University. This dataset contains transactions occurring between 01/Dec/2010 and 09/Dec/2011 for a UK-based and registered online retail company. The company sells mainly unique all-occasion gifts and many of their customers are wholesalers.", "I\u2019ve picked this particular dataset because of it\u2019s \u201creal life\u201d nature, which shows in the many manually entered annotations and adjustment codes I found in the Description field. There are even personal comments left by the company\u2019s employees, who likely used the database on a day-to-day basis.", "It\u2019s reasonable to assume that the dataset came straight from the company\u2019s database with very little alterations. From experience this is consistent with the state in which an analyst is most likely to receive data from a client they are to conduct a piece of analysis for.", "The dataset consists of just over 540,000 observations spread across 8 variables. A few Descriptions and several CustomerIDs are missing and there are also some odd negatives Quantity and UnitPrice that would be worth investigating. It\u2019s also worth noting that InvoiceDate is of POSIXct format, from which information about Date and Time of purchase can be extracted.", "The very handy Attribute Information tells us that if the InvoiceNo starts with letter \u2018C\u2019, it indicates a cancellation", "Cancellations are not needed for the analysis so they can be removed", "When filtering by non positive Quantity, the Description shows what looks like a series of manually entered comments (e.g.\u201cthrown away\u201d, \u201cUnsaleable\u201d, \u201cdamaged\u201d,\u201c?\u201d). Given that UnitPrice is also set to zero for all of them, it is safe to assume that these were adjustments codes.", "Were this a live project, I would typically sense check this assumption with whomever provided the data. In this case, I will simply remove all rows with non-positive Quantity.", "Turning my attention to StockCode, I notice a handful of non-product related codes (\u2018Postage\u2019, \u2018Bank Charges\u2019, \u2018Gift Vouchers\u2019, etc.).", "Focusing now on the Description field, there are an additional 50 manually entered annotations that need removing. In one case an employee has even vented out their frustration at one of their co-workers (\u201calan hodge cant mamage this section\u201d), with misspelling and all!", "Last but not least, there are also some 600 NAs in Description.", "Given their small number (around 0.1% of total) I will just remove them.", "There is still a significant number of NAs in CustomerID, which I will leave as they are.", "As I will discuss in the second post, for the analysis I need to arrange data in a user-item format, where \u201cusers\u201d can be either customers or orders. Given that there are almost 5 times as many Orders as there are Customers, I am going to use InvoiceNo for orders in the analysis, which should make for a richer information set.", "There are a couple of housekeeping tasks to sort out and I am ready to go!", "I am now ready to take a look at the dataset different features.", "The heart-shaped tea light holder is the most popular item.", "Top 10 most sold products represent around 3% of total items sold by the company", "Lunchtime is the preferred time for shopping online, with the majority of orders places between 12 noon and 3pm.", "Orders peaks on Thursdays with no orders processed on Saturdays.", "The large majority of customers typically purchase between 2 and 15 items, with a peak at 2.", "The bulk of orders have a value below \u00a320, with the distribution showing a double peak, one at \u00a36 and a more pronounced one at \u00a317.", "Five sixths of orders come from the United Kingdom.", "This concludes the data preparation and visualisation part of the project. So far I have shown how to approach a \u201creal life\u201d dataset to clean it, get rid of unwanted elements, change variable type, and create new variables from existing ones. In summary, I have removed Cancellations, eliminated negative Quantity and UnitPrice, got rid of NAs in Description and created two new variables, Date and Time. A total of 13,761 rows (roughly 2.5% of the initial count) were discarded and the dataset has now 528,148 observations.", "The full R code can be found on my GitHub profile:", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Customer Insight | Business Intelligence | Marketing Analytics | www.linkedin.com/in/diegousaiuk/ | CURRENTLY SEEKING NEW JOB OPPORTUNITIES"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fc977f7ba28b1&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fclean-a-complex-dataset-for-modelling-with-recommendation-algorithms-c977f7ba28b1&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fclean-a-complex-dataset-for-modelling-with-recommendation-algorithms-c977f7ba28b1&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fclean-a-complex-dataset-for-modelling-with-recommendation-algorithms-c977f7ba28b1&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fclean-a-complex-dataset-for-modelling-with-recommendation-algorithms-c977f7ba28b1&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----c977f7ba28b1--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----c977f7ba28b1--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@diegousaiuk?source=post_page-----c977f7ba28b1--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@diegousaiuk?source=post_page-----c977f7ba28b1--------------------------------", "anchor_text": "Diego Usai"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F21986549abda&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fclean-a-complex-dataset-for-modelling-with-recommendation-algorithms-c977f7ba28b1&user=Diego+Usai&userId=21986549abda&source=post_page-21986549abda----c977f7ba28b1---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fc977f7ba28b1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fclean-a-complex-dataset-for-modelling-with-recommendation-algorithms-c977f7ba28b1&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fc977f7ba28b1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fclean-a-complex-dataset-for-modelling-with-recommendation-algorithms-c977f7ba28b1&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/photos/WSw-taiyZPk?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Tina Bosse"}, {"url": "https://unsplash.com/?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Unsplash"}, {"url": "https://en.wikipedia.org/wiki/Affinity_analysis", "anchor_text": "(also referred to as Affinity Analysis)"}, {"url": "http://www.netflixprize.com", "anchor_text": "(The Netflix Prize)"}, {"url": "http://archive.ics.uci.edu/ml/index.php", "anchor_text": "UCI Machine Learning Repository"}, {"url": "http://archive.ics.uci.edu/ml/datasets/online+retail", "anchor_text": "Online Retail"}, {"url": "http://archive.ics.uci.edu/ml/datasets/online+retail", "anchor_text": "Attribute Information"}, {"url": "https://github.com/DiegoUsaiUK/Market_Basket_Analysis", "anchor_text": "my GitHub profile"}, {"url": "https://cran.r-project.org/package=recommenderlab", "anchor_text": "https://cran.r-project.org/package=recommenderlab"}, {"url": "https://cran.r-project.org/web/packages/recommenderlab/vignettes/recommenderlab.pdf", "anchor_text": "https://cran.r-project.org/web/packages/recommenderlab/vignettes/recommenderlab.pdf"}, {"url": "https://diegousai.io/2019/03/market-basket-analysis-part-1-of-3/", "anchor_text": "https://diegousai.io"}, {"url": "https://medium.com/tag/data-science?source=post_page-----c977f7ba28b1---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----c977f7ba28b1---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/tag/data-mining?source=post_page-----c977f7ba28b1---------------data_mining-----------------", "anchor_text": "Data Mining"}, {"url": "https://medium.com/tag/data-cleaning?source=post_page-----c977f7ba28b1---------------data_cleaning-----------------", "anchor_text": "Data Cleaning"}, {"url": "https://medium.com/tag/big-data?source=post_page-----c977f7ba28b1---------------big_data-----------------", "anchor_text": "Big Data"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fc977f7ba28b1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fclean-a-complex-dataset-for-modelling-with-recommendation-algorithms-c977f7ba28b1&user=Diego+Usai&userId=21986549abda&source=-----c977f7ba28b1---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fc977f7ba28b1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fclean-a-complex-dataset-for-modelling-with-recommendation-algorithms-c977f7ba28b1&user=Diego+Usai&userId=21986549abda&source=-----c977f7ba28b1---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fc977f7ba28b1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fclean-a-complex-dataset-for-modelling-with-recommendation-algorithms-c977f7ba28b1&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----c977f7ba28b1--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fc977f7ba28b1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fclean-a-complex-dataset-for-modelling-with-recommendation-algorithms-c977f7ba28b1&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----c977f7ba28b1---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----c977f7ba28b1--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----c977f7ba28b1--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----c977f7ba28b1--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----c977f7ba28b1--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----c977f7ba28b1--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----c977f7ba28b1--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----c977f7ba28b1--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----c977f7ba28b1--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@diegousaiuk?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@diegousaiuk?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Diego Usai"}, {"url": "https://medium.com/@diegousaiuk/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "148 Followers"}, {"url": "http://www.linkedin.com/in/diegousaiuk/", "anchor_text": "www.linkedin.com/in/diegousaiuk/"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F21986549abda&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fclean-a-complex-dataset-for-modelling-with-recommendation-algorithms-c977f7ba28b1&user=Diego+Usai&userId=21986549abda&source=post_page-21986549abda--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fusers%2F21986549abda%2Flazily-enable-writer-subscription&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fclean-a-complex-dataset-for-modelling-with-recommendation-algorithms-c977f7ba28b1&user=Diego+Usai&userId=21986549abda&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}