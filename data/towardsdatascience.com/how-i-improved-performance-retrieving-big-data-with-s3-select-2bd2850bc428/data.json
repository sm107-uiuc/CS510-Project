{"url": "https://towardsdatascience.com/how-i-improved-performance-retrieving-big-data-with-s3-select-2bd2850bc428", "time": 1683015936.0105941, "path": "towardsdatascience.com/how-i-improved-performance-retrieving-big-data-with-s3-select-2bd2850bc428/", "webpage": {"metadata": {"title": "How I Improved Performance Retrieving Big Data With S3-Select | by Anna Geller | Towards Data Science", "h1": "How I Improved Performance Retrieving Big Data With S3-Select", "description": "I\u2019ve recently come across a feature in S3 that is particularly useful when working with Big Data. You can write a simple SQL query to select specific columns and filter for specific rows to retrieve\u2026"}, "outgoing_paragraph_urls": [{"url": "https://www1.nyc.gov/assets/tlc/downloads/pdf/data_dictionary_trip_records_yellow.pdf", "anchor_text": "data dictionary", "paragraph_index": 2}, {"url": "https://medium.com/@anna.anisienia", "anchor_text": "follow me", "paragraph_index": 13}, {"url": "http://www.annageller.com", "anchor_text": "www.annageller.com", "paragraph_index": 16}, {"url": "https://annageller.medium.com/subscribe", "anchor_text": "https://annageller.medium.com/subscribe", "paragraph_index": 16}], "all_paragraphs": ["I\u2019ve recently come across a feature in S3 that is particularly useful when working with Big Data. You can write a simple SQL query to select specific columns and filter for specific rows to retrieve only the data you need for your application. In this article, I will demonstrate how you can accomplish that using Python\u2019s boto3 library.", "Normally, you would have to download this entire large file and filter out data inside of your application. The problem is that your Lambda function may not have enough RAM to read this entire large file into memory. There are some ways to tackle this, such as reading and filtering data in chunks or moving the function to a Docker container, but the simplest and most cost-effective solution in this scenario would be to use the S3-Select feature. Here is how it works.", "First, since I actually don\u2019t have any marketing data, we will use data about taxi trips from New York [1], and we will filter for suspicious records with unknown payment type, encoded as payment_type==5according to the data dictionary.", "Let\u2019s explore how many rows the entire file has as compared to only those with payment_type==5.", "This means that we are only interested in 12 out of half a million records. It would be a massive waste of resources to download and read the entire dataset into memory just to get those 12 rows!", "To demonstrate S3-Select in action, we first upload our large CSV file [1] to an S3 bucket:", "Now we can use S3-Select to get only data with payment type equal to 5, i.e., we retrieve from S3 only the data we are interested in \u2014 data with unknown payment type. And the best part is that it\u2019s all defined in a simple SQL query:", "In the code snippet above, we had to define the InputSerialization='CSV' to specify that this is the format of our S3 object. Also, we set FileHeaderInfo to 'Use', which ensures that we can use column names in our S3-select query.", "By using the OutputSerialization parameter, we define that we want our output to be comma-separated, which allows us to store the result in a separate CSV file. If you want to use S3-Select in an API, you might prefer the JSON format.", "Let\u2019s cross-check the TARGET_FILE \u2014 it should only have 12 rows.", "You may ask: if S3 is so easy to use, why do we need Athena to query a data lake? Here are the main differences between those two:", "In short, the benefits of this API are:", "In this article, we discussed S3-select, which allows filtering data stored in S3. S3-select should only be used when dealing with a single file and when you only need to select specific columns and filter for only specific rows from a flat-file.", "If this article was helpful, follow me to see my next articles.", "In the article linked below, I discuss various options to transfer large amounts of data between S3 buckets.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "DevRel, Data Professional, Cloud & .py fan. www.annageller.com. Get my articles via email: https://annageller.medium.com/subscribe"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F2bd2850bc428&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-i-improved-performance-retrieving-big-data-with-s3-select-2bd2850bc428&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-i-improved-performance-retrieving-big-data-with-s3-select-2bd2850bc428&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-i-improved-performance-retrieving-big-data-with-s3-select-2bd2850bc428&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-i-improved-performance-retrieving-big-data-with-s3-select-2bd2850bc428&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----2bd2850bc428--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----2bd2850bc428--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://annageller.medium.com/?source=post_page-----2bd2850bc428--------------------------------", "anchor_text": ""}, {"url": "https://annageller.medium.com/?source=post_page-----2bd2850bc428--------------------------------", "anchor_text": "Anna Geller"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F5bdf5a3385cd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-i-improved-performance-retrieving-big-data-with-s3-select-2bd2850bc428&user=Anna+Geller&userId=5bdf5a3385cd&source=post_page-5bdf5a3385cd----2bd2850bc428---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F2bd2850bc428&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-i-improved-performance-retrieving-big-data-with-s3-select-2bd2850bc428&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F2bd2850bc428&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-i-improved-performance-retrieving-big-data-with-s3-select-2bd2850bc428&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://towardsdatascience.com/tagged/making-sense-of-big-data", "anchor_text": "Making Sense of Big Data"}, {"url": "https://www.pexels.com/@erkan?utm_content=attributionCopyText&utm_medium=referral&utm_source=pexels", "anchor_text": "Erkan Utu"}, {"url": "https://www.pexels.com/photo/abstract-blur-bright-color-243908/?utm_content=attributionCopyText&utm_medium=referral&utm_source=pexels", "anchor_text": "Pexels"}, {"url": "https://www1.nyc.gov/assets/tlc/downloads/pdf/data_dictionary_trip_records_yellow.pdf", "anchor_text": "data dictionary"}, {"url": "https://medium.com/@anna.anisienia", "anchor_text": "follow me"}, {"url": "https://medium.com/better-programming/it-took-2-days-and-7-engineers-to-move-data-between-s3-buckets-d79c55b16d0", "anchor_text": "It Took 2 Days and 7 Engineers to Move Data Between S3 BucketsThe best options to transfer Big Data between two S3 bucketsmedium.com"}, {"url": "https://www1.nyc.gov/site/tlc/about/tlc-trip-record-data.page", "anchor_text": "https://www1.nyc.gov/site/tlc/about/tlc-trip-record-data.page"}, {"url": "https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/s3.html#S3.Client.select_object_content", "anchor_text": "https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/s3.html#S3.Client.select_object_content"}, {"url": "https://docs.aws.amazon.com/AmazonS3/latest/API/API_InputSerialization.html", "anchor_text": "https://docs.aws.amazon.com/AmazonS3/latest/API/API_InputSerialization.html"}, {"url": "https://docs.aws.amazon.com/AmazonS3/latest/API/API_SelectObjectContent.html", "anchor_text": "https://docs.aws.amazon.com/AmazonS3/latest/API/API_SelectObjectContent.html"}, {"url": "https://medium.com/tag/programming?source=post_page-----2bd2850bc428---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/tag/python?source=post_page-----2bd2850bc428---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/data-engineering?source=post_page-----2bd2850bc428---------------data_engineering-----------------", "anchor_text": "Data Engineering"}, {"url": "https://medium.com/tag/aws?source=post_page-----2bd2850bc428---------------aws-----------------", "anchor_text": "AWS"}, {"url": "https://medium.com/tag/making-sense-of-big-data?source=post_page-----2bd2850bc428---------------making_sense_of_big_data-----------------", "anchor_text": "Making Sense Of Big Data"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F2bd2850bc428&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-i-improved-performance-retrieving-big-data-with-s3-select-2bd2850bc428&user=Anna+Geller&userId=5bdf5a3385cd&source=-----2bd2850bc428---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F2bd2850bc428&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-i-improved-performance-retrieving-big-data-with-s3-select-2bd2850bc428&user=Anna+Geller&userId=5bdf5a3385cd&source=-----2bd2850bc428---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F2bd2850bc428&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-i-improved-performance-retrieving-big-data-with-s3-select-2bd2850bc428&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----2bd2850bc428--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F2bd2850bc428&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-i-improved-performance-retrieving-big-data-with-s3-select-2bd2850bc428&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----2bd2850bc428---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----2bd2850bc428--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----2bd2850bc428--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----2bd2850bc428--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----2bd2850bc428--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----2bd2850bc428--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----2bd2850bc428--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----2bd2850bc428--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----2bd2850bc428--------------------------------", "anchor_text": ""}, {"url": "https://annageller.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://annageller.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Anna Geller"}, {"url": "https://annageller.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "5.4K Followers"}, {"url": "http://www.annageller.com", "anchor_text": "www.annageller.com"}, {"url": "https://annageller.medium.com/subscribe", "anchor_text": "https://annageller.medium.com/subscribe"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F5bdf5a3385cd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-i-improved-performance-retrieving-big-data-with-s3-select-2bd2850bc428&user=Anna+Geller&userId=5bdf5a3385cd&source=post_page-5bdf5a3385cd--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F908ff40c4340&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-i-improved-performance-retrieving-big-data-with-s3-select-2bd2850bc428&newsletterV3=5bdf5a3385cd&newsletterV3Id=908ff40c4340&user=Anna+Geller&userId=5bdf5a3385cd&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}