{"url": "https://towardsdatascience.com/data-augmentation-for-end-to-end-speech-translation-be4a1bd9ffbf", "time": 1683006077.674607, "path": "towardsdatascience.com/data-augmentation-for-end-to-end-speech-translation-be4a1bd9ffbf/", "webpage": {"metadata": {"title": "Data Augmentation for End-to-End Speech Translation | by Mattia Di Gangi | Towards Data Science", "h1": "Data Augmentation for End-to-End Speech Translation", "description": "End-to-end (or direct) speech translation is an approach to speech translation (ST) that is gaining high interest from the research world in the last few years. It consists in using a single deep\u2026"}, "outgoing_paragraph_urls": [{"url": "http://sox.sourceforge.net/", "anchor_text": "SoX", "paragraph_index": 6}, {"url": "https://workshop2019.iwslt.org/59.php", "anchor_text": "IWSLT 2019", "paragraph_index": 6}], "all_paragraphs": ["End-to-end (or direct) speech translation is an approach to speech translation (ST) that is gaining high interest from the research world in the last few years. It consists in using a single deep learning model that learns to generate translated text of the input audio in an end-to-end fashion. Its surge in popularity is due to the scientific interest of achieving such a difficult task, but also to the expected effectiveness in practical applications.", "The use of a single model is appealing for many reasons:", "There is one big problem with this. End-to-end speech translation requires different data from ASR and MT, and while these two tasks have been studied for decades and have plenty of data at their disposal (at least for some languages), very little is publicly available for the new approach. In ST, we only have some hundreds of thousands segment pairs for the best-resourced languages, while a neural machine translation system (an easier task because the input is textual) is usually trained on tens or hundreds of millions of sentence pairs.", "Then, how can we train a system with such small data? The answer so far is data augmentation: creating synthetic data through transformation of the existing data.", "Data augmentation is a commonly used technique in deep learning, as this approach is famous to be data hungry and models can improve significantly their quality by adding data. The classic approach is to alter the input sample while keeping fixed its class label. One example for computer vision is to rotate images: the input image will be different as it is viewed by a different angle, but the content will be the same. A dog stays a dog and a cat stays a cat, though rotated. A practical example can be found here:", "In this post, I want to focus on text and audio augmentation techniques that have been proposed for speech translation but can also be used for other tasks involving these types of data. Obviously, rotating and shifting pixels are two techniques that do not apply to text and audio, so we need more sophisticated techniques, sometimes involving the use of other machine learning systems.", "The first approach is similar to what happens with images: alter the input but keep the labels. A broadly used approach also by the community of ASR is speed perturbation, which consists in using a tool like SoX for perturbing the audio speed while keeping the translation fixed. It was used, for example, in the winning submission at IWSLT 2019 [1], an international workshop on speech translation that organizes a competition every year. One common practice is to multiply the speed (or the time duration, which is equivalent for our purpose) by a random factor in the range [0.9\u20131.1], which usually produces an audio that is still human-like but sounds different from the original. This kind of transformation is usually applied offline when the dataset is being built.", "Another type of audio transformation happens online. Only some types of transformations can be applied online because current speech translation systems receive as input spectrograms, not wave forms. In order to occupy less disk space and save computational time during training, the datasets are usually stored as spectrograms, which require power to be computed and are more compact than the waveforms.", "SpecAugment [2] is a popular spectrogram augmentation technique that was proposed last year and gathered a great success. It consists of three steps: i) time warp is a complex and computational expensive algorithm that shifts a portion of the spectrogram along the time axis; ii) frequency masking applies a horizontal mask that covers some frequencies for the whole temporal dimension; iii) time masking applies a vertical mask that covers all the frequencies for some adjacent time steps. Time and frequency masking are the two most effective components of SpecAugment and basically force the model to predict the target sequence while being deaf to some frequencies or portions of the audio. The two types of masks have different width and positions at every iteration, so that the model learns to use them all.", "A similar idea has been proposed more recently by Nguyen and colleagues [3] to perturb the audio speed in an online fashion. Their method, called time stretch divides the input spectrogram in fixed-width windows and shrinks or stretches each window with a different random factor picked from (0.8\u20131.25). With this technique every spectrogram will have windows perturbed in time in different and also contrasting ways, and according to the authors it can replace offline speed perturbation.", "The most direct way to transfer knowledge between tasks, usually when one of the two has more data available, is the so-called pre-training. First, train a model on the large-resourced task, then use the same deep learning architecture for the second task, and initialize the weights with the ones learned from the first task. This is exactly one of the first approaches proposed for transferring knowledge from MT and ASR systems to direct ST systems [4,5,6]. Train an ASR system using the same architecture (at least for the encoder side) that will be used for direct ST. Train an MT system with the same decoder architecture that will be used in direct ST. Finally, initialize the direct ST system with the encoder weights learned in ASR and the decoder weights learned in MT. This approach leads to faster convergence and better translation quality, however, the decoder pre-training appears to be less effective than encoder pre-training. To overcome this problem, Bahar et al. [7] showed that decoder pre-training is more effective if one additional \u201cadapter\u201d encoder layer is put on top of the pre-trained encoder.", "Kano et al. [8] proposed two-stage decoding as a way to better use pre-trained components. It is a network consisting of three components, one encoder and two cascaded decoders. The first decoder generates sentences in the source language, similarly to an ASR system, while the second decoder generated text in the target language. The second decoder computes its attention with the states of the first decoder, right before they are used to select the output symbols. In this sense, the two-stage decoding is similar to a cascaded systems, but it does not discretize the source sequence in order to prevent errors. The two-stage decoding model is initialized from pre-trained ASR and MT models for an increased effectiveness. Sperber et al. [9] proposed an \u201cattention-passing\u201d model, which improves the two-stage decoding model for a more effective pre-training. They identify a problem in the two-stage decoding as it passes the first decoder outputs as attention input to the second decoder. The decoder states already contain the information to select the next word to generate, then a form of error propagation appears again in the model. In order to overcome it, they propose to use the context vectors produced by the attention between the first decoder and the encoder as input to the second decoder attention. This way, they suppose that the second decoder is connected directly to the relevant audio portion and no error is introduced by some early decisions made by the first decoder. This model seems to be more data-efficient through a clever scheme of multitask learning involving ASR, ST, and MT in the same training.", "If your data is organized in triplets audio-transcript-translation, the knowledge of an MT model can be transferred to the direct ST model through knowledge distillation. For each triplet, the audio is given as input to the direct ST model, the transcript as input to the MT model, then the direct ST model is trained against the distribution generated by the MT model and not the ground truth. This kind of training is useful in some ways: 1) the soft distribution generated by the MT model is easier to learn than the one-hot ground truth; and 2) the MT distribution also contains some relations between symbols that the MT model knows but maybe are not present in the ST training data. This way, the direct ST model can learn a larger vocabulary than what is present in the training data [11].", "Jia et al. [12] proposed to create synthetic parallel audio-translation data using existing systems for other tasks: 1) when only audio-transcript data is available, use an MT system to translate the transcripts in the target language; 2) when only parallel source-target texts are available, use a text-to-speech (TTS) system to generate the source audio. With this approach, the training data for direct ST can be augmented by orders of magnitude, and the quality of systems for those tasks ensures that the data is high quality. They also showed that the use of MT is more effective than TTS, maybe because the synthesized data is not very similar to human voice in real conditions. Similar results have been confirmed by Pino et al. [13], who also showed that this kind of data augmentation outperforms all other proposed methods and in some cases also makes pre-training useless.", "A final technique for data augmentation is to go multilingual. As multilingual MT increases the translation quality for the low-resourced languages, Inaguma et al. [14] and us [15] proposed in two parallel works to leverage data from different languages. The objective is twofold: 1) more data to train the audio encoder, and 2) a positive transfer between similar languages that can have similar grammar or identical words, like English and French. The results in both studies are positive, but it is yet to see if the gain from multilingual training is kept also when using other data augmentation techniques.", "Many techniques have been proposed for direct ST to leverage more data than the few available for this task. My personal recommendation to build a state of the art system is to always use an encoder pre-trained with a strong ASR model, augment the training set by generating synthetic translations with a strong MT system, and use SpecAugment during training. In our experiments, this combination was always effective, or at least not hurting. The other techniques are also useful, but their effectiveness can be reduced when used in combination with other methods, which may be a problem if they increase the training time.", "I hope that this roundup of the existing data augmentation methods for direct ST is useful if you are approaching this field now, but also if you work in related fields based on audio and/or text. In particular, great improvements can come out by generating data with other components trained on more data for other tasks, or with online augmentation techniques that distort the original data.", "If you are interested in direct ST but do not know where to start to work with it, check out my tutorial:", "[5] B\u00e9rard, Alexandre, et al. \u201cEnd-to-end automatic speech translation of audiobooks.\u201d 2018 IEEE International Conference on Acoustics, Speech and Signal Processing (ICASSP). IEEE, 2018.", "[6] Bansal, Sameer, et al. \u201cPre-training on High-Resource Speech Recognition Improves Low-Resource Speech-to-Text Translation.\u201d Proceedings of NAACL-HLT. 2019.", "[7] Bahar, Parnia, Tobias Bieschke, and Hermann Ney. \u201cA comparative study on end-to-end speech to text translation.\u201d Proceedings of ASRU. (2019a).", "[8] Kano, Takatomo, Sakriani Sakti, and Satoshi Nakamura. \u201cStructured-based Curriculum Learning for End-to-end English-Japanese Speech Translation.\u201d (2017).", "[9] Sperber, Matthias, et al. \u201cAttention-passing models for robust and data-efficient end-to-end speech translation.\u201d Transactions of the Association for Computational Linguistics 7 (2019): 313\u2013325.", "[12] Jia, Ye, et al. \u201cLeveraging weakly supervised data to improve end-to-end speech-to-text translation.\u201d ICASSP 2019\u20132019 IEEE International Conference on Acoustics, Speech and Signal Processing (ICASSP). IEEE, 2019.", "[13] Pino, Juan, et al. \u201cHarnessing indirect training data for end-to-end automatic speech translation: Tricks of the trade.\u201d Proceedings of the 16th International Workshop on Spoken Language Translation (IWSLT). 2019.", "[15] Di Gangi, Mattia Antonino, Matteo Negri, and Marco Turchi. \u201cOne-to-many multilingual end-to-end speech translation.\u201d Proceedings of ASRU (2019).", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "PhD in Speech Translation || Speech Translation Scientist at AppTek || Writing about machine learning, python, and software development, better together."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fbe4a1bd9ffbf&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdata-augmentation-for-end-to-end-speech-translation-be4a1bd9ffbf&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdata-augmentation-for-end-to-end-speech-translation-be4a1bd9ffbf&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdata-augmentation-for-end-to-end-speech-translation-be4a1bd9ffbf&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdata-augmentation-for-end-to-end-speech-translation-be4a1bd9ffbf&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----be4a1bd9ffbf--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----be4a1bd9ffbf--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@mattiadigangi?source=post_page-----be4a1bd9ffbf--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@mattiadigangi?source=post_page-----be4a1bd9ffbf--------------------------------", "anchor_text": "Mattia Di Gangi"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F8a5b9f193a3c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdata-augmentation-for-end-to-end-speech-translation-be4a1bd9ffbf&user=Mattia+Di+Gangi&userId=8a5b9f193a3c&source=post_page-8a5b9f193a3c----be4a1bd9ffbf---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fbe4a1bd9ffbf&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdata-augmentation-for-end-to-end-speech-translation-be4a1bd9ffbf&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fbe4a1bd9ffbf&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdata-augmentation-for-end-to-end-speech-translation-be4a1bd9ffbf&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@swimstaralex?utm_source=medium&utm_medium=referral", "anchor_text": "Alexander Sinn"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://medium.com/machine-translation-fbk/machines-can-learn-to-translate-directly-your-voice-fbk-iwslt18-bb284ccae8bc", "anchor_text": "Machines can learn to translate your voiceHow we built our end-to-end speech-to-text translation system for the IWSLT 2018 evaluation campaign.medium.com"}, {"url": "https://medium.com/@thimblot/data-augmentation-boost-your-image-dataset-with-few-lines-of-python-155c2dc1baec", "anchor_text": "Data augmentation : boost your image dataset with few lines of PythonTo perform well, an image classifier needs a lot of images to train on. Deep learning algorithms can fail to classify\u2026medium.com"}, {"url": "http://sox.sourceforge.net/", "anchor_text": "SoX"}, {"url": "https://workshop2019.iwslt.org/59.php", "anchor_text": "IWSLT 2019"}, {"url": "https://towardsdatascience.com/getting-started-with-end-to-end-speech-translation-3634c35a6561", "anchor_text": "Getting Started with End-to-End Speech TranslationWith Pytorch you can translate English speech in only a few stepstowardsdatascience.com"}, {"url": "https://towardsdatascience.com/tips-for-reading-and-writing-an-ml-research-paper-a505863055cf", "anchor_text": "Tips for Reading and Writing an ML Research PaperLessons learned by dozens of peer reviews given and receivedtowardsdatascience.com"}, {"url": "https://medium.com/tag/deep-learning?source=post_page-----be4a1bd9ffbf---------------deep_learning-----------------", "anchor_text": "Deep Learning"}, {"url": "https://medium.com/tag/data-science?source=post_page-----be4a1bd9ffbf---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/scicomm?source=post_page-----be4a1bd9ffbf---------------scicomm-----------------", "anchor_text": "Scicomm"}, {"url": "https://medium.com/tag/speech-translation?source=post_page-----be4a1bd9ffbf---------------speech_translation-----------------", "anchor_text": "Speech Translation"}, {"url": "https://medium.com/tag/data-augmentation?source=post_page-----be4a1bd9ffbf---------------data_augmentation-----------------", "anchor_text": "Data Augmentation"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fbe4a1bd9ffbf&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdata-augmentation-for-end-to-end-speech-translation-be4a1bd9ffbf&user=Mattia+Di+Gangi&userId=8a5b9f193a3c&source=-----be4a1bd9ffbf---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fbe4a1bd9ffbf&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdata-augmentation-for-end-to-end-speech-translation-be4a1bd9ffbf&user=Mattia+Di+Gangi&userId=8a5b9f193a3c&source=-----be4a1bd9ffbf---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fbe4a1bd9ffbf&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdata-augmentation-for-end-to-end-speech-translation-be4a1bd9ffbf&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----be4a1bd9ffbf--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fbe4a1bd9ffbf&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdata-augmentation-for-end-to-end-speech-translation-be4a1bd9ffbf&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----be4a1bd9ffbf---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----be4a1bd9ffbf--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----be4a1bd9ffbf--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----be4a1bd9ffbf--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----be4a1bd9ffbf--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----be4a1bd9ffbf--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----be4a1bd9ffbf--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----be4a1bd9ffbf--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----be4a1bd9ffbf--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@mattiadigangi?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@mattiadigangi?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Mattia Di Gangi"}, {"url": "https://medium.com/@mattiadigangi/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "216 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F8a5b9f193a3c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdata-augmentation-for-end-to-end-speech-translation-be4a1bd9ffbf&user=Mattia+Di+Gangi&userId=8a5b9f193a3c&source=post_page-8a5b9f193a3c--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fa5e074590bcf&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdata-augmentation-for-end-to-end-speech-translation-be4a1bd9ffbf&newsletterV3=8a5b9f193a3c&newsletterV3Id=a5e074590bcf&user=Mattia+Di+Gangi&userId=8a5b9f193a3c&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}