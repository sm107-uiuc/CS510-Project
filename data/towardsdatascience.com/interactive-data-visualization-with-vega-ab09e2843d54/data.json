{"url": "https://towardsdatascience.com/interactive-data-visualization-with-vega-ab09e2843d54", "time": 1682995791.0963898, "path": "towardsdatascience.com/interactive-data-visualization-with-vega-ab09e2843d54/", "webpage": {"metadata": {"title": "Interactive Data Visualization with Vega | by D\u00e9borah Mesquita | Towards Data Science", "h1": "Interactive Data Visualization with Vega", "description": "I\u2019m always learning new visualization tools because this helps me identify the right one for the task at hand. When it comes to Data Visualization, d3 is usually the go-to choice, but recently I've\u2026"}, "outgoing_paragraph_urls": [{"url": "https://vega.github.io/vega/", "anchor_text": "Vega", "paragraph_index": 0}, {"url": "https://vega.github.io/vega-lite/", "anchor_text": "common statistical graphics", "paragraph_index": 3}, {"url": "https://vega.github.io/vega/usage/", "anchor_text": "deploy Vega on the web", "paragraph_index": 5}, {"url": "https://vega.github.io/editor/#/custom/vega", "anchor_text": "Vega Editor", "paragraph_index": 5}, {"url": "https://vega.github.io/editor/#/url/vega/N4KABGBEAkDODGALApgWwIaQFxUQFzwAdYsB6UgN2QHN0A6agSz0QFcAjOxge1IRQyUa6SgFY6AK1jcAdpAA04KAHdGAExbYwAFgAMuxREgpG1fFoBM+w1ELo1axjOpbRipZDXo8mHAG0lCFAIEKgZdFRkLUgfdgAbKJtQyAp0ONZkWC0A0NDgSHhvGm4AJwBPaIBBBSgI7lYZPEsADgBfJNz8wrxi8uiAIRrIOoamnFFRdsDOgqLqUoqcSABhIZHGrW0AZlbpiABdad2D9yMENMzs6eDcyHDI6IAPc4SFPag8MsIopfZ0GTUb1yUDU3AwTi0+S8PmisVe8igADNGMg4oClt1ehUpsDICV-tQfip1JoOkY7A4nC4cLo6LpREcOjdkvciZAyi9Eu9PGD0BCcFDvL4Puh4okkSi0dF1k0cbd8c42SYzE0jkp9qdao9Lv5rlBSiiNr9uAQwUNOU8LWA5UF9SVDWMoAlEU0EZALUsOYVXtb1ZrIBgSgBrLK6vLcz7faIlZDwV3cxElM0CzxC7AxUWvG0hSDIGTwbhqInM255nolSHvZKPSHu71s571obI1HoqCY+Z9bO41QaRC1j1QRsXIZ-AFaACM3duizA+UH7ItbpbUqWMsg0+SZQsA6bnqXUFS6SJuk3OeRcTitaPGWisB6qPit+OwN9wJfEBfh1aQA", "anchor_text": "here", "paragraph_index": 9}, {"url": "https://vega.github.io/vega/docs/", "anchor_text": "Docs", "paragraph_index": 10}, {"url": "https://vega.github.io/vega/docs/axes/", "anchor_text": "properties", "paragraph_index": 13}, {"url": "https://vega.github.io/vega/docs/types/", "anchor_text": "Types", "paragraph_index": 15}, {"url": "https://vega.github.io/vega/docs/marks/", "anchor_text": "Vega docs", "paragraph_index": 20}, {"url": "https://vega.github.io/vega/docs/transforms/", "anchor_text": "Transforms", "paragraph_index": 23}, {"url": "https://vega.github.io/vega/docs/transforms/collect/", "anchor_text": "collect", "paragraph_index": 23}, {"url": "https://vega.github.io/vega/docs/signals/", "anchor_text": "Signals", "paragraph_index": 28}, {"url": "https://vega.github.io/vega/docs/expressions/", "anchor_text": "expressions", "paragraph_index": 30}, {"url": "https://vega.github.io/vega/docs/expressions/#scale", "anchor_text": "scale", "paragraph_index": 30}, {"url": "https://github.com/dmesquita/vega-timeline-tutorial", "anchor_text": "here", "paragraph_index": 37}, {"url": "https://vega.github.io/vega/examples/", "anchor_text": "https://vega.github.io/vega/examples/", "paragraph_index": 40}, {"url": "http://deborahmesquita.com/", "anchor_text": "http://deborahmesquita.com/", "paragraph_index": 43}], "all_paragraphs": ["I\u2019m always learning new visualization tools because this helps me identify the right one for the task at hand. When it comes to Data Visualization, d3 is usually the go-to choice, but recently I've been playing with Vega and I'm loving it.", "Vega introduces a visualization grammar. A grammar is basically a set of rules that dictate how to use a language, so we can think of Vega as a tool that defines a set of rules of how to build and manipulate visual elements.", "As my experience with data visualization grows, I\u2019m finding more and more that constraints are a good thing. By introducing a visualization grammar, Vega gives us some constraints to work with. The best thing about it is that these constraints can make us feel very productive while building data visualizations.", "There is also Vega-Lite, a high-level grammar that focuses on rapid creation of common statistical graphics, but today we'll stick with Vega which is a more general purpose tool.", "Ok, enough of introductions, let\u2019s get an overview about how Vega works.", "We can deploy Vega on the web, but in this tutorial we\u2019ll simply use the Vega Editor (which is another great thing about Vega).", "While working with Vega we define the visualization in a JSON object. Let\u2019s start building a Bar Chart.", "If we break down this chart we have:", "And this is how we define the above using Vega:", "You can try it live here.", "Let\u2019s go through each of these definitions. I\u2019ll explain them briefly here but there are a lot more properties we can use to customize things (it\u2019s a good idea to check the Docs when using each of them).", "We can define data directly in a specification (like we are doing using the \"values\" property) or load data from an external file (json or csv for example) using the \"url\" property.", "Vega scales are provided by the d3-scale library. We specify the type of scale with the \"type\" keyword (default is linear). Scale domains can be specified in multiple ways:", "Here we need to specify the orientation and the scale that should be used to create the axis. There are a lot of properties we can use to customize them.", "We use marks to encode data using geometric primitives (rectangles, circles, lines and so on). In this bar chart we are using the Rect mark. They need a given position, width, and height. We also need to specify what data should be used to build the marks (the \"from\" property).", "All the definitions for things like \"x\", \"y\" and \"width\" will come from this dataset. Vega Types might look a little confusing at first, so let\u2019s go through the ones we are using here:", "The \"x\" property for the rects will be set by the passing the values from \"category\" field to the \"xscale\".", "The \"y\" property for each rect will be the range band width of the band scale xscale.", "The \"fill\" color of the rects will be steelblue. To define constant values we use the \"value\" property.", "Vega uses the same enter, update, exit pattern that d3 uses:", "\u201cThe enter properties are evaluated when data is processed for the first time and a mark instance is newly added to a scene. The update properties are evaluated for all existing (non-exiting) mark instances. The exit properties are evaluated when the data backing a mark is removed, and so the mark is leaving the visual scene.\u201d \u2014 Vega docs", "We use the pattern inside the \"encode\" property. In this bar chart we are placing the elements when the data is processed:", "And this was the Vega 101 tour! To get a better sense of what Vega is capable of let\u2019s build a timeline chart.", "Besides loading the data we can also filter, calculate new fields or derive new data streams using Vega Transforms. We can sort the items by name using the collect transform:", "Another great thing about Vega is that it's possible the inspect the contents of all the data we use to build the visualizations:", "We'll need a time scale for the x-axis and an ordinal scale to color the rectangles:", "Let's place an axis in the bottom and show the year in the labels:", "There are three marks: the rectangles, the text inside the rectangles and the line from each rectangle to the axis. We'll use \"rect\", \"text\" and \"rule\" marks to define each of them.", "But first let's introduce an important Vega property: Signals.", "Signals are dynamic variables. As the documentation says, the signal values are reactive: they can update in response to input event streams, external API calls, or changes to upstream signals. Here we'll use them with initial values, but their power comes from being able to update them (we'll see how to do that another time).", "Now that we have the signals we can use them to place the marks. Signals can also hold Vega expressions. A very used one is the scale:", "scale(name, value[, group])Applies the named scale transform (or projection) to the specified value. The optional group argument takes a scenegraph group mark item to indicate the specific scope in which to look up the scale or projection.", "In this example we'll use an expression to place the rectangles in the middle of each year with this expression:", "As we saw earlier, we need to specify what data should be used to build the marks with the \"from\" property. Vega is so great that we can specify the data from another mark itself! In this case, we'll use the data from the rect marks so we can get the center for each rectangle and place the text in the middle. To access the data points we use \"datum\" inside the expression.", "Legends definitions are similar to mark definitions. To customize is the addressable elements are:", "Here we'll only set the \"x\" position for the legend (the whole group) and set the fontSize for the title and the labels.", "The config object defines default visual values to set a visualization\u2019s theme. Here we are setting the typefaces for the text of the graph. The title directive adds a descriptive title to a chart.", "And we are done! You can see the code here.", "There are some other cool Vega features that we didn't see in this tutorial:", "Today I use Vega in my workflow to prototype and test assumptions about the choices of my data visualizations. If after that I identify that I need something more customized I\u2019ll then change gears and use d3 for that.", "You can check more Vega examples here: https://vega.github.io/vega/examples/. We can view all the examples in the Online Vega Editor, which is awesome.", "And that's it! Thanks for reading! \ud83d\ude04", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Award-winning Data Scientist \ud83d\udc69\ud83c\udffe\u200d\ud83d\udcbb Loves to write and explain things in different ways\u2728 - http://deborahmesquita.com/"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fab09e2843d54&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Finteractive-data-visualization-with-vega-ab09e2843d54&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Finteractive-data-visualization-with-vega-ab09e2843d54&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Finteractive-data-visualization-with-vega-ab09e2843d54&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Finteractive-data-visualization-with-vega-ab09e2843d54&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----ab09e2843d54--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----ab09e2843d54--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@dehhmesquita?source=post_page-----ab09e2843d54--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@dehhmesquita?source=post_page-----ab09e2843d54--------------------------------", "anchor_text": "D\u00e9borah Mesquita"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fdd9e06a0a640&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Finteractive-data-visualization-with-vega-ab09e2843d54&user=D%C3%A9borah+Mesquita&userId=dd9e06a0a640&source=post_page-dd9e06a0a640----ab09e2843d54---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fab09e2843d54&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Finteractive-data-visualization-with-vega-ab09e2843d54&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fab09e2843d54&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Finteractive-data-visualization-with-vega-ab09e2843d54&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://vega.github.io/vega/", "anchor_text": "Vega"}, {"url": "https://vega.github.io/vega-lite/", "anchor_text": "common statistical graphics"}, {"url": "https://vega.github.io/vega/usage/", "anchor_text": "deploy Vega on the web"}, {"url": "https://vega.github.io/editor/#/custom/vega", "anchor_text": "Vega Editor"}, {"url": "https://vega.github.io/schema/vega/v5.json", "anchor_text": "https://vega.github.io/schema/vega/v5.json"}, {"url": "https://vega.github.io/editor/#/url/vega/N4KABGBEAkDODGALApgWwIaQFxUQFzwAdYsB6UgN2QHN0A6agSz0QFcAjOxge1IRQyUa6SgFY6AK1jcAdpAA04KAHdGAExbYwAFgAMuxREgpG1fFoBM+w1ELo1axjOpbRipZDXo8mHAG0lCFAIEKgZdFRkLUgfdgAbKJtQyAp0ONZkWC0A0NDgSHhvGm4AJwBPaIBBBSgI7lYZPEsADgBfJNz8wrxi8uiAIRrIOoamnFFRdsDOgqLqUoqcSABhIZHGrW0AZlbpiABdad2D9yMENMzs6eDcyHDI6IAPc4SFPag8MsIopfZ0GTUb1yUDU3AwTi0+S8PmisVe8igADNGMg4oClt1ehUpsDICV-tQfip1JoOkY7A4nC4cLo6LpREcOjdkvciZAyi9Eu9PGD0BCcFDvL4Puh4okkSi0dF1k0cbd8c42SYzE0jkp9qdao9Lv5rlBSiiNr9uAQwUNOU8LWA5UF9SVDWMoAlEU0EZALUsOYVXtb1ZrIBgSgBrLK6vLcz7faIlZDwV3cxElM0CzxC7AxUWvG0hSDIGTwbhqInM255nolSHvZKPSHu71s571obI1HoqCY+Z9bO41QaRC1j1QRsXIZ-AFaACM3duizA+UH7ItbpbUqWMsg0+SZQsA6bnqXUFS6SJuk3OeRcTitaPGWisB6qPit+OwN9wJfEBfh1aQA", "anchor_text": "here"}, {"url": "https://vega.github.io/vega/docs/", "anchor_text": "Docs"}, {"url": "https://vega.github.io/vega/docs/scales/#dataref", "anchor_text": "data reference"}, {"url": "https://vega.github.io/vega/docs/types/#Array", "anchor_text": "array"}, {"url": "https://vega.github.io/vega/docs/types/#Signal", "anchor_text": "signal reference"}, {"url": "https://vega.github.io/vega/docs/axes/", "anchor_text": "properties"}, {"url": "https://vega.github.io/vega/docs/types/", "anchor_text": "Types"}, {"url": "https://vega.github.io/vega/docs/marks/", "anchor_text": "Vega docs"}, {"url": "https://vega.github.io/vega/docs/transforms/", "anchor_text": "Transforms"}, {"url": "https://vega.github.io/vega/docs/transforms/collect/", "anchor_text": "collect"}, {"url": "https://vega.github.io/vega/docs/signals/", "anchor_text": "Signals"}, {"url": "https://vega.github.io/vega/docs/expressions/", "anchor_text": "expressions"}, {"url": "https://vega.github.io/vega/docs/expressions/#scale", "anchor_text": "scale"}, {"url": "https://vega.github.io/vega/docs/marks/group", "anchor_text": "group"}, {"url": "https://vega.github.io/vega/docs/marks/text", "anchor_text": "text"}, {"url": "https://vega.github.io/vega/docs/marks/text", "anchor_text": "text"}, {"url": "https://vega.github.io/vega/docs/marks/symbol", "anchor_text": "symbol"}, {"url": "https://vega.github.io/vega/docs/marks/group", "anchor_text": "group"}, {"url": "https://vega.github.io/vega/docs/marks/rect", "anchor_text": "rect"}, {"url": "https://github.com/dmesquita/vega-timeline-tutorial", "anchor_text": "here"}, {"url": "https://vega.github.io/vega/docs/triggers", "anchor_text": "Triggers"}, {"url": "https://vega.github.io/vega/docs/projections", "anchor_text": "Projections"}, {"url": "https://vega.github.io/vega/docs/event-streams", "anchor_text": "Event Streams"}, {"url": "https://vega.github.io/vega/docs/layout", "anchor_text": "Layout"}, {"url": "https://vega.github.io/vega/examples/", "anchor_text": "https://vega.github.io/vega/examples/"}, {"url": "https://medium.com/tag/data-visualization?source=post_page-----ab09e2843d54---------------data_visualization-----------------", "anchor_text": "Data Visualization"}, {"url": "https://medium.com/tag/towards-data-science?source=post_page-----ab09e2843d54---------------towards_data_science-----------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/tag/data-science?source=post_page-----ab09e2843d54---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fab09e2843d54&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Finteractive-data-visualization-with-vega-ab09e2843d54&user=D%C3%A9borah+Mesquita&userId=dd9e06a0a640&source=-----ab09e2843d54---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fab09e2843d54&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Finteractive-data-visualization-with-vega-ab09e2843d54&user=D%C3%A9borah+Mesquita&userId=dd9e06a0a640&source=-----ab09e2843d54---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fab09e2843d54&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Finteractive-data-visualization-with-vega-ab09e2843d54&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----ab09e2843d54--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fab09e2843d54&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Finteractive-data-visualization-with-vega-ab09e2843d54&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----ab09e2843d54---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----ab09e2843d54--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----ab09e2843d54--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----ab09e2843d54--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----ab09e2843d54--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----ab09e2843d54--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----ab09e2843d54--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----ab09e2843d54--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----ab09e2843d54--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@dehhmesquita?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@dehhmesquita?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "D\u00e9borah Mesquita"}, {"url": "https://medium.com/@dehhmesquita/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "2.8K Followers"}, {"url": "http://deborahmesquita.com/", "anchor_text": "http://deborahmesquita.com/"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fdd9e06a0a640&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Finteractive-data-visualization-with-vega-ab09e2843d54&user=D%C3%A9borah+Mesquita&userId=dd9e06a0a640&source=post_page-dd9e06a0a640--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F1f593355f97f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Finteractive-data-visualization-with-vega-ab09e2843d54&newsletterV3=dd9e06a0a640&newsletterV3Id=1f593355f97f&user=D%C3%A9borah+Mesquita&userId=dd9e06a0a640&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}