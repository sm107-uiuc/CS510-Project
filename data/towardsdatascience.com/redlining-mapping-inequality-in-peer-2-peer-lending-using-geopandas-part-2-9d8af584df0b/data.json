{"url": "https://towardsdatascience.com/redlining-mapping-inequality-in-peer-2-peer-lending-using-geopandas-part-2-9d8af584df0b", "time": 1682994752.929025, "path": "towardsdatascience.com/redlining-mapping-inequality-in-peer-2-peer-lending-using-geopandas-part-2-9d8af584df0b/", "webpage": {"metadata": {"title": "How To Plot Geographic Data on Map with Python | Towards Data Science", "h1": "How To Plot Geographic Data on Map with Python", "description": "A practical tutorial for visualizing geographical data in Python. We explain how to use GeoPandas dataframes to build Choropleth maps in few lines of code."}, "outgoing_paragraph_urls": [{"url": "https://towardsdatascience.com/mapping-inequality-in-peer-2-peer-lending-using-geopandas-part-1-b8c7f883d1ba", "anchor_text": "Part 1", "paragraph_index": 0}, {"url": "https://towardsdatascience.com/mapping-inequality-in-peer-2-peer-lending-using-geopandas-part-1-b8c7f883d1ba", "anchor_text": "Part 1", "paragraph_index": 3}, {"url": "https://dsl.richmond.edu/panorama/redlining", "anchor_text": "MAPPING INEQUALITY", "paragraph_index": 3}, {"url": "https://www.census.gov/geo/maps-data/data/cbf/cbf_state.html", "anchor_text": "Census Bureau", "paragraph_index": 7}, {"url": "https://www.census.gov/geo/maps-data/data/cbf/cbf_zcta.html", "anchor_text": "Census Bureau", "paragraph_index": 10}, {"url": "https://pypi.org/project/uszipcode/", "anchor_text": "uszipcode", "paragraph_index": 12}, {"url": "https://dsl.richmond.edu/panorama/redlining", "anchor_text": "(source),", "paragraph_index": 19}], "all_paragraphs": ["In Part 1 of this series we investigated the correlation between Redlining maps and today\u2019s credit landscape by cross-relating today\u2019s loan applications to old Redlining zip codes. We found some signs of unfair algorithms or historical bias in data used at peer-2-peer lending marketplaces. Especially, we were surprised by a positive linear trend between loan application reject ratio 80 years ago and today\u2019s reject ratio in those same Redlining regions which were classified as Hazardous or Definitely Declining.", "1930\u2019s Redlining in US set the rules for nearly a century of real estate practice, racial inequality that so profoundly shaped cities that we feel their legacy to this day.", "Back in the 1930\u2019s, the Home Owners\u2019 Loan Corporation or \u201cHOLC\u201d created maps that color-coded credit worthiness and risk on neighborhood levels in nearly 250 US cities using the following grades:", "In Part 1 of this post we downloaded the corresponding Redlining shapefiles from the MAPPING INEQUALITY website and calculated the surface distribution (ratio) of each HOLC subgrade.", "We also used 24 million loan applications from LendingClub website, the biggest peer-2-peer lending marketplace in order to estimate the average loan application reject ratio per zip code per quarter.", "At LendingClub every loan is assigned a grade ranging from A to G with a corresponding interest rate. We calculated the distribution of the grades across zip codes.", "In this second part of our story, we would like to visualize the Redlining areas, loan reject ratios and loan interest rates distribution on a geographical map of the United States.", "Our visualizations are built as a multi-layered map, with a US contour map shaping the background. The corresponding cartographic boundary shapefile is obtained from the Census Bureau.", "Since we would like to restrict our final map to the mainland United States, as opposed to the Hawaiian Islands and to U.S. island territories in Pacific or Caribbean, we filter out these states.", "The next layer in our map should show the hotspots of Redlining in the 1930's.", "Because we summarized the Redlining data per zip code in Part 1, we will need a cartographic boundary shapfile of US zip codes. The file is downloaded from the Census Bureau website.", "In order to be able to join the US zip code polygons with Redlining summary data, we create a new column containing the 123xx zip code patterns.", "We add the state and county information using free Python library uszipcode.", "Next, we merge Redlining data with zip code polygons.", "We restrict the polygons to mainland United States.", "We handle missing data by filling a zero for zip codes without HOLC Redlining zones.", "Now we are ready to create our first map with Geopandas. The plot below shows a map with two layers:", "For a better visual of the Redlining zones and a differentiation of Hazardous grades, we will add another layer to our map using the centroid of each zones instead of the full polygons.", "This allows us now to plot circles at Redlining zones. The more circles, the darker the zone becomes, creating a heat map.", "The map above looks like a fine reproduction of the map generated by MAPPING INEQUALITY (source), as shown below.", "We will now add a new layer on the top of our map to visualize the zones with a high LendingClub Reject Ratio. We choose the threshold 90% which is a bit higher than the HOLC reject ratio back in the 1930s.", "Similarly we add a new layer to highlight zones where the LendingClub assigned high interest rates to more than half of the loans.", "Our goal was to visualize how the geographical landscape of peer-2\u2013peer lending evolved between 2007 and 2018 with regards to Redlining. We can achieve this by generating a map for each quarter as follows.", "Below we can see the map that was created for 2007Q2. A correlation seems to exist between zones where a high number of loan application rejects were recorded and former HOLC Redlining zones.", "The colors on the map can be interpreted as follows:", "A year later, in 2008, rejects become more spread outside the HOLC zones. But HOLC zones remains those with highest interest rates.", "After 2012Q1 we cannot see any clear link between HOLC and LendingClub anymore. We can however record more loan application rejects as before 2012, but those rejects are found in almost all states, not only in Redlining areas.", "As the LendingClub gained more market share after 2012, we can see its activities equally distributed across the US, as shown in this 2016Q3 map.", "HOLC Redlining seems to be forgotten and does not affect any LendingClub statistics, when looking at the 2018Q2 map.", "Multi-layered map animation with plot.ly, Dash or similar tools is a challenging task. We found it easier to simulate a choropleth map animation by building a GIF using the 45 maps which were generated for each quarter. This was achieved, first by manually cropping out the white space around each map image generated by Geopandas. The next step was to reduce the resolution of the images to 500x500px using the batch conversion feature of the freeware IrFanView. Using the same tool we add an overlay text showing the year and quarter on each of the images. Finally we use the free image editing software Gimp to create a GIF animation.", "Several questions arise from this work which could be subject of further investigation:", "We demonstrated Exploratory Data Analysis in this project. Multi-layer maps were built as a showcase of spatial time series visualization using Geopandas. We introduced additional data science concepts: algorithm fairness, web crawling, data cleaning, features engineering and correlation analysis.", "Hopefully this post raises a bit of awareness around ethical considerations in data science, especially when using machine learning on human-related data.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Husband & Dad. Mental health advocate. Top Medium Writer. 20 years in IT. AI Expert @Harvard. Empowering human-centered organizations with high-tech."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F9d8af584df0b&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fredlining-mapping-inequality-in-peer-2-peer-lending-using-geopandas-part-2-9d8af584df0b&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fredlining-mapping-inequality-in-peer-2-peer-lending-using-geopandas-part-2-9d8af584df0b&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fredlining-mapping-inequality-in-peer-2-peer-lending-using-geopandas-part-2-9d8af584df0b&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fredlining-mapping-inequality-in-peer-2-peer-lending-using-geopandas-part-2-9d8af584df0b&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----9d8af584df0b--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----9d8af584df0b--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://michel-kana.medium.com/?source=post_page-----9d8af584df0b--------------------------------", "anchor_text": ""}, {"url": "https://michel-kana.medium.com/?source=post_page-----9d8af584df0b--------------------------------", "anchor_text": "Michel Kana, Ph.D"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fcb0b01fe20d2&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fredlining-mapping-inequality-in-peer-2-peer-lending-using-geopandas-part-2-9d8af584df0b&user=Michel+Kana%2C+Ph.D&userId=cb0b01fe20d2&source=post_page-cb0b01fe20d2----9d8af584df0b---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F9d8af584df0b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fredlining-mapping-inequality-in-peer-2-peer-lending-using-geopandas-part-2-9d8af584df0b&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F9d8af584df0b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fredlining-mapping-inequality-in-peer-2-peer-lending-using-geopandas-part-2-9d8af584df0b&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://towardsdatascience.com/mapping-inequality-in-peer-2-peer-lending-using-geopandas-part-1-b8c7f883d1ba", "anchor_text": "Part 1"}, {"url": "https://towardsdatascience.com/mapping-inequality-in-peer-2-peer-lending-using-geopandas-part-1-b8c7f883d1ba", "anchor_text": "Part 1"}, {"url": "https://dsl.richmond.edu/panorama/redlining", "anchor_text": "MAPPING INEQUALITY"}, {"url": "https://www.census.gov/geo/maps-data/data/cbf/cbf_state.html", "anchor_text": "Census Bureau"}, {"url": "https://www.census.gov/geo/maps-data/data/cbf/cbf_zcta.html", "anchor_text": "Census Bureau"}, {"url": "https://pypi.org/project/uszipcode/", "anchor_text": "uszipcode"}, {"url": "https://dsl.richmond.edu/panorama/redlining", "anchor_text": "(source),"}, {"url": "https://medium.com/tag/redlining?source=post_page-----9d8af584df0b---------------redlining-----------------", "anchor_text": "Redlining"}, {"url": "https://medium.com/tag/peer-to-peer-lending?source=post_page-----9d8af584df0b---------------peer_to_peer_lending-----------------", "anchor_text": "Peer To Peer Lending"}, {"url": "https://medium.com/tag/geopandas?source=post_page-----9d8af584df0b---------------geopandas-----------------", "anchor_text": "Geopandas"}, {"url": "https://medium.com/tag/inequality?source=post_page-----9d8af584df0b---------------inequality-----------------", "anchor_text": "Inequality"}, {"url": "https://medium.com/tag/exploratory-data-analysis?source=post_page-----9d8af584df0b---------------exploratory_data_analysis-----------------", "anchor_text": "Exploratory Data Analysis"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F9d8af584df0b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fredlining-mapping-inequality-in-peer-2-peer-lending-using-geopandas-part-2-9d8af584df0b&user=Michel+Kana%2C+Ph.D&userId=cb0b01fe20d2&source=-----9d8af584df0b---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F9d8af584df0b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fredlining-mapping-inequality-in-peer-2-peer-lending-using-geopandas-part-2-9d8af584df0b&user=Michel+Kana%2C+Ph.D&userId=cb0b01fe20d2&source=-----9d8af584df0b---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F9d8af584df0b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fredlining-mapping-inequality-in-peer-2-peer-lending-using-geopandas-part-2-9d8af584df0b&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----9d8af584df0b--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F9d8af584df0b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fredlining-mapping-inequality-in-peer-2-peer-lending-using-geopandas-part-2-9d8af584df0b&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----9d8af584df0b---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----9d8af584df0b--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----9d8af584df0b--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----9d8af584df0b--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----9d8af584df0b--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----9d8af584df0b--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----9d8af584df0b--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----9d8af584df0b--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----9d8af584df0b--------------------------------", "anchor_text": ""}, {"url": "https://michel-kana.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://michel-kana.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Michel Kana, Ph.D"}, {"url": "https://michel-kana.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "5.4K Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fcb0b01fe20d2&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fredlining-mapping-inequality-in-peer-2-peer-lending-using-geopandas-part-2-9d8af584df0b&user=Michel+Kana%2C+Ph.D&userId=cb0b01fe20d2&source=post_page-cb0b01fe20d2--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F69e95067d2a1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fredlining-mapping-inequality-in-peer-2-peer-lending-using-geopandas-part-2-9d8af584df0b&newsletterV3=cb0b01fe20d2&newsletterV3Id=69e95067d2a1&user=Michel+Kana%2C+Ph.D&userId=cb0b01fe20d2&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}