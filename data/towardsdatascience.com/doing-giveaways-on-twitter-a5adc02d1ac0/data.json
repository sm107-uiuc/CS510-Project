{"url": "https://towardsdatascience.com/doing-giveaways-on-twitter-a5adc02d1ac0", "time": 1683004840.868653, "path": "towardsdatascience.com/doing-giveaways-on-twitter-a5adc02d1ac0/", "webpage": {"metadata": {"title": "Doing Giveaways on Twitter. Drawing retweeters randomly using\u2026 | by Alexey Grigorev | Towards Data Science", "h1": "Doing Giveaways on Twitter", "description": "Twitter is a great platform for sharing content and running promotions. I used it already a few times already. In this post, I'll tell you how to do it"}, "outgoing_paragraph_urls": [{"url": "https://www.manning.com/books/machine-learning-bookcamp", "anchor_text": "Machine Learning Bookcamp", "paragraph_index": 0}, {"url": "https://developer.twitter.com/", "anchor_text": "https://developer.twitter.com", "paragraph_index": 5}, {"url": "https://developer.twitter.com/en/apps", "anchor_text": "Apps page", "paragraph_index": 5}, {"url": "https://developer.twitter.com/en/docs/tweets/post-and-engage/api-reference/get-statuses-retweeters-ids", "anchor_text": "statuses/retweeters/ids", "paragraph_index": 8}, {"url": "https://twittercommunity.com/t/paging-is-not-possible-with-statuses-retweeters-ids-json/71298/10", "anchor_text": "Not more", "paragraph_index": 11}, {"url": "https://requests.readthedocs.io/en/master/", "anchor_text": "requests", "paragraph_index": 15}, {"url": "https://gist.github.com/alexeygrigorev/dfd535aea26709582f8ac3ead3766adb", "anchor_text": "here", "paragraph_index": 25}, {"url": "https://en.wikipedia.org/wiki/Cron", "anchor_text": "Cron", "paragraph_index": 28}, {"url": "https://crontab.guru/#30_*_*_*_*", "anchor_text": "\u201cexecute this command once per hour at minute 30\u201d", "paragraph_index": 30}, {"url": "https://stackoverflow.com/questions/11828270/how-do-i-exit-the-vim-editor", "anchor_text": "Vim is a bit more tricky.", "paragraph_index": 33}], "all_paragraphs": ["Twitter is a great platform for sharing content and running promotions. I used it already a few times for giving away copies of my book \u2014 Machine Learning Bookcamp. In this post, I\u2019ll tell you how I do it and how to use Python and Twitter API to make the process simpler.", "The idea is quite simple: you give something away for free. This is something that your followers might like. For example, it could be a book or a course.", "To get it, the participants need to retweet it \u2014 and, sometimes, follow you.", "This is a great way to attract new followers and spread the word about your work. In my case, I wanted to let more people know about Machine Learning Bookcamp \u2014 the book I\u2019m working on at the moment.", "The easiest way to manage such giveaway campaigns is by using Twitter API and handling everything programmatically.", "To use the Twitter API, you need to register an app. Open https://developer.twitter.com, log in and go to the Apps page. Once you\u2019re there, click on the \u201cCreate an app\u201d button.", "Then just follow the instructions \u2014 it\u2019s quite simple.", "After you clicked on the \u201cCreate\u201d button, you\u2019re ready to start.", "To get the list of retweeters, we simply do an API call to statuses/retweeters/ids.", "With that, the next steps seem easy:", "Unfortunately, getting the list of retweeters is not as easy as it seems. Let\u2019s see why and how to actually do it.", "There\u2019s a problem with the algorithm above: using the API it\u2019s only possible to get only the last 100 retweeters. Not more. There\u2019s no way to get more than 100 in one request, and there\u2019s no way to paginate the results to get another 100.", "But there\u2019s a way to solve it: hit the API periodically and save the results!", "So, our approach is the following:", "Next, we\u2019ll see how we can use the API to get the list of retweeters.", "Now let\u2019s use the Twitter API to get the last retweeters. We\u2019ll use Python and the requests library.", "If you don\u2019t have requests, you can install it by running", "To be able to use the API, we first need to authenticate. For that, we need to have the API key and API secret key. You can get them by going to the settings of your app.", "Once we have the keys, we can use them for authentication:", "As a result, we get a token \u2014 a string that we\u2019ll need to include in every request.", "Let\u2019s use it to get the retweeters:", "The retweets variable contains details of the last 100 retweeters.", "There\u2019s a lot of information in the response, a lot more than we need. We only need the screen name of each retweeter \u2014 that is, their Twitter handle. Let\u2019s extract it:", "The only thing left to do now is to save the results to a file.", "To avoid accidentally overwriting older files, we need to make sure our output file has a unique name. The easiest way to achieve that is to add the current timestamp to the file name.", "And that\u2019s it \u2014 now we can get the last 100 retweeters and save the results to a file. You can see the full code here.", "We save the code to a file and schedule it to run periodically.", "Since we can only get the last 100 retweeters of a tweet, we need to run this script periodically, each time saving the results to a file.", "The easiest way to do it is to use Cron \u2014 a time-based task scheduler available on Linux and macOS. If you use Windows, there\u2019s a similar tool called \u201cTask Scheduler\u201d that you can use for running periodic jobs.", "Let\u2019s configure Cron to run our job hourly. For that, we\u2019ll use the following Cron expression:", "It means \u201cexecute this command once per hour at minute 30\u201d.", "To schedule it, we need to add a line to the crontab \u2014 the settings file of Cron. We can do it by typing the following command in our terminal:", "Now we add the following line:", "Finally, save it and exit the editor. If you use nano for editing (like me), you can exit it by pressing Ctrl+X. Vim is a bit more tricky.", "To verify that crontab is updated, run", "The job is scheduled, so we can let the contest run for a few days.", "After a few days passed and the contest is over, we want to select the winners.", "Over this time, we collected many files with retweeters, which we now need to put together. It\u2019s quite easy to do: we just load the files one by one and put the content to a set:", "After running it, all_retweeters contains the list of users who retweeted your tweet.", "Now it\u2019s time to announce the winners!", "And start sending the information for the next steps via direct messages.", "I hope you found this post useful. Don\u2019t forget to follow me on Twitter for new updates!", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fa5adc02d1ac0&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdoing-giveaways-on-twitter-a5adc02d1ac0&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdoing-giveaways-on-twitter-a5adc02d1ac0&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdoing-giveaways-on-twitter-a5adc02d1ac0&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdoing-giveaways-on-twitter-a5adc02d1ac0&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----a5adc02d1ac0--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----a5adc02d1ac0--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@alexey.grigorev?source=post_page-----a5adc02d1ac0--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@alexey.grigorev?source=post_page-----a5adc02d1ac0--------------------------------", "anchor_text": "Alexey Grigorev"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fbd5b4c871c78&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdoing-giveaways-on-twitter-a5adc02d1ac0&user=Alexey+Grigorev&userId=bd5b4c871c78&source=post_page-bd5b4c871c78----a5adc02d1ac0---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fa5adc02d1ac0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdoing-giveaways-on-twitter-a5adc02d1ac0&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fa5adc02d1ac0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdoing-giveaways-on-twitter-a5adc02d1ac0&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@macauphotoagency?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Macau Photo Agency"}, {"url": "https://unsplash.com/s/photos/gambling?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Unsplash"}, {"url": "https://www.manning.com/books/machine-learning-bookcamp", "anchor_text": "Machine Learning Bookcamp"}, {"url": "https://developer.twitter.com/", "anchor_text": "https://developer.twitter.com"}, {"url": "https://developer.twitter.com/en/apps", "anchor_text": "Apps page"}, {"url": "https://developer.twitter.com/en/docs/tweets/post-and-engage/api-reference/get-statuses-retweeters-ids", "anchor_text": "statuses/retweeters/ids"}, {"url": "https://twittercommunity.com/t/paging-is-not-possible-with-statuses-retweeters-ids-json/71298/10", "anchor_text": "Not more"}, {"url": "https://requests.readthedocs.io/en/master/", "anchor_text": "requests"}, {"url": "https://api.twitter.com/oauth2/token", "anchor_text": "https://api.twitter.com/oauth2/token"}, {"url": "https://gist.github.com/alexeygrigorev/dfd535aea26709582f8ac3ead3766adb", "anchor_text": "here"}, {"url": "https://en.wikipedia.org/wiki/Cron", "anchor_text": "Cron"}, {"url": "https://crontab.guru/#30_*_*_*_*", "anchor_text": "\u201cexecute this command once per hour at minute 30\u201d"}, {"url": "https://stackoverflow.com/questions/11828270/how-do-i-exit-the-vim-editor", "anchor_text": "Vim is a bit more tricky."}, {"url": "https://twitter.com/Al_Grigor", "anchor_text": "Alexey GrigorevThe latest Tweets from Alexey Grigorev (@Al_Grigor). Lead Data Scientist at OLX Group. Interested in #MachineLearning\u2026twitter.com"}, {"url": "https://medium.com/tag/technology?source=post_page-----a5adc02d1ac0---------------technology-----------------", "anchor_text": "Technology"}, {"url": "https://medium.com/tag/twitter?source=post_page-----a5adc02d1ac0---------------twitter-----------------", "anchor_text": "Twitter"}, {"url": "https://medium.com/tag/social-media?source=post_page-----a5adc02d1ac0---------------social_media-----------------", "anchor_text": "Social Media"}, {"url": "https://medium.com/tag/twitter-api?source=post_page-----a5adc02d1ac0---------------twitter_api-----------------", "anchor_text": "Twitter Api"}, {"url": "https://medium.com/tag/python?source=post_page-----a5adc02d1ac0---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fa5adc02d1ac0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdoing-giveaways-on-twitter-a5adc02d1ac0&user=Alexey+Grigorev&userId=bd5b4c871c78&source=-----a5adc02d1ac0---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fa5adc02d1ac0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdoing-giveaways-on-twitter-a5adc02d1ac0&user=Alexey+Grigorev&userId=bd5b4c871c78&source=-----a5adc02d1ac0---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fa5adc02d1ac0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdoing-giveaways-on-twitter-a5adc02d1ac0&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----a5adc02d1ac0--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fa5adc02d1ac0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdoing-giveaways-on-twitter-a5adc02d1ac0&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----a5adc02d1ac0---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----a5adc02d1ac0--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----a5adc02d1ac0--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----a5adc02d1ac0--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----a5adc02d1ac0--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----a5adc02d1ac0--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----a5adc02d1ac0--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----a5adc02d1ac0--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----a5adc02d1ac0--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@alexey.grigorev?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@alexey.grigorev?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Alexey Grigorev"}, {"url": "https://medium.com/@alexey.grigorev/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "700 Followers"}, {"url": "https://www.linkedin.com/in/agrigorev/", "anchor_text": "https://www.linkedin.com/in/agrigorev/"}, {"url": "https://twitter.com/Al_Grigor", "anchor_text": "https://twitter.com/Al_Grigor"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fbd5b4c871c78&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdoing-giveaways-on-twitter-a5adc02d1ac0&user=Alexey+Grigorev&userId=bd5b4c871c78&source=post_page-bd5b4c871c78--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F351ae2a411f8&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdoing-giveaways-on-twitter-a5adc02d1ac0&newsletterV3=bd5b4c871c78&newsletterV3Id=351ae2a411f8&user=Alexey+Grigorev&userId=bd5b4c871c78&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}