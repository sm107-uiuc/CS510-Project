{"url": "https://towardsdatascience.com/sampling-isnt-enough-profile-your-ml-data-instead-6a28fcfb2bd4", "time": 1683014276.462626, "path": "towardsdatascience.com/sampling-isnt-enough-profile-your-ml-data-instead-6a28fcfb2bd4/", "webpage": {"metadata": {"title": "Profile and log your ML data | by Isaac Backus | Towards Data Science", "h1": "Sampling isn\u2019t enough, profile your ML data instead", "description": "Advocating best practices in ML Ops: the WhyLogs approach to logging in data science by using fast, scalable, interpretable data profiling"}, "outgoing_paragraph_urls": [{"url": "https://en.wikipedia.org/wiki/Tracing_(software)", "anchor_text": "software tracing", "paragraph_index": 4}, {"url": "https://github.com/whylabs/whylogs-python", "anchor_text": "Python", "paragraph_index": 17}, {"url": "https://github.com/whylabs/whylogs-java", "anchor_text": "Java", "paragraph_index": 17}, {"url": "https://github.com/whylabs/whylogs-examples/blob/mainline/python/GettingStarted.ipynb", "anchor_text": "WhyLogs Getting Started notebook", "paragraph_index": 20}, {"url": "https://try.whylabsapp.com/", "anchor_text": "live sandbox of WhyLabs Platform", "paragraph_index": 21}, {"url": "https://github.com/whylabs/whylogs-python", "anchor_text": "here", "paragraph_index": 23}, {"url": "https://github.com/whylabs/whylogs-java", "anchor_text": "here", "paragraph_index": 23}, {"url": "http://whylogs.readthedocs.io", "anchor_text": "documentation", "paragraph_index": 23}, {"url": "https://join.slack.com/t/whylabs-community/shared_invite/zt-hi7k7pv7-g0ZHAaFpRvP1kUMR~Y1bWA", "anchor_text": "our Slack channel", "paragraph_index": 23}, {"url": "https://twitter.com/bernease", "anchor_text": "Bernease on twitter", "paragraph_index": 24}], "all_paragraphs": ["By Isaac Backus and Bernease Herman", "It\u2019s 2020 and most of us still don\u2019t know when, where, why, or how our models go wrong in production. While we all know that \u201cwhat can go wrong, will go wrong,\u201d or that \u201cthe best-laid plans of mice and [data scientists] often go awry,\u201d complicated models and data pipelines are all too often pushed to production with little attention paid to diagnosing the inevitable unforeseen failures.", "In traditional software, logging and instrumentation have been adopted as standard practice to create transparency and make sense of the health of a complex system. When it comes to AI applications, logging is often spotty and incomplete. In this post, we outline different approaches to ML logging, comparing and contrasting them. Finally, we offer an open source library called WhyLogs that enables data logging and profiling only in a few lines of code.", "Logging is an important tool for developing and operating robust software systems. When your production system reaches an error state, it is important to have tools to better locate and diagnose the source of the problem.", "For many software engineering disciplines, a stack trace helps to locate the execution path and determine the state of the program at the time of failure. However, a stack trace does not give insight on how the state has changed prior to failure. Logging (along with its related term, software tracing) is a practice in which program execution and event information are stored to one or many files. Logging is essential to diagnosing issues with software of all kinds; a must have for production systems.", "Statistical applications, such as those in data science and machine learning, are prime candidates for requiring logging. However, due to the complexity of these applications the available tools remain limited and their adoption is much less widespread than standard software logging.", "Statistical applications are often non-deterministic and require many state changes. Due to the requirement of handling a broad distribution of states, strict, logical assertions must be avoided and machine learning software will often never reach an error state, instead silently producing a poor or incorrect result. This makes error analysis far more difficult as maintainers are not alerted to the problem as it occurs.", "When error states are detected, diagnosing the issue is often laborious. In contrast to explicitly defined software, datasets are especially opaque to introspection. Whereas software is fully specified by code and developers can easily include precise logging statements to pinpoint issues, datasets and data pipelines require significant analysis to diagnose.", "While effective logging practices in ML may be difficult to implement, in many cases they can be even more necessary than with standard software. In typical software development, an enormous amount of issues may be caught before deploying to production by compilers, IDEs, type checking, logical assertions, and standard testing. With data, things are not so simple. This motivates the need for improved tooling and best practices in ML operations which advance statistical logging.", "The generic requirements for good logging tools in software development may apply equally well in the ML operations domain as well. These requirements may include (but are of course not limited to) the following.", "In data science, much can and should be done with standard logging modules. We can log data access, what steps (training, testing, etc\u2026) are being executed. Model parameters and hyperparameters and greater details can be logged as well. Services and libraries focused on ML use cases (such as CometML) can expand the utility of such logging.", "While standard logging can provide much visibility, it provides little to no introspection into the data.", "A common approach to monitoring the enormous volumes of data typical to ML is to log a random subset of the data, whether during training, testing, or inference. It can be fairly straightforward and useful to randomly select some subset of the data and store it for reference later. Sampling-based data logging does not accurately represent outliers and rare events. As a result, important metrics such as minimum, maximum, and unique values can not be measured accurately. Outliers and uncommon values are important to retain as they often affect model behavior, cause problematic model predictions, and may be indicative of data quality issues.", "A promising approach to logging data is data profiling (also referred to as data sketching or statistical fingerprinting). The idea is to capture a human interpretable statistical profile of a given dataset to provide insight into the data. There already exist a broad range of efficient streaming algorithms to generate scalable, lightweight statistical profiles of datasets, and the literature is very active and growing. However, there exist significant engineering challenges around implementing these algorithms in practice, particularly in the context of ML logging. One project is working on overcoming these challenges.", "The data profiling solution, WhyLogs, is our contribution to modern, streamlined data logging to ML. WhyLogs is an open source library with the goal of bridging the ML logging gap by providing approximate data profiling and fulfilling the five logging requirements above (easy, lightweight, portable, configurable, close to code).", "The estimated statistical profiles include per-feature distribution approximations which can provide histograms and quantiles, overall statistics such as min/max/standard deviation, uniqueness estimates, null counts, frequent items, and more. All statistical profiles are mergeable as well, making the algorithms trivially parallelizable, and allowing profiles of multiple datasets to be merged together for later analysis. This is key for achieving flexible granularity (since you can change aggregation levels, e.g., from hourly to daily or weekly) and for logging in distributed systems.", "WhyLogs also supports features that are suitable for production environments such as tagging, small memory footprint, and lightweight output.. Tagging and grouping features are key for enabling segment-level analysis and to map segments to core business KPIs.", "Currently, there are Python and Java implementations, which provide Python integration with pandas/numpy and scalable Java integration with Spark. The resulting log files are small and compatible across languages. We tested WhyLogs Java performance on the following datasets to validate WhyLogs memory footprint and the output binary size.", "We ran our profile on each dataset and collected JMX metrics:", "WhyLogs can be easily added to existing machine learning and data science code. The Python implementation can be `pip` installed and offers an interactive command line experience in addition to the library with an accessible API.", "For more examples of using WhyLogs, check out the WhyLogs Getting Started notebook", "The full power of WhyLogs can be witnessed when combined with monitoring and other services for live data. To explore how these features pair with WhyLogs, check out the live sandbox of WhyLabs Platform running on a modified version of the Lending Club dataset and ingesting WhyLogs data daily.", "Data science, machine learning, and the technology surrounding them are developing at a breakneck pace, along with the scale of these operations and the number of people involved in them. Along with that rapid growth comes the inevitable explosion of problems. Best practices remain very nascent in ML, but as has been the case with software and systems engineering, best practices must continue to grow and develop. Effective logging must certainly take a primary role among best practices for operating robust ML/AI systems. Projects like WhyLogs will be required to address the unique challenges of these statistical systems.", "Check out WhyLogs for Python here and Java here, or get started with the documentation. We love feedback and suggestions, so join our Slack channel or email us at support@whylabs.ai!", "Thanks to Bernease Herman, my WhyLabs teammate, for co-authoring the article. Follow Bernease on twitter", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Data Scientist, Engineer, and Astrophysicist in Seattle, WA"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F6a28fcfb2bd4&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsampling-isnt-enough-profile-your-ml-data-instead-6a28fcfb2bd4&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsampling-isnt-enough-profile-your-ml-data-instead-6a28fcfb2bd4&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsampling-isnt-enough-profile-your-ml-data-instead-6a28fcfb2bd4&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsampling-isnt-enough-profile-your-ml-data-instead-6a28fcfb2bd4&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----6a28fcfb2bd4--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----6a28fcfb2bd4--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@ibackus8?source=post_page-----6a28fcfb2bd4--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@ibackus8?source=post_page-----6a28fcfb2bd4--------------------------------", "anchor_text": "Isaac Backus"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F295a9ae22e4c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsampling-isnt-enough-profile-your-ml-data-instead-6a28fcfb2bd4&user=Isaac+Backus&userId=295a9ae22e4c&source=post_page-295a9ae22e4c----6a28fcfb2bd4---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F6a28fcfb2bd4&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsampling-isnt-enough-profile-your-ml-data-instead-6a28fcfb2bd4&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F6a28fcfb2bd4&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsampling-isnt-enough-profile-your-ml-data-instead-6a28fcfb2bd4&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@petri_r?utm_source=medium&utm_medium=referral", "anchor_text": "Petri R"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://en.wikipedia.org/wiki/Tracing_(software)", "anchor_text": "software tracing"}, {"url": "http://monkeyuser.com", "anchor_text": "monkeyuser.com"}, {"url": "https://github.com/whylabs/whylogs-python", "anchor_text": "Python"}, {"url": "https://github.com/whylabs/whylogs-java", "anchor_text": "Java"}, {"url": "https://www.kaggle.com/wordsforthewise/lending-club", "anchor_text": "Kaggle Link"}, {"url": "https://www.kaggle.com/new-york-city/nyc-parking-tickets", "anchor_text": "Kaggle Link"}, {"url": "https://www.kaggle.com/paultimothymooney/pain-pills-in-the-usa", "anchor_text": "Kaggle Link"}, {"url": "https://github.com/whylabs/whylogs-examples/blob/mainline/python/GettingStarted.ipynb", "anchor_text": "WhyLogs Getting Started notebook"}, {"url": "https://try.whylabsapp.com/", "anchor_text": "live sandbox of WhyLabs Platform"}, {"url": "https://github.com/whylabs/whylogs-python", "anchor_text": "here"}, {"url": "https://github.com/whylabs/whylogs-java", "anchor_text": "here"}, {"url": "http://whylogs.readthedocs.io", "anchor_text": "documentation"}, {"url": "https://join.slack.com/t/whylabs-community/shared_invite/zt-hi7k7pv7-g0ZHAaFpRvP1kUMR~Y1bWA", "anchor_text": "our Slack channel"}, {"url": "https://twitter.com/bernease", "anchor_text": "Bernease on twitter"}, {"url": "https://medium.com/tag/data-science?source=post_page-----6a28fcfb2bd4---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----6a28fcfb2bd4---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/tag/logging?source=post_page-----6a28fcfb2bd4---------------logging-----------------", "anchor_text": "Logging"}, {"url": "https://medium.com/tag/sampling?source=post_page-----6a28fcfb2bd4---------------sampling-----------------", "anchor_text": "Sampling"}, {"url": "https://medium.com/tag/editors-pick?source=post_page-----6a28fcfb2bd4---------------editors_pick-----------------", "anchor_text": "Editors Pick"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F6a28fcfb2bd4&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsampling-isnt-enough-profile-your-ml-data-instead-6a28fcfb2bd4&user=Isaac+Backus&userId=295a9ae22e4c&source=-----6a28fcfb2bd4---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F6a28fcfb2bd4&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsampling-isnt-enough-profile-your-ml-data-instead-6a28fcfb2bd4&user=Isaac+Backus&userId=295a9ae22e4c&source=-----6a28fcfb2bd4---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F6a28fcfb2bd4&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsampling-isnt-enough-profile-your-ml-data-instead-6a28fcfb2bd4&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----6a28fcfb2bd4--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F6a28fcfb2bd4&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsampling-isnt-enough-profile-your-ml-data-instead-6a28fcfb2bd4&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----6a28fcfb2bd4---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----6a28fcfb2bd4--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----6a28fcfb2bd4--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----6a28fcfb2bd4--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----6a28fcfb2bd4--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----6a28fcfb2bd4--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----6a28fcfb2bd4--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----6a28fcfb2bd4--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----6a28fcfb2bd4--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@ibackus8?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@ibackus8?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Isaac Backus"}, {"url": "https://medium.com/@ibackus8/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "28 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F295a9ae22e4c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsampling-isnt-enough-profile-your-ml-data-instead-6a28fcfb2bd4&user=Isaac+Backus&userId=295a9ae22e4c&source=post_page-295a9ae22e4c--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fusers%2F295a9ae22e4c%2Flazily-enable-writer-subscription&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsampling-isnt-enough-profile-your-ml-data-instead-6a28fcfb2bd4&user=Isaac+Backus&userId=295a9ae22e4c&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}