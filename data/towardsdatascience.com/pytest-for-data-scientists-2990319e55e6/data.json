{"url": "https://towardsdatascience.com/pytest-for-data-scientists-2990319e55e6", "time": 1683014391.398901, "path": "towardsdatascience.com/pytest-for-data-scientists-2990319e55e6/", "webpage": {"metadata": {"title": "Pytest for Data Scientists. A Comprehensive Guide to Pytest for\u2026 | by Khuyen Tran | Towards Data Science", "h1": "Pytest for Data Scientists", "description": "It is fun to apply different python code to process your data in your notebook, but in order to make your code reproducible, you need to put them into functions and classes. When you put your code in\u2026"}, "outgoing_paragraph_urls": [{"url": "https://textblob.readthedocs.io/en/dev/", "anchor_text": "TextBlob", "paragraph_index": 1}, {"url": "https://docs.pytest.org/en/stable/", "anchor_text": "Pytest", "paragraph_index": 5}, {"url": "https://www.linkedin.com/in/khuyen-tran-1ab926151/", "anchor_text": "LinkedIn", "paragraph_index": 44}, {"url": "https://twitter.com/KhuyenTran16", "anchor_text": "Twitter", "paragraph_index": 44}, {"url": "https://github.com/khuyentran1401/Data-science", "anchor_text": "this repo", "paragraph_index": 45}], "all_paragraphs": ["It is fun to apply different python code to process your data in your notebook, but in order to make your code reproducible, you need to put them into functions and classes. When you put your code in the script, the code may break because of some functions. Even if you code doesn\u2019t break, how do you know if your function will work as you expected?", "For example, we create a function to extract the sentiment of a text with TextBlob, a Python library for processing textual data. We want to make sure it works as we expect: the function returns a value that is greater than 0 if the test is positive and returns a value that is less than 0 if the text is negative.", "To find out whether the function will return the right value every time, the best way is to apply the functions to different examples to see if it produces the results we want. That is when testing becomes important.", "In general, you should use testing for your data science projects because it allows you to:", "There are many Python tools available for testing, but the easiest tool is Pytest.", "Pytest is the framework that makes it easy to write small tests in Python. I like pytest because it helps me to write tests with minimal code. If you were not familiar with testing, pytest is a great tool to get started.", "To test the function shown above, we can simply create a function that starts with test_ and followed with the name of the function we want to test, which is extract_sentiment", "Within the test function, we apply the function extract_sentimentto an example text: \u2018I think today will be a great day\u2019. We use assert sentiment > 0to make sure that the sentiment is positive.", "That\u2019s it! Now we are ready to run the test.", "If the name of our script is sentiment.py , we can run", "Pytest will loop through our script and run the functions that start with test . The output of the test above will look like this", "Pretty cool! We don\u2019t need to specify which function to test. As long as the function\u2019s name starts with test, pytest will detect and execute that function! We don\u2019t even need to import pytest in order to run pytest", "What is the output pytest produces if the test fails?", "From the output, we can see that the test failed because the sentiment of the function is 0.8, and it is not less than 0! We are not only able to know whether our function works as expected but also know WHY it doesn\u2019t work. From this insight, we know where to fix our function to work as we want.", "We might want to test our function with other examples. What will the name of the new test function be?", "The second function\u2019s name can be something like test_extract_sentiment_2 or test_extract_sentiment_negative if we want to test our function on a text with negative sentiment. Any function name would work as long as it starts with test", "From the output, we know that one test passed and one failed and why the test failed. We expect the sentence \u2018I do not think this will turn out well\u2019 to be negative but it turns out to be 0.", "This helps us to understand that the function might not be accurate 100% of the time; thus, we should be cautious when using this function to extract the sentiment of a text.", "The 2 test functions above are used to test the same function. Is there any way we can combine 2 examples into one test function? That is when parameterization comes in handy", "With pytest.mark.parametrize() , we can execute a test with different examples by providing a list of examples in the argument.", "In the code above, we assign the variable sample to a list of samples, then add that variable to the argument of our test function. Now each example will be tested once at a time.", "Using parametrize(), we are able to test 2 different examples in once function!", "What if we expect different examples to have different outputs? Pytest also allows us to add examples and expected outputs to the argument of our test function!", "For example, the function below checks if the text contains a particular word.", "It will return True if the text contains the word.", "If the word is \u2018duck\u2019 and the text is \u2018There is a duck in this text\u201d, we expect the sentence to return True.", "If the word is \u2018duck\u2019 and the text is \u2018There is nothing here\u201d, we expect the sentence to return False.", "We will use parametrize() but with a list of tuples instead.", "Awesome! Both of our tests passed!", "When the number of test functions in your script gets bigger, you may want to test one function instead of multiple functions at once. That could be easily done with pytest file.py::function_name", "For example, if you just want to run test_text_contain_word, run", "And pytest will just execute one test that we specify!", "What if we want to use the same data to test different functions? For example, we want to test whether the sentence \u2018Today I found a duck and I am happy\u201d contains the word \u2018duck\u2019 and its sentiment is positive. We want to apply 2 functions for the same data: \u2018Today I found a duck and I am happy\u201d. That is when fixture comes in handy.", "pytest fixtures are a way of providing data to different test function", "In the example above, we create an example data with the decorator @pytest.fixture above the function example_data. This will turn example_data into a variable with value \u2018Today I found a duck and I am happy\u2019", "Now, we can use example_data as the parameters for any tests!", "Last but not least, when our code grows bigger, we might want to put data science functions and test functions in 2 different folders. This will make it easier for us to find the location for each function.", "Name our test function with either test_<name>.py or <name>_test.py . Pytest will search for the file whose name ends or starts with \u2018test\u2019 and executes the functions whose name starts with \u2018test\u2019 within that file. How convenient!", "There are different ways to organize your files. You can either organize our data science file and test file in the same directory or in 2 different directories, one for source code and one for tests", "Since you will most likely have multiple files for your data science functions and multiple files for your test functions, you might want to put them in separate directories like method 2.", "This is how 2 files will look like", "Under the root directory ( test_structure_example/ ), run pytest tests/test_process.py or run pytest test_process.py under test_structure_example/tests directory.", "Congratulations! You have just learned about pytest. I hope this article gives you a good overview of why testing is important and how to incorporate testing in your data science projects with pytest. With testing, you are not only able to know whether your function works as expected but also feel confident to switch the existing code with different tools or different code structures.", "The source code for this article can be found here:", "I like to write about basic data science concepts and play with different algorithms and data science tools. You could connect with me on LinkedIn and Twitter.", "Star this repo if you want to check out the codes for all of the articles I have written. Follow me on Medium to stay informed with my latest data science articles like these:", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F2990319e55e6&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpytest-for-data-scientists-2990319e55e6&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpytest-for-data-scientists-2990319e55e6&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpytest-for-data-scientists-2990319e55e6&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpytest-for-data-scientists-2990319e55e6&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----2990319e55e6--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----2990319e55e6--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://khuyentran1476.medium.com/?source=post_page-----2990319e55e6--------------------------------", "anchor_text": ""}, {"url": "https://khuyentran1476.medium.com/?source=post_page-----2990319e55e6--------------------------------", "anchor_text": "Khuyen Tran"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F84a02493194a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpytest-for-data-scientists-2990319e55e6&user=Khuyen+Tran&userId=84a02493194a&source=post_page-84a02493194a----2990319e55e6---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F2990319e55e6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpytest-for-data-scientists-2990319e55e6&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F2990319e55e6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpytest-for-data-scientists-2990319e55e6&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://www.pexels.com/@startup-stock-photos?utm_content=attributionCopyText&utm_medium=referral&utm_source=pexels", "anchor_text": "Startup Stock Photos"}, {"url": "https://www.pexels.com/photo/man-wearing-black-and-white-stripe-shirt-looking-at-white-printer-papers-on-the-wall-212286/?utm_content=attributionCopyText&utm_medium=referral&utm_source=pexels", "anchor_text": "Pexels"}, {"url": "https://textblob.readthedocs.io/en/dev/", "anchor_text": "TextBlob"}, {"url": "https://docs.pytest.org/en/stable/", "anchor_text": "Pytest"}, {"url": "http://twitter.com/pytest", "anchor_text": "@pytest"}, {"url": "https://github.com/khuyentran1401/Data-science/tree/master/data_science_tools/pytest", "anchor_text": "khuyentran1401/Data-scienceCollection of useful data science topics along with code and articles \u2014 khuyentran1401/Data-sciencegithub.com"}, {"url": "https://www.linkedin.com/in/khuyen-tran-1ab926151/", "anchor_text": "LinkedIn"}, {"url": "https://twitter.com/KhuyenTran16", "anchor_text": "Twitter"}, {"url": "https://github.com/khuyentran1401/Data-science", "anchor_text": "this repo"}, {"url": "https://towardsdatascience.com/sentiment-analysis-of-linkedin-messages-3bb152307f84", "anchor_text": "Explore and Visualize your LinkedIn Network with Python and Sentiment AnalysisLooking to Optimize Your LinkedIn Profile? Why Not Make the Data Work For You?towardsdatascience.com"}, {"url": "https://towardsdatascience.com/i-scraped-more-than-1k-top-machine-learning-github-profiles-and-this-is-what-i-found-1ab4fb0c0474", "anchor_text": "I Scraped more than 1k Top Machine Learning Github Profiles and this is what I FoundGain Insights from Top Machine Learning Profiles on Githubtowardsdatascience.com"}, {"url": "https://medium.com/swlh/get-the-most-out-of-your-array-with-these-four-numpy-methods-2fc4a6b04736", "anchor_text": "Get the Most out of Your Array With These Four Numpy MethodsHow to Split your Numpy Array Vertically or Find Elements in a Particular Range.medium.com"}, {"url": "https://towardsdatascience.com/how-to-fine-tune-your-machine-learning-models-with-ease-8ca62d1217b1", "anchor_text": "How to Efficiently Fine-Tune your Machine Learning ModelsFind it Time-consuming to Find the Best Parameters for your ML Models? Use these Three Trickstowardsdatascience.com"}, {"url": "https://towardsdatascience.com/how-to-create-reusable-command-line-f9a2bb356bc9", "anchor_text": "How to Create Reusable Command-LineCan you Wrap your Multiple Useful Command Lines into one File for Quick Execution?towardsdatascience.com"}, {"url": "https://medium.com/tag/python?source=post_page-----2990319e55e6---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/programming?source=post_page-----2990319e55e6---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/tag/data-science?source=post_page-----2990319e55e6---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/testing?source=post_page-----2990319e55e6---------------testing-----------------", "anchor_text": "Testing"}, {"url": "https://medium.com/tag/data-analysis?source=post_page-----2990319e55e6---------------data_analysis-----------------", "anchor_text": "Data Analysis"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F2990319e55e6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpytest-for-data-scientists-2990319e55e6&user=Khuyen+Tran&userId=84a02493194a&source=-----2990319e55e6---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F2990319e55e6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpytest-for-data-scientists-2990319e55e6&user=Khuyen+Tran&userId=84a02493194a&source=-----2990319e55e6---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F2990319e55e6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpytest-for-data-scientists-2990319e55e6&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----2990319e55e6--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F2990319e55e6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpytest-for-data-scientists-2990319e55e6&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----2990319e55e6---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----2990319e55e6--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----2990319e55e6--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----2990319e55e6--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----2990319e55e6--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----2990319e55e6--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----2990319e55e6--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----2990319e55e6--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----2990319e55e6--------------------------------", "anchor_text": ""}, {"url": "https://khuyentran1476.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://khuyentran1476.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Khuyen Tran"}, {"url": "https://khuyentran1476.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "34K Followers"}, {"url": "https://mathdatasimplified.com", "anchor_text": "https://mathdatasimplified.com"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F84a02493194a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpytest-for-data-scientists-2990319e55e6&user=Khuyen+Tran&userId=84a02493194a&source=post_page-84a02493194a--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fde46523b7a77&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpytest-for-data-scientists-2990319e55e6&newsletterV3=84a02493194a&newsletterV3Id=de46523b7a77&user=Khuyen+Tran&userId=84a02493194a&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}