{"url": "https://towardsdatascience.com/i-scraped-buzzfeeds-database-of-nypd-police-disciplinary-cases-74a30bb5fde8", "time": 1682993328.0230138, "path": "towardsdatascience.com/i-scraped-buzzfeeds-database-of-nypd-police-disciplinary-cases-74a30bb5fde8/", "webpage": {"metadata": {"title": "I scraped BuzzFeed\u2019s database of NYPD police disciplinary cases | by Josh Temple | Towards Data Science", "h1": "I scraped BuzzFeed\u2019s database of NYPD police disciplinary cases", "description": "tl;dr: BuzzFeed published an interesting collection of data today \u2014 disciplinary case files for about 1,800 New York Police Department (NYPD) employees who were \u201caccused of misconduct.\u201d I wrote a\u2026"}, "outgoing_paragraph_urls": [{"url": "https://www.buzzfeed.com/kendalltaggart/nypd-police-misconduct-database-explainer", "anchor_text": "interesting collection of data", "paragraph_index": 0}, {"url": "https://github.com/joshtemple/nypd-cases", "anchor_text": "a scraper", "paragraph_index": 0}, {"url": "http://data.buzzfeed.com/projects/2018-04-nypd/nypd-discipline.csv", "anchor_text": "CSV file", "paragraph_index": 3}, {"url": "http://docs.python-requests.org/en/master/", "anchor_text": "requests", "paragraph_index": 5}, {"url": "https://en.wikipedia.org/wiki/XPath", "anchor_text": "XPath", "paragraph_index": 7}, {"url": "http://docs.python-requests.org/en/master/", "anchor_text": "requests", "paragraph_index": 10}, {"url": "https://github.com/joshtemple/nypd-cases", "anchor_text": "here", "paragraph_index": 11}], "all_paragraphs": ["tl;dr: BuzzFeed published an interesting collection of data today \u2014 disciplinary case files for about 1,800 New York Police Department (NYPD) employees who were \u201caccused of misconduct.\u201d I wrote a scraper to download the data in PDF and plain text format for large-scale analysis.", "Unfortunately, the case files aren\u2019t stored in a way that makes large-scale analysis very easy. Each case file is stored as a separate PDF, but there\u2019s no clear way to download all of them. The raw text is stored behind a tab in a JavaScript interface.", "I wanted to do some text-based analysis of this data, but in order to do so, I needed the raw text (and ideally PDFs as well) for each case file. Downloading each one manually would be time-consuming, so I decided to build a scraper to collect the data.", "As a starting point, BuzzFeed provides a helpful CSV file with a URL for each case file.", "The links in the CSV take you to the case files, which are stored on DocumentCloud. The interface is mostly JavaScript, which makes scraping a bit more challenging, since there is isn\u2019t much HTML to go off of.", "My first goal was to download all the case files in PDF format. The PDF files were stored at URLs with a very similar structure to the URLs in the BuzzFeed CSV. With a little regex, I was able to convert the DocumentCloud URLs to URLs for the PDF assets and download them all using Python\u2019s requests library.", "Downloading the converted plain text was more challenging. The plain text lives within the DocumentCloud JavaScript interface, behind a tab called Text. Scraping the text via HTML is not feasible, because it doesn\u2019t exist in the regular source code of the page. This is a natural use case for a web driver like Selenium, which allows you to interact with a web page in the same way a human does.", "To get to the data, I needed Selenium to click the Text tab so I could download the plain text. I needed a reliable way to access the Text tab in Selenium, so I used Chrome\u2019s Developer Tools (in Chrome, right click on the element of interest and click Inspect) to get the XPath for the Text tab. XPath is a query language that makes finding a specific element on a web page easier. Sometimes it\u2019s better to write XPath queries yourself, because they will be more flexible. In this instance, Chrome\u2019s XPath was good enough to get me to the Text tab every time.", "Using the XPath query, I instructed Selenium to click on the Text tab. It was not difficult to get the name of the HTML class for the plain text by inspecting the text in Chrome Developer Tools. I was able to download the raw text into a file using Selenium\u2019s text attribute.", "Finally, I wrote a loop to download the PDF and raw text file for each URL in the CSV. Now I have a corpus of data that I can apply my own OCR algorithms towards or build text-mining analyses against.", "Generally, there\u2019s not one \u201cright\u201d way to scrape data from the web. In this case, I didn\u2019t use HTML-based scraping (with a library like requests, for example), but a combination of reverse-engineering URLs and Selenium scraping gave me exactly what I needed.", "If you would like to download the BuzzFeed data set for your own analysis, clone my scraper here and let me know how it works for you!", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Co-founder of @SpectaclesCI, previously @Spotify, @Milk Bar"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F74a30bb5fde8&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fi-scraped-buzzfeeds-database-of-nypd-police-disciplinary-cases-74a30bb5fde8&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fi-scraped-buzzfeeds-database-of-nypd-police-disciplinary-cases-74a30bb5fde8&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fi-scraped-buzzfeeds-database-of-nypd-police-disciplinary-cases-74a30bb5fde8&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fi-scraped-buzzfeeds-database-of-nypd-police-disciplinary-cases-74a30bb5fde8&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----74a30bb5fde8--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----74a30bb5fde8--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@josh.temple?source=post_page-----74a30bb5fde8--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@josh.temple?source=post_page-----74a30bb5fde8--------------------------------", "anchor_text": "Josh Temple"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F483b10a7a53e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fi-scraped-buzzfeeds-database-of-nypd-police-disciplinary-cases-74a30bb5fde8&user=Josh+Temple&userId=483b10a7a53e&source=post_page-483b10a7a53e----74a30bb5fde8---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F74a30bb5fde8&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fi-scraped-buzzfeeds-database-of-nypd-police-disciplinary-cases-74a30bb5fde8&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F74a30bb5fde8&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fi-scraped-buzzfeeds-database-of-nypd-police-disciplinary-cases-74a30bb5fde8&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@worldcity?utm_source=medium&utm_medium=referral", "anchor_text": "Dane Tewari"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://www.buzzfeed.com/kendalltaggart/nypd-police-misconduct-database-explainer", "anchor_text": "interesting collection of data"}, {"url": "https://github.com/joshtemple/nypd-cases", "anchor_text": "a scraper"}, {"url": "http://data.buzzfeed.com/projects/2018-04-nypd/nypd-discipline.csv", "anchor_text": "CSV file"}, {"url": "https://en.wikipedia.org/wiki/Optical_character_recognition", "anchor_text": "optical character recognition (OCR)"}, {"url": "http://docs.python-requests.org/en/master/", "anchor_text": "requests"}, {"url": "https://en.wikipedia.org/wiki/XPath", "anchor_text": "XPath"}, {"url": "http://docs.python-requests.org/en/master/", "anchor_text": "requests"}, {"url": "https://github.com/joshtemple/nypd-cases", "anchor_text": "here"}, {"url": "https://medium.com/tag/data-science?source=post_page-----74a30bb5fde8---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/web-scraping?source=post_page-----74a30bb5fde8---------------web_scraping-----------------", "anchor_text": "Web Scraping"}, {"url": "https://medium.com/tag/selenium?source=post_page-----74a30bb5fde8---------------selenium-----------------", "anchor_text": "Selenium"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F74a30bb5fde8&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fi-scraped-buzzfeeds-database-of-nypd-police-disciplinary-cases-74a30bb5fde8&user=Josh+Temple&userId=483b10a7a53e&source=-----74a30bb5fde8---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F74a30bb5fde8&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fi-scraped-buzzfeeds-database-of-nypd-police-disciplinary-cases-74a30bb5fde8&user=Josh+Temple&userId=483b10a7a53e&source=-----74a30bb5fde8---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F74a30bb5fde8&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fi-scraped-buzzfeeds-database-of-nypd-police-disciplinary-cases-74a30bb5fde8&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----74a30bb5fde8--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F74a30bb5fde8&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fi-scraped-buzzfeeds-database-of-nypd-police-disciplinary-cases-74a30bb5fde8&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----74a30bb5fde8---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----74a30bb5fde8--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----74a30bb5fde8--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----74a30bb5fde8--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----74a30bb5fde8--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----74a30bb5fde8--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----74a30bb5fde8--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----74a30bb5fde8--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----74a30bb5fde8--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@josh.temple?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@josh.temple?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Josh Temple"}, {"url": "https://medium.com/@josh.temple/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "1.1K Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F483b10a7a53e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fi-scraped-buzzfeeds-database-of-nypd-police-disciplinary-cases-74a30bb5fde8&user=Josh+Temple&userId=483b10a7a53e&source=post_page-483b10a7a53e--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F82088900a2b2&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fi-scraped-buzzfeeds-database-of-nypd-police-disciplinary-cases-74a30bb5fde8&newsletterV3=483b10a7a53e&newsletterV3Id=82088900a2b2&user=Josh+Temple&userId=483b10a7a53e&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}