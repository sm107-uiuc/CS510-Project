{"url": "https://towardsdatascience.com/deploy-a-machine-learning-model-as-an-api-on-aws-43e92d08d05b", "time": 1682996587.445179, "path": "towardsdatascience.com/deploy-a-machine-learning-model-as-an-api-on-aws-43e92d08d05b/", "webpage": {"metadata": {"title": "Deploy a Machine Learning Model as an API on AWS Elastic Beanstalk | by Brent Lemieux | Towards Data Science", "h1": "Deploy a Machine Learning Model as an API on AWS Elastic Beanstalk", "description": "There are dozens of great articles and tutorials written every day discussing how to develop all kinds of machine learning models. However, I rarely see articles explaining how to put models into\u2026"}, "outgoing_paragraph_urls": [{"url": "https://scikit-learn.org/stable/datasets/index.html#boston-dataset", "anchor_text": "Boston house prices dataset", "paragraph_index": 4}, {"url": "https://scikit-learn.org/stable/modules/generated/sklearn.ensemble.RandomForestRegressor.html", "anchor_text": "Random Forest", "paragraph_index": 5}, {"url": "https://github.com/brent-lemieux/model_api", "anchor_text": "repo", "paragraph_index": 6}, {"url": "https://github.com/brent-lemieux/model_api", "anchor_text": "repo", "paragraph_index": 7}, {"url": "https://vsupalov.com/flask-web-server-in-production/", "anchor_text": "here", "paragraph_index": 14}, {"url": "https://docker-curriculum.com/", "anchor_text": "read this", "paragraph_index": 16}, {"url": "https://docs.docker.com/install/", "anchor_text": "here", "paragraph_index": 17}, {"url": "https://hub.docker.com/", "anchor_text": "Docker Hub", "paragraph_index": 17}, {"url": "https://aws.amazon.com/", "anchor_text": "AWS account", "paragraph_index": 24}, {"url": "https://towardsdatascience.com/deploying-a-machine-learning-model-as-a-rest-api-4a03b865c166", "anchor_text": "tutorial", "paragraph_index": 36}, {"url": "https://www.linkedin.com/in/brent-lemieux/", "anchor_text": "LinkedIn", "paragraph_index": 38}], "all_paragraphs": ["There are dozens of great articles and tutorials written every day discussing how to develop all kinds of machine learning models. However, I rarely see articles explaining how to put models into production. If you want your model to have a real-world impact, it needs to be accessible to other users and applications.", "This step-by-step guide will show you how to deploy a model as an API. Building an API for your model is a great way to integrate your work into your companies systems \u2014 other developers need only learn how to interact with your API to use your model. It\u2019s also an excellent way for aspiring data scientists to make their portfolio projects stand out.", "This tutorial is for data scientists and aspiring data scientists with little experience in deploying apps and APIs to the web. By the end, you will know how to:", "Before diving into the code, let\u2019s talk about why we might prefer this approach over putting the model code inside the main application. Building a separate service that can be called by the main application has several advantages:", "If you\u2019re developing a project portfolio, it\u2019s best to use less conventional datasets to help you stand out to employers. However, for the sake of this tutorial, I\u2019ll be using the famous Boston house prices dataset. The dataset contains several features that can be used to predict the value of residential homes in Boston circa 1980.", "I chose to use Random Forest to handle this regression problem. I arbitrarily selected a subset of features for inclusion in the model. If I were developing a \u201creal-world\u201d model, I would try out many different models and carefully select features.", "Check out my GitHub repo for instructions to quickly build and save the model. Follow along, then build an API for your modeling projects!", "Create the script app.py in the app/ directory. This directory should also contain the saved model (model.pkl) if you followed the instructions in the repo.", "These first few lines in app/app.py import useful functionality from Flask, NumPy, and pickle. We\u2019re also importing FEATURES from app/features.py which is included below. Next, we initialize the app and load the model.", "I\u2019ve stored the feature list in a separate script for consistency between model training and predictions in the API.", "Our Flask app object (defined above as app = Flask(__name__) ) has a useful decorator method that makes it easy to define endpoints \u2014 .route(). In the code below, @app.route('/api') tells the server to execute the api() function, defined directly below it, whenever http://{your_ip_address}/api receives a request.", "We need to include the parse_args() function to parse our features out of the JSON requests.", "Finally, run the application on Flask\u2019s development server to make sure it\u2019s working.", "Start the server with $ python app.py. In another terminal window, send a request to the API using curl. Pass the features with the --data flag in JSON format.", "Flask\u2019s development web server is great for testing, but for reasons I won\u2019t get into here, we\u2019ll need to look elsewhere for our production stack. You can read more about this here. We\u2019ll use Gunicorn for our application server and Nginx for our web server. Luckily, AWS Elastic Beanstalk handles the Nginx piece for us by default. To install Gunicorn, run $ pip install gunicorn. Create the script app/wsgi.py and add just two lines:", "Now, run $ gunicorn app:app --bind 0.0.0.0:5000. You should be able to execute the same curl command as above to get a response from the API.", "Docker is all the rage these days, and much has been written about its benefits. If you\u2019re interested in learning more about Docker and getting a more in-depth intro, read this.", "For this tutorial, you\u2019ll need to get Docker set up on your computer, follow the instructions here. You\u2019ll also need a Docker Hub account.", "Once you\u2019re all set up, let\u2019s dive in! There are two main files you\u2019ll need to build a Docker image, Dockerfile and requirements.txt.", "Dockerfile includes instructions for creating the environment, installing dependencies, and running the application.", "requirements.txt contains all of the Python packages needed for our app.", "Inside the app/ directory, run :", "Your application is now running in a Docker container. Rerun the curl command, and you will get the same output!", "Run $ docker push <your-dockerhub-username>/model_api to push the image to your Docker Hub account. This last step will come in very handy when deploying to AWS Elastic Beanstalk.", "Time to host our API on the web so that our friends and colleagues can access it! Create an AWS account and sign in to the console. Note: You\u2019ll need to provide a credit card to create your account. If you follow the instructions below, without modifying any of the options, your app will be free-tier eligible, and costs will be minimal. Once you\u2019ve started your app, navigate to your billing dashboard where you can see your estimated monthly expenses.", "Next, we\u2019ll create a file that tells AWS where to access our image. Call this Dockerrun.aws.json. The critical piece here is the \u201cName\u201d value. My Docker Hub username is \u201cblemi\u201d, and I\u2019ve named the image \u201cmodel_api\u201d, so I would put blemi/model_api:latest as the \u201cName\u201d value.", "In the AWS console, search for \u201cElastic Beanstalk\u201d and select it.", "Select \u201cCreate New Application\u201d in the top righthand corner, add a name and description to your application, and click \u201cCreate.\u201d", "Leave \u201cWeb server environment\u201d selected and click \u201cSelect\u201d to continue.", "Fill in a custom value for \u201cDomain\u201d and \u201cDescription\u201d if you like. For \u201cPlatform\u201d, choose \u201cPreconfigured platform\u201d and select \u201cDocker\u201d in the dropdown. For \u201cApplication code\u201d, select \u201cUpload your code\u201d and click on the \u201cUpload\u201d button.", "Click the \u201cChoose File\u201d button and open the Dockerrun.aws.json file that we created above. Note: this is only going to work if you\u2019ve pushed your Docker image to Docker Hub.", "Click \u201cUpload\u201d then \u201cCreate Environment\u201d to deploy the application.", "Note: If you\u2019re creating a production-grade API, you\u2019ll likely want to select \u201cConfigure more options\u201d here before selecting \u201cCreate Environment\u201d \u2014 if you\u2019re interested in learning about some of the other options to enhance security and scalability, please contact me. My info is at the bottom of this article.", "The app will take a few minutes to deploy, but once it does, you can access it at the URL provided at the top of the screen:", "Now, let\u2019s run the curl command on our API hosted on the web.", "We built a simple model API with Python Flask, containerized it with Docker, and deployed it to the web with AWS Elastic Beanstalk. You can now take this knowledge and develop APIs for your models and projects! This makes collaborating with other developers much more accessible. They only need to learn how to use your API to integrate your model into their applications and systems.", "There\u2019s more that needs to be done to make this API production-ready. Within AWS, and the Flask application itself, there are many configurations you can set to enhance security. There are also many options to help with scalability if usage is heavy. Flask-RESTful is a Flask extension that makes conforming with REST API best practices easy. If you\u2019re interested in using Flask-RESTful, check out this great tutorial.", "If you have any feedback or critiques, please share. If you found this guide useful, be sure to follow me so you don\u2019t miss future articles.", "If you would like to get in touch, connect with me on LinkedIn. Thanks for reading!", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F43e92d08d05b&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdeploy-a-machine-learning-model-as-an-api-on-aws-43e92d08d05b&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdeploy-a-machine-learning-model-as-an-api-on-aws-43e92d08d05b&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdeploy-a-machine-learning-model-as-an-api-on-aws-43e92d08d05b&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdeploy-a-machine-learning-model-as-an-api-on-aws-43e92d08d05b&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----43e92d08d05b--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----43e92d08d05b--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://brentlemieux.medium.com/?source=post_page-----43e92d08d05b--------------------------------", "anchor_text": ""}, {"url": "https://brentlemieux.medium.com/?source=post_page-----43e92d08d05b--------------------------------", "anchor_text": "Brent Lemieux"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F621935543&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdeploy-a-machine-learning-model-as-an-api-on-aws-43e92d08d05b&user=Brent+Lemieux&userId=621935543&source=post_page-621935543----43e92d08d05b---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F43e92d08d05b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdeploy-a-machine-learning-model-as-an-api-on-aws-43e92d08d05b&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F43e92d08d05b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdeploy-a-machine-learning-model-as-an-api-on-aws-43e92d08d05b&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://medium.com/towards-data-science/data-science-in-the-real-world/home", "anchor_text": "Data Science in the Real World"}, {"url": "https://scikit-learn.org/stable/datasets/index.html#boston-dataset", "anchor_text": "Boston house prices dataset"}, {"url": "https://scikit-learn.org/stable/modules/generated/sklearn.ensemble.RandomForestRegressor.html", "anchor_text": "Random Forest"}, {"url": "https://github.com/brent-lemieux/model_api", "anchor_text": "repo"}, {"url": "https://github.com/brent-lemieux/model_api", "anchor_text": "repo"}, {"url": "http://twitter.com/app", "anchor_text": "@app"}, {"url": "http://0.0.0.0:5000/api", "anchor_text": "http://0.0.0.0:5000/api"}, {"url": "https://vsupalov.com/flask-web-server-in-production/", "anchor_text": "here"}, {"url": "http://0.0.0.0:5000/api", "anchor_text": "http://0.0.0.0:5000/api"}, {"url": "https://docker-curriculum.com/", "anchor_text": "read this"}, {"url": "https://docs.docker.com/install/", "anchor_text": "here"}, {"url": "https://hub.docker.com/", "anchor_text": "Docker Hub"}, {"url": "http://0.0.0.0:5000/api", "anchor_text": "http://0.0.0.0:5000/api"}, {"url": "https://aws.amazon.com/", "anchor_text": "AWS account"}, {"url": "http://api-demo-dattablox.us-west-2.elasticbeanstalk.com/api", "anchor_text": "http://api-demo-dattablox.us-west-2.elasticbeanstalk.com/api"}, {"url": "https://towardsdatascience.com/deploying-a-machine-learning-model-as-a-rest-api-4a03b865c166", "anchor_text": "tutorial"}, {"url": "https://www.linkedin.com/in/brent-lemieux/", "anchor_text": "LinkedIn"}, {"url": "https://medium.com/tag/docker?source=post_page-----43e92d08d05b---------------docker-----------------", "anchor_text": "Docker"}, {"url": "https://medium.com/tag/aws?source=post_page-----43e92d08d05b---------------aws-----------------", "anchor_text": "AWS"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----43e92d08d05b---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/tag/data-science?source=post_page-----43e92d08d05b---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/ds-in-the-real-world?source=post_page-----43e92d08d05b---------------ds_in_the_real_world-----------------", "anchor_text": "Ds In The Real World"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F43e92d08d05b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdeploy-a-machine-learning-model-as-an-api-on-aws-43e92d08d05b&user=Brent+Lemieux&userId=621935543&source=-----43e92d08d05b---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F43e92d08d05b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdeploy-a-machine-learning-model-as-an-api-on-aws-43e92d08d05b&user=Brent+Lemieux&userId=621935543&source=-----43e92d08d05b---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F43e92d08d05b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdeploy-a-machine-learning-model-as-an-api-on-aws-43e92d08d05b&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----43e92d08d05b--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F43e92d08d05b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdeploy-a-machine-learning-model-as-an-api-on-aws-43e92d08d05b&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----43e92d08d05b---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----43e92d08d05b--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----43e92d08d05b--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----43e92d08d05b--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----43e92d08d05b--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----43e92d08d05b--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----43e92d08d05b--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----43e92d08d05b--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----43e92d08d05b--------------------------------", "anchor_text": ""}, {"url": "https://brentlemieux.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://brentlemieux.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Brent Lemieux"}, {"url": "https://brentlemieux.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "348 Followers"}, {"url": "https://www.linkedin.com/in/brent-lemieux/", "anchor_text": "https://www.linkedin.com/in/brent-lemieux/"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F621935543&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdeploy-a-machine-learning-model-as-an-api-on-aws-43e92d08d05b&user=Brent+Lemieux&userId=621935543&source=post_page-621935543--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fb7be1b858b8c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdeploy-a-machine-learning-model-as-an-api-on-aws-43e92d08d05b&newsletterV3=621935543&newsletterV3Id=b7be1b858b8c&user=Brent+Lemieux&userId=621935543&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}