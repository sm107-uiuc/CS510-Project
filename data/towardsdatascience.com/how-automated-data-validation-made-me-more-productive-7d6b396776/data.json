{"url": "https://towardsdatascience.com/how-automated-data-validation-made-me-more-productive-7d6b396776", "time": 1683012952.933054, "path": "towardsdatascience.com/how-automated-data-validation-made-me-more-productive-7d6b396776/", "webpage": {"metadata": {"title": "How Automated Data Validation using Pandera Made Me More Productive! | by Pratik Gandhi | Towards Data Science", "h1": "How Automated Data Validation using Pandera Made Me More Productive!", "description": "Automated Data Validation using Pandera"}, "outgoing_paragraph_urls": [{"url": "https://www.bmc.com/blogs/cio-ai-artificial-intelligence/", "anchor_text": "Gartner", "paragraph_index": 3}, {"url": "https://www.kaggle.com/c/covid19-global-forecasting-week-5/data?select=train.csv", "anchor_text": "data", "paragraph_index": 5}, {"url": "https://pandera.readthedocs.io/en/stable/hypothesis.html#wide-hypotheses", "anchor_text": "hypothesis testing", "paragraph_index": 6}, {"url": "https://pandera.readthedocs.io/en/stable/", "anchor_text": "here", "paragraph_index": 6}, {"url": "https://pandera.readthedocs.io/en/stable/dataframe_schemas.html#multiindex-validation", "anchor_text": "here", "paragraph_index": 18}, {"url": "https://greatexpectations.io", "anchor_text": "here", "paragraph_index": 23}, {"url": "https://docs.python-cerberus.org/en/stable/index.html", "anchor_text": "here", "paragraph_index": 26}, {"url": "https://github.com/Julian/jsonschema", "anchor_text": "here", "paragraph_index": 30}], "all_paragraphs": ["Data is called as the new oil of 21st Century. It is very important to juggle with the data to extract and use the correct information to solve our problems. Working with data can be exciting and sometimes tedious for people. As it is rightly said, \u201cData Scientists spend 80% of their time cleaning the data\u201d. Being a part of that pack, I go through the same process when encountering a new dataset. The same activity is not limited to until the Machine Learning(ML) system is implemented and deployed to production. When generating predictions in real time, the data might change due to unintuitive and unforseeable circumstances like error due to human interference, wrong data submitted, a new trend in data, problem while recording data, and many more. A simple ML system with multiple steps involved looks like shown in the diagram below:", "This needs to be slightly shifted by introducing or labeling another component explicitly, after data preparation and before feature engineering we name as Data Validation:", "The article is focused on why data validation is important and how can one use different strategies to seemlessly integrate it in their pipeline. After some work, I learnt how to implement scripts that would do data validation to save some of the time. Above that, I automated them using some of the pre-built packages, stepping up my game!", "Almost 85% of projects will not make it to production as per Gartner. Machine Learning (ML) Pipelines usually face several hiccups when pushed in production. One of the major issues I have quite often experienced is the compromise of data quality. Spending multiple hours of a day, several times a month maybe, and figuring out that the data that came through was unacceptable because of some reason can be quite relieving but frustrating at the same time. Many reasons can contribute that leads to data type getting changed like, text getting introduced instead of an integer, an integer was on outlier (probably 10 times higher) or an entire specific column was not received in the data feed, to mention a few. That is why adding this extra step is so important. Validating manually can take some extra effort and time. Making it automated(to an extent) could reduce the burden of the Data Science team. There are some major benefits I see by integrating an automated data validation in the pipeline:", "Python community has already built some outstanding packages to take care of these issues in a very smart way. I am going to share a few of them which I have explored and how I engineered my scripts to make them part of my pipeline.", "Data Source: I took a very recent dataset to show how one can implement these packages. Here is the link to get the data.", "Pandera provides a very simple and flexible API for performing data validation for data frame or series data. It also helps in performing complex statistical validation like hypothesis testing like two_sample_ttest. More details about the package and usage can be found here.", "Take a sample of 10 rows from the dataset:", "As we can see, there are multiple columns of different data types: String, Int, Float, Datetime. We need to define the schema of the data we expect. I have defined a simple schema without any strict rules for data validation checks as seen in the code above. Based on the expected data type, we can either use pa.Int for Integer, pa.String for String, pa.Float for float or pa.DateTime if there is a date and time. Here we set nullable = True if we expect NaN values else False. Moreover, if we set coerce = True, it will convert the column into the expected datatype without giving any errors. For e.g. converting float to int, int to string, etc. On validating the data, the output will the data frame itself, as it passes all the checks (try it!!!). If it fails, the output would look something like:", "There are some amazing capabilities that I have explored about Pandera which I will try to explain with as much detail as I can.", "Sometimes, columns might be optional and not required. In such a case, we can set required = False. By default required = True for all columns", "As we see in the screenshot below, it returned data as output without any errors.", "Try setting required=True for the same column and run the above code again.", "By default, if a new column is added to the data frame and not defined in the schema, no error will be raised. However, if you want to you can set strict = True.", "Running the code above we see below that it throws the errors that \u2018extra_column\u2019 is not defined in the schema.", "If you see my code, I have added lazy = True which gives a more detailed view as follows:", "Index can also be validated if there is any specific pattern or holds any special importance in the dataset. For example, see below:", "I created and set that column as an index to show how we can do Index validation. Outside the parenthesis of the schema, one can specify the index format that is expected. Again the output is the same as before", "Here we performed a single index validation. MultiIndex validation can be performed in a similar way. Check out here.", "Once we have defined the schema to validate the data, it is possible to transform the schema in the pipeline itself, after new columns have been introduced because of additional computation (which happens 100% of the time). Let\u2019s say initially we only have Id, County, Province_State, Country_Region, Population as the columns. We add new columns Weight, Date, Target, TargetValue to the schema as follows:", "On printing the schema as we show above, we get the following:", "On the other hand, we can also remove some columns from the schema if needed as below:", "One can do a more detailed check on the column using Check object as follows:", "Pandera has some pre-built checks that can be directly used like greater_than_or_equal_to, less_than. A custom check can also be passed for e.g. here we have used lambda argument to calculate the length of the string. This is one of the best functionalities in Pandera and can bring a lot more value to the data validation strategy. Find more details here", "As the name of the package suggests, you can set expectations for the data to be validated. Honestly, I got so comfortable with Pandera, that I have not got a chance to explore to the full potential. It seems to be quite easy to implement and straight forward package to use. Below is a small snippet of the implementation of the same data:", "This is another package whose syntax is similar to Pandera. It can be more applied when data is in a dictionary form or JSON format.", "More details about the package can be found here.", "This is another great package if your data is obtained via XML, JSON or HTML form post. In other words, it is beneficial to validate any type of strings, mappings, and lists type of data. Below are some of their useful links:", "JsonSchema is an implementation of JSON schema for Python. As the name suggests, this package is very helpful for validating JSON data. Take the following example with valid JSON data and invalid JSON data:", "On running the invalid data, it will throw an error:", "As we can see, the price is expected to be number but string was provided rather. More details about it can be found here.", "The post might seem to be mostly dominated by Pandera, as it is one of the packages that I use often. Writing this post was purely to share the voyage I embarked on. I am sure one can benefit more from these packages for their specific use case. Often walking the extra mile can achieve extraordinary results. Data validation is definitely that \u201cextra mile\u201d. Developing data validation strategies might feel extra work but one can definitely benefit a lot if such a habit of creating automated scripts is formed, even for taking care of small things.", "Please, feel free to share your comments and suggestions if you have any!", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F7d6b396776&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-automated-data-validation-made-me-more-productive-7d6b396776&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-automated-data-validation-made-me-more-productive-7d6b396776&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-automated-data-validation-made-me-more-productive-7d6b396776&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-automated-data-validation-made-me-more-productive-7d6b396776&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----7d6b396776--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----7d6b396776--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://pratikkgandhi.medium.com/?source=post_page-----7d6b396776--------------------------------", "anchor_text": ""}, {"url": "https://pratikkgandhi.medium.com/?source=post_page-----7d6b396776--------------------------------", "anchor_text": "Pratik Gandhi"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F30ac634c8b15&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-automated-data-validation-made-me-more-productive-7d6b396776&user=Pratik+Gandhi&userId=30ac634c8b15&source=post_page-30ac634c8b15----7d6b396776---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F7d6b396776&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-automated-data-validation-made-me-more-productive-7d6b396776&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F7d6b396776&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-automated-data-validation-made-me-more-productive-7d6b396776&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@franckinjapan?utm_source=medium&utm_medium=referral", "anchor_text": "Franck V."}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://unsplash.com/@roadtripwithraj?utm_source=medium&utm_medium=referral", "anchor_text": "Road Trip with Raj"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://www.bmc.com/blogs/cio-ai-artificial-intelligence/", "anchor_text": "Gartner"}, {"url": "https://www.kaggle.com/c/covid19-global-forecasting-week-5/data?select=train.csv", "anchor_text": "data"}, {"url": "https://pandera.readthedocs.io/en/stable/hypothesis.html#wide-hypotheses", "anchor_text": "hypothesis testing"}, {"url": "https://pandera.readthedocs.io/en/stable/", "anchor_text": "here"}, {"url": "https://pandera.readthedocs.io/en/stable/dataframe_schemas.html#multiindex-validation", "anchor_text": "here"}, {"url": "https://unsplash.com/@juricakoletic?utm_source=medium&utm_medium=referral", "anchor_text": "Jurica Koleti\u0107"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://greatexpectations.io", "anchor_text": "here"}, {"url": "https://pandera.readthedocs.io/en/stable/decorators.html.", "anchor_text": "here"}, {"url": "https://docs.python-cerberus.org/en/stable/index.html", "anchor_text": "here"}, {"url": "https://github.com/Pylons/colander", "anchor_text": "https://github.com/Pylons/colander"}, {"url": "https://docs.pylonsproject.org/projects/colander/en/latest/", "anchor_text": "https://docs.pylonsproject.org/projects/colander/en/latest/"}, {"url": "https://github.com/Julian/jsonschema", "anchor_text": "here"}, {"url": "https://medium.com/tag/data?source=post_page-----7d6b396776---------------data-----------------", "anchor_text": "Data"}, {"url": "https://medium.com/tag/data-validation?source=post_page-----7d6b396776---------------data_validation-----------------", "anchor_text": "Data Validation"}, {"url": "https://medium.com/tag/editors-pick?source=post_page-----7d6b396776---------------editors_pick-----------------", "anchor_text": "Editors Pick"}, {"url": "https://medium.com/tag/data-science?source=post_page-----7d6b396776---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----7d6b396776---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F7d6b396776&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-automated-data-validation-made-me-more-productive-7d6b396776&user=Pratik+Gandhi&userId=30ac634c8b15&source=-----7d6b396776---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F7d6b396776&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-automated-data-validation-made-me-more-productive-7d6b396776&user=Pratik+Gandhi&userId=30ac634c8b15&source=-----7d6b396776---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F7d6b396776&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-automated-data-validation-made-me-more-productive-7d6b396776&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----7d6b396776--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F7d6b396776&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-automated-data-validation-made-me-more-productive-7d6b396776&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----7d6b396776---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----7d6b396776--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----7d6b396776--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----7d6b396776--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----7d6b396776--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----7d6b396776--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----7d6b396776--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----7d6b396776--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----7d6b396776--------------------------------", "anchor_text": ""}, {"url": "https://pratikkgandhi.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://pratikkgandhi.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Pratik Gandhi"}, {"url": "https://pratikkgandhi.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "334 Followers"}, {"url": "https://www.linkedin.com/in/pratikkgandhi/", "anchor_text": "https://www.linkedin.com/in/pratikkgandhi/"}, {"url": "https://twitter.com/pratikkgandhi", "anchor_text": "https://twitter.com/pratikkgandhi"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F30ac634c8b15&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-automated-data-validation-made-me-more-productive-7d6b396776&user=Pratik+Gandhi&userId=30ac634c8b15&source=post_page-30ac634c8b15--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fe8a1922d38bf&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-automated-data-validation-made-me-more-productive-7d6b396776&newsletterV3=30ac634c8b15&newsletterV3Id=e8a1922d38bf&user=Pratik+Gandhi&userId=30ac634c8b15&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}