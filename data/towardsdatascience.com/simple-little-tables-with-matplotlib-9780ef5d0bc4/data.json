{"url": "https://towardsdatascience.com/simple-little-tables-with-matplotlib-9780ef5d0bc4", "time": 1683011107.517216, "path": "towardsdatascience.com/simple-little-tables-with-matplotlib-9780ef5d0bc4/", "webpage": {"metadata": {"title": "Simple Little Tables with Matplotlib | by Dr. Michael Demastrie | Towards Data Science", "h1": "Simple Little Tables with Matplotlib", "description": "Sometimes, I need to create an image for a document that contains a few rows and columns of data. Like most people, I\u2019ll just use a screen capture to create the image, but this approach doesn\u2019t lend\u2026"}, "outgoing_paragraph_urls": [{"url": "https://wkhtmltopdf.org", "anchor_text": "wkhtmltoimage", "paragraph_index": 2}, {"url": "https://matplotlib.org/3.1.1/gallery/misc/table_demo.html#sphx-glr-gallery-misc-table-demo-py", "anchor_text": "example", "paragraph_index": 7}, {"url": "https://matplotlib.org/3.1.1/gallery/misc/table_demo.html#sphx-glr-gallery-misc-table-demo-py", "anchor_text": "Table Demo", "paragraph_index": 8}], "all_paragraphs": ["Sometimes, I need to create an image for a document that contains a few rows and columns of data. Like most people, I\u2019ll just use a screen capture to create the image, but this approach doesn\u2019t lend well to automated tasks and requires hand-tweaking to get it ready to present. It\u2019s absurd that I\u2019m working in my Jupyter notebook with Pandas and Matplotlib, and I\u2019m snapping screenshots to capture tables for slide decks and written reports. Matplotlib renders nice graphs. Why not nice, little tables?", "One alternative is to generate the report using LaTeX, which has powerful table capabilities. Adopting LaTeX for reporting just to render a little table is overkill and often a yak shave. I\u2019d really like to just use Matplotlib to generate my little grids with nicely centered titles; no extraneous text; a nice, clean border; and maybe a little footer with the date.", "Pandas can output decent-looking dataframes within Jupyter notebooks, thanks to Jupyter\u2019s output cell rendering. It can even style these Pandas dataframes using the pandas.Dataframe.style library. The challenge to using these tools to build styled tables is they render the output in HTML. Getting a file into an image format requires workflows that call other external tools, such as wkhtmltoimage, to translate the HTML to images.", "Matplotlib can save charts as images. If you search the Matplotlib documentation, you will find it has a matplotlib.pyplot.table package, which looks promising. It is useful. I used it for this article, in fact. The challenge is that matplotlib.pyplot.table creates tables that often hang beneath stacked bar charts to provide readers insight into the data above. You want to show just the chart and you want the chart to look nice.", "The first thing that you\u2019ll probably notice when attempting to use matplotlib.pyplot.table is that the tables are rather ugly and don't manage vertical cell padding well. Second, if you try to hide the graph to just show the table grid, alignment issues rear their ugly heads and keep you from ever getting the nicely styled little table you aimed for. It takes some work to get the table to look nice, and I will share with you what I learned from doing this work myself.", "The Matplotlib pyplot.table example code creates a table, but does not show how to present data with just a simple table. It generates a table used as an extension to a stacked bar chart. If you follow your intuition and only hide the chart, you will have a poorly formatted image, unsuitable for your article or slide presentation.", "In this article, I take you step-by-step through the conversion of the example provided by the Matplotlib example writer to some simple table code for your projects. I provide explanation of the changes I made along the way, which should help you make enhancements. I provide the full code at the end of the article.", "From the example, you can see the table feature is used to display data related to an associated stacked bar graph.", "Source code for the example (from the Matplotlib Table Demo):", "Now, let\u2019s get down to work. First, I\u2019ll break the table free of the chart. I reformatted the chart data to my tastes and removed data specific to the stacked bar chart. This step is optional for you. When I load small amounts of data from a Python list in the code, I prefer including the labels within the data arrays and popping them off at the right time. I can read it more easily when I come back months later. You will probably import the data from an external CSV file or database and manipulate it in a Pandas dataframe. Having the data in a two-dimension list keeps it simple for the example.", "I also removed the plt.show() instruction and added code to write the image to a png file. If you called plt.show() before plt.savefig(), the image would be blank, since plt.show() resets the pyplot figure object references. Remember that plt.savefig() can output other image types by detecting the extension of the filename you provide (jpeg, svg, eps, etc.).", "Note: I also made minor changes to some data and labels during my experimenting. I forgot to roll them back before publishing for consistency with the original code. For example, \u201c100 year\u201d became \u201c40 year.\u201d", "Let\u2019s get to work on isolating and neatening the table. It will take a few steps. I\u2019ll take you through them.", "First, let\u2019s hide the x and y axes, with all their ticks and labels.", "The axes went away, but we\u2019re left with a border around the space where the bar chart used to be. We can easily turn it off.", "It\u2019s getting cleaner, but we see a ton of whitespace between the title and the table. All we have to do is change the existing bottom alignment to center. This will center the table over the hidden axes area. We should also get rid of the subplot position tweak from the example.", "And change the plt.table line for the centered loc:", "That change pulls the table upward nicely. Now, let\u2019s address the overly tight vertical space within the cells. pylot.table doesn't allow for specifying cell padding, but we can scale the height 1.5 times with the y argument of the scale(x, y) function. It gives our cell data a little breathing room. You can play with the x and y values to your taste.", "Let\u2019s set column colors and set the row header horizontal alignment to right. We'll fill two lists of colors, one for every row header cell and another for every column header cell. We'll just use the plt.cm.BuPm color map that the example used, even though there are better choices than a linear color map for decorative colors. We will set the row and column label colors and alignments when creating the table.", "We can explicitly declare the figure to get easy control of its border and background color. I\u2019ll use some labeled colors here as an example of that approach in contrast to the color map used above. I\u2019d normally just use white for the background, but sky blue is nice for demonstrating how to set its color.", "Pretty. Like a summer day. You probably noticed that the title centers on the axes data, excluding the row headers. We\u2019ll need center it on the figure with three code changes. These changes also improve the centering consistency of the table within the figure.", "We\u2019ll just use figure text to create a footer and play with the position values until it looks right.", "The table image looks pretty good, but the automatic layout doesn\u2019t always produce whitespacing to my taste. Playing with an explicit figure size can often dial this in. Guessing the figure size takes experimentation, and can improve or degrade your table image.", "You may also need to add back in the bbox_inches='tight' to savefig to recalculate the bounding box. Otherwise, the image may not have correct right and left padding. You might find the image looks fine in a Jupyter notebook output cell without this call, but is misaligned in your saved image. Making all renderers happy is a balancing act. You should always check the final output images, even if they look great in your IDE's preview.", "This final source code does not include the explicit figure size declaration. I prefer the roomier look.", "I shared a step-by-step transformation of the Matplotlib pyplot.tables example into a simple, neat, little table, free of an attached chart. The table is well-aligned and suitable for your publication or presentation. The steps included code changes to hide the chart, center the table, set colors, insert a footer, and tips to improve the alignment and spacing of the final image file. Maybe these steps will save you time someday.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Technologist, pragmatist, and writer. Weaving theory and practice into the fabric of time. Doctor of Business Administration and Applied Computer Science."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F9780ef5d0bc4&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsimple-little-tables-with-matplotlib-9780ef5d0bc4&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsimple-little-tables-with-matplotlib-9780ef5d0bc4&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsimple-little-tables-with-matplotlib-9780ef5d0bc4&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsimple-little-tables-with-matplotlib-9780ef5d0bc4&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----9780ef5d0bc4--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----9780ef5d0bc4--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@demastrie_95193?source=post_page-----9780ef5d0bc4--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@demastrie_95193?source=post_page-----9780ef5d0bc4--------------------------------", "anchor_text": "Dr. Michael Demastrie"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F9505c480353e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsimple-little-tables-with-matplotlib-9780ef5d0bc4&user=Dr.+Michael+Demastrie&userId=9505c480353e&source=post_page-9505c480353e----9780ef5d0bc4---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F9780ef5d0bc4&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsimple-little-tables-with-matplotlib-9780ef5d0bc4&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F9780ef5d0bc4&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsimple-little-tables-with-matplotlib-9780ef5d0bc4&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://wkhtmltopdf.org", "anchor_text": "wkhtmltoimage"}, {"url": "https://matplotlib.org/3.1.1/gallery/misc/table_demo.html#sphx-glr-gallery-misc-table-demo-py", "anchor_text": "example"}, {"url": "https://matplotlib.org/3.1.1/gallery/misc/table_demo.html#sphx-glr-gallery-misc-table-demo-py", "anchor_text": "Table Demo"}, {"url": "https://medium.com/tag/matplotlib?source=post_page-----9780ef5d0bc4---------------matplotlib-----------------", "anchor_text": "Matplotlib"}, {"url": "https://medium.com/tag/python?source=post_page-----9780ef5d0bc4---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/data-science?source=post_page-----9780ef5d0bc4---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/publishing?source=post_page-----9780ef5d0bc4---------------publishing-----------------", "anchor_text": "Publishing"}, {"url": "https://medium.com/tag/visualization?source=post_page-----9780ef5d0bc4---------------visualization-----------------", "anchor_text": "Visualization"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F9780ef5d0bc4&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsimple-little-tables-with-matplotlib-9780ef5d0bc4&user=Dr.+Michael+Demastrie&userId=9505c480353e&source=-----9780ef5d0bc4---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F9780ef5d0bc4&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsimple-little-tables-with-matplotlib-9780ef5d0bc4&user=Dr.+Michael+Demastrie&userId=9505c480353e&source=-----9780ef5d0bc4---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F9780ef5d0bc4&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsimple-little-tables-with-matplotlib-9780ef5d0bc4&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----9780ef5d0bc4--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F9780ef5d0bc4&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsimple-little-tables-with-matplotlib-9780ef5d0bc4&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----9780ef5d0bc4---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----9780ef5d0bc4--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----9780ef5d0bc4--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----9780ef5d0bc4--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----9780ef5d0bc4--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----9780ef5d0bc4--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----9780ef5d0bc4--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----9780ef5d0bc4--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----9780ef5d0bc4--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@demastrie_95193?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@demastrie_95193?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Dr. Michael Demastrie"}, {"url": "https://medium.com/@demastrie_95193/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "24 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F9505c480353e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsimple-little-tables-with-matplotlib-9780ef5d0bc4&user=Dr.+Michael+Demastrie&userId=9505c480353e&source=post_page-9505c480353e--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F67fad247852f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsimple-little-tables-with-matplotlib-9780ef5d0bc4&newsletterV3=9505c480353e&newsletterV3Id=67fad247852f&user=Dr.+Michael+Demastrie&userId=9505c480353e&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}