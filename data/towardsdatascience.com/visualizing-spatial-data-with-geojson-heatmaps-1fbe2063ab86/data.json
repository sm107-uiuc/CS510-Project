{"url": "https://towardsdatascience.com/visualizing-spatial-data-with-geojson-heatmaps-1fbe2063ab86", "time": 1683010099.101474, "path": "towardsdatascience.com/visualizing-spatial-data-with-geojson-heatmaps-1fbe2063ab86/", "webpage": {"metadata": {"title": "Visualizing spatial data with geojson heatmaps | by Jan Majewski | Towards Data Science", "h1": "Visualizing spatial data with geojson heatmaps", "description": "Have you ever worked with spatial data and faced the challenge of having to choose between overcrowded scatter plots or choropleth maps limited to administrative boundaries such as districts? Working\u2026"}, "outgoing_paragraph_urls": [], "all_paragraphs": ["Have you ever worked with spatial data and faced the challenge of having to choose between overcrowded scatter plots or choropleth maps limited to administrative boundaries such as districts?", "Working as a data scientist in the real estate industry, I often deal with spatial data, however, I was struggling to find the optimal way of visualizing spatial data in a way that would make it easy to grasp key spatial features from large data sets.", "The basic features provided by Plotly or Folium felt limiting so I decided to do a bit of research on how to create custom heatmaps on top of a map, which I want to share with you in this article. I will be working on a data set of >10k Real Estate offers in Warsaw from May 2020, which you can download from my GitHub in the link below.", "The data used can be downloaded from GitHub", "As the data has many more features than needed for this project let\u2019s select just key 8 columns.", "First, let\u2019s explore the most common ways of visualizing spatial data with basic Plotly features.", "Scatter plots on a map are probably the most common and easiest ways of visualizing spatial data. You take the coordinates, set one feature as colour and there is your map. It even looks quite effective at first glance, but if you are dealing with a larger data set it gets overcrowded and you actually lose sight of the map below.", "We can simplify the scatter by creating a grid by rounding coordinates and calculating the mean for each tile. It looks easier to read but we also lose a lot of detail.", "Grid plot is based on data summarized by clipping lat and on and creating lat_mod and lon_mod features and grouping data to create df_map.", "Not being satisfied with the previous outcomes, I decided to look for ways to create heatmaps based on contour plots.", "For me the best solution turned out to be a 4 step process:", "We got quite a nice contour plot, now all we need to do is convert it to geojson so that it is compatible with plotly.", "Warning! When choosing boundaries for contour plot, make sure that each layer has at least one data point. If the max and min are to wide or the step size is too small and one of the layers is empty it could make the whole geojson not appear at all in plotly.", "To convert contour plot to geojson you will need geojsoncontour library.", "As plotly needs a DataFrame with values used for fill colour for spatial objects within geojson, we need to extract them by iterating the \u201cfeatures\u201d key in geojson dict. This key contains a list of dictionaries, one for each layer of the heatmap. The value is stored in \u201cproperties\u201d key of the subdictionary as \u201ctitle\u201d key. Let\u2019s also add \u201cid\u201d key to each dictionary within the list to match spatial object with DataFrame row.", "Now we have all we need to create a beautiful heatmap. Let\u2019s plot!", "I recommend referencing nbviewer link at the top of the page to explore the full scope of possibilities to zoom and deep-dive the most interesting areas of the plot.", "I hope this tutorial will help you make your spatial visualizations more effective and easier to grasp the key insights at a glance.", "This type of visualization works with all sorts of data, where spatial features are one of the key drivers. To wrap up enjoy a similar viz, based on google commute data. If you are interested in the analysis, the notebook referenced at the top of the article also deals with extraction and processing drivetime data using Google API.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Data Scientist passionate about changing complex data into clear stories. Focus on Real Estate and Energy sectors."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F1fbe2063ab86&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvisualizing-spatial-data-with-geojson-heatmaps-1fbe2063ab86&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvisualizing-spatial-data-with-geojson-heatmaps-1fbe2063ab86&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvisualizing-spatial-data-with-geojson-heatmaps-1fbe2063ab86&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvisualizing-spatial-data-with-geojson-heatmaps-1fbe2063ab86&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----1fbe2063ab86--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----1fbe2063ab86--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@janekmajewski?source=post_page-----1fbe2063ab86--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@janekmajewski?source=post_page-----1fbe2063ab86--------------------------------", "anchor_text": "Jan Majewski"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fbf80a4208270&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvisualizing-spatial-data-with-geojson-heatmaps-1fbe2063ab86&user=Jan+Majewski&userId=bf80a4208270&source=post_page-bf80a4208270----1fbe2063ab86---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F1fbe2063ab86&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvisualizing-spatial-data-with-geojson-heatmaps-1fbe2063ab86&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F1fbe2063ab86&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvisualizing-spatial-data-with-geojson-heatmaps-1fbe2063ab86&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://github.com/Jan-Majewski/Project_Portfolio/blob/master/03_Real_Estate_pricing_in_Warsaw/03_02_Data_Vizualization.ipynb", "anchor_text": "https://github.com/Jan-Majewski/Project_Portfolio/blob/master/03_Real_Estate_pricing_in_Warsaw/03_02_Data_Vizualization.ipynb"}, {"url": "https://nbviewer.jupyter.org/github/Jan-Majewski/Project_Portfolio/blob/12a5fd122c2f64830c4ec22de04b39406f02e10b/03_Real_Estate_pricing_in_Warsaw/03_02_Data_Vizualization.ipynb", "anchor_text": "https://nbviewer.jupyter.org/github/Jan-Majewski/Project_Portfolio/blob/c770f21dc410b1495dbdf5b9f4f443ecd4d986ba/03_Real_Estate_pricing_in_Warsaw/03_02_Data_Vizualization.ipynb"}, {"url": "https://raw.githubusercontent.com/Jan-Majewski/Project_Portfolio/master/03_Real_Estate_pricing_in_Warsaw/Warsaw_RE_data.xlsx", "anchor_text": "https://raw.githubusercontent.com/Jan-Majewski/Project_Portfolio/master/03_Real_Estate_pricing_in_Warsaw/Warsaw_RE_data.xlsx"}, {"url": "https://medium.com/tag/spatial-analysis?source=post_page-----1fbe2063ab86---------------spatial_analysis-----------------", "anchor_text": "Spatial Analysis"}, {"url": "https://medium.com/tag/data-vizualization?source=post_page-----1fbe2063ab86---------------data_vizualization-----------------", "anchor_text": "Data Vizualization"}, {"url": "https://medium.com/tag/plotly?source=post_page-----1fbe2063ab86---------------plotly-----------------", "anchor_text": "Plotly"}, {"url": "https://medium.com/tag/geojson?source=post_page-----1fbe2063ab86---------------geojson-----------------", "anchor_text": "Geojson"}, {"url": "https://medium.com/tag/real-estate?source=post_page-----1fbe2063ab86---------------real_estate-----------------", "anchor_text": "Real Estate"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F1fbe2063ab86&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvisualizing-spatial-data-with-geojson-heatmaps-1fbe2063ab86&user=Jan+Majewski&userId=bf80a4208270&source=-----1fbe2063ab86---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F1fbe2063ab86&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvisualizing-spatial-data-with-geojson-heatmaps-1fbe2063ab86&user=Jan+Majewski&userId=bf80a4208270&source=-----1fbe2063ab86---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F1fbe2063ab86&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvisualizing-spatial-data-with-geojson-heatmaps-1fbe2063ab86&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----1fbe2063ab86--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F1fbe2063ab86&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvisualizing-spatial-data-with-geojson-heatmaps-1fbe2063ab86&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----1fbe2063ab86---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----1fbe2063ab86--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----1fbe2063ab86--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----1fbe2063ab86--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----1fbe2063ab86--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----1fbe2063ab86--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----1fbe2063ab86--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----1fbe2063ab86--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----1fbe2063ab86--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@janekmajewski?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@janekmajewski?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Jan Majewski"}, {"url": "https://medium.com/@janekmajewski/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "158 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fbf80a4208270&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvisualizing-spatial-data-with-geojson-heatmaps-1fbe2063ab86&user=Jan+Majewski&userId=bf80a4208270&source=post_page-bf80a4208270--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F42906e3e4cdf&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvisualizing-spatial-data-with-geojson-heatmaps-1fbe2063ab86&newsletterV3=bf80a4208270&newsletterV3Id=42906e3e4cdf&user=Jan+Majewski&userId=bf80a4208270&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}