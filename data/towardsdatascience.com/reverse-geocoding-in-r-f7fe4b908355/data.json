{"url": "https://towardsdatascience.com/reverse-geocoding-in-r-f7fe4b908355", "time": 1682994509.100482, "path": "towardsdatascience.com/reverse-geocoding-in-r-f7fe4b908355/", "webpage": {"metadata": {"title": "Reverse Geocoding in R. Free Without the Google or Bing API | by Aisha Sikder, PhD | Towards Data Science", "h1": "Reverse Geocoding in R", "description": "As I continue to work on my dissertation, I have come across a few glitches in executing what should be easy scripts from various packages in R and Python. This weekend, I gave myself the task to\u2026"}, "outgoing_paragraph_urls": [], "all_paragraphs": ["As I continue to work on my dissertation, I have come across a few glitches in executing what should be easy scripts from various packages in R and Python. This weekend, I gave myself the task to reverse geocode ~1 million latitude and longitude coordinates. I found a great package in R called revgeo and thought this would be pretty easy to implement. I would just have to specify the provider and the API key. Google and Bing limit the number of free queries per day so it was not a viable option, but Photon does not! The only caveat is that detailed locations like address names are not always available. Below is a sample of how to utilize the revgeo package:", "So where is the problem? Well, as stated on Photons webpage:", "You can use the API for your project, but please be fair \u2014 extensive usage will be throttled. We do not guarantee for the availability and usage might be subject of change in the future.", "I am not certain how many queries it takes before the Photon API slows down but it is important to be mindful in how many requests we send to their server. I decided to start with 500,000 coordinates to reverse geocode but this didn\u2019t work well. I ran the code and walked away for some time and when I came back I saw the throttling had begun so I needed to tweak the code. In addition, R was throwing an error cannot allocate vector of size x.x Gb, which means that my available RAM has been exhausted.", "At this point I had two issues: 1) Throttling and 2) Memory Allocation. For issue 1, I needed to incorporate sleep times in the code and work with smaller subsets of my already subsetted dataframe. For issue 2, I found a thread on stackoverflow that had useful advice:", "A solution that helped me was running memory.limit(size = _ _ _ _ _ _). In addition I used the rm() command to remove any dataframes I no longer needed within my code and the gc() command for garbage collection. Shown below, I loaded in the dataframe with ~1 million coordinates called main. I subsetted the data to only 100,000 rows. As you will see later, I subset the data even further in a while loop to avoid memory allocation issues.", "Below is the full code. The script incorporates other actions not relating to this posts subject matter but I wanted to publish it here so that you may see the whole picture and hopefully take away some helpful tips in reverse geocoding.", "After implementing this code, it took about 4 hours to reverse geocode 100,000 coordinates. In my opinion, that\u2019s not a viable option if I have 1 million coordinates to convert. I may have to find another method to achieve my goal but I figured this would be helpful to some of you who have smaller datasets.", "Thanks for reading and happy coding!", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Ff7fe4b908355&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Freverse-geocoding-in-r-f7fe4b908355&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Freverse-geocoding-in-r-f7fe4b908355&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Freverse-geocoding-in-r-f7fe4b908355&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Freverse-geocoding-in-r-f7fe4b908355&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----f7fe4b908355--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----f7fe4b908355--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@aisha.sikder?source=post_page-----f7fe4b908355--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@aisha.sikder?source=post_page-----f7fe4b908355--------------------------------", "anchor_text": "Aisha Sikder, PhD"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F963af01f388c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Freverse-geocoding-in-r-f7fe4b908355&user=Aisha+Sikder%2C+PhD&userId=963af01f388c&source=post_page-963af01f388c----f7fe4b908355---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ff7fe4b908355&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Freverse-geocoding-in-r-f7fe4b908355&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ff7fe4b908355&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Freverse-geocoding-in-r-f7fe4b908355&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@lonely_planet?utm_source=medium&utm_medium=referral", "anchor_text": "Lonely Planet"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://stackoverflow.com/questions/10917532/memory-allocation-error-cannot-allocate-vector-of-size-75-1-mb", "anchor_text": "Memory Allocation \"Error: cannot allocate vector of size 75.1 Mb\"In the course of vectorizing some simulation code, I've run into a memory issue. I'm using 32 bit R version 2.15.0 (via\u2026stackoverflow.com"}, {"url": "https://medium.com/tag/data-science?source=post_page-----f7fe4b908355---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/r?source=post_page-----f7fe4b908355---------------r-----------------", "anchor_text": "R"}, {"url": "https://medium.com/tag/geocoding?source=post_page-----f7fe4b908355---------------geocoding-----------------", "anchor_text": "Geocoding"}, {"url": "https://medium.com/tag/reverse-geocoding?source=post_page-----f7fe4b908355---------------reverse_geocoding-----------------", "anchor_text": "Reverse Geocoding"}, {"url": "https://medium.com/tag/programming?source=post_page-----f7fe4b908355---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Ff7fe4b908355&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Freverse-geocoding-in-r-f7fe4b908355&user=Aisha+Sikder%2C+PhD&userId=963af01f388c&source=-----f7fe4b908355---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Ff7fe4b908355&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Freverse-geocoding-in-r-f7fe4b908355&user=Aisha+Sikder%2C+PhD&userId=963af01f388c&source=-----f7fe4b908355---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ff7fe4b908355&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Freverse-geocoding-in-r-f7fe4b908355&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----f7fe4b908355--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Ff7fe4b908355&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Freverse-geocoding-in-r-f7fe4b908355&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----f7fe4b908355---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----f7fe4b908355--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----f7fe4b908355--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----f7fe4b908355--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----f7fe4b908355--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----f7fe4b908355--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----f7fe4b908355--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----f7fe4b908355--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----f7fe4b908355--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@aisha.sikder?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@aisha.sikder?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Aisha Sikder, PhD"}, {"url": "https://medium.com/@aisha.sikder/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "58 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F963af01f388c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Freverse-geocoding-in-r-f7fe4b908355&user=Aisha+Sikder%2C+PhD&userId=963af01f388c&source=post_page-963af01f388c--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fb6b46fc07bdd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Freverse-geocoding-in-r-f7fe4b908355&newsletterV3=963af01f388c&newsletterV3Id=b6b46fc07bdd&user=Aisha+Sikder%2C+PhD&userId=963af01f388c&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}