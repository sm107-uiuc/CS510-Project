{"url": "https://towardsdatascience.com/data-science-coding-mistakes-and-best-practices-part-1-f7511cf573f7", "time": 1683014316.709057, "path": "towardsdatascience.com/data-science-coding-mistakes-and-best-practices-part-1-f7511cf573f7/", "webpage": {"metadata": {"title": "Python Best Practices for Data Science | by Faisal Rasbihan | Towards Data Science", "h1": "Python Best Practices for Data Science", "description": "Many of us start our careers in Data Science without a strong software engineering background. While this might not be a problem at first, you will find that your notebook will get much slower and\u2026"}, "outgoing_paragraph_urls": [{"url": "https://stackoverflow.com/questions/16476924/how-to-iterate-over-rows-in-a-dataframe-in-pandas/55557758#55557758", "anchor_text": "his", "paragraph_index": 1}, {"url": "https://pandas.pydata.org/docs/user_guide/index.html", "anchor_text": "pandas", "paragraph_index": 7}, {"url": "https://numpy.org/doc/stable/reference/index.html#reference", "anchor_text": "numpy", "paragraph_index": 7}, {"url": "https://devblogs.microsoft.com/oldnewthing/20070406-00/?p=27343", "anchor_text": "better programmer", "paragraph_index": 12}, {"url": "https://www.python.org/dev/peps/pep-0008/#code-lay-out", "anchor_text": "python", "paragraph_index": 15}, {"url": "https://google.github.io/styleguide/pyguide.html", "anchor_text": "style", "paragraph_index": 15}, {"url": "https://docs.python-guide.org/writing/style/", "anchor_text": "guides", "paragraph_index": 15}, {"url": "https://en.wikipedia.org/wiki/Magic_number_(programming)", "anchor_text": "magic number", "paragraph_index": 16}, {"url": "https://towardsdatascience.com/the-best-format-to-save-pandas-data-414dca023e0d", "anchor_text": "not a good format", "paragraph_index": 18}, {"url": "https://pandas.pydata.org/pandas-docs/stable/user_guide/io.html", "anchor_text": "many formats", "paragraph_index": 18}, {"url": "https://drivendata.github.io/cookiecutter-data-science/#nothing-here-is-binding", "anchor_text": "cookiecutter", "paragraph_index": 26}, {"url": "https://twitter.com/faisalrasbihan", "anchor_text": "@faisalrasbihan", "paragraph_index": 28}], "all_paragraphs": ["Many of us start our careers in Data Science without a strong software engineering background. While this might not be a problem at first, you will find that your notebook will get much slower and you will struggle to maintain it as your code gets more and more complex. The goal of this post is to help you write clean, readable, and yet performant code. This post is not meant to be an exhaustive guide on how to be a better programmer, but I hope you can find something useful in it to improve your coding skill.", "I think this is one of the most common mistakes of someone who does analytical programming for the first time. This answer from StackOverflow explained it quite nicely.", "Iteration in pandas is an anti-pattern, and is something you should only do when you have exhausted every other option. You should not use any function with \u201citer\u201d in its name for more than a few thousand rows or you will have to get used to a *lot* of waiting.", "To speed up your data processes, you need to use the built-in pandas or numpy functions because it\u2019s so much faster and easier. For example, take a look at this for-loop,", "This can be done easily using numpy,", "Probably the best benefit of using numpy/pandas function is that they are magnitudes faster than a for-loop. Take a look at the chart comparing the running time of pandas function vs iteration below.", "If you use pandas or numpy functions, your code will be vectorized under the hood, this means that instead of working on a single value at a time, these libraries perform an operation on all your rows at once which makes your data processes blazing fast. Here are some other examples of DataFrame operations which you can do using pandas:", "The great thing is, you can do most data manipulation using pandas or numpy built-in functions. I can only think of a few use cases which can only be done using iterations such as training your ML model or doing RegEx. So do check numpy or pandas documentation (or StackOverflow) if you want to know how to do a data manipulation using one of these libraries.", "If you have worked using pandas, you might have encountered this warning before.", "This warning can result from many things but I think the most common cause stems from an unclear understanding of views vs copies. A view is, as the term suggests, a view into the original data, so modifying the view may modify the original object. For example,", "The operation above returns a view and will result in SettingWithCopyWarning. If you change the value of column df2, it will also change the value in column A on df , this is what the warning is trying to tell us. To fix it, you must use .copy() to create an entirely new object to df2", "The code above will return a copy, which is an entirely new object. In the code above, changing df2 will not change df. In fact, you should use .copy() every time you create a new non-empty DataFrame to avoid the infamousSettingWithCopyWarning.", "It is widely known that Data Scientists write terrible code. This is not surprising because much of the code written by data scientists are for EDA, rapid prototyping, and one-off analyses. The fact that your code might someday be modified or read by other people probably doesn\u2019t cross your mind. To quote a better programmer than me, \u201cCode is read much more often than it is written, so plan accordingly\u201d. Here are a few tips from me on how to write better code.", "Never write short and non-descriptive variable names like i, j, X, Y in your code. Instead, write a descriptive variable name such as row_index, column_index, train_data, test_data. Yes, this will make you type your variable two seconds longer but trust me it will save a lot of man-hours in the future when someone is trying to modify/debug your code.", "Having consistent naming guidelines will be beneficial to you and your team. It will make anyone who reads your code understand it faster and make your code generally much better to look at. Since most data science code is written in python, I\u2019m going to share a few of the PEP8 naming convention:", "As for formatting, since python disallows mixing the use of tabs and spaces for indentation it is better to stick to one format. There are a lot of different python style guides out there that you can follow but a few of them that I found essential are:", "Consider refactoring the same value you use throughout your code to a single variable in a separate section of your code, or better yet, in a separate JSON file. It will save you a lot of time in the future because if you want to change that same value throughout your code, you can do so by changing one variable. This practice will also avoid a common coding anti-pattern called magic number in which unique values with unexplained meaning are hard-coded directly in the source code.", "This also holds true for your procedures, instead of writing long data processing procedures in your notebook, it is better to group similar procedures and refactor them to a single function instead. Then, you can call all of the refactored functions in a single chained execution using pandas .pipe() function.", "It is common practice to save your data to CSV using .to_csv() function as you can see in many kaggle notebooks. But CSVs are actually not a good format to store large data because it is schemaless, so you have to parse dates and numbers when you load your data, and uncompressed, which means large datasets will take up a lot of memory and will be very slow to save and load. Pandas library actually supports many formats that are better suited to save large datasets. Take a look at the chart comparing DataFrame save/load time below.", "We can see that feather and parquet are magnitudes faster than CSV, both are supported by pandas. This is due to columnar compression of these file types which store your data in disk similar to how DataFrame objects are stored in memory. Next, let\u2019s take a look at the file size comparison of these file types.", "This time parquet comes out on top. Based on this comparison, I recommend saving your data in parquet format because it is a lot faster, consumed less memory, and supported by pandas. You can save your data in a parquet file by using .to_parquet().", "Doing your analyses, visualization, feature engineering, and building your ML model in a single jupyter notebook might seem like a good idea at first. Granted, it is very easy to fire up a notebook and start working on your dataset, but if you did not structure your code carefully at the beginning things will get very messy very quickly. Structuring your project will reduce the complexity of your code and make it easier to maintain. For starter, you can put functions you have created that you find useful in a separate module called data_processor.py and import it to your jupyter notebook.", "In your jupyter notebook, you can import the module that you have created and use it using .pipe() function (I\u2019m a fan of .pipe function).", "Next, you can separate them even further into modules called visualization.py, data_processing.py, build_model.py, etc.", "In fact, you can structure your projects however you want as long as each module in your project conforms to the Single Responsibility Principle. To quote Wikipedia,", "The Single Responsibility Principle (SRP) is a computer programming principle that states that every module or class should have responsibility over a single part of the functionality provided by the software, and that responsibility should be entirely encapsulated by the class. All its services should be narrowly aligned with that responsibility.", "Or if you want a ready-made template check out cookiecutter data science which does all of the things mentioned above for you.", "This post contains the mistakes I\u2019ve made and useful techniques I have learned along the way in my journey as a Data Scientist. I am not claiming that these methods are perfect, but I hope that this article will be helpful for beginner Data Scientists starting their career.", "I am a beginner Data Scientist passionate about generating value from data. You can reach me on Twitter @faisalrasbihan. I welcome constructive feedback and critics.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Data Scientist at Panin Asset Management | AI/ML Enthusiast | Aspiring Writer"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Ff7511cf573f7&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdata-science-coding-mistakes-and-best-practices-part-1-f7511cf573f7&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdata-science-coding-mistakes-and-best-practices-part-1-f7511cf573f7&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdata-science-coding-mistakes-and-best-practices-part-1-f7511cf573f7&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdata-science-coding-mistakes-and-best-practices-part-1-f7511cf573f7&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----f7511cf573f7--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----f7511cf573f7--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@faisalrasbihan?source=post_page-----f7511cf573f7--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@faisalrasbihan?source=post_page-----f7511cf573f7--------------------------------", "anchor_text": "Faisal Rasbihan"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F6897a340ffab&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdata-science-coding-mistakes-and-best-practices-part-1-f7511cf573f7&user=Faisal+Rasbihan&userId=6897a340ffab&source=post_page-6897a340ffab----f7511cf573f7---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ff7511cf573f7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdata-science-coding-mistakes-and-best-practices-part-1-f7511cf573f7&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ff7511cf573f7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdata-science-coding-mistakes-and-best-practices-part-1-f7511cf573f7&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://towardsdatascience.com/tagged/getting-started", "anchor_text": "Getting Started"}, {"url": "https://unsplash.com/@nesabymakers", "anchor_text": "nesabymakers"}, {"url": "https://unsplash.com/photos/kwzWjTnDPLk", "anchor_text": "Unsplash"}, {"url": "https://stackoverflow.com/questions/16476924/how-to-iterate-over-rows-in-a-dataframe-in-pandas/55557758#55557758", "anchor_text": "his"}, {"url": "https://pandas.pydata.org/docs/user_guide/index.html", "anchor_text": "pandas"}, {"url": "https://numpy.org/doc/stable/reference/index.html#reference", "anchor_text": "numpy"}, {"url": "https://devblogs.microsoft.com/oldnewthing/20070406-00/?p=27343", "anchor_text": "better programmer"}, {"url": "https://www.python.org/dev/peps/pep-0008/#code-lay-out", "anchor_text": "python"}, {"url": "https://google.github.io/styleguide/pyguide.html", "anchor_text": "style"}, {"url": "https://docs.python-guide.org/writing/style/", "anchor_text": "guides"}, {"url": "https://stackoverflow.com/questions/36814642/visual-studio-code-convert-spaces-to-tabs", "anchor_text": "automatically convert tabs to spaces"}, {"url": "https://en.wikipedia.org/wiki/Magic_number_(programming)", "anchor_text": "magic number"}, {"url": "https://towardsdatascience.com/the-best-format-to-save-pandas-data-414dca023e0d", "anchor_text": "not a good format"}, {"url": "https://pandas.pydata.org/pandas-docs/stable/user_guide/io.html", "anchor_text": "many formats"}, {"url": "https://towardsdatascience.com/the-best-format-to-save-pandas-data-414dca023e0d", "anchor_text": "Ilia Zaitsev"}, {"url": "https://towardsdatascience.com/the-best-format-to-save-pandas-data-414dca023e0d", "anchor_text": "Ilia Zaitsev"}, {"url": "https://drivendata.github.io/cookiecutter-data-science/#nothing-here-is-binding", "anchor_text": "cookiecutter"}, {"url": "https://twitter.com/faisalrasbihan", "anchor_text": "@faisalrasbihan"}, {"url": "https://medium.com/r?url=https%3A%2F%2Ftowardsdatascience.com%2Ftop-10-coding-mistakes-made-by-data-scientists-bb5bc82faaee", "anchor_text": "https://medium.com/r?url=https%3A%2F%2Ftowardsdatascience.com%2Ftop-10-coding-mistakes-made-by-data-scientists-bb5bc82faaee"}, {"url": "https://towardsdatascience.com/data-scientists-your-variable-names-are-awful-heres-how-to-fix-them-89053d2855be", "anchor_text": "https://towardsdatascience.com/data-scientists-your-variable-names-are-awful-heres-how-to-fix-them-89053d2855be"}, {"url": "https://towardsdatascience.com/the-best-format-to-save-pandas-data-414dca023e0d", "anchor_text": "https://towardsdatascience.com/the-best-format-to-save-pandas-data-414dca023e0d"}, {"url": "https://www.practicaldatascience.org/html/views_and_copies_in_pandas.html", "anchor_text": "https://www.practicaldatascience.org/html/views_and_copies_in_pandas.html"}, {"url": "https://medium.com/tag/data-science?source=post_page-----f7511cf573f7---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/programming?source=post_page-----f7511cf573f7---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/tag/python?source=post_page-----f7511cf573f7---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/getting-started?source=post_page-----f7511cf573f7---------------getting_started-----------------", "anchor_text": "Getting Started"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Ff7511cf573f7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdata-science-coding-mistakes-and-best-practices-part-1-f7511cf573f7&user=Faisal+Rasbihan&userId=6897a340ffab&source=-----f7511cf573f7---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Ff7511cf573f7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdata-science-coding-mistakes-and-best-practices-part-1-f7511cf573f7&user=Faisal+Rasbihan&userId=6897a340ffab&source=-----f7511cf573f7---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ff7511cf573f7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdata-science-coding-mistakes-and-best-practices-part-1-f7511cf573f7&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----f7511cf573f7--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Ff7511cf573f7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdata-science-coding-mistakes-and-best-practices-part-1-f7511cf573f7&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----f7511cf573f7---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----f7511cf573f7--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----f7511cf573f7--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----f7511cf573f7--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----f7511cf573f7--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----f7511cf573f7--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----f7511cf573f7--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----f7511cf573f7--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----f7511cf573f7--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@faisalrasbihan?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@faisalrasbihan?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Faisal Rasbihan"}, {"url": "https://medium.com/@faisalrasbihan/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "27 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F6897a340ffab&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdata-science-coding-mistakes-and-best-practices-part-1-f7511cf573f7&user=Faisal+Rasbihan&userId=6897a340ffab&source=post_page-6897a340ffab--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fusers%2F6897a340ffab%2Flazily-enable-writer-subscription&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdata-science-coding-mistakes-and-best-practices-part-1-f7511cf573f7&user=Faisal+Rasbihan&userId=6897a340ffab&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}