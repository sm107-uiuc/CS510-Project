{"url": "https://towardsdatascience.com/optimization-with-python-how-to-make-the-most-amount-of-money-with-the-least-amount-of-risk-1ebebf5b2f29", "time": 1682996340.976289, "path": "towardsdatascience.com/optimization-with-python-how-to-make-the-most-amount-of-money-with-the-least-amount-of-risk-1ebebf5b2f29/", "webpage": {"metadata": {"title": "Optimization with Python: How to make the most amount of money with the least amount of risk? | by Tirthajyoti Sarkar | Towards Data Science", "h1": "Optimization with Python: How to make the most amount of money with the least amount of risk?", "description": "We show how to apply a Nobel-prize winning economic theory to the stock market and solve the resulting optimization problem using Python."}, "outgoing_paragraph_urls": [{"url": "https://www.quora.com/Is-optimization-related-to-data-science-And-how", "anchor_text": "solve complex optimization problems for business and technology companies", "paragraph_index": 0}, {"url": "https://towardsdatascience.com/linear-programming-and-discrete-optimization-with-python-using-pulp-449f3c5f6e99", "anchor_text": "Linear Programming and Discrete Optimization with Python", "paragraph_index": 1}, {"url": "https://pythonhosted.org/PuLP/", "anchor_text": "Python library PuLP", "paragraph_index": 1}, {"url": "https://www.analyticsvidhya.com/blog/2017/02/lintroductory-guide-on-linear-programming-explained-in-simple-english/", "anchor_text": "linear programming (LP) problem", "paragraph_index": 2}, {"url": "https://en.wikipedia.org/wiki/Harry_Markowitz", "anchor_text": "Harry Markowitz", "paragraph_index": 4}, {"url": "https://www.investopedia.com/terms/m/modernportfoliotheory.asp", "anchor_text": "Modern Portfolio Theory (MPT)", "paragraph_index": 4}, {"url": "https://en.wikipedia.org/wiki/Mathematical_optimization", "anchor_text": "mathematical optimization theory", "paragraph_index": 7}, {"url": "https://www.investopedia.com/ask/answers/041615/how-risk-aversion-measured-modern-portfolio-theory-mpt.asp", "anchor_text": "MPT assumes that investors are risk-averse", "paragraph_index": 10}, {"url": "https://www.investopedia.com/ask/answers/041415/variance-good-or-bad-stock-investors.asp", "anchor_text": "variability (volatility) of a stock price (defined over a fixed time horizon) is equated with risk", "paragraph_index": 11}, {"url": "https://www.cvxpy.org/index.html", "anchor_text": "CVXPY", "paragraph_index": 31}, {"url": "https://github.com/tirthajyoti/Optimization-Python/blob/master/Portfolio_optimization.ipynb", "anchor_text": "entire code is given in this Jupyter notebook", "paragraph_index": 32}, {"url": "https://www.solver.com/integer-constraint-programming", "anchor_text": "mixed-integer problem", "paragraph_index": 41}, {"url": "https://www.cvxpy.org/examples/index.html", "anchor_text": "Look at the examples page of the CVXPY package", "paragraph_index": 42}, {"url": "https://github.com/tirthajyoti?tab=repositories", "anchor_text": "GitHub", "paragraph_index": 47}, {"url": "https://www.linkedin.com/in/tirthajyoti-sarkar-2127aa7/", "anchor_text": "add me on LinkedIn", "paragraph_index": 47}, {"url": "https://twitter.com/tirthajyotiS", "anchor_text": "follow me on Twitter.", "paragraph_index": 47}], "all_paragraphs": ["One of the major goals of the modern enterprise of data science and analytics is to solve complex optimization problems for business and technology companies to maximize their profit.", "In my article \u201cLinear Programming and Discrete Optimization with Python\u201d, we touched on basic discrete optimization concepts and introduced a Python library PuLP for solving such problems.", "Although a linear programming (LP) problem is defined only by linear objective function and constraints, it can be applied to a surprisingly wide variety of problems in diverse domains ranging from healthcare to economics, business to military.", "In this article, we show one such amazing application of LP using Python programming in the area of economic planning \u2014 maximizing the expected profit from a stock market investment portfolio while minimizing the risk associated with it.", "The 1990 Nobel prize in Economics went to Harry Markowitz, acknowledged for his famous Modern Portfolio Theory (MPT), as it is known in the parlance of financial markets. The original paper was published long back in 1952.", "The key word here is Balanced.", "A good, balanced portfolio must offer both protections (minimizing the risk) and opportunities (maximizing profit).", "And, when concepts such as minimization and maximization are involved, it is natural to cast the problem in terms of mathematical optimization theory.", "The fundamental idea is rather simple and is rooted in the innate human nature of risk aversion.", "In general, stock market statistics show that higher risk is associated with a greater probability of higher return and lower risk with a greater probability of smaller return.", "MPT assumes that investors are risk-averse, meaning that given two portfolios that offer the same expected return, investors will prefer the less risky one. Think about it. You will collect high-risk stocks only if they carry a high probability of large return percentage.", "But how to quantify the risk? It is a murky concept for sure and can mean different things to different people. However, in the generally accepted economic theory, the variability (volatility) of a stock price (defined over a fixed time horizon) is equated with risk.", "Therefore, the central optimization problem is to minimize the risk while ensuring a certain amount of return in profits. Or, maximizing the profit while keeping the risk below a certain threshold.", "In this article, we will show a very simplified version of the portfolio optimization problem, which can be cast into an LP framework and solved efficiently using simple Python scripting.", "The goal is to illustrate the power and possibility of such optimization solvers for tackling complex real-life problems.", "We work with 24 months stock price (monthly average) for three stocks \u2014 Microsoft, Visa, Walmart. These are older data but they demonstrate the process flawlessly.", "How to define the return? We can simply compute a rolling monthly return by subtracting the previous month\u2019s average stock price from the current month and dividing by the previous month\u2019s price.", "The return is shown in the following figure,", "The return on a stock is an uncertain quantity. We can model it as a random vector.", "The portfolio can also be modeled as a vector.", "Therefore, the return on a certain portfolio is given by an inner product of these vectors and it is a random variable. The million-dollar question is:", "How can we compare random variables (corresponding to different portfolios) to select a \u201cbest\u201d portfolio?", "Following the Markowitz model, we can formulate our problem as,", "Given a fixed quantity of money (say $1000), how much should we invest in each of the three stocks so as to (a) have a one month expected return of at least a given threshold, and (b) minimize the risk (variance) of the portfolio return.", "We cannot invest a negative quantity. This is the non-negativity constraint,", "Assuming no transaction cost, the total investment is restricted by the fund at hand,", "But this is a random variable. So, we have to work with the expected quantities,", "Supposed we want a minimum expected return. Therefore,", "Now, to model the risk we have to compute the variance,", "Putting together, the final optimization model is,", "Next, we show how easy it is to formulate and solve this problem using a popular Python library.", "The library we are going to use for this problem is called CVXPY. It is a Python-embedded modeling language for convex optimization problems. It allows you to express your problem in a natural way that follows the mathematical model, rather than in the restrictive standard form required by solvers.", "The entire code is given in this Jupyter notebook. Here, I just show the core code snippets.", "To set up the necessary data, the key is to compute the return matrix from the data-table of the monthly price. The code is given below,", "Now, if you view the original data table and the return table side by side, it looks like following,", "Next, we simply compute the mean (expected) return and the covariance matrix from this return matrix,", "After that, CVXPY allows setting up the problem simply following the mathematical model we constructed above,", "Note the use of extremely useful classes like quad_form() and Problem() from the CVXPY framework.", "We can write a simple code to solve the Problem and show the optimal investment quantities which ensure a minimum return of 2% while also keeping the risk at a minimum.", "The final result is given by,", "Needless to say that the setup and simplifying assumptions of our model can make this problem sound simpler than what it is. But once you understand the basic logic and the mechanics of solving such an optimization problem, you can extend it to multiple scenarios,", "You have to construct more complicated matrices and a longer list of constraints, use indicator variables to turn this into a mixed-integer problem - but all of these are inherently supported by packages like CVXPY.", "Look at the examples page of the CVXPY package to know about the breadth of optimization problems that can be solved using the framework.", "In this article, we discussed how the key concepts from a seminal economic theory can be used to formulate a simple optimization problem for stock market investment.", "For illustration, we took a sample dataset of three companies\u2019 average monthly stock price and showed how a linear programming model can be set up in no time using basic Python data science libraries such as NumPy, Pandas, and an optimization framework called CVXPY.", "Having a working knowledge of such flexible and powerful packages adds immense value to the skillset of upcoming data scientists because the need for solving optimization problems arise in all facets of science, technology, and business problems.", "Readers are encouraged to try more complex versions of this investment problem for fun and learning.", "If you have any questions or ideas to share, please contact the author at tirthajyoti[AT]gmail.com. Also, you can check the author\u2019s GitHub repositories for other fun code snippets in Python, R, or MATLAB and machine learning resources. If you are, like me, passionate about machine learning/data science, please feel free to add me on LinkedIn or follow me on Twitter.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Sr. Director of AI/ML platform | Stories on Artificial Intelligence, Data Science, and ML | Speaker, Open-source contributor, Author of multiple DS books"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F1ebebf5b2f29&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Foptimization-with-python-how-to-make-the-most-amount-of-money-with-the-least-amount-of-risk-1ebebf5b2f29&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Foptimization-with-python-how-to-make-the-most-amount-of-money-with-the-least-amount-of-risk-1ebebf5b2f29&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Foptimization-with-python-how-to-make-the-most-amount-of-money-with-the-least-amount-of-risk-1ebebf5b2f29&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Foptimization-with-python-how-to-make-the-most-amount-of-money-with-the-least-amount-of-risk-1ebebf5b2f29&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----1ebebf5b2f29--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----1ebebf5b2f29--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@tirthajyoti?source=post_page-----1ebebf5b2f29--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@tirthajyoti?source=post_page-----1ebebf5b2f29--------------------------------", "anchor_text": "Tirthajyoti Sarkar"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fcb9d97d4b61a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Foptimization-with-python-how-to-make-the-most-amount-of-money-with-the-least-amount-of-risk-1ebebf5b2f29&user=Tirthajyoti+Sarkar&userId=cb9d97d4b61a&source=post_page-cb9d97d4b61a----1ebebf5b2f29---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F1ebebf5b2f29&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Foptimization-with-python-how-to-make-the-most-amount-of-money-with-the-least-amount-of-risk-1ebebf5b2f29&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F1ebebf5b2f29&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Foptimization-with-python-how-to-make-the-most-amount-of-money-with-the-least-amount-of-risk-1ebebf5b2f29&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://www.quora.com/Is-optimization-related-to-data-science-And-how", "anchor_text": "solve complex optimization problems for business and technology companies"}, {"url": "https://towardsdatascience.com/linear-programming-and-discrete-optimization-with-python-using-pulp-449f3c5f6e99", "anchor_text": "Linear Programming and Discrete Optimization with Python"}, {"url": "https://pythonhosted.org/PuLP/", "anchor_text": "Python library PuLP"}, {"url": "https://towardsdatascience.com/linear-programming-and-discrete-optimization-with-python-using-pulp-449f3c5f6e99", "anchor_text": "Linear programming and discrete optimization with Python using PuLPLinear and integer programming are key techniques for discrete optimization and they pop up everywhere in modern\u2026towardsdatascience.com"}, {"url": "https://www.analyticsvidhya.com/blog/2017/02/lintroductory-guide-on-linear-programming-explained-in-simple-english/", "anchor_text": "linear programming (LP) problem"}, {"url": "https://en.wikipedia.org/wiki/Harry_Markowitz", "anchor_text": "Harry Markowitz"}, {"url": "https://www.investopedia.com/terms/m/modernportfoliotheory.asp", "anchor_text": "Modern Portfolio Theory (MPT)"}, {"url": "https://www.dummies.com/business/accounting/auditing/how-to-optimize-portfolio-risk/", "anchor_text": "How to Optimize Portfolio Risk - dummiesCollections of individual assets interact together to influence the overall portfolio. So when several investments are\u2026www.dummies.com"}, {"url": "https://en.wikipedia.org/wiki/Mathematical_optimization", "anchor_text": "mathematical optimization theory"}, {"url": "https://www.investopedia.com/ask/answers/041615/how-risk-aversion-measured-modern-portfolio-theory-mpt.asp", "anchor_text": "MPT assumes that investors are risk-averse"}, {"url": "https://www.investopedia.com/ask/answers/041415/variance-good-or-bad-stock-investors.asp", "anchor_text": "variability (volatility) of a stock price (defined over a fixed time horizon) is equated with risk"}, {"url": "https://www.cvxpy.org/index.html", "anchor_text": "CVXPY"}, {"url": "https://github.com/tirthajyoti/Optimization-Python/blob/master/Portfolio_optimization.ipynb", "anchor_text": "entire code is given in this Jupyter notebook"}, {"url": "https://www.solver.com/integer-constraint-programming", "anchor_text": "mixed-integer problem"}, {"url": "https://www.cvxpy.org/examples/index.html", "anchor_text": "Look at the examples page of the CVXPY package"}, {"url": "https://github.com/tirthajyoti?tab=repositories", "anchor_text": "GitHub"}, {"url": "https://www.linkedin.com/in/tirthajyoti-sarkar-2127aa7/", "anchor_text": "add me on LinkedIn"}, {"url": "https://twitter.com/tirthajyotiS", "anchor_text": "follow me on Twitter."}, {"url": "https://www.linkedin.com/in/tirthajyoti-sarkar-2127aa7/", "anchor_text": "Tirthajyoti Sarkar - Sr. Principal Engineer - Semiconductor, AI, Machine Learning - ON\u2026Georgia Institute of Technology Master of Science - MS, Analytics This MS program imparts theoretical and practical\u2026www.linkedin.com"}, {"url": "https://medium.com/tag/finance?source=post_page-----1ebebf5b2f29---------------finance-----------------", "anchor_text": "Finance"}, {"url": "https://medium.com/tag/programming?source=post_page-----1ebebf5b2f29---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/tag/data-science?source=post_page-----1ebebf5b2f29---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/python?source=post_page-----1ebebf5b2f29---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/technology?source=post_page-----1ebebf5b2f29---------------technology-----------------", "anchor_text": "Technology"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F1ebebf5b2f29&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Foptimization-with-python-how-to-make-the-most-amount-of-money-with-the-least-amount-of-risk-1ebebf5b2f29&user=Tirthajyoti+Sarkar&userId=cb9d97d4b61a&source=-----1ebebf5b2f29---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F1ebebf5b2f29&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Foptimization-with-python-how-to-make-the-most-amount-of-money-with-the-least-amount-of-risk-1ebebf5b2f29&user=Tirthajyoti+Sarkar&userId=cb9d97d4b61a&source=-----1ebebf5b2f29---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F1ebebf5b2f29&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Foptimization-with-python-how-to-make-the-most-amount-of-money-with-the-least-amount-of-risk-1ebebf5b2f29&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----1ebebf5b2f29--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F1ebebf5b2f29&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Foptimization-with-python-how-to-make-the-most-amount-of-money-with-the-least-amount-of-risk-1ebebf5b2f29&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----1ebebf5b2f29---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----1ebebf5b2f29--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----1ebebf5b2f29--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----1ebebf5b2f29--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----1ebebf5b2f29--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----1ebebf5b2f29--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----1ebebf5b2f29--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----1ebebf5b2f29--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----1ebebf5b2f29--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@tirthajyoti?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@tirthajyoti?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Tirthajyoti Sarkar"}, {"url": "https://medium.com/@tirthajyoti/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "12.5K Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fcb9d97d4b61a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Foptimization-with-python-how-to-make-the-most-amount-of-money-with-the-least-amount-of-risk-1ebebf5b2f29&user=Tirthajyoti+Sarkar&userId=cb9d97d4b61a&source=post_page-cb9d97d4b61a--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fb285331282ca&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Foptimization-with-python-how-to-make-the-most-amount-of-money-with-the-least-amount-of-risk-1ebebf5b2f29&newsletterV3=cb9d97d4b61a&newsletterV3Id=b285331282ca&user=Tirthajyoti+Sarkar&userId=cb9d97d4b61a&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}