{"url": "https://towardsdatascience.com/web-scraping-regular-expressions-and-data-visualization-doing-it-all-in-python-37a1aade7924", "time": 1682993344.954134, "path": "towardsdatascience.com/web-scraping-regular-expressions-and-data-visualization-doing-it-all-in-python-37a1aade7924/", "webpage": {"metadata": {"title": "Web Scraping, Regular Expressions, and Data Visualization: Doing it all in Python | by Will Koehrsen | Towards Data Science", "h1": "Web Scraping, Regular Expressions, and Data Visualization: Doing it all in Python", "description": "As with most interesting projects, this one started with a simple question asked half-seriously: how much tuition do I pay for five minutes of my college president\u2019s time? After a chance pleasant\u2026"}, "outgoing_paragraph_urls": [{"url": "https://en.wikipedia.org/wiki/Case_Western_Reserve_University", "anchor_text": "CWRU", "paragraph_index": 0}, {"url": "http://www.cleveland.com/metro/index.ssf/2017/12/case_western_reserve_university_president_barbara_snyders_base_salary_and_bonus_pay_tops_among_private_colleges_in_ohio.html", "anchor_text": "this article", "paragraph_index": 1}, {"url": "https://en.wikipedia.org/wiki/Web_scraping", "anchor_text": "web scraping", "paragraph_index": 2}, {"url": "https://www.regular-expressions.info/tutorial.html", "anchor_text": "regular expressions", "paragraph_index": 2}, {"url": "https://drive.google.com/file/d/1zjMHPv3H7mV5iLWapiW9IF2yUoY2Jggg/view?usp=sharing", "anchor_text": "Jupyter Notebook", "paragraph_index": 4}, {"url": "https://colab.research.google.com/notebooks/welcome.ipynb", "anchor_text": "Google Colaboratory", "paragraph_index": 4}, {"url": "https://www.w3schools.com/cssref/css_selectors.asp", "anchor_text": "CSS selectors", "paragraph_index": 8}, {"url": "https://colab.research.google.com/drive/1zjMHPv3H7mV5iLWapiW9IF2yUoY2Jggg", "anchor_text": "this notebook", "paragraph_index": 10}, {"url": "https://docs.python.org/3/library/re.html", "anchor_text": "documentation", "paragraph_index": 10}, {"url": "http://www.pythonforbeginners.com/basics/list-comprehensions-in-python", "anchor_text": "list comprehension", "paragraph_index": 16}, {"url": "https://matplotlib.org/contents.html", "anchor_text": "official documentation", "paragraph_index": 20}, {"url": "https://twitter.com/koehrsen_will", "anchor_text": "@koehrsen_will", "paragraph_index": 26}], "all_paragraphs": ["As with most interesting projects, this one started with a simple question asked half-seriously: how much tuition do I pay for five minutes of my college president\u2019s time? After a chance pleasant discussion with the president of my school (CWRU), I wondered just how much my conversation had cost me.", "My search led to this article, which along with my president\u2019s salary, had this table showing the salaries of private college presidents in Ohio:", "While I could have found the answer for my president, (SPOILER ALERT, it\u2019s $48 / five minutes), and been satisfied, I wanted to take the idea further using this table. I had been looking for a chance to practice web scraping and regular expressions in Python and decided this was a great short project.", "Although it almost certainly would have been faster to manually enter the data in Excel, then I would not have had the invaluable opportunity to practice a few skills! Data science is about solving problems using a diverse set of tools, and web scraping and regular expressions are two areas I need some work on (not to mention that making plots is always fun). The result was a very short \u2014 but complete \u2014 project showing how we can bring together these three techniques to solve a data science problem.", "The complete code for this project is available as a Jupyter Notebook on Google Colaboratory (this is a new service I\u2019m trying out where you can share and collaborate on Jupyter Notebooks in the cloud. It feels like the future!) To edit the notebook, open it up in Colaboratory, select file > save a copy in drive and then you can make any changes and run the Notebook.", "While most data used in classes and textbooks just appears ready-to-use in a clean format, in reality, the world does not play so nice. Getting data usually means getting our hands dirty, in this case pulling (also known as scraping) data from the web. Python has great tools for doing this, namely the requests library for retrieving content from a webpage, and bs4 (BeautifulSoup) for extracting the relevant information.", "These two libraries are often used together in the following manner: first, we make a GET request to a website. Then, we create a Beautiful Soup object from the content that is returned and parse it using several methods.", "The resulting soup object is quite intimidating:", "Our data is in there somewhere, but we need to extract it. To select our table from the soup, we need to find the right CSS selectors. One way to do this is by going to the webpage and inspecting the element. In this case, we can also just look at the soup and see that our table resides under a <div> HTML tag with the attribute class = \"entry-content\" . Using this info and the .find method of our soup object, we can pull out the main article content.", "This returns another soup object which is not quite specific enough. To select the table, we need to find the <ul> tag (see above image). We also want to deal with only the text in the table, so we use the .text attribute of the soup.", "We now have the exact text of the table as a string, but clearly is it not of much use to us yet! To extract specific parts of a text string, we need to move on to regular expressions. I don\u2019t have space in this article (nor do I have the experience!) to completely explain regular expressions, so here I only give a brief overview and show the results. I\u2019m still learning myself, and I have found the only way to get better is practice. Feel free to go over this notebook for some practice, and check out the Python re documentation to get started (documentation is usually dry but extremely helpful).", "The basic idea of regular expressions is we define a pattern (the \u201cregular expression\u201d or \u201cregex\u201d) that we want to match in a text string and then search in the string to return matches. Some of these patterns look pretty strange because they contain both the content we want to match and special characters that change how the pattern is interpreted. Regular expressions come up all the time when parsing string information and are a vital tool to learn at least at a basic level!", "There are 3 pieces of info we need to extract from the text table:", "First up is the name. In this regular expression, I make use of the fact that each name is at the start of a line and ends with a comma. The code below creates a regular expression pattern, and then searches through the string to find all occurrences of the pattern:", "Like I said, the pattern is pretty complex, but it does exactly what we want! Don\u2019t worry about the details of the pattern, but just think about the general process: first define a pattern, and then search a string to find the pattern.", "We repeat the procedure with the colleges and the salary:", "Unfortunately the salary is in a format that no computer would understand as numbers. Fortunately, this gives us a chance to practice using a Python list comprehension to convert the string salaries into numbers. The following code illustrates how to use string slicing, split , and join, all within a list comprehension to achieve the results we want:", "We apply this transformation to our salaries and finally have the all info we want. Let\u2019s put everything into a pandas dataframe. At this point, I manually insert the information for my college (CWRU) because it was not in the main table. It\u2019s important to know when it\u2019s more efficient to do things by hand rather than writing a complicated program (although this whole article kind of goes against this point!).", "This project is indicative of data science because the majority of time was spent collecting and formatting the data. However, now that we have a clean dataset, we get to make some plots! We can use both matplotlib and seaborn to visualize the data.", "If we aren\u2019t too concerned about aesthetics, we can use the built in dataframe plot method to quickly show results:", "To get a better plot we have to do some work. Plotting code in Python, like regular expressions, can be a little complex, and it takes some practice to get used to. Mostly, I learn by building on answers on sites like Stack Overflow or by reading official documentation.", "After a bit of work, we get the following plot (see notebook for the details):", "Much better, but this still doesn\u2019t answer my original question! To show how much students are paying for 5 minutes of their president\u2019s time we can convert salaries into $ / five minutes assuming 2000 work hours per year.", "This is not necessarily a publication-worthy plot, but it\u2019s a nice way to wrap up a small project.", "The most effective way to learn technical skills is by doing. While this whole project could have been done manually inserting values into Excel, I like to take the long view and think about how the skills learned here will help in the future. The process of learning is more important than the final result, and in this project we were able to see how to use 3 critical skills for data science:", "Now, get out there and start your own project and remember: it doesn\u2019t have to be world-changing to be worthwhile.", "I welcome feedback and discussion and can be reached on Twitter @koehrsen_will.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Data Scientist at Cortex Intel, Data Science Communicator"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F37a1aade7924&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fweb-scraping-regular-expressions-and-data-visualization-doing-it-all-in-python-37a1aade7924&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fweb-scraping-regular-expressions-and-data-visualization-doing-it-all-in-python-37a1aade7924&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fweb-scraping-regular-expressions-and-data-visualization-doing-it-all-in-python-37a1aade7924&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fweb-scraping-regular-expressions-and-data-visualization-doing-it-all-in-python-37a1aade7924&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----37a1aade7924--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----37a1aade7924--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://williamkoehrsen.medium.com/?source=post_page-----37a1aade7924--------------------------------", "anchor_text": ""}, {"url": "https://williamkoehrsen.medium.com/?source=post_page-----37a1aade7924--------------------------------", "anchor_text": "Will Koehrsen"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fe2f299e30cb9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fweb-scraping-regular-expressions-and-data-visualization-doing-it-all-in-python-37a1aade7924&user=Will+Koehrsen&userId=e2f299e30cb9&source=post_page-e2f299e30cb9----37a1aade7924---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F37a1aade7924&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fweb-scraping-regular-expressions-and-data-visualization-doing-it-all-in-python-37a1aade7924&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F37a1aade7924&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fweb-scraping-regular-expressions-and-data-visualization-doing-it-all-in-python-37a1aade7924&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://en.wikipedia.org/wiki/Case_Western_Reserve_University", "anchor_text": "CWRU"}, {"url": "http://www.cleveland.com/metro/index.ssf/2017/12/case_western_reserve_university_president_barbara_snyders_base_salary_and_bonus_pay_tops_among_private_colleges_in_ohio.html", "anchor_text": "this article"}, {"url": "https://en.wikipedia.org/wiki/Web_scraping", "anchor_text": "web scraping"}, {"url": "https://www.regular-expressions.info/tutorial.html", "anchor_text": "regular expressions"}, {"url": "https://drive.google.com/file/d/1zjMHPv3H7mV5iLWapiW9IF2yUoY2Jggg/view?usp=sharing", "anchor_text": "Jupyter Notebook"}, {"url": "https://colab.research.google.com/notebooks/welcome.ipynb", "anchor_text": "Google Colaboratory"}, {"url": "http://www.cleveland.com/metro/index.ssf/2017/12/case_western_reserve_university_president_barbara_snyders_base_salary_and_bonus_pay_tops_among_private_colleges_in_ohio.html'", "anchor_text": "http://www.cleveland.com/metro/index.ssf/2017/12/case_western_reserve_university_president_barbara_snyders_base_salary_and_bonus_pay_tops_among_private_colleges_in_ohio.html'"}, {"url": "https://www.w3schools.com/cssref/css_selectors.asp", "anchor_text": "CSS selectors"}, {"url": "https://colab.research.google.com/drive/1zjMHPv3H7mV5iLWapiW9IF2yUoY2Jggg", "anchor_text": "this notebook"}, {"url": "https://docs.python.org/3/library/re.html", "anchor_text": "documentation"}, {"url": "http://www.pythonforbeginners.com/basics/list-comprehensions-in-python", "anchor_text": "list comprehension"}, {"url": "https://matplotlib.org/contents.html", "anchor_text": "official documentation"}, {"url": "https://twitter.com/koehrsen_will", "anchor_text": "@koehrsen_will"}, {"url": "https://medium.com/tag/data-science?source=post_page-----37a1aade7924---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/programming?source=post_page-----37a1aade7924---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/tag/education?source=post_page-----37a1aade7924---------------education-----------------", "anchor_text": "Education"}, {"url": "https://medium.com/tag/computer-science?source=post_page-----37a1aade7924---------------computer_science-----------------", "anchor_text": "Computer Science"}, {"url": "https://medium.com/tag/towards-data-science?source=post_page-----37a1aade7924---------------towards_data_science-----------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F37a1aade7924&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fweb-scraping-regular-expressions-and-data-visualization-doing-it-all-in-python-37a1aade7924&user=Will+Koehrsen&userId=e2f299e30cb9&source=-----37a1aade7924---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F37a1aade7924&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fweb-scraping-regular-expressions-and-data-visualization-doing-it-all-in-python-37a1aade7924&user=Will+Koehrsen&userId=e2f299e30cb9&source=-----37a1aade7924---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F37a1aade7924&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fweb-scraping-regular-expressions-and-data-visualization-doing-it-all-in-python-37a1aade7924&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----37a1aade7924--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F37a1aade7924&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fweb-scraping-regular-expressions-and-data-visualization-doing-it-all-in-python-37a1aade7924&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----37a1aade7924---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----37a1aade7924--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----37a1aade7924--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----37a1aade7924--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----37a1aade7924--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----37a1aade7924--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----37a1aade7924--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----37a1aade7924--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----37a1aade7924--------------------------------", "anchor_text": ""}, {"url": "https://williamkoehrsen.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://williamkoehrsen.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Will Koehrsen"}, {"url": "https://williamkoehrsen.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "38K Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fe2f299e30cb9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fweb-scraping-regular-expressions-and-data-visualization-doing-it-all-in-python-37a1aade7924&user=Will+Koehrsen&userId=e2f299e30cb9&source=post_page-e2f299e30cb9--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fe7d4a87a913e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fweb-scraping-regular-expressions-and-data-visualization-doing-it-all-in-python-37a1aade7924&newsletterV3=e2f299e30cb9&newsletterV3Id=e7d4a87a913e&user=Will+Koehrsen&userId=e2f299e30cb9&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}