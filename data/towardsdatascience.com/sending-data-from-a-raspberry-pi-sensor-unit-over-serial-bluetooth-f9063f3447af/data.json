{"url": "https://towardsdatascience.com/sending-data-from-a-raspberry-pi-sensor-unit-over-serial-bluetooth-f9063f3447af", "time": 1683011876.931902, "path": "towardsdatascience.com/sending-data-from-a-raspberry-pi-sensor-unit-over-serial-bluetooth-f9063f3447af/", "webpage": {"metadata": {"title": "Sending data from a Raspberry Pi Sensor unit over Serial-Bluetooth | by Daniel Ellis Research | Towards Data Science", "h1": "Sending data from a Raspberry Pi Sensor unit over Serial-Bluetooth", "description": "When building portable sensors we often want to calibrate and double-check their readings before allowing them to log data remotely. Whilst developing these we can easily SSH into them and write any\u2026"}, "outgoing_paragraph_urls": [], "all_paragraphs": ["When building portable sensors we often want to calibrate and double-check their readings before allowing them to log data remotely. Whilst developing these we can easily SSH into them and write any results to screen. However what happens when we are in a very remote part of the world, with no laptop, wifi or signal?", "Within this tutorial, we look at exploiting the Bluetooth capabilities of a Raspberry Pi Zero (without WiFi) to transmit the initial set of results to a handheld device of our choosing. In our case, it will be through the use of a mobile phone or android tablet, such that we can compare the sensor and GPS readings.", "Before we start there are a couple of changes required for the Bluetooth to work. These are outlined below.", "We begin by changing the configuration of the installed Bluetooth library:", "Here we locate the line starting ExecStart , and replace it with the following:", "Having added the \u2018compatibility\u2019 flag, we now have to restart the Bluetooth service on the Pi:", "To prevent issues with pairing Bluetooth devices whilst out in the field, it is always a good idea to pre-pair devices \u2014 saving their configuration.", "To do this we use bluetoothctl following the process described in the link below:", "This gives results in the format:", "2. select the device we want and copy its address.", "4. In the Bluetooth console run the following 3 commands (substituting your copied address):", "When pairing you may be asked to confirm a pin on both devices. trust saves the device address to the trusted list.", "To make a PI discoverable on boot, you can have a look at the code here:", "Finally, we wish to tell the device to watch for incoming Bluetooth connections when it boots. To do this we can add the following file to /etc/rc.local (before the exit command).", "Take care to include the ampersand at the end, as otherwise, it will stall the device bootup process. Also if you are reading another device over serial, e.g. a GPS receiver, you may want to use rfcomm1 instead of hci0 (rfcomm0).", "Depending on what device you are using, the method to read from a serial monitor varies. On an android device, you may take the node/javascript approach (this should work on all operating systems!). For the purpose of this demo, I will describe a method using python to check things are working on a MacBook Pro.", "If you have a terminal, the simplest way to do this is to type", "and hit the tab (autocomplete) button.", "Presuming you have not changed this, this should be your device hostname followed by SerialPort. The default serial port path for a freshly installed raspberry pi should be", "To read any data received, we can use the python serial library coupled with the following code snippet.", "Note that this is an infinite loop that keeps printing anything it receives. To cancel it when the message \u2018exit\u2019 is received we can use:", "When testing the simplest way to send data is to echo it to /dev/rgcomm0 from the raspberry pi shell. This allows us to manually test communication over the port before writing anything more complicated.", "If reading data from the raspberry pi and pre-processing it, chances are we will be using python to do the heavy lifting. From here we can treat the rfcomm0 channel as a file and write to it as follows:", "If we want to quickly check that our sensors are behaving whilst out in the field, we can make use of the Bluetooth capabilities of the Raspberry Pi. This is done by creating a Bluetooth serial port and sending data over it. Such methods are particularly useful if we do not wish to carry bulky laptops, or where a WiFi network is occupied or unavailable.", "More complex tasks such as sending commands to the Raspberry Pi, or even SSHing into it over Bluetooth are also possible but are beyond the scope of this tutorial.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Research Software Engineer specialising in High-Performance Computing and Data Visualisation. \u2014 PhD in Atmospheric Chemistry and Masters in Theoretical Physics."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Ff9063f3447af&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsending-data-from-a-raspberry-pi-sensor-unit-over-serial-bluetooth-f9063f3447af&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsending-data-from-a-raspberry-pi-sensor-unit-over-serial-bluetooth-f9063f3447af&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsending-data-from-a-raspberry-pi-sensor-unit-over-serial-bluetooth-f9063f3447af&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsending-data-from-a-raspberry-pi-sensor-unit-over-serial-bluetooth-f9063f3447af&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----f9063f3447af--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----f9063f3447af--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://daniel-ellis.medium.com/?source=post_page-----f9063f3447af--------------------------------", "anchor_text": ""}, {"url": "https://daniel-ellis.medium.com/?source=post_page-----f9063f3447af--------------------------------", "anchor_text": "Daniel Ellis Research"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F5e126beaa2dc&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsending-data-from-a-raspberry-pi-sensor-unit-over-serial-bluetooth-f9063f3447af&user=Daniel+Ellis+Research&userId=5e126beaa2dc&source=post_page-5e126beaa2dc----f9063f3447af---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ff9063f3447af&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsending-data-from-a-raspberry-pi-sensor-unit-over-serial-bluetooth-f9063f3447af&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ff9063f3447af&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsending-data-from-a-raspberry-pi-sensor-unit-over-serial-bluetooth-f9063f3447af&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@samuelchenard?utm_source=medium&utm_medium=referral", "anchor_text": "Samuel Chenard"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://medium.com/cemac/pairing-a-bluetooth-device-using-a-terminal-1bfe267db35", "anchor_text": "Pairing a Bluetooth device using a terminalIn using a raspberry pi zero, you are limited on USB ports. Instead of having to always have a USB hub connected to the\u2026medium.com"}, {"url": "https://medium.com/cemac/keep-bluetooth-discoverable-rpi-unix-bbe1c9ecbdb6", "anchor_text": "Keep Bluetooth discoverable (RPI / Unix )How to enable Bluetooth visibility and pair from the boot.medium.com"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Ff9063f3447af&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsending-data-from-a-raspberry-pi-sensor-unit-over-serial-bluetooth-f9063f3447af&user=Daniel+Ellis+Research&userId=5e126beaa2dc&source=-----f9063f3447af---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Ff9063f3447af&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsending-data-from-a-raspberry-pi-sensor-unit-over-serial-bluetooth-f9063f3447af&user=Daniel+Ellis+Research&userId=5e126beaa2dc&source=-----f9063f3447af---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ff9063f3447af&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsending-data-from-a-raspberry-pi-sensor-unit-over-serial-bluetooth-f9063f3447af&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----f9063f3447af--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Ff9063f3447af&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsending-data-from-a-raspberry-pi-sensor-unit-over-serial-bluetooth-f9063f3447af&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----f9063f3447af---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----f9063f3447af--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----f9063f3447af--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----f9063f3447af--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----f9063f3447af--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----f9063f3447af--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----f9063f3447af--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----f9063f3447af--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----f9063f3447af--------------------------------", "anchor_text": ""}, {"url": "https://daniel-ellis.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://daniel-ellis.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Daniel Ellis Research"}, {"url": "https://daniel-ellis.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "335 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F5e126beaa2dc&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsending-data-from-a-raspberry-pi-sensor-unit-over-serial-bluetooth-f9063f3447af&user=Daniel+Ellis+Research&userId=5e126beaa2dc&source=post_page-5e126beaa2dc--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F96febf952620&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsending-data-from-a-raspberry-pi-sensor-unit-over-serial-bluetooth-f9063f3447af&newsletterV3=5e126beaa2dc&newsletterV3Id=96febf952620&user=Daniel+Ellis+Research&userId=5e126beaa2dc&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}