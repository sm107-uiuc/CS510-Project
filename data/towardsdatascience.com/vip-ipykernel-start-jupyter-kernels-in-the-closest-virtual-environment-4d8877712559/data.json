{"url": "https://towardsdatascience.com/vip-ipykernel-start-jupyter-kernels-in-the-closest-virtual-environment-4d8877712559", "time": 1683017852.125618, "path": "towardsdatascience.com/vip-ipykernel-start-jupyter-kernels-in-the-closest-virtual-environment-4d8877712559/", "webpage": {"metadata": {"title": "ViP-IPykernel: Start Jupyter Kernels in the Closest Venv | Towards Data Science", "h1": "ViP-IPykernel: Start Jupyter Kernels in the Closest Virtual Environment", "description": "Venvs are essential for robust analysis, but juggling them when using Jupyter can be overwhelming, ViP-IPykernel aims to help"}, "outgoing_paragraph_urls": [{"url": "http://github.com/RobertRosca/vip-ipykernel", "anchor_text": "RobertRosca/vip-ipykernel", "paragraph_index": 2}, {"url": "https://github.com/robertrosca/vip-ipykernel", "anchor_text": "ViP-IPykernel", "paragraph_index": 8}, {"url": "https://pypi.org/project/vip-ipykernel/", "anchor_text": "available on PyPI", "paragraph_index": 15}, {"url": "https://github.com/RobertRosca/vip-ipykernel", "anchor_text": "RobertRosca/vip-ipykernel", "paragraph_index": 15}], "all_paragraphs": ["Reproducibility has been a hot topic for years in STEM subjects, more and more people are realising how important it is for your work to be reproducible, both from a purely scientific point of view but also as a way to facilitate and improve collaboration between colleagues.", "When using Python, an essential element of having reproducible work is using well defined isolated environments so that you can be sure of what packages are available and required for your code to execute correctly.", "A common way to do this is to use Python venv \u2018s, however using Jupyter Notebooks with virtual environments can be a bit awkward for a few reasons, this post will go through these problems and explain how ViP-IPykernel tries to help avoid them. If you\u2019re already thinking that notebook automatically using the virtual environment they\u2019re in would be helpful then feel free to skip the explanation and check out the project here: RobertRosca/vip-ipykernel", "Many people will install Jupyter under their users home directory (i.e. with the pip install --user flag), or use a system provided Jupyter installation. If you do this, and then use virtual environments to isolate your projects you have a few options:", "The first approach has the downside of being a bit time consuming, Jupyter has a lot of dependencies, and it also adds in the additional step of always having to activate the correct environment before starting Jupyter. Mild inconveniences like these add up over time and create a barrier which may discourage people from using best practices, even if they know they should create an environment for each separate project. Plus if you\u2019re using a remote or centralised Jupyter-Hub server this isn\u2019t really an option.", "The second approach has a similar downside of the mild inconvenience of having to install IPykernel in every environment, and then having to create a new kernel for each project; if you have a lot of projects you can quickly end up with dozens of kernels, and if you don\u2019t have a good naming system you may accidentally end up overwriting them or forgetting what does what.", "Additionally, setting a custom kernel for each notebook can impact collaboration negatively in a few ways:", "These seem like minor problems, but if you work with notebooks daily, or if you\u2019re trying out Jupyter notebooks for the first time, these small annoyances can be enough to make you think \u201cEh, I can\u2019t be bothered to make another kernel, using a venv isn\u2019t that important anyway\u201d.", "Which brings me to ViP-IPykernel: an IPython kernel which automatically runs python out of a Virtualenv in a Parent directory (hence ViP).", "The project is pretty simple, all it does is look for a virtual environment (currently only checks for .venv or venv directories but this will be expanded later) and if one is found in the directory the notebook is in, or in one of the parent directories, it runs IPykernel out of that environment automatically. If no venv is found then it falls back to the python environment vip-ipykernel was installed with.", "If you want the kernel to fall back to the standard Python kernel behaviour when no environment is found then this kernel should be installed under your user space, not inside a virtual environment, alternatively, it can be installed inside a venv if you\u2019d like the fallback to be to a different environment to your users one.", "After installation, you can then either override the default python3 kernel with vip-ipykernel or install it as a separate kernel:", "Overriding the default kernel is a useful approach as that way you never have to change the kernel a notebook is using: leave it as the default python3 kernel and as long as the notebook is in a directory or subdirectory where a .venv exists it will always use that environment, avoiding both the issues of creating a kernel or installing Jupyter for every environment.", "This way you get the best of both worlds, you can use virtual environments to manage your dependencies, and you don\u2019t have to juggle multiple kernels or run Jupyter out of a specific environment each time.", "Small quality of life improvements like this are pretty trivial, but when trying to convince others (or yourself) to change workflows and muscle memory built up and reinforced by years of experience, any small perceived downside can be seen as \u2018enough\u2019 of a reason to stick with what you\u2019ve always done.", "If this sounds useful to you, the project is available on PyPI and can be installed via pip, or you can view the code here: RobertRosca/vip-ipykernel", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Research Software Engineer at the European XFEL, interests in HPC scientific data analysis, reproducibility, and the democratization of science"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F4d8877712559&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvip-ipykernel-start-jupyter-kernels-in-the-closest-virtual-environment-4d8877712559&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvip-ipykernel-start-jupyter-kernels-in-the-closest-virtual-environment-4d8877712559&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvip-ipykernel-start-jupyter-kernels-in-the-closest-virtual-environment-4d8877712559&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvip-ipykernel-start-jupyter-kernels-in-the-closest-virtual-environment-4d8877712559&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://me.dm/@robertrosca", "anchor_text": "Mastodon"}, {"url": "https://towardsdatascience.com/?source=post_page-----4d8877712559--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----4d8877712559--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://robertrosca.medium.com/?source=post_page-----4d8877712559--------------------------------", "anchor_text": ""}, {"url": "https://robertrosca.medium.com/?source=post_page-----4d8877712559--------------------------------", "anchor_text": "Robert Rosca"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F70c48aa40f3e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvip-ipykernel-start-jupyter-kernels-in-the-closest-virtual-environment-4d8877712559&user=Robert+Rosca&userId=70c48aa40f3e&source=post_page-70c48aa40f3e----4d8877712559---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F4d8877712559&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvip-ipykernel-start-jupyter-kernels-in-the-closest-virtual-environment-4d8877712559&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F4d8877712559&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvip-ipykernel-start-jupyter-kernels-in-the-closest-virtual-environment-4d8877712559&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@henniestander?utm_source=medium&utm_medium=referral", "anchor_text": "Hennie Stander"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "http://github.com/RobertRosca/vip-ipykernel", "anchor_text": "RobertRosca/vip-ipykernel"}, {"url": "https://github.com/robertrosca/vip-ipykernel", "anchor_text": "ViP-IPykernel"}, {"url": "https://pypi.org/project/vip-ipykernel/", "anchor_text": "available on PyPI"}, {"url": "https://github.com/RobertRosca/vip-ipykernel", "anchor_text": "RobertRosca/vip-ipykernel"}, {"url": "https://medium.com/tag/jupyter-notebook?source=post_page-----4d8877712559---------------jupyter_notebook-----------------", "anchor_text": "Jupyter Notebook"}, {"url": "https://medium.com/tag/virtual-environment?source=post_page-----4d8877712559---------------virtual_environment-----------------", "anchor_text": "Virtual Environment"}, {"url": "https://medium.com/tag/python?source=post_page-----4d8877712559---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/reproducibility?source=post_page-----4d8877712559---------------reproducibility-----------------", "anchor_text": "Reproducibility"}, {"url": "https://medium.com/tag/data-science?source=post_page-----4d8877712559---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F4d8877712559&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvip-ipykernel-start-jupyter-kernels-in-the-closest-virtual-environment-4d8877712559&user=Robert+Rosca&userId=70c48aa40f3e&source=-----4d8877712559---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F4d8877712559&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvip-ipykernel-start-jupyter-kernels-in-the-closest-virtual-environment-4d8877712559&user=Robert+Rosca&userId=70c48aa40f3e&source=-----4d8877712559---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F4d8877712559&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvip-ipykernel-start-jupyter-kernels-in-the-closest-virtual-environment-4d8877712559&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----4d8877712559--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F4d8877712559&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvip-ipykernel-start-jupyter-kernels-in-the-closest-virtual-environment-4d8877712559&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----4d8877712559---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----4d8877712559--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----4d8877712559--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----4d8877712559--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----4d8877712559--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----4d8877712559--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----4d8877712559--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----4d8877712559--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----4d8877712559--------------------------------", "anchor_text": ""}, {"url": "https://robertrosca.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://robertrosca.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Robert Rosca"}, {"url": "https://robertrosca.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "14 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F70c48aa40f3e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvip-ipykernel-start-jupyter-kernels-in-the-closest-virtual-environment-4d8877712559&user=Robert+Rosca&userId=70c48aa40f3e&source=post_page-70c48aa40f3e--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fusers%2F70c48aa40f3e%2Flazily-enable-writer-subscription&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvip-ipykernel-start-jupyter-kernels-in-the-closest-virtual-environment-4d8877712559&user=Robert+Rosca&userId=70c48aa40f3e&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}