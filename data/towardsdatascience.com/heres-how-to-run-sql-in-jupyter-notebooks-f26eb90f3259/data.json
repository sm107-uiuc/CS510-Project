{"url": "https://towardsdatascience.com/heres-how-to-run-sql-in-jupyter-notebooks-f26eb90f3259", "time": 1683003015.243624, "path": "towardsdatascience.com/heres-how-to-run-sql-in-jupyter-notebooks-f26eb90f3259/", "webpage": {"metadata": {"title": "Here\u2019s How to Run SQL in Jupyter Notebooks | by Dario Rade\u010di\u0107 | Towards Data Science", "h1": "Here\u2019s How to Run SQL in Jupyter Notebooks", "description": "Let\u2019s face the facts \u2014 databases are everywhere. Even though, when learning data science you\u2019ve only dealt with CSVs, that will hardly resemble reality since most companies tend to store data into\u2026"}, "outgoing_paragraph_urls": [{"url": "https://medium.com/@radecicdario/membership", "anchor_text": "Medium member", "paragraph_index": 31}, {"url": "http://betterdatascience.com", "anchor_text": "betterdatascience.com", "paragraph_index": 33}], "all_paragraphs": ["Let\u2019s face the facts \u2014 databases are everywhere. Even though, when learning data science you\u2019ve only dealt with CSVs, that will hardly resemble reality since most companies tend to store data into databases.", "In today\u2019s article, I quickly want to go over the concept of using Jupyter Notebooks or JupyterLab as a SQL IDE. Prior to this, I\u2019ve worked with various Python libraries to connect to the database, but this nifty little trick will save you a bunch of time and typing.", "After reading the article you will be able to execute any SQL query/procedure directly through the Notebook, and also to store the result of any query to a variable you can then use later in your analysis.", "I don\u2019t want to dwell any more with the intro, let\u2019s jump straight into the good stuff.", "To begin, you\u2019ll need to install one library to make sure you can run SQL directly in the Notebooks, so paste the following into any Jupyter cell:", "When writing the article I was dealing with the Oracle database. If you are also, make sure cx_Oracle is installed. If not just quickly look online for a required library. In my opinion, those would be:", "Now we will use the sqlalchemy library to create an engine needed to connect to the database. This will be required only once per connection string \u2014 meaning you won\u2019t have to do it each time when making a connection.", "Here are some general-looking connection strings for various databases:", "Here\u2019 an example for Oracle DB:", "Now we can load in previously installed SQL module:", "And connect to the database with a connection string specified earlier. Notice how the column content is prefixed with the percent sign:", "If you\u2019ve got the same output as I did it means that everything went well and you are good to proceed!", "Okay, now you\u2019re ready to go. To start out I\u2019ll show how to pass a multi-line SQL query to a Juypter cell. Without this magic commands, you would have to import various libraries, make a connection to the database, surround the query with brackets and then execute it, but now it\u2019s just a matter of prefixing the code with %%sql or %sql which I will demonstrate below.", "Let\u2019s start with this one, as it will allow you to enter multi-line SQL statements. The only requirement is to make a %%sql prefix on the start. I\u2019ve decided to select the first five rows from some table:", "And yeah, that\u2019s it! If you were to execute this cell this is the output you\u2019d get:", "It kind of looks like a Pandas DataFrame, but it isn\u2019t, it only showcases how the table looks.", "You are not limited to multi-line statements, and you can store the result of a SQL query to a variable. Here you will have only one percent sign instead of two: %sql", "Let\u2019s see this in action \u2014 I\u2019m going to select a single value from a phone_number column:", "You can see that if I print it, the output isn\u2019t something you\u2019d expect, and here\u2019s how to address that issue:", "It was just a matter of simple indexing, nothing to be worried about.", "It\u2019s been all fun and games until now, but you might be wondering what else ipython-sql can provide to us. Well, a lot, and I\u2019m gonna cover two things. This won't blow your mind but are a good thing to know. Let\u2019s start.", "It\u2019s just one nice additional feature of ipython-sql saving you a bit of time so you don\u2019t have to make the conversion manually. I will select some set of data from the database and then call .DataFrame() method of it:", "We can now check both the DataFrame and its type, just to verify everything is as expected:", "Yeah, the data look right, the type is okay, so we can proceed.", "Let\u2019s say you\u2019re in a hurry and want to quickly fetch some data from a database and make a bar chart. To demonstrate, I\u2019ll import matplotlib and make everything a bit bigger just for the sake of it, and then store a result of some SQL query to a variable.", "Once done, you can call .bar() method to make a bar chart:", "And the corresponding plot would look like this:", "That\u2019s quite nice for just a line of code, plotting-wise. Note that you could also use .pie() to show a pie chart \u2014 feel free to look for other options on your own.", "I don\u2019t think that anything from the article had a wow-factor for you, but I also hope that you can appreciate the simplicity of performing database queries in this format.", "This could also be an alternative to standard SQL IDE\u2019s if performing queries is all you do and there\u2019s no need for anything more advanced.", "Anyhow, I hope you\u2019ve managed to get something useful from the article. Thanks for reading.", "Loved the article? Become a Medium member to continue learning without limits. I\u2019ll receive a portion of your membership fee if you use the following link, with no extra cost to you.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Data Scientist & Tech Writer | betterdatascience.com"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Ff26eb90f3259&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fheres-how-to-run-sql-in-jupyter-notebooks-f26eb90f3259&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fheres-how-to-run-sql-in-jupyter-notebooks-f26eb90f3259&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fheres-how-to-run-sql-in-jupyter-notebooks-f26eb90f3259&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fheres-how-to-run-sql-in-jupyter-notebooks-f26eb90f3259&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----f26eb90f3259--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----f26eb90f3259--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@radecicdario?source=post_page-----f26eb90f3259--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@radecicdario?source=post_page-----f26eb90f3259--------------------------------", "anchor_text": "Dario Rade\u010di\u0107"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F689ba04bb8be&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fheres-how-to-run-sql-in-jupyter-notebooks-f26eb90f3259&user=Dario+Rade%C4%8Di%C4%87&userId=689ba04bb8be&source=post_page-689ba04bb8be----f26eb90f3259---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ff26eb90f3259&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fheres-how-to-run-sql-in-jupyter-notebooks-f26eb90f3259&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ff26eb90f3259&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fheres-how-to-run-sql-in-jupyter-notebooks-f26eb90f3259&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://medium.com/@radecicdario/membership", "anchor_text": "Medium member"}, {"url": "https://medium.com/@radecicdario/membership", "anchor_text": "Join Medium with my referral link - Dario Rade\u010di\u0107As a Medium member, a portion of your membership fee goes to writers you read, and you get full access to every story\u2026medium.com"}, {"url": "https://medium.com/tag/data-science?source=post_page-----f26eb90f3259---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----f26eb90f3259---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/tag/artificial-intelligence?source=post_page-----f26eb90f3259---------------artificial_intelligence-----------------", "anchor_text": "Artificial Intelligence"}, {"url": "https://medium.com/tag/sql?source=post_page-----f26eb90f3259---------------sql-----------------", "anchor_text": "Sql"}, {"url": "https://medium.com/tag/programming?source=post_page-----f26eb90f3259---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Ff26eb90f3259&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fheres-how-to-run-sql-in-jupyter-notebooks-f26eb90f3259&user=Dario+Rade%C4%8Di%C4%87&userId=689ba04bb8be&source=-----f26eb90f3259---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Ff26eb90f3259&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fheres-how-to-run-sql-in-jupyter-notebooks-f26eb90f3259&user=Dario+Rade%C4%8Di%C4%87&userId=689ba04bb8be&source=-----f26eb90f3259---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ff26eb90f3259&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fheres-how-to-run-sql-in-jupyter-notebooks-f26eb90f3259&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----f26eb90f3259--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Ff26eb90f3259&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fheres-how-to-run-sql-in-jupyter-notebooks-f26eb90f3259&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----f26eb90f3259---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----f26eb90f3259--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----f26eb90f3259--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----f26eb90f3259--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----f26eb90f3259--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----f26eb90f3259--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----f26eb90f3259--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----f26eb90f3259--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----f26eb90f3259--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@radecicdario?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@radecicdario?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Dario Rade\u010di\u0107"}, {"url": "https://medium.com/@radecicdario/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "39K Followers"}, {"url": "http://betterdatascience.com", "anchor_text": "betterdatascience.com"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F689ba04bb8be&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fheres-how-to-run-sql-in-jupyter-notebooks-f26eb90f3259&user=Dario+Rade%C4%8Di%C4%87&userId=689ba04bb8be&source=post_page-689ba04bb8be--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F33e2fb82c727&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fheres-how-to-run-sql-in-jupyter-notebooks-f26eb90f3259&newsletterV3=689ba04bb8be&newsletterV3Id=33e2fb82c727&user=Dario+Rade%C4%8Di%C4%87&userId=689ba04bb8be&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://amzn.to/400ZUtX", "anchor_text": "Machine Learning Automation with TPOT: Build, validate, and deploy fully automated machine learning models with Python2021"}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}