{"url": "https://towardsdatascience.com/effective-data-filtering-in-pandas-using-loc-40eb815455b6", "time": 1683004209.730416, "path": "towardsdatascience.com/effective-data-filtering-in-pandas-using-loc-40eb815455b6/", "webpage": {"metadata": {"title": "Effective Data Filtering in Pandas Using .loc[] | by Yong Cui | Towards Data Science", "h1": "Effective Data Filtering in Pandas Using .loc[]", "description": "Pandas is one of the most popular Python packages for data science research. It has a wide collection of powerful methods designed to process structured data. One routine task in processing these\u2026"}, "outgoing_paragraph_urls": [{"url": "https://towardsdatascience.com/getting-started-with-jupyter-notebooks-in-visual-studio-code-5dcccb3f739b", "anchor_text": "previous article", "paragraph_index": 1}, {"url": "https://www.kaggle.com/selfishgene/historical-hourly-weather-data#city_attributes.csv", "anchor_text": "Kaggle", "paragraph_index": 2}, {"url": "https://www.manning.com/books/python-how-to", "anchor_text": "https://www.manning.com/books/python-how-to", "paragraph_index": 13}], "all_paragraphs": ["Pandas is one of the most popular Python packages for data science research. It has a wide collection of powerful methods designed to process structured data. One routine task in processing these data tables (i.e., DataFrame in pandas) is to filter the data that meet a certain pre-defined criterion. In my own research, I often use the loc property of a DataFrame to filter data, among various filtering approaches. In this article, I\u2019m showing you how we can use .loc[] for effective data filtering.", "Assuming that you have built your own IDE and installed Python and pandas on your computer, the basic setup step is shown below. See my previous article if you want to try running Jupyter Notebook in Visual Studio Code.", "First, I imported pandas into the Notebook. For the purpose of the current tutorial, I downloaded the city_attributes.csv dataset from Kaggle. This dataset has 4 columns: City, Country, Latitude, and Longitude. When I imported the file, I set the City to be the index for more meaningful indexing later on.", "It\u2019s always a good idea to take a look at the data set that we\u2019re working on before we do any data processing. To do that, I just used sample() and shape to get 2 random rows and check the size of the DataFrame, which shows us the data has 36 records.", "The first method is to use the labels to filter the data. Here are a few examples. As you can see, we just specify the labels for the rows and the columns, and specific data records that match these labels will be shown.", "There are a couple of things to highlight from the above code snippet.", "Another common method is using the ranges of row and column labels. Some examples are shown below. Similarly, as above, we can set one or two ranges, with the former showing all columns and the latter showing the columns in the range.", "One effective method to filter data is to use a list of boolean values that match the length of the axis we\u2019re working on. For example, in the following code, we were able to filter the data by showing the cities in Canada only. Specifically, we created a series of boolean values by comparing the Country\u2019s value to the string \u2018Canada\u2019, and the length of this Series matches the row number of the DataFrame. As pandas evaluates True to be 1, when we requested the sum of this Series, we got 3, which is exactly the number of rows we got by running cities.loc[cities[\u2018Country\u2019]==\u2018Canada\u2019].", "Certainly, we can have a more complicated boolean evaluation expression. An example is given below.", "Sometimes, we need to have a more advanced criterion for data filtering, in which case we can use lambdas as the example shown below. In the lambda function, we specify the parameter called row, which refers to the Series in the DataFrame, such that we can then evaluate it to generate the boolean list as we did above. In other words, this method is built on the data filtering method using the booleans, although they\u2019re conceptually different.", "If we want to have more criteria to set, we can even write a function for data filtering. Like shown below, we have a function called filtering_cities(), which evaluates multiple criteria and returns a list of boolean values that can be used to filter the data. We\u2019ll simply set this function in the loc[] to filter the data.", "This article shows you how we can use just loc[] to effectively filter the data using multiple ways. Certainly, this tutorial just provides a proof of concept by covering the basic elements in data filtering using loc[], and there are several other data filtering approaches that we can explore together later.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Work at the nexus of biomedicine, data science & mobile dev. Author of Python How-to by Manning (https://www.manning.com/books/python-how-to)."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F40eb815455b6&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Feffective-data-filtering-in-pandas-using-loc-40eb815455b6&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Feffective-data-filtering-in-pandas-using-loc-40eb815455b6&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Feffective-data-filtering-in-pandas-using-loc-40eb815455b6&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Feffective-data-filtering-in-pandas-using-loc-40eb815455b6&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----40eb815455b6--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----40eb815455b6--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://yongcui01.medium.com/?source=post_page-----40eb815455b6--------------------------------", "anchor_text": ""}, {"url": "https://yongcui01.medium.com/?source=post_page-----40eb815455b6--------------------------------", "anchor_text": "Yong Cui"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F88ff1e2545d0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Feffective-data-filtering-in-pandas-using-loc-40eb815455b6&user=Yong+Cui&userId=88ff1e2545d0&source=post_page-88ff1e2545d0----40eb815455b6---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F40eb815455b6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Feffective-data-filtering-in-pandas-using-loc-40eb815455b6&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F40eb815455b6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Feffective-data-filtering-in-pandas-using-loc-40eb815455b6&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@wadeaustinellis?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Wade Austin Ellis"}, {"url": "https://unsplash.com/s/photos/filter?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Unsplash"}, {"url": "https://towardsdatascience.com/getting-started-with-jupyter-notebooks-in-visual-studio-code-5dcccb3f739b", "anchor_text": "previous article"}, {"url": "https://www.kaggle.com/selfishgene/historical-hourly-weather-data#city_attributes.csv", "anchor_text": "Kaggle"}, {"url": "https://medium.com/tag/programming?source=post_page-----40eb815455b6---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/tag/data-science?source=post_page-----40eb815455b6---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/pandas?source=post_page-----40eb815455b6---------------pandas-----------------", "anchor_text": "Pandas"}, {"url": "https://medium.com/tag/python?source=post_page-----40eb815455b6---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/towards-data-science?source=post_page-----40eb815455b6---------------towards_data_science-----------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F40eb815455b6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Feffective-data-filtering-in-pandas-using-loc-40eb815455b6&user=Yong+Cui&userId=88ff1e2545d0&source=-----40eb815455b6---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F40eb815455b6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Feffective-data-filtering-in-pandas-using-loc-40eb815455b6&user=Yong+Cui&userId=88ff1e2545d0&source=-----40eb815455b6---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F40eb815455b6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Feffective-data-filtering-in-pandas-using-loc-40eb815455b6&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----40eb815455b6--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F40eb815455b6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Feffective-data-filtering-in-pandas-using-loc-40eb815455b6&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----40eb815455b6---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----40eb815455b6--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----40eb815455b6--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----40eb815455b6--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----40eb815455b6--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----40eb815455b6--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----40eb815455b6--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----40eb815455b6--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----40eb815455b6--------------------------------", "anchor_text": ""}, {"url": "https://yongcui01.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://yongcui01.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Yong Cui"}, {"url": "https://yongcui01.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "5.5K Followers"}, {"url": "https://www.manning.com/books/python-how-to", "anchor_text": "https://www.manning.com/books/python-how-to"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F88ff1e2545d0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Feffective-data-filtering-in-pandas-using-loc-40eb815455b6&user=Yong+Cui&userId=88ff1e2545d0&source=post_page-88ff1e2545d0--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fef441bd78519&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Feffective-data-filtering-in-pandas-using-loc-40eb815455b6&newsletterV3=88ff1e2545d0&newsletterV3Id=ef441bd78519&user=Yong+Cui&userId=88ff1e2545d0&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://www.manning.com/books/python-how-to", "anchor_text": "Python How-To2023"}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}