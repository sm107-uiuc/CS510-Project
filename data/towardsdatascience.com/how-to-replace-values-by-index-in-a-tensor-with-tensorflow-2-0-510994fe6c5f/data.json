{"url": "https://towardsdatascience.com/how-to-replace-values-by-index-in-a-tensor-with-tensorflow-2-0-510994fe6c5f", "time": 1683001514.451815, "path": "towardsdatascience.com/how-to-replace-values-by-index-in-a-tensor-with-tensorflow-2-0-510994fe6c5f/", "webpage": {"metadata": {"title": "How to Replace Values by Index in a Tensor with TensorFlow-2.0 | by Riccardo Di Sipio | Towards Data Science", "h1": "How to Replace Values by Index in a Tensor with TensorFlow-2.0", "description": "A more involved use case may be, for example, to clip to a maximum all values above a certain threshold: It turns out that this apparently straightforward operation is not permitted in TensorFlow if\u2026"}, "outgoing_paragraph_urls": [{"url": "https://www.tensorflow.org/api_docs/python/tf/Variable", "anchor_text": "tf.Variable", "paragraph_index": 2}, {"url": "https://stackoverflow.com/questions/42883415/how-to-replace-a-value-within-a-tensor-by-indices?noredirect=1&lq=1", "anchor_text": "this one", "paragraph_index": 3}], "all_paragraphs": ["Have you ever tried to replace only certain values of array, based on their indices?", "A more involved use case may be, for example, to clip to a maximum all values above a certain threshold:", "It turns out that this apparently straightforward operation is not permitted in TensorFlow if the array is represented by a tensor (but it is if the array is a tf.Variable object). If you try, the most likely outcome is an error like this:", "As a matter of fact, I must admit it took a long time to figure out how to solve this problem that pops up quite often. There\u2019s a number of questions on StackOverflow where people discussed the same issue (see this one for example). I think the easiest way to see this operation in the light of TensorFlow operations is to filter the elements that one wants to keep in one vector, create another vector to \u201cfill the blanks\u201d with the masked values that one wants to replace (e.g. zero, infinity, some other default value), and finally give the result as the sum of the two.", "I\u2019m giving here an example to filter the top-k elements of a vector, but the procedure is quite general and involves the following steps:", "Here\u2019s an example of the code:", "Admittedly, at least for some specific cases such as the clipping described above, there exists a quicker solution based on the three-argument version of tf.where:", "The returned tensor contains elements of x where the condition is True and elements of y where the condition is False. So in our case the above function can be compacted to something like:", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "NLP Machine Learning engineer at Ceridian. Formerly physicist at U Toronto, Bologna, CERN LHC/ATLAS."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F510994fe6c5f&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-replace-values-by-index-in-a-tensor-with-tensorflow-2-0-510994fe6c5f&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-replace-values-by-index-in-a-tensor-with-tensorflow-2-0-510994fe6c5f&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-replace-values-by-index-in-a-tensor-with-tensorflow-2-0-510994fe6c5f&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-replace-values-by-index-in-a-tensor-with-tensorflow-2-0-510994fe6c5f&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----510994fe6c5f--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----510994fe6c5f--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://riccardo-disipio.medium.com/?source=post_page-----510994fe6c5f--------------------------------", "anchor_text": ""}, {"url": "https://riccardo-disipio.medium.com/?source=post_page-----510994fe6c5f--------------------------------", "anchor_text": "Riccardo Di Sipio"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F4267d9884285&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-replace-values-by-index-in-a-tensor-with-tensorflow-2-0-510994fe6c5f&user=Riccardo+Di+Sipio&userId=4267d9884285&source=post_page-4267d9884285----510994fe6c5f---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F510994fe6c5f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-replace-values-by-index-in-a-tensor-with-tensorflow-2-0-510994fe6c5f&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F510994fe6c5f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-replace-values-by-index-in-a-tensor-with-tensorflow-2-0-510994fe6c5f&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://www.tensorflow.org/api_docs/python/tf/Variable", "anchor_text": "tf.Variable"}, {"url": "https://stackoverflow.com/questions/42883415/how-to-replace-a-value-within-a-tensor-by-indices?noredirect=1&lq=1", "anchor_text": "this one"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----510994fe6c5f---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/tag/tensorflow?source=post_page-----510994fe6c5f---------------tensorflow-----------------", "anchor_text": "TensorFlow"}, {"url": "https://medium.com/tag/arrays?source=post_page-----510994fe6c5f---------------arrays-----------------", "anchor_text": "Arrays"}, {"url": "https://medium.com/tag/numpy-array?source=post_page-----510994fe6c5f---------------numpy_array-----------------", "anchor_text": "Numpy Array"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F510994fe6c5f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-replace-values-by-index-in-a-tensor-with-tensorflow-2-0-510994fe6c5f&user=Riccardo+Di+Sipio&userId=4267d9884285&source=-----510994fe6c5f---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F510994fe6c5f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-replace-values-by-index-in-a-tensor-with-tensorflow-2-0-510994fe6c5f&user=Riccardo+Di+Sipio&userId=4267d9884285&source=-----510994fe6c5f---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F510994fe6c5f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-replace-values-by-index-in-a-tensor-with-tensorflow-2-0-510994fe6c5f&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----510994fe6c5f--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F510994fe6c5f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-replace-values-by-index-in-a-tensor-with-tensorflow-2-0-510994fe6c5f&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----510994fe6c5f---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----510994fe6c5f--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----510994fe6c5f--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----510994fe6c5f--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----510994fe6c5f--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----510994fe6c5f--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----510994fe6c5f--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----510994fe6c5f--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----510994fe6c5f--------------------------------", "anchor_text": ""}, {"url": "https://riccardo-disipio.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://riccardo-disipio.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Riccardo Di Sipio"}, {"url": "https://riccardo-disipio.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "554 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F4267d9884285&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-replace-values-by-index-in-a-tensor-with-tensorflow-2-0-510994fe6c5f&user=Riccardo+Di+Sipio&userId=4267d9884285&source=post_page-4267d9884285--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fb32833879b5a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-replace-values-by-index-in-a-tensor-with-tensorflow-2-0-510994fe6c5f&newsletterV3=4267d9884285&newsletterV3Id=b32833879b5a&user=Riccardo+Di+Sipio&userId=4267d9884285&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}