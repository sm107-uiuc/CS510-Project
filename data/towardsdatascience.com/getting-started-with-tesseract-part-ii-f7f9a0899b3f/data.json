{"url": "https://towardsdatascience.com/getting-started-with-tesseract-part-ii-f7f9a0899b3f", "time": 1682993414.967623, "path": "towardsdatascience.com/getting-started-with-tesseract-part-ii-f7f9a0899b3f/", "webpage": {"metadata": {"title": "How to use image preprocessing to improve the accuracy of Tesseract | by Kaan Kuguoglu | Towards Data Science", "h1": "How to use image preprocessing to improve the accuracy of Tesseract", "description": "Previously, on How to get started with Tesseract, I gave you a practical quick-start tutorial on Tesseract using Python. It is a pretty simple overview, but it should help you get started with\u2026"}, "outgoing_paragraph_urls": [{"url": "https://medium.com/@bkaankuguoglu/getting-started-with-tesseract-part-i-2a6a6b1cf75e", "anchor_text": "How to get started with Tesseract", "paragraph_index": 0}, {"url": "https://medium.com/@bkaankuguoglu/getting-started-with-tesseract-part-i-2a6a6b1cf75e", "anchor_text": "the previous story", "paragraph_index": 1}, {"url": "https://docs.opencv.org/3.4.0/d4/d13/tutorial_py_filtering.html", "anchor_text": "OpenCV library", "paragraph_index": 6}, {"url": "https://docs.opencv.org/3.4.0/d7/d4d/tutorial_py_thresholding.html", "anchor_text": "OpenCV on Image Thresholding", "paragraph_index": 15}, {"url": "https://docs.opencv.org/3.4.0/d7/d4d/tutorial_py_thresholding.html", "anchor_text": "the official documentation for other thresholding methods.", "paragraph_index": 17}, {"url": "https://docs.opencv.org/3.4.0/d7/d4d/tutorial_py_thresholding.html", "anchor_text": "the official documentation", "paragraph_index": 23}, {"url": "https://www.jetbrains.com/pycharm/", "anchor_text": "PyCharm", "paragraph_index": 24}, {"url": "https://gist.github.com/bkaankuguoglu/111f9f5e0c30b5f57d7c5338d6dcb6fc", "anchor_text": "gist", "paragraph_index": 28}, {"url": "https://www.youtube.com/watch?v=B_CHjYoqPUU", "anchor_text": "*", "paragraph_index": 30}], "all_paragraphs": ["Previously, on How to get started with Tesseract, I gave you a practical quick-start tutorial on Tesseract using Python. It is a pretty simple overview, but it should help you get started with Tesseract and clear some hurdles I faced when I was in your shoes. Now, I\u2019m keen on showing you a few more tricks and stuff you can do with Tesseract and OpenCV to improve your overall accuracy.", "In the previous story, I didn\u2019t bother going into details for the most part. But if you liked the first story, here comes the sequel! So, where did we leave off?", "Ah, we had a brief overview of rescaling, noise removal, and binarization. Now, it\u2019s time to get down to details and show you a few settings you can play with.", "The images that are rescaled are either shrunk or enlarged. If you\u2019re interested in shrinking your image, INTER_AREA is the way to go for you. (Btw, the parameters fx and fy denote the scaling factor in the function below.)", "On the other hand, as in most cases, you may need to scale your image to a larger size to recognize small characters. In this case, INTER_CUBIC generally performs better than other alternatives, though it\u2019s slower than others.", "If you\u2019d like to trade off some of your image quality for faster performance, you may want to try INTER_LINEAR for enlarging images.", "It\u2019s worth mentioning that there are a few blur filters available in the OpenCV library. Image blurring is usually achieved by convolving the image with a low-pass filter kernel. While filters are usually used to blur the image or reduce noise, there are a few differences between them.", "After convolving an image with a normalized box filter, this takes the average of all the pixels under the kernel area and replaces the central element. It\u2019s pretty self-explanatory, I guess.", "This works similarly to Averaging, but it uses a Gaussian kernel, instead of a normalized box filter, for convolution. Here, the dimensions of the kernel and standard deviations in both directions can be determined independently. Gaussian blurring is very useful for removing \u2014 guess what? \u2014 gaussian noise from the image. On the contrary, gaussian blurring does not preserve the edges in the input.", "The central element in the kernel area is replaced with the median of all the pixels under the kernel. Particularly, this outperforms other blurring methods in removing salt-and-pepper noise in the images.", "Median blurring is a non-linear filter. Unlike linear filters, median blurring replaces the pixel values with the median value available in the neighborhood values. So, median blurring preserves edges as the median value must be the value of one of the neighboring pixels.", "Speaking of sharp edges, bilateral filtering is quite useful for removing the noise without smoothing the edges. Similar to Gaussian blurring, bilateral filtering also uses a gaussian filter to find the Gaussian weighted average in the neighborhood. However, it also takes pixel difference into account while blurring the nearby pixels.", "Thus, it ensures only those pixels with similar intensity to the central pixel are blurred, whereas the pixels with distinct pixel values are not blurred. In doing so, the edges that have larger intensity variation, so-called edges, are preserved.", "Overall, if you are interested in preserving the edges, go with median blurring or bilateral filtering. On the contrary, gaussian blurring is likely to be faster than median blurring. Due to its computational complexity, bilateral filtering is the slowest of all methods.", "There\u2019s not a single image thresholding method that fits all types of documents. In reality, all filters perform differently on varying images. For instance, while some filters successfully binarize some images, they may fail to binarize others. Likewise, some filters may work well with those images that other filters cannot binarize well.", "I\u2019ll try to cover the basics here, though I recommend that you read the official documentation of OpenCV on Image Thresholding for more information and the theory behind it.", "You might recall a friend of yours giving you some advice about your life by saying, \u201cthings are not always black and white.\u201d Well, for a simple threshold, things are pretty straightforward.", "First, you pick a threshold value, say 127. If the pixel value is greater than the threshold, it becomes black. If less, it becomes white. OpenCV provides us with different types of thresholding methods that can be passed as the fourth parameter. I often use binary threshold for most tasks, but you may visit the official documentation for other thresholding methods.", "Rather than setting one global threshold value, we let the algorithm calculate the threshold for small regions of the image. Thus, we end up having various threshold values for different image regions, which is great!", "There are two adaptive methods for calculating the threshold value. While Adaptive Thresh Mean returns the mean of the neighborhood area, Adaptive Gaussian Mean calculates the weighted sum of the neighborhood values.", "We\u2019ve got two more parameters that determine the size of the neighborhood area and the constant value subtracted from the result: the fifth and sixth parameters, respectively.", "This method particularly works well with bimodal images, which is an image whose histogram has two peaks. If this is the case, we might be keen on picking a threshold value between these peaks. This is what Otsu\u2019s Binarization actually does, though.", "It\u2019s pretty useful in some cases. But it may fail to binarize images that are not bimodal. So, please take this filter with a grain of salt.", "You might have already noticed there is a parameter, or in some cases a combination of a few parameters, that are passed as arguments to determine the type of thresholding, such as THRESH_BINARY. I\u2019m not going into detail here now, as it is explained clearly in the official documentation.", "So far, we\u2019ve discussed some of the techniques of image pre-processing. You might wonder when exactly you\u2019re going to get your hands dirty. Well, the time has come. Before you get back to your favorite Python IDE \u2014 mine is PyCharm, btw \u2014 I\u2019m going to show you few lines of code that will save you some time while trying to find which combination of filters and image manipulations works well with your documents.", "Let\u2019s start by defining a switcher function with a few combinations of thresholding filters and blurring methods. Once you get the idea, you could also add more filters, incorporating other image pre-processing methods like rescaling your filter set.", "Here I\u2019ve created 20 different combinations of image thresholding methods, blurring methods, and kernel sizes. The switcher function, apply_threshold, takes two arguments: OpenCV image and an integer that denotes the filter. Likewise, since this function returns the OpenCV image, it could easily be integrated into our get_string function from the previous post.", "Now, we need to write a simple for loop that iterates over the input directory to collect images and applies each filter on the images gathered. I prefer to use glob, or os, for collecting images from directories and argparse for passing arguments via terminal, as any other sane person would do.", "Here I\u2019ve done pretty much the same thing as in my gist if you\u2019d like to have a look at it. However, feel free to use the tools you feel comfortable with.", "So far, I\u2019ve tried to cover a few useful image pre-processing concepts and implementations, though it\u2019s probably just the tip of the iceberg. I don\u2019t know how much \u201cleisure time\u201d I\u2019m going to have in the upcoming weeks, so I can\u2019t give you a specific time frame for publishing my next post. However, I\u2019m considering adding at least one more part to this series that explains a few things I left out, such as rotation and de-skewing on images.", "Until then, the best bet is to keep your wits about you and continue to look for signs.*", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "insert here some buzzwords that have nothing to do with what I actually do."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Ff7f9a0899b3f&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgetting-started-with-tesseract-part-ii-f7f9a0899b3f&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgetting-started-with-tesseract-part-ii-f7f9a0899b3f&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgetting-started-with-tesseract-part-ii-f7f9a0899b3f&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgetting-started-with-tesseract-part-ii-f7f9a0899b3f&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----f7f9a0899b3f--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----f7f9a0899b3f--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://bkaankuguoglu.medium.com/?source=post_page-----f7f9a0899b3f--------------------------------", "anchor_text": ""}, {"url": "https://bkaankuguoglu.medium.com/?source=post_page-----f7f9a0899b3f--------------------------------", "anchor_text": "Kaan Kuguoglu"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fbd6d285e2136&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgetting-started-with-tesseract-part-ii-f7f9a0899b3f&user=Kaan+Kuguoglu&userId=bd6d285e2136&source=post_page-bd6d285e2136----f7f9a0899b3f---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ff7f9a0899b3f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgetting-started-with-tesseract-part-ii-f7f9a0899b3f&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ff7f9a0899b3f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgetting-started-with-tesseract-part-ii-f7f9a0899b3f&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@chatelp", "anchor_text": "Pierre Ch\u00e2tel-Innocenti"}, {"url": "https://medium.com/@bkaankuguoglu/getting-started-with-tesseract-part-i-2a6a6b1cf75e", "anchor_text": "How to get started with Tesseract"}, {"url": "https://medium.com/@bkaankuguoglu/getting-started-with-tesseract-part-i-2a6a6b1cf75e", "anchor_text": "the previous story"}, {"url": "https://docs.opencv.org/3.4.0/d4/d13/tutorial_py_filtering.html", "anchor_text": "OpenCV library"}, {"url": "https://docs.opencv.org/3.4.0/d7/d4d/tutorial_py_thresholding.html", "anchor_text": "OpenCV on Image Thresholding"}, {"url": "https://docs.opencv.org/3.4.0/d7/d4d/tutorial_py_thresholding.html", "anchor_text": "the official documentation for other thresholding methods."}, {"url": "https://docs.opencv.org/3.4.0/d7/d4d/tutorial_py_thresholding.html", "anchor_text": "the official documentation"}, {"url": "https://www.jetbrains.com/pycharm/", "anchor_text": "PyCharm"}, {"url": "https://gist.github.com/bkaankuguoglu/111f9f5e0c30b5f57d7c5338d6dcb6fc", "anchor_text": "gist"}, {"url": "https://www.youtube.com/watch?v=B_CHjYoqPUU", "anchor_text": "*"}, {"url": "https://medium.com/tag/ocr?source=post_page-----f7f9a0899b3f---------------ocr-----------------", "anchor_text": "Ocr"}, {"url": "https://medium.com/tag/opencv?source=post_page-----f7f9a0899b3f---------------opencv-----------------", "anchor_text": "Opencv"}, {"url": "https://medium.com/tag/tesseract?source=post_page-----f7f9a0899b3f---------------tesseract-----------------", "anchor_text": "Tesseract"}, {"url": "https://medium.com/tag/python?source=post_page-----f7f9a0899b3f---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/technology?source=post_page-----f7f9a0899b3f---------------technology-----------------", "anchor_text": "Technology"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Ff7f9a0899b3f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgetting-started-with-tesseract-part-ii-f7f9a0899b3f&user=Kaan+Kuguoglu&userId=bd6d285e2136&source=-----f7f9a0899b3f---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Ff7f9a0899b3f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgetting-started-with-tesseract-part-ii-f7f9a0899b3f&user=Kaan+Kuguoglu&userId=bd6d285e2136&source=-----f7f9a0899b3f---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ff7f9a0899b3f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgetting-started-with-tesseract-part-ii-f7f9a0899b3f&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----f7f9a0899b3f--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Ff7f9a0899b3f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgetting-started-with-tesseract-part-ii-f7f9a0899b3f&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----f7f9a0899b3f---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----f7f9a0899b3f--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----f7f9a0899b3f--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----f7f9a0899b3f--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----f7f9a0899b3f--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----f7f9a0899b3f--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----f7f9a0899b3f--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----f7f9a0899b3f--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----f7f9a0899b3f--------------------------------", "anchor_text": ""}, {"url": "https://bkaankuguoglu.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://bkaankuguoglu.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Kaan Kuguoglu"}, {"url": "https://bkaankuguoglu.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "252 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fbd6d285e2136&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgetting-started-with-tesseract-part-ii-f7f9a0899b3f&user=Kaan+Kuguoglu&userId=bd6d285e2136&source=post_page-bd6d285e2136--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Ffc03de1c6917&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgetting-started-with-tesseract-part-ii-f7f9a0899b3f&newsletterV3=bd6d285e2136&newsletterV3Id=fc03de1c6917&user=Kaan+Kuguoglu&userId=bd6d285e2136&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}