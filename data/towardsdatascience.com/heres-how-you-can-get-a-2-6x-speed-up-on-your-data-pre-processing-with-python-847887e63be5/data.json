{"url": "https://towardsdatascience.com/heres-how-you-can-get-a-2-6x-speed-up-on-your-data-pre-processing-with-python-847887e63be5", "time": 1682993746.429947, "path": "towardsdatascience.com/heres-how-you-can-get-a-2-6x-speed-up-on-your-data-pre-processing-with-python-847887e63be5/", "webpage": {"metadata": {"title": "Here\u2019s how you can get a 2\u20136x speed-up on your data pre-processing with Python | by George Seif | Towards Data Science", "h1": "Here\u2019s how you can get a 2\u20136x speed-up on your data pre-processing with Python", "description": "Python is the go-to programming language for all things machine learning. It\u2019s easy to use and has many fantastic libraries that make crunching data a breeze! But things get a big trickier when we\u2019re\u2026"}, "outgoing_paragraph_urls": [{"url": "https://www.superquotes.co/?utm_source=mediumtech&utm_medium=web&utm_campaign=sharing", "anchor_text": "Super Quotes newsletter", "paragraph_index": 0}, {"url": "https://twitter.com/GeorgeSeif94", "anchor_text": "twitter", "paragraph_index": 18}, {"url": "https://www.linkedin.com/in/georgeseif/", "anchor_text": "LinkedIn", "paragraph_index": 18}], "all_paragraphs": ["Want to be inspired? Come join my Super Quotes newsletter. \ud83d\ude0e", "Python is the go-to programming language for all things machine learning. It\u2019s easy to use and has many fantastic libraries that make crunching data a breeze! But things get a big trickier when we\u2019re dealing with lots of data\u2026.", "These days, the term \u201cbig data\u201d usually refers to a dataset that\u2019s on the order of at least hundreds of thousands if not millions of data points! At such a scale, every little computation adds up and we need to keep efficiency in mind when coding each step of the pipeline. One critical step that is often overlooked when thinking about our machine learning system\u2019s efficiency is the pre-processing stage, where we must apply some kind of operation to all of our data points.", "By default, Python programs execute as a single process using a single CPU. Most modern machines made for machine learning have at least 2 CPU cores. That means, for the example of 2 CPU cores, that 50% or more of your computer\u2019s processing power won\u2019t be doing anything by default when you run your pre-processing! The situation gets even worse when you get to 4 cores (modern Intel i5) or 6cores (modern Intel i7).", "But thankfully, there is a somewhat hidden feature in a built-in Python library that lets us take advantage of all of our CPU cores! Thanks to Python\u2019s concurrent.futures module, it only takes 3 lines of code to turn a normal program into one that can process data in parallel across the CPU cores.", "Let\u2019s take a simple example where we have a dataset of images in a single folder; maybe we even have thousands or millions of those images! For the sake of processing time we\u2019ll use 1000 here. We would like to resize all images to size 600x600 before passing it to our deep neural network. This is what it would look like in some pretty standard Python code you would often see on GitHub.", "This program follows a simple pattern you\u2019ll often see in data processing scripts:", "Let\u2019s test this program on a folder with 1000 jpeg files and see how long it takes to run:", "On my i7\u20138700k with 6 CPU cores, that gave me a run time of 7.9864 seconds! It seems a bit slow for such a high-end CPU. Let\u2019s see what we can do to speed things up.", "To understand how we would want Python to process things in parallel, it helps to think intuitively about parallel processing itself. Let\u2019s say we have to perform the same single task of hitting nails into a piece of wood and that we have 1000 nails in our bucket. If we say that each nail takes 1 second, then with 1 person we would finish the job in 1000 seconds. But if we have 4 people on the team, we would divide the bucket into 4 equal piles and then each person on the team would work on their own pile of nails. With this method, we would finish in only 250 seconds!", "We can have Python do something similar for us in our example here with the 1000 images:", "The great part about all this is that Python handles all the hard work for us. We just tell it which function we want to run and how many instances of Python to use and it does all the rest! We only have to change 3 lines of code.", "boots up as many Python processes as you have CPU cores, in my case 6. The actually processing line is this one:", "The executor.map() takes as input the function you would like to run and a list where each element of the list is a single input to our function. Since we have 6 cores, we will be processing 6 items from that list at the same time!", "If we again run our program using:", "Note: There is some overhead in spawning more Python processes and shuffling data around between them, so you won\u2019t always get this much of a speed improvement. But overall your speed-up will usually be quite significant", "Using Python parallel pools is a great solution when you have a list of data to process and you are performing a similar computation on each data point. But, it\u2019s not always going to be the perfect solution. The data processed by parallel pools won\u2019t be processed in any predictable order. If you need the result from the processing to be in a specific order, then this method probably isn\u2019t right for you.", "The data you are processing also needs to be a type that Python knows how to \u201cpickle\u201d. Luckily, these are quite common. From the official Python documentation:", "Follow me on twitter where I post all about the latest and greatest AI, Technology, and Science! Connect with me on LinkedIn too!", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F847887e63be5&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fheres-how-you-can-get-a-2-6x-speed-up-on-your-data-pre-processing-with-python-847887e63be5&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fheres-how-you-can-get-a-2-6x-speed-up-on-your-data-pre-processing-with-python-847887e63be5&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fheres-how-you-can-get-a-2-6x-speed-up-on-your-data-pre-processing-with-python-847887e63be5&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fheres-how-you-can-get-a-2-6x-speed-up-on-your-data-pre-processing-with-python-847887e63be5&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----847887e63be5--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----847887e63be5--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@george.seif94?source=post_page-----847887e63be5--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@george.seif94?source=post_page-----847887e63be5--------------------------------", "anchor_text": "George Seif"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fe2af5c8737ec&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fheres-how-you-can-get-a-2-6x-speed-up-on-your-data-pre-processing-with-python-847887e63be5&user=George+Seif&userId=e2af5c8737ec&source=post_page-e2af5c8737ec----847887e63be5---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F847887e63be5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fheres-how-you-can-get-a-2-6x-speed-up-on-your-data-pre-processing-with-python-847887e63be5&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F847887e63be5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fheres-how-you-can-get-a-2-6x-speed-up-on-your-data-pre-processing-with-python-847887e63be5&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://www.superquotes.co/?utm_source=mediumtech&utm_medium=web&utm_campaign=sharing", "anchor_text": "Super Quotes newsletter"}, {"url": "https://docs.python.org/3/reference/compound_stmts.html#def", "anchor_text": "def"}, {"url": "https://docs.python.org/3/reference/expressions.html#lambda", "anchor_text": "lambda"}, {"url": "https://docs.python.org/3/library/stdtypes.html#object.__dict__", "anchor_text": "__dict__"}, {"url": "https://docs.python.org/3/library/pickle.html#object.__getstate__", "anchor_text": "__getstate__()"}, {"url": "https://docs.python.org/3/library/pickle.html#pickle-inst", "anchor_text": "Pickling Class Instances"}, {"url": "https://twitter.com/GeorgeSeif94", "anchor_text": "twitter"}, {"url": "https://www.linkedin.com/in/georgeseif/", "anchor_text": "LinkedIn"}, {"url": "https://medium.com/tag/python?source=post_page-----847887e63be5---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/data-science?source=post_page-----847887e63be5---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----847887e63be5---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/tag/artificial-intelligence?source=post_page-----847887e63be5---------------artificial_intelligence-----------------", "anchor_text": "Artificial Intelligence"}, {"url": "https://medium.com/tag/programming?source=post_page-----847887e63be5---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F847887e63be5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fheres-how-you-can-get-a-2-6x-speed-up-on-your-data-pre-processing-with-python-847887e63be5&user=George+Seif&userId=e2af5c8737ec&source=-----847887e63be5---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F847887e63be5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fheres-how-you-can-get-a-2-6x-speed-up-on-your-data-pre-processing-with-python-847887e63be5&user=George+Seif&userId=e2af5c8737ec&source=-----847887e63be5---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F847887e63be5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fheres-how-you-can-get-a-2-6x-speed-up-on-your-data-pre-processing-with-python-847887e63be5&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----847887e63be5--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F847887e63be5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fheres-how-you-can-get-a-2-6x-speed-up-on-your-data-pre-processing-with-python-847887e63be5&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----847887e63be5---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----847887e63be5--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----847887e63be5--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----847887e63be5--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----847887e63be5--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----847887e63be5--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----847887e63be5--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----847887e63be5--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----847887e63be5--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@george.seif94?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@george.seif94?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "George Seif"}, {"url": "https://medium.com/@george.seif94/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "21K Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fe2af5c8737ec&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fheres-how-you-can-get-a-2-6x-speed-up-on-your-data-pre-processing-with-python-847887e63be5&user=George+Seif&userId=e2af5c8737ec&source=post_page-e2af5c8737ec--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fc78596234267&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fheres-how-you-can-get-a-2-6x-speed-up-on-your-data-pre-processing-with-python-847887e63be5&newsletterV3=e2af5c8737ec&newsletterV3Id=c78596234267&user=George+Seif&userId=e2af5c8737ec&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}