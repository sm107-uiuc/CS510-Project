{"url": "https://towardsdatascience.com/cleaning-up-debt-a-pandas-approach-4093937388de", "time": 1682993462.268509, "path": "towardsdatascience.com/cleaning-up-debt-a-pandas-approach-4093937388de/", "webpage": {"metadata": {"title": "Cleaning Up Debt: A pandas Approach | by Finn Qiao | Towards Data Science", "h1": "Cleaning Up Debt: A pandas Approach", "description": "A recent analysis of the Southeast Asian credit markets at work brought to light some nuances regarding credit culture in this particular region. The data got me thinking about global credit health\u2026"}, "outgoing_paragraph_urls": [{"url": "https://blog.ouseful.info/2017/03/20/data-cleaning-finding-near-matches-in-names/", "anchor_text": "OUseful", "paragraph_index": 18}, {"url": "https://github.com/finnqiao/npl_data", "anchor_text": "here", "paragraph_index": 41}], "all_paragraphs": ["A recent analysis of the Southeast Asian credit markets at work brought to light some nuances regarding credit culture in this particular region. The data got me thinking about global credit health and non-performing loan rates globally. Given my recent foray into data analysis, I thought a notebook was in order.", "But first, what is the credit market and what are non-performing loans?", "By examining the credit market, we are looking at the market in which individuals, corporations, and governments seek to borrow money from investors. This form of borrowing can take on many different forms, from your daily credit card expenses to mortgages on your next beach home.", "Non-performing loans (NPL) refer to loans in which the borrower has not been able to make scheduled repayments for some time (usually over 90 days).", "When NPL levels rise, it is often an indicator of deteriorating credit market health. In short, more people are not paying back what they owe.", "We\u2019ll examine NPL levels across different countries from the World Bank databank.", "First, we start by importing the necessary packages\u2026", "As there are some rows with filler column information, I skip the first 4 rows with islice.", "A look at the dataframe seems to indicate that there are lots of missing data, especially for earlier years. To get a better picture of what data is usually missing, we use missingno to get a quick visualization.", "Before using missingno however, it appears that empty data is represented by numpy strings. Thus we look to replace all such instances with np.nan for the missingno visualization to work.", "The visualization seems to indicate large blocks of missing data, especially with the annual data up to 2010. 2016 seems to have more missing data relative to the 6 years prior. Nations that are missing data for the 2010\u20132015 period are thus dropped.", "Furthermore, the columns for \u2018Indicator name\u2019 and \u2018Indicator code\u2019 don\u2019t seem particularly useful.", "We\u2019ll create a new dataframe with only the country, country code, and data for years 2010\u20132015. We will also set the column names, which currently reside in the first row.", "Much better. That leaves 144 countries/regions with values in every column. Some row indices might not be country specific. But first, there is the issue of data types.", "Examining the datatypes of the columns, all the data appear to be non-null objects. For the purpose of analyzing NPL levels that are meant to represent percentages, these should be of type float.", "After changing the data types to float, the describe() function works again and it seems that the mean values stay within a relatively narrow range. There seems to be a peculiar outlier for the minimum NPL for years 2010 and 2011. Can NPL be at 0%? Seems like a fantasy world.", "Tonga seems to be the odd one out, with NPL jumping to 14% in 2012. Perhaps they only opened up their credit markets in 2012? A quick Google search debunks that claim. It is likely to be an erroneous entry and we will drop Tonga from the analysis.", "A look at the \u2018Country Name\u2019 column reveals 143 \u2018countries\u2019 but many of them are referring to specific regions and classifications like \u2018South Asia (IDA & IBRD)\u2019. We only want pure country data, so we\u2019ll import in a list of known country names from country_list and filter them out.", "There are many methods to go about cleaning up the country list. More elegant methods include finding near matches and filtering by score. For example, OUseful gives a good example of using fuzzy set to find near matches.", "However, given that this is a relatively small set of index values, we could simply look at the countries that were filtered out when cross referenced with the country list.", "It seems that of the 44 values removed, the country names of \u2018Bosnia and Herzegovina\u2019, \u2018Brunei Darussalam\u2019, \u2018Congo, Rep.\u2019, \u2018Czech Republic\u2019, \u2018Gambia, The\u2019, \u2018Hong Kong SAR, China\u2019, \u2018Kyrgyz Republic\u2019, \u2018Macao SAR, China\u2019, \u2018Macedonia, FYR\u2019, \u2018Slovak Republic\u2019, \u2018Trinidad and Tobago\u2019 should have remained.", "We then proceed to use list comprehension to find our final list of filtered countries.", "Now that we have the countries that we want in our dataframe, lets add in some of the other attributes given by this same dataset by the World Bank. In a separate csv, they have provided information on the region the country is in and the income group of its population. A merge can be done on the country codes (the common column between the files).", "Great, now we have a list of countries with the relevant information. However, the format of the annual NPL data still mirrors that of raw data entries. EDA and further analyses would be easier with a \u2018tidy\u2019 data structure. The column names from 2010 to 2015 could be more useful as values rather than column names.", "Thus, we are going to \u2018melt\u2019 the dataset.This is also known as going from wide format to long format.", "We might have the data we want in a dataframe but does that mean it is ready for analysis? A quick look at info() gives a resounding \u2018no\u2019.", "The \u2018year\u2019 column is practically useless as a non-null object if we were to conduct any sort of time series analysis so it should be either converted to an integer or a datetime object.", "Furthermore, while you could group the data by income groups, it might be more telling if we attach a scale to it. While this scalar transformation isn\u2019t quite as applicable to regions, one can reliably weight income groups.", "Now that the dataset is cleaner, lets look at what the data tells us.", "A first look at the distribution for NPL levels indicates that it is not quite a normal distribution but a skewed one. A calculation of skewness and kurtosis values seems to support this, with both deviating from the \u2018normal\u2019 range.", "It is important to take note of such values for skewness and peakedness as they can greatly impact any predictive models.", "Next, we look at the distribution of these NPL levels over the income groups. The points are then color coded to represent the year.", "I had initially expected NPL to be much higher for lower income groups so the most prominent thing that stood out was the large group of outliers for the highest income group countries. Who were these bad actors on the debt market?", "It seems that the \u2018bad actor\u2019 list is dominated by a few countries such as Ireland, Greece, San Marino, and Cyprus.", "Despite their relatively high income levels, they possess some of the highest NPL levels.", "These NPL levels map quite well to real life events, with Ireland falling back to recession in 2012, Cyprus having a financial crisis in 2012\u20132013, San Marino\u2019s financial sector being hit hard by the Eurozone crisis, and Greeks facing their massive debt crisis since 2009.", "We can also take a closer look at NPL levels across different regions. A quick look at the NPL clusters over the years grouped by regions show noticeably high rates for Europe & Central Asia and Sub-Saharan Africa.", "Could the amount of data we have on each region be an indicator of credit market transparency? The countries in our dataframe are the ones with adequate NPL information over recent years. Let\u2019s compare the relative representation of each region.", "It seems that the \u2018Europe & Central Asia\u2019 and \u2018North America\u2019 areas are the most transparent for NPL data. Most other regions hover around the 50% mark whereas \u2018Middle East & North Africa\u2019 is a notable laggard in terms of credit transparency with NPL data for only 19% of countries.", "An initial exploration of NPL data globally yielded some pretty interesting results. However, given that the main purpose of this process was to tidy the data from the World Bank, there is still much room for exploration. I hope to aggregate other lines of data into this dataframe and perhaps run a panel data analysis.", "It would definitely have been interesting to look into local factors within each region/country to better quantify the credit culture. Credit culture can be a relatively arbitrary term and most quantitative measures of it are based around repayment history and other loan data. It would be interesting to factor \u201csoft\u201d metrics into the examination of credit culture. These \u2018softer\u2019 metrics could include examination of cultural views on debt, aggressiveness of loan taking, community trust, and the concept of ego and \u2018face\u2019 in borrowing or owing money.", "Check out the Jupyter Notebook here if you\u2019re interested in the code!", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Food \u00b7 Travel \u00b7 Technology \u00b7 Product \u00b7 Strategy"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F4093937388de&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcleaning-up-debt-a-pandas-approach-4093937388de&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcleaning-up-debt-a-pandas-approach-4093937388de&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcleaning-up-debt-a-pandas-approach-4093937388de&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcleaning-up-debt-a-pandas-approach-4093937388de&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----4093937388de--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----4093937388de--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@finnqiao?source=post_page-----4093937388de--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@finnqiao?source=post_page-----4093937388de--------------------------------", "anchor_text": "Finn Qiao"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F511a811ea993&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcleaning-up-debt-a-pandas-approach-4093937388de&user=Finn+Qiao&userId=511a811ea993&source=post_page-511a811ea993----4093937388de---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F4093937388de&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcleaning-up-debt-a-pandas-approach-4093937388de&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F4093937388de&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcleaning-up-debt-a-pandas-approach-4093937388de&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://blog.ouseful.info/2017/03/20/data-cleaning-finding-near-matches-in-names/", "anchor_text": "OUseful"}, {"url": "https://github.com/finnqiao/npl_data", "anchor_text": "here"}, {"url": "https://medium.com/tag/data-science?source=post_page-----4093937388de---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/data?source=post_page-----4093937388de---------------data-----------------", "anchor_text": "Data"}, {"url": "https://medium.com/tag/data-visualization?source=post_page-----4093937388de---------------data_visualization-----------------", "anchor_text": "Data Visualization"}, {"url": "https://medium.com/tag/finance?source=post_page-----4093937388de---------------finance-----------------", "anchor_text": "Finance"}, {"url": "https://medium.com/tag/python?source=post_page-----4093937388de---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F4093937388de&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcleaning-up-debt-a-pandas-approach-4093937388de&user=Finn+Qiao&userId=511a811ea993&source=-----4093937388de---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F4093937388de&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcleaning-up-debt-a-pandas-approach-4093937388de&user=Finn+Qiao&userId=511a811ea993&source=-----4093937388de---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F4093937388de&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcleaning-up-debt-a-pandas-approach-4093937388de&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----4093937388de--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F4093937388de&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcleaning-up-debt-a-pandas-approach-4093937388de&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----4093937388de---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----4093937388de--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----4093937388de--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----4093937388de--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----4093937388de--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----4093937388de--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----4093937388de--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----4093937388de--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----4093937388de--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@finnqiao?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@finnqiao?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Finn Qiao"}, {"url": "https://medium.com/@finnqiao/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "609 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F511a811ea993&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcleaning-up-debt-a-pandas-approach-4093937388de&user=Finn+Qiao&userId=511a811ea993&source=post_page-511a811ea993--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F3294a2317ce2&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcleaning-up-debt-a-pandas-approach-4093937388de&newsletterV3=511a811ea993&newsletterV3Id=3294a2317ce2&user=Finn+Qiao&userId=511a811ea993&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}