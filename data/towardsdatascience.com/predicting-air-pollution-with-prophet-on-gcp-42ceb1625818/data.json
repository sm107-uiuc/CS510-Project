{"url": "https://towardsdatascience.com/predicting-air-pollution-with-prophet-on-gcp-42ceb1625818", "time": 1683011769.205222, "path": "towardsdatascience.com/predicting-air-pollution-with-prophet-on-gcp-42ceb1625818/", "webpage": {"metadata": {"title": "Predicting Air Pollution with Prophet on GCP | by Alexander Cohan, Ph.D. | Towards Data Science", "h1": "Predicting Air Pollution with Prophet on GCP", "description": "GCP offers a suite of cloud technologies with fully managed and serverless solutions that make processing, storing, and analyzing data easy. This analysis will utilize BigQuery, Geo Viz, and AI\u2026"}, "outgoing_paragraph_urls": [{"url": "https://cloud.google.com/bigquery", "anchor_text": "BigQuery", "paragraph_index": 0}, {"url": "https://bigquerygeoviz.appspot.com/", "anchor_text": "Geo Viz", "paragraph_index": 0}, {"url": "https://cloud.google.com/ai-platform", "anchor_text": "AI platform", "paragraph_index": 0}, {"url": "https://www.onlinejacc.org/content/62/9/816.abstract", "anchor_text": "acute exposure", "paragraph_index": 8}, {"url": "https://facebook.github.io/prophet/", "anchor_text": "Prophet", "paragraph_index": 13}, {"url": "https://github.com/alexandercohan/O3_GCP/blob/master/Notebooks/PredictO3.ipynb", "anchor_text": "github repo", "paragraph_index": 15}, {"url": "https://www.linkedin.com/in/edkrueger/", "anchor_text": "Edward Krueger", "paragraph_index": 19}, {"url": "https://www.linkedin.com/in/douglas-franklin-1a3a2aa3/", "anchor_text": "Douglas Franklin", "paragraph_index": 19}, {"url": "http://WEB.com", "anchor_text": "WEB.com", "paragraph_index": 21}], "all_paragraphs": ["GCP offers a suite of cloud technologies with fully managed and serverless solutions that make processing, storing, and analyzing data easy. This analysis will utilize BigQuery, Geo Viz, and AI platform.", "GCP offers $300 of trial credits to new users. Additionally, BigQuery comes with 1TB of free processing a month. This demo uses a fraction of these credits.", "BigQuery is a serverless data warehouse and analysis tool with a familiar SQL interface. It has GIS capabilities for geospatial analysis, which makes it an ideal tool for any environmental assessment. Additionally, BigQuery offers many publicly available datasets, including EPA\u2019s historical data.", "The U.S. EPA maintains a comprehensive monitoring network of many harmful air contaminants, including ozone (O\u2083), nitrogen oxides, and particulate matter. This network ensures air quality is meeting national air quality standards and assists in analyzing and modeling air pollution patterns.", "We will focus on daily ozone summaries, which are easily accessible on BigQuery. This dataset can be unwieldy because of the massive amount of information from monitors across the country that contain daily recordings.", "First thing is to create a dataset in BigQuery to hold the data we will be processing in tables, name the dataset EPAO3.", "Next we query EPA\u2019s daily ozone and do a max aggregation of daily maximum ozone grouped by county, state, and month. We join this data with county geometries from the 2016 US census to make the data viewable in Geo Viz. The query results are stored as a new table within our dataset called o3monthlymax.", "This query ran in 37 seconds and processed 627.8 mb of data. Slot time consumed, the total CPU hours, was 9 min 37 seconds. BigQuery was able to significantly speed up this query compared to a traditional single processing database. The new table created has 2.26gb of data and 33K rows.", "Health impacts have been correlated with acute exposure making the daily max one-hour ozone values a reasonable proxy for health impacts.", "Now that we have our data processed we can examine it in BigQuery Geo Viz. Let\u2019s do a max aggregation over the time span to make visualization in Geo Viz easier.", "Instead of running the query, we are going to save this as a new view. Call the view o3max_v. Find the new view in the EPAO3 dataset, highlight EXPORT, and select Explore with Geo Viz. You will need to authorize Geo Viz to access your data. We can use the default query Geo Viz starts with to access our data", "geom should automatically be selected as the geometry column. Move on to Style and Fill Color. Select the Data Driven option and scroll to O3 in the field selector. Here linear is selected as the function, but interval could also work. Add in some domain limits and play with the colors in range until you are happy with the result.", "Notice that some counties are well represented within the monitoring network while others have no monitors. For example, Nebraska and Kansas have very few ozone monitors.", "Next we will perform air pollution prediction using Prophet. Prophet is an open source time series forecasting tool developed by Facebook. It is based on an additive model where non-linear trends are fit over various temporal windows and holiday trends.", "We will create a VM to run Prophet using GCP\u2019s AI platform which has VMs tailor suited towards machine learning. Create a new notebook instance in the AI platform, the one used here is customized to use n1-standard-1 machine type which helps minimize costs. Notebook instances on the AI Platform come already authenticated to access BigQuery in the same project.", "Once the VM is provisioned you can open jupyterlab directly from the GCP console. From there create a Python 3 notebook or upload the one in the github repo.", "The BigQuery client library provides cell magic which can run SQL queries and returns results as a Pandas DataFrame, making queries from python easy.", "Ozone tends to peak in the summer because of its dependency on temperature. Prophet does a reasonable job capturing seasonal variations of ozone with out of the box parameters.", "We were able to do sophisticated geospatial time series analysis in a few steps using tools contained on the GCP platform and open source software.", "Thanks to Edward Krueger and Douglas Franklin for reviewing this article.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Principal Data Scientist at WEB.com @NumericalAlex"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F42ceb1625818&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpredicting-air-pollution-with-prophet-on-gcp-42ceb1625818&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpredicting-air-pollution-with-prophet-on-gcp-42ceb1625818&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpredicting-air-pollution-with-prophet-on-gcp-42ceb1625818&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpredicting-air-pollution-with-prophet-on-gcp-42ceb1625818&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----42ceb1625818--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----42ceb1625818--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@NumericalAlex?source=post_page-----42ceb1625818--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@NumericalAlex?source=post_page-----42ceb1625818--------------------------------", "anchor_text": "Alexander Cohan, Ph.D."}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fad88ec824b5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpredicting-air-pollution-with-prophet-on-gcp-42ceb1625818&user=Alexander+Cohan%2C+Ph.D.&userId=ad88ec824b5&source=post_page-ad88ec824b5----42ceb1625818---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F42ceb1625818&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpredicting-air-pollution-with-prophet-on-gcp-42ceb1625818&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F42ceb1625818&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpredicting-air-pollution-with-prophet-on-gcp-42ceb1625818&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://cloud.google.com/bigquery", "anchor_text": "BigQuery"}, {"url": "https://bigquerygeoviz.appspot.com/", "anchor_text": "Geo Viz"}, {"url": "https://cloud.google.com/ai-platform", "anchor_text": "AI platform"}, {"url": "https://www.onlinejacc.org/content/62/9/816.abstract", "anchor_text": "acute exposure"}, {"url": "https://facebook.github.io/prophet/", "anchor_text": "Prophet"}, {"url": "https://github.com/alexandercohan/O3_GCP/blob/master/Notebooks/PredictO3.ipynb", "anchor_text": "github repo"}, {"url": "https://www.linkedin.com/in/edkrueger/", "anchor_text": "Edward Krueger"}, {"url": "https://www.linkedin.com/in/douglas-franklin-1a3a2aa3/", "anchor_text": "Douglas Franklin"}, {"url": "https://medium.com/tag/gcp?source=post_page-----42ceb1625818---------------gcp-----------------", "anchor_text": "Gcp"}, {"url": "https://medium.com/tag/bigquery?source=post_page-----42ceb1625818---------------bigquery-----------------", "anchor_text": "Bigquery"}, {"url": "https://medium.com/tag/time-series-forecasting?source=post_page-----42ceb1625818---------------time_series_forecasting-----------------", "anchor_text": "Time Series Forecasting"}, {"url": "https://medium.com/tag/cloud-computing?source=post_page-----42ceb1625818---------------cloud_computing-----------------", "anchor_text": "Cloud Computing"}, {"url": "https://medium.com/tag/air-pollution?source=post_page-----42ceb1625818---------------air_pollution-----------------", "anchor_text": "Air Pollution"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F42ceb1625818&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpredicting-air-pollution-with-prophet-on-gcp-42ceb1625818&user=Alexander+Cohan%2C+Ph.D.&userId=ad88ec824b5&source=-----42ceb1625818---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F42ceb1625818&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpredicting-air-pollution-with-prophet-on-gcp-42ceb1625818&user=Alexander+Cohan%2C+Ph.D.&userId=ad88ec824b5&source=-----42ceb1625818---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F42ceb1625818&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpredicting-air-pollution-with-prophet-on-gcp-42ceb1625818&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----42ceb1625818--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F42ceb1625818&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpredicting-air-pollution-with-prophet-on-gcp-42ceb1625818&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----42ceb1625818---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----42ceb1625818--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----42ceb1625818--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----42ceb1625818--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----42ceb1625818--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----42ceb1625818--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----42ceb1625818--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----42ceb1625818--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----42ceb1625818--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@NumericalAlex?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@NumericalAlex?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Alexander Cohan, Ph.D."}, {"url": "https://medium.com/@NumericalAlex/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "7 Followers"}, {"url": "http://WEB.com", "anchor_text": "WEB.com"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fad88ec824b5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpredicting-air-pollution-with-prophet-on-gcp-42ceb1625818&user=Alexander+Cohan%2C+Ph.D.&userId=ad88ec824b5&source=post_page-ad88ec824b5--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fusers%2Fad88ec824b5%2Flazily-enable-writer-subscription&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpredicting-air-pollution-with-prophet-on-gcp-42ceb1625818&user=Alexander+Cohan%2C+Ph.D.&userId=ad88ec824b5&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}