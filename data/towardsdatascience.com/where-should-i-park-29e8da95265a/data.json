{"url": "https://towardsdatascience.com/where-should-i-park-29e8da95265a", "time": 1683000338.684435, "path": "towardsdatascience.com/where-should-i-park-29e8da95265a/", "webpage": {"metadata": {"title": "Where should I park?!. Using NVIDIA RAPIDS to mine Seattle\u2026 | by Tom Drabas | Towards Data Science", "h1": "Where should I park?!", "description": "Driving in Seattle is becoming very similar to driving in places like Silicon Valley or Los Angeles. We mine Seattle Parking Data with NVIDIA RAPIDS and show where to park if you visit downtown."}, "outgoing_paragraph_urls": [{"url": "https://data.seattle.gov/Transportation/2019-Paid-Parking-Occupancy-Year-to-date-/qktt-2bsy", "anchor_text": "Paid Parking Occupancy", "paragraph_index": 1}, {"url": "https://www.nvidia.com/en-us/titan/titan-rtx/", "anchor_text": "NVIDIA Titan RTX", "paragraph_index": 2}, {"url": "http://tomdrabas.com/data/seattle_parking/parking_MayJun2019.tar.gz", "anchor_text": "here", "paragraph_index": 2}, {"url": "https://github.com/drabastomek/rapids-notebooks/blob/master/codes/rapids_seattleParking.ipynb", "anchor_text": "Github", "paragraph_index": 2}, {"url": "https://rapidsai.github.io/projects/nvstrings/en/0.9.0/api.html#nvstrings.nvstrings.stod", "anchor_text": "stod()", "paragraph_index": 9}, {"url": "https://geopy.readthedocs.io/", "anchor_text": "geopy", "paragraph_index": 12}, {"url": "http://www.spaceneedle.com/", "anchor_text": "Space Needle", "paragraph_index": 12}, {"url": "http://pikeplacemarket.org/", "anchor_text": "Pike Place Market", "paragraph_index": 15}], "all_paragraphs": ["Driving in Seattle is quickly becoming very similar to driving in cities like San Francisco, Silicon Valley or Los Angeles: more and more companies choose to settle or open their offices in Seattle so they can tap into the tech community that Seattle has to offer. With that, parking in Seattle is getting harder by day.", "Paid Parking Occupancy dataset provided by the City of Seattle Department of Transportation provides a view into around 300 million parking transactions annually from around 12 thousands parking spots on roughly 1,500 block faces. The dataset does not include any transaction for Sundays as there is no paid parking. Most of the parking spots have a 2-hour limit.", "I have subset the dataset to include all the transactions for May and June of 2019 so it fits nicely on the NVIDIA Titan RTX with 24GB of VRAM; the dataset is roughly 7GB in size and expands to ~12GB once loaded into the memory of the GPU. The dataset we will use can be downloaded from here and all the code discussed below (and more!) can be found on Github.", "The parking dataset I created contains almost 49M records (with an average of around 955k per day) and 13 columns. Each row represents a single transaction with all the metadata about it, such as paid occupancy at the time of the transaction or block face name. It also contains the exact location of the parking encoded in an WKT (Well Known Text) format. See an example of the dataset below.", "RAPIDS is a great framework that requires little-to-none changes of vanilla pandas code to work (the APIs are 99.9% compatible) and achieves massive speedups over any code that runs on a CPU. That\u2019s why feature engineering using RAPIDS is so simple and effortless. It is, actually, also challenging the belief (or complaint, depending on how you look at it) that 80\u201390% of data scientist\u2019s time is spent on data cleaning and exploration, and only between 10\u201320% on building actual machine learning or deep learning models: with RAPIDS these proportions can tilt significantly towards the fun part of building models.", "First, we will decompose the dates into basic elements like year, month and day, and hour and minute so later we can actually aggregate per day-of-week and hour when searching for a place to park.", "After 27 milliseconds we get the results back. Yes, it\u2019s not a typo: in 27 milliseconds we extracted the basic components of the OccupancyDateTime column of almost 49 million records! Speed of light!", "There are 1,528 parking blocks in Seattle. And, similarly to pandas, in order to extract a distinct list of rows from a DataFrame we use drop_duplicates(\u2026) method.", "Having done the above we can now turn our eye to extracting those longitudes and latitudes from the Location column. RAPIDS 0.6 added initial support for strings and in ver 0.9 now we have support for REGEX so why not use it?! The pattern below essentially searches for two floats in a string and returns the first as longitude and the second as latitude.", "The stod() method converts the extracted string to a decimal.", "In a slight departure from the pandas API at the benefit of speed, the apply_rows(\u2026) method allows us to scan through all the rows and apply some transformations. All done using vanilla Python code! No need for playing with CUDA to leverage the capabilities of GPUs!", "The above code takes around 1.7 seconds to calculate the average occupancy for 48M rows. What is left is to aggregate per parking spot identifier (the SourceElementKey column), day-of-week and hour.", "For the final step, let\u2019s check where we should park? I\u2019m using geopy framework and the Nominatim address encoder to retrieve the geo coordinates of Space Needle! These are (122.349304W, 47.620513N), by the way.", "Using Haversine formula we now can calculate the distance from Space Needle to every parking location in our dataset.", "Now, assuming we want to visit the Space Needle on Wednesday around 1PM (so we avoid lengthy queues\u2026), we can quickly merge the aggregated dataset we created earlier and subset it down to only those parking spaces that are within 1000ft.", "Having retrieved the closest locations let\u2019s visualize them on a map so it\u2019s easier to find it when visiting the iconic place in Seattle (it\u2019s not far from another Seattle\u2019s icon \u2014 Pike Place Market!)", "All of the above, end-to-end, takes about 20 seconds; the inference part itself takes only about 1.6 seconds \u2014 once all the aggregations are done these can be reused until the next day when the new slew of parking transactions can be used to update the occupancy rates of the parking spots.", "The power of RAPIDS (especially running on the Titan RTX with it\u2019s 24GB of VRAM!!!) and GPUs is enormous and we are now only scratching the surface of what can be done. May the (Ge)force (or better, RTX) be with all of you!", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Data scientist, math lover, computer geek, tube-amps designer and builder, die-hard TOOL fan. Working for Blazing SQL. Ex Microsoft."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F29e8da95265a&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhere-should-i-park-29e8da95265a&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhere-should-i-park-29e8da95265a&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhere-should-i-park-29e8da95265a&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhere-should-i-park-29e8da95265a&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----29e8da95265a--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----29e8da95265a--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://tomekdrabas.medium.com/?source=post_page-----29e8da95265a--------------------------------", "anchor_text": ""}, {"url": "https://tomekdrabas.medium.com/?source=post_page-----29e8da95265a--------------------------------", "anchor_text": "Tom Drabas"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F44003e7498c6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhere-should-i-park-29e8da95265a&user=Tom+Drabas&userId=44003e7498c6&source=post_page-44003e7498c6----29e8da95265a---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F29e8da95265a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhere-should-i-park-29e8da95265a&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F29e8da95265a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhere-should-i-park-29e8da95265a&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://data.seattle.gov/Transportation/2019-Paid-Parking-Occupancy-Year-to-date-/qktt-2bsy", "anchor_text": "Paid Parking Occupancy"}, {"url": "https://www.nvidia.com/en-us/titan/titan-rtx/", "anchor_text": "NVIDIA Titan RTX"}, {"url": "http://tomdrabas.com/data/seattle_parking/parking_MayJun2019.tar.gz", "anchor_text": "here"}, {"url": "https://github.com/drabastomek/rapids-notebooks/blob/master/codes/rapids_seattleParking.ipynb", "anchor_text": "Github"}, {"url": "https://www.flickr.com/photos/allenhimself/14267437660", "anchor_text": "allenhimself"}, {"url": "https://creativecommons.org/licenses/by/2.0/", "anchor_text": "CC BY 2.0"}, {"url": "https://rapidsai.github.io/projects/nvstrings/en/0.9.0/api.html#nvstrings.nvstrings.stod", "anchor_text": "stod()"}, {"url": "https://geopy.readthedocs.io/", "anchor_text": "geopy"}, {"url": "http://www.spaceneedle.com/", "anchor_text": "Space Needle"}, {"url": "http://pikeplacemarket.org/", "anchor_text": "Pike Place Market"}, {"url": "https://medium.com/tag/nvidia?source=post_page-----29e8da95265a---------------nvidia-----------------", "anchor_text": "Nvidia"}, {"url": "https://medium.com/tag/nvidia-rapids?source=post_page-----29e8da95265a---------------nvidia_rapids-----------------", "anchor_text": "Nvidia Rapids"}, {"url": "https://medium.com/tag/data-science?source=post_page-----29e8da95265a---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/gpu?source=post_page-----29e8da95265a---------------gpu-----------------", "anchor_text": "Gpu"}, {"url": "https://medium.com/tag/parking?source=post_page-----29e8da95265a---------------parking-----------------", "anchor_text": "Parking"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F29e8da95265a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhere-should-i-park-29e8da95265a&user=Tom+Drabas&userId=44003e7498c6&source=-----29e8da95265a---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F29e8da95265a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhere-should-i-park-29e8da95265a&user=Tom+Drabas&userId=44003e7498c6&source=-----29e8da95265a---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F29e8da95265a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhere-should-i-park-29e8da95265a&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----29e8da95265a--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F29e8da95265a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhere-should-i-park-29e8da95265a&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----29e8da95265a---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----29e8da95265a--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----29e8da95265a--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----29e8da95265a--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----29e8da95265a--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----29e8da95265a--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----29e8da95265a--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----29e8da95265a--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----29e8da95265a--------------------------------", "anchor_text": ""}, {"url": "https://tomekdrabas.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://tomekdrabas.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Tom Drabas"}, {"url": "https://tomekdrabas.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "84 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F44003e7498c6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhere-should-i-park-29e8da95265a&user=Tom+Drabas&userId=44003e7498c6&source=post_page-44003e7498c6--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fusers%2F44003e7498c6%2Flazily-enable-writer-subscription&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhere-should-i-park-29e8da95265a&user=Tom+Drabas&userId=44003e7498c6&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}