{"url": "https://towardsdatascience.com/how-to-set-up-data-collection-for-the-pigeon-avoidance-system-eba572fe6dc9", "time": 1683012599.552756, "path": "towardsdatascience.com/how-to-set-up-data-collection-for-the-pigeon-avoidance-system-eba572fe6dc9/", "webpage": {"metadata": {"title": "How to set up data collection for the pigeon avoidance system | by Tatiana Sennikova | Towards Data Science", "h1": "How to set up data collection for the pigeon avoidance system", "description": "How to setup a Raspberry Pi for the data collection. Python, image classification, Machine Learning, Deep Learning."}, "outgoing_paragraph_urls": [{"url": "https://medium.com/@tatianasennikova/how-artificial-intelligence-helped-me-to-win-the-war-against-the-pigeons-9458293983a1", "anchor_text": "Part 1", "paragraph_index": 0}, {"url": "https://medium.com/@tatianasennikova/how-to-use-deep-learning-to-shoo-pigeons-from-the-balcony-31a2704f2160", "anchor_text": "Part 3", "paragraph_index": 0}, {"url": "https://github.com/tsennikova/pigeon-avoidance-system", "anchor_text": "on GitHub", "paragraph_index": 2}, {"url": "https://www.linkedin.com/in/roegelein/", "anchor_text": "Daniel", "paragraph_index": 3}, {"url": "https://www.amazon.de/gp/product/B00PRFPY72/ref=ox_sc_act_title_1?smid=A1BRLTYVHCTXZH&psc=1", "anchor_text": "HC SR-501", "paragraph_index": 7}, {"url": "https://www.aliexpress.com/item/4000286688778.html?spm=a2g0s.9042311.0.0.b1a34c4dRkBVRE", "anchor_text": "AliExpress", "paragraph_index": 33}, {"url": "https://medium.com/@tatianasennikova/how-to-use-deep-learning-to-shoo-pigeons-from-the-balcony-31a2704f2160", "anchor_text": "How to use Deep Learning to shoo the pigeons from the balcony", "paragraph_index": 39}, {"url": "https://medium.com/@tatianasennikova/how-to-use-deep-learning-to-shoo-pigeons-from-the-balcony-31a2704f2160", "anchor_text": "Part 3", "paragraph_index": 39}, {"url": "https://www.linkedin.com/in/tatiana-sennikova-7b864140/", "anchor_text": "Linkedin", "paragraph_index": 40}], "all_paragraphs": ["Disclaimer: You are reading Part 2 that describes the technical setup. Part 1 gave an overview of the Pigeon Avoidance System and Part 3 provides details about the Pigeon Recognition Model.", "Now that we are already familiar with the problem, let\u2019s set up Raspberry Pi to collect images. In this part, I will be talking about the technical setup of the Pigeon Avoidance System. This article consists of three subparts:", "The general approach of how to set up a Raspberry Pi for the data collection could be adapted for your own Deep Learning project. All the code from this part is located on GitHub and can be reused.", "Before I start, I would like to give credit to my friend and colleague Daniel, who helped me to set up the Raspberry and was my tech support when something suddenly didn't work in production.", "Recall the diagram from Part 1:", "Hardware-wise the Pigeon Avoidance System includes a Raspberry Pi and three external components: motion sensor, camera, and stepping motor. All is orchestrated through the Main Pipeline. Main Pipeline is the most crucial piece of software that we need to write. Even before we have the Pigeon Recognition Model trained, we need to have it in place to collect the data. However, we first need to connect the external components to the Raspberry Pi. For that, we will need to use GPIO (general purpose input/output) pins, which can be accessed through a Python program. The pins are enumerated as it is shown on the picture:", "Any of the GPIO pins can be designated as an input or output pin and used for a wide range of purposes. There are also two 5V pins, two 3.3V pins, and several 0V ground pins that we will use to connect external Raspberry components.", "The first component that should be connected is a motion sensor. I used an infrared motion sensor HC SR-501 that can detect the infrared reflected by humans or animals. The diagram of the sensor is shown below.", "When a pigeon enters the active area of the sensor, it outputs a 3.3V signal to the GPIO pin it is connected to. The sensitive range of the motion detector is between two to seven meters and it can be calibrated by rotating the potentiometer R2. Potentiometer R1 calibrates the time delay between the high level outputs. There is also a jumper cap (yellow rectangle) that acts as a switch between two trigger modes:", "L: non-repeatable trigger mode. The sensor will output a high level after sensing the pigeon first time. It will continue to output the high level for the delay which is configured by R1. During this time, the sensor can not sense the pigeon. When the delay time is over, the sensor will output a low level.", "H: repeatable trigger mode. The sensor can detect the pigeon until it leaves the balcony. During that period, it is outputting at a high level. After the pigeon leaves, the sensor times a delay, also configured by R1, and then outputs a low level.", "I am setting up the sensor into repeatable trigger mode, as I want to annoy the pigeons until they finally leave the balcony. Image 4 (red circle) shows how to connect the motion sensor to the Raspberry. While testing the setup I am using a Raspberry Pi extension board. In a production system, I put the jumpers directly to the Raspberry pins.", "The stepping motor will rotate a shooing device that scares pigeons away. I use a stepping motor in my setup as it can be rotated by a specific angle and for a defined time interval.", "The stepping motor has a 5-way socket that connects to the stepping motor driver. The stepping motor driver is used to convert the weak input signal that comes from the Raspberry into a robust control signal to drive the stepping motor.", "The input signals to the stepping motor driver IN1-IN4 correspond to the output signals A-D that control the position of the stepping motor. The position control can be done programmatically. The stepping motor requires an external 5V power source that should share a common ground with the Raspberry Pi. Image 4 shows how to connect the stepping motor with the Raspberry Pi (green circles).", "Connecting the camera is the easiest part. The camera port is located near the HDMI connectors. We just need to attach the ribbon cable of the camera firmly, and we are good to go.", "When all the external components are connected, it will look like the mess on the picture:", "Now when all the components attached to the Raspberry Pi, we can write the python code that will manipulate it.", "We need to write python code that will trigger the Main Pipeline whenever motion is detected. Raspberry Pi has preinstalled the python package RPi.GPIO that provides a class to control the GPIOs. The first thing that we need to do is to set up a GPIO numbering, which defines the schema to address GPIO pins on the Raspberry Pi. Then we set up a pin on which we connected the motion sensor as the input port.", "After that, we write an event detection method. When a rising edge is detected on the pin_motion, the add_event_detect() will call main_pipeline regardless of whatever else is happening in the program.", "We need to run the motion detection method in the endless while loop. This way, the program will always be executed unless Keyboard Interrupt ends it.", "Now to the Main Pipeline. The Main Pipeline will call the camera and take the picture. After that, it will try to identify which objects we have on the image: pigeon, human, or nothing. Based on that, it will move the motor, sleep for 180 seconds, or do nothing.", "We take a picture with a take_pic() method that needs to be specified. First, we configure the camera module:", "As you might have noticed, I imported config, which is a configuration file in which I specify the GPIO pins for external components, image paths, and the paths to the training data for the image classification model.", "take_pic() takes pictures when a motion was detected and stores it in the img_path specified in the config. If we are still in the data collection stage, the images should be manually labeled with Pigeon Tinder, and the conditional expressions in the Main Pipeline should be commented out until we collected enough images and trained the model.", "If a pigeon was identified on the image, we need to shoo it by rotating the motor. The motor rotation is implemented in the rotate_motor method.", "Once again, we specify the pins to which the motor is attached. The stepping motor has four pins that are responsible for the rotation angle.", "The motor rotates at a certain angle (ex. from A to B).", "The pins specified in the code above:[12,16,20,21] correspond to the position of the stepping motor: [A, B, C, D]. For clockwise rotation, we need to iterate over that list in a forward sequence: A\u2192B\u2192C\u2192D\u2192A, etc. Each transition from one state to another (e.g., from A to B) is called a step. By controlling the number of rotation steps, we can control the rotation angle. By controlling the time between two steps, we can control the rotation speed.", "First, let\u2019s implement a method that would stop the motor:", "We iterate over the motor_ports and set the output level to low. Now we can implement a rotation function that has the same logic: stepwise iteration over the motor_ports and setting up output to high. The rotate_motor() method is slightly more complicated than what we wrote so far.", "After the Main Pipeline is ready, we can test our setup:", "Note that in this setup, I do not have the model been trained yet. Therefore, the motor runs every time the sensor detects a movement. Also, the plastic cat is not the final solution that is aimed to scare away pigeons. It is here just to indicate that the motor runs.", "Now it\u2019s time to install the Raspberry Pi in the production environment, which is my balcony. To protect the hardware from rain and pigeon attacks, I need waterproof plastic boxes. I ordered beautiful junction boxes on AliExpress. However, I know from my past experiences with shopping shoes and handbags that the delivery might take up to four weeks, and I wanted to start data collection ASAP. Therefore, I used LEGO to build houses for the camera and motion sensor. For the Raspberry itself, I used a Tupperware box, which I, as a good housewife, of course, have in my kitchen.", "The next step is to get the Raspberry powered. Initially, it is provided with a power cord, which is about one meter long. That is far from being enough. I do not have a power socket on the balcony. Therefore, I need to power the Raspberry from the outlet inside the house. For that, I soldered a new power cord, which is 5 meters long. With the new wire, I give the power directly to the Raspberry pins, which is usually not recommended, but still is kind of ok.", "Now is the time to wait for the pigeons. Essentially I need to test how well the motion detector covers my balcony area. Therefore I put oatmeal around my balcony\u2019s perimeter to attract the pigeons and make them walking around. This way, I can check if the motion sensor has dead corners where pigeons can not be detected. After just a few hours, I got the first image of a pigeon!", "Everyone who has seen this image noticed how fat is the pigeon. Indeed we have very fat pigeons here in D\u00fcsseldorf. However, a very unfortunate surprise was that the motion sensor detects pigeons only straight in front of it and ignores the pigeons that are left or right from the sensor. Therefore, I decided to install a second motion sensor that will look into the perpendicular direction. That way, the whole perimeter of my balcony is covered.", "The motion sensors cover two perpendicular edges of my balcony. On the right side of the balcony, I have plants. Therefore pigeons can not land there. To keep things simple, I connected both sensors with the same wire, which sends the signals from both sensors on the same pin. After putting another portion of oatmeal on my balcony, I realized that now the whole balcony is covered, and I am getting way more pigeon pictures then just with the one sensor. Another advantage of a new setup is that I can set the sensitivity of the sensors to the minimum and therefore get less false positives (images without the pigeons which are triggered by the wind moving tree brunches).", "Now the Pigeon Avoidance System is set up for the data collection. Whenever the sensor detects motion, the camera will take a picture and store it on the Raspberry Pi. Later on, I go through the photos with the Pigeon Tinder and label them for further training.", "This is the end of Part 2. In \u201cHow to use Deep Learning to shoo the pigeons from the balcony\u201d, I am talking about how to leverage the power of transfer learning for pigeon detection. Stay updated and, in the meantime, a sneak peek from Part 3: How to be taken for a pigeon? Just pretend you are about to build a nest.", "If you got any questions about this project, please feel free to reach me via Linkedin.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Solutions Engineer at Databricks | all views are my own"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Feba572fe6dc9&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-set-up-data-collection-for-the-pigeon-avoidance-system-eba572fe6dc9&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-set-up-data-collection-for-the-pigeon-avoidance-system-eba572fe6dc9&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-set-up-data-collection-for-the-pigeon-avoidance-system-eba572fe6dc9&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-set-up-data-collection-for-the-pigeon-avoidance-system-eba572fe6dc9&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----eba572fe6dc9--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----eba572fe6dc9--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://tatianasennikova.medium.com/?source=post_page-----eba572fe6dc9--------------------------------", "anchor_text": ""}, {"url": "https://tatianasennikova.medium.com/?source=post_page-----eba572fe6dc9--------------------------------", "anchor_text": "Tatiana Sennikova"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F3c2625b643a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-set-up-data-collection-for-the-pigeon-avoidance-system-eba572fe6dc9&user=Tatiana+Sennikova&userId=3c2625b643a&source=post_page-3c2625b643a----eba572fe6dc9---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Feba572fe6dc9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-set-up-data-collection-for-the-pigeon-avoidance-system-eba572fe6dc9&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Feba572fe6dc9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-set-up-data-collection-for-the-pigeon-avoidance-system-eba572fe6dc9&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://medium.com/@tatianasennikova/how-artificial-intelligence-helped-me-to-win-the-war-against-the-pigeons-9458293983a1", "anchor_text": "Part 1"}, {"url": "https://medium.com/@tatianasennikova/how-to-use-deep-learning-to-shoo-pigeons-from-the-balcony-31a2704f2160", "anchor_text": "Part 3"}, {"url": "https://unsplash.com/@andyjh07?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Andy Holmes"}, {"url": "https://unsplash.com/?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Unsplash"}, {"url": "https://github.com/tsennikova/pigeon-avoidance-system", "anchor_text": "on GitHub"}, {"url": "https://www.linkedin.com/in/roegelein/", "anchor_text": "Daniel"}, {"url": "https://www.raspberrypi.org/documentation/usage/gpio/", "anchor_text": "official raspberry documentation"}, {"url": "https://www.amazon.de/gp/product/B00PRFPY72/ref=ox_sc_act_title_1?smid=A1BRLTYVHCTXZH&psc=1", "anchor_text": "HC SR-501"}, {"url": "https://www.aliexpress.com/item/4000286688778.html?spm=a2g0s.9042311.0.0.b1a34c4dRkBVRE", "anchor_text": "AliExpress"}, {"url": "https://medium.com/@tatianasennikova/how-to-use-deep-learning-to-shoo-pigeons-from-the-balcony-31a2704f2160", "anchor_text": "How to use Deep Learning to shoo the pigeons from the balcony"}, {"url": "https://medium.com/@tatianasennikova/how-to-use-deep-learning-to-shoo-pigeons-from-the-balcony-31a2704f2160", "anchor_text": "Part 3"}, {"url": "https://www.linkedin.com/in/tatiana-sennikova-7b864140/", "anchor_text": "Linkedin"}, {"url": "https://medium.com/tag/data-science?source=post_page-----eba572fe6dc9---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/python?source=post_page-----eba572fe6dc9---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/internet-of-things?source=post_page-----eba572fe6dc9---------------internet_of_things-----------------", "anchor_text": "Internet Of Things"}, {"url": "https://medium.com/tag/raspberry-pi?source=post_page-----eba572fe6dc9---------------raspberry_pi-----------------", "anchor_text": "Raspberry Pi"}, {"url": "https://medium.com/tag/home-automation?source=post_page-----eba572fe6dc9---------------home_automation-----------------", "anchor_text": "Home Automation"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Feba572fe6dc9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-set-up-data-collection-for-the-pigeon-avoidance-system-eba572fe6dc9&user=Tatiana+Sennikova&userId=3c2625b643a&source=-----eba572fe6dc9---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Feba572fe6dc9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-set-up-data-collection-for-the-pigeon-avoidance-system-eba572fe6dc9&user=Tatiana+Sennikova&userId=3c2625b643a&source=-----eba572fe6dc9---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Feba572fe6dc9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-set-up-data-collection-for-the-pigeon-avoidance-system-eba572fe6dc9&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----eba572fe6dc9--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Feba572fe6dc9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-set-up-data-collection-for-the-pigeon-avoidance-system-eba572fe6dc9&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----eba572fe6dc9---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----eba572fe6dc9--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----eba572fe6dc9--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----eba572fe6dc9--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----eba572fe6dc9--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----eba572fe6dc9--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----eba572fe6dc9--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----eba572fe6dc9--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----eba572fe6dc9--------------------------------", "anchor_text": ""}, {"url": "https://tatianasennikova.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://tatianasennikova.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Tatiana Sennikova"}, {"url": "https://tatianasennikova.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "193 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F3c2625b643a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-set-up-data-collection-for-the-pigeon-avoidance-system-eba572fe6dc9&user=Tatiana+Sennikova&userId=3c2625b643a&source=post_page-3c2625b643a--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F58b331b01bd3&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-set-up-data-collection-for-the-pigeon-avoidance-system-eba572fe6dc9&newsletterV3=3c2625b643a&newsletterV3Id=58b331b01bd3&user=Tatiana+Sennikova&userId=3c2625b643a&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}