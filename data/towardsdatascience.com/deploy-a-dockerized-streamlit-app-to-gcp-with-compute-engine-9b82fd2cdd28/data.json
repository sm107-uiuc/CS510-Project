{"url": "https://towardsdatascience.com/deploy-a-dockerized-streamlit-app-to-gcp-with-compute-engine-9b82fd2cdd28", "time": 1683013628.82077, "path": "towardsdatascience.com/deploy-a-dockerized-streamlit-app-to-gcp-with-compute-engine-9b82fd2cdd28/", "webpage": {"metadata": {"title": "Deploy a Dockerized Streamlit App to GCP with Compute Engine | by Edward Krueger | Towards Data Science", "h1": "Deploy a Dockerized Streamlit App to GCP with Compute Engine", "description": "Building prototypes with the Streamlit framework is simple, at least to get things running on your own computer. Sharing with a broader audience is more complicated. Streamlit gives us the ability to\u2026"}, "outgoing_paragraph_urls": [{"url": "https://www.linkedin.com/in/edkrueger/", "anchor_text": "Edward Krueger", "paragraph_index": 0}, {"url": "https://www.linkedin.com/in/douglas-franklin-1a3a2aa3/", "anchor_text": "Douglas Franklin", "paragraph_index": 0}, {"url": "https://github.com/edkrueger/streamlit-template", "anchor_text": "GitHub repository", "paragraph_index": 3}, {"url": "https://cloud.google.com/run/docs/quickstarts/build-and-deploy#python", "anchor_text": "documentation", "paragraph_index": 10}, {"url": "http://localhost/", "anchor_text": "http://localhost/", "paragraph_index": 16}], "all_paragraphs": ["By: Edward Krueger and Douglas Franklin.", "Building prototypes with the Streamlit framework is simple, at least to get things running on your own computer. Sharing with a broader audience is more complicated.", "Streamlit gives us the ability to create clean apps with minimal effort and no cost. The app we use here is very simple, as this article will focus on deployment. We are going to deploy a Streamlit app to Google cloud platform compute instance following the steps laid out in this article.", "Here is a link to the GitHub repository with our code for the project. Note that we use Pipenv to manage our dependencies.", "Streamlit is a free and open-source app framework that presents an easy way for data scientists and machine learning engineers to create great Python apps quickly. Streamlit\u2019s opinioned nature makes building frontends easy. Lastly, Streamlit can make experimentation and production of data apps and machine learning analysis easier to do and to iterate on.", "Check out their work on GitHub.", "Docker is the best way to put apps into production. Docker uses a Dockerfile to build a container. The built container is stored in Google Container Registry, where it can be deployed. Docker containers can be built locally and will run on any system running Docker.", "Here is the Dockerfile we used for this project:", "The first line of our Dockerfile begins with FROM. This is where we import our OS or programming language.", "The next two lines involve setting up the environment and executing it on the server. The COPY line makes the local file, requirements.txt, available in the docker container. The RUN command can be followed with any bash code you would like executed. We use RUN to install our dependencies. ThenENV, sets our environment variable ENV to APP_HOME / app . This mimics the structure of our project directories, letting Docker know where our app is.", "These lines are part of the Python cloud platform structure and you can read more about them in Google\u2019s cloud documentation.", "The WORKDIR line sets our working directory to $APP_HOME. Then, the COPY line makes the remaining local files available in the docker container.", "Our final line in the Dockerfile runs our app at $PORT.", "Here we will explain how to build our container with Docker. Be aware that our Dockerfile is located in the backend directory.", "The docker build command treats each line of your Dockerfile as a \u2018Step\u2019 and provides a terminal output indicating when each step is run, as seen above.", "Now that our container is built on our VM, we can run our Streamlit app.", "Note: This will run the app on port 8080 inside the container and port 80 outside of the container. To reference it outside of the container, the URL is http://localhost/", "You may receive an error that looks like this.", "If this is the case, alter the internal port 80 to another number, 85 for example, and run docker run -p 85:8080 -e PORT=8080 streamlit-app.", "If you are developing locally you will need to install the Cloud Software Development Kit CLI tools.", "If you are developing on a cloud machine it is likely already configured with these tools. Open a terminal and enter these commands.", "This will prompt you several times to respond to prompts in the terminal to select, project and Virtual Machine (VM).", "This allows us to reference GCR_TAG as an environmental variable for reuse later.", "This builds our container on another machine in cloud build. Once this build is complete, our container is available in Google Container Registry (GCR) with the tag we\u2019ve specified.", "Now to deploy our dockerized app to a VM, we follow these steps.", "To publicly deploy, select \u201cAllow HTTP traffic.\u201d", "Be sure to replace GCR_TAG with your tag.", "You shouldn\u2019t run into any port errors on the fresh VM. If you do be sure to kill the process so you can maintain 80 as the default port. Otherwise, your localhost address will be the internal port you specified.", "On success, you will see two URLs populate your terminal.", "Now, use the GUI and click the dropdown under \u2018connect\u2019 and select \u2018Open in browser window.\u2019", "This will open a new terminal seen below. We once again need our GCR_TAG and can retrieve it with the command docker image ls .", "Once we have our GCR_TAG we save it using export and then rerun our app with the line docker run -p 80:8080 -e PORT=8080 $GCR_TAG.", "Note that we cannot find our app at the URL displayed in our terminal. To see our app running, we will use the GUI and find the URL displayed there.", "If you visit the URL, you will see your app! Be aware this is publically accessible.", "Note that this is \u2018Not secure\u2019 meaning there is no HTTPS handshake happening. If a website is non-secure, any information a user inputs on the page (e.g., name, address, credit card details) is not protected and can be easily stolen. However, on a secure website, the code is encrypted so any sensitive information is much harder to discover.", "Be sure to shut down your instances when you are done with them as they only bill you for runtime.", "Now we know how to Dockerize a streamlit app and deploy it to GCP. Streamlit is great for quick POC mockups and internal dashboards and now we have a way to test our Streamlit apps in the cloud!", "Thank you for reading! Can you deploy a Streamlit App?", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Data Scientist, Software Developer and Educator"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F9b82fd2cdd28&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdeploy-a-dockerized-streamlit-app-to-gcp-with-compute-engine-9b82fd2cdd28&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdeploy-a-dockerized-streamlit-app-to-gcp-with-compute-engine-9b82fd2cdd28&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdeploy-a-dockerized-streamlit-app-to-gcp-with-compute-engine-9b82fd2cdd28&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdeploy-a-dockerized-streamlit-app-to-gcp-with-compute-engine-9b82fd2cdd28&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----9b82fd2cdd28--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----9b82fd2cdd28--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.edkruegerdata.com/?source=post_page-----9b82fd2cdd28--------------------------------", "anchor_text": ""}, {"url": "https://medium.edkruegerdata.com/?source=post_page-----9b82fd2cdd28--------------------------------", "anchor_text": "Edward Krueger"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F4889b755e348&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdeploy-a-dockerized-streamlit-app-to-gcp-with-compute-engine-9b82fd2cdd28&user=Edward+Krueger&userId=4889b755e348&source=post_page-4889b755e348----9b82fd2cdd28---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F9b82fd2cdd28&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdeploy-a-dockerized-streamlit-app-to-gcp-with-compute-engine-9b82fd2cdd28&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F9b82fd2cdd28&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdeploy-a-dockerized-streamlit-app-to-gcp-with-compute-engine-9b82fd2cdd28&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://www.linkedin.com/in/edkrueger/", "anchor_text": "Edward Krueger"}, {"url": "https://www.linkedin.com/in/douglas-franklin-1a3a2aa3/", "anchor_text": "Douglas Franklin"}, {"url": "https://github.com/edkrueger/streamlit-template", "anchor_text": "GitHub repository"}, {"url": "https://github.com/edkrueger/streamlit-template", "anchor_text": "edkrueger/streamlit-templateChange into backend directory. Run pipenv install \u2014 dev to install the env. Run pipenv shell. Run pre-commit install to\u2026github.com"}, {"url": "https://github.com/streamlit/streamlit", "anchor_text": "streamlit/streamlitStreamlit \u2014 The fastest way to build data apps in Python \u2014 streamlit/streamlitgithub.com"}, {"url": "https://cloud.google.com/run/docs/quickstarts/build-and-deploy#python", "anchor_text": "documentation"}, {"url": "http://localhost/", "anchor_text": "http://localhost/"}, {"url": "https://cloud.google.com/sdk/?utm_source=google&utm_medium=cpc&utm_campaign=na-US-all-en-dr-bkws-all-all-trial-e-dr-1009135&utm_content=text-ad-lpsitelinkCCexp2-any-DEV_c-CRE_79747435927-ADGP_Hybrid+%7C+AW+SEM+%7C+BKWS+%7C+US+%7C+en+%7C+EXA+~+Google+Cloud+SDK-KWID_43700007037826431-kwd-76317487932&utm_term=KW_google%20cloud%20sdk-ST_google+cloud+sdk&gclid=Cj0KCQjw-uH6BRDQARIsAI3I-Uc-oIyaUf1X-nC0P0hd1VOZzMtHMXnZM-qZwD3L6y5lrLdlYtqKaEAaAg-mEALw_wcB", "anchor_text": "Cloud SDK Command Line Tools | Cloud SDK: Command Line InterfaceSend feedback Google Cloud Next '20: OnAir | Explore curated content on demand, every Tuesday starting July 14\u2026cloud.google.com"}, {"url": "https://medium.com/tag/editors-pick?source=post_page-----9b82fd2cdd28---------------editors_pick-----------------", "anchor_text": "Editors Pick"}, {"url": "https://medium.com/tag/towards-data-science?source=post_page-----9b82fd2cdd28---------------towards_data_science-----------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/tag/cloud-computing?source=post_page-----9b82fd2cdd28---------------cloud_computing-----------------", "anchor_text": "Cloud Computing"}, {"url": "https://medium.com/tag/software-development?source=post_page-----9b82fd2cdd28---------------software_development-----------------", "anchor_text": "Software Development"}, {"url": "https://medium.com/tag/app-development?source=post_page-----9b82fd2cdd28---------------app_development-----------------", "anchor_text": "App Development"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F9b82fd2cdd28&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdeploy-a-dockerized-streamlit-app-to-gcp-with-compute-engine-9b82fd2cdd28&user=Edward+Krueger&userId=4889b755e348&source=-----9b82fd2cdd28---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F9b82fd2cdd28&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdeploy-a-dockerized-streamlit-app-to-gcp-with-compute-engine-9b82fd2cdd28&user=Edward+Krueger&userId=4889b755e348&source=-----9b82fd2cdd28---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F9b82fd2cdd28&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdeploy-a-dockerized-streamlit-app-to-gcp-with-compute-engine-9b82fd2cdd28&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----9b82fd2cdd28--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F9b82fd2cdd28&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdeploy-a-dockerized-streamlit-app-to-gcp-with-compute-engine-9b82fd2cdd28&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----9b82fd2cdd28---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----9b82fd2cdd28--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----9b82fd2cdd28--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----9b82fd2cdd28--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----9b82fd2cdd28--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----9b82fd2cdd28--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----9b82fd2cdd28--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----9b82fd2cdd28--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----9b82fd2cdd28--------------------------------", "anchor_text": ""}, {"url": "https://medium.edkruegerdata.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.edkruegerdata.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Edward Krueger"}, {"url": "https://medium.edkruegerdata.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "699 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F4889b755e348&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdeploy-a-dockerized-streamlit-app-to-gcp-with-compute-engine-9b82fd2cdd28&user=Edward+Krueger&userId=4889b755e348&source=post_page-4889b755e348--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F1f629c0dbfb9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdeploy-a-dockerized-streamlit-app-to-gcp-with-compute-engine-9b82fd2cdd28&newsletterV3=4889b755e348&newsletterV3Id=1f629c0dbfb9&user=Edward+Krueger&userId=4889b755e348&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}