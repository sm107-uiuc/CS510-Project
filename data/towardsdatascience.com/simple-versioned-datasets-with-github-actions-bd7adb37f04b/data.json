{"url": "https://towardsdatascience.com/simple-versioned-datasets-with-github-actions-bd7adb37f04b", "time": 1683015064.20964, "path": "towardsdatascience.com/simple-versioned-datasets-with-github-actions-bd7adb37f04b/", "webpage": {"metadata": {"title": "Simple Versioned Datasets With Github Actions | by Dylan Roy | Towards Data Science", "h1": "Simple Versioned Datasets With Github Actions", "description": "A couple days ago stumbled across an article about the concept the author coined \u201cgit scraping\u201d. The most compelling aspect of this process was that I, as developer, don\u2019t have to maintain servers or\u2026"}, "outgoing_paragraph_urls": [{"url": "https://simonwillison.net/2020/Oct/9/git-scraping/", "anchor_text": "article", "paragraph_index": 0}, {"url": "https://til.simonwillison.net/til/til/github-actions_commit-if-file-changed.md", "anchor_text": "here", "paragraph_index": 18}, {"url": "http://dylanroy.com", "anchor_text": "dylanroy.com", "paragraph_index": 25}], "all_paragraphs": ["A couple days ago stumbled across an article about the concept the author coined \u201cgit scraping\u201d. The most compelling aspect of this process was that I, as developer, don\u2019t have to maintain servers or a large codebase to achieve an up-to-date versioned dataset. I could actually take advantage of the version control capabilities of git, and Actions from Github. This process was so interesting to me that I had to try it for myself. So here is my journey documented so that you can do the same for your own datasets.", "To fully take advantage of git versioning for my dataset I wanted to look for a dataset where there would be added value in seeing the changes to it over time. I also didn\u2019t want these changes to be frequent so that the commits would be sparse so that the individual updates are easier to identify for this exercise.", "After failing to find a good brewery dataset I settled on monitoring this table of chief executive officers (CEO) of notable companies. This list appeared as a table within a Wikipedia page.", "With my dataset now identified I just had to put together some code that would retrieve the information we want to store. I also wanted to make sure to expose it in a way that will be easy to ingest in the future, in an automated way, so considering this I decided store this data as a CSV file.", "With the solution that I came up with, the following Python 3 packages are needed. In the final repository these show up in the requirements.txt file.", "The first thing that I needed to do was to ingest the table from Wikipedia. Luckily Pandas has just the function for that, read_html.", "In the code above I am retrieving that table by using read_html, identifying the header as the first row, and choosing the first table to add to the DataFrame. At this point I have the file loaded into a Pandas Dataframe, but still need to export this file to the CSV file format. Before I did so I noticed an issue with the ingested data.", "As you can see I still needed to remove the reference annotations that show up in the results. To do this I just added a regular expression to strip these annotations.", "It was easier to first convert the DataFrame to a CSV file first so I converted my data format before applying the regular expression for stripping the annotations. At his point all I needed to do was write to the file that I want the data to reside in, and the dataset has be successfully landed in the intended destination.", "If you want to use this code as a reference implementation here is the final main function that is run to update the dataset.", "At this point I was able to ingest the table from Wikipedia, and write the cleaned results to a CSV file. The next step would be to now schedule this process, and commit the results to Github, if and only if the data changed.", "Before I built out the steps of the Action workflow I needed to schedule it to run the code just developed every hour. In order to do this I needed to define in the predefined yaml format the cron schedule for a frequency of every hour.", "Before building out my workflow I wanted to define the image that the Github Action needs to run on. For simplicities sake I just have it running using the latest version of ubuntu, but in the future will use some lighter images such as a python slim version or alpine once I have had some time to go more in-depth with actions.", "This Github Action will have a number of steps in its workflow before the dataset can be monitored for changes. The first step of our cron workflow will be to checkout a working copy of our master branch. I have been noticing lately with my experimentations that this is usually the first step of most of my Actions that I leverage.", "In lines 4 and 5 above we don\u2019t actually need to specify the fetch-depth as the default is 1, but this defines the number of commits to fetch. At first I was going to try, and use this to compare the versions of the datasets, but as you will notice later this was a rabbit-hole that didn\u2019t need exploring. The way that I was able rationalize all of this work was to keep a reference to this capability in my write up for future readers to see.", "Now that I had a working copy of the code to run in the Action workflow the next step will be to get Python 3.8 setup to start running the code. As with the previous step you can see below that Github provides us an action for this as well. Python versions can be easily set, but for my example 3.8 was the target.", "Now that we have Python installed we want to install the required libraries. I included a requirements.txt file with this repo, but this step just as easily could be a pip insall pandas lxml.", "At this point in the workflow everything that is required to run our code to update the dataset has been provided to the environment so in this step we will now do just that.", "At this point we have the latest version of our dataset which may or may not have changed. So what we will do here is only commit, and push if the data has updated. Note that here we exit the action early, and don\u2019t push if this is the case. There are a few different patterns that can be used here, but Simon Wilson has a reference to a few here if you are curious. Otherwise a clean way to achieve what we want can be found below.", "Here is the action flow in all of it\u2019s glory feel free to use for your purposes however you want, but at this point all that is needed is to commit the less than 10 lines of Python code, and the yaml with the Action workflow, and everything should be set up to have a versioned dataset with it\u2019s history preserved.", "I usually find it easier when I have a reference implementation to work from so here is the repo that contains the complete codebase with the action workflow that I just stepped through.", "As you can see it\u2019s actually pretty easy to ingest, and keep a dataset up to date without you own infrastructure, and a little bit of code. Github Actions have really given more options for simple automations. In the article\u2019s example my repo was public so in support of open sourced projects Github has made this completely free.", "As you can see from my journey with a little Python knowledge it isn\u2019t difficult to start keeping datasets up to date with versioning leveraging Github Actions.", "I have another tutorial that I will be publishing this week so feel free to follow me so that you don\u2019t miss it, and if you are interested in my other tutorials I have listed them below.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Engineer & Side Project Junkie sharing what I am working on so readers like you can benefit from my experiences. Subscribe here for even more (dylanroy.com)"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fbd7adb37f04b&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsimple-versioned-datasets-with-github-actions-bd7adb37f04b&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsimple-versioned-datasets-with-github-actions-bd7adb37f04b&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsimple-versioned-datasets-with-github-actions-bd7adb37f04b&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsimple-versioned-datasets-with-github-actions-bd7adb37f04b&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----bd7adb37f04b--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----bd7adb37f04b--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://dylanroy.medium.com/?source=post_page-----bd7adb37f04b--------------------------------", "anchor_text": ""}, {"url": "https://dylanroy.medium.com/?source=post_page-----bd7adb37f04b--------------------------------", "anchor_text": "Dylan Roy"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fb1a89a0af139&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsimple-versioned-datasets-with-github-actions-bd7adb37f04b&user=Dylan+Roy&userId=b1a89a0af139&source=post_page-b1a89a0af139----bd7adb37f04b---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fbd7adb37f04b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsimple-versioned-datasets-with-github-actions-bd7adb37f04b&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fbd7adb37f04b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsimple-versioned-datasets-with-github-actions-bd7adb37f04b&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://towardsdatascience.com/tagged/hands-on-tutorials", "anchor_text": "Hands-on Tutorials"}, {"url": "https://www.pexels.com/@kevin-ku-92347?utm_content=attributionCopyText&utm_medium=referral&utm_source=pexels", "anchor_text": "Kevin Ku"}, {"url": "https://www.pexels.com/photo/coding-computer-data-depth-of-field-577585/?utm_content=attributionCopyText&utm_medium=referral&utm_source=pexels", "anchor_text": "Pexels"}, {"url": "https://simonwillison.net/2020/Oct/9/git-scraping/", "anchor_text": "article"}, {"url": "https://en.wikipedia.org/wiki/List_of_chief_executive_officers", "anchor_text": "List of chief executive officersFrom Wikipedia, the free encyclopedia The following is a list of chief executive officers of notable companies. The\u2026en.wikipedia.org"}, {"url": "https://til.simonwillison.net/til/til/github-actions_commit-if-file-changed.md", "anchor_text": "here"}, {"url": "https://github.com/dylanroy/ceo-dataset", "anchor_text": "dylanroy/ceo-datasetYou can\u2019t perform that action at this time. You signed in with another tab or window. You signed out in another tab or\u2026github.com"}, {"url": "https://towardsdatascience.com/create-beautiful-architecture-diagrams-with-python-7792a1485f97", "anchor_text": "Create Beautiful Architecture Diagrams with PythonStop spending time manually tweaking misaligned arrowstowardsdatascience.com"}, {"url": "https://simonwillison.net/2020/Oct/9/git-scraping/", "anchor_text": "https://simonwillison.net/2020/Oct/9/git-scraping/"}, {"url": "https://til.simonwillison.net/til/til/github-actions_commit-if-file-changed.md", "anchor_text": "https://til.simonwillison.net/til/til/github-actions_commit-if-file-changed.md"}, {"url": "https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_html.html", "anchor_text": "https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_html.html"}, {"url": "https://medium.com/tag/programming?source=post_page-----bd7adb37f04b---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/tag/python?source=post_page-----bd7adb37f04b---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/github-actions?source=post_page-----bd7adb37f04b---------------github_actions-----------------", "anchor_text": "Github Actions"}, {"url": "https://medium.com/tag/hands-on-tutorials?source=post_page-----bd7adb37f04b---------------hands_on_tutorials-----------------", "anchor_text": "Hands On Tutorials"}, {"url": "https://medium.com/tag/data-science?source=post_page-----bd7adb37f04b---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fbd7adb37f04b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsimple-versioned-datasets-with-github-actions-bd7adb37f04b&user=Dylan+Roy&userId=b1a89a0af139&source=-----bd7adb37f04b---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fbd7adb37f04b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsimple-versioned-datasets-with-github-actions-bd7adb37f04b&user=Dylan+Roy&userId=b1a89a0af139&source=-----bd7adb37f04b---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fbd7adb37f04b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsimple-versioned-datasets-with-github-actions-bd7adb37f04b&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----bd7adb37f04b--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fbd7adb37f04b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsimple-versioned-datasets-with-github-actions-bd7adb37f04b&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----bd7adb37f04b---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----bd7adb37f04b--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----bd7adb37f04b--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----bd7adb37f04b--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----bd7adb37f04b--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----bd7adb37f04b--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----bd7adb37f04b--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----bd7adb37f04b--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----bd7adb37f04b--------------------------------", "anchor_text": ""}, {"url": "https://dylanroy.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://dylanroy.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Dylan Roy"}, {"url": "https://dylanroy.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "587 Followers"}, {"url": "http://dylanroy.com", "anchor_text": "dylanroy.com"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fb1a89a0af139&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsimple-versioned-datasets-with-github-actions-bd7adb37f04b&user=Dylan+Roy&userId=b1a89a0af139&source=post_page-b1a89a0af139--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F8468415fd84&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsimple-versioned-datasets-with-github-actions-bd7adb37f04b&newsletterV3=b1a89a0af139&newsletterV3Id=8468415fd84&user=Dylan+Roy&userId=b1a89a0af139&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}