{"url": "https://towardsdatascience.com/i-built-the-t-with-python-and-revamped-it-632127364f4e", "time": 1682994365.801651, "path": "towardsdatascience.com/i-built-the-t-with-python-and-revamped-it-632127364f4e/", "webpage": {"metadata": {"title": "I built the T with Python (and revamped it) | by Amy Vogel | Towards Data Science", "h1": "I built the T with Python (and revamped it)", "description": "This fall, I took a Network Models class (1.022) at MIT. The class covered a lot of cool concepts of networks/graphs, such as node centralities and shortest paths, as well as important applications\u2026"}, "outgoing_paragraph_urls": [{"url": "https://learning-modules.mit.edu/class/index.html?uuid=/course/1/fa18/1.022#info", "anchor_text": "1.022", "paragraph_index": 0}, {"url": "https://www.mbta.com/schedules/subway", "anchor_text": "this page", "paragraph_index": 2}, {"url": "https://www.mbta.com/developers/gtfs", "anchor_text": "MBTA\u2019s GTFS data", "paragraph_index": 3}, {"url": "https://developers.google.com/transit/gtfs/", "anchor_text": "GTFS data", "paragraph_index": 3}, {"url": "http://gtfs.org/reference#stopstxt", "anchor_text": "all the information", "paragraph_index": 3}, {"url": "https://gist.github.com/amyvogel/e376dda1d1fd4ed196153caad6ad5d22", "anchor_text": "here", "paragraph_index": 6}, {"url": "https://gist.github.com/amyvogel/f75c9e488129e0837109a1ac1797e49e", "anchor_text": "here", "paragraph_index": 8}, {"url": "https://www.bostonherald.com/2018/10/18/boston-wants-link-of-red-blue-lines-back-on-track/", "anchor_text": "talk for years", "paragraph_index": 13}, {"url": "https://gist.github.com/amyvogel/70628d6337e61468579730cf7db9b128", "anchor_text": "another version of average_shortest_path", "paragraph_index": 14}], "all_paragraphs": ["This fall, I took a Network Models class (1.022) at MIT. The class covered a lot of cool concepts of networks/graphs, such as node centralities and shortest paths, as well as important applications, like the behaviors of epidemics and social networks. Another application of this theory \u2014 the one I chose to do my final project on \u2014 is transportation networks. For my final project in this class, I modeled the T and experimented with making some changes to the network.", "The T is Boston\u2019s subway system. The Massachusetts Bay Transportation Authority (MBTA) operates the T, as well as the buses and commuter rail. There are five lines on the T: the Red, Blue, Green, Orange, and Silver Lines. The Silver Line is actually a bus, and I did not include it in my model.", "For the official map of the T, reference this page.", "The first thing you should know is that the MBTA\u2019s GTFS data is publicly available online. GTFS data is a format of plain text (.txt) data that Google created in order to standardize the way public transit agencies can share/report their routes with developers. In particular, I used the \u2018stops.txt\u2019 file, which reports all the information on the MBTA\u2019s stops. This data gave me the information I needed to create the network\u2019s nodes, aka the T-stops.", "In graph theory, graphs are made up of nodes and edges. Edges connect nodes; they can also have weights that represent their relative significance. For the purpose of the T network, edges represent connections between stations, i.e. where the train tracks are. The weights of those edges signify travel times between stations.", "With the help of a time-scaled map of the T, I wrote out a text file that specifies each edge between stations, and the travel time. Each of the 116 lines in the file takes this form:", "You can see the whole file here.", "Using the Networkx package on Python, I made a Graph object that represented the subway network. I also wrote a function to plot the network using geographic coordinates for stations and keeping the colors of the edges consistent with the colors of the lines.", "But I wasn\u2019t just interested in the network of stations; I wanted to know how many people actually ride the T, and which routes are the most popular. I reached out the MBTA, and was able to get ahold of some demand data from Fall 2017! Using the data they gave me, I implemented a similar procedure to build another network. In the \u201cdemand\u201d network, edge weights represent the average number of riders between a pair of stations on a weekday. You can see the code I wrote for that here.", "I started with some initial analysis on node centralities. On the map graph, Copley and Arlington have the highest closeness centralities. Practically, this means that those two stations are the \u201cclosest\u201d (in travel time) to all other stations on the network. Likewise, Copley has the highest betweenness centrality, meaning that the highest number of shortest paths on the network go through Copley (note that this is not weighted by travel time). State Street has the highest eigenvector and Katz centralities, which means it is the most influential (again, not weighted with travel time or demand). The only meaning that degree centrality has on the map graph is to point out the stations where transfers occurred. Thus, it is more relevant to calculate degree centrality using the demand graph. Park Street has the highest degree centrality, meaning it has the most traffic/demand. Below is a zoomed view of the map graph, with the central nodes labeled.", "I also calculated the average passenger\u2019s trip time on the T. To do this, I made a few assumptions. First, I assumed that passengers would travel from their origin to their destination via the shortest path (measured in minutes). I also assumed that every transfer between lines would take five minutes. This was an important specification to make because otherwise, my algorithm would think transfers were \u201cfree\u201d \u2014 when in reality passengers like to avoid transferring as much as they can. To account for transfers, I made another version of my edges file; I split up every station that had a transfer (e.g. Park Street \u2192 Park Street Red and Park Street Green), and instead connected the two stations via a 5-minute edge. Below, see what those transfer edges looked like in the text file.", "My algorithm calculates average passenger trip time like this:", "Using this algorithm, I found that the average trip time on the T (on a weekday) is 14.7 minutes.", "There has been talk for years about extending the Blue Line from Bowdoin \u2014 where it ends \u2014 to Charles/MGH. The Red and Blue Lines are the only two main lines of the network (sorry, Silver Line) that are not directly connected \u2014 currently, you\u2019d have to take either the Orange or Green Lines to get between the two lines without leaving the subway. Since the two lines get pretty close geographically (as in, a 5-minute walk), it can feel pretty silly to take the Orange or Green line one stop just to avoid tapping your Charlie Card again and paying another $2.25.", "What would be the benefit of a Red Line-Blue Line connection? My model predicted that the Red Line-Blue Line connection might not be very useful, after all. The average passenger trip time was 14.70 minutes without the connection; with the connection, the average passenger trip time became 14.66 minutes. On average, this connection will make a negligible difference to passengers (particularly compared to the inconvenience of the construction period). However, the connection would not make any difference to passengers unless they actually travel between the Red and Blue Lines. So, I also looked at that difference. I made another version of average_shortest_path that only looks at the passengers traveling between two distinct groups of stations \u2014 in this case, Red Line stations and Blue Line stations.", "Without the connection, passengers that travel between the two lines have an average trip time of 16.61 minutes. With the connection, this goes down to 15.77 minutes, so it saves almost one minute per day for these passengers. This is a more significant difference. Also, this model assumes that demand will not change when the new connection is added; however, if more passengers started taking the T between the Red and Blue Lines because it became more convenient, this would further decrease the average trip time on the network.", "Currently, the T does not have any express lines. I wanted to find out what would be the best express connection to add, and how much of a difference it would make. I should note that the metrics I used to determine this are fairly arbitrary, but with some more information and more time, my model could produce more accurate results.", "I looked at two express line scenarios. In Case #1, an express train would run on tracks that already exist, but about 40% faster than it would take normally (because it wouldn\u2019t be making stops in between). In Case #2, an express train would run on brand new tracks that go in a straight line between the two stations but runs at the same average speed of other trains.", "In order to determine the best express line for either case, I wrote a function (build_best_xline) that tested each possible connection with the given specifications and returned the edge that decreased average passenger trip time the most.", "In Case #1 where no new tracks are laid, Park Street to Quincy Adams would be the best new connection. In Case #2 where the new line runs on tracks laid in a straight line between two stations, the best new line would be from Downtown Crossing to Quincy Center.", "Of course, all the findings that I have presented thus far are based on a few assumptions and have plenty of room for error. The travel times between stations are merely rough predictions. Additionally, the specifications for the new express line are fairly arbitrary. Also, the assumed 5-minute travel time when transferring lines is arbitrary, although it partially serves its purpose in assigning a non-zero cost to transfer lines. But since finding the shortest path between stations was an essential part of my calculations, it would be good to redo the project with more accurate and specific transfer times. I also only used demand data for passengers traveling between two T-stops; this does not account for all the passengers on the T, because many passengers start and/or end their trip from a bus stop or commuter rail.", "I think this model of the T conveys the general behavior of the network, but there are many levels of precision that are missing. Without more precise details in the calculations, it is hard to tell how accurate my results actually are. Nevertheless, there are some cool takeaways here.", "We can use notions of betweenness centrality, degree centrality, and shortest paths to analyze potential improvements to the network. Theoretically, this analysis can predict how helpful certain modifications to the network would be. But to really understand the effect of those changes, we also need to predict how demand would change \u2014 and that is much more difficult.", "In future work, I would like to use this type of analysis to recommend ways to increase ridership on the T. For example, rather than just looking at current demand on the T, I could look at Uber\u2019s demand data. I suspect that people take Ubers more frequently between two points when public transit does not sufficiently connect those two points. Thus, it might be worthwhile to look at how to better connect pairs of T-stops that are often served by cars instead. I would also like to expand the network model so it is more comprehensive; obviously, buses (and the Silver Line\u2026) are an important consideration. A future iteration of the model could include all of these connections, as well.", "If you have any questions about my process or any ideas for different modifications to the network that you want me to test out, please leave a comment below or reach out to me directly!", "Thank you to everyone who helped me bring this project to life! Thanks to the MBTA for supplying me with ridership data to build the demand network. Thanks to my professor, Amir Ajorlou, and my TA, Paolo Bertolotti, for providing guidance and feedback on my project.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "student | engineer | rider of public transit"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F632127364f4e&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fi-built-the-t-with-python-and-revamped-it-632127364f4e&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fi-built-the-t-with-python-and-revamped-it-632127364f4e&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fi-built-the-t-with-python-and-revamped-it-632127364f4e&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fi-built-the-t-with-python-and-revamped-it-632127364f4e&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----632127364f4e--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----632127364f4e--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@amyvogel?source=post_page-----632127364f4e--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@amyvogel?source=post_page-----632127364f4e--------------------------------", "anchor_text": "Amy Vogel"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F3d26c0331370&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fi-built-the-t-with-python-and-revamped-it-632127364f4e&user=Amy+Vogel&userId=3d26c0331370&source=post_page-3d26c0331370----632127364f4e---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F632127364f4e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fi-built-the-t-with-python-and-revamped-it-632127364f4e&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F632127364f4e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fi-built-the-t-with-python-and-revamped-it-632127364f4e&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://learning-modules.mit.edu/class/index.html?uuid=/course/1/fa18/1.022#info", "anchor_text": "1.022"}, {"url": "https://www.mbta.com/schedules/subway", "anchor_text": "this page"}, {"url": "https://www.mbta.com/developers/gtfs", "anchor_text": "MBTA\u2019s GTFS data"}, {"url": "https://developers.google.com/transit/gtfs/", "anchor_text": "GTFS data"}, {"url": "http://gtfs.org/reference#stopstxt", "anchor_text": "all the information"}, {"url": "http://www.stonebrowndesign.com/boston-t-time.html", "anchor_text": "Stonebrown Design"}, {"url": "https://gist.github.com/amyvogel/e376dda1d1fd4ed196153caad6ad5d22", "anchor_text": "here"}, {"url": "https://gist.github.com/amyvogel/f75c9e488129e0837109a1ac1797e49e", "anchor_text": "here"}, {"url": "https://www.bostonherald.com/2018/10/18/boston-wants-link-of-red-blue-lines-back-on-track/", "anchor_text": "talk for years"}, {"url": "https://gist.github.com/amyvogel/70628d6337e61468579730cf7db9b128", "anchor_text": "another version of average_shortest_path"}, {"url": "https://medium.com/tag/public-transit?source=post_page-----632127364f4e---------------public_transit-----------------", "anchor_text": "Public Transit"}, {"url": "https://medium.com/tag/python?source=post_page-----632127364f4e---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/boston?source=post_page-----632127364f4e---------------boston-----------------", "anchor_text": "Boston"}, {"url": "https://medium.com/tag/mit?source=post_page-----632127364f4e---------------mit-----------------", "anchor_text": "MIT"}, {"url": "https://medium.com/tag/towards-data-science?source=post_page-----632127364f4e---------------towards_data_science-----------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F632127364f4e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fi-built-the-t-with-python-and-revamped-it-632127364f4e&user=Amy+Vogel&userId=3d26c0331370&source=-----632127364f4e---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F632127364f4e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fi-built-the-t-with-python-and-revamped-it-632127364f4e&user=Amy+Vogel&userId=3d26c0331370&source=-----632127364f4e---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F632127364f4e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fi-built-the-t-with-python-and-revamped-it-632127364f4e&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----632127364f4e--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F632127364f4e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fi-built-the-t-with-python-and-revamped-it-632127364f4e&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----632127364f4e---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----632127364f4e--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----632127364f4e--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----632127364f4e--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----632127364f4e--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----632127364f4e--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----632127364f4e--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----632127364f4e--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----632127364f4e--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@amyvogel?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@amyvogel?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Amy Vogel"}, {"url": "https://medium.com/@amyvogel/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "48 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F3d26c0331370&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fi-built-the-t-with-python-and-revamped-it-632127364f4e&user=Amy+Vogel&userId=3d26c0331370&source=post_page-3d26c0331370--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F8e28143a5bcc&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fi-built-the-t-with-python-and-revamped-it-632127364f4e&newsletterV3=3d26c0331370&newsletterV3Id=8e28143a5bcc&user=Amy+Vogel&userId=3d26c0331370&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}