{"url": "https://towardsdatascience.com/san-franciscos-opioid-crisis-and-drug-problem-and-effects-on-public-safety-1ffad5040e0f", "time": 1683002536.728648, "path": "towardsdatascience.com/san-franciscos-opioid-crisis-and-drug-problem-and-effects-on-public-safety-1ffad5040e0f/", "webpage": {"metadata": {"title": "San Francisco\u2019s Opioid Crisis and Drug Problem and effects on public safety | by Chinmay Wyawahare | Towards Data Science", "h1": "San Francisco\u2019s Opioid Crisis and Drug Problem and effects on public safety", "description": "The War on Drugs is a phase used to refer to a government led initiative that aims to stop illegal drug use, distribution, and trade by increasing and enforcing penalties for offenders. The movement\u2026"}, "outgoing_paragraph_urls": [{"url": "https://www.linkedin.com/in/kartikeya-shukla-738a48160", "anchor_text": "Kartikeya Shukla", "paragraph_index": 0}, {"url": "https://github.com/hs3812", "anchor_text": "Hao Shu", "paragraph_index": 0}], "all_paragraphs": ["The War on Drugs is a phase used to refer to a government led initiative that aims to stop illegal drug use, distribution, and trade by increasing and enforcing penalties for offenders. The movement started in the 1970s and is still evolving today. Consequently, numerous US states are experiencing an opioid crisis in recent times. There is an ongoing debate, the opioid crisis is the product of Mexican and Central American migration \u2014 rather than the deregulation of Big Pharma and the failures of a private health care system. Consequently, at this instance, San Francisco is facing a major drug problem and opioid crisis. I along with Kartikeya Shukla and Hao Shu chose this dataset to perform EDA and apply data science classification algorithms like XGBoost, KNN, Regression, Naive Bayes and Random Forest to derive insights from visualizing the results. San Francisco (SF) has a long history of pushing the envelope on progressive public health solutions, including medical cannabis and needle exchange, before either was legal or broadly embraced. It is so out of proportion, that California passed a bill allowing SF to open Safe Injection Sites (SIS).", "San Francisco (SF) has a long history of pushing the envelope on progressive pub- lic health solutions, including medical cannabis and needle exchange, before either was legal or broadly embraced. It is so out of proportion, that California passed a bill allowing SF to open Safe Injection Sites (SIS).", "Safe injection sites are medically supervised facilities designed to provide a hygienic and stress-free environment in which individuals are able to consume illicit recreational drugs intravenously and reduce nuisance from public drug use. They are part of a harm reduction approach towards drug problems. North America\u2019s first SIS site opened in the Downtown Eastside (DTES) neighborhood of Vancouver in 2003.", "Comparing types of crime across different neighborhoods. What are the top 5 neighborhoods, where you can get assaulted? Do certain \u201cpairs\u201d of crime frequently co-occur together in a certain neighborhood?", "Identifying potential neighborhoods for installing SIS for San Francisco government", "Our data is collected from the San Francisco police department\u2019s database. It is historical data regarding crimes from Jan 2003 to May 2018. The dataset has 13 columns and 2215024 rows.", "2. There were 915 distinct crime descriptions, and the descriptions determine whether the crime was narcotics related or not. So, we counted occurrences for each crime description and filtered those that were below 97th percentile and kept the rest for creating the cluster maps.", "3. Created a cluster map, to explore the distributions of different types (i.e. of crimes across each PdDistrict (i.e. Police District)). Again, since this distribution was skewed, it affected our model (shown below). One can observe that Grand Theft Auto is an outlier besides that we gain no information, thus normalization was required.", "4. Thus normalization was performed using \u200bmin-max normalization\u200b, since taking the log does not retain the scale as to how large/small is one feature compared to another. Below is the normalized cluster map:", "Here we can observe the following:", "(i) Southern: extremely high occurrences of theft, including theft from auto(ii) Bayview: significant occurrences of violences and threats", "(iii) Tenderloin: seems to be an outlier, with exceedingly high occurrences of possession of narcotics paraphernalia. Tenderloin, seems like a potential candidate to install SIS, although it could be a false positive (i.e. these could be due marijuana). Thus one needs to delve deeper.", "5. Next, we filtered narcotics related crime using some regular expressions and string pattern matching, and counted occurrences of each distinct narcotics related description. Again the distribution was skewed, and it affected the cluster-map shown below. One can observe Tenderloin is an outlier and we gain no other information.", "6. Below is normalized cluster-map which shows distribution of narcotics related crimes across each PdDistrict.", "\u200bFrom the cluster-map above we can clearly conclude that, Tenderloin, Southern, Mission and Northern are the optimal candidates for installing SIS", "7. Thereafter time-series analysis was performed, to analyze opioid trends across time. First we compressed numerous narcotics related crime descriptions to create opioid groups/features (i.e. barbiturate features, coke features, marijuana features, meth features etc). Then we created a 30 days window for each group, and counted the no. of occurrences for each group across this 30 day window (i.e. each month) for each month from 01/01/2003 to 05/15/2018.", "To remove cyclic features of the months \u2014 we indexed them from 0 to 187. Below is a stacked histogram, to represent these trends. As you can see meth and heroin related incidents significantly went up.", "8. To make the trends clearer, below is the normalized distribution of opioid trends across the years from 2003 to 2018.", "One can observe that crack related incidents went down over this period. Similarly, marijuana related incidents went down after it was legalized in 2016. But meth & heroin related crimes significantly shot up \u2014 this is substantial evidence to conclude it is an epidemic.", "This imbalanced distribution can be solved by either undersampling or oversampling. The reason oversampling is chosen is because although undersampling might work, many useful data is lost during the process. These data are meaningful to the logistic regression algorithm.", "The oversampling technique is SMOTE, which stands for synthetic minority oversampling technique. There are two reasons. First of all, SMOTE is a very common oversampling technique. Secondly, when oversampling a minority class in an imbalanced dataset, what could happen is the model end up learning too much of the specifics of the few examples, usually with a simple approach like randomly adding minority data. SMOTE on the other hand learns the property of the neighborhood of minority data points. This way, the model can generalize better.", "We realized that a binary logistic regression (i.e. Binary LR) wasn\u2019t adequate enough for our problem. For instance, if we used these predictions, to allocate Government resources, then we could have a very high false positive rate. Since just finding geo-coordinates/areas where non-narcotics/narcotics related crime is high is isn\u2019t enough, we needed to delve deeper \u2014 i.e. we would like to allocate more resources where there is a high rate of murder than a high rate of arson. Thus we switched to other multi-class models, such as \u200bMultinomial Logistic Regression (Multinomial LR)\u200b, XGBoost\u200b, \u200bKNN\u200b and \u200bRandom Forest.", "XGBoost performed the best. The above models predict the likelihood for each category of crime, given a geo-coordinate and whether the crime was performed during day or night for a particular PdDistrict. We can use these likelihoods/probabilities & aggregate over the given geo-coordinates, to identify neighborhoods and allocate government resources accordingly.", "In the real world, the PR curve is used more since positive and negative samples are very uneven. The ROC/AUC curve does not reflect the performance of the classifier, but the PR curve can & has better interpretability.", "\u200bAUC (Area under ROC) is problematic especially if the data is imbalanced. The positive examples have relatively low rates of occurrence. Using AUC to measure the performance of the classifier, the problem is the increasing of AUC doesn\u2019t really reflect a better classifier. It\u2019s just the side-effect of too many negative examples. And since we care more about the actual prediction of true-positives rather that the \u201coverall\u201d performance of the model, thus PR & F-1 score seem more appropriate.", "You can check the code and jupyter notebooks for the entire project here at our github repository:", "Along with this, you can further checkout Tableau analysis here:", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Data Storyteller \u2022 Graduate Research Assistant @nyuniversity"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F1ffad5040e0f&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsan-franciscos-opioid-crisis-and-drug-problem-and-effects-on-public-safety-1ffad5040e0f&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsan-franciscos-opioid-crisis-and-drug-problem-and-effects-on-public-safety-1ffad5040e0f&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsan-franciscos-opioid-crisis-and-drug-problem-and-effects-on-public-safety-1ffad5040e0f&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsan-franciscos-opioid-crisis-and-drug-problem-and-effects-on-public-safety-1ffad5040e0f&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----1ffad5040e0f--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----1ffad5040e0f--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://chinmayw.medium.com/?source=post_page-----1ffad5040e0f--------------------------------", "anchor_text": ""}, {"url": "https://chinmayw.medium.com/?source=post_page-----1ffad5040e0f--------------------------------", "anchor_text": "Chinmay Wyawahare"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F4c3cf66ac5f2&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsan-franciscos-opioid-crisis-and-drug-problem-and-effects-on-public-safety-1ffad5040e0f&user=Chinmay+Wyawahare&userId=4c3cf66ac5f2&source=post_page-4c3cf66ac5f2----1ffad5040e0f---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F1ffad5040e0f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsan-franciscos-opioid-crisis-and-drug-problem-and-effects-on-public-safety-1ffad5040e0f&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F1ffad5040e0f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsan-franciscos-opioid-crisis-and-drug-problem-and-effects-on-public-safety-1ffad5040e0f&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://www.linkedin.com/in/kartikeya-shukla-738a48160", "anchor_text": "Kartikeya Shukla"}, {"url": "https://github.com/hs3812", "anchor_text": "Hao Shu"}, {"url": "https://github.com/gandalf1819/SF-Opioid-Crisis", "anchor_text": "gandalf1819/SF-Opioid-CrisisSan Francisco (SF) has a long history of pushing the envelope on progressive public health solutions, including medical\u2026github.com"}, {"url": "https://public.tableau.com/profile/chinmaynw#!/vizhome/SFDrugOpioidCrisis/Sheet1", "anchor_text": "Tableau PublicEdit descriptionpublic.tableau.com"}, {"url": "https://www.kqed.org/news/11766169/san-francisco-fentanyl-deaths-up-almost-150", "anchor_text": "https://www.kqed.org/news/11766169/san-francisco-fentanyl-deaths-up-almost-150"}, {"url": "https://www.sfchronicle.com/bayarea/article/Bay-Briefing-Fentanyl-epidemic-worsens-in-San-14032040.php", "anchor_text": "https://www.sfchronicle.com/bayarea/article/Bay-Briefing-Fentanyl-epidemic-worsens-in-San-14032040.php"}, {"url": "https://www.businessinsider.com/san-franciscos-dirtiest-street-has-a-drug-market-and-piles-of-poop-2018-10", "anchor_text": "https://www.businessinsider.com/san-franciscos-dirtiest-street-has-a-drug-market-and-piles-of-poop-2018-10"}, {"url": "https://www.sfchronicle.com/bayarea/article/California-bill-allowing-San-Francisco-safe-13589277.php", "anchor_text": "https://www.sfchronicle.com/bayarea/article/California-bill-allowing-San-Francisco-safe-13589277.php"}, {"url": "https://data.sfgov.org/Public-Safety/Police-Department-Incident-Reports-Historical-2003/tmnf-yvry/data", "anchor_text": "https://data.sfgov.org/Public-Safety/Police-Department-Incident-Reports-Historical-2003/tmnf-yvry/data"}, {"url": "https://data.sfgov.org/d/wkhw-cjsf", "anchor_text": "https://data.sfgov.org/d/wkhw-cjsf"}, {"url": "https://www.quora.com/What-is-the-meaning-of-min-max-normalization", "anchor_text": "https://www.quora.com/What-is-the-meaning-of-min-max-normalization"}, {"url": "https://medium.com/tag/opioid-crisis?source=post_page-----1ffad5040e0f---------------opioid_crisis-----------------", "anchor_text": "Opioid Crisis"}, {"url": "https://medium.com/tag/xgboost?source=post_page-----1ffad5040e0f---------------xgboost-----------------", "anchor_text": "Xgboost"}, {"url": "https://medium.com/tag/san-francisco?source=post_page-----1ffad5040e0f---------------san_francisco-----------------", "anchor_text": "San Francisco"}, {"url": "https://medium.com/tag/knn?source=post_page-----1ffad5040e0f---------------knn-----------------", "anchor_text": "Knn"}, {"url": "https://medium.com/tag/random-forest-classifiers?source=post_page-----1ffad5040e0f---------------random_forest_classifiers-----------------", "anchor_text": "Random Forest Classifiers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F1ffad5040e0f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsan-franciscos-opioid-crisis-and-drug-problem-and-effects-on-public-safety-1ffad5040e0f&user=Chinmay+Wyawahare&userId=4c3cf66ac5f2&source=-----1ffad5040e0f---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F1ffad5040e0f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsan-franciscos-opioid-crisis-and-drug-problem-and-effects-on-public-safety-1ffad5040e0f&user=Chinmay+Wyawahare&userId=4c3cf66ac5f2&source=-----1ffad5040e0f---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F1ffad5040e0f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsan-franciscos-opioid-crisis-and-drug-problem-and-effects-on-public-safety-1ffad5040e0f&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----1ffad5040e0f--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F1ffad5040e0f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsan-franciscos-opioid-crisis-and-drug-problem-and-effects-on-public-safety-1ffad5040e0f&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----1ffad5040e0f---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----1ffad5040e0f--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----1ffad5040e0f--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----1ffad5040e0f--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----1ffad5040e0f--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----1ffad5040e0f--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----1ffad5040e0f--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----1ffad5040e0f--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----1ffad5040e0f--------------------------------", "anchor_text": ""}, {"url": "https://chinmayw.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://chinmayw.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Chinmay Wyawahare"}, {"url": "https://chinmayw.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "88 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F4c3cf66ac5f2&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsan-franciscos-opioid-crisis-and-drug-problem-and-effects-on-public-safety-1ffad5040e0f&user=Chinmay+Wyawahare&userId=4c3cf66ac5f2&source=post_page-4c3cf66ac5f2--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fd20743f305c5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fsan-franciscos-opioid-crisis-and-drug-problem-and-effects-on-public-safety-1ffad5040e0f&newsletterV3=4c3cf66ac5f2&newsletterV3Id=d20743f305c5&user=Chinmay+Wyawahare&userId=4c3cf66ac5f2&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}