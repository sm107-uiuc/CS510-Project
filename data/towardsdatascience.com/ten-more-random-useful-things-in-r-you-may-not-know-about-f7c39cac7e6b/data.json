{"url": "https://towardsdatascience.com/ten-more-random-useful-things-in-r-you-may-not-know-about-f7c39cac7e6b", "time": 1683002629.731122, "path": "towardsdatascience.com/ten-more-random-useful-things-in-r-you-may-not-know-about-f7c39cac7e6b/", "webpage": {"metadata": {"title": "Ten more random useful things in R you may not know about | by Keith McNulty | Towards Data Science", "h1": "Ten more random useful things in R you may not know about", "description": "I was surprised by the positive reaction to my article last year which itemized ten random things in R that people might not know about. I had a feeling that R has developed as a language to such a\u2026"}, "outgoing_paragraph_urls": [{"url": "https://towardsdatascience.com/ten-random-useful-things-in-r-that-you-might-not-know-about-54b2044a3868", "anchor_text": "my article", "paragraph_index": 0}, {"url": "https://towardsdatascience.com/how-to-write-tidy-sql-queries-in-r-d6d6b2a3e17", "anchor_text": "here", "paragraph_index": 6}, {"url": "https://dbplyr.tidyverse.org/articles/dbplyr.html", "anchor_text": "here", "paragraph_index": 6}, {"url": "https://www.billboard.com/charts/hot-100", "anchor_text": "this fairly snazzy page", "paragraph_index": 9}, {"url": "https://towardsdatascience.com/get-any-us-music-chart-listing-from-history-in-your-r-console-6bd168f192cb", "anchor_text": "here", "paragraph_index": 10}, {"url": "https://github.com/tidyverse/rvest", "anchor_text": "here", "paragraph_index": 10}, {"url": "https://blog.rstudio.com/2015/04/21/xml2/", "anchor_text": "here", "paragraph_index": 10}, {"url": "https://blog.rstudio.com/2017/08/16/rstudio-preview-connections/", "anchor_text": "here", "paragraph_index": 17}, {"url": "https://towardsdatascience.com/create-hans-roslings-famous-animated-bubble-chart-in-a-single-piped-r-command-9c50a485259", "anchor_text": "Here\u2019s an example", "paragraph_index": 24}, {"url": "https://github.com/keithmcnulty/eurovision", "anchor_text": "here", "paragraph_index": 25}, {"url": "https://emilykuehler.github.io/bar-chart-race/", "anchor_text": "here", "paragraph_index": 25}, {"url": "https://rstudio.github.io/r2d3/", "anchor_text": "here", "paragraph_index": 26}, {"url": "https://towardsdatascience.com/using-networkd3-in-r-to-create-simple-and-clear-sankey-diagrams-48f8ba8a4ace", "anchor_text": "here", "paragraph_index": 29}, {"url": "https://christophergandrud.github.io/networkD3/", "anchor_text": "here", "paragraph_index": 29}, {"url": "https://rstudio.github.io/DT/", "anchor_text": "here", "paragraph_index": 33}, {"url": "https://www.linkedin.com/in/keith-mcnulty/", "anchor_text": "LinkedIn", "paragraph_index": 40}, {"url": "https://twitter.com/dr_keithmcnulty", "anchor_text": "Twitter", "paragraph_index": 40}, {"url": "http://keithmcnulty.org", "anchor_text": "keithmcnulty.org", "paragraph_index": 42}], "all_paragraphs": ["I was surprised by the positive reaction to my article last year which itemized ten random things in R that people might not know about.", "I had a feeling that R has developed as a language to such a degree that many of us are using it now in completely different ways. This means that there are likely to be numerous tricks, packages, functions, etc that each of us use, but that others are completely unaware of, and would find useful if they knew about them.", "To be honest, I struggled to keep it to ten last time, so here are ten more things about R that help make my work easier and which you might find useful. Do drop a note here or on Twitter if any of these helpful to your current work, or if you have further suggestions for things which others should know about.", "dbplyr is exactly what its name implies. It allows you use dplyr with databases. If you work with databases and you\u2019ve never heard of dbplyr then you are likely still using SQL strings in your code, which forces you to think SQL when you actually want to think tidy, and can be a real pain when you want to abstract your code to generate functions and the like.", "dbplyr allows you to create your SQL query using dplyr. It does this by establishing a database table that can be manipulated using dplyr functions, translating those functions into SQL. For example, if you have a database connection called con, and you want to manipulate a table called CAT_DATA within CAT_SCHEMA you can set this table up as:", "Then you can perform the usual manipulations such as filter, mutate, group_by, summarise etc on cat_table and all of these will be translated into a SQL query in the background. What\u2019s incredibly useful is that the data is not physically downloaded into your R session until you use the dplyr::collect() function to finally grab it. This means you can get SQL to do all the work and collect your manipulated data at the end, rather than having to pull the entire database at the beginning.", "For more on dbplyr you can check my previous article here and the tutorial here.", "People say Python is much better for web scraping. That may be true. But for those of us who like working in the tidyverse, the rvest and xml2 packages can make straightforward web scraping pretty easy by working with magrittr and allowing us to pipe commands. Given that HTML and XML code on webpages is usually heavily nested, I think its pretty intuitive to structure scraping code using %>%.", "By initially reading the HTML code of the page of interest, these packages break the nested HTML and XML nodes into lists that you can progressively search and mine for specific nodes or attributes of interest. Using this in combination with Chrome\u2019s inspect capability will allow you to quickly extract the key information you need from the webpage.", "As a quick example, I recently wrote a function to scrape the basic Billboard music chart at any point in history as a dataframe from this fairly snazzy page using code as simple as this:", "More on this example here, more on rvest here and more on xml2 here.", "k-means is an increasingly popular statistical method to cluster observations in data, often to simplify a large number of datapoints into a smaller number of clusters or archetypes. The kml package now allows k-means clustering to take place on longitudinal data, where the \u2018datapoints\u2019 are actually data series.", "This is super useful where the datapoints you are studying are actually readings over time. This could be clinical observation of weight gain or loss in hospital patients, or compensation trajectories of employees.", "kml works by first transforming data into an object of the class ClusterLongData using the cld function. Then it partitions the data using a \u2018hill climbing\u2019 algorithm, testing several values of k 20 times each. Finally, the choice() function allows you to view the results of the algorithm for each k graphically and decide what you believe to be an optimal clustering.", "The connections window in the latest version of RStudio allows you to browse any remote databases without having to move into a separate environment like SQL developer. This convenience now offers the opportunity to fulfil dev projects entirely within the RStudio IDE.", "By setting up your connection to a remote database in the connections window, you can browse inside nested schemas, tables, data types, and even view a table directly to see an extract of what the data looks like.", "The connections window in the latest versions of RStudio", "More on the connections window here.", "The default behavior in R dataframes is that if no data exists for a particular observation, then the row for that observation does not appear in the dataframe. This can cause problems when you need to use this dataframe as an input for something which expects to see values for all possible observations.", "Typically this problem occurs when you are sending the data into some graphing function that is expecting to see zero values when there are no observations, and can\u2019t understand that a missing row means zero values in that row. This can also be an issue when you are making future projections and the starting point has missing rows.", "The complete() function within tidyr allows you to fill in the gaps for all observations that had no data. It allows you to define the observations that you want to complete and then declare what value to use to plug the gaps. For example, if you were taking counts of male and female dogs of different breeds, and you had some combinations for which there were no dogs in the sample, you could use the following to deal with it:", "This will expand your dataframe to ensure that all possible combinations of SEX and BREED are included, and it will fill in missing values of COUNT with zeros.", "Animated graphics are all the rage at the moment, and the gganimate package allows those who use ggplot2 (most R users I would say) to very simply extend their code to create animated graphics.", "gganimate works by taking data that exists over a series of \u2018transition states\u2019, usually years or some other sort of time series data. You can plot the data within each transition state as if it were a simple static ggplot2 chart, and then use the ease_aes() function to create an animation that moves between the transition states. There are numerous options for how the transition occurs, and the animate() function allows the graphic to be rendered in a variety of forms such as an animated gif or an mpeg.", "Here\u2019s an example where I generate Hans Rosling\u2019s famous bubble chart using a single piped command:", "For the code for this see here and for a nice step by step tutorial on gganimate which I found really helpful see here.", "D3 is an extremely powerful data visualization library for javascript. An increasing number of packages have started becoming available that allow R users to build viz in D3 such as R2D3, which is great not least because it allows us to admire one of the best hex stickers ever (see here).", "My favourite D3 package for R is networkD3. It has been around for a little while and is fantastic for plotting graph or network data in a responsive or aesthetically pleasing way. In particular, it can plot force directed networks using forceNetwork(), sankey diagrams using sankeyNetwork() and chord diagrams using chordNetwork(). Here\u2019s an example of a simple sankey network I created showing voting flows by region in the Brexit referendum.", "Voting flows in the Brexit referendum using networkD3", "More on this specific example here and more on networkD3 here.", "The DT package is an interface from R to the DataTables javascript library. This allows very easy display of tables within a shiny app or R Markdown document that have a lot of in-built functionality and responsiveness. This prevents you from having to code separate data download functions, gives the user flexibility around the presentation and the ordering of the data and has a data search capability built-in.", "For example, a simple command such as :", "Can produce something as nice as this:", "More on DT here, including how to set various options to customize the layout and add data download, copy and print buttons.", "prettydoc is a package by Yixuan Qiu which offers a simple set of themes to create a different, prettier look and feel to your RMarkdown documents. This is super helpful when you just want to jazz up your documents a little but don\u2019t have time to get into the styling of them yourself.", "It\u2019s really easy to use. Simple edits to the YAML header of your document can invoke a specific style theme throughout the document, with numerous themes available. For example, this will invoke a lovely clean blue coloring and style across titles, tables, embedded code and graphics:", "RMarkdown is a great way to record your work, allowing you to write a narrative and capture your code all in one place. But sometimes your code can be overwhelming and not particularly pleasant for non-coders who are trying to read just the narrative of your work and are not interested in the intricacies of how you conducted the analysis.", "Previously the only options we had were to either set echo = TRUE or echo = FALSE in our knitr options to either show our code in the document or not. But now we can set an option in the YAML header that gives us the best of both worlds. Setting code_folding: hide in the YAML header will hide the code chunks by default, but provide little click-down boxes in the document so that the reader can view all the code, or particular chunks, as and when they want to, like this:", "Code folding drop downs in R Markdown", "So that wraps up my next ten random R tips. I hope some of these were helpful, and please feel free to add any of your own tips to the comments for other users to read.", "Originally I was a Pure Mathematician, then I became a Psychometrician and a Data Scientist. I am passionate about applying the rigor of all those disciplines to complex people questions. I\u2019m also a coding geek and a massive fan of Japanese RPGs. Find me on LinkedIn or on Twitter.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Expert and Author in Applied Mathematics, Data Science, Statistics. Also writes History, Science, Culture. Find me on Twitter or keithmcnulty.org"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Ff7c39cac7e6b&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ften-more-random-useful-things-in-r-you-may-not-know-about-f7c39cac7e6b&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ften-more-random-useful-things-in-r-you-may-not-know-about-f7c39cac7e6b&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ften-more-random-useful-things-in-r-you-may-not-know-about-f7c39cac7e6b&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ften-more-random-useful-things-in-r-you-may-not-know-about-f7c39cac7e6b&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----f7c39cac7e6b--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----f7c39cac7e6b--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://keith-mcnulty.medium.com/?source=post_page-----f7c39cac7e6b--------------------------------", "anchor_text": ""}, {"url": "https://keith-mcnulty.medium.com/?source=post_page-----f7c39cac7e6b--------------------------------", "anchor_text": "Keith McNulty"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fa859aab532a0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ften-more-random-useful-things-in-r-you-may-not-know-about-f7c39cac7e6b&user=Keith+McNulty&userId=a859aab532a0&source=post_page-a859aab532a0----f7c39cac7e6b---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ff7c39cac7e6b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ften-more-random-useful-things-in-r-you-may-not-know-about-f7c39cac7e6b&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ff7c39cac7e6b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ften-more-random-useful-things-in-r-you-may-not-know-about-f7c39cac7e6b&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://towardsdatascience.com/ten-random-useful-things-in-r-that-you-might-not-know-about-54b2044a3868", "anchor_text": "my article"}, {"url": "https://towardsdatascience.com/how-to-write-tidy-sql-queries-in-r-d6d6b2a3e17", "anchor_text": "here"}, {"url": "https://dbplyr.tidyverse.org/articles/dbplyr.html", "anchor_text": "here"}, {"url": "https://www.billboard.com/charts/hot-100", "anchor_text": "this fairly snazzy page"}, {"url": "https://towardsdatascience.com/get-any-us-music-chart-listing-from-history-in-your-r-console-6bd168f192cb", "anchor_text": "here"}, {"url": "https://github.com/tidyverse/rvest", "anchor_text": "here"}, {"url": "https://blog.rstudio.com/2015/04/21/xml2/", "anchor_text": "here"}, {"url": "https://blog.rstudio.com/2017/08/16/rstudio-preview-connections/", "anchor_text": "here"}, {"url": "https://towardsdatascience.com/create-hans-roslings-famous-animated-bubble-chart-in-a-single-piped-r-command-9c50a485259", "anchor_text": "Here\u2019s an example"}, {"url": "https://github.com/keithmcnulty/eurovision", "anchor_text": "here"}, {"url": "https://emilykuehler.github.io/bar-chart-race/", "anchor_text": "here"}, {"url": "https://rstudio.github.io/r2d3/", "anchor_text": "here"}, {"url": "https://towardsdatascience.com/using-networkd3-in-r-to-create-simple-and-clear-sankey-diagrams-48f8ba8a4ace", "anchor_text": "here"}, {"url": "https://christophergandrud.github.io/networkD3/", "anchor_text": "here"}, {"url": "https://rstudio.github.io/DT/", "anchor_text": "here"}, {"url": "http://yixuan.cos.name/prettydoc/", "anchor_text": "here"}, {"url": "https://www.linkedin.com/in/keith-mcnulty/", "anchor_text": "LinkedIn"}, {"url": "https://twitter.com/dr_keithmcnulty", "anchor_text": "Twitter"}, {"url": "https://medium.com/tag/data-science?source=post_page-----f7c39cac7e6b---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/analytics?source=post_page-----f7c39cac7e6b---------------analytics-----------------", "anchor_text": "Analytics"}, {"url": "https://medium.com/tag/programming?source=post_page-----f7c39cac7e6b---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/tag/data-visualization?source=post_page-----f7c39cac7e6b---------------data_visualization-----------------", "anchor_text": "Data Visualization"}, {"url": "https://medium.com/tag/data?source=post_page-----f7c39cac7e6b---------------data-----------------", "anchor_text": "Data"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Ff7c39cac7e6b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ften-more-random-useful-things-in-r-you-may-not-know-about-f7c39cac7e6b&user=Keith+McNulty&userId=a859aab532a0&source=-----f7c39cac7e6b---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Ff7c39cac7e6b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ften-more-random-useful-things-in-r-you-may-not-know-about-f7c39cac7e6b&user=Keith+McNulty&userId=a859aab532a0&source=-----f7c39cac7e6b---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ff7c39cac7e6b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ften-more-random-useful-things-in-r-you-may-not-know-about-f7c39cac7e6b&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----f7c39cac7e6b--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Ff7c39cac7e6b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ften-more-random-useful-things-in-r-you-may-not-know-about-f7c39cac7e6b&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----f7c39cac7e6b---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----f7c39cac7e6b--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----f7c39cac7e6b--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----f7c39cac7e6b--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----f7c39cac7e6b--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----f7c39cac7e6b--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----f7c39cac7e6b--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----f7c39cac7e6b--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----f7c39cac7e6b--------------------------------", "anchor_text": ""}, {"url": "https://keith-mcnulty.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://keith-mcnulty.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Keith McNulty"}, {"url": "https://keith-mcnulty.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "11K Followers"}, {"url": "http://keithmcnulty.org", "anchor_text": "keithmcnulty.org"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fa859aab532a0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ften-more-random-useful-things-in-r-you-may-not-know-about-f7c39cac7e6b&user=Keith+McNulty&userId=a859aab532a0&source=post_page-a859aab532a0--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F7991b3dbcee9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ften-more-random-useful-things-in-r-you-may-not-know-about-f7c39cac7e6b&newsletterV3=a859aab532a0&newsletterV3Id=7991b3dbcee9&user=Keith+McNulty&userId=a859aab532a0&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://peopleanalytics-regression-book.org/", "anchor_text": "Handbook of Regression Modeling in People Analytics2021"}, {"url": "https://ona-book.org", "anchor_text": "Handbook of Graphs and Networks in People Analytics2022"}, {"url": "https://medium.com/@keith-mcnulty/books?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "See all (2)"}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}