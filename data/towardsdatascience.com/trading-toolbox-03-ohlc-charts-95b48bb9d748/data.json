{"url": "https://towardsdatascience.com/trading-toolbox-03-ohlc-charts-95b48bb9d748", "time": 1683002650.786772, "path": "towardsdatascience.com/trading-toolbox-03-ohlc-charts-95b48bb9d748/", "webpage": {"metadata": {"title": "Python Trading Toolbox: introducing OHLC charts with Matplotlib | by Stefano Basurto | Towards Data Science", "h1": "Python Trading Toolbox: introducing OHLC charts with Matplotlib", "description": "how to use matplotlib and mpl-finance to generate ohlc bar charts and candlestick charts with Python."}, "outgoing_paragraph_urls": [{"url": "https://towardsdatascience.com/trading-toolbox-02-wma-ema-62c22205e2a9", "anchor_text": "simple moving averages", "paragraph_index": 0}, {"url": "https://towardsdatascience.com/trading-toolbox-02-wma-ema-62c22205e2a9", "anchor_text": "other moving averages", "paragraph_index": 0}, {"url": "https://www.investopedia.com/terms/b/barchart.asp", "anchor_text": "bar charts", "paragraph_index": 1}, {"url": "https://www.investopedia.com/terms/c/candlestick.asp", "anchor_text": "candlestick charts", "paragraph_index": 3}, {"url": "https://school.stockcharts.com/doku.php?id=chart_analysis:introduction_to_candlesticks", "anchor_text": "analysis based on patterns", "paragraph_index": 3}, {"url": "https://plot.ly/", "anchor_text": "Plot.ly", "paragraph_index": 4}, {"url": "https://bokeh.org/", "anchor_text": "Bokeh", "paragraph_index": 4}, {"url": "https://matplotlib.org/", "anchor_text": "Matplotlib", "paragraph_index": 4}, {"url": "https://github.com/DanielGoldfarb", "anchor_text": "Daniel Goldfarb", "paragraph_index": 5}, {"url": "https://towardsdatascience.com/trading-toolbox-01-sma-7b8e16bd9388", "anchor_text": "first post", "paragraph_index": 8}, {"url": "https://raw.githubusercontent.com/stebas101/TradingToolbox/master/data/SPY.csv", "anchor_text": "here", "paragraph_index": 8}, {"url": "https://matplotlib.org/gallery/ticks_and_spines/date_index_formatter.html", "anchor_text": "filtering", "paragraph_index": 18}, {"url": "https://forexsb.com/wiki/trading/camelback-technique", "anchor_text": "web", "paragraph_index": 21}, {"url": "https://towardsdatascience.com/trading-toolbox-01-sma-7b8e16bd9388", "anchor_text": "article on moving averages", "paragraph_index": 26}, {"url": "https://towardsdatascience.com/questions-96667b06af5", "anchor_text": "rules and guidelines", "paragraph_index": 27}, {"url": "https://towardsdatascience.com/readers-terms-b5d780a700a4", "anchor_text": "Reader Terms", "paragraph_index": 27}], "all_paragraphs": ["In other posts, we started exploring how to compute some basic indicators based on price (simple moving averages and other moving averages) and how to plot them on a chart together with the price. In those examples, we considered daily price data and used the closing price to represent each day of trading. Quite obviously, financial instruments trade throughout the whole day generating more than one price. The closing price is one of the most relevant prices but does not tell the whole story of what happened during the trading day.", "OHLC bars and bar charts are a traditional way to capture the range of prices of a financial instrument generated during the entire day of trading: for each single day, four prices are recorded: the opening price (Open), the highest price (High), the lowest price (Low), and the closing price (Close).", "Bar charts are not limited to daily prices: weekly and monthly charts can be constructed using open, high, low and close for each period. They can be applied to intraday charts as well by using hourly bars, or bars for any desired interval (e.g. 30 minutes, 10 minutes, down to 1 minute).", "Similarly to bar charts, candlestick charts are based on the Open, High, Low, and Close for each day, but use a different visual representation. The range between the Open and the Close is represented by a \u2018candle body\u2019 \u2014 which takes different colors depending on whether the Close is higher than the Open or the other way round (usually white and black). Highs and Lows are represented by \u2018candle wicks\u2019 (called shadows), placed above and below the body respectively. The use of candlestick charting originates from Japan and is associated with a kind of analysis based on patterns.", "There are several good visualization resources that enable us to create bar and candlestick charts in Python. Two of the best are Plot.ly and Bokeh. Both solutions allow creating professionally looking interactive charts. On the other hand, Matplotlib focuses on static charts and is capable of producing beautiful publication-quality figures. That is usually my first port of call when I have to produce static charts.", "While the Matplotlib library is one of those elements that make Python a great environment for data visualization, when it comes to OHLC financial charts it has so far performed below its true potential. The package that handles the drawing of OHLC and candlestick charts within Matplotlib is called mpl-finance, a module that used to be part of the main Matplotlib distribution until it was declared deprecated and became available only as a separate package. That happened, I believe, for a good reason: mpl-finance is not particularly well integrated with pandas nor as easy to use as other plotting features of Matplotlib. More recently, it has found a new maintainer, Daniel Goldfarb, who is working at creating a new API for mpl-finance to make it more usable and consistent with pandas dataframes. The new version should be released at some point during 2020.", "We can have a first look at how the upcoming version of mpl-finance is going to work and look like. To preview the new version (a pre-release, at the time of writing), you just need to run:", "Note the spelling of the upcoming version: there is no \u2018-\u2019 nor \u2018_\u2019 in the name, while the current version is installed as mpl-finance and imported (quite confusingly) as mpl_finance. The new version will put an end to this name mixup.", "We can now create our first price bar charts, using the same data for the SPY ETF used in the first post of the series. You can download the CSV file here.", "We can now import the newly installed mpl-finance library:", "Creating a price bar chart (for the last 50 days of data) is as easy as:", "If you are not using Jupyter, do not forget to add the following line to visualize this and the next charts:", "Creating a candlestick chart is equally straightforward:", "The visual results look appealing. The no_xgaps option is a nifty feature that eliminates the gaps usually generated by days with no trading data (e.g. weekends and public holidays).", "The current version of mpl-finance can be installed using:", "if you are using Conda as a package manager. Compared to the version to be released, the current mpl-finance library requires some data manipulation to create a simple OHLC or candlestick chart. In particular:", "Luckily, all those operations will become obsolete once the new version is released, hopefully soon during 2020. For now, I just present my code to perform those tasks without going too much into detail. You can use it as it is:", "We can now use the data to plot a bar chart:", "By default, bars with a Close higher than the Open are colored in black, while bars with a Close below the Open are colored in red. There are some visible horizontal gaps in the chart: they are generated by non-trading days (weekends and public holidays). Removing them requires some extra non-trivial filtering.", "Similarly, a candlestick chart can be generated in the following way:", "Using OHLC prices instead of just one single series as the Closing Price opens up a new world of possibilities: we can assess the range that prices covered during each trading day, observe the relationship of the Close versus the Open, check whether prices have risen above previous highs or fallen below previous lows and so on.", "Here I will present a fairly simple example of a chart that makes use of High and Low prices as well as Close prices. This chart comes from a trading technique known as Camelback Technique. I am not interested in describing the trading technique in detail (plenty of information can be found on the web): we are just using the chart associated with it as a useful tool to spot existing trends.", "We overlay the following moving averages on a daily price bar chart:", "This can be coded as follows:", "The two simple moving averages drawn in blue create a channel: compared to a single moving average, we now have a grey area when prices are neither above nor below the channel.", "As an example, we could now adopt the following trading rules:", "At this stage, we should be asking whether those rules (or any of the methods mentioned in the article on moving averages) can be used to build a profitable trading system. In other words, we should be asking whether those ideas will help us generate profits instead of making losses, and how to choose the best set of rules. I will try to address this in the next post. We will learn how to backtest a trading system to calculate the profits or losses based on historical data.", "Note from Towards Data Science\u2019s editors: While we allow independent authors to publish articles in accordance with our rules and guidelines, we do not endorse each author\u2019s contribution. You should not rely on an author\u2019s works without seeking professional advice. See our Reader Terms for details.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Passionate about exploring new ways to apply data science techniques to make better investment decisions and develop insights in markets."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F95b48bb9d748&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftrading-toolbox-03-ohlc-charts-95b48bb9d748&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftrading-toolbox-03-ohlc-charts-95b48bb9d748&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftrading-toolbox-03-ohlc-charts-95b48bb9d748&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftrading-toolbox-03-ohlc-charts-95b48bb9d748&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----95b48bb9d748--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----95b48bb9d748--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@stebas101?source=post_page-----95b48bb9d748--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@stebas101?source=post_page-----95b48bb9d748--------------------------------", "anchor_text": "Stefano Basurto"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Faf1de1bdf68d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftrading-toolbox-03-ohlc-charts-95b48bb9d748&user=Stefano+Basurto&userId=af1de1bdf68d&source=post_page-af1de1bdf68d----95b48bb9d748---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F95b48bb9d748&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftrading-toolbox-03-ohlc-charts-95b48bb9d748&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F95b48bb9d748&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftrading-toolbox-03-ohlc-charts-95b48bb9d748&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://medium.com/tag/trading-toolbox", "anchor_text": "trading-toolbox"}, {"url": "https://unsplash.com/@aditya1702?utm_source=medium&utm_medium=referral", "anchor_text": "Aditya Vyas"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://towardsdatascience.com/trading-toolbox-02-wma-ema-62c22205e2a9", "anchor_text": "simple moving averages"}, {"url": "https://towardsdatascience.com/trading-toolbox-02-wma-ema-62c22205e2a9", "anchor_text": "other moving averages"}, {"url": "https://www.investopedia.com/terms/b/barchart.asp", "anchor_text": "bar charts"}, {"url": "https://www.investopedia.com/terms/c/candlestick.asp", "anchor_text": "candlestick charts"}, {"url": "https://school.stockcharts.com/doku.php?id=chart_analysis:introduction_to_candlesticks", "anchor_text": "analysis based on patterns"}, {"url": "https://plot.ly/", "anchor_text": "Plot.ly"}, {"url": "https://bokeh.org/", "anchor_text": "Bokeh"}, {"url": "https://matplotlib.org/", "anchor_text": "Matplotlib"}, {"url": "https://github.com/DanielGoldfarb", "anchor_text": "Daniel Goldfarb"}, {"url": "https://towardsdatascience.com/trading-toolbox-01-sma-7b8e16bd9388", "anchor_text": "first post"}, {"url": "https://raw.githubusercontent.com/stebas101/TradingToolbox/master/data/SPY.csv", "anchor_text": "here"}, {"url": "https://matplotlib.org/gallery/ticks_and_spines/date_index_formatter.html", "anchor_text": "filtering"}, {"url": "https://forexsb.com/wiki/trading/camelback-technique", "anchor_text": "web"}, {"url": "https://towardsdatascience.com/trading-toolbox-01-sma-7b8e16bd9388", "anchor_text": "article on moving averages"}, {"url": "https://towardsdatascience.com/questions-96667b06af5", "anchor_text": "rules and guidelines"}, {"url": "https://towardsdatascience.com/readers-terms-b5d780a700a4", "anchor_text": "Reader Terms"}, {"url": "https://medium.com/tag/data-science?source=post_page-----95b48bb9d748---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/programming?source=post_page-----95b48bb9d748---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/tag/data-visualization?source=post_page-----95b48bb9d748---------------data_visualization-----------------", "anchor_text": "Data Visualization"}, {"url": "https://medium.com/tag/python?source=post_page-----95b48bb9d748---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/trading-toolbox?source=post_page-----95b48bb9d748---------------trading_toolbox-----------------", "anchor_text": "Trading Toolbox"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F95b48bb9d748&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftrading-toolbox-03-ohlc-charts-95b48bb9d748&user=Stefano+Basurto&userId=af1de1bdf68d&source=-----95b48bb9d748---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F95b48bb9d748&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftrading-toolbox-03-ohlc-charts-95b48bb9d748&user=Stefano+Basurto&userId=af1de1bdf68d&source=-----95b48bb9d748---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F95b48bb9d748&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftrading-toolbox-03-ohlc-charts-95b48bb9d748&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----95b48bb9d748--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F95b48bb9d748&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftrading-toolbox-03-ohlc-charts-95b48bb9d748&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----95b48bb9d748---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----95b48bb9d748--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----95b48bb9d748--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----95b48bb9d748--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----95b48bb9d748--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----95b48bb9d748--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----95b48bb9d748--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----95b48bb9d748--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----95b48bb9d748--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@stebas101?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@stebas101?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Stefano Basurto"}, {"url": "https://medium.com/@stebas101/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "411 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Faf1de1bdf68d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftrading-toolbox-03-ohlc-charts-95b48bb9d748&user=Stefano+Basurto&userId=af1de1bdf68d&source=post_page-af1de1bdf68d--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F95600df64f18&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftrading-toolbox-03-ohlc-charts-95b48bb9d748&newsletterV3=af1de1bdf68d&newsletterV3Id=95600df64f18&user=Stefano+Basurto&userId=af1de1bdf68d&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}