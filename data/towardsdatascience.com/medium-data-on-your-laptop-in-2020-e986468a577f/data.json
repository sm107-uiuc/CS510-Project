{"url": "https://towardsdatascience.com/medium-data-on-your-laptop-in-2020-e986468a577f", "time": 1683008623.0868878, "path": "towardsdatascience.com/medium-data-on-your-laptop-in-2020-e986468a577f/", "webpage": {"metadata": {"title": "Analyze Big Data on your Laptop. echniques to handle larger-than-memory\u2026 | by ChiefHustler | Towards Data Science", "h1": "Analyze Big Data on your Laptop", "description": "Big data has been around since around 2005. Back then, if you wanted to manipulate big data, Hadoop was the hot new toy. Most likely, however, you would have to set up your own on-premise cluster and\u2026"}, "outgoing_paragraph_urls": [{"url": "https://vaex.readthedocs.io/en/latest/api.html", "anchor_text": "here", "paragraph_index": 23}, {"url": "https://vaex.readthedocs.io/en/latest/api.html#string-operations", "anchor_text": "here", "paragraph_index": 31}, {"url": "https://distributed.dask.org/en/latest/", "anchor_text": "Dask Distributed", "paragraph_index": 38}, {"url": "https://medium.com/@klahrichi/hyperparameter-tuning-with-dask-distributed-and-mlflow-ca6a4a275a2e", "anchor_text": "here", "paragraph_index": 38}], "all_paragraphs": ["Big data has been around since around 2005. Back then, if you wanted to manipulate big data, Hadoop was the hot new toy. Most likely, however, you would have to set up your own on-premise cluster and spend a few weeks or months configuring everything before being able to actually do something with the data.", "Nowadays, things are different and as with everything that has do with technology, access to big data tools has been democratized.", "In this first chapter in this Big Data series, we will see what local options are available for a big data project in 2020 and which one you should choose, depending on your use case.", "Sometimes, you can do everything you need to do on your laptop, especially when you are dealing with medium data (tens of GB). The advantage is that you can get started immediately. This scenario is relevant in two cases:", "In fact, the easiest way to deal with big data is\u2026to turn it into smaller data and do your processing locally.", "As a first example, let\u2019s say you have billions of points tracking the driving speed of users on the road, and you want to know what the speed distribution looks like or build a predictive model for insurance claims based on driving patterns. A smart way to get started in that scenario is to sub-sample your data, assuming you can make it small enough to fit in your memory, but big enough to be statistically representative. So if you have 100K users in your database, and each user has one datapoint per second they were on the road, you might sub-sample your data to only take 1 data point every 10 seconds, for a random subset of 10K users and for a specific month in your database.", "Let\u2019s see what the numbers can look like. Say you have:", "200GB is clearly not something you would typically process on your laptop, but taking the previous approach (1 data-point every 10 seconds for 10K randomly selected users) would bring that down to 2GB!", "While it might not give you as precise a picture as you can get, it will definitely be more than enough for initial exploration and even an MVP of a model.", "Sometimes, the processing or analysis you want to apply to your data naturally lends itself to being split into multiple independent steps. For example, maybe you want to produce a monthly report, or you want to compute some statistics by state or city.", "In such cases, it would make a lot of sense to download only the data that you need for the current stage of the analysis (the current month or the current geography being analyzed), perform the analysis on that, and then move on to the next iteration, each time swapping the data in memory instead of increasing the size of allocated memory.", "This iterative approach is interesting as long as you don\u2019t mind waiting a bit for the complete process to finish running sequentially, or if you only need to update it and not re-run it from scratch every time.", "Whether you are using sub-sampling or chunking, big data is stored in a data warehouse somewhere, which you can query, but you never have it sitting entirely on your laptop.", "Down-casting is the process of turning your 64-byte float columns for example to 32-byte floats, assuming you don\u2019t mind the small loss in precision. You can also downcast your 64-byte long integers, especially when you have things like years or ages, that really don\u2019t require that much space!", "Finally, pandas has recently introduced the category dtype, very useful for categorical data instead of the default object (or string) dtype. The difference is that the new category dtype only reserves space for each unique value of the categorical variable, whereas the default object dtype does it for each value.", "You can downcast your columns after reading your data, by using astype function, but preferably you can specify the types of your column inside the read_csv function call, using the dtype parameter.", "Let\u2019s say that sub-sampling or chunking doesn\u2019t answer your needs. Let\u2019s take the example of an ETF (Exchange-Traded Fund) consisting of 100 stocks, and you have to find the exact volatility of that ETF, given the daily closing price of each of the 100 stocks. None of the options above (sub-sampling, chunking or down-casting) would be satisfying, because you want to be as precise as possible in this case.", "The solution then is to use a library that can handle out-of-core calculations, meaning it can compute statistics or process data that is stored on the hard drive, moving it in and out of memory for you as needed.", "Vaex is super fast when it comes to computing statistics on huge tabular data. Another very nice feature of Vaex is the ability to create virtual columns on a data frame, also called expressions. These do not take any space in memory, and Vaex uses them on a need basis, on the fly.", "To install vaex, assuming you have python installed, simply run: pip install vaex, but make sure you are running as admin.", "Vaex works amazingly well with HDF5, so if you are starting off with a big CSV file or a bunch of CSVs files, the first thing you\u2019d want to do is convert them to one HDF5 file. Here\u2019s the code to do it:", "In this case, we simply import glob and replace the first line with:", "Then you can connect to your data with df = vaex.open('bigfile.hdf5').", "Here\u2019s the list of available statistics you can compute: count, mean, std, var, cov, correlation, median_approx, mode, min, max, minmax, mutual_information. The API documentation can be found here.", "Filtering a dataframe is done with brackets ([]): df_negative = df[df.x < 0], and then we can perform any of the computations above (or plotting below) on the filtered dataframe.", "We can do left, right and inner joins with Vaex. The syntax is straightforward: dfA.join(dfB, left_on='a', right_on='b', how='left|right|inner')", "Here\u2019s an example taken from the Vaex tutorial which shows the grouping/aggregating functionality, including controlling the name of the caculated columns: df.groupby(by='x', agg={'mean_y': vaex.agg.mean('y'), 'max_z': vaex.agg.max('z')}.", "You\u2019ll notice that the aggregation functions are inside the vaex.agg module. The available functions are: count, first, max, min, sum, mean, std, var, nunique.", "Vaex provides a simple API to plot statistics on huge data. The two main functions are plot1d and plot2d, and they are called form a dataframe object. For example:", "Outputting more than one plot can be done by passing a list of expression pairs for the axis, which will be shown as columns by default, and/or a list of \u201cwhat\u201d, which will be shown as rows by default.", "We might want to show plots for different subsets of the data. In that case, the previously mentioned way of filtering data (by using brackets and assigning the result to a variable) would be inefficient, a better way is to use the selection parameter. Because selections are overplotted on the same chart by default, we can use the visual parameter to customize that. For example, to show the selections as columns and the different expressions as rows:", "Vaex can apply a bunch of operations on string columns. These operations can be invoked by using the df.string_column.str.<operation> syntax. The list of operations can be found here. Some of the most useful ones are contains (for substring detection) and match (for regex matching), cat to concatenate string columns, and startswith/ endswith which are self-explanatory.", "Dask is well known library in the python world for big data processing. I will say outright though if you are manipulating medium data only, i.e. your datasets are in Gigabytes, Vaex will crush Dask in terms of performance, every time.", "However, Vaex is designed to work on a single computer. There\u2019s no multi-node built-in functionality at the moment. On the other hand, Dask offers both single-node and multi-node functionality, using a unified API. That is a huge benefit, if all you want to do locally is some local testing or experimenting, before moving to the cloud.", "Another feature of Dask is that it tries to mimic a lot of the libraries that python data scientists are familiar with: pandas of course, but also scikit-learn and others. This makes for an almost nonexistent learning curve. For example, reading a CSV file in Dask is as easy as:", "If you have n cores on your machine, you can play around with the blocksize (depending also on your total available RAM) to optimize the runtime, trying maybe to read the data in n chunks. Dask can easily read data from a variety of sources (local or remote) and in a variety of formats (CSV, parquet, hdf5, etc.).", "That is an advantage in some respect, but in the long-term, it can also be a constraint, because some of the design choices in scikit-learn are not the best.", "Another caveat to be aware of is that the apply method of Dask requires the user to specify the types and names of the output. It's not a huge annoyance, just something to be aware of.", "Finally, I really like Dask Distributed, a lightweight library for distributed computing in python. It is very easy to setup in the cloud, a topic I\u2019ve written about here.", "Stay in touch for the next installment! I\u2019ll be exploring cloud technologies for big data: Spark, Bigquery, Dataflow, and others.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Growth stocks investor. Data scientist by trade. Passionate about fintech. In residence at Entrepreneur First."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fe986468a577f&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmedium-data-on-your-laptop-in-2020-e986468a577f&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmedium-data-on-your-laptop-in-2020-e986468a577f&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmedium-data-on-your-laptop-in-2020-e986468a577f&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmedium-data-on-your-laptop-in-2020-e986468a577f&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----e986468a577f--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----e986468a577f--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@chiefhustler?source=post_page-----e986468a577f--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@chiefhustler?source=post_page-----e986468a577f--------------------------------", "anchor_text": "ChiefHustler"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Ffa5cb554796e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmedium-data-on-your-laptop-in-2020-e986468a577f&user=ChiefHustler&userId=fa5cb554796e&source=post_page-fa5cb554796e----e986468a577f---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fe986468a577f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmedium-data-on-your-laptop-in-2020-e986468a577f&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fe986468a577f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmedium-data-on-your-laptop-in-2020-e986468a577f&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@filisantillan?utm_source=medium&utm_medium=referral", "anchor_text": "Filiberto Santill\u00e1n"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://vaex.readthedocs.io/en/latest/api.html", "anchor_text": "here"}, {"url": "https://vaex.readthedocs.io/en/latest/api.html#string-operations", "anchor_text": "here"}, {"url": "https://distributed.dask.org/en/latest/", "anchor_text": "Dask Distributed"}, {"url": "https://medium.com/@klahrichi/hyperparameter-tuning-with-dask-distributed-and-mlflow-ca6a4a275a2e", "anchor_text": "here"}, {"url": "https://medium.com/tag/big-data?source=post_page-----e986468a577f---------------big_data-----------------", "anchor_text": "Big Data"}, {"url": "https://medium.com/tag/big-data-analytics?source=post_page-----e986468a577f---------------big_data_analytics-----------------", "anchor_text": "Big Data Analytics"}, {"url": "https://medium.com/tag/data-science?source=post_page-----e986468a577f---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fe986468a577f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmedium-data-on-your-laptop-in-2020-e986468a577f&user=ChiefHustler&userId=fa5cb554796e&source=-----e986468a577f---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fe986468a577f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmedium-data-on-your-laptop-in-2020-e986468a577f&user=ChiefHustler&userId=fa5cb554796e&source=-----e986468a577f---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fe986468a577f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmedium-data-on-your-laptop-in-2020-e986468a577f&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----e986468a577f--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fe986468a577f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmedium-data-on-your-laptop-in-2020-e986468a577f&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----e986468a577f---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----e986468a577f--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----e986468a577f--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----e986468a577f--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----e986468a577f--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----e986468a577f--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----e986468a577f--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----e986468a577f--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----e986468a577f--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@chiefhustler?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@chiefhustler?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "ChiefHustler"}, {"url": "https://medium.com/@chiefhustler/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "194 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Ffa5cb554796e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmedium-data-on-your-laptop-in-2020-e986468a577f&user=ChiefHustler&userId=fa5cb554796e&source=post_page-fa5cb554796e--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F22430265b692&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmedium-data-on-your-laptop-in-2020-e986468a577f&newsletterV3=fa5cb554796e&newsletterV3Id=22430265b692&user=ChiefHustler&userId=fa5cb554796e&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}