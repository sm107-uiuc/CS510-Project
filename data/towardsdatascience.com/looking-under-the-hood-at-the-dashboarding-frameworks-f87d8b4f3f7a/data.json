{"url": "https://towardsdatascience.com/looking-under-the-hood-at-the-dashboarding-frameworks-f87d8b4f3f7a", "time": 1683011459.574847, "path": "towardsdatascience.com/looking-under-the-hood-at-the-dashboarding-frameworks-f87d8b4f3f7a/", "webpage": {"metadata": {"title": "Looking under the hood at the Dashboarding frameworks | by Dan Lester | Towards Data Science", "h1": "Looking under the hood at the Dashboarding frameworks", "description": "Data scientists today have a wide range of open source tools that will allow them to build user interfaces for their models without having to learn any Javascript \u2014 or even having to think about the\u2026"}, "outgoing_paragraph_urls": [{"url": "https://voila.readthedocs.io/", "anchor_text": "Voila", "paragraph_index": 8}, {"url": "https://streamlit.io/", "anchor_text": "Streamlit", "paragraph_index": 15}, {"url": "https://discuss.streamlit.io/t/two-people-on-same-session-state/3211", "anchor_text": "workaround hack", "paragraph_index": 22}, {"url": "https://github.com/danlester/exec-model-tests", "anchor_text": "available on GitHub", "paragraph_index": 34}, {"url": "https://containds.com/", "anchor_text": "ContainDS", "paragraph_index": 35}, {"url": "http://containds.com", "anchor_text": "containds.com", "paragraph_index": 37}], "all_paragraphs": ["Data scientists today have a wide range of open source tools that will allow them to build user interfaces for their models without having to learn any Javascript \u2014 or even having to think about the UI at all beyond declaring which variables should be selectable by the user.", "Once they believe the promise that this is achievable, the next questions are around the performance and programming details:", "Sometimes all you need is to run some simple code tests to understand how the frameworks operate. This article will demonstrate the execution models of three popular frameworks: Voila, Streamlit, and Plotly Dash. We\u2019ll write a version of a basic UI in each framework, let two different users access it at the same time, and then we\u2019ll observe how this affects our simulated data.", "We\u2019ll simulate two main components of a dashboard: startup calculations, and a user interaction.", "Often, a dashboard will need to read in or compute a predictive model when it first starts up. A common complaint when data scientists have started to build out a dashboard is \u201cevery time a new user accesses the dashboard, they have to wait for the model to recalculate\u201d. We want to understand how easy it will be for our code to cache our model for each new user.", "Instead of actually calculating a model, all we\u2019ll do is store the current time in a variable. If that keeps showing the same time on each run, we\u2019ll know that the \u2018model\u2019 has not been recalculated \u2014 we\u2019re using the time variable that was cached on the initial server startup. If it changes every time a button is pressed, we\u2019ll know that everything is being recalculated from scratch.", "The user interaction will be real (there is no need to simulate it). All that we will offer is an \u2018Increment\u2019 button that will increase the value of a counter and display it again. We can observe this to understand if multiple users see the same value as each other, or if they are running isolated environments. Does the counter increment successfully for each user, or does it reset each time the button is pressed because the framework is recalculating the entire script from scratch?", "We will access the dashboard in Chrome and also in Firefox to simulate two completely different users accessing the web app at the same time.", "Voila is a solution to display your Jupyter notebooks as standalone web apps. Essentially, it hides code cells by default and simply runs your notebook from top-to-bottom, then finally allows the user to interact with any widgets that were defined on the page. Here is the code from our test notebook:", "Running the Jupyter notebook is similar to using Voila as the server, and you can see above that the notebook is doing what we expected: the start_time variable stays the same once calculated, and the counter increments on each button click.", "Let\u2019s try running in the Voila server. We\u2019ll open up in Chrome and Firefox separately. We\u2019ll click \u2018Increment\u2019 in each browser alternately to see if the counter works as expected:", "The counter works as hoped \u2014 each user gets an independent value. The time also still stays the same throughout each notebook\u2019s run. But you can see that the time in each browser is different, meaning that the \u2018startup calculations\u2019 were run independently for each user. That implies that each user would have to sit through any long-running model calculation on each access of the web app.", "This allows us to understand the Voila execution model and to think through its limitations and advantages for any project. There is (intentionally) a similarity with the Jupyter notebook model; it\u2019s as though each user has loaded the notebook in a new kernel, and shift+entered their way through all the cells. Once at the bottom, we end up with a Python kernel state \u2014 i.e. some variables set in memory. Nothing more will happen really\u2026 unless we\u2019ve hooked up some widgets to run Python code as a callback. This is what we\u2019ve done with the Button widget. But the notebook code cells are disregarded at this point \u2014 everything that happens is based on the Python memory state at this point, including the button click callback function now just being run from memory rather than the notebook cell.", "The details aren\u2019t important to understand if you\u2019re new to this, but hopefully, the results will make more sense when compared against the other two frameworks.", "Some workarounds for the \u2018startup calculation cost\u2019 problem in Voila will be discussed later.", "Here is a similar dashboard built with Streamlit:", "This time the results are very different:", "Not only do we see a different time in each browser initially, but every time we click on the Increment button, a new time is generated and the counter never progresses beyond 1!", "This is because the execution model in Streamlit is different: the whole script is rerun from top-to-bottom every time the user interacts with it at all. This sounds inefficient, and it certainly can be, but it allows the simple declarative scripting style to work. In the Streamlit code, you can see the button\u2019s click functionality is just inside an \u2018if\u2019 statement. There is no real callback mechanism needed at all, compared to the Voila widgets where we hook up a callback function to be executed on button click.", "To work around this potential inefficiency, Streamlit provides a cache decorator. Here is an updated Streamlit example:", "Now, we find that the \u2018startup calculation\u2019 of obtaining the current time is run only one time ever.", "The time in both browsers is exactly the same, and this never changes when either \u2018Increment\u2019 button is pressed. While the cache decorator is simple and useful, it is limited to caching objects that can sensibly be \u2018pickled\u2019 in Python \u2014 i.e. converted into a format that can be loaded from or saved to disk.", "As before, the count never increases. This omission of per-user state is something that Streamlit is looking to address, and a workaround hack is available. But actually it isn\u2019t that common to really need it: in most dashboards, state is normally held in widgets anyway which are maintained on a per-user basis by Streamlit. For example, a slider can be dragged by the user to change an input to the model, and its new value does survive the code rerun.", "Here is a similar script for the Plotly Dash framework:", "The code here is a bit more involved from the start, but that does lead to greater control.", "Here the \u2018startup calculation\u2019 (the time) remains the same across both browsers and doesn\u2019t change when the Increment button is clicked. In addition, the counter does increment successfully and independently per user. This uses the n_clicks property of Plotly Dash\u2019s button component which it ties to each physical HTML button that is rendered.", "Note that in the Plotly Dash example, the output is overwritten each time the button is pressed. In Voila, each button press appended new output. That behavior could easily be changed in either framework.", "If you look again at the code for Plotly Dash, you can see that the web server is much more obviously exposed to your own code. Our code\u2019s app.run_server call is where the server \u2018loop\u2019 is actually running. By contrast in Voila and Streamlit, the server was very much external to our own script \u2014 it was something on the outside \u2018loading in\u2019 our script to process it for itself.", "For Plotly Dash this highlights that we are building a traditional web app, and the real bonus that the Dash framework provides is in exposing user interface components that can be used without writing any Javascript or HTML.", "Generally, Voila and Streamlit are easier for non-programmers to start off with, but extensibility may become limited further down the line if you do want to build out more traditional \u2018web app\u2019 functionality.", "This isn\u2019t to say that any one of these frameworks is inherently \u2018better\u2019 than any other. They all have different designs that lend themselves to different scenarios.", "Ultimately, Plotly Dash\u2019s ease at working with per-user state and maintaining \u2018startup calculations\u2019 comes because it does not attempt to remove us from a standard Python programming environment. The flip side is that coding has a higher learning curve for someone coming from a Jupyter-only background -where Voila or Streamlit would allow them to add a few widgets to their usual top-to-bottom procedural code.", "The truth is that command of the underlying programming language should enable you to overcome any of the problems discussed. For example, Voila will easily allow us to write our own code to save our \u2018startup calculations\u2019 to disk, and read them in if available on the next run. But this doesn\u2019t feel natural when coming from a notebook environment.", "Realistically, for any of these frameworks, basic working dashboards are built using copy-and-paste code snippets found from similar examples in the docs or out there on the web! To get started building dashboards, you might want some idea how quickly it might need to evolve into a larger web app, but the best way to choose a framework to try out is to understand the environment and coding style where you\u2019re already most comfortable.", "The sample code for this article is available on GitHub.", "Dan Lester is a co-founder of ContainDS, a data science platform for teams working on discrete projects.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Entrepreneur building tools for data scientists: containds.com"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Ff87d8b4f3f7a&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Flooking-under-the-hood-at-the-dashboarding-frameworks-f87d8b4f3f7a&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Flooking-under-the-hood-at-the-dashboarding-frameworks-f87d8b4f3f7a&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Flooking-under-the-hood-at-the-dashboarding-frameworks-f87d8b4f3f7a&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Flooking-under-the-hood-at-the-dashboarding-frameworks-f87d8b4f3f7a&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----f87d8b4f3f7a--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----f87d8b4f3f7a--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@dslester?source=post_page-----f87d8b4f3f7a--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@dslester?source=post_page-----f87d8b4f3f7a--------------------------------", "anchor_text": "Dan Lester"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fb6bb58cd796c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Flooking-under-the-hood-at-the-dashboarding-frameworks-f87d8b4f3f7a&user=Dan+Lester&userId=b6bb58cd796c&source=post_page-b6bb58cd796c----f87d8b4f3f7a---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ff87d8b4f3f7a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Flooking-under-the-hood-at-the-dashboarding-frameworks-f87d8b4f3f7a&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ff87d8b4f3f7a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Flooking-under-the-hood-at-the-dashboarding-frameworks-f87d8b4f3f7a&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@thevanegmond?utm_source=medium&utm_medium=referral", "anchor_text": "Nathan Van Egmond"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://voila.readthedocs.io/", "anchor_text": "Voila"}, {"url": "https://streamlit.io/", "anchor_text": "Streamlit"}, {"url": "https://discuss.streamlit.io/t/two-people-on-same-session-state/3211", "anchor_text": "workaround hack"}, {"url": "https://github.com/danlester/exec-model-tests", "anchor_text": "available on GitHub"}, {"url": "https://containds.com/", "anchor_text": "ContainDS"}, {"url": "https://medium.com/tag/data-science?source=post_page-----f87d8b4f3f7a---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/data-visualization?source=post_page-----f87d8b4f3f7a---------------data_visualization-----------------", "anchor_text": "Data Visualization"}, {"url": "https://medium.com/tag/dashboard?source=post_page-----f87d8b4f3f7a---------------dashboard-----------------", "anchor_text": "Dashboard"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Ff87d8b4f3f7a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Flooking-under-the-hood-at-the-dashboarding-frameworks-f87d8b4f3f7a&user=Dan+Lester&userId=b6bb58cd796c&source=-----f87d8b4f3f7a---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Ff87d8b4f3f7a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Flooking-under-the-hood-at-the-dashboarding-frameworks-f87d8b4f3f7a&user=Dan+Lester&userId=b6bb58cd796c&source=-----f87d8b4f3f7a---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ff87d8b4f3f7a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Flooking-under-the-hood-at-the-dashboarding-frameworks-f87d8b4f3f7a&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----f87d8b4f3f7a--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Ff87d8b4f3f7a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Flooking-under-the-hood-at-the-dashboarding-frameworks-f87d8b4f3f7a&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----f87d8b4f3f7a---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----f87d8b4f3f7a--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----f87d8b4f3f7a--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----f87d8b4f3f7a--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----f87d8b4f3f7a--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----f87d8b4f3f7a--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----f87d8b4f3f7a--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----f87d8b4f3f7a--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----f87d8b4f3f7a--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@dslester?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@dslester?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Dan Lester"}, {"url": "https://medium.com/@dslester/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "432 Followers"}, {"url": "http://containds.com", "anchor_text": "containds.com"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fb6bb58cd796c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Flooking-under-the-hood-at-the-dashboarding-frameworks-f87d8b4f3f7a&user=Dan+Lester&userId=b6bb58cd796c&source=post_page-b6bb58cd796c--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fa12e45f04087&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Flooking-under-the-hood-at-the-dashboarding-frameworks-f87d8b4f3f7a&newsletterV3=b6bb58cd796c&newsletterV3Id=a12e45f04087&user=Dan+Lester&userId=b6bb58cd796c&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}