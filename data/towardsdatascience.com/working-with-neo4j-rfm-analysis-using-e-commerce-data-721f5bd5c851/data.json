{"url": "https://towardsdatascience.com/working-with-neo4j-rfm-analysis-using-e-commerce-data-721f5bd5c851", "time": 1683016319.1958451, "path": "towardsdatascience.com/working-with-neo4j-rfm-analysis-using-e-commerce-data-721f5bd5c851/", "webpage": {"metadata": {"title": "Working with Neo4j. Creating a graph using e-commerce data\u2026 | by Egemen Zeytinci | Towards Data Science", "h1": "Working with Neo4j", "description": "Relational databases are logical way to manage data, but on the other hand, alternative approaches such as graph database can be more useful in many cases. It\u2019s known that huge companies in various\u2026"}, "outgoing_paragraph_urls": [{"url": "https://www.kaggle.com/carrie1/ecommerce-data", "anchor_text": "here", "paragraph_index": 2}, {"url": "https://apiko.com/blog/neo4j-database-advantages", "anchor_text": "Neo4j Database: Use Cases and Advantages For Your Project", "paragraph_index": 26}, {"url": "https://neo4j.com/graphacademy/online-training/v4/07-introneo-3-5-getting-more-out-of-neo4j/", "anchor_text": "Getting More Out of Neo4j", "paragraph_index": 27}, {"url": "https://neo4j.com/docs/cypher-manual/current/clauses/merge/#query-merge-on-create-on-match", "anchor_text": "Use ON CREATE and ON MATCH", "paragraph_index": 28}, {"url": "https://www.datacamp.com/community/tutorials/introduction-customer-segmentation-python", "anchor_text": "Introduction to Customer Segmentation in Python", "paragraph_index": 29}], "all_paragraphs": ["Relational databases are logical way to manage data, but on the other hand, alternative approaches such as graph database can be more useful in many cases. It\u2019s known that huge companies in various industries such as eBay, Airbnb, Cisco and many others use the graph database [1]. At this point, Neo4j shows itself as a graph database platform for managing the data.", "In this article, I\u2019ll try to explain how to create an example graph from the e-commerce data, using Neo4j and also touch on RFM Analysis.", "First of all, you can find the e-commerce data I mentioned before here. At first glance, it\u2019s clearly seen that the data consists of transactions. Therefore, the data includes a series of columns such as customer, purchased products, quantity and date of transaction.", "It would be a step in the right direction to plan the schema before inserting data to Neo4j. The schema aimed to be builded in present study is as follows,", "We can start with the customers now. Creating a constraint before creating nodes both prevents duplication and performs better because it uses MERGE locks [2]. You can create the constraint as follows,", "Please notice that, having uniqueness for a property value is only useful in the graph if the property exists. Then you can create customer nodes as follows,", "After creating customer nodes, it\u2019ll be even easier to create product and transaction nodes. Likewise, firstly it would be correct to create constraint for product nodes.", "There is an important point in here, when you create a constraint, Neo4j will create an index. Cypher will use that index for lookups just like other indexes. Therefore, there\u2019s no need to create a separate index. In fact, if you try to create a constraint when there\u2019s already an index, you\u2019ll get an error.", "After taking into account all of these, you can create product nodes as follows,", "As you can see above, ON CREATE statement is used when creating nodes. If the node needs to be created, merge a node and set the properties. Similarly, you can also use the statement ON MATCH if the node already exists [3].", "It\u2019ll be nice to create transaction nodes just before start dealing with relationships as follows,", "Looking at the Cypher statements above, you can see that semicolon is used to separate Cypher statements. In general, you don\u2019t need to end a Cypher statement with a semi-colon, but if you want to execute multiple Cypher statements, you must separate them [2].", "The nodes in the graph are ready, but these nodes have no connection with each other. The connections capture the semantic relationships and context of the nodes in the graph [2]. As it\u2019s known, 3 types of nodes are available in the graph: Customer, transaction and product. As I mentioned at the beginning of this section, having relationships between customer-transaction and transaction-product will make this graph much more logical. The customer MADE a transaction and the transaction CONTAINS products. Here is the Cypher statement to building MADE relationships,", "Let\u2019s finalize the graph by creating CONTAINS relationships,", "You can now check the schema of the graph with the statement CALL db.schema.visualization(). The result is like that,", "Keep in mind that you can create the graph in a different way. For instance, the transaction could have been a relationship, not a node, and we could call it BOUGHT. As you can imagine, which one you choose depends on your business problem. At this point, you should set the rules and build the structure accordingly.", "RFM analysis is a behavior-based approach grouping customers into segments. It groups the customers on the basis of their previous purchase transactions. [4]. Here are the three dimensions of RFM,", "Segmenting customers using RFM analysis is an important point for companies that sell in many industries. Because companies want to know the customers that are valuable to them and to ensure loyalty for all their customers.", "After mentioning the dimensions of the RFM and the significance of the customer segmentation, we can get the recency, frequency and monetary value with following python code,", "Then, it would be a correct step to define the segments by creating percentiles for dimensions. Please keep in mind that the segmentation here can be taken to a much more advanced level and is often not that simple. Real world problems can be more complex.", "When you run the above python code, you\u2019ll see a result like the following,", "As you can see in the output, there are descriptive statistics to segments. For instance, looking at the statistics of the best customers, it\u2019s seen that they have recently purchased, frequently purchased, and the monetary value was quite high. Therefore, it\u2019s important that customers in this segment are kept by the company.", "There will be different approaches to other segments. This is natural considering the purpose of segmentation. It\u2019s a big impact to develop different approaches for segments and to improve customer loyalty. For instance, you can see the descriptions and required actions to the four segments as follows,", "As I mentioned at the beginning of the article, different approaches may be needed to find solutions to problems in business life. At this point, it\u2019ll be necessary to identify the problem quite well and build the solution step by step. Although it is not a viable solution to all problems, trying different approaches to tackle an issue would be both beneficial for your company and your career development.", "I hope it\u2019ll be useful for you to get a head start on Neo4j and customer segmentation with this article.", "Thank you for reading! If you\u2019re curious about more, please visit my repository!", "[1] Helen Vdovychenko, Neo4j Database: Use Cases and Advantages For Your Project (2020)", "[2] Getting More Out of Neo4j", "[3] Use ON CREATE and ON MATCH", "[4] Avinash Navlani, Introduction to Customer Segmentation in Python (2018)", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F721f5bd5c851&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fworking-with-neo4j-rfm-analysis-using-e-commerce-data-721f5bd5c851&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fworking-with-neo4j-rfm-analysis-using-e-commerce-data-721f5bd5c851&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fworking-with-neo4j-rfm-analysis-using-e-commerce-data-721f5bd5c851&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fworking-with-neo4j-rfm-analysis-using-e-commerce-data-721f5bd5c851&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----721f5bd5c851--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----721f5bd5c851--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@egemenzeytinci?source=post_page-----721f5bd5c851--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@egemenzeytinci?source=post_page-----721f5bd5c851--------------------------------", "anchor_text": "Egemen Zeytinci"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F985275e26aa&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fworking-with-neo4j-rfm-analysis-using-e-commerce-data-721f5bd5c851&user=Egemen+Zeytinci&userId=985275e26aa&source=post_page-985275e26aa----721f5bd5c851---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F721f5bd5c851&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fworking-with-neo4j-rfm-analysis-using-e-commerce-data-721f5bd5c851&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F721f5bd5c851&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fworking-with-neo4j-rfm-analysis-using-e-commerce-data-721f5bd5c851&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://pixabay.com/users/geralt-9301/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=551344", "anchor_text": "Gerd Altmann"}, {"url": "https://pixabay.com/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=551344", "anchor_text": "Pixabay"}, {"url": "https://www.kaggle.com/carrie1/ecommerce-data", "anchor_text": "here"}, {"url": "https://git.io/JkIjD", "anchor_text": "https://git.io/JkIjD"}, {"url": "https://git.io/JkIjD", "anchor_text": "https://git.io/JkIjD"}, {"url": "https://git.io/JkIjD", "anchor_text": "https://git.io/JkIjD"}, {"url": "https://git.io/JkIjD", "anchor_text": "https://git.io/JkIjD"}, {"url": "https://github.com/egemenzeytinci/neo4j-example", "anchor_text": "egemenzeytinci/neo4j-exampleIn the present study, an example graph was created from e-commerce data using Neo4j, then customer segmentation was\u2026github.com"}, {"url": "https://apiko.com/blog/neo4j-database-advantages", "anchor_text": "Neo4j Database: Use Cases and Advantages For Your Project"}, {"url": "https://neo4j.com/graphacademy/online-training/v4/07-introneo-3-5-getting-more-out-of-neo4j/", "anchor_text": "Getting More Out of Neo4j"}, {"url": "https://neo4j.com/docs/cypher-manual/current/clauses/merge/#query-merge-on-create-on-match", "anchor_text": "Use ON CREATE and ON MATCH"}, {"url": "https://www.datacamp.com/community/tutorials/introduction-customer-segmentation-python", "anchor_text": "Introduction to Customer Segmentation in Python"}, {"url": "https://medium.com/tag/neo4j?source=post_page-----721f5bd5c851---------------neo4j-----------------", "anchor_text": "Neo4j"}, {"url": "https://medium.com/tag/rfm-analysis?source=post_page-----721f5bd5c851---------------rfm_analysis-----------------", "anchor_text": "Rfm Analysis"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----721f5bd5c851---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/tag/python?source=post_page-----721f5bd5c851---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/customer-segmentation?source=post_page-----721f5bd5c851---------------customer_segmentation-----------------", "anchor_text": "Customer Segmentation"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F721f5bd5c851&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fworking-with-neo4j-rfm-analysis-using-e-commerce-data-721f5bd5c851&user=Egemen+Zeytinci&userId=985275e26aa&source=-----721f5bd5c851---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F721f5bd5c851&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fworking-with-neo4j-rfm-analysis-using-e-commerce-data-721f5bd5c851&user=Egemen+Zeytinci&userId=985275e26aa&source=-----721f5bd5c851---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F721f5bd5c851&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fworking-with-neo4j-rfm-analysis-using-e-commerce-data-721f5bd5c851&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----721f5bd5c851--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F721f5bd5c851&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fworking-with-neo4j-rfm-analysis-using-e-commerce-data-721f5bd5c851&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----721f5bd5c851---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----721f5bd5c851--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----721f5bd5c851--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----721f5bd5c851--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----721f5bd5c851--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----721f5bd5c851--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----721f5bd5c851--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----721f5bd5c851--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----721f5bd5c851--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@egemenzeytinci?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@egemenzeytinci?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Egemen Zeytinci"}, {"url": "https://medium.com/@egemenzeytinci/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "51 Followers"}, {"url": "https://github.com/egemenzeytinci", "anchor_text": "https://github.com/egemenzeytinci"}, {"url": "https://www.linkedin.com/in/egemen-zeytinci-a4339b124/", "anchor_text": "https://www.linkedin.com/in/egemen-zeytinci-a4339b124/"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F985275e26aa&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fworking-with-neo4j-rfm-analysis-using-e-commerce-data-721f5bd5c851&user=Egemen+Zeytinci&userId=985275e26aa&source=post_page-985275e26aa--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fdd04f596d53a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fworking-with-neo4j-rfm-analysis-using-e-commerce-data-721f5bd5c851&newsletterV3=985275e26aa&newsletterV3Id=dd04f596d53a&user=Egemen+Zeytinci&userId=985275e26aa&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}