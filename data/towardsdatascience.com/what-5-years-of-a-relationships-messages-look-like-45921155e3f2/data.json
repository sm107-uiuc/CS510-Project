{"url": "https://towardsdatascience.com/what-5-years-of-a-relationships-messages-look-like-45921155e3f2", "time": 1683005933.040405, "path": "towardsdatascience.com/what-5-years-of-a-relationships-messages-look-like-45921155e3f2/", "webpage": {"metadata": {"title": "What 5 Years of a Relationship\u2019s Messages Look Like | by Callum Ballard | Towards Data Science", "h1": "What 5 Years of a Relationship\u2019s Messages Look Like", "description": "As our government-imposed lockdown reached week number three, my girlfriend made a throwaway comment: \u201cI bet our message-sending is at an all time low\u2026\u201d It\u2019s the kind of remark that a house-bound\u2026"}, "outgoing_paragraph_urls": [{"url": "https://telegram.org/blog/export-and-more", "anchor_text": "downloaded our entire message history", "paragraph_index": 1}, {"url": "https://towardsdatascience.com/soup-of-the-day-97d71e6c07ec", "anchor_text": "various BeatifulSoup4 methods", "paragraph_index": 1}, {"url": "https://www.theverge.com/2015/11/16/9746650/word-of-the-year-emoji-oed-dictionary", "anchor_text": "Oxford Dictionary word-of-the-year in 2015", "paragraph_index": 15}, {"url": "https://pypi.org/project/emoji/", "anchor_text": "neat little package (imaginatively called \u2018emoji\u2019)", "paragraph_index": 16}, {"url": "https://telegram.org/blog/discover-stickers-and-more", "anchor_text": "stickers", "paragraph_index": 17}, {"url": "https://www.linkedin.com/in/callum-ballard/", "anchor_text": "LinkedIn", "paragraph_index": 26}], "all_paragraphs": ["As our government-imposed lockdown reached week number three, my girlfriend made a throwaway comment: \u201cI bet our message-sending is at an all time low\u2026\u201d", "It\u2019s the kind of remark that a house-bound data scientist isn\u2019t going to ignore for long. So I went to Telegram\u2019s desktop app, and downloaded our entire message history. The export comes in the form of HTML files, each containing 500 messages\u2019 worth of data (there were over 160 such files). Happily, one can use techniques used in general webscraping endevours \u2014 in particular, various BeatifulSoup4 methods \u2014 to automate the creation of a dataframe, where each row represents one message.", "Note \u2014 a key feature here is the Timestamp column. It is important for the Pandas methods we\u2019ll use later that this is of type \u2018datetime\u2019, rather than simply a string. This is pretty easy to achieve with Pandas\u2019 in-buit to_datetime method:", "The Telegram HTML gives its timestamps using the dd/mm/yyyy format. We thus pass the \u2018dayfirst\u2019 parameter to ensure that this is how the string is interpreted (i.e. 5/4/2020 should be read as the 5th of April, not the 4th of May).", "So what can we do with this dataset? We could certainly attempt some NLP work (this may be the subject of a future blog \u2014 I have certain hypotheses about how our vocabularies have converged during our time together\u2026) For now, let\u2019s simply think about how to visualise our time series data, and how such visualisations can be best presented to enable the extraction of insight.", "Let\u2019s first investigate how our message volumes have evolved over the last five years by creating a line chart of messages sent per day. Pandas comes with a built-in method allowing us to aggregate data by given time intervals (e.g. a count of messages per day).", "There are several chained methods here \u2014 let\u2019s break it down:", "So what does this look like in as a standard line chart?", "This isn\u2019t really any better if we look at the total word count on a daily basis (i.e. it\u2019s not the case that our data is affected by my apparently annoying tendency to send each clause in a sentence as a separate message).", "There are a couple of things we can pull from these charts, however:", "Let\u2019s investigate that last point a bit further. The charts show that, even though the daily messaging volumes have a pretty consistant upper bound over the five years, they fluctuate wildly day by day (we\u2019ll exchange 500 words one day, and zero the next).", "We can clean this up a bit by using rolling averages \u2014 in other words, the value for a given day is calculated as the mean value of the last x days. This means that our very jagged plots above should, in theory, smooth out (especially as we increase the window width, x). This ought to reveal any underlying trends.", "Pandas has a handy method for this:", "Let\u2019s now look at total words exchanged per day, split between sender, with increasing window widths (of one week, four weeks, and eight weeks). Let\u2019s also add two red vertical lines showing:", "The 56 day rolling average starts to make a few things a little bit clearer:", "Of course, modern messaging is more than just the words you exchange (there\u2019s a reason the Oxford Dictionary word-of-the-year in 2015 was an emoji). Surprisingly, the initial scrape of the Telegram HTML actually preserved the original emoji.", "Native Python does not cope with these characters, however there\u2019s a neat little package (imaginatively called \u2018emoji\u2019) that allows you to identify, count, and decode emojis in strings.", "If we investigate the \u2018non-text\u2019 messages, we can see that emojis are an especially important communication method for my girlfriend. I, on the other hand, add value by sharing photos and links (generally from Reddit), and stickers (a feature that Telegram was relatively early to introduce).", "We can attempt to see how volumes of these non-text messages have changed over time using the same rolling average trick. However, beyond an early 2018 spike in Stickers (when we worked out that you could download custom sets \u2014 truly, a gamechaging moment), there aren\u2019t many discernable patterns.", "Instead, let\u2019s build a graph showing the accumilation of these non-text messages by type. To do this, we can employ NumPy\u2019s cumsum() method, which will take a cumulative sum of a series. Supposing we have a dataframe whose index is a date range, and each column describes the number of messages of each type sent on that day:", "Again, we can see the introduction and uptake of stickers (the amber segment), as well as an acceleration in the use of emojis from 2018 onwards.", "Something that our previous analysis has not touched on is the time of day that we have shared messages (only the amount per day). A visualisation of this could get very messy very quickly. There are already 24 hours a day \u2014 if we then want to see if there are differences depending on other metrics (e.g. day of the week, the year, etc.) then suddenly we have a lot of visual data we need to convey in a single chart.", "A heatmap allows us to do this fairly neatly. Here, I\u2019ve created a dataframe showing the sum of words sent by hour, by each day of the week, before and after we started living together (using Pandas\u2019 pivot_table method):", "I can then get the average words sent per hour by dividing the two parts of the dataframe by the appropriate number of weeks spent not living, and living together. We can then use Seaborn\u2019s heatmap function to visualise the dataframe.", "Having added a couple of vertical and horizontal lines to demarkate work hours and weekends, we can easily pull visual information from the heatmap. Before moving in together, we messaged fairly consistantly through the day, but especially heavily before sleeping (the paler squares on Fridays and Saturdays suggest that we were more likely to sleepover at each other\u2019s houses on these evenings).", "Having moved in together, we can see that our messaging became confined to work hours. Interestingly, it appears that the volume of messaging during this time of the day actually increased. We can also see that our bedtimes drastically improved in this time \u2014 long gone are the days of messaging until 1am.", "Thanks for reading all the way to the end of the blog! I\u2019d love to hear any comments about the above analysis, or any of the concepts that the piece touches on. Feel free to leave a message below, or reach out to me through LinkedIn.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Analysis Lead at Cleo AI, McKinsey & LSE Alumni, previously published in The Economist. Typically found listening to Japanese Math Rock..."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F45921155e3f2&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-5-years-of-a-relationships-messages-look-like-45921155e3f2&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-5-years-of-a-relationships-messages-look-like-45921155e3f2&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-5-years-of-a-relationships-messages-look-like-45921155e3f2&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-5-years-of-a-relationships-messages-look-like-45921155e3f2&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----45921155e3f2--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----45921155e3f2--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@callumballard?source=post_page-----45921155e3f2--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@callumballard?source=post_page-----45921155e3f2--------------------------------", "anchor_text": "Callum Ballard"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F3bcc53c95269&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-5-years-of-a-relationships-messages-look-like-45921155e3f2&user=Callum+Ballard&userId=3bcc53c95269&source=post_page-3bcc53c95269----45921155e3f2---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F45921155e3f2&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-5-years-of-a-relationships-messages-look-like-45921155e3f2&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F45921155e3f2&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-5-years-of-a-relationships-messages-look-like-45921155e3f2&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://telegram.org/blog/export-and-more", "anchor_text": "downloaded our entire message history"}, {"url": "https://towardsdatascience.com/soup-of-the-day-97d71e6c07ec", "anchor_text": "various BeatifulSoup4 methods"}, {"url": "https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.groupby.html", "anchor_text": "standard pandas groupby"}, {"url": "https://www.theverge.com/2015/11/16/9746650/word-of-the-year-emoji-oed-dictionary", "anchor_text": "Oxford Dictionary word-of-the-year in 2015"}, {"url": "https://pypi.org/project/emoji/", "anchor_text": "neat little package (imaginatively called \u2018emoji\u2019)"}, {"url": "https://telegram.org/blog/discover-stickers-and-more", "anchor_text": "stickers"}, {"url": "https://www.linkedin.com/in/callum-ballard/", "anchor_text": "LinkedIn"}, {"url": "https://medium.com/tag/towards-data-science?source=post_page-----45921155e3f2---------------towards_data_science-----------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/tag/data-science?source=post_page-----45921155e3f2---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/data-visualization?source=post_page-----45921155e3f2---------------data_visualization-----------------", "anchor_text": "Data Visualization"}, {"url": "https://medium.com/tag/python?source=post_page-----45921155e3f2---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/relationships?source=post_page-----45921155e3f2---------------relationships-----------------", "anchor_text": "Relationships"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F45921155e3f2&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-5-years-of-a-relationships-messages-look-like-45921155e3f2&user=Callum+Ballard&userId=3bcc53c95269&source=-----45921155e3f2---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F45921155e3f2&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-5-years-of-a-relationships-messages-look-like-45921155e3f2&user=Callum+Ballard&userId=3bcc53c95269&source=-----45921155e3f2---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F45921155e3f2&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-5-years-of-a-relationships-messages-look-like-45921155e3f2&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----45921155e3f2--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F45921155e3f2&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-5-years-of-a-relationships-messages-look-like-45921155e3f2&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----45921155e3f2---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----45921155e3f2--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----45921155e3f2--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----45921155e3f2--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----45921155e3f2--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----45921155e3f2--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----45921155e3f2--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----45921155e3f2--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----45921155e3f2--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@callumballard?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@callumballard?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Callum Ballard"}, {"url": "https://medium.com/@callumballard/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "1K Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F3bcc53c95269&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-5-years-of-a-relationships-messages-look-like-45921155e3f2&user=Callum+Ballard&userId=3bcc53c95269&source=post_page-3bcc53c95269--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F107151aaecd0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-5-years-of-a-relationships-messages-look-like-45921155e3f2&newsletterV3=3bcc53c95269&newsletterV3Id=107151aaecd0&user=Callum+Ballard&userId=3bcc53c95269&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}