{"url": "https://towardsdatascience.com/object-based-land-cover-classification-with-python-cbe54e9c9e24", "time": 1683009494.012838, "path": "towardsdatascience.com/object-based-land-cover-classification-with-python-cbe54e9c9e24/", "webpage": {"metadata": {"title": "Object-based Land Cover Classification with Python | by Konrad Hafen | Towards Data Science", "h1": "Object-based Land Cover Classification with Python", "description": "Aerial images cover the entire globe at various spatial and temporal resolutions. Timely extraction of information from aerial images requires automated analysis to train computers to recognize what\u2026"}, "outgoing_paragraph_urls": [], "all_paragraphs": ["Aerial images cover the entire globe at various spatial and temporal resolutions. Timely extraction of information from aerial images requires automated analysis to train computers to recognize what the human eye immediately identifies. Object-based image analysis (OBIA) improves processing efficiency by implementing image segmentation algorithms to combine groups of pixels into objects (segments) reducing the amount of information in and image. This article describes how to use open source Python packages to perform image segmentation and land cover classification of an aerial image. Specifically, I will demonstrate the process of geographic object-based image analysis (GeOBIA)to perform supervised land cover classification in 5 steps.", "The image above is a portion of an aerial photo collected by the US Department of Agriculture (USDA) under the National Agricultural Imagery Progam (NAIP). The horizontal image resolution is 1 meter. Our first task is to group similar pixels into segments. Segmentation effectively reduces the number of elements in an image that need to be classified. This may reduce an image with 1 million pixels down to 50,000 segments, which is much more manageable.", "A number of segmentation algorithms are available. We won\u2019t go into details in detail in this article. I will show you results from two different algorithms, and how to implement them in Python with skimage.", "The code below demonstrates segmentation with the SLIC (Simple linear iterative clustering) and quickshift algorithms (lines 23 and 24, respectively). First, each of the 4 bands (red, blue, green, near-infrared) from the NAIP image is read as a numpy array with gdal. Band data are re-scaled to intensity values (ranging from 0\u20131). Then segments are created. Segments are saved to a new raster with gdal.", "Images below demonstrate how the segmentation algorithm and parameters affect the size and shape of the image segments. Segments in the first image (quickshift) don\u2019t capture the features in the image very well. You see segments overlapping roads, fields, and forested areas. In the second image, the segments from the SLIC algorithm do a much better following the boundaries of image features. The remainder of this article uses the SLIC result. Features in your image may be best represented by a different algorithm, or different algorithm parameters. Be sure to assess your segments before continuing with classification.", "Once the image is segmented the spectral properties of each segment must be quantitatively described. Given a number of pixels, the function below calculates descriptive statistics (e.g. mean, max, min, variance) for each band. These are the values that will be used by the random forests algorithm to classify the segments into land cover types.", "Now, we loop through each segment, send the pixels from each segment to the segment_features function and save the results in a list. This section of code will likely be the bottleneck in your processing time. It can be improved with parallelization, but that isn\u2019t discussed here.", "This is a supervised classification workflow, so you\u2019ll need to have some truth data describing the land cover types represented in your classification. I quickly generated the points below in QGIS to represent seven different land cover classes. These data are just an example. Ideally, you would have data collected in a more organized and statistically rigorous manner.", "The land cover truth data need to be split into training and test data sets. The training data set will train the random forests classification algorithm. We will compare the classification results to the test data set to assess classification accuracy.", "My land cover data are in shapefile format. The code below uses geopandas to read the truth data as a geodataframe. Randomly, 70% of the truth observations are assigned to a training data set and the remaining 30% to a testing data set. The training and test data sets are each saved to a new shapefile. During this process I also used a lookup table that I created to give names to each land cover class (lines 8\u201311). This is not necessary, but makes it easier to see what each class represents.", "Now, convert the training data to raster format so each observation point can be associated with an image segment.", "Associate each training observation with the corresponding image segment. Lines 13\u201319 ensure that each training observation is associated with only one segment. Because segments include multiple pixels, it is possible that segments represent multiple land cover types. This is why it is important to properly tune your segmentation algorithm.", "This is the meat of the analysis. The classification algorithm. First, identify and label the training objects (lines 1\u201320). This process involves associating a label (land cover type) with the statistics describing each spectral band within the image segment.", "Now, everything is now set up to train a classifier and use it to predict across all segments in the image. Here I\u2019m using random forests, a popular classification algorithm. The code to train (fit) the algorithm and make predictions is quite simple (lines 22\u201324). Simply pass the training objects (containing the spectral properties) and the associated land cover label to the classifier. Once the classifier is trained (fitted) predictions can be made for non-training segments based on their spectral properties. After the predictions are made, save them to raster for display in a GIS (lines 26\u201343).", "Accuracy assessment is a crucial aspect of any classification. If your classification doesn\u2019t represent what it\u2019s supposed to, it\u2019s not worth much. Because the emphasis of this article is to describe the GeOBIA workflow, I\u2019m not presenting my own accuracy results. Instead, I\u2019ll show how to generate a basic confusion matrix for accuracy assessment.", "Load the test data set created earlier and convert it to raster format so it is compatible with the generated predictions. Then simply query the predicted values from the locations where test data exist. Finally, generate the confusion matrix from the corresponding values.", "Note: We classified segments, but this accuracy assessment compares pixels. We\u2019re comparing all the pixels in each test segment to all the pixels in the corresponding predicted segment. This could lead to some bias if certain land cover classes are more frequently found in smaller (or larger) segments than others. Again, if you have done due diligence with image segmentation, this shouldn\u2019t be a problem.", "Combining image modules with geospatial modules in Python creates exciting opportunities for GeOBIA. Data manipulation (converting raster to vector to arrays, etc.) is quite onerous and tedious for this application, but that\u2019s why it\u2019s called data science.", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fcbe54e9c9e24&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fobject-based-land-cover-classification-with-python-cbe54e9c9e24&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fobject-based-land-cover-classification-with-python-cbe54e9c9e24&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fobject-based-land-cover-classification-with-python-cbe54e9c9e24&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fobject-based-land-cover-classification-with-python-cbe54e9c9e24&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----cbe54e9c9e24--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----cbe54e9c9e24--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://khafen.medium.com/?source=post_page-----cbe54e9c9e24--------------------------------", "anchor_text": ""}, {"url": "https://khafen.medium.com/?source=post_page-----cbe54e9c9e24--------------------------------", "anchor_text": "Konrad Hafen"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F56d662f7324a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fobject-based-land-cover-classification-with-python-cbe54e9c9e24&user=Konrad+Hafen&userId=56d662f7324a&source=post_page-56d662f7324a----cbe54e9c9e24---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fcbe54e9c9e24&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fobject-based-land-cover-classification-with-python-cbe54e9c9e24&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fcbe54e9c9e24&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fobject-based-land-cover-classification-with-python-cbe54e9c9e24&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://medium.com/tag/python?source=post_page-----cbe54e9c9e24---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/image-classification?source=post_page-----cbe54e9c9e24---------------image_classification-----------------", "anchor_text": "Image Classification"}, {"url": "https://medium.com/tag/data-science?source=post_page-----cbe54e9c9e24---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/technology?source=post_page-----cbe54e9c9e24---------------technology-----------------", "anchor_text": "Technology"}, {"url": "https://medium.com/tag/random-forest?source=post_page-----cbe54e9c9e24---------------random_forest-----------------", "anchor_text": "Random Forest"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fcbe54e9c9e24&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fobject-based-land-cover-classification-with-python-cbe54e9c9e24&user=Konrad+Hafen&userId=56d662f7324a&source=-----cbe54e9c9e24---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fcbe54e9c9e24&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fobject-based-land-cover-classification-with-python-cbe54e9c9e24&user=Konrad+Hafen&userId=56d662f7324a&source=-----cbe54e9c9e24---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fcbe54e9c9e24&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fobject-based-land-cover-classification-with-python-cbe54e9c9e24&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----cbe54e9c9e24--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fcbe54e9c9e24&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fobject-based-land-cover-classification-with-python-cbe54e9c9e24&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----cbe54e9c9e24---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----cbe54e9c9e24--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----cbe54e9c9e24--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----cbe54e9c9e24--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----cbe54e9c9e24--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----cbe54e9c9e24--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----cbe54e9c9e24--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----cbe54e9c9e24--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----cbe54e9c9e24--------------------------------", "anchor_text": ""}, {"url": "https://khafen.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://khafen.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Konrad Hafen"}, {"url": "https://khafen.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "255 Followers"}, {"url": "https://opensourceoptions.com", "anchor_text": "https://opensourceoptions.com"}, {"url": "https://publiclandsjournal.com", "anchor_text": "https://publiclandsjournal.com"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F56d662f7324a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fobject-based-land-cover-classification-with-python-cbe54e9c9e24&user=Konrad+Hafen&userId=56d662f7324a&source=post_page-56d662f7324a--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F1e1cde455f3a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fobject-based-land-cover-classification-with-python-cbe54e9c9e24&newsletterV3=56d662f7324a&newsletterV3Id=1e1cde455f3a&user=Konrad+Hafen&userId=56d662f7324a&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}