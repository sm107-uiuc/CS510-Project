{"url": "https://towardsdatascience.com/extracting-air-stability-index-data-from-image-generated-by-raob-software-using-tesseract-and-92eece2d4439", "time": 1683012617.771366, "path": "towardsdatascience.com/extracting-air-stability-index-data-from-image-generated-by-raob-software-using-tesseract-and-92eece2d4439/", "webpage": {"metadata": {"title": "Extracting Air Stability Index Data From Image Generated by RAOB Software Using Tesseract and OpenCV | by Muhammad Ryan | Towards Data Science", "h1": "Extracting Air Stability Index Data From Image Generated by RAOB Software Using Tesseract and OpenCV", "description": "Rawin Sonde Observation Program (RAOB) is a staple software to process upper-air data for meteorologists. Meteorologists use this to plot the local atmospheric profile and to obtain stability indexes\u2026"}, "outgoing_paragraph_urls": [{"url": "https://github.com/tesseract-ocr/tesseract", "anchor_text": "here", "paragraph_index": 1}, {"url": "https://github.com/genomexyz/raob_tesseract", "anchor_text": "Here", "paragraph_index": 22}], "all_paragraphs": ["Rawin Sonde Observation Program (RAOB) is a staple software to process upper-air data for meteorologists. Meteorologists use this to plot the local atmospheric profile and to obtain stability indexes of the local atmosphere to help them to forecast the weather. Most of the time, we need to process these index data in large quantities e.g. averaging it in 30 years to get the normal, plotting it in the map (indexes from multiple places). The problem is, the indexes are presented in an image beside the plot of the local atmospheric profile. So, you need to write down every single index in every single RAOB image, before you can process it. This is a very mundane and exhausting task. We need a tool to automatically extract these index from the image.", "Tesseract is an optical character recognition tool. The use is to extract text data in the image to the text file or anything you need. You can foud it here. Let\u2019s install and test it. Let see if its performance with this image below.", "The result is perfect! Let see if it can handle the real RAOB image. we will use this sample image.", "Well, since it\u2019s source image is not structured text image so it\u2019s obvious the result of the extracted string here is messy. We can\u2019t use it for our plan. Besides, there is some misidentified character by tesseract here and almost all string of indexes we want to extract is not extracted.", "Every object detection/recognition algorithm always defines it\u2019s Region of Interest (RoI). If it\u2019s ROI is messy then the possibility of it being misidentified is bigger. Let\u2019s see it\u2019s RoI by using tesseract wrapper library, here we will use pytesseract. Here the code", "Look, it\u2019s RoI is very messy. There are some images that are not a character but become RoI-ed. What we want to extract is just this section here (The section in the red box below).", "My guess is tesseract performance becomes poor is because there many \u201cdistraction\u201d in the original RAOB image. Let\u2019s see what if we crop the image and leaving only the indexes section below.", "Let\u2019s see the RoI of tesseract with this image.", "And the identified strings we got from this image are", "Still poor. Let\u2019s crop the image and leaving only a string that contains 1 index.", "Run tesseract and the result is", "It\u2019s perfectly extracted the index at last when there is no more \u201cdistraction\u201d. So now we need to automatically crop the original image leaving only the string of index for each existing index. We do a hard code to crop the image automatically but when there is a slight change in the image, we must recalibrate the code. Let\u2019s do a more elegant solution. we will use a similarity measure algorithm. We must provide a sample of the image of a string index and match it with the entire original image to find the position of the index string.", "Actually we already use OpenCV from the beginning to read an image file. Now, we will use an OpenCV function that is matchTemplate() to matching our cropped string index to find the location of the index value. After we find the location, extend it\u2019s crop area to include the index value and then crop it and feed it to the tesseract so it can extract the index value. For example, we want to extract the tropopause level data using this image template.", "And feed it to the tesseract and we got the data, yeah. well, no! I don\u2019t know the reason why but tesseract can\u2019t identify any character after we crop the image. Maybe because the area of the cropped image section is too narrow. Then why the previous cropped is successfully identified by tesseract? I don\u2019t know, that picture is manually cropped by me using pinta.", "From this guess, we add a big white canvas as the background of our cropped image.", "Let\u2019s extract this image using tesseract and the result is", "The string is identified perfectly. This the algorithm we will use to extract index data in the RAOB image automatically. For this task, we will use pytesseract to extract the RAOB image.", "Here the full code to extract the indexes in a RAOB image", "in extract_str() I added some code to clean some misidentified characters by tesseract.", "Let\u2019s try this code with our original image.", "There are few misidentified characters and some indexes are not detected. Overall this is better compare to our first try.", "Let\u2019s try with the same picture, but the difference is I screenshot the display of RAOB instead of using the generated image from RAOB.", "same. So our code is persistent enough to extract indexes in RAOB image although there is a slight difference in the image. Here the full repository of our experiment in this post.", "So that is our first try to extract characters from an image. This is far from perfect. Hmm, maybe next time I will use CNN and train it using font used by RAOB. See you in another post.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Meteorologist | Coder | Problem Solver | Writer | Daydreamer"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F92eece2d4439&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fextracting-air-stability-index-data-from-image-generated-by-raob-software-using-tesseract-and-92eece2d4439&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fextracting-air-stability-index-data-from-image-generated-by-raob-software-using-tesseract-and-92eece2d4439&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fextracting-air-stability-index-data-from-image-generated-by-raob-software-using-tesseract-and-92eece2d4439&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fextracting-air-stability-index-data-from-image-generated-by-raob-software-using-tesseract-and-92eece2d4439&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----92eece2d4439--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----92eece2d4439--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://genomexyz.medium.com/?source=post_page-----92eece2d4439--------------------------------", "anchor_text": ""}, {"url": "https://genomexyz.medium.com/?source=post_page-----92eece2d4439--------------------------------", "anchor_text": "Muhammad Ryan"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fdb3376354a70&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fextracting-air-stability-index-data-from-image-generated-by-raob-software-using-tesseract-and-92eece2d4439&user=Muhammad+Ryan&userId=db3376354a70&source=post_page-db3376354a70----92eece2d4439---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F92eece2d4439&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fextracting-air-stability-index-data-from-image-generated-by-raob-software-using-tesseract-and-92eece2d4439&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F92eece2d4439&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fextracting-air-stability-index-data-from-image-generated-by-raob-software-using-tesseract-and-92eece2d4439&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@uniqueton?utm_source=medium&utm_medium=referral", "anchor_text": "Anton"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://github.com/tesseract-ocr/tesseract", "anchor_text": "here"}, {"url": "https://github.com/genomexyz/raob_tesseract", "anchor_text": "Here"}, {"url": "http://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_imgproc/py_template_matching/py_template_matching.html", "anchor_text": "http://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_imgproc/py_template_matching/py_template_matching.html"}, {"url": "https://medium.com/tag/opencv?source=post_page-----92eece2d4439---------------opencv-----------------", "anchor_text": "Opencv"}, {"url": "https://medium.com/tag/tesseract?source=post_page-----92eece2d4439---------------tesseract-----------------", "anchor_text": "Tesseract"}, {"url": "https://medium.com/tag/image-processing?source=post_page-----92eece2d4439---------------image_processing-----------------", "anchor_text": "Image Processing"}, {"url": "https://medium.com/tag/data-science?source=post_page-----92eece2d4439---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/meteorology?source=post_page-----92eece2d4439---------------meteorology-----------------", "anchor_text": "Meteorology"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F92eece2d4439&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fextracting-air-stability-index-data-from-image-generated-by-raob-software-using-tesseract-and-92eece2d4439&user=Muhammad+Ryan&userId=db3376354a70&source=-----92eece2d4439---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F92eece2d4439&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fextracting-air-stability-index-data-from-image-generated-by-raob-software-using-tesseract-and-92eece2d4439&user=Muhammad+Ryan&userId=db3376354a70&source=-----92eece2d4439---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F92eece2d4439&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fextracting-air-stability-index-data-from-image-generated-by-raob-software-using-tesseract-and-92eece2d4439&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----92eece2d4439--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F92eece2d4439&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fextracting-air-stability-index-data-from-image-generated-by-raob-software-using-tesseract-and-92eece2d4439&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----92eece2d4439---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----92eece2d4439--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----92eece2d4439--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----92eece2d4439--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----92eece2d4439--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----92eece2d4439--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----92eece2d4439--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----92eece2d4439--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----92eece2d4439--------------------------------", "anchor_text": ""}, {"url": "https://genomexyz.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://genomexyz.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Muhammad Ryan"}, {"url": "https://genomexyz.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "260 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fdb3376354a70&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fextracting-air-stability-index-data-from-image-generated-by-raob-software-using-tesseract-and-92eece2d4439&user=Muhammad+Ryan&userId=db3376354a70&source=post_page-db3376354a70--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F3d91d812e2a9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fextracting-air-stability-index-data-from-image-generated-by-raob-software-using-tesseract-and-92eece2d4439&newsletterV3=db3376354a70&newsletterV3Id=3d91d812e2a9&user=Muhammad+Ryan&userId=db3376354a70&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}