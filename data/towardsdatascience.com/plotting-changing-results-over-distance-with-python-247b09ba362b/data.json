{"url": "https://towardsdatascience.com/plotting-changing-results-over-distance-with-python-247b09ba362b", "time": 1683017593.204243, "path": "towardsdatascience.com/plotting-changing-results-over-distance-with-python-247b09ba362b/", "webpage": {"metadata": {"title": "Plotting changing results over distance with python | by Philip Wilkinson | Towards Data Science", "h1": "Plotting changing results over distance with python", "description": "To give a bit of context, I am currently working on a paper that is looking at what distance do patent citations start to decline. This is so that we can try to measure how far knowledge may actually\u2026"}, "outgoing_paragraph_urls": [{"url": "http://darribas.org/gds15/content/labs/lab_03.html", "anchor_text": "link", "paragraph_index": 5}, {"url": "https://contextily.readthedocs.io/en/latest/providers_deepdive.html", "anchor_text": "contextily basemap", "paragraph_index": 6}, {"url": "https://github.com/geopandas/geopandas/issues/1114", "anchor_text": "zoomed inset axis", "paragraph_index": 6}, {"url": "https://matplotlib.org/3.1.1/api/_as_gen/mpl_toolkits.axes_grid1.inset_locator.zoomed_inset_axes.html", "anchor_text": "axes mark insert", "paragraph_index": 6}, {"url": "https://gis.stackexchange.com/questions/378416/how-to-change-the-font-size-of-the-color-bar-of-a-geopandas-choropleth-plot", "anchor_text": "legend text size", "paragraph_index": 6}, {"url": "http://www.linkedin.com/in/philip-wilkinson1", "anchor_text": "www.linkedin.com/in/philip-wilkinson1", "paragraph_index": 10}], "all_paragraphs": ["To give a bit of context, I am currently working on a paper that is looking at what distance do patent citations start to decline. This is so that we can try to measure how far knowledge may actually travel and whether there are any restrictions to this, such as language, technology or institutional barriers. This was part of my Master\u2019s dissertation and I am currently working with my supervisor to get it into a format that may potentially be published (or at least that is the hope). One of the things to try to improve its overall look and potential readability then was to attempt to create some maps to convey some of the information, rather than death by tables as it currently is. One of the tables that we thought may look good converted into a map was that showing the difference between actual citations and a generated control group that essentially mimics the characteristics of patents that actually cited patents originating in the UK. This would be showing the difference in the number of patents that originate within different distance boundaries such as 25 miles, 50 miles, 100 miles etc. The difficulty was, I had no idea to go about this. After several hours putting together several difference pieces of code, or ideas of code, I finally managed to produce the plot shown below.", "While not exactly perfect, for example the second ring just outside the first dark blue one is not distinct, I thought that it may be worth sharing just how it was created, with the hope of altering and improving it in the future, and that anyone trying to show how a variable changes within different distance boundaries may be able to re-use the code as in the future (even myself).", "Firstly, what data did I want to plot? I wanted to be able to show the difference in the percentage of citing/control patents that originated within given boundaries. This was within boundaries of 25, 50, 100, 250, 500, 1000, 2500, 5000 miles and beyond (limited to 15,000 in the end). The percentage of citing/control patents within these boundaries was also known and I wanted to compare the two. For this then, the subsequent code was used:", "So I had the distance boundaries in miles, the percentage of actual citations occurring within those boundaries, and the percentage of potential citations as well. From this I created a list representing the difference between the actual citation percentage and control percentages so that I could visualise the difference between each of the distance boundaries.", "The next step was to then to put this into a DataFrame and add some geography. Given that I am considering how patents from the UK are cited, I set the origin point as Greenwich Mean Time. In doing so, I had to be aware of what projection I wanted my data in. Originally, this meant using the latitude and longitude for the coordinates, being 51.4, 0 for Greenwich Mean Time under the WGS84 projection, which is a common projection for most maps. Subsequently I could then create a Pandas Dataframe which could easily be turned into a GeoDataFrame using geopandas as that I will be working with geographical data.", "Now that we have the data in a GeoDataFrame the next thing to do is then create the distance rings. This is where I had a lot of difficulty, but after scouring the internet and looking up many incorrect things, I finally found this link which suggested the use of Shapely\u2019s buffer function to create the buffers. My original issue for this was that my data was in a different projection to that of the contextilybasemap and so performing the buffer analysis while in the WGS84 projection and then reprojecting into epsg:3857 in order to map the distance boundaries would result in very strange circles indeed. So, I figured out I had to actually have the data in the right projection, before creating the buffers.", "Now that the data is in the correct format, the next thing to do was to then start mapping. This is another play where I struggled before finding several useful links such as the contextily basemap, zoomed inset axis, axes mark insert and changing the legend text size which all combined to create the map that you see above as follows:", "So while all of this took several hours to reach the final result, the code itself is relatively quite small!", "This shows what python can do in terms of map making when putting several pieces of code together, and hopefully this will help anyone else who is wanting to create a similar map to what I have done! This of course is just a small slice of pythons capabilities and I would encourage you to explore further!", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "CASA PhD student, Spatial Analysis, Data Science and Software Engineering. 400,000+ views. Connect on: www.linkedin.com/in/philip-wilkinson1"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F247b09ba362b&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fplotting-changing-results-over-distance-with-python-247b09ba362b&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fplotting-changing-results-over-distance-with-python-247b09ba362b&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fplotting-changing-results-over-distance-with-python-247b09ba362b&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fplotting-changing-results-over-distance-with-python-247b09ba362b&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----247b09ba362b--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----247b09ba362b--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://philip-wilkinson.medium.com/?source=post_page-----247b09ba362b--------------------------------", "anchor_text": ""}, {"url": "https://philip-wilkinson.medium.com/?source=post_page-----247b09ba362b--------------------------------", "anchor_text": "Philip Wilkinson"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fec0e018f30da&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fplotting-changing-results-over-distance-with-python-247b09ba362b&user=Philip+Wilkinson&userId=ec0e018f30da&source=post_page-ec0e018f30da----247b09ba362b---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F247b09ba362b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fplotting-changing-results-over-distance-with-python-247b09ba362b&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F247b09ba362b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fplotting-changing-results-over-distance-with-python-247b09ba362b&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@timowielink?utm_source=medium&utm_medium=referral", "anchor_text": "Timo Wielink"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "http://darribas.org/gds15/content/labs/lab_03.html", "anchor_text": "link"}, {"url": "https://contextily.readthedocs.io/en/latest/providers_deepdive.html", "anchor_text": "contextily basemap"}, {"url": "https://github.com/geopandas/geopandas/issues/1114", "anchor_text": "zoomed inset axis"}, {"url": "https://matplotlib.org/3.1.1/api/_as_gen/mpl_toolkits.axes_grid1.inset_locator.zoomed_inset_axes.html", "anchor_text": "axes mark insert"}, {"url": "https://gis.stackexchange.com/questions/378416/how-to-change-the-font-size-of-the-color-bar-of-a-geopandas-choropleth-plot", "anchor_text": "legend text size"}, {"url": "https://medium.com/tag/python-programming?source=post_page-----247b09ba362b---------------python_programming-----------------", "anchor_text": "Python Programming"}, {"url": "https://medium.com/tag/python?source=post_page-----247b09ba362b---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/geopandas?source=post_page-----247b09ba362b---------------geopandas-----------------", "anchor_text": "Geopandas"}, {"url": "https://medium.com/tag/mapping?source=post_page-----247b09ba362b---------------mapping-----------------", "anchor_text": "Mapping"}, {"url": "https://medium.com/tag/pandas?source=post_page-----247b09ba362b---------------pandas-----------------", "anchor_text": "Pandas"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F247b09ba362b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fplotting-changing-results-over-distance-with-python-247b09ba362b&user=Philip+Wilkinson&userId=ec0e018f30da&source=-----247b09ba362b---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F247b09ba362b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fplotting-changing-results-over-distance-with-python-247b09ba362b&user=Philip+Wilkinson&userId=ec0e018f30da&source=-----247b09ba362b---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F247b09ba362b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fplotting-changing-results-over-distance-with-python-247b09ba362b&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----247b09ba362b--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F247b09ba362b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fplotting-changing-results-over-distance-with-python-247b09ba362b&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----247b09ba362b---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----247b09ba362b--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----247b09ba362b--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----247b09ba362b--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----247b09ba362b--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----247b09ba362b--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----247b09ba362b--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----247b09ba362b--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----247b09ba362b--------------------------------", "anchor_text": ""}, {"url": "https://philip-wilkinson.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://philip-wilkinson.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Philip Wilkinson"}, {"url": "https://philip-wilkinson.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "2.7K Followers"}, {"url": "http://www.linkedin.com/in/philip-wilkinson1", "anchor_text": "www.linkedin.com/in/philip-wilkinson1"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fec0e018f30da&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fplotting-changing-results-over-distance-with-python-247b09ba362b&user=Philip+Wilkinson&userId=ec0e018f30da&source=post_page-ec0e018f30da--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fb48e8a3cfc32&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fplotting-changing-results-over-distance-with-python-247b09ba362b&newsletterV3=ec0e018f30da&newsletterV3Id=b48e8a3cfc32&user=Philip+Wilkinson&userId=ec0e018f30da&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}