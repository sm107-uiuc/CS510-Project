{"url": "https://towardsdatascience.com/using-stringr-and-regex-to-extract-features-from-textual-alphanumeric-and-punctuation-data-in-r-2565256c0a77", "time": 1683003436.8241322, "path": "towardsdatascience.com/using-stringr-and-regex-to-extract-features-from-textual-alphanumeric-and-punctuation-data-in-r-2565256c0a77/", "webpage": {"metadata": {"title": "Using Stringr and Regex to Extract Features in R | Towards Data Science", "h1": "Using Stringr and Regex to Extract Features from Textual and Alphanumeric Data in R", "description": "A feature extraction tutorial for textual and alphanumerical data using Stringr and Regex in R on the Titanic Dataset. Turn messy data into analyzable info."}, "outgoing_paragraph_urls": [{"url": "http://edrub.in/CheatSheets/cheatSheetStringr.pdf", "anchor_text": "Stringr Cheat Sheet", "paragraph_index": 11}, {"url": "https://www.regextester.com/", "anchor_text": "This website", "paragraph_index": 11}, {"url": "https://medium.com/@mattifuchs", "anchor_text": "Follow me", "paragraph_index": 31}], "all_paragraphs": ["Large data sets are often awash with data that is difficult to decipher. One may think of textual data, names, unique identifiers, and other sorts of codes. Frequently, people analyzing these datasets are quick to discard these variables. However, sometimes there might be valuable information in this type of data, which might help you with your analysis.", "Gladly, R offers the amazing package \u201cstringr,\u201d which is perfect for these purposes. This quick tutorial will show you how you can extract minute but still insightful data from these kinds of variables. In this case, we will be extracting this kind of data from the Titanic dataset.", "If you\u2019d like to follow the tutorial, load the Titanic data set using the below commands. The Titanic data set features all kinds of information on the Titanic passengers to practice predicting their survival. This tutorial aims to look at some of the variables (i.e., name and ticket) that most people discard immediately when beginning their analysis. We, however, want to work with them to see if we can extract some useful information. If you want to figure out how to use Stringr and regex, skip this part.", "Before we begin, we need to install and load the Stringr package.", "Now, we\u2019re all set, and we can begin.", "As a first exercise, I\u2019d like to extract the titles from the names. This is because I believe, e.g., the nobility is more likely to survive than mere mortals. Also, I hypothesize that young unmarried women (\u201cMiss\u201d) are more likely to survive. Possibly, there might be a lot of information in the title.", "The names in the titanic dataset (df$Name) are all saved like this example:", "Futrelle, Mrs. Jacques Heath (Lily May Peel)", "To avoid any mistakes, we are first going to run a command that converts all these strings to lowercase and saves them as new variables:", "The title \u2014 Mrs in the example above\u2014 is preceded by a whitespace and is preceded by a dot. We can use regex (Regular Expression) as a language to communicate this pattern to Stringr and ask it to look for the title in the following way:", "This pattern consists of three parts:", "You can see that regex uses all kinds of symbols to communicate patterns. The Stringr Cheat Sheet is a helpful guide for when you want to develop your own patterns. This website provides an easy way of testing regex patterns.", "We extract the title and save it as a new variable by asking Stringr to look for this pattern in the lowercase \u201cName\u201d strings.", "Now let\u2019s plot our new variable \u201ctitle\u201d using Ggplot2 and the commands below.", "You can see, Stringr nicely extracted all the titles from the names, and we now have a new categorical variable we can use as input for our analysis.", "As a second exercise, I\u2019d like to extract the family names from the names string. I believe that family membership could be a predictor of survival, i.e., if one family member survives, maybe the others are also more likely to survive, controlling for other factors such as gender, etc.", "In the example \u201cname\u201d string above, you can see that the person\u2019s family name, e.g., Futrelle, is the first word. So we can tell Stringr to take the first word (str_extract) that matches the pattern ([[:alpha:]]+) and to take the first word and that this is the family.", "However, there are family names in the dataset, such as \u201cVander Planke\u201d or \u201cO\u2019Dwyer.\u201d If we were to take the first word in this case, we would only get \u201cvander\u201d or \u201co,\u201d not the whole family name. Therefore, we need to adapt the pattern to include any kinds of characters (.) that are 1 character or more in length (+) and are followed by a comma(?=\\\\,).", "This time, because we have many family names, let\u2019s plot the 10 most frequent family names.", "Again, we now have the novel variable \u201cfamily name,\u201d which we can use for further analysis.", "In most analyses of the Titanic data set, people were quick to discard the ticket information. However, some letters in the ticket codes could potentially mean something. They could, e.g., signal that the tickets were last minute purchases and the passengers were not very prepared for the voyage.", "However, these acronyms and codes are written inconsistently (e.g., \u201cSOC\u201d and \u201cS.o.C.\u201d), which is why this data needs some preparation. Let\u2019s clean it.", "Now that we have cleaned the data a bit let\u2019s extract these acronyms. Usually, the ticket code now looks something like this:", "In my mind, \u201csotono 2\u201d is an acronym that could mean something, and \u201c3101287\u201d is some ticket number (which I\u2019ll talk about more later). If we think about the pattern of the acronym, it\u2019s characters (.) followed by a whitespace (\\\\s), which itself is followed by a number ([[:digit]]) that is three digits in length or longer ({3,}). Sometimes, the entire ticket code is some acronym (e.g., one passenger features \u201cline\u201d as a ticket), which means that we can give Stringer the alternative option (\u201c|\u201d is the \u201cor\u201d operator) that the entire code is an acronym of interest ([[:alpha:]]+). We tell Stringr to look for this pattern and save it in a new variable, \u201cticketinfo,\u201d using the following command. We then remove whitespaces and replace NA values.", "Let\u2019s again plot the 10 most frequent ticketinfo values.", "You can see that this adds quite some information for a lot of passengers. Almost 60 passengers have the value \u201cPC.\u201d After inspecting the data, I believe it could mean \u201cprivate cabin\u201d as many (but not all) 1st class passengers have this value printed on their ticket.", "The interesting thing about the Titanic\u2019s fateful maiden voyage was that the ship was only around half full. The ship could have easily transported many more passengers across the Atlantic. This made me think that some passengers might have gotten \u201cfree upgrades\u201d to higher classes. A superficial inspection of the ticket number shows that the first digit seems to be correlated to the passenger class (Pclass), but there are exceptions. I hypothesize that the first digit could carry some information about class changes, which would have far-reaching implications for the passenger\u2019s survival probability. Let\u2019s extract the first digit of the number after the acronym and save it as a presumed passenger class (PresumedPclass).", "Let\u2019s first extract the ticket number. Again, the ticket number consists of digits ([[:digit:]]) and is 3 or more characters in length ({3,}). Let\u2019s also store it as a character (as.character), not as a number, to still use Stringr on it.", "Then let\u2019s take the first digit ([[:digit:]]) of this ticket number and store it as the presumed passenger class.", "Now, let\u2019s again plot this new variable, but let\u2019s plot it in the context of the provided passenger class to see how it correlates.", "As we can see in the graph below, these two values mostly correlate. But sometimes they do not. This might be exciting information in those cases in which these two classes did not match.", "You would like to find out more? Follow me on Medium to see my other stories!", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F2565256c0a77&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-stringr-and-regex-to-extract-features-from-textual-alphanumeric-and-punctuation-data-in-r-2565256c0a77&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-stringr-and-regex-to-extract-features-from-textual-alphanumeric-and-punctuation-data-in-r-2565256c0a77&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-stringr-and-regex-to-extract-features-from-textual-alphanumeric-and-punctuation-data-in-r-2565256c0a77&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-stringr-and-regex-to-extract-features-from-textual-alphanumeric-and-punctuation-data-in-r-2565256c0a77&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----2565256c0a77--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----2565256c0a77--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@friedpacker?source=post_page-----2565256c0a77--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@friedpacker?source=post_page-----2565256c0a77--------------------------------", "anchor_text": "Matthieu Renard"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F4de55f79f1ad&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-stringr-and-regex-to-extract-features-from-textual-alphanumeric-and-punctuation-data-in-r-2565256c0a77&user=Matthieu+Renard&userId=4de55f79f1ad&source=post_page-4de55f79f1ad----2565256c0a77---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F2565256c0a77&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-stringr-and-regex-to-extract-features-from-textual-alphanumeric-and-punctuation-data-in-r-2565256c0a77&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F2565256c0a77&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-stringr-and-regex-to-extract-features-from-textual-alphanumeric-and-punctuation-data-in-r-2565256c0a77&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@noaa?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "NOAA"}, {"url": "https://unsplash.com/s/photos/titanic?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Unsplash"}, {"url": "http://edrub.in/CheatSheets/cheatSheetStringr.pdf", "anchor_text": "Stringr Cheat Sheet"}, {"url": "https://www.regextester.com/", "anchor_text": "This website"}, {"url": "https://medium.com/@mattifuchs", "anchor_text": "Follow me"}, {"url": "https://medium.com/tag/feature-extraction?source=post_page-----2565256c0a77---------------feature_extraction-----------------", "anchor_text": "Feature Extraction"}, {"url": "https://medium.com/tag/text-mining?source=post_page-----2565256c0a77---------------text_mining-----------------", "anchor_text": "Text Mining"}, {"url": "https://medium.com/tag/data-science?source=post_page-----2565256c0a77---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/programming?source=post_page-----2565256c0a77---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/tag/r?source=post_page-----2565256c0a77---------------r-----------------", "anchor_text": "R"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F2565256c0a77&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-stringr-and-regex-to-extract-features-from-textual-alphanumeric-and-punctuation-data-in-r-2565256c0a77&user=Matthieu+Renard&userId=4de55f79f1ad&source=-----2565256c0a77---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F2565256c0a77&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-stringr-and-regex-to-extract-features-from-textual-alphanumeric-and-punctuation-data-in-r-2565256c0a77&user=Matthieu+Renard&userId=4de55f79f1ad&source=-----2565256c0a77---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F2565256c0a77&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-stringr-and-regex-to-extract-features-from-textual-alphanumeric-and-punctuation-data-in-r-2565256c0a77&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----2565256c0a77--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F2565256c0a77&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-stringr-and-regex-to-extract-features-from-textual-alphanumeric-and-punctuation-data-in-r-2565256c0a77&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----2565256c0a77---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----2565256c0a77--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----2565256c0a77--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----2565256c0a77--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----2565256c0a77--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----2565256c0a77--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----2565256c0a77--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----2565256c0a77--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----2565256c0a77--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@friedpacker?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@friedpacker?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Matthieu Renard"}, {"url": "https://medium.com/@friedpacker/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "135 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F4de55f79f1ad&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-stringr-and-regex-to-extract-features-from-textual-alphanumeric-and-punctuation-data-in-r-2565256c0a77&user=Matthieu+Renard&userId=4de55f79f1ad&source=post_page-4de55f79f1ad--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fe2f4cdc333d9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-stringr-and-regex-to-extract-features-from-textual-alphanumeric-and-punctuation-data-in-r-2565256c0a77&newsletterV3=4de55f79f1ad&newsletterV3Id=e2f4cdc333d9&user=Matthieu+Renard&userId=4de55f79f1ad&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}