{"url": "https://towardsdatascience.com/visualizing-covid-19-over-time-using-react-92ccf9a3354e", "time": 1683010119.764595, "path": "towardsdatascience.com/visualizing-covid-19-over-time-using-react-92ccf9a3354e/", "webpage": {"metadata": {"title": "Visualizing Covid-19 Over Time Using React | by Neeraj Shah | Towards Data Science", "h1": "Visualizing Covid-19 Over Time Using React", "description": "When I first saw Johns Hopkins hacking together a Covid-19 visualization tool in February, I wanted to see what I could do, too. I realized that I wouldn\u2019t be able produce a live map that was\u2026"}, "outgoing_paragraph_urls": [{"url": "https://github.com/CSSEGISandData/COVID-19/tree/master/csse_covid_19_data/csse_covid_19_time_series", "anchor_text": "time-series data to Github", "paragraph_index": 8}, {"url": "https://github.com/axios/axios", "anchor_text": "Axios", "paragraph_index": 10}, {"url": "https://www.papaparse.com/", "anchor_text": "Papa Parse", "paragraph_index": 11}, {"url": "https://leafletjs.com/", "anchor_text": "Leaflet", "paragraph_index": 13}, {"url": "https://react-leaflet.js.org/", "anchor_text": "react-leaflet", "paragraph_index": 13}, {"url": "https://github.com/neerajcshah/corona", "anchor_text": "here", "paragraph_index": 38}], "all_paragraphs": ["When I first saw Johns Hopkins hacking together a Covid-19 visualization tool in February, I wanted to see what I could do, too. I realized that I wouldn\u2019t be able produce a live map that was significantly better than the existing ones available online, but I set out to answer a different question: Can we see how Corona spreads geographically and temporally?", "I\u2019ve since made a React visualization that monitors the spread of Corona, and I thought I would share it in case it can benefit anyone else. It pulls data from Johns Hopkins CSSE and allows users to view the status of the virus on any date from January 22nd onward (this was the first date that JHU had data for). You can drag the slider under the map to see how cases transformed the world over time.", "The visualization is basic, but it helps me to better understand a few things that have been expressed by researchers.", "First, it shows me that the United States is now the epicenter of the crisis, but that previously, China and Italy held this title.", "It also helps me understand that gaps in testing or reporting must exist in countries like China, where data has not changed for multiple months.", "Finally, if we check all the boxes in New Zealand on June 8th, 2020, we can see that the \u201cInfected\u201d circle almost perfectly overlaps with the \u201cRecovered\u201d circle. This is also the day that New Zealand announced that it had eliminated the virus from within its borders.", "Developing something this interactive in python can prove challenging and less polished. Instead, React was the natural choice because it\u2019s designed to present changing data via simple, responsive UI components. For the rest of this article, I\u2019ll go over the key parts of developing this project using React.", "A finicky part of any visualization can be handling the input data, and this was especially true in this case because the data was owned and updated by another party (Johns Hopkins). This meant that when they changed their organizational style, I had to adjust too. I chose to rely on their database because it meant that I wouldn\u2019t have to worry about storing and maintaining real-time data myself.", "They currently upload time-series data to Github once a day at around 23:59 UTC by overwriting an existing .csv file. I wanted my app to pull the data upon launch so that we would always display the current state of the world.", "Whenever you pull something from a hosted file, it is good practice to get the raw content. We can do this on Github by clicking the \u201cRaw\u201d button on the top right-hand corner of any file.", "I used a promise-based HTTP client called \u201cAxios\u201d to perform \u201cget\u201d requests with the URL of this raw content. The result of this asynchronous operation can be acted upon with the \u201cthen\u201d keyword, which takes a successfully completed promise and executes a function upon it.", "As shown above, the \u201cthen\u201d function takes the result of \u201caxios.get\u201d and parses the content with \u201cPapa Parse\u201d, an in-browser csv parser.", "Johns Hopkins stores the data in a csv where rows map to countries and columns map to dates. Because the first row contains column names, we specify \u201cheader : true\u201d when calling \u201cPapa.parse\u201d. Papa.parse produces a list of dictionaries that correspond to countries. Each dictionary allows us to index the infected population size by date, which is important for slider integration later on. The result of this entire action is a promise, and once it completes, we\u2019ll have our data in the form we want it in!", "To produce a map, we will use Leaflet, a JavaScript interactive mapping library that I picked because it has great documentation and does not require any API keys or tokens. There also happens to be a React library called react-leaflet that is an abstraction of the Leaflet library with React components.", "We\u2019ll start off by importing the \u201cMap\u201d and \u201cTileLayer\u201d components to display a simple map.", "As a quick refresher to React, components take in parameters, which are called \u201cprops\u201d. Whenever a component\u2019s props change, the component updates its display. Nesting components within each other allows data to flow through pieces of our application.", "We\u2019ll now create a new Leaflet class that extends \u201cReact.Component\u201d. Notice that the constructor only takes one argument \u2014 \u201cprops\u201d \u2014 which contains all the parameters that were passed in. For reference, to access a specific parameter passed into a component, we would write \u201cthis.props.parameterName\u201d.", "The Leaflet map can be displayed on a screen with very little code. We just have to instantiate the Map component with a latitude/longitude and a zoom-level. We should also add the TileLayer to give credit to the Open Street Map Team.", "We will fill the render method with what we\u2019d like our class to return. The render method is called whenever parameters passed into a class change.", "We will use the Circle component in react-leaflet to depict populations on our map. Circles are a somewhat crude way to visualize geographic data because they might not reflect geographic truths well. For example, we know that the United States has most of its cases near its coasts, but if we could only draw one circle to represent American Covid-19 cases, we would place it in the center of the country. The solution would be to have more granular data and build detailed heat-maps with it, but we are unfortunately limited by our data\u2019s sparsity.", "The size of the circles on our map represents the number of people who were part of the infected, recovered, or dead populations. We can control the size of a Circle component by specifying a radius. Since increasing radius causes the area of a circle to increase quadratically, we need to be careful not map populations directly to radius. Instead, we calculate the radius by taking the square root of each population and multiplying it by some constant.", "We\u2019ll add a component called \u201cMyCircles\u201d in the Leaflet component that will handle the creation of the circles. It will take in the data (constructed in section 1), the date selected, and the desired circle colors \u2014 all props that were passed to Leaflet.", "A simplified MyCircles class is implemented below.", "Recall that props.data is composed of a list where each item is a dictionary that represents the number of cases in a country by date. MyCircles traverses every country in props.data and reads the number of cases in that country at props.date. If there is a non-zero number of cases, it returns a Circle component with a calculated radius at a given Latitude/Longitude.", "One of the core concepts in React is to split the UI into pieces. Just as we built a component called \u201cLeaflet\u201d for the map, we will build a component for the slider. We implement it by using the built-in \u201cSlider\u201d component from \u201cmaterial-ui\u201d. I\u2019ve included a simplified call to the slider component below:", "As you can see, it has different parameters like \u201cdefaultValue\u201d, \u201cmarks\u201d, and \u201cmax\u201d. We assign day 0 (January 22nd, 2020) as our default value. \u201cMarks\u201d refers to the labelled \u201cticks\u201d on the slider \u2014 in this case, we only label the beginning and the end. The \u201cdifference_in_days\u201d variable that \u201cmax\u201d is set to refers to the number of days between day 0 and today (this is dynamically calculated and keeps the visualization up to date). Finally, \u201conChange\u201d is assigned to a function called \u201cthis.handleChange\u201d, which is displayed below. It is called by React whenever the Slider moves.", "This function updates the date based on the value passed in from the slider and calls \u201cthis.props.handleDateChange\u201d, which we\u2019ll discuss in the next section.", "So far, we\u2019ve looked at Props. Props are immutable and are used to pass data down from higher-level components. To take advantage of React\u2019s responsive capabilities, we\u2019ll also look at State. State is mutable and should not be accessed directly by child components.", "State helps us tie interactions between components together. As mentioned, we\u2019ll look at how the slider\u2019s onChange method modifies the map.", "Below, I\u2019ve include a simplified version of the top-level \u201cApp\u201d component in our React project. As shown, it has one entry in \u201cstate\u201d called \u201cdate\u201d.", "You\u2019ll also notice that the constructor mentions the \u201chandleDateChange\u201d method which we passed into our slider component in the last section. The \u201cbind\u201d function sets the method\u2019s \u201cthis\u201d keyword to always refer to \u201cApp\u201d, even if we pass the method to a different class.", "The \u201chandleDateChange\u201d method\u2019s very short implementation is shown below.", "It calls a React lifecycle method called \u201csetState()\u201d to set a new date. The \u201csetState\u201d function updates a component\u2019s state and tells that component and all its children components to render themselves again.", "We pass this method to the slider so that its \u201conChange\u201d method can effect change in the parent component\u2019s state.", "Now, whenever we drag the slider around, the parent \u201cApp\u201d component will have its state\u2019s date updated.", "Since we pass \u201cthis.state.date\u201d as a prop to the Leaflet class, the map will update dynamically whenever the date changes, fulfilling our desire to display the spread of Corona geographically and temporally.", "This structure helps the app have fluidity and is also used to help the check-boxes modify the map. It lets you write a small amount of code to facilitate compelling UI interactions.", "By visualizing the cases over time, I\u2019ve been able to observe trends that I would have found harder to understand otherwise. The tool helped me confirm reports I was reading, but it also occasionally led me to new surprises because of how much global data it could show at once. The framework I\u2019ve gone over can be used for any project where you want to neatly view something while varying time. I\u2019d recommend applying it to another dataset you\u2019re interested in and sharing the results!", "For further reference, the code can be found here.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Software engineer + economist. // Tools to look at the world."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F92ccf9a3354e&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvisualizing-covid-19-over-time-using-react-92ccf9a3354e&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvisualizing-covid-19-over-time-using-react-92ccf9a3354e&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvisualizing-covid-19-over-time-using-react-92ccf9a3354e&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvisualizing-covid-19-over-time-using-react-92ccf9a3354e&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----92ccf9a3354e--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----92ccf9a3354e--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://neeraj-shah.medium.com/?source=post_page-----92ccf9a3354e--------------------------------", "anchor_text": ""}, {"url": "https://neeraj-shah.medium.com/?source=post_page-----92ccf9a3354e--------------------------------", "anchor_text": "Neeraj Shah"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F2cc80cd408db&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvisualizing-covid-19-over-time-using-react-92ccf9a3354e&user=Neeraj+Shah&userId=2cc80cd408db&source=post_page-2cc80cd408db----92ccf9a3354e---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F92ccf9a3354e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvisualizing-covid-19-over-time-using-react-92ccf9a3354e&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F92ccf9a3354e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvisualizing-covid-19-over-time-using-react-92ccf9a3354e&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://neerajcshah.github.io/corona/", "anchor_text": "Covid-19Visualizing Corona Overtimeneerajcshah.github.io"}, {"url": "https://github.com/CSSEGISandData/COVID-19/tree/master/csse_covid_19_data/csse_covid_19_time_series", "anchor_text": "time-series data to Github"}, {"url": "https://github.com/axios/axios", "anchor_text": "Axios"}, {"url": "https://www.papaparse.com/", "anchor_text": "Papa Parse"}, {"url": "https://leafletjs.com/", "anchor_text": "Leaflet"}, {"url": "https://react-leaflet.js.org/", "anchor_text": "react-leaflet"}, {"url": "https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", "anchor_text": "https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}, {"url": "https://github.com/neerajcshah/corona", "anchor_text": "here"}, {"url": "https://reactjs.org/docs/react-api.html", "anchor_text": "React Top-Level API"}, {"url": "https://medium.com/tag/visualization?source=post_page-----92ccf9a3354e---------------visualization-----------------", "anchor_text": "Visualization"}, {"url": "https://medium.com/tag/react?source=post_page-----92ccf9a3354e---------------react-----------------", "anchor_text": "React"}, {"url": "https://medium.com/tag/covid-19?source=post_page-----92ccf9a3354e---------------covid_19-----------------", "anchor_text": "Covid-19"}, {"url": "https://medium.com/tag/temporal?source=post_page-----92ccf9a3354e---------------temporal-----------------", "anchor_text": "Temporal"}, {"url": "https://medium.com/tag/maps?source=post_page-----92ccf9a3354e---------------maps-----------------", "anchor_text": "Maps"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F92ccf9a3354e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvisualizing-covid-19-over-time-using-react-92ccf9a3354e&user=Neeraj+Shah&userId=2cc80cd408db&source=-----92ccf9a3354e---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F92ccf9a3354e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvisualizing-covid-19-over-time-using-react-92ccf9a3354e&user=Neeraj+Shah&userId=2cc80cd408db&source=-----92ccf9a3354e---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F92ccf9a3354e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvisualizing-covid-19-over-time-using-react-92ccf9a3354e&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----92ccf9a3354e--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F92ccf9a3354e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvisualizing-covid-19-over-time-using-react-92ccf9a3354e&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----92ccf9a3354e---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----92ccf9a3354e--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----92ccf9a3354e--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----92ccf9a3354e--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----92ccf9a3354e--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----92ccf9a3354e--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----92ccf9a3354e--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----92ccf9a3354e--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----92ccf9a3354e--------------------------------", "anchor_text": ""}, {"url": "https://neeraj-shah.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://neeraj-shah.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Neeraj Shah"}, {"url": "https://neeraj-shah.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "3 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F2cc80cd408db&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvisualizing-covid-19-over-time-using-react-92ccf9a3354e&user=Neeraj+Shah&userId=2cc80cd408db&source=post_page-2cc80cd408db--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fusers%2F2cc80cd408db%2Flazily-enable-writer-subscription&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvisualizing-covid-19-over-time-using-react-92ccf9a3354e&user=Neeraj+Shah&userId=2cc80cd408db&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}