{"url": "https://towardsdatascience.com/a-practical-dialogue-for-effective-data-preprocessing-147cdc000f6c", "time": 1683001976.903295, "path": "towardsdatascience.com/a-practical-dialogue-for-effective-data-preprocessing-147cdc000f6c/", "webpage": {"metadata": {"title": "Practical Dialogue for Effective Data Preprocessing | by Neil Chandarana | Towards Data Science", "h1": "Practical Dialogue for Effective Data Preprocessing", "description": "3 essential data cleansing functions for effective data preprocessing"}, "outgoing_paragraph_urls": [{"url": "https://github.com/93tilinfinity/garminconnect_analysis/blob/master/gc_download.py", "anchor_text": "this incredibly useful github repository", "paragraph_index": 8}, {"url": "https://www.unixtimestamp.com/", "anchor_text": "Unix timestamps", "paragraph_index": 25}], "all_paragraphs": ["Archimedes: Take a seat great Leonidas, what can I do for you?", "Leonidas: I need a machine learning model to hand me the secret to unlocking superpowers on my road bike.", "A: Steady on young buck, I am no magician.", "L: *points at watch* but you can use this, can you not?", "L: Not just a \u2018smart watch\u2019 Archemides! This device lets me track heart rate \u2014 when I am training and over the rest of the day too.", "A: Wait, you mean to tell me that your watch lets you know when you are\u2026alive?", "L: You sir, are a clown.", "A: Data scientist actually. Although sometimes I can\u2019t tell the difference.", "L: Let\u2019s see about that. I\u2019ve already dumped all my Garmin session datasets locally using this incredibly useful github repository.", "A: Machine learning is a hot topic but do you know what is hotter than ML? Getting results quickly.", "L: I just want to do the ML.", "A: the ML? Look, the reality is that you may not need it to extract what you want to know.", "L: I want to overtake people, not be overtaken!", "A: Come on Leonidas, give me something I can work with.", "L: Okay\u2026to consistently produce a higher level of power on the bike over a longer time period. I want to know how best to train to do so.", "A: Great. Successful projects start with the end in mind. Regardless of whether we need to consult a ML model or not, it\u2019s a necessary prerequisite to ensure data are clean, consistent, and accurate [0]. The first step is to undertake a simple data quality examination [1].", "L: How do you do that?", "L: What am I supposed to be looking at here?", "A: Exactly. For knowledge discovery, it\u2019s not useful yet.", "L: The role of data cleansing and pre-processing is then to make raw datasets useful?", "A: There\u2019s no formal definition but what I mean by useful is two general things. First, to get used to the variation and quality of the dataset [2]. Second, to install a standard data structure. One that satisfies the requirements of your analysis. Analysis is a broad term. It incorporates rule-based, machine learning, deep learning, you get the picture.", "L: Go on, what does it mean for my dataset?", "A: It\u2019s clear the raw dataset contains too much information so\u2026", "A: Having isolated \u2018activityDetailMetrics\u2019 and \u2018metricDescriptors\u2019 from the raw dataset, we\u2019re left with 5 rows x 7 columns of promising information. Let\u2019s keep \u2018directTimestamp\u2019 and \u2018directHeartRate\u2019.", "L: I\u2019m glad we renamed those columns but here, answer me something\u2026", "A: Unix timestamps! The gods of data read in time in this format. They mark the length of time in seconds or milliseconds since the 1st January 1970.", "L: Garmin record this timestamp in milliseconds. We then divide this timestamp by 1000, right?", "A: Exactly. More generally, it is unnecessary to spend too much time formatting. So long as the learning algorithm can interpret inputs, and we have a mapping, it suffices.", "L: How do you know if you are over-formatting? That sounds like a function of patience.", "A: In a way, it is. Not patience in formatting the dataset but patience in waiting for the code to run.", "A: Formatting boils down to a readability vs code performance tradeoff. In the case of \u2018HeartRate\u2019 and \u2018AirTemperature\u2019, setting the data type of these variables to float32 [3] allocates a smaller amount of storage without affecting precision.", "L: And everyone knows that improving performance without sacrificing precision is a golden ticket. But aren\u2019t we missing something?", "A: I do worry about you.", "L: I worry about your sense of humour, Archimedes. Now tell me about missing data.", "A: *Sighs* In general, methods to handle missing attribute values belong to one of two schools of thought [4]. The first is erroneously missing. Most often, treated with deletion or replacement of attributes within a larger block of attributes and values.", "A: Intentionally missing. Enter the \u2018do not care\u2019 assumption. When information deemed important manifest only in certain groups. Treated by rewiring blocks of data to attribute-value pairs.", "L: That second category is irrelevant here. The device was made to record. Any missing data would be a hardware issue.", "A: The gone_missing() function will address missing data.", "L: Address \u2014 do you mean delete the entire row entry?", "A: No. Not without thought anyway. We now have a choice of deletion or reconstruction [5]. Should we be missing an edge case of the dataset, we will drop the entire entry.", "L: What about the rest of dataset?", "A: Straight up deletion of rows that contain any missing variable is a conservative approach. Interpolation is also an option. Heart rate is a slow-evolving process meaning for any timestamp there is a tight interval of possible bpm values.", "L: For a single missing timestamp maybe that works. But for sequential missing entries I would rather take a conservative approach. 30 seconds is more than enough time for heart rate to rocket.", "A: Let\u2019s do that, linear interpolation or deletion controlled by a toggle.", "L: 244 observations, 125.5 bpm average, 151bpm max. Neat summary but enough is enough. Show me the mon-\u2026plots. Show me the plots.", "L: Why would there be any outliers? The device is measuring my heart rate, why should any of those values be wrong?", "A: Outliers aren\u2019t always wrong. They highlight points that differ from the norm [6]. All points too far above and too far below the norm are highlighted as circles. Let\u2019s see what this looks like for all sessions.", "L: What are the plots showing me?", "A: Pink \u2014 traditional boxplots. Most outliers reside at the lower end of the datasets.", "L: What about the bottom two plots, how have the data been treated?", "A: A common way to remedy outliers is to set a threshold. A multiple of the standard deviation from the mean. Outside of which all data points will be recursively removed. In the blue plot that threshold is 3 standard deviations and, in the green, it\u2019s 2.", "L: Outliers still remain using a 3 standard deviation threshold. Let\u2019s go forward with 2 standard deviations.", "A: Just a minute. Not all outliers are illegitimate contaminants, and not all illegitimate scores show up as outliers [7].", "L: I thought circles are bad. Are you trying to tell me that circles aren\u2019t bad?", "A: Circles are not always bad.", "L: \u2018the hell do you mean?!", "A: Let\u2019s rewind a little bit. Boxplots define outliers as a multiple of the standard deviation from the interquartile range of the dataset. The fact that there are more outliers below each box that above suggest skewness in the data. Not necessarily un-natural observations.", "L: Then why are there no outliers when truncating to 2 standard deviations?", "A: You said it yourself \u2014 truncation at 2 standard deviations. The dataset has lost its original shape because so many points have been omitted. Let\u2019s visualise this below.", "L: Woah, so all the red points have been binned? So many of them?! I don\u2019t like this.", "A: Blind treatment of outliers can be dangerous.", "L: Dangerous because in focussing on getting rid of box plot circles we failed to think what those observations represented. The circles appearing in the upper end of the sessions represent useful max heart rate efforts. There is no way we are throwing those away.", "A: What do you think about the lower outlier points?", "L: They\u2019re an artefact of the dataset. I start recording my sessions manually and most of the time I have a warmup period.", "A: But do we really need to include the warmup data? See longer warmups will skew your summary statistics. What that means is that the working part of the sessions will be misrepresented.", "L: I couldn\u2019t tell you where the warmup ends and the work starts. Let\u2019s get rid of anything less than 80bpm. This would also catch cases when the Garmin stops tracking reliably mid ride.", "A: Well I don\u2019t need a machine learning model to tell you that you\u2019ve not been training consistently. You also train indoors more often than outdoors.", "L: This is Greece, Archimedes. I don\u2019t want to be flattened by a chariot. No thank you.", "A: So you try to replicate outdoor sessions in the gym?", "A: The reality is that you\u2019ve not been varying session duration indoors. Especially this year. Tight pink clusters in session duration and heart rate standard deviation represent block periods of consistent intensity effort.", "L: That said, the average level of session intensity (HRavg) has varied much more in 2019 relative to 2018.", "A: True. Indoor sessions appear more intense, shorter sessions.", "L: Well, when you plot it like that it is obvious. In the cycling world, we talk about heart rate zones [8]. What do my zones look like?", "A: We don\u2019t have lactate threshold data but we can split the data into proxy zone buckets.", "L: The more endurance-fit one becomes the harder it is to elevate the heart. It is not clear that a higher heart rate means higher performance. Performance should be measure by races results and power data.", "A: Rushing into a ML model would have been time sink if that\u2019s the case. What you need to do is enrich your dataset, in this case with power data.", "L: Regardless, it\u2019s pretty clear what needs to be done \u2014 vary indoor sessions both in length and durations. It\u2019s okay to spend more time at lower heart rate zones. Active recovery you could call it.", "An important philosophy in machine learning is that one should not expect the model to do all the difficult work, not even a powerful nonlinear model [2].", "A: Today we have very quickly visualised your full Garmin session history given just your unstructured raw data.", "L: Right. We\u2019ve done so by 1) removing unnecessary data, 2) formatting and re-indexing, and 3) plugging missing values.", "A: Yes, those are key coding tasks but what is more often the inefficient link in the process is dialogue. Effective data cleansing is about ensuring raw records submit to task-specific \u2014 not necessarily generic \u2014 guidelines. It has many definitions, but what is for certain is that it is an interactive process.", "L: Crucially, it requires a back and forth between domain expertise and computational standards. I\u2019ve learnt that knowledge discovery doesn\u2019t just come from machine learning.", "Knowledge discovery has been defined as the non-trivial extraction of explicit, previously unknown and potentially useful information from data. [10]", "A: Unfortunately, you\u2019re no rocket on wheels yet.", "L: But I am more equipped to become one. I learnt that my indoor sessions don\u2019t replicate outdoor sessions as well as I thought. I need to include variation in session duration and incorporate power data as a measure of performance. I feel much more accountable for inconsistent training. I\u2019m surprised at how quickly we did that.", "A: We focus on impact over complexity.", "L: Archimedes, I like that principle\u2026now, back to pillaging villages and sculpting statues.", "[2] \u2014 Foundations of Predictive Analytics, James Wu, Stephen Coggeshall, 2012", "[4] \u2014 Handling Missing Attriute Values, Jerry W Grzymala-Busse, Witold J Grzymala-Busse, 2010", "[9] \u2014 Data Cleansing: A Prelude to Knowledge Discovery, Johnathon I Maltic and Andrian Marcus, 2000", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Social Enterprise | Machine Learning | Recommendation systems | Ex-Options Trader \u2014 London"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F147cdc000f6c&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-practical-dialogue-for-effective-data-preprocessing-147cdc000f6c&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-practical-dialogue-for-effective-data-preprocessing-147cdc000f6c&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-practical-dialogue-for-effective-data-preprocessing-147cdc000f6c&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-practical-dialogue-for-effective-data-preprocessing-147cdc000f6c&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----147cdc000f6c--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----147cdc000f6c--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@neil.chandarana18?source=post_page-----147cdc000f6c--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@neil.chandarana18?source=post_page-----147cdc000f6c--------------------------------", "anchor_text": "Neil Chandarana"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F29e317e109b3&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-practical-dialogue-for-effective-data-preprocessing-147cdc000f6c&user=Neil+Chandarana&userId=29e317e109b3&source=post_page-29e317e109b3----147cdc000f6c---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F147cdc000f6c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-practical-dialogue-for-effective-data-preprocessing-147cdc000f6c&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F147cdc000f6c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-practical-dialogue-for-effective-data-preprocessing-147cdc000f6c&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://github.com/93tilinfinity/garminconnect_analysis/blob/master/gc_download.py", "anchor_text": "this incredibly useful github repository"}, {"url": "https://www.unixtimestamp.com/", "anchor_text": "Unix timestamps"}, {"url": "https://www.kdnuggets.com/2018/12/six-steps-master-machine-learning-data-preparation.html", "anchor_text": "https://www.kdnuggets.com/2018/12/six-steps-master-machine-learning-data-preparation.html"}, {"url": "https://www.kdnuggets.com/2016/10/data-preparation-tips-tricks-tools.html", "anchor_text": "https://www.kdnuggets.com/2016/10/data-preparation-tips-tricks-tools.html"}, {"url": "https://docs.scipy.org/doc/numpy/user/basics.types.html", "anchor_text": "https://docs.scipy.org/doc/numpy/user/basics.types.html"}, {"url": "https://towardsdatascience.com/how-to-handle-missing-data-8646b18db0d4", "anchor_text": "https://towardsdatascience.com/how-to-handle-missing-data-8646b18db0d4"}, {"url": "https://www.britishcycling.org.uk/knowledge/article/izn20140808-understanding-intensity-2--heart-rate-0", "anchor_text": "https://www.britishcycling.org.uk/knowledge/article/izn20140808-understanding-intensity-2--heart-rate-0"}, {"url": "https://medium.com/tag/data-science?source=post_page-----147cdc000f6c---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/data-analysis?source=post_page-----147cdc000f6c---------------data_analysis-----------------", "anchor_text": "Data Analysis"}, {"url": "https://medium.com/tag/python?source=post_page-----147cdc000f6c---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/programming?source=post_page-----147cdc000f6c---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----147cdc000f6c---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F147cdc000f6c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-practical-dialogue-for-effective-data-preprocessing-147cdc000f6c&user=Neil+Chandarana&userId=29e317e109b3&source=-----147cdc000f6c---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F147cdc000f6c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-practical-dialogue-for-effective-data-preprocessing-147cdc000f6c&user=Neil+Chandarana&userId=29e317e109b3&source=-----147cdc000f6c---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F147cdc000f6c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-practical-dialogue-for-effective-data-preprocessing-147cdc000f6c&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----147cdc000f6c--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F147cdc000f6c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-practical-dialogue-for-effective-data-preprocessing-147cdc000f6c&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----147cdc000f6c---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----147cdc000f6c--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----147cdc000f6c--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----147cdc000f6c--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----147cdc000f6c--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----147cdc000f6c--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----147cdc000f6c--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----147cdc000f6c--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----147cdc000f6c--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@neil.chandarana18?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@neil.chandarana18?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Neil Chandarana"}, {"url": "https://medium.com/@neil.chandarana18/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "169 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F29e317e109b3&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-practical-dialogue-for-effective-data-preprocessing-147cdc000f6c&user=Neil+Chandarana&userId=29e317e109b3&source=post_page-29e317e109b3--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F141b6af603af&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-practical-dialogue-for-effective-data-preprocessing-147cdc000f6c&newsletterV3=29e317e109b3&newsletterV3Id=141b6af603af&user=Neil+Chandarana&userId=29e317e109b3&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}