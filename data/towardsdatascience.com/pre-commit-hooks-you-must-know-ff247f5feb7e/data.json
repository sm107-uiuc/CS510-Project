{"url": "https://towardsdatascience.com/pre-commit-hooks-you-must-know-ff247f5feb7e", "time": 1683013377.907142, "path": "towardsdatascience.com/pre-commit-hooks-you-must-know-ff247f5feb7e/", "webpage": {"metadata": {"title": "pre-commit hooks you must know. Boost your productivity and code\u2026 | by Martin Thoma | Towards Data Science", "h1": "pre-commit hooks you must know", "description": "pre-commit hooks are a mechanism of the version control system git. They let you execute code right before the commit. Confusingly, there is also a Python package called pre-commit which allows you\u2026"}, "outgoing_paragraph_urls": [{"url": "https://superuser.com/questions/439440/did-mac-os-lion-switch-to-using-line-feeds-lf-n-for-line-breaks-instead-of#:~:text=Nowadays%20Mac%20OS%20uses%20Unix%20style%20(LF)%20line%20breaks.&text=Command%2Dline%20tools%20in%20Mac,Mac%2Dstyle%E2%80%9D%20line%20endings.", "anchor_text": "Mac changed", "paragraph_index": 6}, {"url": "https://towardsdatascience.com/static-code-analysis-for-python-bdce10b8d287", "anchor_text": "static code analysis", "paragraph_index": 9}, {"url": "https://github.com/asottile/pyupgrade", "anchor_text": "pyupgrade", "paragraph_index": 13}, {"url": "https://martinthoma.medium.com/membership", "anchor_text": "https://martinthoma.medium.com/membership", "paragraph_index": 23}], "all_paragraphs": ["pre-commit hooks are a mechanism of the version control system git. They let you execute code right before the commit. Confusingly, there is also a Python package called pre-commit which allows you to create and use pre-commit hooks with a way simpler interface. The Python package has a plugin-system to create git pre-commit hooks automatically. It\u2019s not only for Python projects but for any project.", "After reading this article, you will know my favorite plugins for professional software development. Let\u2019s get started!", "Create a .pre-commit-config.yaml file within your project. This file contains the pre-commit hooks you want to run every time before you commit. It looks like this:", "pre-commit will look in those two repositories with the specified git tags for a file called .pre-commit-hooks.yaml. Within that file can be arbitrary many hooks defined. They all need an id so that you can choose which ones you want to use. The above git-commit config would use 3 hooks.", "Finally, you need to run pre-commit install to tell pre-commit to always run for this repository.", "Before I used it, I was worried about losing control. I want to know exactly which changes I commit. pre-commit will abort the commit if it changes anything. So you can still have a look at the code and check if the changes are reasonable. You can also choose not to run pre-commit by", "Formatting files in a similar way helps readability by improving consistency and keeps git commits clean. For example, you usually don\u2019t want trailing spaces. You want the text files to end with exactly one newline character so that some of the Linux command-line tools behave well. You want consistent newline characters between Linux ( \\n ), Mac ( \\r \u2014 Mac changed to \\n \ud83c\udf89) and windows ( \\r\\n ). My configuration for that is", "We can write code in a lot of different ways. Many of them show almost no difference in runtime, but there are differences in readability.", "Automatic code formatting has the same advantages as the file formatting. Additionally, it prevents meaningless discussions. Thus it lets you and your team focus on the important and complicated parts.", "I love Pythons autoformatter black and mentioned it already in the article about static code analysis:", "The first one is black itself, the second one is a project which applies the black formatting to code-strings within docstrings.", "Additionally, I want my imports to be sorted:", "There are autoformatters with pre-commit hooks for many languages:", "pyupgrade runs over your Python code and automatically changes old-style syntax to new-style syntax. Just have a look at some examples:", "Do you want it? Here you are:", "I thought about running the unit tests automatically by pre-commit. I decided not to do that as this might take quite a while. However, there are some quick tests which are good to run automatically and every time:", "Checking in credentials is a pretty common mistake. Here is how you prevent it:", "Some hooks don\u2019t fit in the above categories but are still useful. For example, this one prevents big files from being committed:", "The pre-commit hooks are installed locally and thus every developer could decide on their own if they want pre-commit hooks and which ones. However, I think it is helpful to provide a .pre-commit-config.yaml with plugins you recommend to execute.", "If you\u2019re looking for a complete .pre-commit-config.yaml ready to use, here it is:", "I love pre-commit as it fits so well in my workflow. I just commit as usual and pre-commit does all the checks which I sometimes forget. It speeds up development because the CI/CD pipeline is just way slower than executing the same steps locally. Especially for linting, it\u2019s an enormous time-saver to quickly run black over the code instead of committing, waiting for the CI/CD pipeline, finding an error, fixing that error locally, pushing, and waiting again for the CI/CD pipeline.", "Please let me know as a comment or email (info@martin-thoma.de) if there are other pre-commit hooks you like!", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "I\u2019m a Software Engineer with over 10 years of Python experience (Backend/ML/AI). Support me via https://martinthoma.medium.com/membership"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fff247f5feb7e&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpre-commit-hooks-you-must-know-ff247f5feb7e&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpre-commit-hooks-you-must-know-ff247f5feb7e&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpre-commit-hooks-you-must-know-ff247f5feb7e&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpre-commit-hooks-you-must-know-ff247f5feb7e&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----ff247f5feb7e--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----ff247f5feb7e--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://martinthoma.medium.com/?source=post_page-----ff247f5feb7e--------------------------------", "anchor_text": ""}, {"url": "https://martinthoma.medium.com/?source=post_page-----ff247f5feb7e--------------------------------", "anchor_text": "Martin Thoma"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F287aa3cfe747&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpre-commit-hooks-you-must-know-ff247f5feb7e&user=Martin+Thoma&userId=287aa3cfe747&source=post_page-287aa3cfe747----ff247f5feb7e---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fff247f5feb7e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpre-commit-hooks-you-must-know-ff247f5feb7e&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fff247f5feb7e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpre-commit-hooks-you-must-know-ff247f5feb7e&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://github.com/pre-commit/pre-commit-hooks", "anchor_text": "https://github.com/pre-commit/pre-commit-hooks"}, {"url": "https://github.com/psf/black", "anchor_text": "https://github.com/psf/black"}, {"url": "http://geek-and-poke.com/geekandpoke/2010/11/1/how-to-make-a-good-code-review.html", "anchor_text": "geek-and-poke"}, {"url": "https://superuser.com/questions/439440/did-mac-os-lion-switch-to-using-line-feeds-lf-n-for-line-breaks-instead-of#:~:text=Nowadays%20Mac%20OS%20uses%20Unix%20style%20(LF)%20line%20breaks.&text=Command%2Dline%20tools%20in%20Mac,Mac%2Dstyle%E2%80%9D%20line%20endings.", "anchor_text": "Mac changed"}, {"url": "https://github.com/pre-commit/pre-commit-hooks", "anchor_text": "https://github.com/pre-commit/pre-commit-hooks"}, {"url": "https://imgflip.com/i/4dqpwf", "anchor_text": "imgflip.com"}, {"url": "https://xkcd.com/1513/", "anchor_text": "XKCD"}, {"url": "https://towardsdatascience.com/static-code-analysis-for-python-bdce10b8d287", "anchor_text": "static code analysis"}, {"url": "https://github.com/psf/black", "anchor_text": "https://github.com/psf/black"}, {"url": "https://github.com/asottile/blacken-docs", "anchor_text": "https://github.com/asottile/blacken-docs"}, {"url": "https://github.com/asottile/seed-isort-config", "anchor_text": "https://github.com/asottile/seed-isort-config"}, {"url": "https://github.com/pre-commit/mirrors-isort", "anchor_text": "https://github.com/pre-commit/mirrors-isort"}, {"url": "https://prettier.io/docs/en/precommit.html#option-3-pre-commithttpsgithubcompre-commitpre-commit", "anchor_text": "Prettier"}, {"url": "https://github.com/andrewseidl/githook-clang-format", "anchor_text": "Clang-format"}, {"url": "https://github.com/doublify/pre-commit-rust", "anchor_text": "Rustfmt"}, {"url": "https://github.com/asottile/pyupgrade", "anchor_text": "pyupgrade"}, {"url": "https://github.com/asottile/pyupgrade", "anchor_text": "https://github.com/asottile/pyupgrade"}, {"url": "https://github.com/pre-commit/pre-commit-hooks", "anchor_text": "https://github.com/pre-commit/pre-commit-hooks"}, {"url": "https://github.com/pre-commit/mirrors-mypy", "anchor_text": "https://github.com/pre-commit/mirrors-mypy"}, {"url": "https://gitlab.com/pycqa/flake8", "anchor_text": "https://gitlab.com/pycqa/flake8"}, {"url": "https://github.com/pre-commit/pre-commit-hooks", "anchor_text": "https://github.com/pre-commit/pre-commit-hooks"}, {"url": "https://github.com/pre-commit/pre-commit-hooks", "anchor_text": "https://github.com/pre-commit/pre-commit-hooks"}, {"url": "https://github.com/pre-commit/pre-commit-hooks", "anchor_text": "https://github.com/pre-commit/pre-commit-hooks"}, {"url": "https://github.com/pre-commit/mirrors-mypy", "anchor_text": "https://github.com/pre-commit/mirrors-mypy"}, {"url": "https://github.com/asottile/seed-isort-config", "anchor_text": "https://github.com/asottile/seed-isort-config"}, {"url": "https://github.com/pre-commit/mirrors-isort", "anchor_text": "https://github.com/pre-commit/mirrors-isort"}, {"url": "https://github.com/psf/black", "anchor_text": "https://github.com/psf/black"}, {"url": "https://github.com/asottile/pyupgrade", "anchor_text": "https://github.com/asottile/pyupgrade"}, {"url": "https://github.com/asottile/blacken-docs", "anchor_text": "https://github.com/asottile/blacken-docs"}, {"url": "https://medium.com/tag/programming?source=post_page-----ff247f5feb7e---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/tag/software-engineering?source=post_page-----ff247f5feb7e---------------software_engineering-----------------", "anchor_text": "Software Engineering"}, {"url": "https://medium.com/tag/python?source=post_page-----ff247f5feb7e---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/git?source=post_page-----ff247f5feb7e---------------git-----------------", "anchor_text": "Git"}, {"url": "https://medium.com/tag/productivity?source=post_page-----ff247f5feb7e---------------productivity-----------------", "anchor_text": "Productivity"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fff247f5feb7e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpre-commit-hooks-you-must-know-ff247f5feb7e&user=Martin+Thoma&userId=287aa3cfe747&source=-----ff247f5feb7e---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fff247f5feb7e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpre-commit-hooks-you-must-know-ff247f5feb7e&user=Martin+Thoma&userId=287aa3cfe747&source=-----ff247f5feb7e---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fff247f5feb7e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpre-commit-hooks-you-must-know-ff247f5feb7e&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----ff247f5feb7e--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fff247f5feb7e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpre-commit-hooks-you-must-know-ff247f5feb7e&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----ff247f5feb7e---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----ff247f5feb7e--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----ff247f5feb7e--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----ff247f5feb7e--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----ff247f5feb7e--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----ff247f5feb7e--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----ff247f5feb7e--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----ff247f5feb7e--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----ff247f5feb7e--------------------------------", "anchor_text": ""}, {"url": "https://martinthoma.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://martinthoma.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Martin Thoma"}, {"url": "https://martinthoma.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "6.2K Followers"}, {"url": "https://martinthoma.medium.com/membership", "anchor_text": "https://martinthoma.medium.com/membership"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F287aa3cfe747&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpre-commit-hooks-you-must-know-ff247f5feb7e&user=Martin+Thoma&userId=287aa3cfe747&source=post_page-287aa3cfe747--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F7f2b4a3f3c8f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpre-commit-hooks-you-must-know-ff247f5feb7e&newsletterV3=287aa3cfe747&newsletterV3Id=7f2b4a3f3c8f&user=Martin+Thoma&userId=287aa3cfe747&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}