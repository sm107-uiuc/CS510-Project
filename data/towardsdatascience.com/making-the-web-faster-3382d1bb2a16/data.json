{"url": "https://towardsdatascience.com/making-the-web-faster-3382d1bb2a16", "time": 1683011702.569351, "path": "towardsdatascience.com/making-the-web-faster-3382d1bb2a16/", "webpage": {"metadata": {"title": "Still debating the value & impact of Page speed? | by Sandy Lee | Towards Data Science", "h1": "Still debating the value & impact of Page speed?", "description": "An often-quoted statistic by Ericsson ConsumerLab is that waiting for a slow loading web page on a mobile device creates as much stress as watching a horror film. A study by Cloud Flare showed the\u2026"}, "outgoing_paragraph_urls": [{"url": "https://www.ericsson.com/en/press-releases/2016/2/streaming-delays-mentally-taxing-for-smartphone-users-ericsson-mobility-report", "anchor_text": "statistic", "paragraph_index": 0}, {"url": "https://www.cloudflare.com/learning/performance/more/website-performance-conversion-rates/#:~:text=Studies%20have%20consistently%20shown%20that,targeted%20action%20on%20that%20webpage.&text=At%204.2%20seconds%2C%20conversion%20rate,seconds%2C%20conversion%20rate%20was%200.6%25", "anchor_text": "Cloud Flare", "paragraph_index": 0}, {"url": "https://www.internetmarketingninjas.com/blog/google/google-making-web-faster-years/", "anchor_text": "initiatives", "paragraph_index": 1}, {"url": "https://developers.google.com/speed", "anchor_text": "Make the Web Faster", "paragraph_index": 2}, {"url": "https://developers.google.com/web/tools/chrome-user-experience-report", "anchor_text": "CruX", "paragraph_index": 3}, {"url": "https://developers.google.com/web/tools/chrome-user-experience-report", "anchor_text": "Lighthouse project", "paragraph_index": 4}, {"url": "https://developers.google.com/speed/pagespeed/insights/", "anchor_text": "web page", "paragraph_index": 4}, {"url": "https://www.mondovo.com/keywords/", "anchor_text": "top 1000 most popular search phrases", "paragraph_index": 10}, {"url": "https://serpapi.com/", "anchor_text": "serpapi.com", "paragraph_index": 10}, {"url": "https://developers.google.com/speed/docs/insights/v5/get-started", "anchor_text": "Pagespeed Insights API", "paragraph_index": 10}, {"url": "https://www.bmc.com/blogs/mean-squared-error-r2-and-variance-in-regression-analysis/#:~:text=r2_score()%20method%3A-,Copy,%2C%20pred(y3)%2C%20%E2%80%A6", "anchor_text": "r2 error", "paragraph_index": 23}, {"url": "https://web.dev/vitals-tools/", "anchor_text": "Core Web Vitals", "paragraph_index": 37}, {"url": "https://github.com/sandy-lee/reverse_engineering_google_pagespeed", "anchor_text": "Github profile", "paragraph_index": 38}], "all_paragraphs": ["An often-quoted statistic by Ericsson ConsumerLab is that waiting for a slow loading web page on a mobile device creates as much stress as watching a horror film. A study by Cloud Flare showed the connection between page speed and website conversion rate and if a webpage takes longer than 4 seconds to load on a mobile device, the conversion rate drops to less than 1%.", "Page speed is an important thing, especially now that the mobile web has become more prevalent. Google has been stating since 2009 that their goal is to \u2018make the web faster\u2019 and between then-and-now has been releasing a raft of different initiatives to help webmasters build their websites with speed in mind.", "One of the biggest ways that Google incentivizes website owners to build with page speed in mind, is by publicly stating that page speed is a ranking factor (i.e. is the faster a webpage is, the greater the chance of it ranking highly on Google). All of Google\u2019s resources for helping website owners live on the Make the Web Faster website.", "The Google PageSpeed Insights API is a tool that lets you query Google Page Speed data programmatically on a per URL basis and it gets its results from two data sources. The first source is the Chrome User Experience (CruX) data set, which is a real-world data set of web page performance data anonymously sourced from opted-in users of Google Chrome.", "The second source of data is the open-source Lighthouse project which is a tool that gives predictions of a web pages\u2019 page speed performance and gives recommendations on how to make improvements. It can be accessed in a variety of ways including via a web page, a command-line tool or via the developer tools in Google Chrome.", "The PageSpeed Insights API comes back with over 80 different results in its response as a JSON object comprised of data from both CRuX and Lighthouse. A lot of this data is rooted in how webpage speed metrics are measured.", "There are some page speed metrics that Google has created to measure page speed performance, and the most important of these can be seen on the image below:", "The Speed Index is a score that is calculated by taking the difference between the First Contentful Paint time and the Visually Ready Time and in general the lower the Speed Index the better a website performs for page speed.", "Building an enterprise website can be both complicated and expensive and if the website doesn\u2019t perform well in search it can have a detrimental effect on the bottom line of the business the website is representing. If a website is already live but is performing poorly for page speed, it can be expensive to go back in and make updates to make it perform better.", "In a competitive business environment where resources are limited, it would be useful to know where to put a budget against making fixes where you know you will get the most benefit. I decided to investigate this further and the first step was to build a data set of page speed performance against rankings and then use machine learning to try and understand the data better and get insights.", "I built a data set of 100,000 websites using the top 1000 most popular search phrases on Google and running these through serpapi.com to get the positions of the top 100 websites for each keyword phrase. I then queried each of those 100,000 websites against the Pagespeed Insights API to pull out the most important metrics for analysis.", "It is interesting to look at a chart for position versus average Speed Index for the top 10 positions on Google for the dataset:", "Remember that the lower the Speed Index the better and as can be seen that apart from position 1, there is a clear relationship between Speed Index and position (i.e. the faster the page, the higher position). It would be a gross oversimplification to say that Speed Index drives position (as can be seen by position 1), but there is something there to investigate.", "I needed to be able to take the response from the PageSpeed Insights API and to try to pull out features which can give insight into how best to build pages for performance. I decided to use Speed Index as a predictor against these features. This will be a regression problem as Speed Index is a continuous variable.", "Also, as I wanted to be able to try and derive insights from the model I create, I have decided to use more traditional methods of modelling as this will allow me to look at the strengths of coefficients within the model to try and build business insight. Consequently, I didn\u2019t use a neural network.", "Using Speed Index as the continuous predictor variable I chose the following features as potentially having the largest impact on page speed:", "With regression models, we have to try and control for multicollinearity, as this can put our model on very shaky ground statistically. Looking at a correlation matrix of all of our features we see the following:", "As can be seen, there isn\u2019t a high degree of correlation between the features in the data set and so multicollinearity isn\u2019t an issue. If we look at a pair plot of all features versus the predictor we can see:", "We can see a high degree of linearity across most features, particularly for First-Contentful-Paint, Time-to-First-Byte and Time-to-Interactive. This means that we can most likely use a regression model to accurately model this data.", "To prepare the data for modelling, it needed to be cleaned (remove outliers, remove null values, check data types are consistent), scaled and deduped (it is possible for the same page to rank for more than one keyword).", "Once all these steps were completed, the dataset had 72,218 rows with 13 features. Of these features, 10 were numeric \u2014 one as the predictor and the other 9 for modelling.", "The first thing to do was to randomly partition the data set into three separate pieces: a train set, a test set and a final validation set that isn\u2019t used until a candidate model has been selected.", "To evaluate the candidate model I also needed to establish a baseline model to be able to accurately check success. As this is a regression problem and a lot of the relationships appeared to be linear then a \u2018simple\u2019 linear regression model seemed like a good first step. I put the word \u2018simple\u2019 in quotes as it is linear regression in 9-dimensions.", "The success metric to determine how well the model is performing is the r2 error and after training the model I got the following:", "As can be seen, during training the model got an r2 score of 0.76 within the K-fold, meaning that the model wasn\u2019t overfitting and it was performing well. When calling model.predict() on the test set the r2 value was 0.77, so this is the starting point to evaluate other candidate models and it isn\u2019t bad.", "I tested a variety of other models with various degrees of success: a decision tree regressor (badly over fitted till regularised), random forest regressor, support vector machine linear regressor and a support vector machine polynomial regressor (more out of interest than practical application).", "As can be seen, the random forest regressor performed the best with an r2 of 0.78 which is good. The next step is to optimise this result to try and get a better performing model.", "The next step was to optimise the model hyperparameters using gridsearch cross-validation (GridSearchCV) to tune the model to perform at its optimum level.", "After several rounds of GridSearchCV, the optimum model was a Random Forest Regressor with a max_depth = 23 and min_samples_leaf = 3 and this model had an r2 value of 0.79 which is the best so far and a slight improvement over the unoptimised model.", "When the optimised model was fitted against the untouched validation data set I continued to get an r2 value 0.79 which meant the model predicted the Speed Index correctly 4 out of 5 times which is a very good result.", "The real business insight comes from being able to look at the coefficients in the model to be able to decide which one has the most impact on the speed of a web page. It is good that the best performing model is a Random Forest Regressor as it is possible to call the model.feature_importances_ method to see which features contribute the most to the model.", "Calling this on the optimum model that I made for this data, we can see the following:", "As can be seen, Time-to-Interactive is what overwhelmingly drives the performance when it comes to building a fast webpage. This may seem obvious, however, if you follow the intuition through it makes sense that if you\u2019re Time-to-Interactive is fast then everything else will be fast, but not necessarily the other way around.", "For example, if you optimise for First-Meaningful-Paint (when content is visible, but you won\u2019t be able to interact with it) under the rationale that it is better to at least have content visible even if it can\u2019t be interacted with \u2014 your page will be slower to load and the user experience will be far worse.", "The contribution of Time-to-First-Byte is also significant and as been as this is the first thing that happens when a page loads, it follows that if this is slow then it will have a knock-on effect on everything else.", "If you want to build a fast webpage then according to data from the most popular 1000 keywords on Google and the Google PageSpeed Insights API, you need to optimise your build process toward making the page as interactive as possible as quickly as possible. If you do this, the page will be fast and everything else will follow.", "Alongside that ensure your server infrastructure is fast so that there are no bottlenecks. Otherwise, this will slow down the whole loading of a page.", "To further expand this project, it would be interesting to look at other target variables. Google has just introduced its Core Web Vitals a family of metrics as a way of quantifying the user experience of a page. These would be interesting to study to see if there was a connection between \u2018user-friendliness\u2019 and positions in search.", "If you\u2019re interested in checking out the code for this project, it is on my Github profile.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "I am data scientist and SEO Consultant looking for ways of how best to apply data science techniques to uncover actionable insights for search"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F3382d1bb2a16&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmaking-the-web-faster-3382d1bb2a16&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmaking-the-web-faster-3382d1bb2a16&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmaking-the-web-faster-3382d1bb2a16&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmaking-the-web-faster-3382d1bb2a16&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----3382d1bb2a16--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----3382d1bb2a16--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://sandy-lee.medium.com/?source=post_page-----3382d1bb2a16--------------------------------", "anchor_text": ""}, {"url": "https://sandy-lee.medium.com/?source=post_page-----3382d1bb2a16--------------------------------", "anchor_text": "Sandy Lee"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fcdbb006c7229&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmaking-the-web-faster-3382d1bb2a16&user=Sandy+Lee&userId=cdbb006c7229&source=post_page-cdbb006c7229----3382d1bb2a16---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F3382d1bb2a16&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmaking-the-web-faster-3382d1bb2a16&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F3382d1bb2a16&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmaking-the-web-faster-3382d1bb2a16&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@mbaumi?utm_source=medium&utm_medium=referral", "anchor_text": "Mika Baumeister"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://www.ericsson.com/en/press-releases/2016/2/streaming-delays-mentally-taxing-for-smartphone-users-ericsson-mobility-report", "anchor_text": "statistic"}, {"url": "https://www.cloudflare.com/learning/performance/more/website-performance-conversion-rates/#:~:text=Studies%20have%20consistently%20shown%20that,targeted%20action%20on%20that%20webpage.&text=At%204.2%20seconds%2C%20conversion%20rate,seconds%2C%20conversion%20rate%20was%200.6%25", "anchor_text": "Cloud Flare"}, {"url": "https://www.internetmarketingninjas.com/blog/google/google-making-web-faster-years/", "anchor_text": "initiatives"}, {"url": "https://developers.google.com/speed", "anchor_text": "Make the Web Faster"}, {"url": "https://developers.google.com/web/tools/chrome-user-experience-report", "anchor_text": "CruX"}, {"url": "https://developers.google.com/web/tools/chrome-user-experience-report", "anchor_text": "Lighthouse project"}, {"url": "https://developers.google.com/speed/pagespeed/insights/", "anchor_text": "web page"}, {"url": "https://developers.google.com/speed/docs/insights/v5/about", "anchor_text": "https://developers.google.com/speed/docs/insights/v5/about"}, {"url": "https://www.mondovo.com/keywords/", "anchor_text": "top 1000 most popular search phrases"}, {"url": "https://serpapi.com/", "anchor_text": "serpapi.com"}, {"url": "https://developers.google.com/speed/docs/insights/v5/get-started", "anchor_text": "Pagespeed Insights API"}, {"url": "https://web.dev/first-contentful-paint", "anchor_text": "Learn more"}, {"url": "https://web.dev/tti/", "anchor_text": "Learn more"}, {"url": "https://web.dev/time-to-first-byte", "anchor_text": "Learn more"}, {"url": "https://web.dev/dom-size", "anchor_text": "Learn more"}, {"url": "https://web.dev/bootup-time", "anchor_text": "Learn more"}, {"url": "https://web.dev/first-meaningful-paint", "anchor_text": "Learn more"}, {"url": "https://web.dev/total-byte-weight", "anchor_text": "Learn more"}, {"url": "https://www.bmc.com/blogs/mean-squared-error-r2-and-variance-in-regression-analysis/#:~:text=r2_score()%20method%3A-,Copy,%2C%20pred(y3)%2C%20%E2%80%A6", "anchor_text": "r2 error"}, {"url": "https://web.dev/vitals-tools/", "anchor_text": "Core Web Vitals"}, {"url": "https://github.com/sandy-lee/reverse_engineering_google_pagespeed", "anchor_text": "Github profile"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----3382d1bb2a16---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/tag/seo?source=post_page-----3382d1bb2a16---------------seo-----------------", "anchor_text": "SEO"}, {"url": "https://medium.com/tag/data-science?source=post_page-----3382d1bb2a16---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/random-forest-regressor?source=post_page-----3382d1bb2a16---------------random_forest_regressor-----------------", "anchor_text": "Random Forest Regressor"}, {"url": "https://medium.com/tag/data-science-workflow?source=post_page-----3382d1bb2a16---------------data_science_workflow-----------------", "anchor_text": "Data Science Workflow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F3382d1bb2a16&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmaking-the-web-faster-3382d1bb2a16&user=Sandy+Lee&userId=cdbb006c7229&source=-----3382d1bb2a16---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F3382d1bb2a16&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmaking-the-web-faster-3382d1bb2a16&user=Sandy+Lee&userId=cdbb006c7229&source=-----3382d1bb2a16---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F3382d1bb2a16&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmaking-the-web-faster-3382d1bb2a16&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----3382d1bb2a16--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F3382d1bb2a16&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmaking-the-web-faster-3382d1bb2a16&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----3382d1bb2a16---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----3382d1bb2a16--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----3382d1bb2a16--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----3382d1bb2a16--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----3382d1bb2a16--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----3382d1bb2a16--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----3382d1bb2a16--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----3382d1bb2a16--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----3382d1bb2a16--------------------------------", "anchor_text": ""}, {"url": "https://sandy-lee.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://sandy-lee.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Sandy Lee"}, {"url": "https://sandy-lee.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "53 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fcdbb006c7229&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmaking-the-web-faster-3382d1bb2a16&user=Sandy+Lee&userId=cdbb006c7229&source=post_page-cdbb006c7229--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F1880f6e67460&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmaking-the-web-faster-3382d1bb2a16&newsletterV3=cdbb006c7229&newsletterV3Id=1880f6e67460&user=Sandy+Lee&userId=cdbb006c7229&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}