{"url": "https://towardsdatascience.com/tafra-a-minimalist-dataframe-61c7561ded2b", "time": 1683009457.4417548, "path": "towardsdatascience.com/tafra-a-minimalist-dataframe-61c7561ded2b/", "webpage": {"metadata": {"title": "Tafra: A Minimalist Dataframe. A small, pure-Python package with\u2026 | by David S. Fulford | Towards Data Science", "h1": "Tafra: A Minimalist Dataframe", "description": "Data science requires, quite obviously, data. When we work with data, we must first load the data from a source, and into memory. Our data could possibly have different types: text, integers\u2026"}, "outgoing_paragraph_urls": [{"url": "https://usethe.computer/posts/12-typing-groupby.html", "anchor_text": "original proof of concept", "paragraph_index": 2}, {"url": "https://pypi.org/project/tafra/", "anchor_text": "full library", "paragraph_index": 2}, {"url": "https://numba.pydata.org/", "anchor_text": "numba", "paragraph_index": 5}, {"url": "https://tafra.readthedocs.io/en/latest/api.html#tafra.base.Tafra.read_csv", "anchor_text": "CSV", "paragraph_index": 6}, {"url": "https://tafra.readthedocs.io/en/latest/api.html#tafra.base.Tafra.read_sql", "anchor_text": "SQL cursor", "paragraph_index": 6}, {"url": "https://tafra.readthedocs.io/en/latest/api.html#tafra.base.Tafra.from_records", "anchor_text": "row-wise records", "paragraph_index": 6}, {"url": "https://tafra.readthedocs.io/en/latest/api.html#tafra.base.Tafra", "anchor_text": "many others", "paragraph_index": 6}, {"url": "https://tafra.readthedocs.io/en/latest/api.html#tafra.base.Tafra._coalesce_dtypes", "anchor_text": "Tafra._coalesce_dtypes()", "paragraph_index": 17}, {"url": "https://tafra.readthedocs.io/en/latest/", "anchor_text": "here", "paragraph_index": 19}, {"url": "https://github.com/petbox-dev/tafra", "anchor_text": "here", "paragraph_index": 19}], "all_paragraphs": ["Data science requires, quite obviously, data. When we work with data, we must first load the data from a source, and into memory. Our data could possibly have different types: text, integers, decimals, dates, timestamps, etc. The dataframe arose as the de-facto mechanism into which we store this heterogeneously-typed data while we perform data science.", "The tafra began life as a thought experiment: how could we reduce the idea of a dataframe (as expressed in libraries like pandas or languages like R) to its useful essence, while carving away the cruft?", "The original proof of concept stopped at group_by(). Since then, we\u2019ve expanded upon the idea to a build full library to produce a practically useful tafra, which we hope you may find to be a helpful lightweight substitute for certain uses of pandas.", "A tafra is, more-or-less, a set of named columns or dimensions. Each of these is a typed numpy.ndarray of consistent length, representing the values for each column by rows. The library provides lightweight syntax for manipulating rows and columns, support for managing data types, iterators for rows and sub-frames, pandas-like transform() support and conversion from pandas DataFrames, and SQL-style GROUP BY and JOIN operations.", "If we\u2019re in a Jupyter Notebook, we get an HTML table with the dtypes in the first row:", "Writing high-performance code (such as by use of numba) requires strict enforcement of your data types. Windows, oddly, has int32 as the default long as opposed to Linux and MacOS, which are int64 by default. Need to change it? Tafra.update_dtypes() can take any input accepted by numpy.dtype().", "In addition to reading data from other data structures (such as CSV, SQL cursor, or row-wise records, and many others), it\u2019s useful to be able to transform a tafra to other data structures:", "To map aggregation functions to columns:", "And to map functions to rows:", "The iterate_by method gives a great deal of flexibility. The Iterable is a Tuple of the unique grouping, the indices of the rows that match the unique grouping, and a Tafra of those rows. For example: we\u2019ve not built a pivot method, but performing your own is straight forward:", "Have some code that works with pandas, or just a way of doing things that you prefer? tafra is flexible:", "And going back is just as simple:", "Note that the default for most functions is to treat the data as immutable. In-place versions of many functions exist, which is done to give clarity to the return type of each function. That is to say, a function returns at most one type or a None, never a Union of two other types that must be checked by the calling code.", "Another example of distinct return types is in Tafra.read_sql and Tafra_read_sql_chunks. The former will return all records at call time in a Tafra, while the latter will return an Iterator[Tafra] to consume as desired.", "In this case, lightweight also means performant. Beyond any additional features added to the library, tafra should provide the necessary base for organizing data structures for numerical processing. One of the most important aspects is fast access to the data itself. By minimizing abstraction to access the underlying numpy.ndarray, tafra provides an order of magnitude increase in performance.", "For those who need faster performance, \u201cunsafe\u201d operations can be made that bypass data validation checks by reading and writing directly to the _data attribute. These see 10x and 100x improvement over pandas, respectively.", "One of the primary utilities of dataframe-esque structures is the ability to mimic SQL-style GROUP BY and JOIN operations. tafra also excels at these, showing a 10x improvement in performance for even basic functions. Additionally, we provide the ability to map any function to any column.", "For these basic operations, tafra is at least an order of magnitude faster. And the \u201cunsafe\u201d assignment (direct assignment to the _data attribute) is 3 orders of magnitude if you\u2019d like to supply dtypes yourself, or call Tafra._coalesce_dtypes() after a set of operations.", "This is just an introduction to tafra. We believe it is well suited for many workflows that need a type-focused dataframe-type structure without all the bells and whistles\u2026 or if you just want an alternative that doesn\u2019t get in your way for passing numpy.ndarray where you want them to go.", "Check out the documentation here, and feel free to post any issues, bugs, or contributions here.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "A reservoir engineer straddling the domains of physics-based workflows, data engineering, and machine learning."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F61c7561ded2b&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftafra-a-minimalist-dataframe-61c7561ded2b&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftafra-a-minimalist-dataframe-61c7561ded2b&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftafra-a-minimalist-dataframe-61c7561ded2b&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftafra-a-minimalist-dataframe-61c7561ded2b&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----61c7561ded2b--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----61c7561ded2b--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@dsfulf?source=post_page-----61c7561ded2b--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@dsfulf?source=post_page-----61c7561ded2b--------------------------------", "anchor_text": "David S. Fulford"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fe6b03efa44f2&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftafra-a-minimalist-dataframe-61c7561ded2b&user=David+S.+Fulford&userId=e6b03efa44f2&source=post_page-e6b03efa44f2----61c7561ded2b---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F61c7561ded2b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftafra-a-minimalist-dataframe-61c7561ded2b&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F61c7561ded2b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftafra-a-minimalist-dataframe-61c7561ded2b&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://pixabay.com/photos/laptop-book-information-online-819285/", "anchor_text": "Pixabay"}, {"url": "https://usethe.computer/posts/12-typing-groupby.html", "anchor_text": "original proof of concept"}, {"url": "https://pypi.org/project/tafra/", "anchor_text": "full library"}, {"url": "https://numba.pydata.org/", "anchor_text": "numba"}, {"url": "https://tafra.readthedocs.io/en/latest/api.html#tafra.base.Tafra.read_csv", "anchor_text": "CSV"}, {"url": "https://tafra.readthedocs.io/en/latest/api.html#tafra.base.Tafra.read_sql", "anchor_text": "SQL cursor"}, {"url": "https://tafra.readthedocs.io/en/latest/api.html#tafra.base.Tafra.from_records", "anchor_text": "row-wise records"}, {"url": "https://tafra.readthedocs.io/en/latest/api.html#tafra.base.Tafra", "anchor_text": "many others"}, {"url": "https://tafra.readthedocs.io/en/latest/api.html#tafra.base.Tafra._coalesce_dtypes", "anchor_text": "Tafra._coalesce_dtypes()"}, {"url": "https://tafra.readthedocs.io/en/latest/", "anchor_text": "here"}, {"url": "https://github.com/petbox-dev/tafra", "anchor_text": "here"}, {"url": "https://medium.com/tag/python?source=post_page-----61c7561ded2b---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/data-science?source=post_page-----61c7561ded2b---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/pandas?source=post_page-----61c7561ded2b---------------pandas-----------------", "anchor_text": "Pandas"}, {"url": "https://medium.com/tag/programming?source=post_page-----61c7561ded2b---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/tag/numpy?source=post_page-----61c7561ded2b---------------numpy-----------------", "anchor_text": "Numpy"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F61c7561ded2b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftafra-a-minimalist-dataframe-61c7561ded2b&user=David+S.+Fulford&userId=e6b03efa44f2&source=-----61c7561ded2b---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F61c7561ded2b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftafra-a-minimalist-dataframe-61c7561ded2b&user=David+S.+Fulford&userId=e6b03efa44f2&source=-----61c7561ded2b---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F61c7561ded2b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftafra-a-minimalist-dataframe-61c7561ded2b&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----61c7561ded2b--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F61c7561ded2b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftafra-a-minimalist-dataframe-61c7561ded2b&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----61c7561ded2b---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----61c7561ded2b--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----61c7561ded2b--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----61c7561ded2b--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----61c7561ded2b--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----61c7561ded2b--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----61c7561ded2b--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----61c7561ded2b--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----61c7561ded2b--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@dsfulf?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@dsfulf?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "David S. Fulford"}, {"url": "https://medium.com/@dsfulf/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "37 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fe6b03efa44f2&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftafra-a-minimalist-dataframe-61c7561ded2b&user=David+S.+Fulford&userId=e6b03efa44f2&source=post_page-e6b03efa44f2--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fusers%2Fe6b03efa44f2%2Flazily-enable-writer-subscription&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftafra-a-minimalist-dataframe-61c7561ded2b&user=David+S.+Fulford&userId=e6b03efa44f2&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}