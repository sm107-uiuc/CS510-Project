{"url": "https://towardsdatascience.com/the-power-of-pickletools-handling-large-model-pickle-files-7f9037b9086b", "time": 1683009358.4350898, "path": "towardsdatascience.com/the-power-of-pickletools-handling-large-model-pickle-files-7f9037b9086b/", "webpage": {"metadata": {"title": "The Power of Pickletools. The data is increasing. More the data\u2026 | by Amarpreet Singh | Towards Data Science", "h1": "The Power of Pickletools", "description": "The volume of data is increasing. The more the data, the more we can use it for solving different problems. Suppose you train a machine learning model for some solution and want to save it for later\u2026"}, "outgoing_paragraph_urls": [], "all_paragraphs": ["The volume of data is increasing. The more the data, the more we can use it for solving different problems. Suppose you train a machine learning model for some solution and want to save it for later predictions. Here come some serialization-deserialization methods: Pickling (Pickle, cPickle, Joblib, JsonPickle, Dill, Mlflow), saving to PMML format as pipeline (sklearn2pmml), saving as JSON format (sklearn_json, sklearn_export, msgpack, JsonPickle).", "You may also use m2cgen library to export your model to python/java/c++ code or write your own code to serialize and de-serialize your model.", "When you build a machine learning model to solve some problem by using huge data, the model is gonna be huge too! So the problem arises when you try to save this ginormous encoding to your system (I am going to talk here about the large RandomForestClassifier model/pickle file I tried to take care of).", "More data implies a large-sized model. Try to reduce your data as much as possible without losing your valuable information in the data. Removing duplicates or near-duplicates, Stratified Under-Sampling can save you here.", "Try to bring down your model size by tweaking the model parameters without compromising much accuracy. Hyper-parameter tuning will help you in this case. My base RandomForestClassifier model was of whooping 60 GB but hyper-parameter tuning managed to get it lower to 8 GB. Still large? Let\u2019s check out the next cure.", "You\u2019ve now done everything to make your model lighter without trading off much of its predictive power and still getting 8 GB of pickle file. Oh, Dear, Life is so unfair.", "Hold on, still, some hope is left. Pickletools comes to rescue!", "The library helps you to reduce the size of the pickle file as well as makes loading the pickle file back as an RF object easy and faster.", "Although Joblib and using compression methods such as zlib, gzip made my pickle file to shrink down to 1 GB, but loading back that file as a random forest classifier object was a headache. It would take more than 16 GB RAM to load my pickle (1 GB in size) and de-serialize the RF object which would result in MemoryError.", "Using Pickletools solves both problems of shrinking the size and faster loading of pickle file back without shooting the RAM more than your system can handle as follows.", "Woohoo!! While gzip helps to reduce the pickle size (to 1 GB), pickletools helps the pickle file to load faster without consuming much memory (took 7 GB RAM this time)", "You may also set pickle attribute fast = True for this purpose but it may be deprecated in future as the documentation says so:", "If you can in any way parallelize the whole process by making each core of your CPU work at the same time, it may rescue you too up-to some extent!", "Okay, your turn to try it yourself. May the force be with ya!", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F7f9037b9086b&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-power-of-pickletools-handling-large-model-pickle-files-7f9037b9086b&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-power-of-pickletools-handling-large-model-pickle-files-7f9037b9086b&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-power-of-pickletools-handling-large-model-pickle-files-7f9037b9086b&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-power-of-pickletools-handling-large-model-pickle-files-7f9037b9086b&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----7f9037b9086b--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----7f9037b9086b--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@soniamarpreet17?source=post_page-----7f9037b9086b--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@soniamarpreet17?source=post_page-----7f9037b9086b--------------------------------", "anchor_text": "Amarpreet Singh"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F3d9d93721587&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-power-of-pickletools-handling-large-model-pickle-files-7f9037b9086b&user=Amarpreet+Singh&userId=3d9d93721587&source=post_page-3d9d93721587----7f9037b9086b---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F7f9037b9086b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-power-of-pickletools-handling-large-model-pickle-files-7f9037b9086b&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F7f9037b9086b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-power-of-pickletools-handling-large-model-pickle-files-7f9037b9086b&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://docs.python.org/3/library/pickle.html#pickle.Pickler.fast", "anchor_text": "https://docs.python.org/3/library/pickle.html#pickle.Pickler.fast"}, {"url": "https://docs.python.org/3/library/pickletools.html#pickletools.optimize", "anchor_text": "https://docs.python.org/3/library/pickletools.html#pickletools.optimize"}, {"url": "https://wiki.python.org/moin/ParallelProcessing", "anchor_text": "https://wiki.python.org/moin/ParallelProcessing"}, {"url": "https://stackoverflow.com/questions/23916413/celery-parallel-distributed-task-with-multiprocessing", "anchor_text": "https://stackoverflow.com/questions/23916413/celery-parallel-distributed-task-with-multiprocessing"}, {"url": "https://docs.python.org/3/library/multiprocessing.html", "anchor_text": "https://docs.python.org/3/library/multiprocessing.html"}, {"url": "https://medium.com/tag/data-science?source=post_page-----7f9037b9086b---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/python?source=post_page-----7f9037b9086b---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/pickles?source=post_page-----7f9037b9086b---------------pickles-----------------", "anchor_text": "Pickles"}, {"url": "https://medium.com/tag/serialization?source=post_page-----7f9037b9086b---------------serialization-----------------", "anchor_text": "Serialization"}, {"url": "https://medium.com/tag/big-data?source=post_page-----7f9037b9086b---------------big_data-----------------", "anchor_text": "Big Data"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F7f9037b9086b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-power-of-pickletools-handling-large-model-pickle-files-7f9037b9086b&user=Amarpreet+Singh&userId=3d9d93721587&source=-----7f9037b9086b---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F7f9037b9086b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-power-of-pickletools-handling-large-model-pickle-files-7f9037b9086b&user=Amarpreet+Singh&userId=3d9d93721587&source=-----7f9037b9086b---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F7f9037b9086b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-power-of-pickletools-handling-large-model-pickle-files-7f9037b9086b&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----7f9037b9086b--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F7f9037b9086b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-power-of-pickletools-handling-large-model-pickle-files-7f9037b9086b&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----7f9037b9086b---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----7f9037b9086b--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----7f9037b9086b--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----7f9037b9086b--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----7f9037b9086b--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----7f9037b9086b--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----7f9037b9086b--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----7f9037b9086b--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----7f9037b9086b--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@soniamarpreet17?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@soniamarpreet17?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Amarpreet Singh"}, {"url": "https://medium.com/@soniamarpreet17/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "7 Followers"}, {"url": "https://www.linkedin.com/in/amarpreet-singh-504008114/", "anchor_text": "https://www.linkedin.com/in/amarpreet-singh-504008114/"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F3d9d93721587&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-power-of-pickletools-handling-large-model-pickle-files-7f9037b9086b&user=Amarpreet+Singh&userId=3d9d93721587&source=post_page-3d9d93721587--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fusers%2F3d9d93721587%2Flazily-enable-writer-subscription&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-power-of-pickletools-handling-large-model-pickle-files-7f9037b9086b&user=Amarpreet+Singh&userId=3d9d93721587&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}