{"url": "https://towardsdatascience.com/3-simple-ways-to-handle-large-data-with-pandas-d9164a3c02c1", "time": 1682996220.9262762, "path": "towardsdatascience.com/3-simple-ways-to-handle-large-data-with-pandas-d9164a3c02c1/", "webpage": {"metadata": {"title": "3 simple ways to handle large data with Pandas | by George Seif | Towards Data Science", "h1": "3 simple ways to handle large data with Pandas", "description": "Pandas has become one of the most popular Data Science libraries out there. It\u2019s easy to use, the documentation is fantastic, and it\u2019s capabilities are powerful. Yet regardless of what library one\u2026"}, "outgoing_paragraph_urls": [{"url": "https://www.superquotes.co/?utm_source=mediumtech&utm_medium=web&utm_campaign=sharing", "anchor_text": "Super Quotes newsletter", "paragraph_index": 0}, {"url": "https://twitter.com/GeorgeSeif94", "anchor_text": "twitter", "paragraph_index": 29}, {"url": "https://www.linkedin.com/in/georgeseif/", "anchor_text": "LinkedIn", "paragraph_index": 29}], "all_paragraphs": ["Want to be inspired? Come join my Super Quotes newsletter. \ud83d\ude0e", "Pandas has become one of the most popular Data Science libraries out there. It\u2019s easy to use, the documentation is fantastic, and it\u2019s capabilities are powerful.", "Yet regardless of what library one uses, large datasets always present an extra challenge that needs to be handled with care.", "You start to run into hardware roadblocks since you don\u2019t have enough RAM to hold all the data in memory. Enterprise companies store datasets that get up to the range of 100s or even 1000s of GBs .", "Even if you do happen to buy a machine that has enough RAM to store all that data, just reading it into memory is very slow.", "But once again the Pandas library is going to help us out. This article will talk about 3 techniques you can use to reduce the memory footprint and read-in time for your large dataset. I\u2019ve used these techniques for datasets of over 100GB in size, squeezing them onto machines with 64 and sometimes 32GB of RAM.", "CSV format is a very convenient way to store data, being both easy to write to and human readable. Plus, there\u2019s a nice pandas function read_csv() for loading up data that\u2019s stored as CSV.", "But what happens when your CSV is so big that you run out of memory?", "There\u2019s a very simple pandas trick to handle that! Instead of trying to handle our data all at once, we\u2019re going to do it in pieces. Typically, these pieces are referred to as chunks.", "A chunk is just a part of our dataset. We can make that chunk as big or as small as we want. It just depends on how much RAM we have.", "The process then works as follows:", "We can perform all of the above steps using a handy variable of the read_csv() function called chunksize. The chunksize refers to how many CSV rows pandas will read at a time. This will of course depend on how much RAM you have and how big each row is.", "If we think that our data has a pretty easy to handle distribution like Gaussian, then we can perform our desired processing and visualisations on one chunk at a time without too much loss in accuracy.", "If our distribution is a bit more complex like a Poisson, then it\u2019s best to filter each chunk and put all of the small pieces together before processioning. Most of the time, you\u2019ll end up dropping many irrelevant columns or removing rows that have missing values. We can do that for each chunk to make them smaller, then put them all-together and perform our data analysis on the final dataframe.", "The code below performs all of these steps.", "Sometime, we\u2019ll know right off the bat which columns of our dataset we want to analyse. In fact, it\u2019s often the case that there are several or more columns that we don\u2019t care about like names, account numbers, etc.", "Skipping over the columns directly before reading in the data can save on tons of memory. Pandas allows us to specify the columns we would like to read in:", "Throwing away the columns containing that useless miscellaneous information is going to be one of your biggest memory savings.", "The other thing we can do is filter out any rows with missing or NA values. This is easiest with the dropna() function:", "There\u2019s a few really useful variables that we can pass to the dropna() :", "You can use those arguments, especially the thresh and subset to get really specific about which rows will be dropped.", "Pandas doesn\u2019t come with a way to do this at read time like with the columns, but we can always do it on each chunk as we did above.", "For many beginner Data Scientists, data types aren\u2019t given much thought. But once you start dealing with very large datasets, dealing with data types becomes essential.", "The standard practice tends to be to read in the dataframe and then convert the data type of a column as needed. But with a big dataset, we really have to be memory-space conscious.", "There may be columns in our CSV, such as floating point numbers, which will take up way more space than they need to. For example, if we downloaded a dataset for predicting stock prices, our prices might be saved as 32 bit floating point!", "But do we really need 32 float? Most of the time, stocks are bought at prices specified by two decimal places. Even if we wanted to be really accurate, float16 is more than enough.", "So instead of reading in our dataset with the columns\u2019 original data types, we\u2019re going to specify the data types we want pandas to use reading in our columns. That way, we never use up more memory than we actually need.", "This is easily done using the dtype parameter in the read_csv() function. We can specify a dictionary where each key is a column in our dataset and each value is the data type we want to use that key.", "That concludes our tutorial! Hopefully those 3 tips can save you a lot of time and a lot of memory!", "Follow me on twitter where I post all about the latest and greatest AI, Technology, and Science! Connect with me on LinkedIn too!", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fd9164a3c02c1&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2F3-simple-ways-to-handle-large-data-with-pandas-d9164a3c02c1&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2F3-simple-ways-to-handle-large-data-with-pandas-d9164a3c02c1&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2F3-simple-ways-to-handle-large-data-with-pandas-d9164a3c02c1&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2F3-simple-ways-to-handle-large-data-with-pandas-d9164a3c02c1&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----d9164a3c02c1--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----d9164a3c02c1--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@george.seif94?source=post_page-----d9164a3c02c1--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@george.seif94?source=post_page-----d9164a3c02c1--------------------------------", "anchor_text": "George Seif"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fe2af5c8737ec&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2F3-simple-ways-to-handle-large-data-with-pandas-d9164a3c02c1&user=George+Seif&userId=e2af5c8737ec&source=post_page-e2af5c8737ec----d9164a3c02c1---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fd9164a3c02c1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2F3-simple-ways-to-handle-large-data-with-pandas-d9164a3c02c1&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fd9164a3c02c1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2F3-simple-ways-to-handle-large-data-with-pandas-d9164a3c02c1&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://www.superquotes.co/?utm_source=mediumtech&utm_medium=web&utm_campaign=sharing", "anchor_text": "Super Quotes newsletter"}, {"url": "https://twitter.com/GeorgeSeif94", "anchor_text": "twitter"}, {"url": "https://www.linkedin.com/in/georgeseif/", "anchor_text": "LinkedIn"}, {"url": "https://medium.com/tag/data-science?source=post_page-----d9164a3c02c1---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----d9164a3c02c1---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/tag/education?source=post_page-----d9164a3c02c1---------------education-----------------", "anchor_text": "Education"}, {"url": "https://medium.com/tag/technology?source=post_page-----d9164a3c02c1---------------technology-----------------", "anchor_text": "Technology"}, {"url": "https://medium.com/tag/innovation?source=post_page-----d9164a3c02c1---------------innovation-----------------", "anchor_text": "Innovation"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fd9164a3c02c1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2F3-simple-ways-to-handle-large-data-with-pandas-d9164a3c02c1&user=George+Seif&userId=e2af5c8737ec&source=-----d9164a3c02c1---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fd9164a3c02c1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2F3-simple-ways-to-handle-large-data-with-pandas-d9164a3c02c1&user=George+Seif&userId=e2af5c8737ec&source=-----d9164a3c02c1---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fd9164a3c02c1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2F3-simple-ways-to-handle-large-data-with-pandas-d9164a3c02c1&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----d9164a3c02c1--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fd9164a3c02c1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2F3-simple-ways-to-handle-large-data-with-pandas-d9164a3c02c1&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----d9164a3c02c1---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----d9164a3c02c1--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----d9164a3c02c1--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----d9164a3c02c1--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----d9164a3c02c1--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----d9164a3c02c1--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----d9164a3c02c1--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----d9164a3c02c1--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----d9164a3c02c1--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@george.seif94?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@george.seif94?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "George Seif"}, {"url": "https://medium.com/@george.seif94/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "21K Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fe2af5c8737ec&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2F3-simple-ways-to-handle-large-data-with-pandas-d9164a3c02c1&user=George+Seif&userId=e2af5c8737ec&source=post_page-e2af5c8737ec--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fc78596234267&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2F3-simple-ways-to-handle-large-data-with-pandas-d9164a3c02c1&newsletterV3=e2af5c8737ec&newsletterV3Id=c78596234267&user=George+Seif&userId=e2af5c8737ec&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}