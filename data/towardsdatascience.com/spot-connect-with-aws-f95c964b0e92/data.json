{"url": "https://towardsdatascience.com/spot-connect-with-aws-f95c964b0e92", "time": 1683008680.153097, "path": "towardsdatascience.com/spot-connect-with-aws-f95c964b0e92/", "webpage": {"metadata": {"title": "Deep Learning Experiments on the Cloud for a Fraction of the Cost | Towards Data Science", "h1": "Deep Learning on AWS for a Fraction of the Cost", "description": "The spot-connect module uses AWS spot instances to create EC2 instances that can be used for deep learning experiments or any other distributed workloads. Spot instances cost a fraction of regular instances and can be managed easily with spot-connect."}, "outgoing_paragraph_urls": [{"url": "https://github.com/losDaniel/spot-connect", "anchor_text": "spot-connect", "paragraph_index": 1}, {"url": "https://medium.com/swlh/mastering-the-aws-spot-instance-2ecf59e242fa", "anchor_text": "this older article", "paragraph_index": 2}, {"url": "https://aws.amazon.com/ec2/instance-types/", "anchor_text": "instance type", "paragraph_index": 16}, {"url": "https://aws.amazon.com/ec2/spot/pricing/", "anchor_text": "maximum bid price", "paragraph_index": 16}, {"url": "https://github.com/losDaniel/spot-connect/blob/master/spot_connect/profiles.txt", "anchor_text": "profiles.txt", "paragraph_index": 16}, {"url": "https://aws.amazon.com/ec2/spot/pricing/", "anchor_text": "pricing", "paragraph_index": 17}, {"url": "https://github.com/losDaniel/spot-connect/blob/master/spot_connect/profiles.txt", "anchor_text": "profiles.txt", "paragraph_index": 19}, {"url": "https://github.com/losDaniel/spot-connect.git", "anchor_text": "Github repo", "paragraph_index": 40}, {"url": "https://github.com/losDaniel/spot-connect/blob/master/spot_connect_walkthrough.ipynb", "anchor_text": "walk-through notebook", "paragraph_index": 40}, {"url": "https://github.com/losDaniel/spot-connect/blob/master/amazon_price_and_image_scraper.ipynb", "anchor_text": "notebook I used to scrape the pricing and image data from AWS", "paragraph_index": 40}], "all_paragraphs": ["Spot-connect is a python module for any programmer looking for an easy way to use cloud computing.", "Originally developed for machine learning projects, spot-connect makes it easy to work with Amazon Web Services and EC2 instances.", "The services provided by AWS and the steps to setup an account are covered in the Getting to Know AWS and Setting Up Your AWS Account sections of this older article.", "If you plan to try spot-connect and have not already installed and configured the AWS command line (pip install awscli , aws config) or if you have not created an access key for your AWS account, please read the referenced sections.", "Spot-instances run on hardware that AWS is not able to rent out. There is never enough demand to rent out all of Amazon\u2019s machines so they rent out their excess capacity at a fraction of the original price to make up some of their costs.", "The only catch is that you can be kicked off the instance if demand increases, which is more likely to happen with high end instances (you get a 2-minute warning before you\u2019re kicked off so you can save/transfer your work).", "The spot-connect module lets you create and manage spot instances. It can be used from a command line, script or jupyter notebook. It focuses on managing EC2 resources (AWS\u2019s cloud computing service) but provides additional functionality to interact with storage options like elastic file systems and S3.", "What follows is a walk-through on how to use the module.", "Once you have installed the module you can use it from your prompt", "Using spot_connect from the command prompt also lets you connect the prompt directly to your instance.", "The example above creates and instance called \u201cinstance_1\u201d with the \u201ct2.micro\u201d profile. It connects to an elastic file system named \u201cstockefs\u201d and connects the prompt to the newly created instance.", "The gif has been sped up. Launching an instance usually takes a couple of minutes or more depending on the specs. If you connect using the name of an existing instance then you will simply be reconnected to that instance immediately.", "The most useful arguments for spot_connect from the command prompt are:", "* = required** = required only when creating an instance (not reconnecting)", "Having the ability to connect your prompt directly to the instance is useful for troubleshooting scripts or running any other checks.", "All you need to do to launch an instance with spot-connect is give the instance a name and a profile.", "Profiles are preset instance specifications that define things like the instance type, maximum bid price, region, and other connection options. These can be found in the profiles.txt file that gets downloaded with the module when it is installed.", "Available instance types, pricing, and image/AMI ids all change by region. Spot-connect comes with regional instance data and AMI id data that was scraped from the AWS website.", "You can change the default profile settings using the spot-connect module:", "The reset_profiles() method will show you a list of regions and then a list of AMIs, each time asking you to choose one. Your local copy of profiles.txt will then be updated to use that region and AMI.", "For notebooks and scripts, the SpotInstance class is equivalent to using spot_connect from the command prompt.", "This command creates or connects to the \u201cinstance1\u201d instance. A SpotInstance object can be instantiated with the same arguments as spot_connect. Additionally, SpotInstance also lets you specify profile parameters, allowing you to override any default settings in a profile like price which would let you submit a custom maximum bid directly.", "With SpotInstance you can download and upload files,", "run commands directly on the instance,", "Run commands directly on the instance using the run(<command>, cmd=True) method. However, be aware that these commands are always run in the home directory which means that changing directories in one run will not mean you start in that directory in the next run.", "Fortunately, you can use \\n to run continuous commands together", "This can make it easy to store complex scripts as functions that can be used directly in python. For example:", "Launching an instance is nice, but the goal of spot-connect is to facilitate distributing workloads across a number of instances. That is where the InstanceManager class comes in.", "The InstanceManager lets you launch and keep track of multiple instances at once. It also provides functionality to transfer files between instances and S3, run distributed workloads and more.", "Below is an example of how one might organize a the execution tasks across several instances:", "1. Instantiate an InstanceManager with efs='data' so instances created by the manager automatically link to the EFS named \u201cdata.\u201d", "2. Launch an instance using the launch_instance method. Instances created with im can be found in im.instances .", "3. Submit the \u201cmonitor\u201d instance to the clone_repo method to clone the Github repo for the project into the efs.", "4. Run the commands cd efs followed by mkdir results to create a results folder in the EFS.", "5. Design a method that can take the arguments for each job and return a script that can be run on each instance.", "6. Train models for a series of \u201cn_cluster\u201d values. Train each model on a separate instance using the run_distributed_jobs method.", "7. Check on the status of the instances, wait util all of them have terminated (finished their jobs).", "8.Use the instance_s3_transfer method to upload the results to S3. An instance profile must be provided to let the instance access S3.", "Once in S3 you may download the results directly through the console or using the awscli from a command prompt:", "Before closing out this section its worth covering some useful bash commands:", "That is basically it for the spot-connect module. Here is the Github repo for the project where you can find a walk-through notebook (still needs to be updated to include the DTC example in this article) as well as the notebook I used to scrape the pricing and image data from AWS.", "I develop the module depending on my schedule but the basic functionality presented in this article is a stopping point for a while for me. Contributions are very welcome. Here are the features I that think are worth pursuing:", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Ff95c964b0e92&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fspot-connect-with-aws-f95c964b0e92&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fspot-connect-with-aws-f95c964b0e92&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fspot-connect-with-aws-f95c964b0e92&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fspot-connect-with-aws-f95c964b0e92&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----f95c964b0e92--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----f95c964b0e92--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@carlosvalcarcel?source=post_page-----f95c964b0e92--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@carlosvalcarcel?source=post_page-----f95c964b0e92--------------------------------", "anchor_text": "Carlos Valcarcel"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F2eb2d49c65a9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fspot-connect-with-aws-f95c964b0e92&user=Carlos+Valcarcel&userId=2eb2d49c65a9&source=post_page-2eb2d49c65a9----f95c964b0e92---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ff95c964b0e92&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fspot-connect-with-aws-f95c964b0e92&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ff95c964b0e92&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fspot-connect-with-aws-f95c964b0e92&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@timmossholder?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Tim Mossholder"}, {"url": "https://unsplash.com/s/photos/cloudy-skyscraper?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Unsplash"}, {"url": "https://github.com/losDaniel/spot-connect", "anchor_text": "spot-connect"}, {"url": "https://medium.com/swlh/mastering-the-aws-spot-instance-2ecf59e242fa", "anchor_text": "this older article"}, {"url": "https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_use_switch-role-ec2_instance-profiles.html", "anchor_text": "This grants the instance access to other AWS resources like S3"}, {"url": "https://aws.amazon.com/ec2/instance-types/", "anchor_text": "instance type"}, {"url": "https://aws.amazon.com/ec2/spot/pricing/", "anchor_text": "maximum bid price"}, {"url": "https://github.com/losDaniel/spot-connect/blob/master/spot_connect/profiles.txt", "anchor_text": "profiles.txt"}, {"url": "https://aws.amazon.com/ec2/spot/pricing/", "anchor_text": "pricing"}, {"url": "https://github.com/losDaniel/spot-connect/blob/master/spot_connect/profiles.txt", "anchor_text": "profiles.txt"}, {"url": "https://github.com/FlorentF9/DeepTemporalClustering.git", "anchor_text": "https://github.com/FlorentF9/DeepTemporalClustering.git"}, {"url": "https://github.com/losDaniel/spot-connect.git", "anchor_text": "Github repo"}, {"url": "https://github.com/losDaniel/spot-connect/blob/master/spot_connect_walkthrough.ipynb", "anchor_text": "walk-through notebook"}, {"url": "https://github.com/losDaniel/spot-connect/blob/master/amazon_price_and_image_scraper.ipynb", "anchor_text": "notebook I used to scrape the pricing and image data from AWS"}, {"url": "https://medium.com/tag/python?source=post_page-----f95c964b0e92---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/cloud-computing?source=post_page-----f95c964b0e92---------------cloud_computing-----------------", "anchor_text": "Cloud Computing"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----f95c964b0e92---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/tag/aws?source=post_page-----f95c964b0e92---------------aws-----------------", "anchor_text": "AWS"}, {"url": "https://medium.com/tag/towards-data-science?source=post_page-----f95c964b0e92---------------towards_data_science-----------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Ff95c964b0e92&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fspot-connect-with-aws-f95c964b0e92&user=Carlos+Valcarcel&userId=2eb2d49c65a9&source=-----f95c964b0e92---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Ff95c964b0e92&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fspot-connect-with-aws-f95c964b0e92&user=Carlos+Valcarcel&userId=2eb2d49c65a9&source=-----f95c964b0e92---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ff95c964b0e92&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fspot-connect-with-aws-f95c964b0e92&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----f95c964b0e92--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Ff95c964b0e92&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fspot-connect-with-aws-f95c964b0e92&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----f95c964b0e92---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----f95c964b0e92--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----f95c964b0e92--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----f95c964b0e92--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----f95c964b0e92--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----f95c964b0e92--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----f95c964b0e92--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----f95c964b0e92--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----f95c964b0e92--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@carlosvalcarcel?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@carlosvalcarcel?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Carlos Valcarcel"}, {"url": "https://medium.com/@carlosvalcarcel/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "81 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F2eb2d49c65a9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fspot-connect-with-aws-f95c964b0e92&user=Carlos+Valcarcel&userId=2eb2d49c65a9&source=post_page-2eb2d49c65a9--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fb1467128c856&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fspot-connect-with-aws-f95c964b0e92&newsletterV3=2eb2d49c65a9&newsletterV3Id=b1467128c856&user=Carlos+Valcarcel&userId=2eb2d49c65a9&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}