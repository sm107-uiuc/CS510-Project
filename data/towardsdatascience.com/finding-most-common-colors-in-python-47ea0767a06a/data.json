{"url": "https://towardsdatascience.com/finding-most-common-colors-in-python-47ea0767a06a", "time": 1683014895.263078, "path": "towardsdatascience.com/finding-most-common-colors-in-python-47ea0767a06a/", "webpage": {"metadata": {"title": "Finding the Most Common Colors in Python | by M. Rake Linggar A. | Towards Data Science", "h1": "Finding the Most Common Colors in Python", "description": "There are several use cases in image processing that can be solved if we know the most common color(s) of an image or object is. For example in the field of agriculture, we might want to determine\u2026"}, "outgoing_paragraph_urls": [{"url": "https://github.com/mrakelinggar/data-stuffs/tree/master/frequent_color", "anchor_text": "Github", "paragraph_index": 28}], "all_paragraphs": ["There are several use cases in image processing that can be solved if we know the most common color(s) of an image or object is. For example in the field of agriculture, we might want to determine the maturity of a fruit, an orange or strawberry for instance. We can simply check if the color of the fruit falls in a predetermined range and see if it is mature, rotten, or too young.", "As usual, we can solve this case using Python plus simple yet powerful libraries like Numpy, Matplotlib, and OpenCV. I will demonstrate several ways on how to find the most frequent color in an image using these packages.", "We\u2019ll load the basic packages here. We\u2019ll load some more packages as we go along. Also, since we are programming in Jupyter, let\u2019s not forget to include %matplotlib inline command.", "In this tutorial, we will be showing two images side by side a lot. So, let\u2019s make a helper function to do so.", "Next, we\u2019ll load some sample images that we\u2019ll be using in this tutorial and show them using the function above.", "Now we are ready. Time to find out the most common color(s) in these images.", "The first method is the easiest (but ineffective one) \u2014 simply find the average pixel values.", "Using numpy's average function, we can easily get the average pixel value across row and width \u2014 axis=(0,1)", "We can see that the average method can give misleading or inaccurate results, as the most common colors it gave are a bit off. This is because the average took into consideration all pixel values. This will be really problematic when we have images with high contrast (both \u201clight\u201d and \u201cdark\u201d in one image). This is much more clearer in the second image.", "It gave us a somewhat new color that is not visibly clear/noticeable in the image.", "The second method will be a bit more accurate than the first one. We\u2019ll simply count the number of occurrences in each pixel value.", "Fortunately for us, numpy again gives us a function that gives us this exact result. But first, we must reshape the image data structure to only give us a list of 3 values (one for each R, G, and B channel intensity).", "We can simply use numpy \u2018s reshape function to get the list of pixel values.", "Now that we have the data in the right structure, we can start counting the frequency of the pixel values. We can just use numpy's unique function, with the parameter return_counts=True .", "Done, let\u2019s run it to our images.", "This makes more sense than the first one right? The most common colors are in the black area. But we can go further. What if we take not just one most common color, but more than that? Using the same concept, we can take the top N most common colors. Except, if you look at the first image, many colors with the highest frequencies would most likely be neighboring colors, probably with a difference of a tiny few pixels.", "In other words, we want to take the most common, different color clusters.", "Scikit-learn package comes to the rescue. We can use the infamous K-Means clustering to cluster groups of colors together.", "Easy, right? Now, all we need is a function to display the clusters of colors above and display it right away.", "We simply create an image with a height of 50, and a width of 300 pixels to display the color groups/palette. And for each color cluster, we assign it to our palette.", "Beautiful isn\u2019t it? K-Means clustering gives great results in terms of the most common colors in the images. In the second image, we can see that there are too many shades of brown in the palette. This is most likely because we picked too many clusters. Let\u2019s see if we can fix it by choosing a smaller value of k.", "Yep, that solved it. Since we use K-Means clustering, we still have to determine the appropriate number of clusters ourselves. Three clusters seem to be a good choice.", "But we can still improve upon these results plus still solve the number of cluster issues.", "How about we also show the proportion of the clusters towards the whole image?", "All we need to do is to modify our palette function. Instead of using fixed steps, we change the width of each cluster to be proportionate to how many pixels are in that cluster.", "Not only it gives us the most common colors in the images. It also gives us the proportion of occurrences of each of the pixels.", "It also helps answer how many clusters should we use. In the case of the top image, two to four clusters seem reasonable. In the case of the second image, looks like we need at least two clusters. The reason we don\u2019t use one cluster (k=4) is that we\u2019ll run into the same problem as the average method.", "We have covered several techniques to get the most common colors in images using Python and several well-known libraries for it. Plus we\u2019ve also seen the advantages and disadvantages of those techniques. So far, finding the most common colors using K-Means with k > 1 is one of the best solutions to finding the most frequent colors in images (at least compared to the other methods we\u2019ve gone through).", "Let me know if you have problems with the script in the comments, or in my Github.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Love anything data-related (especially programming), travel, movies, and gaming."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F47ea0767a06a&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffinding-most-common-colors-in-python-47ea0767a06a&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffinding-most-common-colors-in-python-47ea0767a06a&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffinding-most-common-colors-in-python-47ea0767a06a&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffinding-most-common-colors-in-python-47ea0767a06a&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----47ea0767a06a--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----47ea0767a06a--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://mrakelinggar.medium.com/?source=post_page-----47ea0767a06a--------------------------------", "anchor_text": ""}, {"url": "https://mrakelinggar.medium.com/?source=post_page-----47ea0767a06a--------------------------------", "anchor_text": "M. Rake Linggar A."}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F6ad2c1beb234&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffinding-most-common-colors-in-python-47ea0767a06a&user=M.+Rake+Linggar+A.&userId=6ad2c1beb234&source=post_page-6ad2c1beb234----47ea0767a06a---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F47ea0767a06a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffinding-most-common-colors-in-python-47ea0767a06a&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F47ea0767a06a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffinding-most-common-colors-in-python-47ea0767a06a&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@sarahjgualtieri?utm_source=medium&utm_medium=referral", "anchor_text": "Sarah Gualtieri"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://github.com/mrakelinggar/data-stuffs/tree/master/frequent_color", "anchor_text": "Github"}, {"url": "https://medium.com/tag/python?source=post_page-----47ea0767a06a---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/opencv?source=post_page-----47ea0767a06a---------------opencv-----------------", "anchor_text": "Opencv"}, {"url": "https://medium.com/tag/image-processing?source=post_page-----47ea0767a06a---------------image_processing-----------------", "anchor_text": "Image Processing"}, {"url": "https://medium.com/tag/computer-vision?source=post_page-----47ea0767a06a---------------computer_vision-----------------", "anchor_text": "Computer Vision"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----47ea0767a06a---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F47ea0767a06a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffinding-most-common-colors-in-python-47ea0767a06a&user=M.+Rake+Linggar+A.&userId=6ad2c1beb234&source=-----47ea0767a06a---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F47ea0767a06a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffinding-most-common-colors-in-python-47ea0767a06a&user=M.+Rake+Linggar+A.&userId=6ad2c1beb234&source=-----47ea0767a06a---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F47ea0767a06a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffinding-most-common-colors-in-python-47ea0767a06a&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----47ea0767a06a--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F47ea0767a06a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffinding-most-common-colors-in-python-47ea0767a06a&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----47ea0767a06a---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----47ea0767a06a--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----47ea0767a06a--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----47ea0767a06a--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----47ea0767a06a--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----47ea0767a06a--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----47ea0767a06a--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----47ea0767a06a--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----47ea0767a06a--------------------------------", "anchor_text": ""}, {"url": "https://mrakelinggar.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://mrakelinggar.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "M. Rake Linggar A."}, {"url": "https://mrakelinggar.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "105 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F6ad2c1beb234&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffinding-most-common-colors-in-python-47ea0767a06a&user=M.+Rake+Linggar+A.&userId=6ad2c1beb234&source=post_page-6ad2c1beb234--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F9eef6f493615&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffinding-most-common-colors-in-python-47ea0767a06a&newsletterV3=6ad2c1beb234&newsletterV3Id=9eef6f493615&user=M.+Rake+Linggar+A.&userId=6ad2c1beb234&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}