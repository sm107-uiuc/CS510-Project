{"url": "https://towardsdatascience.com/hypothesis-testing-in-the-northwind-dataset-using-anova-db3ab16b5eba", "time": 1682995344.8944361, "path": "towardsdatascience.com/hypothesis-testing-in-the-northwind-dataset-using-anova-db3ab16b5eba/", "webpage": {"metadata": {"title": "Using ANOVA for Hypothesis Testing | Towards Data Science", "h1": "Using ANOVA for Hypothesis Testing: A Core Data Science Skill", "description": "Using ANOVA for hypothesis testing, to locate your most profitable customers."}, "outgoing_paragraph_urls": [], "all_paragraphs": ["As part of a project on the Northwind database, I needed to come up with some questions to ask of the data in order to derive valuable business insights for the company. The Northwind database is a sample database from Microsoft for a fictitious company called Northwind Traders, which imports and exports consumables from around the world. The database contains a range of information on the company\u2019s activities, including on customers, their orders, the products and their suppliers. I was interested in gaining a better understanding of their customers, and also figuring out which customer groups contributed most to Northwind\u2019s bottom line. So one of the questions I decided to ask was:", "Does the average revenue per order vary between customers from different regions?", "To answer this question, I first created a null and alternate hypothesis:", "Null hypothesis: the average amount spent per order is the same between different customer regions", "Alternate hypothesis: the average amount spent per order is different (either higher or lower) between different customer regions", "The alpha level (i.e. the probability of rejecting the null hypothesis when it is true) was set at 0.05.", "The first step was to extract the right data using this (only slightly mislabelled) schema:", "To answer the question under investigation, I needed to extract the customer region, the total quantity of each product ordered, the unit price and the discount level for each order. To do this I joined the Customer and OrderDetail tables using the Order table:", "The resulting dataframe now showed each order ID, quantity, unit price and discount for each product in each order:", "But what I actually wanted was the total revenue per order. This was calculated using the code in the cell below, which applies the discount to the product of the unit price and the unit quantity and then sums for each order and drops the columns that are no longer needed:", "This left me with a dataframe that only included the data I need:", "However, a quick count of the number of orders from each region revealed that customers from some regions have only placed a small number of orders:", "Because ANOVA will be used to test the hypothesis, it is best to ensure relatively equal sample sizes, particularly to satisfy the assumption of equal variances. Smaller groups were therefore combined with other groups that make geographical sense, and a minimum group size of 30 was used.", "Now that the data was in the right format and grouped correctly, it was possible to start exploring it. The following code block produces the graph below, which plots the number of orders, total revenue per order and average revenue per order for each region:", "The graphs show that Western Europe is the region with the greatest number of orders, and also has the greatest total revenue. However, North America has the most expensive order on average (followed by Western Europe). Southern and Eastern Europe has the lowest number of orders, lowest total revenue, and cheapest order on average. The third graph lent support to the alternate hypothesis that there are significant differences in average order revenue between regions. This was further investigated through the use of statistical hypothesis testing.", "To answer the question of whether the average amount spent per order varies between customers from different regions, ANOVA was used. This assesses the degree of variation between multiple samples, where each sample is a different region in this case.", "ANOVA assumes that the data is normally distributed, and that the samples have similar variances. Distribution plots were made using seaborn, which demonstrated that the data was very heavily positively skewed, with long tails. Log-transforming the data resulted in more normally distributed data with more similar distributions. The distributions of the log-transformed data (shown below) were produced with the following code:", "The data was now more normally distributed, and the variances from the mean were more similar. It was now possible to run an ANOVA test:", "The ANOVA table above revealed that the p-value is lower than the alpha value of 0.05. Therefore I was able to reject the null hypothesis and accept the alternate hypothesis. There are statistically significant differences in average order value between different regions, i.e. customers from different parts of the world spend different amounts of money on their orders, on average.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Data Scientist at Amazon. Previously in data in startups, academia and government. Oxford PhD."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fdb3ab16b5eba&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhypothesis-testing-in-the-northwind-dataset-using-anova-db3ab16b5eba&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhypothesis-testing-in-the-northwind-dataset-using-anova-db3ab16b5eba&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhypothesis-testing-in-the-northwind-dataset-using-anova-db3ab16b5eba&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhypothesis-testing-in-the-northwind-dataset-using-anova-db3ab16b5eba&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----db3ab16b5eba--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----db3ab16b5eba--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@lvlewis8?source=post_page-----db3ab16b5eba--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@lvlewis8?source=post_page-----db3ab16b5eba--------------------------------", "anchor_text": "Laura Lewis"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fafb662460a24&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhypothesis-testing-in-the-northwind-dataset-using-anova-db3ab16b5eba&user=Laura+Lewis&userId=afb662460a24&source=post_page-afb662460a24----db3ab16b5eba---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fdb3ab16b5eba&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhypothesis-testing-in-the-northwind-dataset-using-anova-db3ab16b5eba&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fdb3ab16b5eba&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhypothesis-testing-in-the-northwind-dataset-using-anova-db3ab16b5eba&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://medium.com/tag/python?source=post_page-----db3ab16b5eba---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/data-science?source=post_page-----db3ab16b5eba---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/data-analysis?source=post_page-----db3ab16b5eba---------------data_analysis-----------------", "anchor_text": "Data Analysis"}, {"url": "https://medium.com/tag/hypothesis-testing?source=post_page-----db3ab16b5eba---------------hypothesis_testing-----------------", "anchor_text": "Hypothesis Testing"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fdb3ab16b5eba&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhypothesis-testing-in-the-northwind-dataset-using-anova-db3ab16b5eba&user=Laura+Lewis&userId=afb662460a24&source=-----db3ab16b5eba---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fdb3ab16b5eba&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhypothesis-testing-in-the-northwind-dataset-using-anova-db3ab16b5eba&user=Laura+Lewis&userId=afb662460a24&source=-----db3ab16b5eba---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fdb3ab16b5eba&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhypothesis-testing-in-the-northwind-dataset-using-anova-db3ab16b5eba&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----db3ab16b5eba--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fdb3ab16b5eba&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhypothesis-testing-in-the-northwind-dataset-using-anova-db3ab16b5eba&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----db3ab16b5eba---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----db3ab16b5eba--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----db3ab16b5eba--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----db3ab16b5eba--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----db3ab16b5eba--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----db3ab16b5eba--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----db3ab16b5eba--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----db3ab16b5eba--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----db3ab16b5eba--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@lvlewis8?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@lvlewis8?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Laura Lewis"}, {"url": "https://medium.com/@lvlewis8/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "381 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fafb662460a24&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhypothesis-testing-in-the-northwind-dataset-using-anova-db3ab16b5eba&user=Laura+Lewis&userId=afb662460a24&source=post_page-afb662460a24--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F81d47781bec6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhypothesis-testing-in-the-northwind-dataset-using-anova-db3ab16b5eba&newsletterV3=afb662460a24&newsletterV3Id=81d47781bec6&user=Laura+Lewis&userId=afb662460a24&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}