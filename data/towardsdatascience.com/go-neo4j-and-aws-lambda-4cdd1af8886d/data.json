{"url": "https://towardsdatascience.com/go-neo4j-and-aws-lambda-4cdd1af8886d", "time": 1683008863.92641, "path": "towardsdatascience.com/go-neo4j-and-aws-lambda-4cdd1af8886d/", "webpage": {"metadata": {"title": "Go, Neo4J, and AWS Lambda\u2026.. And the nitty-gritty of making them\u2026 | by Vedashree Patil | Towards Data Science", "h1": "Go, Neo4J, and AWS Lambda\u2026.", "description": "I work with Neo4j almost every day and being a Python developer, I mostly couple the both of them together for writing most of my logic. Over the past few days, however, since I started using Golang\u2026"}, "outgoing_paragraph_urls": [{"url": "https://neo4j.com/", "anchor_text": "Neo4j", "paragraph_index": 0}, {"url": "https://github.com/neo4j/neo4j-go-driver", "anchor_text": "official driver for Golang", "paragraph_index": 3}, {"url": "https://github.com/neo4j-drivers/seabolt", "anchor_text": "Seabolt", "paragraph_index": 5}, {"url": "https://github.com/neo4j-drivers/seabolt/blob/1.7/README.md", "anchor_text": "these instructions", "paragraph_index": 7}, {"url": "https://docs.aws.amazon.com/lambda/latest/dg/configuration-layers.html", "anchor_text": "Lambda Layer", "paragraph_index": 11}, {"url": "https://github.com/vedashree29296/neo4j-go-lambda-connector", "anchor_text": "available on my GitHub repository.", "paragraph_index": 12}, {"url": "https://www.serverless.com/", "anchor_text": "serverless framework", "paragraph_index": 20}, {"url": "https://github.com/vedashree29296/neo4j-go-lambda-connector/tree/master/neo4j-lambda-connector", "anchor_text": "GitHub repository", "paragraph_index": 24}, {"url": "https://www.serverless.com/examples/aws-golang-http-get-post/", "anchor_text": "useful link to get started with", "paragraph_index": 24}], "all_paragraphs": ["I work with Neo4j almost every day and being a Python developer, I mostly couple the both of them together for writing most of my logic. Over the past few days, however, since I started using Golang, I seem to have developed a strong affinity towards it.", "I wanted to build a simple service using AWS Lambda that would execute simple queries against my Neo4j Database and decided to use Go for a change. Knowing that there are official Go drivers for Neo4j was an obvious relief. But the first few attempts turned out to be utter failures.", "Don\u2019t worry though, the good news is, you can definitely use AWS Lambda, Go and Neo4j together. There\u2019s just a few extra steps that need to be carried out first.", "Yes, Neo4j has an official driver for Golang.", "No, it's not written in pure Go.", "What does this mean? The neo4j-go-driver depends on a C library called \u201cSeabolt\u201d for connecting to the database instance over the bolt protocol.", "This means you\u2019ll have to explicitly install the library before you can start executing the Go code for Neo4j. Moreover, seabolt in turn requires OpenSSL (TLS in case of Windows) to be installed on your local system for it to function well.", "Installing OpenSSL and Seabolt on your local machine is pretty hassle-free. In fact, OpenSSL comes pre-installed in many Operating systems. (I used a Linux system which already had OpenSSL and all I had to do was install Seabolt after following these instructions)", "The challenge arises when we want to replicate the same thing using AWS Lambda. Go, being a statically typed language is first compiled into a binary file which is then made available as a handler for the Lambda function. Typically this won\u2019t cause any problems if all the dependencies are Go-based or if you\u2019re working on your local system.", "However, In our case, the Go binary depends on external C object files and links them at runtime. But How do we make these C files available to the lambda functions?", "After spending a considerable amount of time scouring the internet for a possible solution, I couldn\u2019t come across anything concrete, especially for Go. Most solutions are targeted towards python (since certain python libraries use C dependencies too) and I was almost tempted to go back to my old friend Python. But, even if the languages are different, the concept remains the same.", "In the simplest sense, a Lambda Layer is a piece of code that can be shared by different services. Typically, a layer will consist of a bunch of heavyweight dependencies that are required by most of the functions. In our case, we will package our C dependencies together and make them available to the lambda function using Layers.", "The entire code including an example lambda function and instructions for setup is available on my GitHub repository.", "Since AWS often uses CentOS-based containers for deploying lambda functions, Docker becomes an obvious choice to download and compile the C dependencies.", "We create a custom docker image using lambci/lambda-base image as the base image and install all our dependencies on it.", "The base image already has OpenSSL installed and configured. The only library needed now is Seabolt.", "Seabolt is downloaded as a .tar package and extracted to the /usr/local/lib64 directory within the docker image. To make it available to the Lambda functions, we move the contents to the /opt/lib directory which is one the directories that are searched during runtime linking. ( This is specified in an environment variable called LD_LIBRARY_PATH)", "Once the image is built, we need to dump the contents of the /opt/lib folder to a folder on our local system that will be later converted to a layer", "Running this script will create a directory called layer which will contain the .so files specific to Seabolt within the layer/lib folder.", "Now, all we have to do is create a Layer. There are two ways of doing this. First, we create a Layer using the AWS console or the CLI and upload the contents of the layer/ directory as a .zip file.", "Another way is to use the serverless framework that will do all the work for you. All you need is a file call serverless.yml that specifies the details for your layer.", "And run simply run serverless deploy from your working directory.", "You will get ARN URL for your newly created layer which you can easily attach to your lambda functions.", "Once the layer is successfully created, you can go ahead and create your custom handler functions that can communicate with Neo4J.", "The GitHub repository includes a sample handler function that creates a simple node in Neo4j which is deployed using a serverless framework. For more reference on how to create Lambda functions using Go and serverless, this is a useful link to get started with.", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F4cdd1af8886d&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgo-neo4j-and-aws-lambda-4cdd1af8886d&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgo-neo4j-and-aws-lambda-4cdd1af8886d&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgo-neo4j-and-aws-lambda-4cdd1af8886d&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgo-neo4j-and-aws-lambda-4cdd1af8886d&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----4cdd1af8886d--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----4cdd1af8886d--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@vedaaa29296?source=post_page-----4cdd1af8886d--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@vedaaa29296?source=post_page-----4cdd1af8886d--------------------------------", "anchor_text": "Vedashree Patil"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F6cf03c573940&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgo-neo4j-and-aws-lambda-4cdd1af8886d&user=Vedashree+Patil&userId=6cf03c573940&source=post_page-6cf03c573940----4cdd1af8886d---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F4cdd1af8886d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgo-neo4j-and-aws-lambda-4cdd1af8886d&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F4cdd1af8886d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgo-neo4j-and-aws-lambda-4cdd1af8886d&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://neo4j.com/", "anchor_text": "Neo4j"}, {"url": "https://github.com/neo4j/neo4j-go-driver", "anchor_text": "official driver for Golang"}, {"url": "https://github.com/neo4j-drivers/seabolt", "anchor_text": "Seabolt"}, {"url": "https://github.com/neo4j-drivers/seabolt/blob/1.7/README.md", "anchor_text": "these instructions"}, {"url": "https://docs.aws.amazon.com/lambda/latest/dg/configuration-layers.html", "anchor_text": "Lambda Layer"}, {"url": "https://github.com/vedashree29296/neo4j-go-lambda-connector", "anchor_text": "available on my GitHub repository."}, {"url": "https://www.serverless.com/", "anchor_text": "serverless framework"}, {"url": "https://github.com/vedashree29296/neo4j-go-lambda-connector/tree/master/neo4j-lambda-connector", "anchor_text": "GitHub repository"}, {"url": "https://www.serverless.com/examples/aws-golang-http-get-post/", "anchor_text": "useful link to get started with"}, {"url": "https://medium.com/tag/neo4j?source=post_page-----4cdd1af8886d---------------neo4j-----------------", "anchor_text": "Neo4j"}, {"url": "https://medium.com/tag/golang?source=post_page-----4cdd1af8886d---------------golang-----------------", "anchor_text": "Golang"}, {"url": "https://medium.com/tag/go?source=post_page-----4cdd1af8886d---------------go-----------------", "anchor_text": "Go"}, {"url": "https://medium.com/tag/aws-lambda?source=post_page-----4cdd1af8886d---------------aws_lambda-----------------", "anchor_text": "AWS Lambda"}, {"url": "https://medium.com/tag/serverless?source=post_page-----4cdd1af8886d---------------serverless-----------------", "anchor_text": "Serverless"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F4cdd1af8886d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgo-neo4j-and-aws-lambda-4cdd1af8886d&user=Vedashree+Patil&userId=6cf03c573940&source=-----4cdd1af8886d---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F4cdd1af8886d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgo-neo4j-and-aws-lambda-4cdd1af8886d&user=Vedashree+Patil&userId=6cf03c573940&source=-----4cdd1af8886d---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F4cdd1af8886d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgo-neo4j-and-aws-lambda-4cdd1af8886d&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----4cdd1af8886d--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F4cdd1af8886d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgo-neo4j-and-aws-lambda-4cdd1af8886d&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----4cdd1af8886d---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----4cdd1af8886d--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----4cdd1af8886d--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----4cdd1af8886d--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----4cdd1af8886d--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----4cdd1af8886d--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----4cdd1af8886d--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----4cdd1af8886d--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----4cdd1af8886d--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@vedaaa29296?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@vedaaa29296?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Vedashree Patil"}, {"url": "https://medium.com/@vedaaa29296/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "197 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F6cf03c573940&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgo-neo4j-and-aws-lambda-4cdd1af8886d&user=Vedashree+Patil&userId=6cf03c573940&source=post_page-6cf03c573940--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F2563e03afd83&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgo-neo4j-and-aws-lambda-4cdd1af8886d&newsletterV3=6cf03c573940&newsletterV3Id=2563e03afd83&user=Vedashree+Patil&userId=6cf03c573940&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}