{"url": "https://towardsdatascience.com/mixed-plot-scales-and-custom-violinboxplot-68cc8c5d6ead", "time": 1682994491.017747, "path": "towardsdatascience.com/mixed-plot-scales-and-custom-violinboxplot-68cc8c5d6ead/", "webpage": {"metadata": {"title": "Hybrid plot scales and custom violinboxplot implementation | by Madalina Ciortan | Towards Data Science", "h1": "Hybrid plot scales and custom violinboxplot implementation", "description": "Typically we use both linear and log scales (for capturing outliers) but here we will investigate the possibility of creating hybrid axes, with an arbitrary mixture of various types of scales\u2026"}, "outgoing_paragraph_urls": [{"url": "https://github.com/ciortanmadalina/modality_tests/blob/master/violinboxplot_hybrid_axes.ipynb", "anchor_text": "Github", "paragraph_index": 3}, {"url": "https://github.com/ciortanmadalina/modality_tests/blob/master/violinboxplot_hybrid_axes.ipynb", "anchor_text": "github", "paragraph_index": 21}, {"url": "https://github.com/ciortanmadalina/modality_tests/blob/master/kernel_density.ipynb", "anchor_text": "https://github.com/ciortanmadalina/modality_tests/blob/master/kernel_density.ipynb", "paragraph_index": 23}], "all_paragraphs": ["In a nutshell, this post addresses the following 2 questions:", "Typically we use both linear and log scales (for capturing outliers) but here we will investigate the possibility of creating hybrid axes, with an arbitrary mixture of various types of scales, applied on desired intervals.", "We will propose a custom implementation of a violinboxplot offering a wide range of customization parameters which govern for instance the rendering of outliers, custom annotations for modes and counts, split axis between linear/log based on an arbitrary percentile. It handles both arrays of data and dataframes grouped by a list of columns.", "All examples in this blog have been implemented in python/matplotlib and are available on Github.", "Let\u2019s start by choosing a function (sin) which will generate the data-set we will use to demonstrate the hybrid scales concept.", "If we treat this data-set as a black-box, a data scientist may want, for any number of reasons, to have a dynamic resolution of the plot by using different scales on different intervals with a minimal effort. For instance, he may want to visualize:", "The first naive solution is to create 3 different plots with the chosen axis scales on chosen intervals.In this post we will investigate the capabilities of matplotlib to make appear the original plot under different scales, thus providing a unified visualization.", "There are 2 approaches we will present in this post:", "Matplotlib\u2019s function make_axes_locatable allow us to append a new axis to a given axis. In the example below, a log axis is created from the original linear axis.By setting arbitrary y limits we control what part of the plot is being rendered and we can create the impression of plot continuity.Sharedx parameter allows sharing the same x axis and prevents the x tick labels from being re-rendered.", "We can use append axes on a given input axis in 4 potential location (top/ bottom/ up/ down). The code below illustrates chaining 2 axes, on top and on bottom.", "Another option is to use matplotlib\u2019s GridSpec which provides more flexibility in terms of sizing the components and usage.We can define upfront the number of suplots, their relative sizes (height_ratios), the distance between subplots (hspace).Once the independent axis have been created, we can set the scales and the desired limits.", "Let\u2019s start by generating a few data distributions reflecting multiple scenarios:", "Based on one of the existing datasets, we can define a dataframe:", "In order to better understand the underlying data distribution, let\u2019s create a plotting function which leverages both boxplots and violinplots:", "However, seaborn expects to indicate as y only one column which will be used in a group by to aggregate the results. If we want to aggregate based on a combination of multiple features, we have to do it prior to calling the plotting function.", "What some drawbacks we can identify in the above plots?", "Some other points to consider are:", "If we start with this last point, we can come up with a method that removes all points father away than a given number of standard deviations (by default 3).", "What some drawbacks we can identify in the above plots?", "Some other points to consider are:", "If we start with this last point, we can come up with a method that removes all points father away than a given number of standard deviations (by default 3).", "Find the complete code on github. We will only present the results on the data-sets introduced previously. This custom implementation renders:", "Results using dataframes and aggregations on one or multiple columns:", "One future improvement is to automatically detect the modes of all rendered distribution and to estimate the PDF by using the code presented in the previous article https://github.com/ciortanmadalina/modality_tests/blob/master/kernel_density.ipynb . This can give an estimation of some of the zones of interest where for instance a log scale would be good choice.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Computer science engineer, bioinformatician, researcher in data science"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F68cc8c5d6ead&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmixed-plot-scales-and-custom-violinboxplot-68cc8c5d6ead&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmixed-plot-scales-and-custom-violinboxplot-68cc8c5d6ead&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmixed-plot-scales-and-custom-violinboxplot-68cc8c5d6ead&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmixed-plot-scales-and-custom-violinboxplot-68cc8c5d6ead&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----68cc8c5d6ead--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----68cc8c5d6ead--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@ciortanmadalina?source=post_page-----68cc8c5d6ead--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@ciortanmadalina?source=post_page-----68cc8c5d6ead--------------------------------", "anchor_text": "Madalina Ciortan"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fd576810f0222&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmixed-plot-scales-and-custom-violinboxplot-68cc8c5d6ead&user=Madalina+Ciortan&userId=d576810f0222&source=post_page-d576810f0222----68cc8c5d6ead---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F68cc8c5d6ead&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmixed-plot-scales-and-custom-violinboxplot-68cc8c5d6ead&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F68cc8c5d6ead&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmixed-plot-scales-and-custom-violinboxplot-68cc8c5d6ead&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://github.com/ciortanmadalina/modality_tests/blob/master/violinboxplot_hybrid_axes.ipynb", "anchor_text": "Github"}, {"url": "https://github.com/ciortanmadalina/modality_tests/blob/master/violinboxplot_hybrid_axes.ipynb", "anchor_text": "github"}, {"url": "https://github.com/ciortanmadalina/modality_tests/blob/master/kernel_density.ipynb", "anchor_text": "https://github.com/ciortanmadalina/modality_tests/blob/master/kernel_density.ipynb"}, {"url": "https://medium.com/tag/data-science?source=post_page-----68cc8c5d6ead---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/matplotlib?source=post_page-----68cc8c5d6ead---------------matplotlib-----------------", "anchor_text": "Matplotlib"}, {"url": "https://medium.com/tag/visualization?source=post_page-----68cc8c5d6ead---------------visualization-----------------", "anchor_text": "Visualization"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F68cc8c5d6ead&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmixed-plot-scales-and-custom-violinboxplot-68cc8c5d6ead&user=Madalina+Ciortan&userId=d576810f0222&source=-----68cc8c5d6ead---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F68cc8c5d6ead&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmixed-plot-scales-and-custom-violinboxplot-68cc8c5d6ead&user=Madalina+Ciortan&userId=d576810f0222&source=-----68cc8c5d6ead---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F68cc8c5d6ead&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmixed-plot-scales-and-custom-violinboxplot-68cc8c5d6ead&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----68cc8c5d6ead--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F68cc8c5d6ead&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmixed-plot-scales-and-custom-violinboxplot-68cc8c5d6ead&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----68cc8c5d6ead---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----68cc8c5d6ead--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----68cc8c5d6ead--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----68cc8c5d6ead--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----68cc8c5d6ead--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----68cc8c5d6ead--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----68cc8c5d6ead--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----68cc8c5d6ead--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----68cc8c5d6ead--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@ciortanmadalina?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@ciortanmadalina?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Madalina Ciortan"}, {"url": "https://medium.com/@ciortanmadalina/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "430 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fd576810f0222&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmixed-plot-scales-and-custom-violinboxplot-68cc8c5d6ead&user=Madalina+Ciortan&userId=d576810f0222&source=post_page-d576810f0222--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F106cca081d9d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmixed-plot-scales-and-custom-violinboxplot-68cc8c5d6ead&newsletterV3=d576810f0222&newsletterV3Id=106cca081d9d&user=Madalina+Ciortan&userId=d576810f0222&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}