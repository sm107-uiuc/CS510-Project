{"url": "https://towardsdatascience.com/parallel-web-scraping-and-api-connection-a-way-to-save-lots-of-time-part-i-r-bf740f6cfbd0", "time": 1683005430.083661, "path": "towardsdatascience.com/parallel-web-scraping-and-api-connection-a-way-to-save-lots-of-time-part-i-r-bf740f6cfbd0/", "webpage": {"metadata": {"title": "Parallel API connections in R. A way to save lots of time | by Diego Amen\u00e1bar | Towards Data Science", "h1": "Parallel API connections in R", "description": "Creating a new dataset is part of the challenges Data Scientists and Analysts have today. One popular way of creating your dataset is to surf the web and gather information from different web sites\u2026"}, "outgoing_paragraph_urls": [{"url": "http://www.omdbapi.com/", "anchor_text": "OMDB API", "paragraph_index": 2}, {"url": "https://github.com/gody/ParallelScraping", "anchor_text": "GitHub link", "paragraph_index": 15}, {"url": "http://www.healthy-analyst.com", "anchor_text": "www.healthy-analyst.com", "paragraph_index": 17}], "all_paragraphs": ["Creating a new dataset is part of the challenges Data Scientists and Analysts have today. One popular way of creating your dataset is to surf the web and gather information from different web sites for your needs. But as you may know, this is time-consuming, so speeding up this process without the use of multiple VM or clusters is nice to have as part of your Data Scientist Toolset. Here we are going to dig deep into how to do parallel APIs connections using R.", "This is a simple guide on how to use parallel computing. The idea is that each thread/worker/core of your computer uses a different connection to access the web, therefore, you don\u2019t need to wait for an API response or the loading of a dynamic website to start scraping another. Just adding simple commands to your code and wrapping it in a smart way you can speed up saving lots of time in the process.", "We are going to start by using R and an API connection in parallel. This will allow us to download information more efficiently, think of this as opening multiple tabs in your web browser. For our example, we are going to use the OMDB API. This API gives you access to a lot of information about movies, for our test, we used the Poster API, to download movie posters and save them locally so we can process them later.", "The first step is to load all the required libraries. For parallel setup on our code, we are going to use, future. This library sets the parallel method we are going to use. For the parallel functions, we choose, furr package. This package is the future version of the purrr package.", "Second, we need to create a new function. This function will be where we do our API connection and download. Here we can change the API connection code to a web scraping code.", "For our purpose of showing how to do it, the function will just open a curl connection with the Poster API, and download an image to a new directory called images.", "One of the differences between using parallel connections and classic parallel processing is that you are almost certain that your code is able to run in parallel as normally connections are independent by nature.", "Finally, we need to run our previously created function on our list of links. To achieve this, we use future_map, a parallel version of the map function. This is where the parallel connection happens.", "IMPORTANT: For our code to know that it needs to run in parallel, we need to tell it how to do it and how many different cores it should use. There are 2 functions from the future library that allows us to do this: availableCores() & plan(). The first one reads the information on how many cores our computer has, and the second one tells the code how many cores and how to parallelize the future functions.", "It is always a good practice to left a free core for other computer processes that are not part of your code.", "Using the previously defined code, we will run a small test to see how these parallel connections improve the speed of our download. For this test we use 4 different configurations:", "The cores numbers were selected based on an 8 cores machine leaving at least 1 core free.", "For the test, we run every configuration in 3 different scenarios to check how the volume impacts the performance. These scenarios are based on the number of movie posters we are going to download (500, 1000, 2500). In each scenario, we run it 5 times and take the average time it took to download all the movies.", "The results are shown in the graph below.", "The test shows us that using parallel computing for accessing information from the web can be a great addition to our toolkit. There is a lot of time that as data scientist we have projects regarding accessing APIs to access the information and this is a way to speed up this process. Even if the process is not that bulky, the improvement is substantial.", "You can access the code for the experiment in this GitHub link.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Long time data lover. Parent of 2. Looking for new quests and challenges. The data behind the healthy-analyst (www.healthy-analyst.com)"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fbf740f6cfbd0&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fparallel-web-scraping-and-api-connection-a-way-to-save-lots-of-time-part-i-r-bf740f6cfbd0&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fparallel-web-scraping-and-api-connection-a-way-to-save-lots-of-time-part-i-r-bf740f6cfbd0&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fparallel-web-scraping-and-api-connection-a-way-to-save-lots-of-time-part-i-r-bf740f6cfbd0&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fparallel-web-scraping-and-api-connection-a-way-to-save-lots-of-time-part-i-r-bf740f6cfbd0&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----bf740f6cfbd0--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----bf740f6cfbd0--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@diegoamenbar?source=post_page-----bf740f6cfbd0--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@diegoamenbar?source=post_page-----bf740f6cfbd0--------------------------------", "anchor_text": "Diego Amen\u00e1bar"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fc0af2efc9d91&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fparallel-web-scraping-and-api-connection-a-way-to-save-lots-of-time-part-i-r-bf740f6cfbd0&user=Diego+Amen%C3%A1bar&userId=c0af2efc9d91&source=post_page-c0af2efc9d91----bf740f6cfbd0---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fbf740f6cfbd0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fparallel-web-scraping-and-api-connection-a-way-to-save-lots-of-time-part-i-r-bf740f6cfbd0&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fbf740f6cfbd0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fparallel-web-scraping-and-api-connection-a-way-to-save-lots-of-time-part-i-r-bf740f6cfbd0&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "http://www.omdbapi.com/", "anchor_text": "OMDB API"}, {"url": "http://img.omdbapi.com/?apikey=9c9e16a&i=tt'", "anchor_text": "http://img.omdbapi.com/?apikey=[your-own-api-key]'"}, {"url": "https://github.com/gody/ParallelScraping", "anchor_text": "GitHub link"}, {"url": "https://medium.com/tag/parallel-processing?source=post_page-----bf740f6cfbd0---------------parallel_processing-----------------", "anchor_text": "Parallel Processing"}, {"url": "https://medium.com/tag/scraping?source=post_page-----bf740f6cfbd0---------------scraping-----------------", "anchor_text": "Scraping"}, {"url": "https://medium.com/tag/r?source=post_page-----bf740f6cfbd0---------------r-----------------", "anchor_text": "R"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fbf740f6cfbd0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fparallel-web-scraping-and-api-connection-a-way-to-save-lots-of-time-part-i-r-bf740f6cfbd0&user=Diego+Amen%C3%A1bar&userId=c0af2efc9d91&source=-----bf740f6cfbd0---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fbf740f6cfbd0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fparallel-web-scraping-and-api-connection-a-way-to-save-lots-of-time-part-i-r-bf740f6cfbd0&user=Diego+Amen%C3%A1bar&userId=c0af2efc9d91&source=-----bf740f6cfbd0---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fbf740f6cfbd0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fparallel-web-scraping-and-api-connection-a-way-to-save-lots-of-time-part-i-r-bf740f6cfbd0&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----bf740f6cfbd0--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fbf740f6cfbd0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fparallel-web-scraping-and-api-connection-a-way-to-save-lots-of-time-part-i-r-bf740f6cfbd0&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----bf740f6cfbd0---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----bf740f6cfbd0--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----bf740f6cfbd0--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----bf740f6cfbd0--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----bf740f6cfbd0--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----bf740f6cfbd0--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----bf740f6cfbd0--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----bf740f6cfbd0--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----bf740f6cfbd0--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@diegoamenbar?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@diegoamenbar?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Diego Amen\u00e1bar"}, {"url": "https://medium.com/@diegoamenbar/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "31 Followers"}, {"url": "http://www.healthy-analyst.com", "anchor_text": "www.healthy-analyst.com"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fc0af2efc9d91&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fparallel-web-scraping-and-api-connection-a-way-to-save-lots-of-time-part-i-r-bf740f6cfbd0&user=Diego+Amen%C3%A1bar&userId=c0af2efc9d91&source=post_page-c0af2efc9d91--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fusers%2Fc0af2efc9d91%2Flazily-enable-writer-subscription&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fparallel-web-scraping-and-api-connection-a-way-to-save-lots-of-time-part-i-r-bf740f6cfbd0&user=Diego+Amen%C3%A1bar&userId=c0af2efc9d91&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}