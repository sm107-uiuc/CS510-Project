{"url": "https://towardsdatascience.com/a-beginners-guide-to-accessing-data-with-web-apis-using-python-23d262181467", "time": 1683011744.836211, "path": "towardsdatascience.com/a-beginners-guide-to-accessing-data-with-web-apis-using-python-23d262181467/", "webpage": {"metadata": {"title": "A Beginner\u2019s Guide to Accessing Data with Web APIs (using Python) | by Cuthbert Chow | Towards Data Science", "h1": "A Beginner\u2019s Guide to Accessing Data with Web APIs (using Python)", "description": "If you have ever spent any time programming, doing data science or web development, chances are that you have come across the term \u201cAPI\u201d. Even to a complete layperson, the term may ring a bell\u2026"}, "outgoing_paragraph_urls": [{"url": "https://developer.spotify.com/documentation/web-api/", "anchor_text": "Spotify API", "paragraph_index": 3}, {"url": "https://developer.spotify.com/documentation/web-api/", "anchor_text": "Spotify\u2019s API", "paragraph_index": 4}, {"url": "https://ifttt.com/", "anchor_text": "IFTTT.com", "paragraph_index": 4}, {"url": "https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods", "anchor_text": "look here.", "paragraph_index": 6}, {"url": "https://www.reddit.com/dev/api", "anchor_text": "official documentation", "paragraph_index": 10}, {"url": "https://www.reddit.com/r/funny/top.json", "anchor_text": "https://www.reddit.com/r/{subreddit_name}/top.json", "paragraph_index": 11}, {"url": "https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers", "anchor_text": "at this link", "paragraph_index": 16}, {"url": "https://rapidapi.com/blog/most-popular-api/", "anchor_text": "this link", "paragraph_index": 20}, {"url": "https://stats.nba.com/player/1628386/", "anchor_text": "this one,", "paragraph_index": 21}, {"url": "https://stats.nba.com/stats/playerdashboardbyyearoveryear", "anchor_text": "https://stats.nba.com/stats/playerdashboardbyyearoveryear", "paragraph_index": 24}, {"url": "https://github.com/swar/nba_api/tree/master/nba_api/stats/endpoints", "anchor_text": "endpoints and parameters for us", "paragraph_index": 25}], "all_paragraphs": ["If you have ever spent any time programming, doing data science or web development, chances are that you have come across the term \u201cAPI\u201d. Even to a complete layperson, the term may ring a bell. Regardless of whether you are acquainted with the concept, you interact with APIs on a daily basis, as they have become ubiquitous in recent years, and facilitate many of the platforms and services which you may find indispensable.", "By literal definition, an API is an Application Programming Interface. It is a medium through which different applications can communicate with one another programatically.", "To give a concrete example, consider the process of logging into an app such as Medium. You are given the option to login using Google or Facebook. In this instance, the Medium app is getting access to your Google or Facebook user data through an API developed by those companies. Such API\u2019s are widely used by numerous apps and platforms, which reduces development time for the app creators, and augments ease of use for the end-users.", "APIs are also helpful to data scientists because they are a straightforward avenue for accessing large amounts of structured data from various services and platforms. For instance, the TMDB API allows users to find information about films and shows, and the Spotify API gives you in-depth information about their songs (such as \u201cdanceability\u201d and \u201cvalence\u201d) which you would be hard-pressed to find by other means.", "There are numerous other interesting things which you can do or automate with APIs, which are outside the scope of this article. For instance, you can use Spotify\u2019s API to programatically control the music playing on your account. You can even connect multiple API\u2019s together and have them work together in concert. The website IFTTT.com allows you to chain together APIs in order to create applets which are triggered based on certain conditions. For instance, you can get your Phillips Hue bulbs to change colour when you receive a new Twitter notification, by combining the APIs of the respective products.", "In order to make use of web APIs, we have to make what is known as a \u2018request\u2019. Such a request will be made through the HTTP protocol. A request is essentially a communication between you and a remote server, in which you communicate what you are trying to achieve (eg. acquire some data or create a new blog post). Having received the request, the server then processes your request, and provides a response, as well as performs any additional processes in the backend, which are generally opaque to the end user.", "There are various types of HTTP requests, but for the purposes of this article, I\u2019m going to focus on the \u201cGET request\u201d, since our aim is to use API to get useful data. If you want more information on the other types of requests, you can take a look here.", "Generally, a request will include the following components:", "In broad terms, when we make a request, we have to direct it to a certain location. The location, or \u2018endpoint\u2019, will be determined by what we are trying to do, or what information we are requesting. As we make the request, we can pass along a collection of parameters, which increase the specificity of the request, as well as some headers, which will be explained later. The server will then (hopefully) provide a response (usually in JSON form) and a response code (which indicates whether the request was successful).", "To best illustrate the process in action, I\u2019m going to walk through a simple exercise using the Reddit API and Python.", "The Reddit API was created and is maintained officially by Reddit, and allows you to do anything you would be able to on the site normally, such as browse top posts, write comments and submit new submissions. For our purposes today, we are going to be using the API to determine the top 5 posts of any given subreddit, as well as some metadata relating to each individual post. As is always the case when using a new tool, it would be helpful to take a glance at the official documentation before diving in to the programming.", "The first thing we need to determine is the endpoint, which essentially defines what exactly we are trying to request. In this case, the endpoint we want is \u2018https://www.reddit.com/r/{subreddit_name}/top.json\u2019, since this will return the top posts belonging a given subreddit. I found this endpoint by browsing the documentation, and selecting the one which fit my needs. We can actually view this URL in our browser, and see that the response body looks like. By default, we get a large jumble of text which is relatively hard to decipher. I would highly recommend installing a JSON parser such as JSONViewer for Chrome which helps clean up the JSON and makes it much more accessible.", "(JSON is a data storage format, which stands for Javascript Object Notation, although it is not exclusive to Javascript. Essentially, it\u2019s a long string containing a series of key-value pairs, similar to a Python dictionary. When transferring data across the web, JSON is more often than not the medium of choice)", "What we see is that under the property \u201cchildren\u201d, we get a list of posts. Each post here is one of the top posts from the given subreddit. Within the data for each post, we can find further metadata about the post, such as \u201cgilded\u201d, which indicates whether the post had been given \u201cgold\u201d in the Reddit parlance, \u201ctitle\u201d, which is the title of the post, and \u201cups\u201d, which indicates the number of upvotes received.", "Now we want to be able to make this request using Python, and to print the data we want to see.", "First, we want to define the parameters of our request. You can think of parameters like \u2018filters\u2019, which modify the scope of our request. To determine which parameters an endpoint can take, take a look at the API\u2019s documentation, as it will also specify any other restraints/formatting requirements. In our case, we set the \u2018limit\u2019 parameter to 5, meaning we will only get 5 results in the response. We also set the \u2018t\u2019 parameter to \u2018all\u2019, meaning we want to see the top posts from all time. We package all the parameters into a dictionary named \u2018payload\u2019.", "Next, we define a similar dictionary for our request headers. HTTP headers essentially allow you to pass additional information along to the server about your request. For our case, we wont mess around with the headers much, but you can read more about them at this link. However, it is best to define a user-agent, which can be whatever you wish. This is to avoid using the requests module\u2019s default user agent, since many other people may be using the same one, and thus may get you blocked as it will believe you are making excessive requests.", "Once we have the headers and parameters, we can make a request (using the requests module) to the given endpoint, whilst passing along the headers and parameters using the appropriate keyword arguments, and storing the response in a variable named \u2018r\u2019. Since the response is in JSON, we want to convert it into a python dictionary so we can more easily manipulate the data. We can use the built in json module in order to parse the response contents.", "Now we are left with a dictionary with all of the JSON response data. What we can do now is print some of the metadata from each post", "Obviously, this is a very simple example. But by the same principles, you can very quickly access a huge trove of data, and store them in a Pandas Dataframe or export the data as a csv for future analysis.", "There is an abundance of functional, useful and well documented APIs out there for your usage. You can view some of the most popular ones at this link. However, sometimes websites will use APIs for their own internal usage, but not for external users. One example of this is the NBA Stats Website.", "When you view a page on their website, such as this one, you get a bunch of statistics relating to an NBA player. One way you could access this data is by writing a web scraper, but that is a more time consuming and brittle solution.", "However, if you open up the developer tools (in Chrome: View \u2192 Developer \u2192 Developer Tools), go to the Network tab (XHR), and then refresh the page, what you will see is that the website is making a series of API calls in order to populate the page with the relevant data.", "One of the requests was as follows:", "What you see is essentially the same endpoint + parameters format we were using for the Reddit example. An API call was made by the site to https://stats.nba.com/stats/playerdashboardbyyearoveryear, and then a bunch of parameters were passed in (although they were mostly left blank, besides the PlayerID and Season).", "Once you have found these API calls, you can try writing your own requests by varying the parameters. The drawback of this method however is that you will need to discover all the endpoints and parameters yourself. Fortunately, at least for the NBA stats website, various online users have already documented the endpoints and parameters for us.", "Generally, you want to adhere to several best practices. Try not to make excessive requests to an API, as doing so may slow down the service, and result in yourself being blocked. Generally, try to make fewer than 1 request per second.", "Furthermore, it is generally best to set a descriptive and relevant user-agent header, in order that the API host can determine where problems may be originating, and understand who their service is being used by.", "In summary, the use of APIs to acquire data is an indispensable tool in a data scientist\u2019s toolbox. Mastering them gives you access to a huge trove of online data, enabling you to utilise more varied data and facilitating more sophisticated analysis. I hope this article was helpful to you, and that you have fun writing your own requests!", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Self-taught data scientist and university student from Hong Kong, residing in Vancouver, using data to tell stories and change minds"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F23d262181467&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-beginners-guide-to-accessing-data-with-web-apis-using-python-23d262181467&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-beginners-guide-to-accessing-data-with-web-apis-using-python-23d262181467&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-beginners-guide-to-accessing-data-with-web-apis-using-python-23d262181467&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-beginners-guide-to-accessing-data-with-web-apis-using-python-23d262181467&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----23d262181467--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----23d262181467--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://cuthbertchow.medium.com/?source=post_page-----23d262181467--------------------------------", "anchor_text": ""}, {"url": "https://cuthbertchow.medium.com/?source=post_page-----23d262181467--------------------------------", "anchor_text": "Cuthbert Chow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fbff07afa23c2&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-beginners-guide-to-accessing-data-with-web-apis-using-python-23d262181467&user=Cuthbert+Chow&userId=bff07afa23c2&source=post_page-bff07afa23c2----23d262181467---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F23d262181467&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-beginners-guide-to-accessing-data-with-web-apis-using-python-23d262181467&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F23d262181467&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-beginners-guide-to-accessing-data-with-web-apis-using-python-23d262181467&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@wasdrew?utm_source=medium&utm_medium=referral", "anchor_text": "Andras Vas"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://developer.spotify.com/documentation/web-api/", "anchor_text": "Spotify API"}, {"url": "https://developer.spotify.com/documentation/web-api/", "anchor_text": "Spotify\u2019s API"}, {"url": "https://ifttt.com/", "anchor_text": "IFTTT.com"}, {"url": "https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods", "anchor_text": "look here."}, {"url": "https://www.reddit.com/dev/api", "anchor_text": "official documentation"}, {"url": "https://www.reddit.com/r/funny/top.json", "anchor_text": "https://www.reddit.com/r/{subreddit_name}/top.json"}, {"url": "https://www.reddit.com/r/funny/top.json'", "anchor_text": "https://www.reddit.com/r/funny/top.json'"}, {"url": "https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers", "anchor_text": "at this link"}, {"url": "https://rapidapi.com/blog/most-popular-api/", "anchor_text": "this link"}, {"url": "https://stats.nba.com/player/1628386/", "anchor_text": "this one,"}, {"url": "https://stats.nba.com/stats/playerdashboardbyyearoveryear?DateFrom=&DateTo=&GameSegment=&LastNGames=0&LeagueID=00&Location=&MeasureType=Base&Month=0&OpponentTeamID=0&Outcome=&PORound=0&PaceAdjust=N&PerMode=PerGame&Period=0&PlayerID=1628386&PlusMinus=N&Rank=N&Season=2019-20&SeasonSegment=&SeasonType=Regular+Season&ShotClockRange=&Split=yoy&VsConference=&VsDivision=", "anchor_text": "https://stats.nba.com/stats/playerdashboardbyyearoveryear?DateFrom=&DateTo=&GameSegment=&LastNGames=0&LeagueID=00&Location=&MeasureType=Base&Month=0&OpponentTeamID=0&Outcome=&PORound=0&PaceAdjust=N&PerMode=PerGame&Period=0&PlayerID=1628386&PlusMinus=N&Rank=N&Season=2019-20&SeasonSegment=&SeasonType=Regular+Season&ShotClockRange=&Split=yoy&VsConference=&VsDivision="}, {"url": "https://stats.nba.com/stats/playerdashboardbyyearoveryear", "anchor_text": "https://stats.nba.com/stats/playerdashboardbyyearoveryear"}, {"url": "https://github.com/swar/nba_api/tree/master/nba_api/stats/endpoints", "anchor_text": "endpoints and parameters for us"}, {"url": "https://medium.com/tag/python?source=post_page-----23d262181467---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/api?source=post_page-----23d262181467---------------api-----------------", "anchor_text": "API"}, {"url": "https://medium.com/tag/data-science?source=post_page-----23d262181467---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/data?source=post_page-----23d262181467---------------data-----------------", "anchor_text": "Data"}, {"url": "https://medium.com/tag/web-development?source=post_page-----23d262181467---------------web_development-----------------", "anchor_text": "Web Development"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F23d262181467&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-beginners-guide-to-accessing-data-with-web-apis-using-python-23d262181467&user=Cuthbert+Chow&userId=bff07afa23c2&source=-----23d262181467---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F23d262181467&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-beginners-guide-to-accessing-data-with-web-apis-using-python-23d262181467&user=Cuthbert+Chow&userId=bff07afa23c2&source=-----23d262181467---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F23d262181467&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-beginners-guide-to-accessing-data-with-web-apis-using-python-23d262181467&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----23d262181467--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F23d262181467&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-beginners-guide-to-accessing-data-with-web-apis-using-python-23d262181467&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----23d262181467---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----23d262181467--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----23d262181467--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----23d262181467--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----23d262181467--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----23d262181467--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----23d262181467--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----23d262181467--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----23d262181467--------------------------------", "anchor_text": ""}, {"url": "https://cuthbertchow.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://cuthbertchow.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Cuthbert Chow"}, {"url": "https://cuthbertchow.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "120 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fbff07afa23c2&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-beginners-guide-to-accessing-data-with-web-apis-using-python-23d262181467&user=Cuthbert+Chow&userId=bff07afa23c2&source=post_page-bff07afa23c2--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fe0b347b71453&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-beginners-guide-to-accessing-data-with-web-apis-using-python-23d262181467&newsletterV3=bff07afa23c2&newsletterV3Id=e0b347b71453&user=Cuthbert+Chow&userId=bff07afa23c2&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}