{"url": "https://towardsdatascience.com/how-to-calculate-poker-probabilities-in-python-75238c61421e", "time": 1683006891.9978619, "path": "towardsdatascience.com/how-to-calculate-poker-probabilities-in-python-75238c61421e/", "webpage": {"metadata": {"title": "How to Calculate Poker Probabilities in Python | by Th\u00e1rsis Souza, PhD | Towards Data Science", "h1": "How to Calculate Poker Probabilities in Python", "description": "In this article, we show how to represent basic poker elements in Python, e.g., Hands and Combos, and how to calculate poker odds, i.e., likelihood of win/tie/lose in No-Limit Texas Hold\u2019em. We will\u2026"}, "outgoing_paragraph_urls": [{"url": "https://poker.readthedocs.io/en/latest/index.html", "anchor_text": "poker", "paragraph_index": 2}, {"url": "https://github.com/ktseng/holdem_calc", "anchor_text": "Kevin Tseng", "paragraph_index": 2}, {"url": "https://github.com/souzatharsis/holdem_calc", "anchor_text": "repo", "paragraph_index": 2}, {"url": "https://github.com/souzatharsis/holdem_calc", "anchor_text": "repo", "paragraph_index": 34}], "all_paragraphs": ["In this article, we show how to represent basic poker elements in Python, e.g., Hands and Combos, and how to calculate poker odds, i.e., likelihood of win/tie/lose in No-Limit Texas Hold\u2019em.", "We provide a practical analysis based on a real story in a Night at the Venetian in Las Vegas.", "We will use the package poker to represent hands, combos and ranges. I have extended the poker odds calculator from Kevin Tseng, so it is able to calculate poker probabilities based on ranges (set of possible hands) in addition to individual hands. The final code is available in my repo.", "I was dealt with King of Spades and Jack of Clubs (K \u2660J \u2663). I will use the Class Combo from poker.hand to construct my hand.", "I do not remember exactly what happened pre-flop and what my position was. However, I do remember there was a raise pre-flop and only two players were left post-flop: myself and the villain.", "We are now heads-up. The flop comes Queen of Clubs, Ten of Hearts and Nine of Spades. Yes, I flopped a Straight!", "Let\u2019s calculate my odds post-flop assuming no prior knowledge about the villain's cards, i.e., we will compute how likely my hand is to win against a random pair of hole cards given the flop.", "The function calculate_odds_villan from holdem_calc calculates the probability that a certain Texas Hold\u2019em hand will win. This probability is approximated by running a Monte Carlo method or calculated exactly by simulating the set of all possible hands. Calculating exact odds post-flop is fast so we won\u2019t need Monte Carlo approximations here. Here\u2019s our odds:", "At this point I\u2019m feeling pretty good. Against a random hand, I only have a 2.77% chance to lose and over 93% chance to win. However, that\u2019s optimistic.", "Given that there was a raise pre-flop and only myself and the villain were left post-flop, it\u2019s likely the villain has something, right? We call this likely set of hands a range. This is an inference we make based on several factors including villain's behavior, position, bet size etc. This inference leads to a set of combos of hands we assume the villain might have. At this point, I was thinking the villain had:", "We can represent this range using the Class Range as below:", "This brings our villain's hand combos down to 144 combinations from a total of 51*52\u20131 = 2651 possible hands. Let\u2019s calculate my odds now assuming ranges for the villain.", "Given the assumed ranges, my winning odds dropped from a 93% to 80%. However, I still have a very low probability of losing of 8.2%. At this point, I\u2019m pretty comfortable. But should I bet? I definitively want the villain to continue playing and not fold yet. But how likely is he of having a good hand post-flop? Let\u2019s see what are the odds of him making a hand if we continued playing until the end.", "If we continue playing until the river, the villain has a good chance of making a Pair (36%) or even Two Pair (23%). He has a nice probability of hitting a Straight (18%) or even making a Set (9.7%) or a Full House (4%). As the villain has a good chance of having a reasonable hand, I then decide to bet high, about 2/3 of the pot. The villain tanks and finally calls.", "The turn comes and it\u2019s a deuce of diamonds (2 \u2666). Basically, it\u2019s a blank card, i.e., it does not change much our game.", "Assuming random cards for the villain, I am now with 96% odds of winning.", "However, considering my assumed ranges for the villain, my winning odds are now 86% up from 80% in the flop. I bet high again, the villain calls and here comes the river.", "King of Clubs is the river (K \u2663). A King in the river makes a Straight much more likely for the villain to hold. So this is bad news for me.", "Now, my winning odds dropped from 96% to about 87% against random cards. But I\u2019m still losing only with a very low probability of 1.2%. OK, the bad river is not that bad, right?", "Well, there is one additional factor. The villain called my big bets both in the flop and in the river. He might have something better than I thought\u2026 right? I should then adjust my assumed ranges.", "Now, I\u2019m thinking the villain no longer has 77\u2019s or 88\u2019s combos, otherwise he would not go that far given my high bets. I am thinking he might have a pair of 99\u2019s or better to make sets with 99\u2019s, 10\u2019s or QQ\u2019s. He might also have JJ\u2019s for a mid-pair and straight-draw. Or KK\u2019s and AA\u2019s which would be top pairs until the turn. I decided to keep the Ace Ten or better and the King Jack or better combos because of something called implied odds. Implied odds is an estimation on how much money you can win from the bet if you hit one of your outs. So the villain might be sticky waiting to hit a draw (which he might have just hit now??). Hence, I define my villain's updated range as follows:", "Now the villain's combos are 132 down from 144. Let\u2019s calculate the updated odds.", "I now have a 72% chance to win (down from 86%) and my chances or losing have increased from 3.7% to 16% compared to our range analysis during the turn. I decide to check and the villain goes all-in, betting roughly 70% of the pot.", "A basic and standard river strategy tells you the following:", "From the odds histogram, we can group the villain's possible hands in 3 types:", "The villain's all-in makes sense, his mid-strength hand probability is too low to check. So here I\u2019m thinking he is either bluffing, for instance due to a missed draw, or he has the nuts, and this is a value bet. This basic strategy of either bluffing if you have your weakest holdings or value-betting if you have a strong holding is sometimes called a polarized bet. That\u2019s what the villain is doing here.", "Looking back at the probabilities per type (bluff, mid-strength hand, value-bet), I basically should win at least 60.66% of the time and this is a conservative measure as the villain might be value betting a three of a kind. But should I call?", "Here comes another concept called pot odds. Pot odds refers to the price of calling a bet relative to the size of the pot. In summary, I should call if my probability of winning the pot is higher than the ratio between the price to call and the size of the pot after my call. Let\u2019s do some math:", "My chance to win is at least double the pot odds. Hence, I proceed to call. The result? The villain turns his cards. The table once quiet makes a collective \u2018wow\u2019 while staring at the Ace Jack on the table making a Straight over Straight situation and leaving the villain with all of my chips.", "In this article, I showed how to represent basic poker elements (e.g. Hands and Combos) and how to calculate poker odds assuming random hands as well as ranges in Python while telling a true history of a night at the Venetian.", "We showed how exciting (and probabilistically interesting) poker can be. Below, I show how my winning odds changed from flop to turn and then river assuming random cards for the villain as well as inferring ranges.", "We observe that I was a major favorite of winning this heads-up hand even though the final result was not in my favor. That\u2019s why poker players say", "you should focus on the decisions you make not on the results you have.", "Of course, all the analysis in this article assumed some ranges and basic poker strategies that formed my mental model at the time of playing and here implemented in Python. I\u2019m no Poker Pro and there are many ways to go about this hand. I believe I have made several mistakes, for instance, underestimating the chances of the villain holding AJ given the pre-flop raise.", "I would be very curious how others would have analyzed this hand using the Python framework utilized here. Feel free to go ahead and fork the repo.", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F75238c61421e&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-calculate-poker-probabilities-in-python-75238c61421e&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-calculate-poker-probabilities-in-python-75238c61421e&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-calculate-poker-probabilities-in-python-75238c61421e&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-calculate-poker-probabilities-in-python-75238c61421e&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----75238c61421e--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----75238c61421e--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@souzatharsis?source=post_page-----75238c61421e--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@souzatharsis?source=post_page-----75238c61421e--------------------------------", "anchor_text": "Th\u00e1rsis Souza, PhD"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F88dd71d1ffe2&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-calculate-poker-probabilities-in-python-75238c61421e&user=Th%C3%A1rsis+Souza%2C+PhD&userId=88dd71d1ffe2&source=post_page-88dd71d1ffe2----75238c61421e---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F75238c61421e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-calculate-poker-probabilities-in-python-75238c61421e&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F75238c61421e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-calculate-poker-probabilities-in-python-75238c61421e&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://poker.readthedocs.io/en/latest/index.html", "anchor_text": "poker"}, {"url": "https://github.com/ktseng/holdem_calc", "anchor_text": "Kevin Tseng"}, {"url": "https://github.com/souzatharsis/holdem_calc", "anchor_text": "repo"}, {"url": "https://github.com/souzatharsis/holdem_calc", "anchor_text": "repo"}, {"url": "https://medium.com/tag/poker?source=post_page-----75238c61421e---------------poker-----------------", "anchor_text": "Poker"}, {"url": "https://medium.com/tag/python?source=post_page-----75238c61421e---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/data-science?source=post_page-----75238c61421e---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/probability?source=post_page-----75238c61421e---------------probability-----------------", "anchor_text": "Probability"}, {"url": "https://medium.com/tag/las-vegas?source=post_page-----75238c61421e---------------las_vegas-----------------", "anchor_text": "Las Vegas"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F75238c61421e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-calculate-poker-probabilities-in-python-75238c61421e&user=Th%C3%A1rsis+Souza%2C+PhD&userId=88dd71d1ffe2&source=-----75238c61421e---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F75238c61421e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-calculate-poker-probabilities-in-python-75238c61421e&user=Th%C3%A1rsis+Souza%2C+PhD&userId=88dd71d1ffe2&source=-----75238c61421e---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F75238c61421e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-calculate-poker-probabilities-in-python-75238c61421e&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----75238c61421e--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F75238c61421e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-calculate-poker-probabilities-in-python-75238c61421e&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----75238c61421e---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----75238c61421e--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----75238c61421e--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----75238c61421e--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----75238c61421e--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----75238c61421e--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----75238c61421e--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----75238c61421e--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----75238c61421e--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@souzatharsis?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@souzatharsis?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Th\u00e1rsis Souza, PhD"}, {"url": "https://medium.com/@souzatharsis/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "416 Followers"}, {"url": "http://www.souzatharsis.com", "anchor_text": "www.souzatharsis.com"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F88dd71d1ffe2&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-calculate-poker-probabilities-in-python-75238c61421e&user=Th%C3%A1rsis+Souza%2C+PhD&userId=88dd71d1ffe2&source=post_page-88dd71d1ffe2--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fde2644c594b1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-calculate-poker-probabilities-in-python-75238c61421e&newsletterV3=88dd71d1ffe2&newsletterV3Id=de2644c594b1&user=Th%C3%A1rsis+Souza%2C+PhD&userId=88dd71d1ffe2&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}