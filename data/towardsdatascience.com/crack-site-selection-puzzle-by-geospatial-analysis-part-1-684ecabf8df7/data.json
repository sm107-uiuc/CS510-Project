{"url": "https://towardsdatascience.com/crack-site-selection-puzzle-by-geospatial-analysis-part-1-684ecabf8df7", "time": 1683005746.0945458, "path": "towardsdatascience.com/crack-site-selection-puzzle-by-geospatial-analysis-part-1-684ecabf8df7/", "webpage": {"metadata": {"title": "Crack Site Selection Puzzle by Geospatial Analysis (Part 1) | by Wang Shenghao | Towards Data Science", "h1": "Crack Site Selection Puzzle by Geospatial Analysis (Part 1)", "description": "Site selection is a popular topic in the consulting industry. In this blog, I am introducing a novel solution backed by open source OpenStreetMap dataset and QGIS. Hope this case study can bring some\u2026"}, "outgoing_paragraph_urls": [{"url": "https://download.geofabrik.de/asia.html", "anchor_text": "OSM website", "paragraph_index": 4}, {"url": "https://pypi.org/project/Fiona/", "anchor_text": "Fiona", "paragraph_index": 4}, {"url": "https://pypi.org/project/pyshp/", "anchor_text": "PyShp", "paragraph_index": 4}, {"url": "https://pypi.org/project/Shapely/", "anchor_text": "Shapely", "paragraph_index": 4}, {"url": "https://geopandas.org/", "anchor_text": "GeoPandas", "paragraph_index": 4}, {"url": "https://penanginstitute.org/resources/key-penang-statistics/97-quarterly-penang-statistics/", "anchor_text": "Penang Institute", "paragraph_index": 6}, {"url": "https://github.com/scisco/area", "anchor_text": "API", "paragraph_index": 12}, {"url": "https://github.com/Shenghao1993/asiatique", "anchor_text": "GitHub", "paragraph_index": 24}, {"url": "https://www.linkedin.com/in/shenghao-wang-41172163/", "anchor_text": "LinkedIn", "paragraph_index": 24}], "all_paragraphs": ["Site selection is a popular topic in the consulting industry. In this blog, I am introducing a novel solution backed by open source OpenStreetMap dataset and QGIS. Hope this case study can bring some fresh ideas to the analysts and consultants who work on the site selection related projects.", "Suppose we have a client, who is a supermarket chain. They plan to build their retail stores in a new city, say Penang, Malaysia. They need to decide how many outlets to build as well as where they should locate them in order to maximise the profits. It will become a complicated problem if we attempt to develop the solution from the perspective of predictive modelling. Profit seems to be an appropriate target variable to predict. However, it would take tremendous efforts to determine the features to use and compile the feature set.", "The strategy I propose can be summarised with one sentence: \u201cfind out the locations with higher customer density and fewer competitors\u201d. With this idea in mind, the problem can be approached with the following 3 steps.1. Simulate the geographical distribution of the customers over the entire city.2. Acquire the geographical locations of the potential competitors in the city, including any other supermarket chains, and grocery stores.3. Propose locations of outlets according to the gap between the supply and demand in different areas.", "This blog will focus on the first part: simulation of customer distribution.", "Let\u2019s first take a look at the data we will be working on. OpenStreetMap (OSM) is a collaborative project, aiming to create an open source editable map of the world. The dataset contains the shape files of various types of infrastructure such as buildings, roads, railways in the target region. The dataset gets updated every few hours. In order to obtain the OSM dataset of Penang, I downloaded the package of shape files for Malaysia, Singapore, and Brunei from the OSM website. There are a few Python libraries that can be used to process the shape files with the .shp suffix: Fiona, PyShp, Shapely, GeoPandas, etc. In this work, PyShp is used to read the shapefile into a dataframe.", "One interesting feature I would like to highlight is the coords, which gives the latitude and longitude of the vertices of the buildings in clockwise order. It can be used to estimate the specific location of the buildings as well as their floor area.", "The other data in use is the estimated Penang population distributed by districts, provided by Penang Institute.", "Geographically Penang city is separated into Penang Island and Seberang Perai by the Penang Strait. The 5 districts of Penang can be visualised in the following map.", "Here we have an overview of the methodology before we dive into the implementation. The customer distribution can be simulated in the following steps.", "The solution makes sense with the following assumptions.", "The third assumption indicates that all the apartments share a same number of floors. It is introduced to simplify the problem since the building height information is missing in the OSM dataset.", "After the shape file is read into dataframe, we need to select the entries of the residential buildings of Penang. This can be achieved by filtering the dataframe by the building type and the centric geocode of the buildings. The centric geocode is calculated by taking the average of the latitude and longitude of all the vertices of a building. The boundaries of Penang city is declared with the following ranges of geocode.", "The floor area of buildings can be estimated based on the geocode of the buildings\u2019 vertices. Mapbox provides an API to calculate the area of a geojson polygon or multipolygon, which can be applied here.", "The exported data looks as follows.", "The ultimate goal of the project is to propose locations of supermarket outlets in the city. Therefore, we are going to create grids and analyse the demand and supply with respect to the individual grids. The locations of outlets will be proposed in the form of grids. QGIS is an open-source desktop geographic information system application. It is used for this purpose since it provides various map manipulation and visualisation functions. Import the OSM shape file to QGIS, and create the grids using the Create Grid function.", "The Grid extent in the above dialog box is used to define the area covered by the grids. We can take the \u201cUse Canvas Extent\u201d option to manually drag-select a rectangular area which covers Penang. The generated grid layer is shown as follows.", "In order to allocate the buildings and compute the gridwise population, we can export the boundaries information of the grids to a text file and a shape file from QGIS. The 4 boundaries of the grids are yielded in the left, top, right, and bottom columns, which follows EPSG:3857, a Spherical Mercator projection coordinate system popularized by web services such as Google and OSM. It will be converted to the normal latitude, longitude in the next step. The district column is added manually to label the parent district of the grids.", "At this step, we are going to allocate the residential buildings to the grids, according to the buildings\u2019 centric geocode and the boundaries of the grids. The coordinate systems of buildings and grids are synchronised before the allocation takes place.", "This is the final step of the simulation. We are going to compute the total floor area for each grid, and allocate the district population into grids based on the gridwise total floor area.", "The floor area needs to be computed separately for apartments and bungalows since they will be applied with different population densities.", "Then we can aggregate the floor area by district and estimate the population density for different districts. A uniform population density of 5 ppl / 100 m\u00b2 is assumed for the bungalows.", "Now let\u2019s compute the grid population based on the grid floor area, and we are done!", "We can export the grid population to a shape file and generate a heatmap of population distribution on QGIS.", "In Figure 10, the grid population increases along with the colour temperature (from no colour, yellow, orange, to red). It can be observed that the population of Penang is concentrated mainly along the Penang Strait, forming an X shape.", "Thanks for the read. The codebase is available on GitHub. Follow me up at Medium to be informed about my future blogs. I welcome feedback and constructive criticism and can be reached on LinkedIn.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Discover the world over data. Data Scientist, Singapore | Amateur photographer and chess fan"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F684ecabf8df7&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcrack-site-selection-puzzle-by-geospatial-analysis-part-1-684ecabf8df7&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcrack-site-selection-puzzle-by-geospatial-analysis-part-1-684ecabf8df7&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcrack-site-selection-puzzle-by-geospatial-analysis-part-1-684ecabf8df7&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcrack-site-selection-puzzle-by-geospatial-analysis-part-1-684ecabf8df7&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----684ecabf8df7--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----684ecabf8df7--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@wangshenghao1993?source=post_page-----684ecabf8df7--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@wangshenghao1993?source=post_page-----684ecabf8df7--------------------------------", "anchor_text": "Wang Shenghao"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F75535ec0f14c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcrack-site-selection-puzzle-by-geospatial-analysis-part-1-684ecabf8df7&user=Wang+Shenghao&userId=75535ec0f14c&source=post_page-75535ec0f14c----684ecabf8df7---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F684ecabf8df7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcrack-site-selection-puzzle-by-geospatial-analysis-part-1-684ecabf8df7&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F684ecabf8df7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcrack-site-selection-puzzle-by-geospatial-analysis-part-1-684ecabf8df7&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://download.geofabrik.de/asia.html", "anchor_text": "OSM website"}, {"url": "https://pypi.org/project/Fiona/", "anchor_text": "Fiona"}, {"url": "https://pypi.org/project/pyshp/", "anchor_text": "PyShp"}, {"url": "https://pypi.org/project/Shapely/", "anchor_text": "Shapely"}, {"url": "https://geopandas.org/", "anchor_text": "GeoPandas"}, {"url": "https://penanginstitute.org/resources/key-penang-statistics/97-quarterly-penang-statistics/", "anchor_text": "Penang Institute"}, {"url": "https://commons.wikimedia.org/wiki/File:Districts_of_Penang.jpg", "anchor_text": "Districts of Penang.jpgFrom Wikimedia Commons, the free media repositorycommons.wikimedia.org"}, {"url": "https://gist.github.com/Shenghao1993/3f48d6e4e7eb454543ff1145db3a3336#file-penang_residential_buildings-py", "anchor_text": "penang_residential_buildings.py"}, {"url": "https://github.com/scisco/area", "anchor_text": "API"}, {"url": "https://gist.github.com/Shenghao1993/b6c23dc26427dba3270199bdc3dd7e97#file-calc_floor_area-py", "anchor_text": "calc_floor_area.py"}, {"url": "https://gist.github.com/Shenghao1993/2374e685a20f21632b96e439e0d27ac0#file-penang_residential_buildings-csv", "anchor_text": "penang_residential_buildings.csv"}, {"url": "https://gist.github.com/Shenghao1993/438b350cc74df7274c6b54d02668a6ad#file-penang_grid_epsg3857_wgs84-csv", "anchor_text": "penang_grid_EPSG3857_WGS84.csv"}, {"url": "https://gist.github.com/Shenghao1993/cb488d5fd8eda647d8885fd3129775ad#file-allocate_buildings_to_grids-py", "anchor_text": "allocate_buildings_to_grids.py"}, {"url": "https://gist.github.com/Shenghao1993/fc043ad4fe38494773316818bfe5d311#file-calc_grid_floor_area-py", "anchor_text": "calc_grid_floor_area.py"}, {"url": "https://gist.github.com/Shenghao1993/8aad1a1115a3fc7628ff9df5ff0e1a7d#file-calc_district_pop_density-py", "anchor_text": "calc_district_pop_density.py"}, {"url": "https://gist.github.com/Shenghao1993/6446273db7711a945986408c9e10a7f7#file-calc_grid_population-py", "anchor_text": "calc_grid_population.py"}, {"url": "https://gist.github.com/Shenghao1993/d167415b89aa3d80c555288b9e77bec6#file-generate_grid_population_shape-py", "anchor_text": "generate_grid_population_shape.py"}, {"url": "https://github.com/Shenghao1993/asiatique", "anchor_text": "GitHub"}, {"url": "https://www.linkedin.com/in/shenghao-wang-41172163/", "anchor_text": "LinkedIn"}, {"url": "https://medium.com/tag/site-selection?source=post_page-----684ecabf8df7---------------site_selection-----------------", "anchor_text": "Site Selection"}, {"url": "https://medium.com/tag/python?source=post_page-----684ecabf8df7---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/qgis?source=post_page-----684ecabf8df7---------------qgis-----------------", "anchor_text": "Qgis"}, {"url": "https://medium.com/tag/geospatial-analytics?source=post_page-----684ecabf8df7---------------geospatial_analytics-----------------", "anchor_text": "Geospatial Analytics"}, {"url": "https://medium.com/tag/openstreetmap?source=post_page-----684ecabf8df7---------------openstreetmap-----------------", "anchor_text": "Openstreetmap"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F684ecabf8df7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcrack-site-selection-puzzle-by-geospatial-analysis-part-1-684ecabf8df7&user=Wang+Shenghao&userId=75535ec0f14c&source=-----684ecabf8df7---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F684ecabf8df7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcrack-site-selection-puzzle-by-geospatial-analysis-part-1-684ecabf8df7&user=Wang+Shenghao&userId=75535ec0f14c&source=-----684ecabf8df7---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F684ecabf8df7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcrack-site-selection-puzzle-by-geospatial-analysis-part-1-684ecabf8df7&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----684ecabf8df7--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F684ecabf8df7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcrack-site-selection-puzzle-by-geospatial-analysis-part-1-684ecabf8df7&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----684ecabf8df7---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----684ecabf8df7--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----684ecabf8df7--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----684ecabf8df7--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----684ecabf8df7--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----684ecabf8df7--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----684ecabf8df7--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----684ecabf8df7--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----684ecabf8df7--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@wangshenghao1993?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@wangshenghao1993?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Wang Shenghao"}, {"url": "https://medium.com/@wangshenghao1993/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "26 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F75535ec0f14c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcrack-site-selection-puzzle-by-geospatial-analysis-part-1-684ecabf8df7&user=Wang+Shenghao&userId=75535ec0f14c&source=post_page-75535ec0f14c--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F1408d23175aa&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcrack-site-selection-puzzle-by-geospatial-analysis-part-1-684ecabf8df7&newsletterV3=75535ec0f14c&newsletterV3Id=1408d23175aa&user=Wang+Shenghao&userId=75535ec0f14c&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}