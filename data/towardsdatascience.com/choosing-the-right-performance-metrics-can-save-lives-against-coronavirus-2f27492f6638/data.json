{"url": "https://towardsdatascience.com/choosing-the-right-performance-metrics-can-save-lives-against-coronavirus-2f27492f6638", "time": 1683005027.461954, "path": "towardsdatascience.com/choosing-the-right-performance-metrics-can-save-lives-against-coronavirus-2f27492f6638/", "webpage": {"metadata": {"title": "Choosing the right performance metrics can save lives against Covid-19 | by Sachin Karmani | Towards Data Science", "h1": "Choosing the right performance metrics can save lives against Covid-19", "description": "The recently declared pandemic COVID-19 has shaken all healthcare systems in the world. It has shown an exponential rate of growth and has spread to 164 countries. Each country is at a different\u2026"}, "outgoing_paragraph_urls": [{"url": "https://www.youtube.com/watch?v=Kas0tIxDvrg", "anchor_text": "exponential rate of growth", "paragraph_index": 0}, {"url": "https://www.worldometers.info/coronavirus/#countries", "anchor_text": "164 countries", "paragraph_index": 0}, {"url": "https://www.washingtonpost.com/business/2020/03/16/cdc-who-coronavirus-tests/", "anchor_text": "faulty test kits", "paragraph_index": 2}, {"url": "https://towardsdatascience.com/using-deep-learning-to-detect-ncov-19-from-x-ray-images-1a89701d1acd", "anchor_text": "here", "paragraph_index": 2}, {"url": "https://towardsdatascience.com/neural-networks-parameters-hyperparameters-and-optimization-strategies-3f0842fac0a5", "anchor_text": "parameters and hyper-parameters", "paragraph_index": 4}, {"url": "https://en.wikipedia.org/wiki/Precision_and_recall", "anchor_text": "Wikipedia", "paragraph_index": 8}, {"url": "https://en.wikipedia.org/wiki/Precision_and_recall", "anchor_text": "Wikipedia", "paragraph_index": 16}, {"url": "https://stats.stackexchange.com/questions/64862/how-to-get-confusion-matrix-with-100-precision-or-100-recall-in-weka", "anchor_text": "hack", "paragraph_index": 25}, {"url": "https://www.medrxiv.org/content/10.1101/2020.02.14.20023028v3", "anchor_text": "A deep learning algorithm using CT images to screen for Corona Virus Disease (COVID-19)", "paragraph_index": 27}, {"url": "https://github.com/ieee8023/covid-chestxray-dataset", "anchor_text": "COVID-19 CT Scan Data set", "paragraph_index": 28}, {"url": "http://towardsdatascience.com/", "anchor_text": "Towards Data Science", "paragraph_index": 29}, {"url": "https://www.who.int/emergencies/diseases/novel-coronavirus-2019/situation-reports", "anchor_text": "here", "paragraph_index": 29}], "all_paragraphs": ["The recently declared pandemic COVID-19 has shaken all healthcare systems in the world. It has shown an exponential rate of growth and has spread to 164 countries. Each country is at a different point in the exponential curve and is taking precautionary steps and implementing policies to decrease its growth rate.", "Countries are fighting this pandemic by using technology and incorporating big-data analytics and real-time surveillance in their infrastructure to track potentially infected people and the people that interacted with them. This marks the first time that such technology is being used to prevent the spread of a pandemic.", "While such preventive measures are being taken, the number of cases is still rising rapidly. One of the reasons is the unavailability of test kits (or the usage of faulty test kits). Another reason is the shortage of medical experts in countries like Italy where the inflow of patients is much greater than they can handle. To overcome this situation, academics and researchers are working on using Deep Learning to aid experts in the diagnosis of this disease. A study from China \u00b9 shows the use of Deep learning on CT scans \u201cin order to provide a clinical diagnosis ahead of the pathogenic test, thus saving critical time for disease control\u201d. Meanwhile, an academic from the University of Montreal has compiled and open-sourced a data-set \u00b2 so that research can be implemented and test different algorithms (such as done over here).", "As additional data becomes available, more robust and accurate implementations from different researchers and institutions will become available. The deployment of such systems can ease the burden faced by doctors and hospitals, especially in developing countries of Asia and Africa.", "These systems will have different accuracies depending upon the type of data used and the parameters and hyper-parameters of the models. The majority of Data Scientists and AI experts use accuracy as the standard metric for deciding how effective their model is and how it ranks against other models. They strive for the most accurate model, but in real life, we would want the most useful model.", "There is more than one way to measure the performance of models by using the metric which would be useful at a certain stage. To explain them, I will use two stages of a disease (COVID-19 in this case) in a geographical location: when an infection is discovered in a region and starts spreading, lets call it Infection Emergence and when a pathogen has infected more people than the region\u2019s capacity to treat i.e. Infection Saturation. But before diving into these stages, I want to explain what a confusion matrix is. The confusion matrix shows the count of the combination of actual labels vs predicted labels. It has four blocks. Lets take the example of a dog vs non-dog image classifier.", "Lets suppose we are Deep learning specialists in a country where the first 20 cases have emerged. We have a training set consisting of 400 CT Scans of healthy people and 100 CT Scans of infected people collected from around the globe. We have trained 2 models, model A and model B, both having different architectures. We have a test set of 100 CT scans ( 70 healthy, 30 infected ) and make a confusion matrix of their predictions to observe count of actual label vs prediction:", "To evaluate the performance of both models, the most commonly used metric is Accuracy which determines the percentage of cases the model predicted correctly i.e. how many labels did it correctly assign. Its formula is:", "Model A has an accuracy of 80% while Model B has an accuracy of 76%. It seems pretty obvious to use Model A for diagnosis. But the problem with model A is that in the case of False negatives (i.e. diagnosing infected patients as healthy), it has declared 18 patients as healthy and discharged them, allowing the infection to spread faster. Model B does a better job by declaring 10 infected patients as healthy, thus diagnosing 8 more patients correctly. The metric that should be used in this case is Recall. According to Wikipedia:", "Recall (also known as sensitivity) is the fraction of the total amount of relevant instances that were actually retrieved.", "What it basically means is that it measures the model\u2019s capability to capture as many positive cases as possible. To calculate recall, we use:", "Model A has a recall of 40% while Model B has a recall of 67%! This means we should use Model B as it can correctly diagnose more infected patients.", "There are some things to note about the models and their recall:", "Now, lets suppose we are in a country where the infection has spread nation-wide. Hospitals and quarantine zones are at near full capacity. In this case, it doesn\u2019t really matter if you have correctly diagnosed someone as being infected as the inflow of patients is too much to handle. How to choose who gets treatment is a separate topic. But there is one thing which would be detrimental: diagnosing healthy people as infected. No one would want to utilize resources on healthy people while infected people do not get a chance at treatment.", "Lets use the confusion matrix of Model A and Model B. To emphasize the impact, I will multiply the numbers by 50:", "Let's say all the hospitals are at full capacity and there is only 1 hospital left with a capacity of 500. These are the predictions of model A vs model B which can be found by adding up individual classes along the axis of prediction:", "While it seems that model B is superior, if we calculate the probability of how many predictions are actually true, we will find something else. Let's calculate the probability of how many results is actually correct. For model A, 600 out of 700 cases are actually infected i.e. if we were to randomly select 1 person out of these 700, there is an 85.7% chance that he or she is infected. Conversely, for model B, if we randomly select one person, there is a 58.8% chance that he/she is infected. To compare the impact, we would get 420 genuine patients with model A and 290 genuine patients with model B. With model A, an additional 130 patients would get the needed treatment. This metric is known as Precision and it is the % of actual cases present in the total predicted cases. According to Wikipedia:", "Precision (also called positive predictive value) is the fraction of relevant instances among the retrieved instances.", "It is calculated using this formula:", "The saturation of the Pandemic will always have a beginning point (i.e. the emergence). It is a continuous exponential curve. Therefore, to prevent the ultimate crisis, you would want a model that not only captures as many patients as possible but also not become a strain on resources by allowing healthy people to occupy quarantine zones and hospital beds. To quantify such a scenario, a metric is required which could combine the property of both precision and recall. A simple average might seem suitable but there is no penalty if either individual metric is low. If model 1 has a precision of 0 and recall of 100%, while model 2 has both the precision and recall 50%, then both models would have an average of 50, implying that they are similar in performance. There is a metric known as F1 Score which combines them both and also results in a low value if either individual metric is low. It does so by taking the harmonic mean of precision and recall:", "So model 1 would have an F1-score of 0 while model 2 would have an F1-score of 25%", "Lets take the confusion matrix of model A and model B", "The F1-score of both models is 27.3% for model A and 31% for model B. This can be observed by the fact that model B is relatively good at identifying infected patients AND also not having a very bad rate of labeling healthy people as infected. It is more balanced than model A for both tasks.", "There is also a weighted form of F1 score known as F-Beta", "If 0 < beta < 1, then more weightage is given to precision and if beta > 1, more weightage is given to recall.", "NOTE: The metrics discussed above have flaws as they all rely on the quantity as well as the distribution of the test set. And there is a hack to get a recall of 100%. However, if the model is properly trained and there is an ample amount of examples in the test set which matches the real-world distribution, then these metrics can be relied upon.", "Based on the metrics of model A and model B calculated for different scenarios, the most logical approach would be to use model B during emergence and incline towards model A as more and more cases emerge. But if you had to use only one model for some reason, you could bet your money on model B.", "[1]: Wang, et. al, \u201cA deep learning algorithm using CT images to screen for Corona Virus Disease (COVID-19)\u201d", "[2]: COVID-19 CT Scan Data set collected by Joseph Paul Cohen. Postdoctoral Fellow, Mila, University of Montreal.", "Note from the editors: Towards Data Science is a Medium publication primarily based on the study of data science and machine learning. We are not health professionals or epidemiologists, and the opinions of this article should not be interpreted as professional advice. To learn more about the coronavirus pandemic, you can click here.", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F2f27492f6638&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fchoosing-the-right-performance-metrics-can-save-lives-against-coronavirus-2f27492f6638&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fchoosing-the-right-performance-metrics-can-save-lives-against-coronavirus-2f27492f6638&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fchoosing-the-right-performance-metrics-can-save-lives-against-coronavirus-2f27492f6638&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fchoosing-the-right-performance-metrics-can-save-lives-against-coronavirus-2f27492f6638&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----2f27492f6638--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----2f27492f6638--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@sachin.karmani52?source=post_page-----2f27492f6638--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@sachin.karmani52?source=post_page-----2f27492f6638--------------------------------", "anchor_text": "Sachin Karmani"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Ff49986ba4333&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fchoosing-the-right-performance-metrics-can-save-lives-against-coronavirus-2f27492f6638&user=Sachin+Karmani&userId=f49986ba4333&source=post_page-f49986ba4333----2f27492f6638---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F2f27492f6638&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fchoosing-the-right-performance-metrics-can-save-lives-against-coronavirus-2f27492f6638&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F2f27492f6638&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fchoosing-the-right-performance-metrics-can-save-lives-against-coronavirus-2f27492f6638&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://www.aljazeera.com/news/2020/01/countries-confirmed-cases-coronavirus-200125070959786.html", "anchor_text": "Geographical distribution"}, {"url": "https://www.youtube.com/watch?v=Kas0tIxDvrg", "anchor_text": "exponential rate of growth"}, {"url": "https://www.worldometers.info/coronavirus/#countries", "anchor_text": "164 countries"}, {"url": "https://www.washingtonpost.com/business/2020/03/16/cdc-who-coronavirus-tests/", "anchor_text": "faulty test kits"}, {"url": "https://towardsdatascience.com/using-deep-learning-to-detect-ncov-19-from-x-ray-images-1a89701d1acd", "anchor_text": "here"}, {"url": "https://radiopaedia.org/cases/covid-19-pneumonia-14", "anchor_text": "Left"}, {"url": "https://radiopaedia.org/cases/streptococcus-pneumon%20iae-pneumonia-temporal-evolution-1", "anchor_text": "Right"}, {"url": "https://towardsdatascience.com/neural-networks-parameters-hyperparameters-and-optimization-strategies-3f0842fac0a5", "anchor_text": "parameters and hyper-parameters"}, {"url": "https://medium.com/@awabmohammedomer/confusion-matrix-b504b8f8e1d1", "anchor_text": "matrix"}, {"url": "https://en.wikipedia.org/wiki/Precision_and_recall", "anchor_text": "Wikipedia"}, {"url": "https://en.wikipedia.org/wiki/Precision_and_recall", "anchor_text": "Wikipedia"}, {"url": "https://stats.stackexchange.com/questions/64862/how-to-get-confusion-matrix-with-100-precision-or-100-recall-in-weka", "anchor_text": "hack"}, {"url": "https://www.medrxiv.org/content/10.1101/2020.02.14.20023028v3", "anchor_text": "A deep learning algorithm using CT images to screen for Corona Virus Disease (COVID-19)"}, {"url": "https://github.com/ieee8023/covid-chestxray-dataset", "anchor_text": "COVID-19 CT Scan Data set"}, {"url": "http://towardsdatascience.com/", "anchor_text": "Towards Data Science"}, {"url": "https://www.who.int/emergencies/diseases/novel-coronavirus-2019/situation-reports", "anchor_text": "here"}, {"url": "https://medium.com/tag/artificial-intelligence?source=post_page-----2f27492f6638---------------artificial_intelligence-----------------", "anchor_text": "Artificial Intelligence"}, {"url": "https://medium.com/tag/data-science?source=post_page-----2f27492f6638---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/covid-19?source=post_page-----2f27492f6638---------------covid_19-----------------", "anchor_text": "Covid-19"}, {"url": "https://medium.com/tag/metrics?source=post_page-----2f27492f6638---------------metrics-----------------", "anchor_text": "Metrics"}, {"url": "https://medium.com/tag/neural-networks?source=post_page-----2f27492f6638---------------neural_networks-----------------", "anchor_text": "Neural Networks"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F2f27492f6638&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fchoosing-the-right-performance-metrics-can-save-lives-against-coronavirus-2f27492f6638&user=Sachin+Karmani&userId=f49986ba4333&source=-----2f27492f6638---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F2f27492f6638&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fchoosing-the-right-performance-metrics-can-save-lives-against-coronavirus-2f27492f6638&user=Sachin+Karmani&userId=f49986ba4333&source=-----2f27492f6638---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F2f27492f6638&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fchoosing-the-right-performance-metrics-can-save-lives-against-coronavirus-2f27492f6638&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----2f27492f6638--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F2f27492f6638&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fchoosing-the-right-performance-metrics-can-save-lives-against-coronavirus-2f27492f6638&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----2f27492f6638---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----2f27492f6638--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----2f27492f6638--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----2f27492f6638--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----2f27492f6638--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----2f27492f6638--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----2f27492f6638--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----2f27492f6638--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----2f27492f6638--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@sachin.karmani52?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@sachin.karmani52?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Sachin Karmani"}, {"url": "https://medium.com/@sachin.karmani52/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "6 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Ff49986ba4333&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fchoosing-the-right-performance-metrics-can-save-lives-against-coronavirus-2f27492f6638&user=Sachin+Karmani&userId=f49986ba4333&source=post_page-f49986ba4333--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fusers%2Ff49986ba4333%2Flazily-enable-writer-subscription&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fchoosing-the-right-performance-metrics-can-save-lives-against-coronavirus-2f27492f6638&user=Sachin+Karmani&userId=f49986ba4333&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}