{"url": "https://towardsdatascience.com/how-to-do-logistic-regression-in-r-456e9cfec7cd", "time": 1683018406.8229492, "path": "towardsdatascience.com/how-to-do-logistic-regression-in-r-456e9cfec7cd/", "webpage": {"metadata": {"title": "How to do Logistic Regression in R | by Michaelino Mervisiano | Towards Data Science", "h1": "How to do Logistic Regression in R", "description": "Logistic regression is one of the most popular forms of the generalized linear model. It comes in handy if you want to predict a binary outcome from a set of continuous and/or categorical predictor\u2026"}, "outgoing_paragraph_urls": [{"url": "https://en.wikipedia.org/wiki/Logistic_regression", "anchor_text": "Logistic regression", "paragraph_index": 0}, {"url": "https://rdrr.io/cran/AER/man/Affairs.html", "anchor_text": "infidelity data", "paragraph_index": 1}, {"url": "https://online.stat.psu.edu/stat504/node/162/", "anchor_text": "Overdispersion", "paragraph_index": 23}], "all_paragraphs": ["Logistic regression is one of the most popular forms of the generalized linear model. It comes in handy if you want to predict a binary outcome from a set of continuous and/or categorical predictor variables. In this article, I will discuss an overview on how to use Logistic Regression in R with an example dataset.", "We will use infidelity data as our example dataset, known as Fair\u2019s Affairs, which is based on a cross-sectional survey conducted by Psychology Today in 1969 and is described in Greene (2003) and Fair (1978). This data contains 9 variables collected on 601 respondents which hold information such as how often they have affairs during the past years, as well as their age, gender, education, years married, have children (yes/no), how religious they are (on a 5-point scale from 1=anti to 5=very), occupation (7-point classification), and a self-rating on happiness toward their marriage (from 1=very unhappy to 5=very happy). The figure below shows a few observations to give you an overview of the data.", "Applying Logistic Regression, we can find which factors contributed the most to infidelity. Then, you can use the model to check which one between you and your partner that more likely to have an affair or not \ud83d\ude1c", "But, before that, we will run through some descriptive statistics with the code below to get a better understanding of our data.", "From the summary above, we can see that there are 286 male respondents (representing 48% of the overall respondents), 430 respondents had children (representing 72% of the overall respondents), and average age for our respondents was 32.5 years old. In addition, we find that 451 respondents claimed not engaging in an affair in the past year. It means 25% of our respondents has an affair with the largest number reported was 12. In conclusion, we can say that 6% of respondents has 1 affair per month \ud83d\ude0f.", "As we are interested in the binary outcome for our response variable (had an affair/didn\u2019t have an affair). We can transform affairs into abinary variable called ynaffair with the following code.", "Fit the model with Logistic Regression", "Now, we can execute the logistic regression to measure the relationship between response variable (affair) and explanatory variables (age, gender, education, occupation, children, self-rating, etc) in R.", "If we observe the Pr(>|z|) or p-values for the regression coefficients, then we find that gender, presence of children, education, and occupation do not have a significant contribution to our response variable. Therefore, we can try to fit a second model by including only significant variables such as age, years married, religiousness, and rating to fit the data instead.", "For the second model, we can see that p-values for each regression coefficient is statistically significant. Then, we may run chi-square test with anova function in R to compared between first and second model. We will see which model that explain our response variable better.", "The output above displays nonsignificant chi-square value with p-values= 0.21. It means that the second model with only four predictors fits as well as the full model with nine predictors. It supports our initial belief that gender, children, education, and occupation don\u2019t add any contribution to predict infidelity (our response variable). Thus, we will continue the analysis with the second model as it is easier to do our interpretations on the simpler model.", "Based on the regression coefficients from the second model, we are seeing that the odds of having affairs increase with years married and decrease with age, religiousness, and happiness self-rating. We can observe it based on the positive or negative sign from each regression coefficient. In conclusion, we might say the longer you are married, then the more likely you will have an affair. On the other hand, the happier you are in the marriage, then the less likely you will have an affair.", "Next, we want to know the impact value of each of these variables towards affair. First, we need to remember that logistic regression modeled the response variable to log(odds) that Y = 1. It implies the regression coefficients allow the change in log(odds) in the return for a unit change in the predictor variable, holding all other predictor variables constant.", "Since log(odds) are hard to interpret, we will transform it by exponentiating the outcome as follow", "We observe that the odds of having affair are increased by a factor of 1.106 for a one-year increase in years married (holding age, religiousness, and happiness rating constant). On the contrary, the odds of having affair are multiplied by a factor of 0.965 for every year increase in age. It means the chance of having an affair drop by -3.5% every time someone gets older.", "Furthermore, the change in the odds of the higher value on the response variable for an n unit change in a predictor variable is exp(\u03b2j)^n. Then, a 15-year increase would increase the odds by a factor of 1.106\u00b9\u2075\u22484.5, holding the other predictor variables constant.", "Predict the outcome using new data", "In this section, we are using the model that we built to predict the outcome for the new data. The first step, we will make a new data containing the values of predictor variables we\u2019re interested in. The second step, we will apply the predict() function in R to estimate the probabilities of the outcome event following the values from the new data.", "Consider new data below where we have 5 new respondents with different self-rating, holding other variables set to the average of overall data. Then, we apply the prediction function to get the probabilities of having affair for these new respondents.", "Clearly, we notice that chance of having affair declining from 0.53 when marriage is rated 1=\u201dvery unhappy\u201d to 0.15 when the marriage is rated 5=\u201dvery happy\u201d (holding other predictor variables constant). It indicates the unhappy couple are three times more likely to have an affair compared to the happy one.", "Let\u2019s create another new data to observe the impact of age toward infidelity", "Here, we see that as age increases from 17 to 57, the probability of having affair declining from 0.34 to 0.11, holding the other variables constant. If you are interested to explore the impact of other predictor variables or to predict other new data, then you can use this approach to analyze it further.", "In logistic regression, we need to check the expected variance for data drawn from a binomial distribution \u03c32 = n\u03c0(1 \u2212 \u03c0), where n is the number of observations and \u03c0 is the probability of belonging to the Y = 1 group.", "Overdispersion occurs when data admit more variability than expected under the assumed distribution. If overdispersion is present in a dataset, the estimated standard errors and test statistics the overall goodness-of-fit will be distorted and adjustments must be made. One of the solutions, we need to use the quasibinomial distribution rather than the binomial distribution for glm() function in R.", "There are two ways to verify if we have an overdispersion issue or not:", "The first method, we can check overdispersion by dividing the residual deviance with the residual degrees of freedom of our binomial model.", "If the ratio considerably larger than 1, then it indicates that we have an overdispersion issue. Calculating this ratio using our data example, we find that the ratio is close to 1. It means no overdispersion problem on our model.", "The second method, we are using two models fit to check overdispersion. Basically, we will fit the logistic regression using two different models using different distributions. Then, we check if there\u2019s a statistical evidence that the expected variance of the two models is significantly different.", "We find that p-value =0.34 is clearly not significant (p > 0.05), strengthening our belief that overdispersion isn\u2019t a problem on our model", "I hope you find this article is useful and kindly share it with others", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Lead Data Scientist @Google | Statistics | Machine Learning | R"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F456e9cfec7cd&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-do-logistic-regression-in-r-456e9cfec7cd&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-do-logistic-regression-in-r-456e9cfec7cd&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-do-logistic-regression-in-r-456e9cfec7cd&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-do-logistic-regression-in-r-456e9cfec7cd&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----456e9cfec7cd--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----456e9cfec7cd--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://michaelinom.medium.com/?source=post_page-----456e9cfec7cd--------------------------------", "anchor_text": ""}, {"url": "https://michaelinom.medium.com/?source=post_page-----456e9cfec7cd--------------------------------", "anchor_text": "Michaelino Mervisiano"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F5dc8f61139b3&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-do-logistic-regression-in-r-456e9cfec7cd&user=Michaelino+Mervisiano&userId=5dc8f61139b3&source=post_page-5dc8f61139b3----456e9cfec7cd---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F456e9cfec7cd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-do-logistic-regression-in-r-456e9cfec7cd&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F456e9cfec7cd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-do-logistic-regression-in-r-456e9cfec7cd&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://www.pexels.com/@n-voitkevich?utm_content=attributionCopyText&utm_medium=referral&utm_source=pexels", "anchor_text": "Nataliya Vaitkevich"}, {"url": "https://www.pexels.com/photo/magnifying-glass-on-white-paper-6120207/?utm_content=attributionCopyText&utm_medium=referral&utm_source=pexels", "anchor_text": "Pexels"}, {"url": "https://en.wikipedia.org/wiki/Logistic_regression", "anchor_text": "Logistic regression"}, {"url": "https://rdrr.io/cran/AER/man/Affairs.html", "anchor_text": "infidelity data"}, {"url": "https://online.stat.psu.edu/stat504/node/162/", "anchor_text": "Overdispersion"}, {"url": "https://medium.com/tag/logistic-regression?source=post_page-----456e9cfec7cd---------------logistic_regression-----------------", "anchor_text": "Logistic Regression"}, {"url": "https://medium.com/tag/prediction-model?source=post_page-----456e9cfec7cd---------------prediction_model-----------------", "anchor_text": "Prediction Model"}, {"url": "https://medium.com/tag/binary?source=post_page-----456e9cfec7cd---------------binary-----------------", "anchor_text": "Binary"}, {"url": "https://medium.com/tag/modeling?source=post_page-----456e9cfec7cd---------------modeling-----------------", "anchor_text": "Modeling"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F456e9cfec7cd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-do-logistic-regression-in-r-456e9cfec7cd&user=Michaelino+Mervisiano&userId=5dc8f61139b3&source=-----456e9cfec7cd---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F456e9cfec7cd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-do-logistic-regression-in-r-456e9cfec7cd&user=Michaelino+Mervisiano&userId=5dc8f61139b3&source=-----456e9cfec7cd---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F456e9cfec7cd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-do-logistic-regression-in-r-456e9cfec7cd&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----456e9cfec7cd--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F456e9cfec7cd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-do-logistic-regression-in-r-456e9cfec7cd&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----456e9cfec7cd---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----456e9cfec7cd--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----456e9cfec7cd--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----456e9cfec7cd--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----456e9cfec7cd--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----456e9cfec7cd--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----456e9cfec7cd--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----456e9cfec7cd--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----456e9cfec7cd--------------------------------", "anchor_text": ""}, {"url": "https://michaelinom.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://michaelinom.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Michaelino Mervisiano"}, {"url": "https://michaelinom.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "22 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F5dc8f61139b3&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-do-logistic-regression-in-r-456e9cfec7cd&user=Michaelino+Mervisiano&userId=5dc8f61139b3&source=post_page-5dc8f61139b3--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fusers%2F5dc8f61139b3%2Flazily-enable-writer-subscription&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-do-logistic-regression-in-r-456e9cfec7cd&user=Michaelino+Mervisiano&userId=5dc8f61139b3&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}