{"url": "https://towardsdatascience.com/the-joy-of-simulation-9906f1d5c604", "time": 1683007778.1761339, "path": "towardsdatascience.com/the-joy-of-simulation-9906f1d5c604/", "webpage": {"metadata": {"title": "The Joy of Simulation. Using Monte Carlo simulation to set\u2026 | by Daniel Hill | Towards Data Science", "h1": "The Joy of Simulation", "description": "One of the trickiest problems in data science, among a crowded field, is picking the right approach and tools for a task which doesn\u2019t have a \u201cground truth\u201d to compare different options against. By\u2026"}, "outgoing_paragraph_urls": [{"url": "https://www.youtube.com/watch?v=mikCQoDG2Ls", "anchor_text": "leads are weak", "paragraph_index": 12}, {"url": "https://www.youtube.com/watch?v=Lbp3ozjl-qM", "anchor_text": "third prize is you\u2019re fired", "paragraph_index": 12}], "all_paragraphs": ["One of the trickiest problems in data science, among a crowded field, is picking the right approach and tools for a task which doesn\u2019t have a \u201cground truth\u201d to compare different options against. By \u201cground truth\u201d I mean examples of the real outcome that you\u2019re trying to predict or evaluate.", "So for example, if you\u2019re wondering whether ARIMA or Prophet is better at forecasting ice cream sales, you can take a date in the past where you sold, say, 10 ice creams and if ARIMA predicts 4 and Prophet predicts 11, you know Prophet is better as it got closest to reality i.e. the \u201cground truth\u201d. Simple! OK, it usually isn\u2019t that easy, but the principle is simple\u2026", "But what if you\u2019re trying to work out whether temperature or day of week has the highest impact on ice cream sales? Or how many extra ice creams you sold because of all the \u201cit\u2019s hot, maybe buy some ice cream?\u201d posters you put around town last week (look, advertising isn\u2019t my strength\u2026)? Here you have no \u201cground truth\u201d as you don\u2019t know what the impact of temperature and day of week really are, or how effective your posters really were. All you know is that different approaches and packages spit out different estimates of these values, but telling which of these estimates are good and which are less reliable is tricky, as you\u2019ve nothing to compare them (against apart from each other).", "So what to do? Well in these cases a great tool is the humble Monte Carlo Simulation. So named after the Monte Carlo Casino in Monaco in the 1940s, these simulations essentially consist of building a virtual version of whatever system you\u2019re interested in, which you then run various scenarios through a large number of times to generate a \u201cbrute force\u201d solution to a problem.", "Because building these simulations is usually straightforward, often achievable with only a few lines of code, as soon as the probability mathematics get tough it\u2019s usually easier to just fall back on a Monte Carlo simulation. For anyone who is regularly dealing with complex probability problems (i.e. any data scientist/analyst), this makes them an invaluable tool.", "How are they useful for the \u201cno ground truth\u201d problem? Using a Monte Carlo simulation you can create a rough copy of the situation you\u2019re dealing with, and then create your own ground truths for comparing different approaches against.", "Let\u2019s illustrate with an example: say you\u2019re a statistician tasked with developing a testing strategy for sales scripts for use by sales agents to sell real estate. The information you have is:", "Now, one way to solve this is to get out a pencil and paper and do a whole bunch of algebra to work out which strategy is optimal, and if that\u2019s what floats your boat: be my guest! But if you\u2019re anything like me you\u2019ll probably find it easier to build a Monte Carlo simulation of this scenario and then let it do all the hard work for you.", "Let\u2019s do that, running the above scenario, say, 500 times to see what outcomes we get with each test strategy.", "That\u2019s perhaps not the result one might have expected. What\u2019s going on? To answer that let\u2019s take a look at a single run of the simulation, and see how the cumulative impact of the tests evolve over time. As you can see, the loosest test criteria (confidence at 60%) wins because though it makes a fair few bad calls, it selects so many more winners that the final net effect is overall much more positive than the other, more stringent, test settings.", "The crucial point is that in this scenario we\u2019re not trying to optimize the result of a single test, but rather we\u2019re looking to maximize the number of correctly identified winners minus the number of incorrectly identified losers in a large portfolio of tests. More generally, if one is doing a high volume of testing one can often afford to be much less confident in the results of any one given test. This also has the happy consequence of usually meaning one can get away with less data per test, enabling either less time testing or more tests in the time available, but I digress.", "Now, you may be objecting that the folk creating advertising scripts (or in a usual data science setup: product managers/leadership) are rarely candid or able enough to say things like \u201cfunnily enough, we actually get this wrong 60% of the time\u201d, so perhaps things aren\u2019t as clear cut as in my example?", "The beauty of a Monte Carlo simulation however is that one has tremendous flexibility to see how different scenarios play out. Perhaps the sales leads are weak and you want to see how that\u2019s going to influence your test? Maybe third prize is you\u2019re fired so you want to go for a safer strategy that maximizes the probability of getting a result above a certain threshold, regardless of expected value? Or as above, you\u2019ve a sneaking suspicion the success rate of the new sales scripts just won\u2019t be that high? All of these scenarios can be plugged into the simulation to see how they might pan out, usually with only small changes to the code.", "When building these simulations you can generate the data yourself, as I did above, creating sets of random numbers that match the distribution of the data you\u2019re interested in*. You can usually build a half decent simulation with less than a hundred lines of code, though of course you can make these as complex as you like. Do beware highly complex simulations however, as these can lose some of the simple interpret-ability that makes this an attractive tool.", "An alternate approach is to take the actual data from the system you\u2019re interested in, and make modifications to it in line with what you\u2019re interested in. So in the above example one would take the actual sales history and adjust sales up or down in line with the simulated test impacts. The advantage here is that you can be much more confident that the simulation matches reality, the disadvantage is you\u2019ve a lot less control if you want to see how changes to distributions in the data affect the outcome.", "* Another quick digression: don\u2019t just assume all your data is normally distributed as this can bite you pretty hard when it\u2019s not true! For example most sales distributions are not normal, with a small number of salespeople/ products/ ads driving a large share of the sales.", "In case you weren\u2019t already convinced, another reason to like this approach is that when speaking with stakeholders, simulations are often more intuitive. One can talk more easily to the assumptions being made, why certain outcomes/runs end up the way they did, and how changes to the input assumptions affect the outcome. I tend to find stakeholders are often more receptive to this than \u201cI did a boatload of complex probability math and you better hope I didn\u2019t screw it up\u201d.", "So if you\u2019re not sure which causal impact/uplift package is right for your particular problem and data distribution? Need to check if your multivariate regression is correctly sizing coefficients? Not sure how quickly your algorithm will respond to a changing environment? Can\u2019t work out if a statistical test is going to work with your data distribution? Give your old buddy Monte a call.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Leading supply data science at Expedia Group. All views are my own."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F9906f1d5c604&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-joy-of-simulation-9906f1d5c604&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-joy-of-simulation-9906f1d5c604&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-joy-of-simulation-9906f1d5c604&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-joy-of-simulation-9906f1d5c604&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----9906f1d5c604--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----9906f1d5c604--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@danielbhill?source=post_page-----9906f1d5c604--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@danielbhill?source=post_page-----9906f1d5c604--------------------------------", "anchor_text": "Daniel Hill"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F3c9383cf6bc6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-joy-of-simulation-9906f1d5c604&user=Daniel+Hill&userId=3c9383cf6bc6&source=post_page-3c9383cf6bc6----9906f1d5c604---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F9906f1d5c604&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-joy-of-simulation-9906f1d5c604&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F9906f1d5c604&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-joy-of-simulation-9906f1d5c604&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@johnschno?utm_source=medium&utm_medium=referral", "anchor_text": "John Schnobrich"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://www.youtube.com/watch?v=mikCQoDG2Ls", "anchor_text": "leads are weak"}, {"url": "https://www.youtube.com/watch?v=Lbp3ozjl-qM", "anchor_text": "third prize is you\u2019re fired"}, {"url": "https://unsplash.com/@roman_lazygeek?utm_source=medium&utm_medium=referral", "anchor_text": "Roman Mager"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://medium.com/tag/monte-carlo?source=post_page-----9906f1d5c604---------------monte_carlo-----------------", "anchor_text": "Monte Carlo"}, {"url": "https://medium.com/tag/testing?source=post_page-----9906f1d5c604---------------testing-----------------", "anchor_text": "Testing"}, {"url": "https://medium.com/tag/simulation?source=post_page-----9906f1d5c604---------------simulation-----------------", "anchor_text": "Simulation"}, {"url": "https://medium.com/tag/data-science?source=post_page-----9906f1d5c604---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/glengarry-glen-ross?source=post_page-----9906f1d5c604---------------glengarry_glen_ross-----------------", "anchor_text": "Glengarry Glen Ross"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F9906f1d5c604&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-joy-of-simulation-9906f1d5c604&user=Daniel+Hill&userId=3c9383cf6bc6&source=-----9906f1d5c604---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F9906f1d5c604&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-joy-of-simulation-9906f1d5c604&user=Daniel+Hill&userId=3c9383cf6bc6&source=-----9906f1d5c604---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F9906f1d5c604&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-joy-of-simulation-9906f1d5c604&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----9906f1d5c604--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F9906f1d5c604&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-joy-of-simulation-9906f1d5c604&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----9906f1d5c604---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----9906f1d5c604--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----9906f1d5c604--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----9906f1d5c604--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----9906f1d5c604--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----9906f1d5c604--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----9906f1d5c604--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----9906f1d5c604--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----9906f1d5c604--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@danielbhill?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@danielbhill?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Daniel Hill"}, {"url": "https://medium.com/@danielbhill/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "57 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F3c9383cf6bc6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-joy-of-simulation-9906f1d5c604&user=Daniel+Hill&userId=3c9383cf6bc6&source=post_page-3c9383cf6bc6--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F678ad567ced0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fthe-joy-of-simulation-9906f1d5c604&newsletterV3=3c9383cf6bc6&newsletterV3Id=678ad567ced0&user=Daniel+Hill&userId=3c9383cf6bc6&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}