{"url": "https://towardsdatascience.com/an-introduction-to-making-dynamic-and-interactive-plots-with-d3-a9e859413c5a", "time": 1683010281.419859, "path": "towardsdatascience.com/an-introduction-to-making-dynamic-and-interactive-plots-with-d3-a9e859413c5a/", "webpage": {"metadata": {"title": "An Introduction to Making Dynamic and Interactive Plots with D3 | by Naveen Venkatesan | Towards Data Science", "h1": "An Introduction to Making Dynamic and Interactive Plots with D3", "description": "I\u2019ve always been hesitant to learn how to use D3.js. It has always seemed much less intuitive than other libraries such as matplotlib, which I have written extensively about. However, here I find\u2026"}, "outgoing_paragraph_urls": [{"url": "https://github.com/venkatesannaveen/medium-articles", "anchor_text": "Github repository", "paragraph_index": 30}, {"url": "https://twitter.com/naveenv_92", "anchor_text": "Twitter", "paragraph_index": 30}, {"url": "https://www.linkedin.com/in/naveenvenkatesan/", "anchor_text": "LinkedIn", "paragraph_index": 30}], "all_paragraphs": ["I\u2019ve always been hesitant to learn how to use D3.js. It has always seemed much less intuitive than other libraries such as matplotlib, which I have written extensively about. However, here I find myself writing a tutorial on making a plot in D3 \u2014 if you are developing a website or web application and want dynamic and interactive data visualizations, it may be useful to be familiar with the library. In this article, I have compiled the results of many trial-and-errors in that hope that it can both serve me well as a reference and help you avoid some simple beginner mistakes in the process. The goal of this article will be to reproduce the plot of sample absorbances found in one of my earlier pieces:", "Before we get started, I\u2019d like to first take a step back. A lot of my previous work on Medium has been geared towards experimental scientists, as this is my own personal background. Speaking to that demographic, I believe that adding this new tool (D3) to your toolbox will help you make your data come alive, and be able to reach a wider audience than you normally would just by sharing your published journal articles. So, without further ado, let\u2019s get started. As a disclaimer, a basic understanding of JavaScript, HTML, and CSS will certainly be helpful to you as a reader.", "To get started, we are going to need to create 3 files (put them all in the same folder on your computer):", "Our index.html will not contain too much in it, as we will manipulate the document using JavaScript. We start with the general skeleton code for any HTML file.", "Within our html tag, we are going to create two sections: head and body. In the head section, we will add references to our CSS stylesheet, as well as a link to D3.js so we can use all the modules later.", "Now, in the body of our HTML file, we will create a div called plot_area, which we will manipulate with our plot.js file, which we will also import into the current file.", "We are done with all the edits to index.html \u2014 now let\u2019s move on to the main workhorse of our visualization, JavaScript.", "D3 is a JavaScript library that is short for Data-Driven Documents, and provides a series of functions to use and manipulate SVGs (scalable vector graphics). The first thing we are going to want to do is define a height and width for our SVG (in pixels) \u2014 in addition to this, we will define a padding value, to ensure that our plot axes are not right up against the boundaries of our SVG frame.", "Next, we will need to load our data \u2014 to do this, we can make use of a built-in function, where format_fnc() is our JavaScript function to format our data, and manipulate_fnc() is our function that we will use to manipulate the data:", "The filepath that we will use is the CSV file from my previous article, and we will pass this to a callback function that reformats our data into a multidimensional array. We can reference fields in each of our CSV rows by their column names (\u2018Wavelength\u2019, \u2018Sample_1_Absorbance\u2019, and \u2018Sample_2_Absorbance\u2019) \u2014 we must add a + because d3.csv() loads data as a string by default, so this ensures that we are storing the numerical values. Our final data array, will have subarrays for each data point, where the first element will be the wavelength, the second element is sample 1 absorbance, and the third element is sample 2 absorbance. Finally, we pass our formatted data to a plot_data() function that we will write next.", "Now, we can start building the plot_data() function \u2014 the first thing we will do is define values for the axis limits:", "We will continue to add to the body of this function \u2014 we now need to set the axis scaling, which we will do using d3.scaleLinear(), since both our axis will have linear scaling. Onto this, we will chain two more methods: domain() and range(). The domain corresponds to the input values that we will pass to our scale, and the range corresponds to the output that will be drawn on the SVG (in pixels). You will notice that a main theme in D3 is that we can keep chaining an arbitrary number of methods. In both ranges, we will offset the endpoints by the value of our padding variable, so that we have some whitespace around our axes. Another interesting thing you will notice is that the y-axis range appears to be backwards! This is because the origin of the SVG is at the top left corner, so we need to flip the y-values in order to move this origin to the bottom left.", "Although we have specified a domain for our input values, our scaling functions will still plot data outside these ranges. To ensure that all our data is in our x-axis domain, we will create a new array that contains only the points in this region:", "We can now create the SVG object \u2014 in D3, this is often driven by the functions d3.select() and d3.selectAll(). We will select the div we created earlier with id=plot_area and append an SVG to it with append('svg'). We can then edit attributes of the SVG with attr() and pass the height and width values we already defined.", "To plot our first line (the absorbance of sample 1), we will append a path object to our SVG. Then, we can bind the relevant data to this line using the datum() function. We can then edit attributes as we did above, but to actually create the line, we need to edit the d attribute and use d3.line(). We will pass callback functions for the x and y-data, where we use the data points in conjunction with the xScale and yScale functions we created earlier.", "If all goes well, we can now open the index.html file in our browser and should be greeted with the following:", "Baby steps! Now let\u2019s add the second line, much in the way we did the first:", "We have successfully plotted both lines, but without any axes, there is no context for the data, so let\u2019s add these.", "To create the x-axis, we use d3.axisBottom() and to create the y-axis we use d3.axisLeft(). All these two methods do, however, is make the x and y ticks point in the right direction (x-axis at the top of the SVG and y-axis at the left of the SVG) \u2014 we still need to translate them to their respective parts of the SVG, which we can do through the transform attribute:", "D3 doesn\u2019t directly have a method to create axis labels, so we do this by appending text objects. We can easily position the labels using the height and width variables we have stored already. In the following code block, I am offsetting the labels by 15 pixels from the edge of the SVG. Also, but setting the text-anchor property to middle, we can center the text object on the axis.", "For the y-axis label, we have to do one extra step. When rotating a text object, it gets rotated around the origin by default, even if we manually set the x and y attributes. To fix this, we will use a translation along with our rotation to reset the point of rotation, and rotate by -90 degrees.", "Again, we\u2019re pretty much on our own here as far as creating a legend. Our course of action will be as follows:", "Now we can append text labels next to each of the newly-drawn lines:", "Now, if you thought that we went through a lot of trouble to make the simple plot you see above \u2014 you\u2019re probably right. Making static figures with other programming software such as R or Python is very straightforward. But making our plot dynamic is where the power of D3 is really shown. First, let\u2019s create a little animation, where both of the lines start flat at 0 and then rise up to their values over the course of one second.", "To do this, we will go back and edit our initial plotting of the paths. We use the transition() method and duration() to change our attributes, in this case the d attribute. We set all the y-values to 0 initially, then change them to their respective values.", "Now, let\u2019s make it so that we can use our mouse to hover over the actual data points and get their exact value. To do this, I am going to append circles for every data point. In this case, we will be use d3.selectAll() to select the circle objects we are going to create. We bind the data using data() instead of datum() because we are creating a new circle for each data point instead of using all the data points to create one path, as we did above.", "For each of the circles, we edit the attribute cx and cy for the circle\u2019s x and y coordinates, respectively, and r for the circles\u2019 radii. We will set the fill color to the same as the lines. Each of the circles then gets assigned a class value of points, which we will use CSS to modify. Finally, we set pointer-events to all so that if any part of the circle comes into the mouse pointer, we can trigger an event.", "To create the tooltips, we append title objects to each of the circle, and set their text attributes to be the data corresponding to that point. So when we hover over one of the points, we will see the data.", "I want the circles that we drew above to be invisible right until we hover over them. We can do this very simply in our CSS by editing the visibility attribute. We start with them being hidden and then make them visible when we trigger the points:hover event.", "And there you have it! An interactive version of our absorbance plot made with D3!", "Thank you for reading! All the analyses from this article can be found at this Github repository. I appreciate any feedback, and you can find me on Twitter and connect with me on LinkedIn for more updates and articles.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Data Scientist \u2022 Materials Scientist \u2022 Musician \u2022 Golfer"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fa9e859413c5a&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fan-introduction-to-making-dynamic-and-interactive-plots-with-d3-a9e859413c5a&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fan-introduction-to-making-dynamic-and-interactive-plots-with-d3-a9e859413c5a&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fan-introduction-to-making-dynamic-and-interactive-plots-with-d3-a9e859413c5a&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fan-introduction-to-making-dynamic-and-interactive-plots-with-d3-a9e859413c5a&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----a9e859413c5a--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----a9e859413c5a--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://naveenvenkatesan.medium.com/?source=post_page-----a9e859413c5a--------------------------------", "anchor_text": ""}, {"url": "https://naveenvenkatesan.medium.com/?source=post_page-----a9e859413c5a--------------------------------", "anchor_text": "Naveen Venkatesan"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F7779ee5bf58d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fan-introduction-to-making-dynamic-and-interactive-plots-with-d3-a9e859413c5a&user=Naveen+Venkatesan&userId=7779ee5bf58d&source=post_page-7779ee5bf58d----a9e859413c5a---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fa9e859413c5a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fan-introduction-to-making-dynamic-and-interactive-plots-with-d3-a9e859413c5a&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fa9e859413c5a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fan-introduction-to-making-dynamic-and-interactive-plots-with-d3-a9e859413c5a&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@chuttersnap?utm_source=medium&utm_medium=referral", "anchor_text": "chuttersnap"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://towardsdatascience.com/an-introduction-to-making-scientific-publication-plots-with-python-ea19dfa7f51e", "anchor_text": "An Introduction to Making Scientific Publication Plots with PythonAn introduction on how to use Python to plot data for scientific publicationstowardsdatascience.com"}, {"url": "https://github.com/venkatesannaveen/medium-articles", "anchor_text": "Github repository"}, {"url": "https://twitter.com/naveenv_92", "anchor_text": "Twitter"}, {"url": "https://www.linkedin.com/in/naveenvenkatesan/", "anchor_text": "LinkedIn"}, {"url": "https://medium.com/tag/data-science?source=post_page-----a9e859413c5a---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/data-visualization?source=post_page-----a9e859413c5a---------------data_visualization-----------------", "anchor_text": "Data Visualization"}, {"url": "https://medium.com/tag/d3js?source=post_page-----a9e859413c5a---------------d3js-----------------", "anchor_text": "D3js"}, {"url": "https://medium.com/tag/javascript?source=post_page-----a9e859413c5a---------------javascript-----------------", "anchor_text": "JavaScript"}, {"url": "https://medium.com/tag/programming?source=post_page-----a9e859413c5a---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fa9e859413c5a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fan-introduction-to-making-dynamic-and-interactive-plots-with-d3-a9e859413c5a&user=Naveen+Venkatesan&userId=7779ee5bf58d&source=-----a9e859413c5a---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fa9e859413c5a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fan-introduction-to-making-dynamic-and-interactive-plots-with-d3-a9e859413c5a&user=Naveen+Venkatesan&userId=7779ee5bf58d&source=-----a9e859413c5a---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fa9e859413c5a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fan-introduction-to-making-dynamic-and-interactive-plots-with-d3-a9e859413c5a&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----a9e859413c5a--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fa9e859413c5a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fan-introduction-to-making-dynamic-and-interactive-plots-with-d3-a9e859413c5a&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----a9e859413c5a---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----a9e859413c5a--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----a9e859413c5a--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----a9e859413c5a--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----a9e859413c5a--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----a9e859413c5a--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----a9e859413c5a--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----a9e859413c5a--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----a9e859413c5a--------------------------------", "anchor_text": ""}, {"url": "https://naveenvenkatesan.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://naveenvenkatesan.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Naveen Venkatesan"}, {"url": "https://naveenvenkatesan.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "487 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F7779ee5bf58d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fan-introduction-to-making-dynamic-and-interactive-plots-with-d3-a9e859413c5a&user=Naveen+Venkatesan&userId=7779ee5bf58d&source=post_page-7779ee5bf58d--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fe736f4929535&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fan-introduction-to-making-dynamic-and-interactive-plots-with-d3-a9e859413c5a&newsletterV3=7779ee5bf58d&newsletterV3Id=e736f4929535&user=Naveen+Venkatesan&userId=7779ee5bf58d&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}