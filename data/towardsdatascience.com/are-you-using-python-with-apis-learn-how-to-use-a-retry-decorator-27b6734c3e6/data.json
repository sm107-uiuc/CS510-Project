{"url": "https://towardsdatascience.com/are-you-using-python-with-apis-learn-how-to-use-a-retry-decorator-27b6734c3e6", "time": 1682993033.5869749, "path": "towardsdatascience.com/are-you-using-python-with-apis-learn-how-to-use-a-retry-decorator-27b6734c3e6/", "webpage": {"metadata": {"title": "Are you using Python with APIs? Learn how to use a retry decorator! | by Fabian Bosler | Towards Data Science", "h1": "Are you using Python with APIs? Learn how to use a retry decorator!", "description": "People often describe Python as a \u201cglue-language.\u201d The term \u201cglue-language\u201d to me entails that a language helps to connect systems and makes sure that data gets from A to B in a desired structure and\u2026"}, "outgoing_paragraph_urls": [{"url": "https://medium.com/@fabianbosler/membership", "anchor_text": "https://medium.com/@fabianbosler/membership", "paragraph_index": 25}], "all_paragraphs": ["People often describe Python as a \u201cglue-language.\u201d The term \u201cglue-language\u201d to me entails that a language helps to connect systems and makes sure that data gets from A to B in a desired structure and format.", "I have built countless ETL-scripts (Extraction Transformation Load) with Python. All those scripts essentially are functioning according to the same principle. They are pulling data from somewhere, transform the data, and then run a final operation. This last operation would typically mean to upload the data somewhere, but could also be a conditional deletion.", "An ever-increasing proportion of a typical company\u2019s infrastructure is moving to the cloud. More companies are shifting towards a micro-service approach. These paradigm shifts away from local to cloud-based means that you probably also have faced a situation where you had to pull data from somewhere or write data somewhere that is not your local computer.", "On a small scale, there rarely are problems around that. If some extraction or writeback fails, you would typically notice that and would be able to remedy the mistake. But, as you move towards larger-scale operations and potentially hundreds of thousands of transactions, you don\u2019t want to get screwed over by a temporary drop of internet-connection, too many concurrent writes, a temporarily unresponsive source system, or god knows what else.", "I found a very simple retry-decorator to be a saving grace in countless situations like that. Most of my projects, at one point or another, end up having the retry decorator in some util module.", "In Python, functions are first-class objects. A function is just like any other object. This fact, among other things, means that a function can be dynamically created, passed to a function itself, and even changed. Take a look at the following (albeit silly) example:", "It is good to know that we can wrap a function with another function to fulfill a particular need. We could, for example, make sure that the function reports to some logging endpoint whenever called, we could print out the arguments, we could implement type checking, preprocessing, or postprocessing to just name a few possibilities. Let\u2019s take a look at a simple example:", "Both functions fail when being called with the string '2'. We could throw a type conversion function in the mix and decorate our first_func and second_func with that.", "This convert_to_numeric wrapper function expects a function as an argument and returns another function.", "Now, while previously failing, if you wrap the functions and then call them with a string number, all works as expected.", "So what is going on here?", "Well, our convert_to_numeric takes a function (A) as an argument and returns a new function (B). The new function (B), when called, calls function (A) but instead of calling it with the passed argument x it calls function (A) with float(x) and therefore solving our previous TypeError problem.", "To make it a little bit easier for the developer, Python provides a special Syntax. We can also do the following:", "The above syntax is equivalent to:", "This syntax makes a little clearer what exactly is happening, especially when using multiple decorators.", "Now that we have covered the basics, let\u2019s move to my favorite and heavily used retry-decorator:", "Wrapping a wrapped function. That is some inception stuff right there. But bear with me, it is not that complicated!", "Let\u2019s walk through the code step by step:", "Alternatively, a little bit more specific:", "Calling the decorated function and running into errors would then lead to something like this:", "Here we have nice logging, we print out the args and kwargs and function name, which should make debugging and fixing the problem a breeze (should the error persist event after all the retries are used up).", "There you have it. You learned how decorators work in Python and how to decorate your mission-critical functions with a simple retry decorator to make sure they will execute even in the face of some uncertainty.", "If you like what you read and don\u2019t want to miss new stories, subscribe here:", "Some further reading about how to speed up your code:", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "EX-Consultant turned tech geek! Business intelligence, marketing, advanced analytics, and machine learning. \ud83d\udc49 https://medium.com/@fabianbosler/membership \ud83d\udc48"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F27b6734c3e6&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fare-you-using-python-with-apis-learn-how-to-use-a-retry-decorator-27b6734c3e6&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fare-you-using-python-with-apis-learn-how-to-use-a-retry-decorator-27b6734c3e6&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fare-you-using-python-with-apis-learn-how-to-use-a-retry-decorator-27b6734c3e6&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fare-you-using-python-with-apis-learn-how-to-use-a-retry-decorator-27b6734c3e6&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----27b6734c3e6--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----27b6734c3e6--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@fabianbosler?source=post_page-----27b6734c3e6--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@fabianbosler?source=post_page-----27b6734c3e6--------------------------------", "anchor_text": "Fabian Bosler"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F1a2df7c24f4f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fare-you-using-python-with-apis-learn-how-to-use-a-retry-decorator-27b6734c3e6&user=Fabian+Bosler&userId=1a2df7c24f4f&source=post_page-1a2df7c24f4f----27b6734c3e6---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F27b6734c3e6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fare-you-using-python-with-apis-learn-how-to-use-a-retry-decorator-27b6734c3e6&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F27b6734c3e6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fare-you-using-python-with-apis-learn-how-to-use-a-retry-decorator-27b6734c3e6&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://pixabay.com/photos/?utm_source=link-attribution&utm_medium=referral&utm_campaign=image&utm_content=1081904", "anchor_text": "Free-Photos"}, {"url": "https://pixabay.com/?utm_source=link-attribution&utm_medium=referral&utm_campaign=image&utm_content=1081904", "anchor_text": "Pixabay"}, {"url": "https://gist.github.com/FBosler/be10229aba491a8c912e3a1543bbc74e", "anchor_text": "here"}, {"url": "https://medium.com/@fabianbosler/membership", "anchor_text": "Join Medium with my referral link - Fabian BoslerAs a Medium member, a portion of your membership fee goes to writers you read, and you get full access to every story\u2026medium.com"}, {"url": "https://medium.com/better-programming/every-python-programmer-should-know-the-not-so-secret-threadpool-642ec47f2000", "anchor_text": "Every Python Programmer Should Know the Not-So-Secret ThreadPoolYou are just a few lines of code away from speeding up your code by orders of magnitude with multithreadingmedium.com"}, {"url": "https://medium.com/better-programming/every-python-programmer-should-know-lru-cache-from-the-standard-library-8e6c20c6bc49", "anchor_text": "Every Python Programmer Should Know Lru_cache From the Standard LibraryYou are just one line of code away from speeding up your functions by using simple caching functionalitymedium.com"}, {"url": "https://medium.com/tag/programming?source=post_page-----27b6734c3e6---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/tag/python?source=post_page-----27b6734c3e6---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/software-development?source=post_page-----27b6734c3e6---------------software_development-----------------", "anchor_text": "Software Development"}, {"url": "https://medium.com/tag/data-science?source=post_page-----27b6734c3e6---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/software-engineering?source=post_page-----27b6734c3e6---------------software_engineering-----------------", "anchor_text": "Software Engineering"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F27b6734c3e6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fare-you-using-python-with-apis-learn-how-to-use-a-retry-decorator-27b6734c3e6&user=Fabian+Bosler&userId=1a2df7c24f4f&source=-----27b6734c3e6---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F27b6734c3e6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fare-you-using-python-with-apis-learn-how-to-use-a-retry-decorator-27b6734c3e6&user=Fabian+Bosler&userId=1a2df7c24f4f&source=-----27b6734c3e6---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F27b6734c3e6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fare-you-using-python-with-apis-learn-how-to-use-a-retry-decorator-27b6734c3e6&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----27b6734c3e6--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F27b6734c3e6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fare-you-using-python-with-apis-learn-how-to-use-a-retry-decorator-27b6734c3e6&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----27b6734c3e6---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----27b6734c3e6--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----27b6734c3e6--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----27b6734c3e6--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----27b6734c3e6--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----27b6734c3e6--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----27b6734c3e6--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----27b6734c3e6--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----27b6734c3e6--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@fabianbosler?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@fabianbosler?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Fabian Bosler"}, {"url": "https://medium.com/@fabianbosler/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "2.3K Followers"}, {"url": "https://medium.com/@fabianbosler/membership", "anchor_text": "https://medium.com/@fabianbosler/membership"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F1a2df7c24f4f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fare-you-using-python-with-apis-learn-how-to-use-a-retry-decorator-27b6734c3e6&user=Fabian+Bosler&userId=1a2df7c24f4f&source=post_page-1a2df7c24f4f--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F85b3b5e26759&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fare-you-using-python-with-apis-learn-how-to-use-a-retry-decorator-27b6734c3e6&newsletterV3=1a2df7c24f4f&newsletterV3Id=85b3b5e26759&user=Fabian+Bosler&userId=1a2df7c24f4f&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}