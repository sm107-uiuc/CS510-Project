{"url": "https://towardsdatascience.com/how-mobile-location-data-could-help-you-limit-exposure-to-covid-19-cb821b560809", "time": 1683008863.0629718, "path": "towardsdatascience.com/how-mobile-location-data-could-help-you-limit-exposure-to-covid-19-cb821b560809/", "webpage": {"metadata": {"title": "How Mobile Location Data Could Help You Limit Exposure to Covid-19 | by Lily Su | Towards Data Science", "h1": "How Mobile Location Data Could Help You Limit Exposure to Covid-19", "description": "At Data Analytics NYC, we are using anonymized mobile location data of the past month to get a general idea of how foot traffic to some of the most populous retail areas in our city has fluctuated in traffic."}, "outgoing_paragraph_urls": [{"url": "https://location-data.predic.io/", "anchor_text": "Predicio data portal", "paragraph_index": 23}, {"url": "https://data.cityofnewyork.us/Transportation/Brooklyn-Bridge-Automated-Pedestrian-Counts-Demons/6fi9-q3ta", "anchor_text": "NYC Open Data Portal on Pedestrian traffic counts on pedestrians crossing the Brooklyn Bridge", "paragraph_index": 24}, {"url": "https://datamillnorth.org/dataset/leeds-city-centre-footfall-data", "anchor_text": "people count and eight specific high traffic locations provided by the Leeds City Council", "paragraph_index": 24}, {"url": "https://www.linkedin.com/in/jefntungila/", "anchor_text": "Jef Ntungila", "paragraph_index": 57}], "all_paragraphs": ["In light of the recent protests, there may be concerns over mobile tracking. We would like to assure that the data we are using is truly anonymized. We have no intention of analyzing foot traffic beyond helping people limit Covid-19 exposure while running errands.", "Going outside the house for any purpose has become an invitation to put oneself in exposure to Covid-19, but what are some measures we can take to limit our risk?", "Online shopping platforms have been overloaded with orders for most of social isolation, making it near impossible to get delivery in especially the outer boroughs in late March and early April. Sometimes choices are limited and making that one trip is inevitable whether to the bank, to do laundry, to get supplies for the next few weeks.", "But beyond just getting up going on our way to the grocery store or post office, is there anything to one can do to avoid that line around the block?", "As confirmed cases in NYC dwindle and the weather is beginning to feel like summer, antibody testing is still fallible and Covid-19 testing has stayed in short supply. The crux of returning to \u201cnormal life\u201d is the mixing of infected and susceptible people unbeknownst to each other leading to the influx of new cases.", "As we have seen in Singapore and South Korea, reopening without clear strategies on mitigating high-exposure situations were followed by a resurgence of new cases. Singapore became the site with the most cases in South Asia in late April. South Korea saw a spike of new cases comparable to where they were at more than a month prior after their first week of re-opening.", "Instead of the back and forth pendulum swings of re-openings and reinstated lock downs, can our awareness of pedestrian traffic contribute to flattening the curve?", "Data Analytics NYC and Predicio used anonymized mobile location data of the past month to get a general idea of how foot traffic to some of the most populous retail areas in our city has fluctuated hour-by-hour, week-by-week so that you might use such insights to have a safer shopping experience and shorten the time of your trip.", "The anonymous mobile data used for analysis brought to you by Predicio, an up and coming location-based behavioral intelligence startup that provides GDPR-compliant and CCPA-compliant location data from apps where users have consented to share their location.", "We first looked at the data by honing in on a random sample of 100,000 anonymized mobile location points each hour within a 10 x 10 mile radius in the greater NYC region to generate our visualizations hour by hour on Tuesdays over the course of a month.", "Out of our 100,000 data points in our region of interest, we looked at the foot traffic density over a quarter-mile radius around a point of interest and generated these visualizations:", "We also wanted to people to see how the pedestrian traffic compares in relation to each other hour-by-hour as a whole throughout one day.", "On the grounds that the histogram fluctuates widely day-to-day, we combined histograms and took the median foot traffic of the past month.", "As one can see, taking the median foot traffic, which eliminates outliers where marginal observations pull at our general pattern, gives a smoother distribution that correlates with our assumptions of traffic as it relates to normal sleeping schedules.", "We deduced that the least crowded times are right when the store opens and evenings before the establishments close.", "We arrived at this conclusion based on the operating hours on Tuesdays being 9AM \u2014 8 PM at our location of interest, then deducing from the foot traffic count by hour. As the establishment approaches opening time, we saw a spike in foot traffic starting from the hour before. The levels of foot traffic from opening time does fluctuate into the afternoon but remains high as compared to 7PM, one hour before closing time.", "It makes sense why people would not like to go run errands in the evenings. Who knows if the merchandise will be out of stock, and worse if the location is crowded one may not accomplish their task before the establishment closes?", "Some other ways we are looking at the data was to look at a longer span of time, on a day basis to build upon our discovery of patterns.", "In the plot to the left, and bottom, instead of dividing into days, we looking at a continuous stream of hours visually. Then we performed some time series analysis using ARIMA modeling to get a general sense of repeating patterns over days, weeks and months, experimenting with patterns found in various time spans.", "As you can see, a big part of the work is to separate the signal from the noise. One way that we are also fine-tuning where we are observing the data is to better isolate our mobile data points to only within the block that our point of interest sits upon.", "Here\u2019s how we compare to Google Map\u2019s smoothed out plot for Tuesdays for Penn Station filtering out all other foot traffic outside the block above that Penn Station sits upon:", "As one can see, there is a somewhat wide variation in foot traffic based on our data due various reasons such as certain users being more active on their phones and our limited sample intensifying our results.", "If you are curious as to how we arrived at our visuals, the following will be a window into the technical aspects of our analysis, presented in the form of a tutorial.", "From the Predicio data portal, we extracted data by hour, we filtered a geographical radius of interest, picked a specific location to focus on, then made further analyses. The following shows how we did it and how you can manipulate location information too!", "You can use any location data to follow along as long as you have a longitude, latitude and time. Here are two similar open data sets to try a hand: the NYC Open Data Portal on Pedestrian traffic counts on pedestrians crossing the Brooklyn Bridge, or a pre-configured data set with people count and eight specific high traffic locations provided by the Leeds City Council.", "Depending on the data you have, you might need to hone down on what you want to focus on and convert to the proper date time. The following code condenses some possible wrangling you might need to make.", "Here are example steps you might decide to take to organize your data:", "1. Narrow down on an area of focus and apply your wrangle function on just the area.", "2. Create a new dataframe that filters just the distance from our point of interest.", "3. Plot a heatmap for each hour and save a cropped screenshot of the plot.", "In our analysis, we took a 100,000 sample over a 14 x 14 mile radius per hour around the location of interest.", "We then processed just our 2,400,000 sample using the wrangle function to get the proper date time format.", "Due to the fact that the filtering processes taking a good amount of time, we wrapped our loops in TQDM to see a progress bar of the process.", "Now that we have a dataframe with the proper time, we\u2019re going to pinpoint our location by creating a new column with our distance from the location of interest using Geopy.", "We then created a new dataframe that isolates only points where distance to point of interest is less than .5 km or a quarter mile radius.", "To create a histogram in matplotlib, we plotted the dataframe as a groupby like so:", "The method in which we isolate specific locations is to draw polygons in a mapping software not unlike connect-the-dots then convert the polygon shape to a .shp file like below. We show an example of Penn Station:", "To filter only mobile data points within our polygon, we geocode our longitude and latitude coordinates into a geopandas dataframe, then create a new column saving the results of a conditional for whether or not our point is in the shape.", "Finally we perform dataframe filtering to extract only dataframe rows within the shape.", "The below is the result of our filtering:", "With our data filtered, we can safely eliminate data outside our scope of interest.", "To generate the heatmap above, we used Folium, a wrapper around Leaflet.js which makes beautiful interactive maps that you can view in any browser.", "The script we came up with to generate the heatmap works as follows we introduce our script, looping over a visual per hour into multiple parts below:", "1. For each hour, create a dataframe filtered just for the specific hour", "2. The heatmap receives an array of longitude and latitude coordinates and the Folium map settings among other parameters.", "3. Save the Folium map under a url name, then with Selenium, go into the url and take a screenshot and save it.", "Within a for loop between hours 0 and 23, we create a new dataframe filtering only the hour in questions, then generate a plot.", "For the plot, we first instantiate a map object, set an epicenter for the map to center itself to, specify a map theme, then indicate a level of zoom. The code snippet below is a continuation of the for-loop above.", "For the heatmap object, we pass in a list of longitudes and latitudes, then specify the radius of our heatmap, max zoom and add to the map that we just instantiated. The code snippet below is a continuation of the for-loop above.", "Lastly, we create a URL for the .html that we saved out to retrieve from then save our Folium plot at that location. The code snippet below is a continuation of the for-loop above.", "We use Selenium the webdriver to go to the webpage and take a screenshot, save, then quit. The code snippet below is a continuation of the for-loop above.", "Our output thus far looks like the rainbow and black and white image below.", "Because we want our visualizations to be more evocative, we first made some stylistic decisions in a photo editing program like Photoshop, then we automated the process to batch-execute annotations in Python.", "We used Pillow, an imaging library to change the hue and saturation of the heatmap from a rainbow gradient to magenta\u2019s and cyan\u2019Mos. We also eased the map background of black and grays to dark blues and applied text. We plan to showcase a tutorial on image processing in a future article.", "This image above, which also uses Pillow for annotation, was generated in Datashader, which handles large datasets well. Datashader integrates with Dask, Holoviews, Bokeh, and Geoviews to create dynamic, zoom-able maps overlayed on map tiles. This default code snippet was what was used to generate the static visualization, which was then compiled via Pillow into a .gif:", "We, like you, are still enveloped in wonderment of the power in numbers that all cities illuminate. As New York City begins reopening in the coming weeks, we hope you stay safe.", "Thanks so much for learning with us. If you\u2019d like to have a conversation surrounding this project, please don\u2019t hesitate to reach out.", "Acknowledgements: Thanks to Jef Ntungila for implementing efficient wrangling, statistical analysis, plotting and optimization.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "We help decision-makers gain the necessary insights to make informed decisions to advance your business."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fcb821b560809&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-mobile-location-data-could-help-you-limit-exposure-to-covid-19-cb821b560809&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-mobile-location-data-could-help-you-limit-exposure-to-covid-19-cb821b560809&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-mobile-location-data-could-help-you-limit-exposure-to-covid-19-cb821b560809&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-mobile-location-data-could-help-you-limit-exposure-to-covid-19-cb821b560809&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----cb821b560809--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----cb821b560809--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@lilysu?source=post_page-----cb821b560809--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@lilysu?source=post_page-----cb821b560809--------------------------------", "anchor_text": "Lily Su"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fffbe2a892404&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-mobile-location-data-could-help-you-limit-exposure-to-covid-19-cb821b560809&user=Lily+Su&userId=ffbe2a892404&source=post_page-ffbe2a892404----cb821b560809---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fcb821b560809&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-mobile-location-data-could-help-you-limit-exposure-to-covid-19-cb821b560809&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fcb821b560809&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-mobile-location-data-could-help-you-limit-exposure-to-covid-19-cb821b560809&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://location-data.predic.io/", "anchor_text": "here"}, {"url": "https://location-data.predic.io/", "anchor_text": "Predicio data portal"}, {"url": "https://data.cityofnewyork.us/Transportation/Brooklyn-Bridge-Automated-Pedestrian-Counts-Demons/6fi9-q3ta", "anchor_text": "NYC Open Data Portal on Pedestrian traffic counts on pedestrians crossing the Brooklyn Bridge"}, {"url": "https://datamillnorth.org/dataset/leeds-city-centre-footfall-data", "anchor_text": "people count and eight specific high traffic locations provided by the Leeds City Council"}, {"url": "https://www.linkedin.com/in/jefntungila/", "anchor_text": "Jef Ntungila"}, {"url": "https://medium.com/tag/data?source=post_page-----cb821b560809---------------data-----------------", "anchor_text": "Data"}, {"url": "https://medium.com/tag/business-development?source=post_page-----cb821b560809---------------business_development-----------------", "anchor_text": "Business Development"}, {"url": "https://medium.com/tag/marketing-strategies?source=post_page-----cb821b560809---------------marketing_strategies-----------------", "anchor_text": "Marketing Strategies"}, {"url": "https://medium.com/tag/technology-strategy?source=post_page-----cb821b560809---------------technology_strategy-----------------", "anchor_text": "Technology Strategy"}, {"url": "https://medium.com/tag/location-intelligence?source=post_page-----cb821b560809---------------location_intelligence-----------------", "anchor_text": "Location Intelligence"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fcb821b560809&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-mobile-location-data-could-help-you-limit-exposure-to-covid-19-cb821b560809&user=Lily+Su&userId=ffbe2a892404&source=-----cb821b560809---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fcb821b560809&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-mobile-location-data-could-help-you-limit-exposure-to-covid-19-cb821b560809&user=Lily+Su&userId=ffbe2a892404&source=-----cb821b560809---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fcb821b560809&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-mobile-location-data-could-help-you-limit-exposure-to-covid-19-cb821b560809&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----cb821b560809--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fcb821b560809&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-mobile-location-data-could-help-you-limit-exposure-to-covid-19-cb821b560809&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----cb821b560809---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----cb821b560809--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----cb821b560809--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----cb821b560809--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----cb821b560809--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----cb821b560809--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----cb821b560809--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----cb821b560809--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----cb821b560809--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@lilysu?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@lilysu?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Lily Su"}, {"url": "https://medium.com/@lilysu/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "70 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fffbe2a892404&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-mobile-location-data-could-help-you-limit-exposure-to-covid-19-cb821b560809&user=Lily+Su&userId=ffbe2a892404&source=post_page-ffbe2a892404--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fusers%2Fffbe2a892404%2Flazily-enable-writer-subscription&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-mobile-location-data-could-help-you-limit-exposure-to-covid-19-cb821b560809&user=Lily+Su&userId=ffbe2a892404&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}