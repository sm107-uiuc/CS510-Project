{"url": "https://towardsdatascience.com/what-is-time-series-decomposition-and-how-does-it-work-9b67e007ae90", "time": 1683009610.057098, "path": "towardsdatascience.com/what-is-time-series-decomposition-and-how-does-it-work-9b67e007ae90/", "webpage": {"metadata": {"title": "What is time series decomposition and how does it work? | by Sachin Date | Towards Data Science", "h1": "What is time series decomposition and how does it work?", "description": "A time series can be thought of as being made up of a seasonal component, a trend component, a cyclical component, and a noise component."}, "outgoing_paragraph_urls": [{"url": "https://www.itl.nist.gov/div898/handbook/pmc/section4/pmc422.htm", "anchor_text": "centered moving average", "paragraph_index": 27}, {"url": "https://gist.github.com/sachinsdate/40b07da727f8d3d2476dbef4a2f06b6a", "anchor_text": "here is the link", "paragraph_index": 48}, {"url": "https://fred.stlouisfed.org/series/ECOMN", "anchor_text": "https://fred.stlouisfed.org/series/ECOMN", "paragraph_index": 49}, {"url": "https://fred.stlouisfed.org/legal/", "anchor_text": "FRED copyright terms", "paragraph_index": 49}, {"url": "http://www.sidc.be/SILSO/,", "anchor_text": "http://www.sidc.be/SILSO/,", "paragraph_index": 50}, {"url": "https://creativecommons.org/licenses/by-nc/4.0/", "anchor_text": "CC-BY-NA", "paragraph_index": 50}, {"url": "http://www.measuringworth.com/DJA/", "anchor_text": "http://www.measuringworth.com/DJA/", "paragraph_index": 51}, {"url": "https://www.linkedin.com/in/sachindate/", "anchor_text": "Sachin Date", "paragraph_index": 52}, {"url": "https://creativecommons.org/licenses/by-nc-sa/4.0/", "anchor_text": "CC-BY-NC-SA", "paragraph_index": 52}, {"url": "https://timeseriesreasoning.medium.com", "anchor_text": "follow me", "paragraph_index": 53}], "all_paragraphs": ["A time series can be thought of as being made up of 4 components:", "A seasonal componentA trend componentA cyclical component, andA noise component.", "The seasonal component explains the periodic ups and downs one sees in many data sets such as the one shown below.", "In the above example, the seasonal period is approximately 12 months and it peaks in March and bottoms out in November or December before peaking in March again.", "A time series can contain multiple superimposed seasonal periods. A classic example is a time series of hourly temperatures at a weather station. Since the Earth rotates around its axis, the graph of hourly temperatures at a weather station will show a seasonal period of 24 hours. The Earth also revolves around the Sun in a tilted manner, leading to seasonal temperature variations. If you follow the temperature at the weather station at say 11 am for 365 days, you will see a second pattern emerging that has a period of 12 months. The 24 hour long daily pattern is superimposed on the 12 month long yearly pattern.", "In case of the hourly weather data, one knows what are the underlying physical phenomena that are causing the two seasonal patterns. But in most cases, it\u2019s not possible to know what are all the factors that are introducing seasonality into your data. And so, it is seldom easy to unearth all the seasonal periods that may be hiding in a time series.", "That being said, the commonly occurring seasonal periods are a day, week, month, quarter (or season), and year.", "Seasonality is also observed on much longer time scales such as in the solar cycle, which follows a roughly 11 year period.", "The Trend component refers to the pattern in the data that spans across seasonal periods.", "The time series of retail eCommerce sales shown below demonstrates a possibly quadratic trend (y = x\u00b2) that spans across the 12 month long seasonal period:", "The cyclical component represents phenomena that happen across seasonal periods. Cyclical patterns do not have a fixed period like seasonal patterns do. An example of a cyclical pattern is the cycles of boom and bust that stock markets experience in response to world events.", "The cyclical component is hard to isolate and it's often \u2018left alone\u2019 by combining it with the trend component.", "The noise or the random component is what remains behind when you separate out seasonality and trend from the time series. Noise is the effect of factors that you do not know, or which you cannot measure. It is the effect of the known unknowns, or the unknown unknowns.", "The trend, seasonal and noise components can combine in an additive or a multiplicative way.", "Additive combinationIf the seasonal and noise components change the trend by an amount that is independent of the value of trend, the trend, seasonal and noise components are said to behave in an additive way. One can represent this situation as follows:", "where y_i = the value of the time series at the ith time step.t_i = the trend component at the ith time step.s_i = the seasonal component at the ith time step.n_i = the noise component at the ith time step.", "Multiplicative combinationIf the seasonal and noise components change the trend by an amount that depends on the value of trend, the three components are said to behave in a multiplicative way as follows:", "There are many decomposition methods available ranging from simple moving average based methods to powerful ones such as STL.", "In Python, the statsmodels library has a seasonal_decompose() method that lets you decompose a time series into trend, seasonality and noise in one line of code.", "In my articles, we like to get into the weeds. So before we use seasonal_decompose(), let\u2019s do a deep dive into a simple, yet powerful time series decomposition technique.", "Let\u2019s understand how decomposition really works under the covers.", "We\u2019ll hand-crank out the decomposition of a time series into its trend, seasonal and noise components using a simple procedure based on moving averages using the following steps:", "STEP 1: Identify the length of the seasonal periodSTEP 2: Isolate the trendSTEP 3: Isolate the seasonality+noiseSTEP 4: Isolate the seasonalitySTEP 5: Isolate the noise", "We\u2019ll use as an example, the following time series of retail sales of user cars dealers in the US:", "Let\u2019s load the data into a pandas DataFrame and plot the time series:", "Now let\u2019s begin the step by step decomposition of this time series.", "STEP 1: Try to guess the duration of the seasonal component in your data. In the above example, we\u2019ll guess it to be 12 months.", "STEP 2: Now run a 12 month centered moving average on the data. This moving average is spread across a total of 13 months. i.e. 6 months each on the left and right side of the center month. The 12 month centered MA is an average of two moving averages that are shifted from each other by 1 month, effectively making it a weighted moving average.", "Here is an illustration of how this centered MA can be calculated in Microsoft Excel:", "This MA will smooth out seasonality and noise and bring out the trend.", "Continuing with our Python example, here is how we can calculate the centered moving average in Python:", "Notice how the values at indices [i-6] and [i+6] are weighted by 1.0/24 while the rest of the values are each weighted by 1.0/12.", "Let\u2019s plot the resulting time series that is contained in column \u20182 x 12 CMA (TREND)\u2019:", "As you can see, our moving average transformation has highlighted the trend component of the retail sales time series:", "STEP 3: Now we have a decision to make. Depending on whether the composition is multiplicative or additive, we\u2019ll need to divide or subtract the trend component from the original time series to retrieve the seasonal and noise components. If we inspect the original car sales time series, we can see that the seasonal swings are increasing in proportion to the current value of the time series. Hence we\u2019ll assume that the seasonality is multiplicative. We\u2019ll also take a small leap of faith to assume that the noise is multiplicative.", "Thus the retail used car sales time series is assumed to have the following multiplicative decomposition model:", "Time series value = trend component * seasonal component * noise component", "seasonal component * noise component = Time series value / trend component", "We\u2019ll add a new column into our data frame and fill it with the product of the seasonal and noise components using the above formula.", "Let\u2019s plot the new column. This time, we will see the seasonality and noise showing through:", "STEP 4: Next, we will get the \u2018pure\u2019 seasonal component out of the mixture of seasonality and noise, by calculating the average value of the seasonal component for all January months, all February months, all March months and so on.", "Let's plot this pure seasonal component:", "STEP 5: Finally, we will divide the noisy seasonal value that we had isolated earlier with the averaged out seasonal value to yield just the noise component for each month.", "noise component = noisy seasonal component / averaged out seasonal component", "So there you have it! We just hand cranked out the procedure for decomposing a time series into its trend, seasonal and noise components.", "Here is a collage of the time series and its constituent components:", "Now that we know how decomposition works from the inside, we can cheat a little, and use the seasonal_decompose() in statsmodels to do all of the above work in one line of code:", "Here is the complete Python source code:", "And here is the link to the data set used in the Python example.", "U.S. Census Bureau, E-Commerce Retail Sales [ECOMNSA], retrieved from FRED, Federal Reserve Bank of St. Louis; https://fred.stlouisfed.org/series/ECOMN, under FRED copyright terms.", "SILSO, World Data Center \u2014 Sunspot Number and Long-term Solar Observations, Royal Observatory of Belgium, on-line Sunspot Number catalogue: http://www.sidc.be/SILSO/, 1818\u20132020 (CC-BY-NA)", "Samuel H. Williamson, \u201cDaily Closing Values of the DJA in the United States, 1885 to Present,\u201d MeasuringWorth, 2020 URL: http://www.measuringworth.com/DJA/", "All images in this article are copyright Sachin Date under CC-BY-NC-SA, unless a different source and copyright are mentioned underneath the image.", "Thanks for reading! If you liked this article, please follow me to receive tips, how-tos and programming advice on time series analysis.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "In-depth explanations of regression and time series models. Get the intuition behind the equations."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F9b67e007ae90&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-is-time-series-decomposition-and-how-does-it-work-9b67e007ae90&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-is-time-series-decomposition-and-how-does-it-work-9b67e007ae90&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-is-time-series-decomposition-and-how-does-it-work-9b67e007ae90&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-is-time-series-decomposition-and-how-does-it-work-9b67e007ae90&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----9b67e007ae90--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----9b67e007ae90--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://timeseriesreasoning.medium.com/?source=post_page-----9b67e007ae90--------------------------------", "anchor_text": ""}, {"url": "https://timeseriesreasoning.medium.com/?source=post_page-----9b67e007ae90--------------------------------", "anchor_text": "Sachin Date"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fb75b5b1730f3&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-is-time-series-decomposition-and-how-does-it-work-9b67e007ae90&user=Sachin+Date&userId=b75b5b1730f3&source=post_page-b75b5b1730f3----9b67e007ae90---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F9b67e007ae90&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-is-time-series-decomposition-and-how-does-it-work-9b67e007ae90&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F9b67e007ae90&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-is-time-series-decomposition-and-how-does-it-work-9b67e007ae90&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://pixabay.com/users/nutraveller-5661007/", "anchor_text": "nutraveller"}, {"url": "https://pixabay.com/", "anchor_text": "Pixabay"}, {"url": "https://pixabay.com/service/license/", "anchor_text": "Pixabay license"}, {"url": "https://fred.stlouisfed.org/series/MRTSSM44112USN", "anchor_text": "US FRED"}, {"url": "https://sachin-date.medium.com/", "anchor_text": "Author"}, {"url": "http://www.sidc.be/silso/datafiles", "anchor_text": "SILSO"}, {"url": "https://sachin-date.medium.com/", "anchor_text": "Author"}, {"url": "https://fred.stlouisfed.org/series/ECOMNSA", "anchor_text": "US FRED"}, {"url": "https://sachin-date.medium.com/", "anchor_text": "Author"}, {"url": "https://www.measuringworth.com/datasets/DJA/index.php", "anchor_text": "MeasuringWorth.com"}, {"url": "https://en.wikipedia.org/wiki/Dow_Jones_Industrial_Average", "anchor_text": "Wikipedia"}, {"url": "https://sachin-date.medium.com/", "anchor_text": "Author"}, {"url": "https://fred.stlouisfed.org/series/MRTSSM44112USN", "anchor_text": "US FRED"}, {"url": "https://sachin-date.medium.com/", "anchor_text": "Author"}, {"url": "https://www.itl.nist.gov/div898/handbook/pmc/section4/pmc422.htm", "anchor_text": "centered moving average"}, {"url": "https://sachin-date.medium.com/", "anchor_text": "Author"}, {"url": "https://sachin-date.medium.com/", "anchor_text": "Author"}, {"url": "https://sachin-date.medium.com/", "anchor_text": "Author"}, {"url": "https://sachin-date.medium.com/", "anchor_text": "Author"}, {"url": "https://sachin-date.medium.com/", "anchor_text": "Author"}, {"url": "https://sachin-date.medium.com/", "anchor_text": "Author"}, {"url": "https://sachin-date.medium.com/", "anchor_text": "Author"}, {"url": "https://gist.github.com/sachinsdate/40b07da727f8d3d2476dbef4a2f06b6a", "anchor_text": "here is the link"}, {"url": "https://fred.stlouisfed.org/series/MRTSSM44112USN", "anchor_text": "https://fred.stlouisfed.org/series/MRTSSM44112USN"}, {"url": "https://fred.stlouisfed.org/legal/", "anchor_text": "FRED copyright terms"}, {"url": "https://fred.stlouisfed.org/series/ECOMN", "anchor_text": "https://fred.stlouisfed.org/series/ECOMN"}, {"url": "https://fred.stlouisfed.org/legal/", "anchor_text": "FRED copyright terms"}, {"url": "http://www.sidc.be/SILSO/,", "anchor_text": "http://www.sidc.be/SILSO/,"}, {"url": "https://creativecommons.org/licenses/by-nc/4.0/", "anchor_text": "CC-BY-NA"}, {"url": "http://www.measuringworth.com/DJA/", "anchor_text": "http://www.measuringworth.com/DJA/"}, {"url": "https://www.linkedin.com/in/sachindate/", "anchor_text": "Sachin Date"}, {"url": "https://creativecommons.org/licenses/by-nc-sa/4.0/", "anchor_text": "CC-BY-NC-SA"}, {"url": "https://timeseriesreasoning.medium.com", "anchor_text": "follow me"}, {"url": "https://medium.com/tag/time-series-analysis?source=post_page-----9b67e007ae90---------------time_series_analysis-----------------", "anchor_text": "Time Series Analysis"}, {"url": "https://medium.com/tag/decomposition?source=post_page-----9b67e007ae90---------------decomposition-----------------", "anchor_text": "Decomposition"}, {"url": "https://medium.com/tag/python?source=post_page-----9b67e007ae90---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/trend?source=post_page-----9b67e007ae90---------------trend-----------------", "anchor_text": "Trend"}, {"url": "https://medium.com/tag/seasonality?source=post_page-----9b67e007ae90---------------seasonality-----------------", "anchor_text": "Seasonality"}, {"url": "https://creativecommons.org/licenses/by-sa/4.0/", "anchor_text": "Some rights reserved"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F9b67e007ae90&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-is-time-series-decomposition-and-how-does-it-work-9b67e007ae90&user=Sachin+Date&userId=b75b5b1730f3&source=-----9b67e007ae90---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F9b67e007ae90&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-is-time-series-decomposition-and-how-does-it-work-9b67e007ae90&user=Sachin+Date&userId=b75b5b1730f3&source=-----9b67e007ae90---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F9b67e007ae90&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-is-time-series-decomposition-and-how-does-it-work-9b67e007ae90&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----9b67e007ae90--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F9b67e007ae90&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-is-time-series-decomposition-and-how-does-it-work-9b67e007ae90&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----9b67e007ae90---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----9b67e007ae90--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----9b67e007ae90--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----9b67e007ae90--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----9b67e007ae90--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----9b67e007ae90--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----9b67e007ae90--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----9b67e007ae90--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----9b67e007ae90--------------------------------", "anchor_text": ""}, {"url": "https://timeseriesreasoning.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://timeseriesreasoning.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Sachin Date"}, {"url": "https://timeseriesreasoning.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "4K Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fb75b5b1730f3&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-is-time-series-decomposition-and-how-does-it-work-9b67e007ae90&user=Sachin+Date&userId=b75b5b1730f3&source=post_page-b75b5b1730f3--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fab0c6502600b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-is-time-series-decomposition-and-how-does-it-work-9b67e007ae90&newsletterV3=b75b5b1730f3&newsletterV3Id=ab0c6502600b&user=Sachin+Date&userId=b75b5b1730f3&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://www.amazon.com/dp/1508496129", "anchor_text": "An Illustrated Guide to Mobile Technology2015"}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}