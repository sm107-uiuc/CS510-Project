{"url": "https://towardsdatascience.com/generating-subtitles-automatically-using-mozilla-deepspeech-562c633936a7", "time": 1683014053.263499, "path": "towardsdatascience.com/generating-subtitles-automatically-using-mozilla-deepspeech-562c633936a7/", "webpage": {"metadata": {"title": "Generate Subtitles for any video file using Mozilla DeepSpeech | by Abhiroop Talasila | Towards Data Science", "h1": "Generate Subtitles for any video file using Mozilla DeepSpeech", "description": "In the age of OTT platforms, there are still some who prefer to download movies/videos from YouTube/Facebook/Torrents (shush \ud83e\udd2b) over streaming. I am one of them and on one such occasion, I couldn\u2019t\u2026"}, "outgoing_paragraph_urls": [{"url": "https://github.com/mozilla/DeepSpeech", "anchor_text": "DeepSpeech", "paragraph_index": 0}, {"url": "https://github.com/abhirooptalasila/AutoSub", "anchor_text": "here", "paragraph_index": 1}, {"url": "https://heartbeat.fritz.ai/a-2019-guide-for-automatic-speech-recognition-f1e1129a141c", "anchor_text": "Automatic Speech Recognition Engines", "paragraph_index": 2}, {"url": "https://arxiv.org/abs/1412.5567", "anchor_text": "Deep Speech research paper by Baidu", "paragraph_index": 4}, {"url": "https://github.com/tensorflow/tensorflow", "anchor_text": "Tensorflow,", "paragraph_index": 4}, {"url": "https://commonvoice.mozilla.org/en", "anchor_text": "Mozilla Common Voice", "paragraph_index": 4}, {"url": "https://github.com/tyiannak/pyAudioAnalysis", "anchor_text": "pyAudioAnalysis", "paragraph_index": 10}, {"url": "https://github.com/abhirooptalasila/AutoSub/blob/4f65218ee40207e1ccf3ec3ed49fa9dd300721f4/autosub/writeToFile.py#L7", "anchor_text": "here", "paragraph_index": 12}, {"url": "https://www.linkedin.com/in/abhiroop1999/", "anchor_text": "LinkedIn", "paragraph_index": 16}, {"url": "https://github.com/abhirooptalasila", "anchor_text": "GitHub", "paragraph_index": 16}], "all_paragraphs": ["In the age of OTT platforms, there are still some who prefer to download movies/videos from YouTube/Facebook/Torrents (shush \ud83e\udd2b) over streaming. I am one of them and on one such occasion, I couldn\u2019t find the subtitle file for a particular movie I had downloaded. Then, the idea for AutoSub struck me and since I had worked with DeepSpeech previously, I decided to use it to generate subtitles for my movie.", "Given a video file as input, my goal was to generate an .srt file. The subtitles could then be imported into any modern video player. In this article, I\u2019m going to walk you through some of the code. You can find the project on my GitHub here with instructions on how to install locally.", "Prerequisites: Intermediate understanding of Python, some familiarity with Automatic Speech Recognition Engines, and a basic understanding of signal processing will be great.", "Note: This is my first article on Medium. If you have any suggestions/doubts please comment them down. Happy reading :)", "DeepSpeech is an open-source speech-to-text engine based on the original Deep Speech research paper by Baidu. It is one of the best speech recognition tools out there given its versatility and ease of use. It is built using Tensorflow, is trainable using custom datasets, trained on the huge Mozilla Common Voice dataset, and is licensed under the Mozilla Public License. The best advantage is that we can download the model files and perform inference locally just within a couple of minutes!", "Although, DeepSpeech does have its issues. The model struggles with non-native English accent speech. There is a workaround to this \u2014 fine-tuning the model using a custom dataset in the language we want to predict. I\u2019ll write another article on how to do that soon.", "If you\u2019re working with speech recognition tasks, I strongly recommend you have a look at DeepSpeech.", "Let\u2019s start off by installing some packages we\u2019ll be needing. All commands have been tested on Ubuntu 18.04 in a pip virtual environment.", "2. DeepSpeech: Install the python package from PyPI and download the model file. The scorer file is optional but greatly increases accuracy.", "Now that we\u2019re all set up, let\u2019s first extract the audio from our input video file using FFmpeg. We need to create a subprocess to run UNIX commands. DeepSpeech expects the input audio file to be sampled at 16kHz and hence the arguments to ffmpeg given below.", "Now, suppose our input video file is 2 hours long. Running DeepSpeech inference on the whole file is not generally recommended. I\u2019ve tried it and it didn\u2019t work out too well. One workaround to this is to split the audio file on silent segments. After splitting, we have multiple small files containing speech which we need to infer. This is done using pyAudioAnalysis.", "The following function uses the functions read_audio_file() and silenceRemoval() from pyAudioAnalysis and generates segment limits from where speech begins and ends. The arguments control the smoothing window size in seconds and weight factor in (0,1). Using the segment limits, smaller audio files are written to disk.", "We now need to run DeepSpeech inference on these files individually and write the inferred text to a SRT file. Let\u2019s start by creating an instance of the DeepSpeech Model and add the scorer file. We then read the audio file into a NumPy array and feed it into the speech-to-text function to produce inference. As mentioned above, pyAudioAnalysis saves files with the segment limits time in seconds. We need to extract those limits and convert it into a suitable form before writing to the SRT file. The write function is defined here.", "The whole process shouldn\u2019t take more than 60% of the original video file duration. Here\u2019s a video showing a sample run on my laptop.", "There\u2019s one more area I hope to improve in the future. The inferred text is unformatted. We need to add proper punctuation, correct possible small mistakes in words (off by one letter), and split very long segments into smaller ones (although this will be difficult to automate).", "That\u2019s it! If you\u2019ve reached till here, thank you for sticking along :)", "You can find me here: LinkedIn, GitHub", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "A 20 year-old trying to make things work | CS Undergrad"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F562c633936a7&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgenerating-subtitles-automatically-using-mozilla-deepspeech-562c633936a7&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgenerating-subtitles-automatically-using-mozilla-deepspeech-562c633936a7&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgenerating-subtitles-automatically-using-mozilla-deepspeech-562c633936a7&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgenerating-subtitles-automatically-using-mozilla-deepspeech-562c633936a7&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----562c633936a7--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----562c633936a7--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@abhiroop.talasila?source=post_page-----562c633936a7--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@abhiroop.talasila?source=post_page-----562c633936a7--------------------------------", "anchor_text": "Abhiroop Talasila"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fbb867ef5dba5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgenerating-subtitles-automatically-using-mozilla-deepspeech-562c633936a7&user=Abhiroop+Talasila&userId=bb867ef5dba5&source=post_page-bb867ef5dba5----562c633936a7---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F562c633936a7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgenerating-subtitles-automatically-using-mozilla-deepspeech-562c633936a7&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F562c633936a7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgenerating-subtitles-automatically-using-mozilla-deepspeech-562c633936a7&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@miteneva?utm_source=medium&utm_medium=referral", "anchor_text": "Maria Teneva"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://github.com/mozilla/DeepSpeech", "anchor_text": "DeepSpeech"}, {"url": "https://github.com/abhirooptalasila/AutoSub", "anchor_text": "here"}, {"url": "https://heartbeat.fritz.ai/a-2019-guide-for-automatic-speech-recognition-f1e1129a141c", "anchor_text": "Automatic Speech Recognition Engines"}, {"url": "https://arxiv.org/abs/1412.5567", "anchor_text": "Deep Speech research paper by Baidu"}, {"url": "https://github.com/tensorflow/tensorflow", "anchor_text": "Tensorflow,"}, {"url": "https://commonvoice.mozilla.org/en", "anchor_text": "Mozilla Common Voice"}, {"url": "https://github.com/mozilla/DeepSpeech/releases/download/v0.8.2/deepspeech-0.8.2-models.scorer", "anchor_text": "https://github.com/mozilla/DeepSpeech/releases/download/v0.8.2/deepspeech-0.8.2-models.scorer"}, {"url": "https://github.com/tyiannak/pyAudioAnalysis", "anchor_text": "pyAudioAnalysis"}, {"url": "https://github.com/abhirooptalasila/AutoSub/blob/4f65218ee40207e1ccf3ec3ed49fa9dd300721f4/autosub/writeToFile.py#L7", "anchor_text": "here"}, {"url": "https://www.linkedin.com/in/abhiroop1999/", "anchor_text": "LinkedIn"}, {"url": "https://github.com/abhirooptalasila", "anchor_text": "GitHub"}, {"url": "https://medium.com/tag/deep-speech?source=post_page-----562c633936a7---------------deep_speech-----------------", "anchor_text": "Deep Speech"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----562c633936a7---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/tag/nlp?source=post_page-----562c633936a7---------------nlp-----------------", "anchor_text": "NLP"}, {"url": "https://medium.com/tag/python?source=post_page-----562c633936a7---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/speech-recognition?source=post_page-----562c633936a7---------------speech_recognition-----------------", "anchor_text": "Speech Recognition"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F562c633936a7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgenerating-subtitles-automatically-using-mozilla-deepspeech-562c633936a7&user=Abhiroop+Talasila&userId=bb867ef5dba5&source=-----562c633936a7---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F562c633936a7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgenerating-subtitles-automatically-using-mozilla-deepspeech-562c633936a7&user=Abhiroop+Talasila&userId=bb867ef5dba5&source=-----562c633936a7---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F562c633936a7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgenerating-subtitles-automatically-using-mozilla-deepspeech-562c633936a7&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----562c633936a7--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F562c633936a7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgenerating-subtitles-automatically-using-mozilla-deepspeech-562c633936a7&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----562c633936a7---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----562c633936a7--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----562c633936a7--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----562c633936a7--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----562c633936a7--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----562c633936a7--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----562c633936a7--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----562c633936a7--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----562c633936a7--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@abhiroop.talasila?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@abhiroop.talasila?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Abhiroop Talasila"}, {"url": "https://medium.com/@abhiroop.talasila/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "55 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fbb867ef5dba5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgenerating-subtitles-automatically-using-mozilla-deepspeech-562c633936a7&user=Abhiroop+Talasila&userId=bb867ef5dba5&source=post_page-bb867ef5dba5--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Ff238fc6aef56&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgenerating-subtitles-automatically-using-mozilla-deepspeech-562c633936a7&newsletterV3=bb867ef5dba5&newsletterV3Id=f238fc6aef56&user=Abhiroop+Talasila&userId=bb867ef5dba5&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}