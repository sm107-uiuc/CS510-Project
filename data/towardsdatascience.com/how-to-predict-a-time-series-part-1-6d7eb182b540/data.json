{"url": "https://towardsdatascience.com/how-to-predict-a-time-series-part-1-6d7eb182b540", "time": 1682997071.3204129, "path": "towardsdatascience.com/how-to-predict-a-time-series-part-1-6d7eb182b540/", "webpage": {"metadata": {"title": "How to Predict a Time Series Part 1 | by Bryant Crocker | Towards Data Science", "h1": "How to Predict a Time Series Part 1", "description": "Time series forecasts are quite different from other supervised regression problems. My background is in business analytics, so I\u2019ve learned quite a bit about classical forecasting methodology\u2026"}, "outgoing_paragraph_urls": [{"url": "https://github.com/pysr1/Forecasting", "anchor_text": "github", "paragraph_index": 3}, {"url": "https://cran.r-project.org/web/packages/forecast/index.html", "anchor_text": "forecast", "paragraph_index": 8}, {"url": "https://people.duke.edu/~rnau/411arim.htm?fbclid=IwAR0BkB6uIiFsoV1NicmHhKbGKvlgHA7Jn1VLXUhgQaoMnHk3SU8k6Jhg19Y", "anchor_text": "link", "paragraph_index": 19}, {"url": "https://otexts.com/fpp2/ets.html", "anchor_text": "here", "paragraph_index": 21}, {"url": "https://otexts.com/fpp2/", "anchor_text": "book", "paragraph_index": 26}, {"url": "https://fable.tidyverts.org/", "anchor_text": "fable", "paragraph_index": 26}], "all_paragraphs": ["Time series forecasts are quite different from other supervised regression problems. My background is in business analytics, so I\u2019ve learned quite a bit about classical forecasting methodology (arima, exponential smoothing state space models , moving average etc\u2026). When talking to many data scientists, I have found that many of them know little about predicting time series and treat it like other supervised learning problems with little success (usually because they aren\u2019t engineering the right features).", "The R forecast library is one of the most complete and popular libraries for handling and forecasting time series. While I do recognize that python has become more popular among data scientists, this does not mean that it is the best language for everything. Time series forecasting in R is much more mature and routine.", "The goal of this article is walk through forecasting workflow and evaluation. Thus, I will leave the math to a minimum in this blog post. There are many blog posts that deal with the math behind these methods and I will link to a few. In this blog post I \u2018d like to share a few things I learned from forecasting a lot of time series using the forecast package. In follow up blog posts I will cover workflow with facebook prophet and workflow for one step ahead predictions using supervised machine learning algorithms.", "Not all the code used to write this article will be presented in the blog post. The full code with even more examples can be found on my github.", "The time series that I will try to predict is the weekly recorded bike path volume in the city of Seattle. The script seatleBike.r creates this dataset (pulls together 13 public datasets from Seattle open data portal, aggregates to weekly frequency).", "I\u2019ll start off with a quick line plot to visualize the time series.", "When predicting a time series, we typically use previous values of the series to predict a future value. Because we use these previous values, it\u2019s useful to plot the correlation of the y vector (the volume of traffic on bike paths in a given week) with previous y vector values. This plot is called an auto correlation plot (auto correlation because it correlation with itself).", "Our time series does not appear to have a trend, but it does have seasonality. When there is seasonality in a time series (which is typically the case in most real world time series) a good baseline model is a seasonal naive model.", "A seasonal naive model predicts the last value of the same season (same week last year) when forecasting. We can fit these models with the snaive() function from the forecast package. I previously stated that I would limit the math in order to zoom in on forecasting workflow. This is the only formula that I will present in the blog post. I opted to present formula to introduce notation frequently used in forecasting. I will link to more info on the formulas/math behind the rest of the models presented.", "I fit the model on the train set, and predict on a held out test set to see how the model performs forecasting data that it hasn\u2019t seen.", "Another way that we can evaluate forecasts is by checking the models residuals on the training set with the checkresiduals() functions. The function returns the test statistic for a Ljung-Box test, which is a null hypothesis test to see whether the residuals are white noise. I don\u2019t like null hypothesis testing so I will only do this once.", "Another issue with residual analysis is that is stresses the accuracy of point estimates rather than the accuracy of the predictive interval. These tests also come with a laundry list of assumptions that often aren\u2019t met with real world time series.", "auto.arima() is one of the most popular functions in the forecast package. Despite its popularity, I am not a big fan of it. In my experience, arima models work best with monthly, quarterly or yearly data, but fail to capture the seasonality of weekly or daily data without Fourier terms (which auto.arima doesn\u2019t use). Still, auto.arima() is often the only forecasting function that data scientists use.", "SARIMA models follow the form (p,d,q)x(P,D,Q)m, arima models follow the form (p, d, q):", "p = number of autoregressive terms", "q = number of moving average terms", "Q=number of seasonal moving average terms", "drift = drift coefficient or constant (both arimas and sarimas can include drift)", "So that means that our model is an SARIMA model that has 1 autoregressive term, 1 seasonal autoregressive term, and 1 seasonal difference term. The model has no moving average or seasonal moving average terms. It also has a drift coefficient. We can confirm this with the summary function:", "Those interested in learning more about arima models can refer to the package author\u2019s book or this link.", "When an arima model is created with additional exogenous regressors and domain knowledge, they tend to perform quite well. when analysts opt to just use the auto.arima function, models don\u2019t tend to perform well (especially for weekly data).", "Exponential smoothing methods are a family of related models, that use exponentially decreasing weights for previous values to predict the current value of a time series. These methods are extremely popular in the business analytics and supply chain domains. For the sake of brevity, I am going to use the ETS function which fits a variety of exponential smoothing methods and selects the best one. I highly recommend that you read more about the function here. This article is getting rather long, so I will not explain further.", "Exponential smoothing models tend to work well daily data (if it doesn\u2019t have a yearly seasonality so frequency can be set to 7), monthly and yearly data, but not weekly data. In many business situations we need to forecast weekly data and understand uncertainty.", "TBATS is typically my go to method for forecasting time series with the forecast package. Like other methods in the forecast package, it is fully automatic. The model itself is flexible enough to fit a bunch of different time series and is still relatively fast to fit.", "TBATS is an extension of exponential smoothing methods, that adds ARMA errors and trigonometric terms. One could write a whole blog post about this method, so I will opt to link to a couple of good posts on the method for those who are interested because a full explanation would simply make this article too long.", "I know the subtitle is incorrect the prediction interval is in grey.", "To find out more about forecasting I highly recommend checking out Rob Hyndman, the package author\u2019s book. Dr. Hyndman is also working on a new version of the book using the new fable package which brings forecasting to the tidyverse (to check it out just change the 2 to a 3 in the URL). I have not been able to get fable to run on my machine yet. It will also likely be a while until it as mature as the forecast package, so for now I would stick to using the forecast package.", "\u201cThe data made available here has been modified for use from its original source, which is the City of Seattle. Neither the City of Seattle nor the Office of the Chief Technology Officer (OCTO) makes any claims as to the completeness, timeliness, accuracy or content of any data contained in this application; makes any representation of any kind, including, but not limited to, warranty of the accuracy or fitness for a particular use; nor are any such warranties to be implied or inferred with respect to the information or data furnished herein. The data is subject to change as modifications and updates are complete. It is understood that the information contained in the web feed is being used at one\u2019s own risk.\u201d", "The modifications that have been made to the dataset can all be read clearly from my code.", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F6d7eb182b540&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-predict-a-time-series-part-1-6d7eb182b540&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-predict-a-time-series-part-1-6d7eb182b540&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-predict-a-time-series-part-1-6d7eb182b540&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-predict-a-time-series-part-1-6d7eb182b540&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----6d7eb182b540--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----6d7eb182b540--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@Psr1?source=post_page-----6d7eb182b540--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@Psr1?source=post_page-----6d7eb182b540--------------------------------", "anchor_text": "Bryant Crocker"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F93a17102968d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-predict-a-time-series-part-1-6d7eb182b540&user=Bryant+Crocker&userId=93a17102968d&source=post_page-93a17102968d----6d7eb182b540---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F6d7eb182b540&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-predict-a-time-series-part-1-6d7eb182b540&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F6d7eb182b540&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-predict-a-time-series-part-1-6d7eb182b540&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://github.com/pysr1/Forecasting", "anchor_text": "github"}, {"url": "https://cran.r-project.org/web/packages/forecast/index.html", "anchor_text": "forecast"}, {"url": "https://otexts.com/fpp2/simple-methods.html", "anchor_text": "https://otexts.com/fpp2/simple-methods.html"}, {"url": "https://robjhyndman.com/hyndsight/forecasting-weekly-data/", "anchor_text": "don\u2019t tend to work well on weekly data"}, {"url": "https://people.duke.edu/~rnau/411arim.htm?fbclid=IwAR0BkB6uIiFsoV1NicmHhKbGKvlgHA7Jn1VLXUhgQaoMnHk3SU8k6Jhg19Y", "anchor_text": "link"}, {"url": "https://otexts.com/fpp2/ets.html", "anchor_text": "here"}, {"url": "https://otexts.com/fpp2/complexseasonality.html", "anchor_text": "pointed out"}, {"url": "https://otexts.com/fpp2/", "anchor_text": "book"}, {"url": "https://fable.tidyverts.org/", "anchor_text": "fable"}, {"url": "https://github.com/pysr1/Forecasting", "anchor_text": "CODE"}, {"url": "https://data.seattle.gov/stories/s/Data-Policy/6ukr-wvup/", "anchor_text": "Seattle Open Data Portal:"}, {"url": "https://creativecommons.org/licenses/by-sa/3.0/", "anchor_text": "https://creativecommons.org/licenses/by-sa/3.0/"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----6d7eb182b540---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/tag/time-series-forecasting?source=post_page-----6d7eb182b540---------------time_series_forecasting-----------------", "anchor_text": "Time Series Forecasting"}, {"url": "https://medium.com/tag/r-programming?source=post_page-----6d7eb182b540---------------r_programming-----------------", "anchor_text": "R Programming"}, {"url": "https://medium.com/tag/tidyverse?source=post_page-----6d7eb182b540---------------tidyverse-----------------", "anchor_text": "Tidyverse"}, {"url": "https://medium.com/tag/real-world-forecasting?source=post_page-----6d7eb182b540---------------real_world_forecasting-----------------", "anchor_text": "Real World Forecasting"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F6d7eb182b540&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-predict-a-time-series-part-1-6d7eb182b540&user=Bryant+Crocker&userId=93a17102968d&source=-----6d7eb182b540---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F6d7eb182b540&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-predict-a-time-series-part-1-6d7eb182b540&user=Bryant+Crocker&userId=93a17102968d&source=-----6d7eb182b540---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F6d7eb182b540&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-predict-a-time-series-part-1-6d7eb182b540&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----6d7eb182b540--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F6d7eb182b540&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-predict-a-time-series-part-1-6d7eb182b540&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----6d7eb182b540---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----6d7eb182b540--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----6d7eb182b540--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----6d7eb182b540--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----6d7eb182b540--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----6d7eb182b540--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----6d7eb182b540--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----6d7eb182b540--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----6d7eb182b540--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@Psr1?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@Psr1?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Bryant Crocker"}, {"url": "https://medium.com/@Psr1/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "199 Followers"}, {"url": "https://www.linkedin.com/in/bcrocke1/", "anchor_text": "https://www.linkedin.com/in/bcrocke1/"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F93a17102968d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-predict-a-time-series-part-1-6d7eb182b540&user=Bryant+Crocker&userId=93a17102968d&source=post_page-93a17102968d--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F907e19d94c65&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-predict-a-time-series-part-1-6d7eb182b540&newsletterV3=93a17102968d&newsletterV3Id=907e19d94c65&user=Bryant+Crocker&userId=93a17102968d&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}