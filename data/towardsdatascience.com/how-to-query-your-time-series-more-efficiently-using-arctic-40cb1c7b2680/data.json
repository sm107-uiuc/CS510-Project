{"url": "https://towardsdatascience.com/how-to-query-your-time-series-more-efficiently-using-arctic-40cb1c7b2680", "time": 1683006014.6658392, "path": "towardsdatascience.com/how-to-query-your-time-series-more-efficiently-using-arctic-40cb1c7b2680/", "webpage": {"metadata": {"title": "How to Query Your Time Series Data More Efficiently Using Arctic | by Thiago Candido | Towards Data Science", "h1": "How to Query Your Time Series Data More Efficiently Using Arctic", "description": "Ever wondered how you can make your data analysis process more time-efficient when dealing with large time series data sets? Arctic may be what you\u2019re looking for. Arctic is a database for Python\u2026"}, "outgoing_paragraph_urls": [{"url": "https://github.com/man-group/arctic", "anchor_text": "Arctic", "paragraph_index": 0}, {"url": "https://www.mongodb.com/", "anchor_text": "Mongo DB", "paragraph_index": 1}, {"url": "https://github.com/lz4/lz4", "anchor_text": "LZ4", "paragraph_index": 1}, {"url": "https://docs.mongodb.com/manual/installation/", "anchor_text": "official MongoDB docs page.", "paragraph_index": 7}, {"url": "https://pypi.org/project/pip/", "anchor_text": "pip", "paragraph_index": 8}, {"url": "https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html", "anchor_text": "DataFrames", "paragraph_index": 9}, {"url": "https://github.com/tgcandido/time-series-with-arctic/blob/master/finance.csv", "anchor_text": "finance.csv", "paragraph_index": 16}, {"url": "https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_csv.html", "anchor_text": "read_csv", "paragraph_index": 17}, {"url": "https://arctic.readthedocs.io/en/latest/", "anchor_text": "official docs", "paragraph_index": 28}, {"url": "https://pymongo.readthedocs.io/en/stable/", "anchor_text": "PyMongo", "paragraph_index": 32}, {"url": "https://www.sqlalchemy.org/", "anchor_text": "SQLAlchemy", "paragraph_index": 32}, {"url": "https://github.com/tgcandido/time-series-with-arctic", "anchor_text": "here", "paragraph_index": 40}, {"url": "https://twitter.com/ogaihtcandido", "anchor_text": "Twitter", "paragraph_index": 42}], "all_paragraphs": ["Ever wondered how you can make your data analysis processes more time-efficient when dealing with large time series data sets? Arctic may be what you\u2019re looking for.", "Arctic is a database for Python designed with one thing in mind: performance. Using Mongo DB as its underlying database, it stores data efficiently, using LZ4 compression, and can query hundreds of millions of rows per second.", "In addition to the performance numbers, it makes a pretty strong case with some of its features:", "Storage engines are the mechanisms which interact directly with the underlying MongoDB database. They are called Stores. To achieve the best possible performance for your queries, you can choose one of the three built-in in Stores:", "You can also make your own Store implementation and plug-in into Arctic, to better suit your own data.", "\u201cOk, I see, pretty convincing points, but I don\u2019t know if it is worth the hassle of using a new database\u2026\u201d \u2014 You, the Reader, not yet convinced.", "So, let\u2019s see how easy it is to use Arctic and see if I can get you, the Reader, a little bit more into the idea of using yet another database. This will be a very simple walkthrough just to illustrate some of the core features of Arctic.", "First of all, you need to have MongoDB installed and running. You can read the instructions for your operating system in the official MongoDB docs page.", "Having done that, we can install Arctic using pip", "We need to install the Pandas library as we will be dealing with DataFrames", "First things first: let\u2019s import Arctic into our empty Python script", "Now, we need to connect Arctic to its underlying MongoDB instance. You can connect Arctic to any MongoDB instance hosted on the cloud or in your local network. Since I\u2019m running MongoDB on my laptop, I will be using localhost as the address to my instance.", "Great! Now we need to create a library.", "Arctic separates different data using the concept of libraries. They can be markets, regions, users, etc.", "In this example, I will be using a ~160MB CSV file with some financial data. Let\u2019s create a Finance library to store it. By not passing a lib_type value to the initialize_library method, Arctic will default this library to use the Versionstore storage engine. That\u2019s fine for our example.", "We need to access the library that we just created in order to write some data into it. Let\u2019s do that by indexing our db object with the library name.", "Before writing the data, let\u2019s open our time series data file. In this example, I\u2019m will be using a file called finance.csv (demo file with the CSV structure used in this example).", "Let\u2019s use the Pandas library to open the CSV file. First, we need to import the library, and then use the read_csv method to read the contents into a Pandas DataFrame.", "We will also set the unix column as the index of the DataFrame, after converting it from string to datetime.", "Ok! We are ready to write our data into Arctic. To do that, we need to define a symbol.", "A symbol is a string that we will use to read or write our data within a library.", "Let\u2019s use the symbol Stocks to store the contents of our loaded df into the library finance_library.", "We can verify that the data was inserted correctly by using the method read and accessing the data property of the returned object to get the resulting DataFrame.", "To perform a query that looks for a specific time interval, we can use the date_range parameter in the read method.", "First, we need to import DateRange from arctic.date :", "We can pass to the date_range parameter an instance of a DateRange. We can create it by calling its constructor and passing a start date and an end date as parameters.", "Now we can run the query:", "And that\u2019s it! In this very simple example we saw the main features of Arctic by implementing a Python script that handles some financial data.", "The official docs are really good, and have pretty much all the information needed, from the basics to the advanced features. There\u2019s no need to read the source code of the package, but if you are interested to see how Arctic\u2019s works and how it achieves its high performance, I encourage you to do that.", "But I\u2019m afraid I won\u2019t convince you, the Reader, until I show you some performance numbers, am I right?", "These numbers were all obtained running the scripts on my 2.3 GHz Dual Core 13-inch 2017 Mac Book Pro.", "Bear in mind that this in no way is supposed to be a full benchmark of the Arctic database. It\u2019s a simple comparison, made with Python\u2019s time library, between Arctic, MongoDB, SQLite and plain CSV files.", "Here are the results of running a naive Pandas read_csv, a PyMongo query, a SQLAlchemy query (using an SQLite database) and an Arctic read using the ~160 MB financial data as the source.", "The PyMongo and SQLAlchemy query results were parsed into a DataFrame after the engines returned the results, and that time was considered in the benchmark. Both databases were indexed by the unix column.", "Those results came from making a \u201cget all\u201d kind of query. Let\u2019s try to add a range parameter to see if the results hold up.", "The results are still in favor of Arctic after the use of the DateRange, which is the main type of query used we use when dealing with time series data.", "The same CSV file was used to seed each one of the databases.", "This was the amount of disk space used by each one of the alternatives:", "Using Arctic when dealing with large time series data sets allows us to achieve remarkable speed and compression improvements. With its easy setup and usage, it can increase productivity and save some precious time.", "Even without using its more advanced features, like snapshots or other storage engines, we can make a strong case for the use of Arctic to deal with time series data.", "The code of the walkthrough and the benchmark can be found here. It does not contain the full CSV file for license reasons, but I encourage you to run with some of your own data to see if your results are similar to mine.", "I hope you enjoyed reading this post.", "If you did, consider following me on Twitter.", "Thank you for your time. Take care and keep coding!", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "I help people to use their products and services data intelligently @eximiaco"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F40cb1c7b2680&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-query-your-time-series-more-efficiently-using-arctic-40cb1c7b2680&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-query-your-time-series-more-efficiently-using-arctic-40cb1c7b2680&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-query-your-time-series-more-efficiently-using-arctic-40cb1c7b2680&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-query-your-time-series-more-efficiently-using-arctic-40cb1c7b2680&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----40cb1c7b2680--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----40cb1c7b2680--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://tgcandido.medium.com/?source=post_page-----40cb1c7b2680--------------------------------", "anchor_text": ""}, {"url": "https://tgcandido.medium.com/?source=post_page-----40cb1c7b2680--------------------------------", "anchor_text": "Thiago Candido"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F9d2e6b913e29&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-query-your-time-series-more-efficiently-using-arctic-40cb1c7b2680&user=Thiago+Candido&userId=9d2e6b913e29&source=post_page-9d2e6b913e29----40cb1c7b2680---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F40cb1c7b2680&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-query-your-time-series-more-efficiently-using-arctic-40cb1c7b2680&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F40cb1c7b2680&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-query-your-time-series-more-efficiently-using-arctic-40cb1c7b2680&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://github.com/man-group/arctic", "anchor_text": "Arctic"}, {"url": "https://unsplash.com/@slelham?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Steven Lelham"}, {"url": "https://unsplash.com/s/photos/speed-track?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Unsplash"}, {"url": "https://www.mongodb.com/", "anchor_text": "Mongo DB"}, {"url": "https://github.com/lz4/lz4", "anchor_text": "LZ4"}, {"url": "https://pandas.pydata.org/", "anchor_text": "Pandas"}, {"url": "https://numpy.org/", "anchor_text": "Numpy"}, {"url": "https://docs.mongodb.com/manual/installation/", "anchor_text": "official MongoDB docs page."}, {"url": "https://pypi.org/project/pip/", "anchor_text": "pip"}, {"url": "https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html", "anchor_text": "DataFrames"}, {"url": "https://github.com/tgcandido/time-series-with-arctic/blob/master/finance.csv", "anchor_text": "finance.csv"}, {"url": "https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_csv.html", "anchor_text": "read_csv"}, {"url": "https://arctic.readthedocs.io/en/latest/", "anchor_text": "official docs"}, {"url": "https://pymongo.readthedocs.io/en/stable/", "anchor_text": "PyMongo"}, {"url": "https://www.sqlalchemy.org/", "anchor_text": "SQLAlchemy"}, {"url": "https://github.com/tgcandido/time-series-with-arctic", "anchor_text": "here"}, {"url": "https://twitter.com/ogaihtcandido", "anchor_text": "Twitter"}, {"url": "https://medium.com/tag/programming?source=post_page-----40cb1c7b2680---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/tag/python?source=post_page-----40cb1c7b2680---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/database?source=post_page-----40cb1c7b2680---------------database-----------------", "anchor_text": "Database"}, {"url": "http://creativecommons.org/publicdomain/zero/1.0/", "anchor_text": "No rights reserved"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F40cb1c7b2680&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-query-your-time-series-more-efficiently-using-arctic-40cb1c7b2680&user=Thiago+Candido&userId=9d2e6b913e29&source=-----40cb1c7b2680---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F40cb1c7b2680&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-query-your-time-series-more-efficiently-using-arctic-40cb1c7b2680&user=Thiago+Candido&userId=9d2e6b913e29&source=-----40cb1c7b2680---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F40cb1c7b2680&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-query-your-time-series-more-efficiently-using-arctic-40cb1c7b2680&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----40cb1c7b2680--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F40cb1c7b2680&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-query-your-time-series-more-efficiently-using-arctic-40cb1c7b2680&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----40cb1c7b2680---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----40cb1c7b2680--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----40cb1c7b2680--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----40cb1c7b2680--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----40cb1c7b2680--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----40cb1c7b2680--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----40cb1c7b2680--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----40cb1c7b2680--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----40cb1c7b2680--------------------------------", "anchor_text": ""}, {"url": "https://tgcandido.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://tgcandido.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Thiago Candido"}, {"url": "https://tgcandido.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "319 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F9d2e6b913e29&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-query-your-time-series-more-efficiently-using-arctic-40cb1c7b2680&user=Thiago+Candido&userId=9d2e6b913e29&source=post_page-9d2e6b913e29--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F66796b3e33e0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-query-your-time-series-more-efficiently-using-arctic-40cb1c7b2680&newsletterV3=9d2e6b913e29&newsletterV3Id=66796b3e33e0&user=Thiago+Candido&userId=9d2e6b913e29&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}