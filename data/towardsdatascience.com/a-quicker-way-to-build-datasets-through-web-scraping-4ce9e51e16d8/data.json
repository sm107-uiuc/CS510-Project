{"url": "https://towardsdatascience.com/a-quicker-way-to-build-datasets-through-web-scraping-4ce9e51e16d8", "time": 1683013683.9880278, "path": "towardsdatascience.com/a-quicker-way-to-build-datasets-through-web-scraping-4ce9e51e16d8/", "webpage": {"metadata": {"title": "A Quicker Way to Build Datasets through Web Scraping | by William Yang | Towards Data Science", "h1": "A Quicker Way to Build Datasets through Web Scraping", "description": "If you want to skip the HTML tag digging and get straight to scraping, here\u2019s the gist. Note that the scraper tries to do an exact match with each item in your wanted list. Otherwise, read on for a\u2026"}, "outgoing_paragraph_urls": [{"url": "https://www.yelp.com/biz/chun-yang-tea-flushing-new-york-flushing?osq=bubble%20tea&sort_by=date_desc", "anchor_text": "https://www.yelp.com/biz/chun-yang-tea-flushing-new-york-flushing?osq=bubble%20tea&sort_by=date_desc", "paragraph_index": 4}, {"url": "https://github.com/alirezamika/autoscraper", "anchor_text": "AutoScraper library", "paragraph_index": 9}, {"url": "https://medium.com/@alirezamika", "anchor_text": "Alireza Mika", "paragraph_index": 9}], "all_paragraphs": ["If you want to skip the HTML tag digging and get straight to scraping, here\u2019s the gist. Note that the scraper tries to do an exact match with each item in your wanted list. Otherwise, read on for a short background on webscraping, when it\u2019s useful to scrape websites, and some challenges you may experience while scraping.", "I\u2019ve recently been doing some research into bubble tea trends in the United States. I wanted to look at changes in drink orders, when boutique and franchise bubble tea shops were opened, and customer reviews regarding these establishments. Naturally, I turned to Yelp. But a few limitations very quickly set me back; I was limited to the first 1000 businesses on the Yelp API, and I could only get three Yelp selected reviews per business.", "This makes sense from a business perspective \u2014 you wouldn\u2019t want other businesses easily snooping in on your successes and failures and iterating off that. But it also demonstrates the larger misfortunes about web scraping. On one hand, it\u2019s a great way to obtain data for a side project on a topic we\u2019re interested in. On the other, companies rarely want bots interacting on their websites. Even if they offer APIs, they don\u2019t always expose every piece of information needed.", "Security against webscraping has also increased. From header data verification, to CAPTCHA challenges, to machine-learning guided behavioral approaches, a lot of work has been invested to make it harder for bots to scourge websites. Lastly, most pages don\u2019t immediately provide useful information in HTML. Instead, they are injected through JavaScript execution, and only when a \u201creal user\u201d has been detected.", "Here\u2019s an example from my project. Let\u2019s say you wanted to parse reviews from Yelp on a particular bubble tea shop https://www.yelp.com/biz/chun-yang-tea-flushing-new-york-flushing?osq=bubble%20tea&sort_by=date_desc (I am not affiliated with this bubble tea shop, nor with Yelp. This is a sample from my current project on analyzing bubble tea trends in the United States.)", "You would first need to set up a headless browser, or emulate the header of a real browser, in order to execute any JavaScript on a dynamic webpage.", "Then, connect it to a library that can pull data out of HTML and XML files.", "In order to figure out the specific tag, lemon--span__373c0__3997G raw__373c0__3rKqk, that would lead me to the reviews, I followed the numbered list of steps above, highlighting a sample review, inspecting the elements, and snooping around for the tag of interest.", "This actually ends up being quite brittle, since websites may change how they render their pages at any time. More importantly, this process is redundant, in the sense that we need to first find the desired tags manually before we can set up an automated webscraper.", "Instead of searching for the HTML tag or the XPath, why not just automate the manual search using simple matching rules? This is the basic premise of the AutoScraper library by Alireza Mika. Let\u2019s walk through the same task of scraping Yelp reviews, this time with the AutoScraper library.", "The AutoScraper object #3 takes in a target url #1 and a list of wanted items #2, and builds some rules around the provided parameters #4. Note that it\u2019ll only mark tags that exactly match the items of interest; thus, the review I included in the the wanted_list is the first review on the Yelp webpage in its entirety.", "Upon printing results, you\u2019ll get to see all the elements that the webscraper has found. You can fetch these results again on the same or another url with the following command.", "You may notice that the scraper has picked up on some extraneous pieces of information. You can fine-tune its selections by first grouping them under the rules that the scraper has learned:", "Since groups is a dictionary, you can get the names of the rules by calling print(groups.keys())", "You can then key into the dictionary using a particular rule:", "If the results of the specified rule accurately reflects the desired results, you can choose to keep the rule with the method call:", "Lastly, you can persist the model to file for later use.", "Of course, this library is not foolproof. Click-intensive webpages, such as Google\u2019s reviews of a business, would be rather challenging to automate without a browser emulator.", "Since AutoScraper expects an exact match between items in the wanted list and items that appear on a website, it can be difficult to pinpoint a constantly updating value, such as the price of a stock.", "However, as developers, part of our responsibilities is to tie solutions along a pipeline together to iterate on or create a new product. Hopefully, you can make use of this scraping library, whether in a framework like scrapy, or just to simplify your next scraping task.", "Regardless of how you decide to scrape a website, do so responsibly!", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Aspiring data scientist and dancer. Yale \u201920, Stuy \u201816"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F4ce9e51e16d8&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-quicker-way-to-build-datasets-through-web-scraping-4ce9e51e16d8&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-quicker-way-to-build-datasets-through-web-scraping-4ce9e51e16d8&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-quicker-way-to-build-datasets-through-web-scraping-4ce9e51e16d8&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-quicker-way-to-build-datasets-through-web-scraping-4ce9e51e16d8&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----4ce9e51e16d8--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----4ce9e51e16d8--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@williamyang_84723?source=post_page-----4ce9e51e16d8--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@williamyang_84723?source=post_page-----4ce9e51e16d8--------------------------------", "anchor_text": "William Yang"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F41a3ededc7da&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-quicker-way-to-build-datasets-through-web-scraping-4ce9e51e16d8&user=William+Yang&userId=41a3ededc7da&source=post_page-41a3ededc7da----4ce9e51e16d8---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F4ce9e51e16d8&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-quicker-way-to-build-datasets-through-web-scraping-4ce9e51e16d8&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F4ce9e51e16d8&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-quicker-way-to-build-datasets-through-web-scraping-4ce9e51e16d8&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@tbishop2?utm_source=medium&utm_medium=referral", "anchor_text": "Thomas Bishop"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://www.yelp.com/biz/chun-yang-tea-flushing-new-york-flushing?osq=bubble%20tea&sort_by=date_desc", "anchor_text": "https://www.yelp.com/biz/chun-yang-tea-flushing-new-york-flushing?osq=bubble%20tea&sort_by=date_desc"}, {"url": "https://github.com/alirezamika/autoscraper", "anchor_text": "AutoScraper library"}, {"url": "https://medium.com/@alirezamika", "anchor_text": "Alireza Mika"}, {"url": "https://www.yelp.com/robots.txt", "anchor_text": "https://www.yelp.com/robots.txt"}, {"url": "https://medium.com/tag/web-scraping?source=post_page-----4ce9e51e16d8---------------web_scraping-----------------", "anchor_text": "Web Scraping"}, {"url": "https://medium.com/tag/dataset?source=post_page-----4ce9e51e16d8---------------dataset-----------------", "anchor_text": "Dataset"}, {"url": "https://medium.com/tag/data-collection?source=post_page-----4ce9e51e16d8---------------data_collection-----------------", "anchor_text": "Data Collection"}, {"url": "https://medium.com/tag/python?source=post_page-----4ce9e51e16d8---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F4ce9e51e16d8&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-quicker-way-to-build-datasets-through-web-scraping-4ce9e51e16d8&user=William+Yang&userId=41a3ededc7da&source=-----4ce9e51e16d8---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F4ce9e51e16d8&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-quicker-way-to-build-datasets-through-web-scraping-4ce9e51e16d8&user=William+Yang&userId=41a3ededc7da&source=-----4ce9e51e16d8---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F4ce9e51e16d8&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-quicker-way-to-build-datasets-through-web-scraping-4ce9e51e16d8&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----4ce9e51e16d8--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F4ce9e51e16d8&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-quicker-way-to-build-datasets-through-web-scraping-4ce9e51e16d8&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----4ce9e51e16d8---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----4ce9e51e16d8--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----4ce9e51e16d8--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----4ce9e51e16d8--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----4ce9e51e16d8--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----4ce9e51e16d8--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----4ce9e51e16d8--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----4ce9e51e16d8--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----4ce9e51e16d8--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@williamyang_84723?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@williamyang_84723?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "William Yang"}, {"url": "https://medium.com/@williamyang_84723/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "95 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F41a3ededc7da&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-quicker-way-to-build-datasets-through-web-scraping-4ce9e51e16d8&user=William+Yang&userId=41a3ededc7da&source=post_page-41a3ededc7da--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F6ad4aa4a968a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-quicker-way-to-build-datasets-through-web-scraping-4ce9e51e16d8&newsletterV3=41a3ededc7da&newsletterV3Id=6ad4aa4a968a&user=William+Yang&userId=41a3ededc7da&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}