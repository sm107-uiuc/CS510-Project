{"url": "https://towardsdatascience.com/running-securing-and-deploying-elastic-stack-on-docker-f1a8ebf1dc5b", "time": 1683007341.452363, "path": "towardsdatascience.com/running-securing-and-deploying-elastic-stack-on-docker-f1a8ebf1dc5b/", "webpage": {"metadata": {"title": "Run, Secure, and Deploy Elastic Stack on Docker | Towards Data Science", "h1": "Run, Secure, and Deploy Elastic Stack on Docker \ud83d\udc33", "description": "Compose, Configure, Secure, and Deploy Elastic Stack (ELK) on Docker for smaller-scale Production deployments and Development"}, "outgoing_paragraph_urls": [{"url": "https://github.com/sherifabdlnaby/elastdocker", "anchor_text": "Elastdocker", "paragraph_index": 2}, {"url": "http://localhost:5601/app/kibana#/home/tutorial_directory/logging", "anchor_text": "Use Filebeat to ship logs from services", "paragraph_index": 18}, {"url": "http://localhost:5601/app/kibana#/home/tutorial_directory/metrics", "anchor_text": "Use Metricbeat to ship metrics from services.", "paragraph_index": 18}, {"url": "https://github.com/sherifabdlnaby/elastdocker", "anchor_text": "Elastdocker", "paragraph_index": 21}], "all_paragraphs": ["Elastic Stack (aka ELK) is the current go-to stack for centralized structured logging for your organization. It collects, ingests, and stores your services\u2019 logs (also metrics) while making them searchable & aggregatable & observable. And later on, build alerts and dashboards based on these data.", "In this post, we\u2019ll compose, configure, secure, and deploy Elastic Stack using Docker & Docker-Compose. What we\u2019ll build can be used for development and a small scale production deployment on a docker host.", "To skip the step by step tutorial you can check out my Elastdocker template repository to spin up Elastic Stack on Docker with a single command.", "Elastdocker template has a more polished configuration and better security, as well as monitoring and tools that are often used with Elastic Stack. These extra additions were omitted from this tutorial to keep it simpler.", "Let\u2019s start by making our root directory elk and create five separate folders; elasticsearch ,logstash ,kibana , setup, andsecrets directories.", "Also, create a .env file in the root directory that will hold our parameters.", "Inside ./elasticsearch directory create Dockerfile and add the following:", "We then also add elasticsearch.yml to the ./elastichsearch/config/ directory, this file will be loaded on container startup to configure elasticsearch.", "LogstashInside ./logstash directory create Dockerfile and add the following:", "Inside kibana directory create Dockerfile and add the following:", "We need to create a container that will generate Elasticsearch Keystore that contains Elasticsearch\u2019s Users (and Super User) passwords, and other credentials (just as AWS Key if you\u2019re using S3 plugin for example.This Keystore is created by elasticsearch-keystore present in Elasticsearch docker image.", "This script creates a Keystore and writes it to /secrets/elasticsearch.keystore it then adds $ELASTIC_PASSWORD as the default superuser elastic , We will pass $ELASTIC_PASSWORD to the setup container using docker-compose later.", "This script creates a self-signed single PKCS#12 keystore that includes the node certificate, node key, and CA certificate.", "2.3 Create docker-compose.setup.yml in the root directory that will start the setup container.", "This docker-compose creates an ephemeral container that generates the keystore and certs using the scripts we wrote earlier.", "This will create the container and removes them as they finish to save space. saving its output to /secrets directory.", "Finally, Create the main docker-compose.yml file that will put everything together.", "Add all the parameters to the .env file", "You can now start shipping logs & metrics to Elastic Stack.1. Use Filebeat to ship logs from services. 2. Use Metricbeat to ship metrics from services.Either directly to Elasticsearch or Ingest them using Logstash. And the browse them in Kibana\u2019s Discover window.", "There are numerous guides to ship logs to Elastic Stack once it\u2019s up.", "We can still enhance this composition further, we can enable Self-Monitoring, or add Prometheus Exporters to Monitor the stack with Grafana, Enable SSL for HTTP Layer in addition to the inner-node transport encryption we enabled, add health-checks to images, use tools like ElastAlert or Curator to leverage the stack, add more nodes to the cluster.", "Elastdocker is a template repository that has the more sophisticated version of the Elastic Stack setup we just made including all the points mentioned right above.", "This setup can handle a small workload for production but it will eventually need to scale.", "You can take a look at managed Elastic Stack offerings.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Software Engineering and SRE; Loves anything that scales(And Go)!"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Ff1a8ebf1dc5b&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Frunning-securing-and-deploying-elastic-stack-on-docker-f1a8ebf1dc5b&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Frunning-securing-and-deploying-elastic-stack-on-docker-f1a8ebf1dc5b&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Frunning-securing-and-deploying-elastic-stack-on-docker-f1a8ebf1dc5b&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Frunning-securing-and-deploying-elastic-stack-on-docker-f1a8ebf1dc5b&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----f1a8ebf1dc5b--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----f1a8ebf1dc5b--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://sherifabdlnaby.medium.com/?source=post_page-----f1a8ebf1dc5b--------------------------------", "anchor_text": ""}, {"url": "https://sherifabdlnaby.medium.com/?source=post_page-----f1a8ebf1dc5b--------------------------------", "anchor_text": "Sherif Abdel-Naby"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F43e8644100ea&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Frunning-securing-and-deploying-elastic-stack-on-docker-f1a8ebf1dc5b&user=Sherif+Abdel-Naby&userId=43e8644100ea&source=post_page-43e8644100ea----f1a8ebf1dc5b---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ff1a8ebf1dc5b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Frunning-securing-and-deploying-elastic-stack-on-docker-f1a8ebf1dc5b&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ff1a8ebf1dc5b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Frunning-securing-and-deploying-elastic-stack-on-docker-f1a8ebf1dc5b&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://github.com/sherifabdlnaby/elastdocker", "anchor_text": "Elastdocker"}, {"url": "https://github.com/sherifabdlnaby/elastdocker", "anchor_text": "sherifabdlnaby/elastdockerWith tools like Curator, Rubban, ElastAlert for Alerting. Elastic Stack (AKA ELK) Docker Composition, preconfigured\u2026github.com"}, {"url": "https://github.com/sherifabdlnaby/elastdocker.git", "anchor_text": "https://github.com/sherifabdlnaby/elastdocker.git"}, {"url": "http://localhost:5601", "anchor_text": "localhost:5601"}, {"url": "http://localhost:5601/app/kibana#/home/tutorial_directory/logging", "anchor_text": "Use Filebeat to ship logs from services"}, {"url": "http://localhost:5601/app/kibana#/home/tutorial_directory/metrics", "anchor_text": "Use Metricbeat to ship metrics from services."}, {"url": "https://github.com/sherifabdlnaby/elastdocker", "anchor_text": "Elastdocker"}, {"url": "https://github.com/sherifabdlnaby/elastdocker", "anchor_text": "Elastdocker"}, {"url": "https://github.com/sherifabdlnaby/elastdocker", "anchor_text": "sherifabdlnaby/elastdockerWith tools like Curator, Rubban, ElastAlert for Alerting. Elastic Stack (AKA ELK) Docker Composition, preconfigured\u2026github.com"}, {"url": "https://github.com/sherifabdlnaby/medium-elastic-stack", "anchor_text": "https://github.com/sherifabdlnaby/medium-elastic-stack"}, {"url": "https://medium.com/tag/elastic-stack?source=post_page-----f1a8ebf1dc5b---------------elastic_stack-----------------", "anchor_text": "Elastic Stack"}, {"url": "https://medium.com/tag/docker?source=post_page-----f1a8ebf1dc5b---------------docker-----------------", "anchor_text": "Docker"}, {"url": "https://medium.com/tag/docker-compose?source=post_page-----f1a8ebf1dc5b---------------docker_compose-----------------", "anchor_text": "Docker Compose"}, {"url": "https://medium.com/tag/elk?source=post_page-----f1a8ebf1dc5b---------------elk-----------------", "anchor_text": "Elk"}, {"url": "https://medium.com/tag/logging?source=post_page-----f1a8ebf1dc5b---------------logging-----------------", "anchor_text": "Logging"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Ff1a8ebf1dc5b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Frunning-securing-and-deploying-elastic-stack-on-docker-f1a8ebf1dc5b&user=Sherif+Abdel-Naby&userId=43e8644100ea&source=-----f1a8ebf1dc5b---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Ff1a8ebf1dc5b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Frunning-securing-and-deploying-elastic-stack-on-docker-f1a8ebf1dc5b&user=Sherif+Abdel-Naby&userId=43e8644100ea&source=-----f1a8ebf1dc5b---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ff1a8ebf1dc5b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Frunning-securing-and-deploying-elastic-stack-on-docker-f1a8ebf1dc5b&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----f1a8ebf1dc5b--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Ff1a8ebf1dc5b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Frunning-securing-and-deploying-elastic-stack-on-docker-f1a8ebf1dc5b&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----f1a8ebf1dc5b---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----f1a8ebf1dc5b--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----f1a8ebf1dc5b--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----f1a8ebf1dc5b--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----f1a8ebf1dc5b--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----f1a8ebf1dc5b--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----f1a8ebf1dc5b--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----f1a8ebf1dc5b--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----f1a8ebf1dc5b--------------------------------", "anchor_text": ""}, {"url": "https://sherifabdlnaby.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://sherifabdlnaby.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Sherif Abdel-Naby"}, {"url": "https://sherifabdlnaby.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "71 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F43e8644100ea&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Frunning-securing-and-deploying-elastic-stack-on-docker-f1a8ebf1dc5b&user=Sherif+Abdel-Naby&userId=43e8644100ea&source=post_page-43e8644100ea--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Ff342738b1b2e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Frunning-securing-and-deploying-elastic-stack-on-docker-f1a8ebf1dc5b&newsletterV3=43e8644100ea&newsletterV3Id=f342738b1b2e&user=Sherif+Abdel-Naby&userId=43e8644100ea&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}