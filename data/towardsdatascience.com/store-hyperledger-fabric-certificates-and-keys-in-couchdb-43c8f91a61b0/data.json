{"url": "https://towardsdatascience.com/store-hyperledger-fabric-certificates-and-keys-in-couchdb-43c8f91a61b0", "time": 1683003776.530118, "path": "towardsdatascience.com/store-hyperledger-fabric-certificates-and-keys-in-couchdb-43c8f91a61b0/", "webpage": {"metadata": {"title": "Store Hyperledger Fabric certificates and keys in CouchDB | by Shubham Chadokar | Towards Data Science", "h1": "Store Hyperledger Fabric certificates and keys in CouchDB", "description": "When an application interacts with the Hyperledger Fabric Network, it uses this identity to authenticate itself. Fabric network validates the identity and authorizes the application to interact. In\u2026"}, "outgoing_paragraph_urls": [{"url": "https://hyperledger-fabric.readthedocs.io/en/latest/developapps/wallet.html", "anchor_text": "Wallet", "paragraph_index": 2}, {"url": "https://github.com/hyperledger/fabric-samples/blob/release-1.4/balance-transfer/artifacts/org1.yaml", "anchor_text": "link", "paragraph_index": 4}, {"url": "https://hyperledger-fabric.readthedocs.io/en/latest/developapps/wallet.html#types", "anchor_text": "Documentation", "paragraph_index": 5}, {"url": "https://github.com/hyperledger/fabric-sdk-node/blob/release-1.4/fabric-client/lib/impl/CouchDBKeyValueStore.js", "anchor_text": "CouchDBKeyValueStore.js", "paragraph_index": 15}, {"url": "https://hyperledger.github.io/fabric-sdk-node/release-1.4/Client.html", "anchor_text": "Client", "paragraph_index": 16}, {"url": "https://github.com/hyperledger/fabric-samples/blob/release-1.4/balance-transfer", "anchor_text": "balance transfer", "paragraph_index": 18}, {"url": "https://schadokar.dev", "anchor_text": "https://schadokar.dev", "paragraph_index": 39}], "all_paragraphs": ["When an application interacts with the Hyperledger Fabric Network, it uses this identity to authenticate itself. Fabric network validates the identity and authorizes the application to interact.", "In short, identities are very important and if you don\u2019t save them properly, then it may turn into a headache. \ud83d\ude29", "In Hyperledger Fabric, this storage is known as Wallet.", "There are three types of wallet:", "This is a simple folder. A local storage wallet. It is a good default choice for wallets. In fabric-samples/balance-transfer, the file system is the default wallet. When you run the balance-transfer it creates a fabric-client-kv-orgName folder and saves all the identities in it. This configuration is defined in the orgname.yaml link.", "A wallet in application storage. Use this type of wallet when your application is running in a constrained environment without access to a file system; typically a web browser. It\u2019s worth remembering that this type of wallet is volatile; identities will be lost after the application ends normally or crashes. \u2014 Documentation", "Using couchdb as a wallet. This option is best for production.", "In this tutorial, we will configure the CouchDB as the Wallet. \ud83d\udc68\ud83c\udffb\u200d\ud83d\udcbb", "For the demonstration, I am using Fabric Node SDK and fabric/samples/balance-transfer.", "The wallet uses 2 stores to save the certificates and keys:", "The state store is used to store the certificates of the enrolled identity. It stores the basic information of the identity:", "\u2757\ufe0f Note: The signingIdentity is the pointer or the address of the private and public key stored in the crypto-store.", "The crypto store is used to store the public and private key of the identity.", "To configure the couchdb as wallet:", "Import the CouchDBKeyValueStore library, which is provided by the Node SDK.", "Do read the CouchDBKeyValueStore.js it is worth reading.", "Client is the interface between the user and the fabric network.", "You have to update the client according to the above steps to make it use the couchdb. In the next section, we\u2019ll implement the above steps in the balance-transfer fabric sample.", "I am using the balance transfer fabric sample as a reference.", "I am assuming that you know how to run the balance transfer.", "Follow the balance transfer instructions to start the network.", "It will start the network with:", "This step is optional if you\u2019re using the cloud based couchdb.", "Above command will pull the docker image of the couchdb from the docker hub if it doesn't exist.", "Open the app/helper.js and update the getClientForOrg.", "In the below code, we just replaced await client.initCredentialStores(); with the above couchdb config steps.", "There is a minor change in the above code.", "It is not necessary that db(dbname) of state store and crypto store is the same. Both the stores can have their separate dbs. It depends on the requirement. You can have state store and crypto store db as orgName-state-store and orgName-crypto-store respectively. Each organization must have their state-store and crypto-store db, else it will throw the Authentication Error.", "Once you register a user, you can check the state-store and crypto-store using the couchdb apis.", "I used the below arguments to register a user. For org1, I used the same db org1db for both state-store and crypto-store.", "Open the browser, go to http://localhost:5369/org1db/_all_docs. It returns all the docs saved in the org1db.", "The indexes 0, 1, 2 are the certificates of the admin.", "The index 3 is the alice certificate stored in the state-store. The indexes 4-5 are the alice's public and private keys stored in the crypto-store.", "Go to http://localhost:5369/org1db/alice. It returns all the details of the alice stored in the state store.", "Now, check the id of the indexes 4 & 5 in the above image. Both are same.", "If you remember, signingIdentity field is a reference of the private and public keys of the identity stored in the crypto store.", "CouchDB wallet is a great choice for a production use case. You can try with other dbs but in that case, you have to write the library accordingly like CouchDBKeyValueStore.js.", "Below are the references I found helpful. If you find any resource which you think can be added here, don\u2019t feel shy to share. \ud83d\ude09", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Nodejs | Golang | Tech Writer | Author | https://schadokar.dev"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F43c8f91a61b0&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fstore-hyperledger-fabric-certificates-and-keys-in-couchdb-43c8f91a61b0&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fstore-hyperledger-fabric-certificates-and-keys-in-couchdb-43c8f91a61b0&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fstore-hyperledger-fabric-certificates-and-keys-in-couchdb-43c8f91a61b0&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fstore-hyperledger-fabric-certificates-and-keys-in-couchdb-43c8f91a61b0&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----43c8f91a61b0--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----43c8f91a61b0--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@schadokar?source=post_page-----43c8f91a61b0--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@schadokar?source=post_page-----43c8f91a61b0--------------------------------", "anchor_text": "Shubham Chadokar"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fb3ffcfa6143&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fstore-hyperledger-fabric-certificates-and-keys-in-couchdb-43c8f91a61b0&user=Shubham+Chadokar&userId=b3ffcfa6143&source=post_page-b3ffcfa6143----43c8f91a61b0---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F43c8f91a61b0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fstore-hyperledger-fabric-certificates-and-keys-in-couchdb-43c8f91a61b0&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F43c8f91a61b0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fstore-hyperledger-fabric-certificates-and-keys-in-couchdb-43c8f91a61b0&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@mr_williams_photography?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Micah Williams"}, {"url": "https://unsplash.com/s/photos/safe?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Unsplash"}, {"url": "https://schadokar.dev/posts/store-hyperledger-fabric-certificates-and-keys-in-couchdb/", "anchor_text": "https://schadokar.dev"}, {"url": "https://hyperledger-fabric.readthedocs.io/en/latest/developapps/wallet.html", "anchor_text": "Wallet"}, {"url": "https://github.com/hyperledger/fabric-samples/blob/release-1.4/balance-transfer/artifacts/org1.yaml", "anchor_text": "link"}, {"url": "https://hyperledger-fabric.readthedocs.io/en/latest/developapps/wallet.html#types", "anchor_text": "Documentation"}, {"url": "https://github.com/hyperledger/fabric-sdk-node/blob/release-1.4/fabric-client/lib/impl/CouchDBKeyValueStore.js", "anchor_text": "CouchDBKeyValueStore.js"}, {"url": "https://hyperledger.github.io/fabric-sdk-node/release-1.4/Client.html", "anchor_text": "Client"}, {"url": "https://github.com/hyperledger/fabric-samples/blob/release-1.4/balance-transfer", "anchor_text": "balance transfer"}, {"url": "https://admin:password@localhost:5984", "anchor_text": "https://admin:password@localhost:5984"}, {"url": "http://admin:password@localhost:5369", "anchor_text": "http://admin:password@localhost:5369"}, {"url": "https://developer.ibm.com/tutorials/store-fabric-certificates-keys-ibm-cloudant-fabric-node-sdk/", "anchor_text": "https://developer.ibm.com/tutorials/store-fabric-certificates-keys-ibm-cloudant-fabric-node-sdk/"}, {"url": "https://stackoverflow.com/questions/53639061/hyperledger-fabric-what-is-the-difference-between-state-store-and-crypto-store", "anchor_text": "https://stackoverflow.com/questions/53639061/hyperledger-fabric-what-is-the-difference-between-state-store-and-crypto-store"}, {"url": "https://stackoverflow.com/questions/54305378/hyperledger-fabric-client-credential-store-using-couchdb", "anchor_text": "https://stackoverflow.com/questions/54305378/hyperledger-fabric-client-credential-store-using-couchdb"}, {"url": "https://stackoverflow.com/questions/58371858/hyperledger-fabric-client-credential-store-using-couchdbcouchdbkeyvaluestore", "anchor_text": "https://stackoverflow.com/questions/58371858/hyperledger-fabric-client-credential-store-using-couchdbcouchdbkeyvaluestore"}, {"url": "https://schadokar.dev/posts/couchdb-keyvalue-store-hlf/", "anchor_text": "https://schadokar.dev"}, {"url": "https://medium.com/tag/hyperledger?source=post_page-----43c8f91a61b0---------------hyperledger-----------------", "anchor_text": "Hyperledger"}, {"url": "https://medium.com/tag/hyperledger-fabric?source=post_page-----43c8f91a61b0---------------hyperledger_fabric-----------------", "anchor_text": "Hyperledger Fabric"}, {"url": "https://medium.com/tag/couchdb?source=post_page-----43c8f91a61b0---------------couchdb-----------------", "anchor_text": "Couchdb"}, {"url": "https://medium.com/tag/tutorial?source=post_page-----43c8f91a61b0---------------tutorial-----------------", "anchor_text": "Tutorial"}, {"url": "https://medium.com/tag/blockchain?source=post_page-----43c8f91a61b0---------------blockchain-----------------", "anchor_text": "Blockchain"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F43c8f91a61b0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fstore-hyperledger-fabric-certificates-and-keys-in-couchdb-43c8f91a61b0&user=Shubham+Chadokar&userId=b3ffcfa6143&source=-----43c8f91a61b0---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F43c8f91a61b0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fstore-hyperledger-fabric-certificates-and-keys-in-couchdb-43c8f91a61b0&user=Shubham+Chadokar&userId=b3ffcfa6143&source=-----43c8f91a61b0---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F43c8f91a61b0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fstore-hyperledger-fabric-certificates-and-keys-in-couchdb-43c8f91a61b0&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----43c8f91a61b0--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F43c8f91a61b0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fstore-hyperledger-fabric-certificates-and-keys-in-couchdb-43c8f91a61b0&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----43c8f91a61b0---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----43c8f91a61b0--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----43c8f91a61b0--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----43c8f91a61b0--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----43c8f91a61b0--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----43c8f91a61b0--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----43c8f91a61b0--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----43c8f91a61b0--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----43c8f91a61b0--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@schadokar?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@schadokar?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Shubham Chadokar"}, {"url": "https://medium.com/@schadokar/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "329 Followers"}, {"url": "https://schadokar.dev", "anchor_text": "https://schadokar.dev"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fb3ffcfa6143&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fstore-hyperledger-fabric-certificates-and-keys-in-couchdb-43c8f91a61b0&user=Shubham+Chadokar&userId=b3ffcfa6143&source=post_page-b3ffcfa6143--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F23d1350c5d25&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fstore-hyperledger-fabric-certificates-and-keys-in-couchdb-43c8f91a61b0&newsletterV3=b3ffcfa6143&newsletterV3Id=23d1350c5d25&user=Shubham+Chadokar&userId=b3ffcfa6143&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}