{"url": "https://towardsdatascience.com/mapping-inequality-in-peer-2-peer-lending-using-geopandas-part-1-b8c7f883d1ba", "time": 1682994666.494457, "path": "towardsdatascience.com/mapping-inequality-in-peer-2-peer-lending-using-geopandas-part-1-b8c7f883d1ba/", "webpage": {"metadata": {"title": "Analyzing Lending Club Loans with Python - A Tutorial | Towards Data Science", "h1": "Analyzing Lending Club Loans with Python \u2014 A Tutorial", "description": "How to use pandas, geopandas, matplotlib to process credits from the largest online Peer-to-Peer lending platform."}, "outgoing_paragraph_urls": [{"url": "https://www.fdic.gov/regulations/laws/rules/2000-6000.html", "anchor_text": "Equal Housing Lender", "paragraph_index": 1}, {"url": "https://dsl.richmond.edu/panorama/redlining", "anchor_text": "MAPPING INEQUALITY", "paragraph_index": 1}, {"url": "https://www.revealnews.org/article/for-people-of-color-banks-are-shutting-the-door-to-homeownership/", "anchor_text": "modern Redlining", "paragraph_index": 1}, {"url": "https://www.washingtonpost.com/news/wonk/wp/2018/03/28/redlining-was-banned-50-years-ago-its-still-hurting-minorities-today/?noredirect=on&utm_term=.5e07bade71e6", "anchor_text": "recently exposed in 61 US cities", "paragraph_index": 1}, {"url": "https://www.revealnews.org/article/8-lenders-that-arent-serving-people-of-color-for-home-loans/", "anchor_text": "couple of banks", "paragraph_index": 1}, {"url": "http://geopandas.org", "anchor_text": "Geopandas library", "paragraph_index": 2}, {"url": "http://lendingclub.com/", "anchor_text": "Lending Club", "paragraph_index": 2}, {"url": "https://dsl.richmond.edu/panorama/redlining", "anchor_text": "MAPPING INEQUALITY", "paragraph_index": 3}, {"url": "https://en.wikipedia.org/wiki/Shapefile", "anchor_text": "shapfiles", "paragraph_index": 3}, {"url": "https://pypi.org/project/uszipcode/", "anchor_text": "uszipcode,", "paragraph_index": 9}, {"url": "https://sites.google.com/view/cs109alendingclubgroup26fall18", "anchor_text": "cited here", "paragraph_index": 19}, {"url": "https://www.lendingclub.com/public/rates-and-fees.action", "anchor_text": "Lending Club website", "paragraph_index": 21}, {"url": "https://towardsdatascience.com/redlining-mapping-inequality-in-peer-2-peer-lending-using-geopandas-part-2-9d8af584df0b", "anchor_text": "Part 2 of this post series", "paragraph_index": 41}], "all_paragraphs": ["Marketplace lending is the site of possible discrimination or unfair lending practices. In this post series we study the spacial correlation between Redlining from 1935\u201340 and the peer-2-peer lending landscape of today.", "As an Equal Housing Lender, a peer-2-peer lending marketplace should screen loan applications \u201cwithout regard to race, color, religion, national origin, sex, handicap, or familial status.\u201d Systematically refusing loans from specific zip codes can result in harming minority applicants . This is a practice called Redlining between 1935 -1940, when the Home Owners\u2019 Loan Corporation or \u201cHOLC\u201d created maps that color-coded credit worthiness and risk on neighborhood levels in nearly 250 US cities. These maps were recently digitized and can be viewed on MAPPING INEQUALITY. Despite the federal Fair Housing Act, modern Redlining has been recently exposed in 61 US cities. Another investigation identified a couple of banks which apparently exclude some minorities from their clients\u2019 portfolio.", "We used Python, Pandas, Jupyter Notebook and the Geopandas library to visualize 24 million loan applications from Lending Club \u2014 the world\u2019s largest peer-to-peer lending platform. The goal is to investigate whether applicants from zip codes which were \u201credlined\u201d in the 1930s are more likely to be rejected by the marketplace today. If not, we will verify whether such loan applicants receive a higher interest rate per default. We also want to explore how these relationships evolve throughout the life span of Lending Club, from 2006-2007 till now.", "The MAPPING INEQUALITY website offers an option to download shapfiles of all US cities which were \u201credlined\u201d back in the 1930s. The shapefiles contain the geographical latitude and longitude coordinates of polygons describing the neighborhoods (zones) in each of the cities, as they were delimited by HOLC.", "Each row represents a polygon (zone) with the following features:", "The HOLC grade describes the credit worthiness that was assigned to the zone back in the 1930s, as follows:", "We clean out those polygons with invalid HOLC grade.", "Before diving into our analysis, we look at the distribution of grades assigned by HOLC not only within each zip code but also at the state level. This requires an estimate of the population in each zone, back in the 1930s. A naive approach is to use the count of zones per HOLC grade. Because the size of the corresponding polygons varies a lot, we might fail to get an intuition about the population size. Therefore, we choose to use the zone area (in km2) as a benchmark unit.", "We start by calculating the area of each zone in square kilometers, as well as its geographical center (\u201ccentroid\u201d).", "We will now add the zip code of each zone using the coordinates of its centroid. For this purpose we rely on the free Python library uszipcode, which does geodecoding for each batch of 100 zones, using its own up-to-date database of geocoded data.", "Calculating the total redlined area per zip code is now straightforward.", "We can now compute the total redlined area per state.", "Using the previous calculations we can obtain the percentage distribution of HOLC grades within each state.", "We can also compute similar values per zip code.", "As we will see later, some interesting visualizations require us to convert the grade values into features. This allows us to calculate the area ratio of A, B, C, and D subzones within each zone as shown below. We fill missing ratio values with a zero, to take into account the zip codes where there were no HOLC zones.", "These ratios help us estimating the so-called HOLC Reject Ratio, defined as the percentage of loan applications that were rejected within a zip code due to Redlining in the 1930s. The ratio is assumed to be 0% for applicants in subzone A, 100% for C and D, and 90% in subzone B. We choose 90% for B because it is close to the average reject ratio found in the literature [\u00b9][\u00b2].", "The bar chart below reveals that most zones considered by HOLC were ranked as Hazardeous or Definitely Declining in the 1930s.", "The zones redlined by HOLC were usually not very large, less than 5 km2. We notice few outliers with surface reaching 180 km2 below.", "States AL (Alabama) and KS (Kansas) had the largest Hazardous total area, as classified by HOLC in 1930s. Zones in the states of NH (New Hampshire) and IN (Indiana) were mostly classified as Definitely Declining.", "After exploring Redlining data, let\u2019s now have a look at today\u2019s lending. All loan applications received between 2007Q1 and 2018Q2 are downloaded from Lending Club website. The merged and cleansed data is made available to us by authors of the project cited here.", "Each loan application is described by the following features:", "\u201cBased on each loan application and credit report, every loan is assigned a grade ranging from A to G with a corresponding interest rate.\u201d Each loan grade and its corresponding current interest rate is displayed on Lending Club website.", "One common approach to explore large time series is to aggregate features of interest according to bigger time units such as quarters. An issue with Lending Club data is the format of issue_d, which is YYYY-MM-DD for many rows but we can also find dates with the format b-YYYY. For example we see rows with 2007\u201305\u201326 and Dec-2011. It is desirable to handle each format differently when converting the date to quarter.", "Specifically, we split the data into two sets, one for each date format.", "Now, we can merge both data sets.", "We further use the data to calculate the Lending Club Loan Reject Ratio, defined as the percentage of loan applications which were rejected per zip code during each quarter.", "The summary table above gives the following quantities for each quarter and zip code:", "Similarly, we compute the Lending Club Loan Grade Ratio (the percentage of loans with a specific interest rate per zip code and quarter).", "For example, LC_A_accepted is the number of application which were accepted and assigned the interest rate A. LC_A_ratio is the corresponding percentage ratio.", "We are now ready to merge loans and Redlining data, allowing us to experiment with different visualizations, and to formulate interesting questions when looking at 2007\u20132018' loans vs Redlining.", "Because Lending Club discloses only 3 out of 5 digits from the applicant\u2019s zip code, we will have to summarize the data and merge it based on 123xx zip code patterns.", "The table above shows the total size (km2) of areas ranked A, B, C or D by HOLC in the 1930s within the region represented by a 123xx zip code pattern, where 123 is a representative number for the zip code digits disclosed by Lending Club. The overall area ratio per HOLC grade as well as the overall HOLC reject ratio is also provided.", "Continue with this aggregated Redlining dataset, we will now add the loan data. Empty ratios are replaced by 0 for 123xx regions where either loan data or Redlining data is missing.", "Looking at the line plot below, we can see that Lending Club appears to reject more loans on average than HOLC did in 1930s. We can expect the rejects to increase further in the future.", "The scatter plot below shows a positive correlation between the loan reject ratio of Lending Club and HOLC. This suggests the following hypothesis: zones where HOLC rejected the most or almost all loans in the 1930s are the same zones where Lending Club is likely to reject a lot of loans today.", "As shown in the distplot below, the Lending Club reject ratio distribution appears to copy HOLC reject ratio distribution in regions with large areas which were classified to Hazardous or Definetely Declining for lending in the 1930s.", "The correlation between HOLC and Lending Club features is very weak, looking at the heat-map below. This could imply that, in general, knowing the HOLC grade of a region does not help us confidently forecasting loan rejection or loan interest rate at Lending Club.", "The following distribution plot suggests that there are almost no Lending Club applicants who are receiving the lowest interest rate (A) in redlined zones. The majority of applicants receive a medium interest rate (B, C, or D). Only few applicants have to deal with very high interest rates (E, F, or G). This distribution suggests that Lending Club may not be considering Redlining when accessing the risk of credit charge-off.", "Our study provides some evidence of modern Redlining by the Lending Club. The hypothesis of an intrinsic correlation between 1930\u2019s redlining maps and today\u2019s Lending Club policies for accepting loan requests and assessing risks of default remains valid.", "There are some signs of unfair algorithms or historical bias in data used at Lending Club. This is clear from looking at our exploratory data analysis, especially the positive linear trend between HOLC reject ratio and Lending Club reject ratio.", "Thank you for reading so far.", "In Part 2 of this post series we will use Geopandas to visualize the Redlining areas, loan reject ratios and loan interest rates distribution on a geographical map of the United States. This will include a choropleth map animation for spatial time series visualization, showing how the geographical landscape of peer-2\u2013peer lending evolved between 2007 and 2018 with regards to Redlining.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Husband & Dad. Mental health advocate. Top Medium Writer. 20 years in IT. AI Expert @Harvard. Empowering human-centered organizations with high-tech."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fb8c7f883d1ba&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmapping-inequality-in-peer-2-peer-lending-using-geopandas-part-1-b8c7f883d1ba&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmapping-inequality-in-peer-2-peer-lending-using-geopandas-part-1-b8c7f883d1ba&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmapping-inequality-in-peer-2-peer-lending-using-geopandas-part-1-b8c7f883d1ba&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmapping-inequality-in-peer-2-peer-lending-using-geopandas-part-1-b8c7f883d1ba&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----b8c7f883d1ba--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----b8c7f883d1ba--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://michel-kana.medium.com/?source=post_page-----b8c7f883d1ba--------------------------------", "anchor_text": ""}, {"url": "https://michel-kana.medium.com/?source=post_page-----b8c7f883d1ba--------------------------------", "anchor_text": "Michel Kana, Ph.D"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fcb0b01fe20d2&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmapping-inequality-in-peer-2-peer-lending-using-geopandas-part-1-b8c7f883d1ba&user=Michel+Kana%2C+Ph.D&userId=cb0b01fe20d2&source=post_page-cb0b01fe20d2----b8c7f883d1ba---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fb8c7f883d1ba&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmapping-inequality-in-peer-2-peer-lending-using-geopandas-part-1-b8c7f883d1ba&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fb8c7f883d1ba&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmapping-inequality-in-peer-2-peer-lending-using-geopandas-part-1-b8c7f883d1ba&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://www.fdic.gov/regulations/laws/rules/2000-6000.html", "anchor_text": "Equal Housing Lender"}, {"url": "https://dsl.richmond.edu/panorama/redlining", "anchor_text": "MAPPING INEQUALITY"}, {"url": "https://www.revealnews.org/article/for-people-of-color-banks-are-shutting-the-door-to-homeownership/", "anchor_text": "modern Redlining"}, {"url": "https://www.washingtonpost.com/news/wonk/wp/2018/03/28/redlining-was-banned-50-years-ago-its-still-hurting-minorities-today/?noredirect=on&utm_term=.5e07bade71e6", "anchor_text": "recently exposed in 61 US cities"}, {"url": "https://www.revealnews.org/article/8-lenders-that-arent-serving-people-of-color-for-home-loans/", "anchor_text": "couple of banks"}, {"url": "http://geopandas.org", "anchor_text": "Geopandas library"}, {"url": "http://lendingclub.com/", "anchor_text": "Lending Club"}, {"url": "https://dsl.richmond.edu/panorama/redlining", "anchor_text": "MAPPING INEQUALITY"}, {"url": "https://en.wikipedia.org/wiki/Shapefile", "anchor_text": "shapfiles"}, {"url": "https://pypi.org/project/uszipcode/", "anchor_text": "uszipcode,"}, {"url": "https://sites.google.com/view/cs109alendingclubgroup26fall18", "anchor_text": "cited here"}, {"url": "https://www.lendingclub.com/public/rates-and-fees.action", "anchor_text": "Lending Club website"}, {"url": "https://towardsdatascience.com/redlining-mapping-inequality-in-peer-2-peer-lending-using-geopandas-part-2-9d8af584df0b", "anchor_text": "Part 2 of this post series"}, {"url": "https://medium.com/tag/geopandas?source=post_page-----b8c7f883d1ba---------------geopandas-----------------", "anchor_text": "Geopandas"}, {"url": "https://medium.com/tag/exploratory-data-analysis?source=post_page-----b8c7f883d1ba---------------exploratory_data_analysis-----------------", "anchor_text": "Exploratory Data Analysis"}, {"url": "https://medium.com/tag/fairness?source=post_page-----b8c7f883d1ba---------------fairness-----------------", "anchor_text": "Fairness"}, {"url": "https://medium.com/tag/redlining?source=post_page-----b8c7f883d1ba---------------redlining-----------------", "anchor_text": "Redlining"}, {"url": "https://medium.com/tag/peer-to-peer-lending?source=post_page-----b8c7f883d1ba---------------peer_to_peer_lending-----------------", "anchor_text": "Peer To Peer Lending"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fb8c7f883d1ba&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmapping-inequality-in-peer-2-peer-lending-using-geopandas-part-1-b8c7f883d1ba&user=Michel+Kana%2C+Ph.D&userId=cb0b01fe20d2&source=-----b8c7f883d1ba---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fb8c7f883d1ba&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmapping-inequality-in-peer-2-peer-lending-using-geopandas-part-1-b8c7f883d1ba&user=Michel+Kana%2C+Ph.D&userId=cb0b01fe20d2&source=-----b8c7f883d1ba---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fb8c7f883d1ba&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmapping-inequality-in-peer-2-peer-lending-using-geopandas-part-1-b8c7f883d1ba&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----b8c7f883d1ba--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fb8c7f883d1ba&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmapping-inequality-in-peer-2-peer-lending-using-geopandas-part-1-b8c7f883d1ba&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----b8c7f883d1ba---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----b8c7f883d1ba--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----b8c7f883d1ba--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----b8c7f883d1ba--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----b8c7f883d1ba--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----b8c7f883d1ba--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----b8c7f883d1ba--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----b8c7f883d1ba--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----b8c7f883d1ba--------------------------------", "anchor_text": ""}, {"url": "https://michel-kana.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://michel-kana.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Michel Kana, Ph.D"}, {"url": "https://michel-kana.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "5.4K Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fcb0b01fe20d2&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmapping-inequality-in-peer-2-peer-lending-using-geopandas-part-1-b8c7f883d1ba&user=Michel+Kana%2C+Ph.D&userId=cb0b01fe20d2&source=post_page-cb0b01fe20d2--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F69e95067d2a1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmapping-inequality-in-peer-2-peer-lending-using-geopandas-part-1-b8c7f883d1ba&newsletterV3=cb0b01fe20d2&newsletterV3Id=69e95067d2a1&user=Michel+Kana%2C+Ph.D&userId=cb0b01fe20d2&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}