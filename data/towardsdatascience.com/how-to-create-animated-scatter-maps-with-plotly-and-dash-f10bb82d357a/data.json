{"url": "https://towardsdatascience.com/how-to-create-animated-scatter-maps-with-plotly-and-dash-f10bb82d357a", "time": 1683008820.875409, "path": "towardsdatascience.com/how-to-create-animated-scatter-maps-with-plotly-and-dash-f10bb82d357a/", "webpage": {"metadata": {"title": "How to create outstanding animated scatter maps with plotly and dash | Towards Data Science", "h1": "How to create outstanding animated scatter maps with Plotly and Dash", "description": "Animated maps in plotly can be tricky to configure. In this tutorial, you will learn how to proceed step by step, using Covid-19 data."}, "outgoing_paragraph_urls": [{"url": "http://www.mapbox.com", "anchor_text": "www.mapbox.com", "paragraph_index": 5}, {"url": "https://public.opendatasoft.com/explore/dataset/covid-19-pandemic-worldwide-data/information/?disjunctive.zone&disjunctive.category", "anchor_text": "opendatasoft", "paragraph_index": 8}, {"url": "http://www.etomal.com", "anchor_text": "www.etomal.com", "paragraph_index": 38}, {"url": "http://medium.etomal.com/membership", "anchor_text": "medium.etomal.com/membership", "paragraph_index": 38}], "all_paragraphs": ["Dash is a Python framework built on top of Flask and Plotly, designed to make data-driven web applications. Thanks to Plotly it provides some basic charts such as histograms and pie charts, and it also comes with a multitude of highly customizable controls such as dropdowns, checkbox, date sliders, and many more.", "To build an app you can combine all of these controls and charts in one or more tabs. But when it comes to map drawing, it gets touchy. Plotly has some basic built-in maps plots: enough to show data, but not as nice as 2020 web maps should be. To tackle that weakness, Plotly made a partnership with Mapbox. Together they provide a great service.", "Today we\u2019ll see how to use Mapbox with Plotly within a dash application, and how to create animated scatter maps.", "As this post is written in April 2020 during the coronavirus pandemic, I suggest working with Covid-19 Open Data to discover scatter maps.", "Some Mapbox representations require a token, and Scatter Maps is part of these. Don\u2019t worry, this easy and free.", "Go to www.mapbox.com and create an account. For this step, you only need an email for account verification. When it\u2019s done you get your token on the \u201cTokens\u201d page and clicking on the \u201cCreate a token\u201d button.", "With this token, you can draw 50000 maps/month for free. By the end of the article, we\u2019ll see how to store maps and minimize the number of requests needed.", "It is common to store this information in a separate file from scripts. A usual way to do is using a *.ini file for storing, and then the python built-in configparser module for accessing it.", "As mentioned before, we\u2019ll work with Covid pandemic data. We\u2019ll use the dataset from Hopkins University which is updated on a daily basis during the crisis. It is available on opendatasoft.", "Data are quite easy to understand: it contains daily information about covid in many countries, about either Death, Confirmed, or Recovered persons, with GPS information.", "This dataset has to be transformed to fit the Mapbox inputs. Let\u2019s be clear about the input needed.", "The purpose of scatter maps is to plot bubbles on a map, with variable sizes and eventually variable colors. In today\u2019s example we want:", "Let\u2019s get this information in different columns.", "Here is a full Data Frame with multi-index : date & zone , which makes filtering very convenient.", "As an example, to extract information of a single day, we\u2019d do :", "This will be very handy for our scatter map, and later for the map animation!", "Here we define a figure with all the necessary parameters, and then we update its layout property with Mapbox information: the token, where to center the map, and how much we want to zoom in. We use a zoom of 1 as we want to see the whole globe. To zoom in, you just have to increase this value.", "Our scatter map is nice but lacking of information. Before diving into the animation part, let\u2019s make some basic modifications and enhance the quality of the map.", "In the previous picture, we see orange, purples, and yellow boxes but have no clue about their meaning. Let\u2019s add a colormap to make it clear. To add the colormap, add showscale = True into the marker parameter. Then with the colorbar attribute, you can add more specifications such as the title, the size of the color bar, or any other information about the ticks.", "It will now be clear that yellow bubbles relates to countries with the highest rate of recovered people. And the darker the bubble gets, the smallest the recovered rate is.", "In addition to the color comprehension, it would be interesting to display the number when the user hovers the bubble with its mouse. To do so, we can add a text parameter to the go.Scattermapbox() specifying which column information display. But here we\u2019d like to display multiple information, so we\u2019ll use hovertemplate with customdata. The latter allows us to store data into the control and to display the value of any columns from the original dataset. Thus we store the necessary columns into the customdata inside a np.stack() and access it from the Html template defined in the hovertemplate.", "Note : <extra></extra> is used to overwrite the original part of the hover box where the trace name (trace0) was written. The trace being the object in which we store the data of the figure.", "And here are the results of our previous modification. Looks great, doesn\u2019t it?", "Now we are able to plot data on a map for a specific date. Let\u2019s animate it and observe the world situation day after day.", "For information, there are 2 ways of animating maps with Plotly and Dash :", "To create a Plotly animation, instead of providing a single trace as we did previously in the go.Figure() statement, we\u2019ll provide multiple frames to the figure. Frames are basically the content of a go.Scattermapbox(), but stored in a list.", "Note : days being the list of the days available : df.index.levels[0].tolist()", "Then to navigate through this frame, we\u2019ll create a slider. Each slider is defined as a dictionary, and stored in the sliders list. We\u2019ll only have one here.", "A slider is defined by its characteristics (such as x, y , len, etc.), its initial state (currentvalue) and its steps. To link a step to a specific frame, we\u2019ll need to have the same values in the frame name and in the steps[i]['args'][0][0]. steps[i]being one of the steps, i in [0 ; nb_frame]. Not the easiest guess, but working.", "Once we have a nice slider, it can be a good idea to add a \u201cplay button\u201d which will run all the iterations one after another. Here is how we do so.", "Now that we\u2019ve all the pieces, we can assembly the puzzle and finally create our interactive map.", "And that\u2019s it! Here is the result! A nice interactive scatter map! Let\u2019s hope that bubbles won\u2019t get bigger and that we\u2019ll soon see lots of yellow bubbles in this graphic.", "You\u2019ve learned how to plot scatter maps with Plotly and how to animate it. Now you can plot your own interactive maps, with your own data, with colormaps, sliders and make them live with a play button. I hope you enjoyed it!", "In my next article, I will embed this map in a Dash application and you\u2019ll discover how to deploy Python web apps on Heroku. You\u2019ll manage to access this scatter map live version! Stay tuned!", "(Update \u2014 You can check it right there)", "And if you enjoyed the Scatter Map version, you might also like the Choropleth Map story \ud83d\ude09", "To discover more about Plotly and how to showcase your ML projects and results, I suggest you this great post from Neptune.ai", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Head of Data @ Iroko, from Paris | Visit my website www.etomal.com | Unlock unlimited content medium.etomal.com/membership | \ud83e\udd20"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Ff10bb82d357a&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-create-animated-scatter-maps-with-plotly-and-dash-f10bb82d357a&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-create-animated-scatter-maps-with-plotly-and-dash-f10bb82d357a&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-create-animated-scatter-maps-with-plotly-and-dash-f10bb82d357a&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-create-animated-scatter-maps-with-plotly-and-dash-f10bb82d357a&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----f10bb82d357a--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----f10bb82d357a--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.etomal.com/?source=post_page-----f10bb82d357a--------------------------------", "anchor_text": ""}, {"url": "https://medium.etomal.com/?source=post_page-----f10bb82d357a--------------------------------", "anchor_text": "Thibaud Lamothe \ud83e\udd20"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F8af4ef4360de&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-create-animated-scatter-maps-with-plotly-and-dash-f10bb82d357a&user=Thibaud+Lamothe+%F0%9F%A4%A0&userId=8af4ef4360de&source=post_page-8af4ef4360de----f10bb82d357a---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ff10bb82d357a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-create-animated-scatter-maps-with-plotly-and-dash-f10bb82d357a&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ff10bb82d357a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-create-animated-scatter-maps-with-plotly-and-dash-f10bb82d357a&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "http://www.mapbox.com", "anchor_text": "www.mapbox.com"}, {"url": "https://public.opendatasoft.com/explore/dataset/covid-19-pandemic-worldwide-data/information/?disjunctive.zone&disjunctive.category", "anchor_text": "opendatasoft"}, {"url": "https://towardsdatascience.com/deploying-dash-or-flask-web-application-on-heroku-easy-ci-cd-4111da3170b8", "anchor_text": "Deploying Dash or Flask web application on Heroku. Easy CI/CD.Developing a python web app on a laptop is great. Making it accessible to everyone is far more satisfying. Let\u2019s\u2026towardsdatascience.com"}, {"url": "https://towardsdatascience.com/how-to-create-outstanding-custom-choropleth-maps-with-plotly-and-dash-49ac918a5f05", "anchor_text": "How to create outstanding custom choropleth maps with Plotly and Dash \ud83c\udf0eMake your first steps with GeoJSON files & learn how to build choropleth maps anywhere on the earth. Illustrated with\u2026towardsdatascience.com"}, {"url": "https://neptune.ai/blog/plotly-python-tutorial-for-machine-learning-specialists", "anchor_text": "Plotly Python Tutorial for Machine Learning Specialists - neptune.aiPlotly is an open-source Python graphing library that is great for building beautiful and interactive visualizations\u2026neptune.ai"}, {"url": "https://medium.com/tag/data-visualisation?source=post_page-----f10bb82d357a---------------data_visualisation-----------------", "anchor_text": "Data Visualisation"}, {"url": "https://medium.com/tag/data-science?source=post_page-----f10bb82d357a---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/web-development?source=post_page-----f10bb82d357a---------------web_development-----------------", "anchor_text": "Web Development"}, {"url": "https://medium.com/tag/animation?source=post_page-----f10bb82d357a---------------animation-----------------", "anchor_text": "Animation"}, {"url": "https://medium.com/tag/programming?source=post_page-----f10bb82d357a---------------programming-----------------", "anchor_text": "Programming"}, {"url": "http://creativecommons.org/publicdomain/zero/1.0/", "anchor_text": "No rights reserved"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Ff10bb82d357a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-create-animated-scatter-maps-with-plotly-and-dash-f10bb82d357a&user=Thibaud+Lamothe+%F0%9F%A4%A0&userId=8af4ef4360de&source=-----f10bb82d357a---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Ff10bb82d357a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-create-animated-scatter-maps-with-plotly-and-dash-f10bb82d357a&user=Thibaud+Lamothe+%F0%9F%A4%A0&userId=8af4ef4360de&source=-----f10bb82d357a---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ff10bb82d357a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-create-animated-scatter-maps-with-plotly-and-dash-f10bb82d357a&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----f10bb82d357a--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Ff10bb82d357a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-create-animated-scatter-maps-with-plotly-and-dash-f10bb82d357a&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----f10bb82d357a---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----f10bb82d357a--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----f10bb82d357a--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----f10bb82d357a--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----f10bb82d357a--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----f10bb82d357a--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----f10bb82d357a--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----f10bb82d357a--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----f10bb82d357a--------------------------------", "anchor_text": ""}, {"url": "https://medium.etomal.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.etomal.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Thibaud Lamothe \ud83e\udd20"}, {"url": "https://medium.etomal.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "247 Followers"}, {"url": "http://www.etomal.com", "anchor_text": "www.etomal.com"}, {"url": "http://medium.etomal.com/membership", "anchor_text": "medium.etomal.com/membership"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F8af4ef4360de&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-create-animated-scatter-maps-with-plotly-and-dash-f10bb82d357a&user=Thibaud+Lamothe+%F0%9F%A4%A0&userId=8af4ef4360de&source=post_page-8af4ef4360de--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fd1b3ffd0e1ec&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-create-animated-scatter-maps-with-plotly-and-dash-f10bb82d357a&newsletterV3=8af4ef4360de&newsletterV3Id=d1b3ffd0e1ec&user=Thibaud+Lamothe+%F0%9F%A4%A0&userId=8af4ef4360de&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}