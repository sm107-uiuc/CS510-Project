{"url": "https://towardsdatascience.com/handling-batch-production-data-in-manufacturing-f720a6026bd", "time": 1683007663.7064152, "path": "towardsdatascience.com/handling-batch-production-data-in-manufacturing-f720a6026bd/", "webpage": {"metadata": {"title": "Handling batch production data in manufacturing | by Martin Liebig (Schmitz), PhD | Towards Data Science", "h1": "Handling batch production data in manufacturing", "description": "Many manufacturing production processes are done in batches. Two items of one batch are produced with the same production settings. Those two items are thus either exact duplicates, or very similar\u2026"}, "outgoing_paragraph_urls": [{"url": "https://rapidminer.com/glossary/machine-learning/", "anchor_text": "machine learning", "paragraph_index": 1}, {"url": "https://rapidminer.com/industry/manufacturing/", "anchor_text": "manufacturing data", "paragraph_index": 2}, {"url": "https://rapidminer.com/blog/validate-models-cross-validation/", "anchor_text": "cross validation", "paragraph_index": 4}, {"url": "https://rapidminer.com/", "anchor_text": "RapidMiner", "paragraph_index": 9}, {"url": "https://docs.rapidminer.com/latest/studio/operators/modeling/predictive/trees/parallel_random_forest.html", "anchor_text": "random forest", "paragraph_index": 32}, {"url": "https://rapidminer.com/resource/humans-guide-machine-learning-projects/", "anchor_text": "in this guide", "paragraph_index": 38}, {"url": "https://rapidminer.com/blog/batch-production-manufacturing-data/", "anchor_text": "rapidminer.com blog", "paragraph_index": 39}], "all_paragraphs": ["Many manufacturing production processes are done in batches. Two items of one batch are produced with the same production settings. Those two items are thus either exact duplicates, or very similar to a duplicate \u2014 a pseudo duplicate. Pseudo-duplicates are items that are very similar in their attributes, and perhaps even identical in some cases.", "This batching process speeds and simplifies manufacturing workflows. However, if you\u2019re working within such a setup and want to use data science and machine learning to inform your decision making, you need to be very careful how to use your data.", "There are two main challenges that arise when thinking about applying machine learning to batch manufacturing data. The first is making sure that you\u2019re validating your models correctly, and the second is handling the actual model training using batched data.", "Let\u2019s take a look at each in turn and give you some ideas on how to account for these issues.", "The biggest problem with batched data is validation. The most common validation schemes \u2014 cross validation, split validation, and bootstrap validation \u2014 assume that each of your examples is independent from all the others.", "But if you\u2019re manufacturing in batches, this isn\u2019t the case.", "Let\u2019s take a look at how you can still validate your model, even when your observations aren\u2019t independent from one another. Keep in mind that validation is the main reason that data scientists believe in their analyses. That\u2019s why it\u2019s of paramount importance to get this right.", "To do this in a batch manufacturing environment, we need to make sure that all the examples from one batch are always either on the training or the testing side of any data validation split that we do.", "If we don\u2019t do this, the model we\u2019re training would essentially be able to cheat \u2014 it would know the correct answer to some of the test rows, because an identical (or very similar) row exists in the training data. The validation process would thus say that the model is good, but once it is into production and can\u2019t cheat anymore, its performance would go down, possibly way down.", "In RapidMiner this can be accomplished using the \u201cSplit on batch attribute\u201d option of the cross validation operator. If checked, the ExampleSet provided needs to have a batch attribute included for this operator to act on. This field manually defines what belongs to one batch (or one-fold of cross validation).", "A common solution to derive the BatchId attribute is depicted above. Here the modulo function is used to generate a BatchId from the numerical ID, which, in this case, is an item ID. The mod function calculates the remainder of a division, thus mod(11,10) returns the remainder of dividing 11 by 10. The answer is the 1 you can see here.", "Using this option, we prevent one occurrence item 11 from appearing in the training set and the other one appearing in the test set.", "If you\u2019re using split validation instead of cross validation, you can get around this issue by first sorting by your ID column with a Sort operator, and then use filter examples range. This splits the data set into 2 parts. But this time it is not with a random sample, because you\u2019ve sorted by your ID prior to splitting, so related items are not next to each other in your data set.", "After doing this, you can use the first x rows training, and the remaining y rows can be used for testing, as the training parts are now distinct from testing parts. (The possibility of a small amount of spillover between datasets at the point you split the data can usually be ignored due to its small size.)", "Now that we\u2019ve taken care of validation, we need to address the potential confusion that batched data can have", "Using your data in a normal learner may be a bit confusing to the model. Remember that, because of the batched nature of the data, your learner may encounter 10 items and only one of them is \u201cTrue\u201d, even though they are very similar to each other.", "Depending on your algorithm, this may have a serious impact on how your model eventually works.", "Because learners are commonly biased towards predicting the majority in cases where they aren\u2019t sure, putting in lots of very similar data points might bias the model in this direction.", "For tree-based algorithms, you\u2019ll have to modify your pruning strategy, as a setting like \u201cdon\u2019t split this branch if there are less than four examples in it\u201d may not be appropriate when considering batched data.", "Due to this, it may make sense to treat batch data in a special fashion during your model training process. Here are three ideas for how you can overcome the challenges of batch data during model training.", "As is often the case in machine learning, one of the ways to tackle the problem is to use a sampling approach. We can randomly take one of our items from the batch process and use it for model training and testing. This nicely addresses the issue of keeping the class balance in classification problems, as well as the label distribution in regression problems.", "It is also a simple technique to do. The downside is that you lose examples and thus might also lose information. It really depends on whether or not additional information is gained by using more than one item from a given batch.", "And there may be, as each individual item may have been created with same materials and only the production settings are different. But there also might not be anything to be gained by including more than one example of an item from each batch \u2014 that\u2019s something you\u2019ll have to decide based on your particular use case.", "Just like unbalanced classification problems, you can also use a weighting technique here to overcome this problem. Instead of removing examples, you average the items from a single batch and take the number of rows as a weight for your learner and performance.", "This isn\u2019t possible for all learners, but quite a few of the common ones support it. To figure out if your learner supports it, you can right click on an operator and say have a look at the operator information.", "Of course, this strategy has a few downsides as well.", "The first is that averaging all your attributes may not be the best thing to do. If your values differ a lot, then you again lose a lot of information when you average. It, again, boils down to these questions: How much of a duplicate are your rows? Are they just dependent pseudo-duplicates or real duplicates?", "The other question at hand is what to do with the label? For regression problems \u2014 for example, a measured concentration \u2014 you can of course take the average. But is this what you need? Are you maybe more interested in the maximum? Or the 8th decentile? As always, you should align your data science approach with the business needs at hand and think carefully about the choice that you\u2019re making.", "For classification problems, you run into the issue that the mode (most frequent class) is maybe even less suited. In this context, Classification problems are often real challenges, where you asked if something passed a quality test or not.", "Here you may use the old computer science trick and change the problem. One may consider moving away from your item-based problem and move to a batched based problem. The question you may answer here is: What fraction of my batch will not pass the quality test?", "This is a batch level regression problem, which can be turned into a classification problem if needed.", "One interesting way to tackle the batch problem is to use a sampling approach, but with an ensemble method. The idea is that you build multiple learners. Each learner sees only one item of a given batch.", "This item is randomly chosen. The fact that you do this multiple times ensures that you don\u2019t lose information. The idea can be thought as a random forest, where the random sampling is replaced with a stratified sampling.", "After talking about a few advanced ideas, I would like to emphasize that just using the data \u201cas it is\u201d is also a valid option.", "Machine learning algorithms are designed as robust systems. They are used to working with noise. Thus, they can in principal also work with those pseudo-duplicates.", "Random forests even produce similar duplicates on purpose in their bootstrapping sampling. Since random forests are very robust learners, and the bootstrapping is a random process, this does not harm the forest.", "As usual with machine learning, there\u2019s no free lunch and no easy answers. The ideas listed above are solid starting points. However, the only way you\u2019ll truly know what works well for your data is if you try a few things and see what works best.", "Remember that model training is inherently an iterative process, so see what works best for your particular use case.", "Getting a machine learning project off the ground is hard. The solution to this problem is to build a solid project foundation from the very first stages to set yourself up for success. The process I have outlined in this guide will help make that easier.", "This blog post was first published on the rapidminer.com blog.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Free Thinker and Data Scientist writing about data."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Ff720a6026bd&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhandling-batch-production-data-in-manufacturing-f720a6026bd&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhandling-batch-production-data-in-manufacturing-f720a6026bd&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhandling-batch-production-data-in-manufacturing-f720a6026bd&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhandling-batch-production-data-in-manufacturing-f720a6026bd&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----f720a6026bd--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----f720a6026bd--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@mLiebig_?source=post_page-----f720a6026bd--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@mLiebig_?source=post_page-----f720a6026bd--------------------------------", "anchor_text": "Martin Liebig (Schmitz), PhD"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F73ad31bcb312&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhandling-batch-production-data-in-manufacturing-f720a6026bd&user=Martin+Liebig+%28Schmitz%29%2C+PhD&userId=73ad31bcb312&source=post_page-73ad31bcb312----f720a6026bd---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ff720a6026bd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhandling-batch-production-data-in-manufacturing-f720a6026bd&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ff720a6026bd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhandling-batch-production-data-in-manufacturing-f720a6026bd&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@evphotocinema?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Evan Dvorkin"}, {"url": "https://unsplash.com/s/photos/manufacturing?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Unsplash"}, {"url": "https://rapidminer.com/glossary/machine-learning/", "anchor_text": "machine learning"}, {"url": "https://rapidminer.com/industry/manufacturing/", "anchor_text": "manufacturing data"}, {"url": "https://rapidminer.com/blog/validate-models-cross-validation/", "anchor_text": "cross validation"}, {"url": "https://rapidminer.com/", "anchor_text": "RapidMiner"}, {"url": "https://docs.rapidminer.com/latest/studio/operators/modeling/predictive/trees/parallel_random_forest.html", "anchor_text": "random forest"}, {"url": "https://rapidminer.com/resource/humans-guide-machine-learning-projects/", "anchor_text": "in this guide"}, {"url": "https://rapidminer.com/blog/batch-production-manufacturing-data/", "anchor_text": "rapidminer.com blog"}, {"url": "https://medium.com/tag/data-science?source=post_page-----f720a6026bd---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/artificalintelligence?source=post_page-----f720a6026bd---------------artificalintelligence-----------------", "anchor_text": "Artificalintelligence"}, {"url": "https://medium.com/tag/manufacturing?source=post_page-----f720a6026bd---------------manufacturing-----------------", "anchor_text": "Manufacturing"}, {"url": "https://medium.com/tag/analytics?source=post_page-----f720a6026bd---------------analytics-----------------", "anchor_text": "Analytics"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----f720a6026bd---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Ff720a6026bd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhandling-batch-production-data-in-manufacturing-f720a6026bd&user=Martin+Liebig+%28Schmitz%29%2C+PhD&userId=73ad31bcb312&source=-----f720a6026bd---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Ff720a6026bd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhandling-batch-production-data-in-manufacturing-f720a6026bd&user=Martin+Liebig+%28Schmitz%29%2C+PhD&userId=73ad31bcb312&source=-----f720a6026bd---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ff720a6026bd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhandling-batch-production-data-in-manufacturing-f720a6026bd&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----f720a6026bd--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Ff720a6026bd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhandling-batch-production-data-in-manufacturing-f720a6026bd&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----f720a6026bd---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----f720a6026bd--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----f720a6026bd--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----f720a6026bd--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----f720a6026bd--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----f720a6026bd--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----f720a6026bd--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----f720a6026bd--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----f720a6026bd--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@mLiebig_?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@mLiebig_?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Martin Liebig (Schmitz), PhD"}, {"url": "https://medium.com/@mLiebig_/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "1.5K Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F73ad31bcb312&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhandling-batch-production-data-in-manufacturing-f720a6026bd&user=Martin+Liebig+%28Schmitz%29%2C+PhD&userId=73ad31bcb312&source=post_page-73ad31bcb312--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Ff5dddeeb48a7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhandling-batch-production-data-in-manufacturing-f720a6026bd&newsletterV3=73ad31bcb312&newsletterV3Id=f5dddeeb48a7&user=Martin+Liebig+%28Schmitz%29%2C+PhD&userId=73ad31bcb312&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}