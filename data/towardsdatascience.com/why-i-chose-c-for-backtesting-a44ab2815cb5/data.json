{"url": "https://towardsdatascience.com/why-i-chose-c-for-backtesting-a44ab2815cb5", "time": 1683000797.494384, "path": "towardsdatascience.com/why-i-chose-c-for-backtesting-a44ab2815cb5/", "webpage": {"metadata": {"title": "Why I chose C for backtesting. Lessons from a journey to build an\u2026 | by Mario Emmanuel | Towards Data Science", "h1": "Why I chose C for backtesting", "description": "During the last year, I have been preparing a backtesting engine/framework to simulate intraday strategies in derivative markets. The journey has included different languages, several iterations\u2026"}, "outgoing_paragraph_urls": [{"url": "https://towardsdatascience.com/how-to-store-financial-market-data-for-backtesting-84b95fc016fc", "anchor_text": "the one about how to store market data", "paragraph_index": 4}, {"url": "https://towardsdatascience.com/best-language-for-quantitative-finance-here-are-my-findings-f1f458be48b7", "anchor_text": "the one on the different evaluated languages", "paragraph_index": 4}, {"url": "https://ieee.shortcm.li/OP8dFS", "anchor_text": "https://ieee.shortcm.li/OP8dFS", "paragraph_index": 23}], "all_paragraphs": ["During the last year, I have been preparing a backtesting engine/framework to simulate intraday strategies in derivative markets.", "The journey has included different languages, several iterations, small mistakes, big mistakes, great choices, \u201cjoint ventures\u201d and lonely walks. From others, I have taken both great and terrible advice.", "While in hindsight the outcome seems obvious, the truth is that finding the right approach is an iterative process. It is just after trying many things and after many iterations with real examples around this problem when things become clear.", "The needs and requirements to backtest/simulate market quantitative strategies are somehow different, and, in my humble opinion, they share many roots with the approach to what has been traditionally the scientific simulation done at research centres and universities. This is true at least for the set of problems I have been working on (quantitative trading industry is really big, and I am definitively not entitled to talk about all approaches, strategies and needs).", "I have covered the journey in a few posts. From the articles, the most relevant ones would be the one about how to store market data and the one on the different evaluated languages. If you find this article interesting you might find those two ones interesting too.", "The languages evaluated included Python, Fortran, Julia and C. Julia was the last one evaluated and I was really excited about its potential, but as long as the project moved forward (the whole latest iteration of the backtest engine was implemented in Julia) I began to realise that there were some practical limitations with the language.", "Julia was a promising discovery. The message of delivering C performance with the simplicity of Python/Numpy/Pandas was highly appealing. However, as I was working longer on the project I soon realised that some aspects of the language were not that intuitive and that matching C performance was not easy for a novel programmer. Make no mistakes, it is an outstanding programming language, but after digging a bit more on the kind of problem I am dealing with, my conclusion is that the venerable C is still the best choice.", "Julia delivers much more performance than Python but out of the box it is hard to match C or Fortran speeds. The speed is delivered by being a compiled language but also by requiring certain code style in some areas which create some oddities in the way the language is used. This is not a design flaw but a limitation of trying to match a low-level language performance with a high-level language, but this creates the impression that while it is not a complex language it needs some experience to master. The available debugging tools are also not as evolved as the ones you will find in more mature languages.", "I also found that what really matters in backtesting/simulation is a set of routines/methods/functions and a common repository of data, together with proper debugging tools.", "I can not stress enough the relevance of having a simple approach and adequate debugging tools as the key elements to have success in this kind of project. Those two elements are more important than the actual language selection. The reason for needing a proper IDE is that the routines tend to be small but dense and deeply algorithmic, so it is very easy to make mistakes. Without proper debugging tools, the project can easily stall.", "This need for a proper IDE was one of the main reasons why I fell back to C \u2014 which ironically was the origin of the journey \u2014 but this time using Microsoft tools.", "With better tools, more experience in my backpack and a simplified view on both problem and solution, C proved to be a much better workmate. The point with C is that you need to properly address project complexity. If the project is too complex it will be really hard to cope with it in C and it will likely stall, but if you manage to approach both problem and solution from a simplified perspective C is a great companion.", "The other great lesson is that we always tend to overcomplicate things. A few days ago a colleague who has been working in the industry shared this reflection with me after he saw a screenshot on some metrics of the backtesting I was working on \u2013he was surprised on the speed and simplicity of the engine\u2013. I realised how the success of this final iteration relied on having been able to simplify the whole project.", "Complexity is always an issue. Some languages (the high-level ones) withstand complexity better. They will just make the project more bumpy and lengthy. But in other languages \u2014 such as C \u2014 complexity will definitively kill any chance of success because the nature of the language makes impossible to deal with complex programs.", "At the beginning of the journey, we were thinking of providing the engine with unlimited bolts and buttons, being capable to handle many configurations. But, does that make sense? The last iteration is pretty simple, assumes an informed user who is going to put sane values on the parameters and that is going to try the default values more often than not. By following this path a basic version of an engine will be just 1000 or 2000 lines of code \u2014 blanks and comments included \u2014 and it will be really easy to explain to others and extend. If you need something specific, you will always have time to code a specific routine to handle that.", "The approach of using a simple library (which I already mentioned and tested in my previous article) is still the best way I have found to address the problem. The library can be a dynamically linked library (a DLL) which means that the upper language can be a higher-level language (more suitable for handling the whole workflow/graphic output of the simulation). If you still want to use C++ for that layer, you can do it easily, but if you feel better using Python, Java, C# or Visual Basic, the DLL will allow you to do so while keeping C to do the hard job.", "After all these months I see a simulation engine as I see the call methods exposed by an OS kernel because a backtesting engine in quantitative trading is much more similar to that than to anything else.", "This view is subjective, but I honestly think it is still an informed opinion. The experience put into this journey encompasses a good background in programming experience, three years studying trading strategies and a whole year coding and testing solutions for this specific problem. While a seasoned industry professional will definitively have more experience there is still a certain amount of valuable effort to at least reach some valid points.", "I have also always tried to gather as much knowledge as possible during the few opportunities I have had to talk to people with experience in this industry. That has been in my opinion a great boost on the way the problem has been addressed. I think that without those small inputs I would still be approaching the problem from the wrong angle.", "It is also worth to mention that the approach strongly depends on the needs. It is not the same to deal with daily data than working out level-III market data for HFT, needs and solutions are different.", "Now that the appropriate disclaimers have been made, we can review the takeaways:", "In the end, the recurrent concepts of \u201cless is more\u201d and \u201ckeeping it simple\u201d still work. Just think in the simplest possible reusable solution, and once you have made it simple think again on how to make it even more simple. If something is not clearly reusable do not think how to abstract it to make it reusable, just write an auxiliary tool or method to deal with that specific need. This paradigm works for most of the cases in technology: never be afraid of doing it that simple.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Consultant, retail trader & lifelong learner | Linkedin https://ieee.shortcm.li/OP8dFS"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fa44ab2815cb5&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhy-i-chose-c-for-backtesting-a44ab2815cb5&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhy-i-chose-c-for-backtesting-a44ab2815cb5&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhy-i-chose-c-for-backtesting-a44ab2815cb5&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhy-i-chose-c-for-backtesting-a44ab2815cb5&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----a44ab2815cb5--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----a44ab2815cb5--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@m.emmanuel?source=post_page-----a44ab2815cb5--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@m.emmanuel?source=post_page-----a44ab2815cb5--------------------------------", "anchor_text": "Mario Emmanuel"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F7728df51142e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhy-i-chose-c-for-backtesting-a44ab2815cb5&user=Mario+Emmanuel&userId=7728df51142e&source=post_page-7728df51142e----a44ab2815cb5---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fa44ab2815cb5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhy-i-chose-c-for-backtesting-a44ab2815cb5&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fa44ab2815cb5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhy-i-chose-c-for-backtesting-a44ab2815cb5&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://towardsdatascience.com/how-to-store-financial-market-data-for-backtesting-84b95fc016fc", "anchor_text": "the one about how to store market data"}, {"url": "https://towardsdatascience.com/best-language-for-quantitative-finance-here-are-my-findings-f1f458be48b7", "anchor_text": "the one on the different evaluated languages"}, {"url": "https://medium.com/tag/data-science?source=post_page-----a44ab2815cb5---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/money?source=post_page-----a44ab2815cb5---------------money-----------------", "anchor_text": "Money"}, {"url": "https://medium.com/tag/trading?source=post_page-----a44ab2815cb5---------------trading-----------------", "anchor_text": "Trading"}, {"url": "https://medium.com/tag/finance?source=post_page-----a44ab2815cb5---------------finance-----------------", "anchor_text": "Finance"}, {"url": "https://medium.com/tag/programming?source=post_page-----a44ab2815cb5---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fa44ab2815cb5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhy-i-chose-c-for-backtesting-a44ab2815cb5&user=Mario+Emmanuel&userId=7728df51142e&source=-----a44ab2815cb5---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fa44ab2815cb5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhy-i-chose-c-for-backtesting-a44ab2815cb5&user=Mario+Emmanuel&userId=7728df51142e&source=-----a44ab2815cb5---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fa44ab2815cb5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhy-i-chose-c-for-backtesting-a44ab2815cb5&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----a44ab2815cb5--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fa44ab2815cb5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhy-i-chose-c-for-backtesting-a44ab2815cb5&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----a44ab2815cb5---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----a44ab2815cb5--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----a44ab2815cb5--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----a44ab2815cb5--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----a44ab2815cb5--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----a44ab2815cb5--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----a44ab2815cb5--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----a44ab2815cb5--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----a44ab2815cb5--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@m.emmanuel?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@m.emmanuel?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Mario Emmanuel"}, {"url": "https://medium.com/@m.emmanuel/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "977 Followers"}, {"url": "https://ieee.shortcm.li/OP8dFS", "anchor_text": "https://ieee.shortcm.li/OP8dFS"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F7728df51142e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhy-i-chose-c-for-backtesting-a44ab2815cb5&user=Mario+Emmanuel&userId=7728df51142e&source=post_page-7728df51142e--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Ffd67658cd0f9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhy-i-chose-c-for-backtesting-a44ab2815cb5&newsletterV3=7728df51142e&newsletterV3Id=fd67658cd0f9&user=Mario+Emmanuel&userId=7728df51142e&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}