{"url": "https://towardsdatascience.com/using-scispacy-for-named-entity-recognition-785389e7918d", "time": 1683007603.086338, "path": "towardsdatascience.com/using-scispacy-for-named-entity-recognition-785389e7918d/", "webpage": {"metadata": {"title": "Using scispaCy for Named-Entity Recognition (Part 1) | by Akash Kaul | Towards Data Science", "h1": "Using scispaCy for Named-Entity Recognition (Part 1)", "description": "In 2019, the Allen Institute for Artificial Intelligence (AI2) developed scispaCy, a full, open-source spaCy pipeline for Python designed for analyzing biomedical and scientific text using natural\u2026"}, "outgoing_paragraph_urls": [{"url": "https://uoa-eresearch.github.io/eresearch-cookbook/recipe/2014/11/26/python-virtual-env/", "anchor_text": "here", "paragraph_index": 1}, {"url": "https://github.com/akash-kaul/Using-scispaCy-for-Named-Entity-Recognition", "anchor_text": "here", "paragraph_index": 3}, {"url": "https://pandas.pydata.org/pandas-docs/stable/getting_started/install.html", "anchor_text": "here", "paragraph_index": 5}, {"url": "https://allenai.github.io/scispacy/", "anchor_text": "here", "paragraph_index": 7}, {"url": "https://www.semanticscholar.org/cord19/download", "anchor_text": "here", "paragraph_index": 11}, {"url": "https://pandas.pydata.org/pandas-docs/stable/index.html", "anchor_text": "here", "paragraph_index": 14}, {"url": "https://github.com/akash-kaul/Using-scispaCy-for-Named-Entity-Recognition", "anchor_text": "Google Colab project", "paragraph_index": 23}, {"url": "https://gofile.io/d/mMh5zc", "anchor_text": "Gofile", "paragraph_index": 35}, {"url": "https://towardsdatascience.com/linking-documents-in-a-semantic-graph-732ab511a01e", "anchor_text": "Part 2", "paragraph_index": 36}], "all_paragraphs": ["In 2019, the Allen Institute for Artificial Intelligence (AI2) developed scispaCy, a full, open-source spaCy pipeline for Python designed for analyzing biomedical and scientific text using natural language processing (NLP). scispaCy is a powerful tool, especially for named entity recognition (NER), or identifying keywords (called entities) and ordering them into categories. I will be taking you through a basic introduction to using scispaCy for NER, and you will soon be on your way to becoming a master of NLP.", "The first step is to choose an environment to work in. I used Google Colab, but Jupyter Notebook or simply working from the terminal are fine, too. If you do work from the terminal, just make sure to create a virtual environment to work in. If you are working in Google Colab, there is no need to do this. Easy-to-follow instructions on creating a virtual environment can be found here.", "Because I used Google Colab, the syntax used may be slightly different than that used for other environments.", "The full code for this project can be found here.", "The code for this project has been updated since the writing of this blog. The general layout remains the same.", "Pandas is a Python library used for data manipulation. This will help with importing and representing the data we will analyze (talked about in the next section). If you\u2019re working from Google Colab, pandas comes pre-installed, so you can ignore this step. Otherwise, install pandas using either Conda or PyPI (whichever you prefer). You can view all the steps for the installation process here.", "Installing scispaCy is pretty straight-forward. It is installed just like any other Python package.", "After installing scispaCy, you next need to install one of their premade models. scispaCy models come in two flavors: Core and NER. The Core models come in three sizes (small, medium, large) based on the amount of vocabulary stored, and they identify entities but do not classify them. The NER models, on the other hand, identify and classify entities. There are 4 different NER models built on different entity categories. You may need to experiment with the different models to find which one works best for your needs. The full list of models and specifications can be found here. Once you pick a model, install it using the model URL.", "Example of installing the \u201cen_core_sci_sm\u201d model", "Once you have installed all of your packages and a virtual environment is created, simply import the packages you just downloaded.", "You may notice we also import an additional package \u201cdisplacy\u201d. Displacy isn\u2019t required to perform any of the NER actions, but it is a visualizer that helps us see what\u2019s going on.", "For this example, we used the metadata from CORD-19, an open database of research papers about Covid-19. The metadata, as well as the full collection of articles, can be found here.", "The metadata file is a bit finicky, so if the file isn\u2019t doing what you want, just copy the contents to a new file. This should resolve any problems you encounter with the file.", "To import the data, we use the pandas read_csv() function.", "The function reads in the file path and stores the data as a DataFrame, the main Pandas data structure. For more information on how pandas stores and manipulates data, you can view the documentation here.", "If you are using Colab, you can drag the file into the \u201cFiles\u201d section, then right-click and choose \u201cCopy Path\u201d to easily access the path to the file you want.", "The metadata provides lots of useful information about the over 60,00 papers in CORD-19, including authors, reference numbers, etc. However, for our purposes, the data we care about is the abstracts. The full abstract of each paper is listed under the column named \u201cabstract\u201d. So, our next step is to choose this text. We will do this using the DataFrame loc function. This function takes in the location of a cell in the DataFrame and returns the data present in that cell. To access a specific abstract, just type the specific row you want and the header of the column, and store as a string variable.", "This finds the abstract located in the first row of the table (remember, in Python indexing starts at 0). You can then print your newly created string to verify you have the data you want. It should look something like this:", "Now that you have your text, you can get into the fun part. Thanks to scispaCy, entity extraction is relatively easy. We will be using a Core model and a NER model to highlight the differences between the two.", "Your output should look like this:", "Here we used a model designed to identify entities of the type DNA, Cell Type, RNA, Protein, Cell Line", "The output should look like this:", "Just like that, you have successfully used NER on a sample text! But, that was only one abstract of the over 60,000 in the CORD-19 metadata. What if we wanted to use NER on 100 abstracts? What about 1,000? What about all of them? Well, the process, though requiring a little more finesse, is essentially the same as before.", "I highly recommend following along with the Google Colab project as you read this section to fully understand what we are doing.", "So, the first step is the same as before. We need to read in our data.", "Again use the specific path to the metadata file", "Next, we load in our models. For this example, we are going to use all 4 NER models, so you\u2019ll need to install and import them if you haven\u2019t already. Just follow the instructions as described earlier, then load them.", "Next, we want to create an empty table that will store the entity and value pairs. The table will have 3 columns: \u201cdoi\u201d, \u201centity\u201d, and \u201cclass\u201d. The table will be normalized so that the doi for every entity/class pair will be in the \u201cdoi\u201d column, even if that doi has already been listed. This is done so that there are no blank spaces in any of the columns, which helps if you want to use the data for other programs later. To create the table, you need to create a dictionary with 3 lists inside.", "Now is where things get a little complicated. We\u2019ll start by looping over the entire file. To do this, we use the pandas index function, which gives you the range of values (the number of rows). We then use the itterrows() function to iterate over the entire file. So, your loop should look something like this.", "For each iteration of the loop, we want to extract the relevant abstract and doi. We also want to ignore any empty abstracts. The empty cells are stored as NaNs in Python, which have the type float.", "The continue statement ends the current iteration of the loop and moves on to the next one. This allows us to skip any rows with blank abstracts.", "Now that we have our text, we need to use one of our models loaded earlier to extract the entities. If you view the code on Google Colab, this step is divided into several separate methods, but it can also be written without the use of any helper methods. Do note, however, that it is best to run the models one at a time, especially in Colab where reading and writing files take quite a long time. The aggregate code using one of the 4 NER models should look something like this:", "Remember that all of this code is inside the initial for loop", "This code might look scary, but in reality, it\u2019s quite similar to what we\u2019ve already practiced. We pass our text through a model, but this time instead of displaying the result using displacy, we store it in a dictionary. We then loop through the dictionary and append the results, along with the corresponding doi of the article we are looking at, to our table. We continue to do this, looping over every row in the file. Once the table is filled, and the for loop has ended, the last step is to create an output CSV file. Thanks to pandas, this is quite easy.", "You can choose any title for the output file, as long as it follows the format shown. Once your code is done running, the output file will show up in the \u201cFiles\u201d section on Google Colab. You can then download the file and admire all of your hard work.", "Alternatively, you can download all 4 output CSV files from Gofile.", "There are many ways to use the data we have just gathered. One direction we can take is to semantically link the publications using a graph database. Check out Part 2 of this project, where I take you through exactly how to create a graph and model our data.", "If you followed along with this post, Congratulations! You just made your first step in the world of scispaCy and NER for scientific documents; however, there\u2019s so much more to explore. Within scispaCy alone, there are methods for abbreviation detection, dependency parsing, sentence detection, and much more. I hope you enjoyed learning a little about scispaCy and how it can be used for biomedical NLP, and I hope you all continue to play around, explore, and learn.", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F785389e7918d&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-scispacy-for-named-entity-recognition-785389e7918d&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-scispacy-for-named-entity-recognition-785389e7918d&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-scispacy-for-named-entity-recognition-785389e7918d&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-scispacy-for-named-entity-recognition-785389e7918d&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----785389e7918d--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----785389e7918d--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@akash_kaul?source=post_page-----785389e7918d--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@akash_kaul?source=post_page-----785389e7918d--------------------------------", "anchor_text": "Akash Kaul"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Ffc0227505fc6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-scispacy-for-named-entity-recognition-785389e7918d&user=Akash+Kaul&userId=fc0227505fc6&source=post_page-fc0227505fc6----785389e7918d---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F785389e7918d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-scispacy-for-named-entity-recognition-785389e7918d&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F785389e7918d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-scispacy-for-named-entity-recognition-785389e7918d&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@beatriz_perez?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Beatriz P\u00e9rez Moya"}, {"url": "https://unsplash.com/backgrounds/art/paper?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Unsplash"}, {"url": "https://uoa-eresearch.github.io/eresearch-cookbook/recipe/2014/11/26/python-virtual-env/", "anchor_text": "here"}, {"url": "https://github.com/akash-kaul/Using-scispaCy-for-Named-Entity-Recognition", "anchor_text": "here"}, {"url": "https://pandas.pydata.org/pandas-docs/stable/getting_started/install.html", "anchor_text": "here"}, {"url": "https://allenai.github.io/scispacy/", "anchor_text": "here"}, {"url": "https://s3-us-west-2.amazonaws.com/ai2-s2-scispacy/releases/v0.2.4/en_core_sci_sm-0.2.4.tar.gz", "anchor_text": "https://s3-us-west-2.amazonaws.com/ai2-s2-scispacy/releases/v0.2.4/en_core_sci_sm-0.2.4.tar.gz"}, {"url": "https://www.semanticscholar.org/cord19/download", "anchor_text": "here"}, {"url": "https://pandas.pydata.org/pandas-docs/stable/index.html", "anchor_text": "here"}, {"url": "https://github.com/akash-kaul/Using-scispaCy-for-Named-Entity-Recognition", "anchor_text": "Google Colab project"}, {"url": "https://gofile.io/d/mMh5zc", "anchor_text": "Gofile"}, {"url": "https://towardsdatascience.com/linking-documents-in-a-semantic-graph-732ab511a01e", "anchor_text": "Part 2"}, {"url": "https://uoa-eresearch.github.io/eresearch-cookbook/recipe/2014/11/26/python-virtual-env/", "anchor_text": "https://uoa-eresearch.github.io/eresearch-cookbook/recipe/2014/11/26/python-virtual-env/"}, {"url": "https://github.com/akash-kaul/Using-scispaCy-for-Named-Entity-Recognition", "anchor_text": "https://github.com/akash-kaul/Using-scispaCy-for-Named-Entity-Recognition"}, {"url": "https://pandas.pydata.org/pandas-docs/stable/getting_started/install.html", "anchor_text": "https://pandas.pydata.org/pandas-docs/stable/getting_started/install.html"}, {"url": "https://allenai.github.io/scispacy/", "anchor_text": "https://allenai.github.io/scispacy/"}, {"url": "https://www.semanticscholar.org/cord19/download", "anchor_text": "https://www.semanticscholar.org/cord19/download"}, {"url": "https://pandas.pydata.org/pandas-docs/stable/index.html", "anchor_text": "https://pandas.pydata.org/pandas-docs/stable/index.html"}, {"url": "https://medium.com/tag/nlp?source=post_page-----785389e7918d---------------nlp-----------------", "anchor_text": "NLP"}, {"url": "https://medium.com/tag/tutorial?source=post_page-----785389e7918d---------------tutorial-----------------", "anchor_text": "Tutorial"}, {"url": "https://medium.com/tag/scispacy?source=post_page-----785389e7918d---------------scispacy-----------------", "anchor_text": "Scispacy"}, {"url": "https://medium.com/tag/python?source=post_page-----785389e7918d---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/named-entity-recognition?source=post_page-----785389e7918d---------------named_entity_recognition-----------------", "anchor_text": "Named Entity Recognition"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F785389e7918d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-scispacy-for-named-entity-recognition-785389e7918d&user=Akash+Kaul&userId=fc0227505fc6&source=-----785389e7918d---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F785389e7918d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-scispacy-for-named-entity-recognition-785389e7918d&user=Akash+Kaul&userId=fc0227505fc6&source=-----785389e7918d---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F785389e7918d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-scispacy-for-named-entity-recognition-785389e7918d&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----785389e7918d--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F785389e7918d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-scispacy-for-named-entity-recognition-785389e7918d&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----785389e7918d---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----785389e7918d--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----785389e7918d--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----785389e7918d--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----785389e7918d--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----785389e7918d--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----785389e7918d--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----785389e7918d--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----785389e7918d--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@akash_kaul?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@akash_kaul?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Akash Kaul"}, {"url": "https://medium.com/@akash_kaul/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "135 Followers"}, {"url": "https://www.linkedin.com/in/akash-kaul-6a8063194/", "anchor_text": "https://www.linkedin.com/in/akash-kaul-6a8063194/"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Ffc0227505fc6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-scispacy-for-named-entity-recognition-785389e7918d&user=Akash+Kaul&userId=fc0227505fc6&source=post_page-fc0227505fc6--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fe0f35f4f8238&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fusing-scispacy-for-named-entity-recognition-785389e7918d&newsletterV3=fc0227505fc6&newsletterV3Id=e0f35f4f8238&user=Akash+Kaul&userId=fc0227505fc6&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}