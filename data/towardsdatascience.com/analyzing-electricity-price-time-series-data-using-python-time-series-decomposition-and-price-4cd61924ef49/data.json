{"url": "https://towardsdatascience.com/analyzing-electricity-price-time-series-data-using-python-time-series-decomposition-and-price-4cd61924ef49", "time": 1682997298.6318011, "path": "towardsdatascience.com/analyzing-electricity-price-time-series-data-using-python-time-series-decomposition-and-price-4cd61924ef49/", "webpage": {"metadata": {"title": "Forecasting Electricity Price Time Series Data in Python using a VAR Model | by Kirsten Perry | Towards Data Science", "h1": "Forecasting Electricity Price Time Series Data in Python using a VAR Model", "description": "A Crash Course in Time Series Decomposition and Forecasting with a Vector Autoregression (VAR) Model"}, "outgoing_paragraph_urls": [{"url": "https://www.eia.gov/opendata/", "anchor_text": "Open Data application programming interface (API)", "paragraph_index": 1}, {"url": "https://www.eia.gov/state/?sid=TX#tabs-4", "anchor_text": "On its website", "paragraph_index": 6}, {"url": "https://faculty.washington.edu/", "anchor_text": "https://faculty.washington.edu", "paragraph_index": 12}, {"url": "https://faculty.chicagobooth.edu/jeffrey.russell/teaching/timeseries/handouts/notes5.pdf", "anchor_text": "https://faculty.chicagobooth.edu/jeffrey.russell/teaching/timeseries/handouts/notes5.pdf", "paragraph_index": 13}], "all_paragraphs": ["I\u2019ve dealt with projects that involved time series analysis and forecasting on-and-off for the past several years, but I\u2019ve always found the topic somewhat inaccessible for beginners due to the lack of comprehensive Python tutorials available. So, in an effort to correct this, this post walks beginners through time series analysis, using monthly electricity price data for the state of TX available via the Energy Information Administration\u2019s API. Specifically, this tutorial covers time series decomposition and vector autoregression (VAR) modelling to forecast electricity prices for the state of Texas.", "First, a little background on the Energy Information Administration, or the EIA. The EIA is a branch in the US Department of Energy responsible for collecting and analyzing energy-related data, including oil and gas, coal, nuclear, electric, and renewables. Via its Open Data application programming interface (API), users can directly pull the EIA time series data into Python for analysis.", "In this analysis, we\u2019re going to pull the time series for electricity prices for the state of Texas into Python for analysis, as shown below:", "First, let\u2019s look at whether or not the monthly electricity data displays seasonality and a trend. To do this, we use the seasonal_decompose() function in the statsmodels.tsa.seasonal package. This function breaks down a time series into its core components: trend, seasonality, and random noise. The code and its outputs are displayed below:", "So what does the plot above mean? If we take a closer look at the seasonal component of the decomposition, we can validate a trend that logically makes sense: during the summer months in Texas, electricity prices skyrocket. For anyone who has been to Texas in the middle of summer, it\u2019s sweltering hot and practically unlivable without air conditioning (I know, I live in Houston). So, more air conditioning leads to more electricity usage, which leads to higher electricity prices.", "Additionally, there is a second, smaller spike in electricity prices around the beginning of each year. This is likely due to the weather being cool enough that Texans resort to heating their homes, offices, etc. As most of Texas\u2019s weather is fairly mild in the winter, this spike is significantly less pronounced than the spike in electricity prices during the summer.", "Now that we\u2019ve done some initial analysis using time series decomposition, we want to determine if we can predict electricity prices by using another predictor time series as a proxy. In order to get an idea of what factors may affect electricity prices, let\u2019s first check out how electricity is generated in Texas. On its website, the EIA provides a breakdown of the sources of electricity in Texas, shown in the bar graph below:", "Based on the above graph, natural gas appears to be the main source of electricity generation in Texas as of March 2019, with coal-fired and renewables tied for second.", "Although we\u2019re analyzing electricity data going back to 2001 and the breakdown above is from March 2019, for the sake of simplicity we\u2019ll assume that natural gas has been one of the main sources of electricity generation in Texas for the past 15\u201320 years. Consequently, we\u2019re going to pull the time series of natural gas prices via the EIA API and compare side-by-side to the TX electricity price time series:", "There appears to be more variation in the natural gas price time series (the highs are especially high and the lows are especially low), but for the most part, the trends in both time series appear very similar. In fact, it\u2019s highly likely we could estimate TX electricity price using natural gas price as a proxy.", "This presents an interesting problem \u2014 using lagged values of a time series, along with lagged values other time series sets, to predict future values. One approach to solving a problem such as this is called vector autoregression, or VAR. VAR is an extension of the autoregressive (or AR) model, where multiple variables are used when generating predictions. VAR models are very popular because of their flexibility when analyzing economic and financial time series, and are great for forecasting.", "The image below gives a breakdown of a VAR equation with two variables and first order dynamics. It is a very simple linear equation, where the x- and y-values at time t-1 are used to predict the x- and y-values at time t. As variable x depends on variable y and vice versa, they are jointly considered using a system of equations. Basically, VAR models work by using lagged data for multiple dependent time series to predict future values.", "The following handout available via the University of Washington gives an in-depth description of the mathematics behind the VAR model, if you would like further background: https://faculty.washington.edu.", "Additionally, the University of Chicago Booth School of Business gives a great high-level overview of VAR modeling in the following presentation: https://faculty.chicagobooth.edu/jeffrey.russell/teaching/timeseries/handouts/notes5.pdf", "As with most econometric analysis, there are a couple of requirements for the VAR model to work. First, the passed time series need to be stationary, i.e. the statistical properties of the times series, including mean, variance, and autocorrelation, need to be constant over time. Consequently, time series that display seasonality or a trend are NOT stationary.", "There are a couple approaches that we can take to make a model stationary. They are as follows:", "Next, in order for a VAR model to work, the sampling frequency (i.e. daily, monthly, yearly data) needs to be the same. If it isn\u2019t, the data needs to be converted to the same frequency using imputation/linear interpolation, etc.", "In the code below, each time series is transformed using the numpy natural log function, and then differenced by one interval:", "In order to test if the time series are now stationary, we use the Augmented Dickey Fuller Test. The Augmented Dickey-Fuller Test tests the null hypothesis that a unit root is present in a time series (i.e. if a unit root is in the time series, then it isn\u2019t stationary). To successfully determine that a time series is stationary, the test must return a p-value of less than .05. In the Python code below, we run the Augmented Dickey-Fuller test on the transformed, differenced time series, determining that they are both stationary (the p-values returned are .000299 and 0 for the electricity and natural gas time series, respectively):", "Now that we\u2019ve made our two time series stationary, it\u2019s time to fit the data to a VAR model. The Python code below successfully builds the model and returns a summary of the results, where we use a 95/5 percent split for the training/validation sets:", "What we really want to focus on in the model summary above is the equation for y1, where y1 estimates the electricity prices in the state of Texas based on lagged values of itself and lagged natural gas prices.", "There is both a t-statistic and p-value associated with the lagged electricity price data (L1.y1), and lagged natural gas price data (L1.y2). The t-statistic compares the data to expected results under the null hypothesis. If sample results exactly equal the null hypothesis, then the t-statistic is 0. Alternatively, the higher the t-statistic value, the more likely that we can reject the null hypothesis. Basically, the higher the t-statistic, the more likely that there is a correlation between the two variables.", "Each t-statistic has a corresponding p-value. P-values are also used to reject the null hypothesis. The lower the p-value, the stronger the evidence against the null hypothesis. Normally a p-value under .05 is used to determine statistical significance.", "With all of this information in mind, let\u2019s interpret the results of the model summary for equation y1.", "For the lagged electricity price variable, there is a t-statistic of 3.002 and a p-value 0.003 \u2014 clearly, lagged values of the electricity price time series affect future values of the time series, and we can reject the null hypothesis.", "Lagged values of the natural gas price time series are also promising with a t-statistic of 2.225 and a p-value of 0.026, well below the cutoff for statistical significance, and a clear indicator that lagged values in the natural gas time series affect future values in the electricity price time series.", "Now that we\u2019ve built a model, it\u2019s time to generate and compare the predictions to actual data in the test/validation set. It is important to note that the data must be un-differenced and back-transformed in order to understand the electricity price predictions. The following code performs the un-differencing and back-transformation operations, as well as calculating the forecasting metrics associated with evaluating model performance, including forecast bias, mean absolute error, mean squared error and root mean squared error:", "The results here look very promising! The VAR appears to estimate electricity prices fairly accurately. The forecast bias metric is -0.041638, indicating that the model has a tendency to over-forecast, or predict too high. Mean absolute error, mean squared error, and root mean squared error are also fairly low, which is good. Based onmean absolute error (MAE), there is an average $.22 variation between the forecasted and the actual values.", "This concludes this tutorial. Thank you for reading!", "Check out some of my other energy-related Python tutorials:", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Data Scientist, Renewables. All thoughts are my own"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F4cd61924ef49&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fanalyzing-electricity-price-time-series-data-using-python-time-series-decomposition-and-price-4cd61924ef49&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fanalyzing-electricity-price-time-series-data-using-python-time-series-decomposition-and-price-4cd61924ef49&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fanalyzing-electricity-price-time-series-data-using-python-time-series-decomposition-and-price-4cd61924ef49&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fanalyzing-electricity-price-time-series-data-using-python-time-series-decomposition-and-price-4cd61924ef49&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----4cd61924ef49--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----4cd61924ef49--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@kirsten.perry2215?source=post_page-----4cd61924ef49--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@kirsten.perry2215?source=post_page-----4cd61924ef49--------------------------------", "anchor_text": "Kirsten Perry"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F4bafedc914d0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fanalyzing-electricity-price-time-series-data-using-python-time-series-decomposition-and-price-4cd61924ef49&user=Kirsten+Perry&userId=4bafedc914d0&source=post_page-4bafedc914d0----4cd61924ef49---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F4cd61924ef49&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fanalyzing-electricity-price-time-series-data-using-python-time-series-decomposition-and-price-4cd61924ef49&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F4cd61924ef49&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fanalyzing-electricity-price-time-series-data-using-python-time-series-decomposition-and-price-4cd61924ef49&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://www.eia.gov/opendata/", "anchor_text": "Open Data application programming interface (API)"}, {"url": "https://techrando.com/2019/06/26/how-to-use-the-energy-information-administration-eia-application-programming-interface-api-and-pull-live-data-directly-into-python-for-analysis/", "anchor_text": "https://techrando.com/2019/06/26/how-to-use-the-energy-information-administration-eia-application-programming-interface-api-and-pull-live-data-directly-into-python-for-analysis/"}, {"url": "https://www.eia.gov/state/?sid=TX#tabs-4", "anchor_text": "On its website"}, {"url": "https://www.eia.gov/state/?sid=TX#tabs-4", "anchor_text": "https://www.eia.gov/state/?sid=TX#tabs-4"}, {"url": "http://www.ams.sunysb.edu/~zhu/ams586/VAR_Lecture2.pdf", "anchor_text": "http://www.ams.sunysb.edu/~zhu/ams586/VAR_Lecture2.pdf"}, {"url": "https://faculty.washington.edu/", "anchor_text": "https://faculty.washington.edu"}, {"url": "https://faculty.chicagobooth.edu/jeffrey.russell/teaching/timeseries/handouts/notes5.pdf", "anchor_text": "https://faculty.chicagobooth.edu/jeffrey.russell/teaching/timeseries/handouts/notes5.pdf"}, {"url": "https://blog.minitab.com/blog/statistics-and-quality-data-analysis/what-are-t-values-and-p-values-in-statistics", "anchor_text": "https://blog.minitab.com/blog/statistics-and-quality-data-analysis/what-are-t-values-and-p-values-in-statistics"}, {"url": "https://machinelearningmastery.com/time-series-forecasting-performance-measures-with-python/", "anchor_text": "https://machinelearningmastery.com/time-series-forecasting-performance-measures-with-python/"}, {"url": "https://github.com/kperry2215/electricity_price_time_series_analysis/blob/master/analyze_monthly_electricity_data.py", "anchor_text": "https://github.com/kperry2215/electricity_price_time_series_analysis/blob/master/analyze_monthly_electricity_data.py"}, {"url": "https://techrando.com/2019/07/03/how-to-automate-decline-curve-analysis-dca-in-python-using-scipys-optimize-curve_fit-function/", "anchor_text": "https://techrando.com/2019/07/03/how-to-automate-decline-curve-analysis-dca-in-python-using-scipys-optimize-curve_fit-function/"}, {"url": "https://techrando.com/2019/07/14/using-publicly-available-fracfocus-data-and-pythons-matplotlib-function-to-visualize-oil-and-gas-companies-completions-strategies-in-the-permian-basin/", "anchor_text": "https://techrando.com/2019/07/14/using-publicly-available-fracfocus-data-and-pythons-matplotlib-function-to-visualize-oil-and-gas-companies-completions-strategies-in-the-permian-basin/"}, {"url": "https://techrando.com/2019/07/19/analyzing-electricity-price-time-series-data-using-python-time-series-decomposition-and-price-forecasting-using-a-vector-autoregression-var-model/", "anchor_text": "http://techrando.com"}, {"url": "https://medium.com/tag/data-science?source=post_page-----4cd61924ef49---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/python?source=post_page-----4cd61924ef49---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/time-series-analysis?source=post_page-----4cd61924ef49---------------time_series_analysis-----------------", "anchor_text": "Time Series Analysis"}, {"url": "https://medium.com/tag/time-series-forecasting?source=post_page-----4cd61924ef49---------------time_series_forecasting-----------------", "anchor_text": "Time Series Forecasting"}, {"url": "https://medium.com/tag/econometrics?source=post_page-----4cd61924ef49---------------econometrics-----------------", "anchor_text": "Econometrics"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F4cd61924ef49&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fanalyzing-electricity-price-time-series-data-using-python-time-series-decomposition-and-price-4cd61924ef49&user=Kirsten+Perry&userId=4bafedc914d0&source=-----4cd61924ef49---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F4cd61924ef49&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fanalyzing-electricity-price-time-series-data-using-python-time-series-decomposition-and-price-4cd61924ef49&user=Kirsten+Perry&userId=4bafedc914d0&source=-----4cd61924ef49---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F4cd61924ef49&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fanalyzing-electricity-price-time-series-data-using-python-time-series-decomposition-and-price-4cd61924ef49&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----4cd61924ef49--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F4cd61924ef49&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fanalyzing-electricity-price-time-series-data-using-python-time-series-decomposition-and-price-4cd61924ef49&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----4cd61924ef49---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----4cd61924ef49--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----4cd61924ef49--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----4cd61924ef49--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----4cd61924ef49--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----4cd61924ef49--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----4cd61924ef49--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----4cd61924ef49--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----4cd61924ef49--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@kirsten.perry2215?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@kirsten.perry2215?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Kirsten Perry"}, {"url": "https://medium.com/@kirsten.perry2215/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "350 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F4bafedc914d0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fanalyzing-electricity-price-time-series-data-using-python-time-series-decomposition-and-price-4cd61924ef49&user=Kirsten+Perry&userId=4bafedc914d0&source=post_page-4bafedc914d0--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F43d4e9098252&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fanalyzing-electricity-price-time-series-data-using-python-time-series-decomposition-and-price-4cd61924ef49&newsletterV3=4bafedc914d0&newsletterV3Id=43d4e9098252&user=Kirsten+Perry&userId=4bafedc914d0&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}