{"url": "https://towardsdatascience.com/customer-segmentation-k-means-clustering-a-b-testing-bd26a94462dd", "time": 1683012522.882045, "path": "towardsdatascience.com/customer-segmentation-k-means-clustering-a-b-testing-bd26a94462dd/", "webpage": {"metadata": {"title": "Customer Segmentation: K-Means Clustering & A/B Testing | by Andrew Nguyen | Towards Data Science", "h1": "Customer Segmentation: K-Means Clustering & A/B Testing", "description": "I have been working in Advertising, specifically Digital Media and Performance, for nearly 3 years and customer behaviour analysis is one of the core concentrations in my day-to-day job. With the\u2026"}, "outgoing_paragraph_urls": [{"url": "https://www.kaggle.com/c/ga-customer-revenue-prediction/data", "anchor_text": "here", "paragraph_index": 2}, {"url": "https://medium.com/analytics-vidhya/exchange-rate-prediction-part-1-276b6cd5338", "anchor_text": "here", "paragraph_index": 31}], "all_paragraphs": ["I have been working in Advertising, specifically Digital Media and Performance, for nearly 3 years and customer behaviour analysis is one of the core concentrations in my day-to-day job. With the help of different analytics platforms (e.g. Google Analytics, Adobe Analytics), my life has been made easier than before since these platforms come with the built-in function of segmentation that analyses user behaviours across dimensions and metrics.", "However, despite the convenience provided, I was hoping to leverage Machine Learning to do customer segmentation that can be scalable and applicable to other optimizations in Data Science (e.g. A/B Testing). Then, I came across the dataset provided by Google Analytics for a Kaggle competition and decided to use it for this project.", "Feel free to check out the dataset here if you\u2019re keen! Beware that the dataset has several sub-datasets and each has more than 900k rows!", "This always remain an essential step in every Data Science project to ensure the dataset is clean and properly pre-processed to be used for modelling.", "First of all, let\u2019s import all the necessary libraries and read the csv file:", "As you can see, the raw dataset above is a bit \u201cmessy\u201d and not digestible at all since some variables are formatted as JSON fields which compress different values of different sub-variables into one field. For example, for geoNetwork variable, we can tell that there are several sub-variables such as continent, subContinent, etc. that are grouped together.", "Thanks to the help of a Kaggler, I was able to convert these variables to a more digestible ones by flattening those JSON fields:", "After flattening those JSON fields, we are able to see a much cleaner dataset, especially those JSON variables split into sub-variables (e.g. device split into device_browser, device_browserVersion, etc.).", "For this project, I have chosen the variables that I believe have better impact or correlation to the user behaviours:", "Moving on, as the new dataset has fewer variables which, however, vary in terms of data type, I took some time to analyze each and every variable to ensure the data is \u201cclean enough\u201d prior to modelling. Below are some quick examples of un-clean data to be cleaned:", "After re-formatting, I found that fullVisitorID\u2019s unique values are fewer than the total rows of the dataset, meaning there are multiple fullVisitorIDs that were recorded. Hence, I proceeded to group the variables by fullVisitorID and sort by Revenue:", "The last step of any EDA process that cannot be overlooked is detecting and handling outliers of the dataset. The reason being is that outliers, especially those marginally extreme ones, impact the performance of a machine learning model, mostly negatively. That said, we need to either remove those outliers from the dataset or convert them (by mean or mode) to fit them to the range that the majority of the data points lie in:", "As you can see, most of the data points in Revenue lie below USD200,000 and there\u2019s only one extreme outlier that hits nearly USD600,000. If we don\u2019t remove this outlier, the model also takes it into consideration that produces a less objective reflection.", "So let\u2019s go ahead and remove it, and please do so for other variables. Just a quick note, there are several methods of dealing with outliers (such as inter-quantiles). However, in my case, there\u2019s only one so I just went ahead defining the range that I believe fits well:", "What is K-Means Clustering and how does it help with customer segmentation?", "Clustering is the most well-known unsupervised learning technique that finds structure in unlabeled data by identifying similar groups/clusters, particularly with the helps of K-Means.", "K-Means tries to address two questions: (1) K: the number of clusters (groups) we expect to find in the dataset and (2) Means: the average distance of data to each cluster center (centroid) which we try to minimize.", "Also, one thing of note is that K-Means comes with several variations, typically :", "In this project, I\u2019ll use the second option to ensure that each cluster is well-distinguished from one another:", "Before applying the algorithm, we need to define \u201cn_clusters\u201d which is the number of groups we expect to get out of the modelling. In this case, I randomly put n_clusters = 3. Then, I went ahead visualizing how the dataset is grouped using 2 variables: Revenue and PageViews:", "As you can see, the x-axis stands for the number of Revenue while y-axis for PageViews . After modelling, we can tell a certain degree of difference in 3 clusters. However, I was not sure whether 3 is the \u201cright\u201d number of clusters or not. That said, we can rely on the estimator of K-Means algorithm, inertia_, which is the distance from each sample to the centroid. In particular, we will compare the inertia of each cluster ranging from 1 to 10, in my case, and see which is the lowest and how far we should go:", "From the chart above, inertia started to fall slowly since the 4th or 5th cluster, meaning that that\u2019s the lowest inertia we can get, so I decided to go with \u201cn_clusters=4\u201d:", "The clusters now look a lot more distinguishable from one another:", "Except for cluster 0 and 4 (unclear pattern), which are beyond our control, cluster 1 and 2 can tell a story here as they seem to share some similarities.", "To understand which factor that might impact each cluster, I segmented each cluster by Channels, Device and Operating System:", "As seen from above, in Cluster 1, Referral channel contributed the highest Revenue, followed by Direct and Organic Search. In contrast, it\u2019s Direct that made the highest contribution in Cluster 2. Similarly, while Macintosh is the most dominating device in Cluster 1, it\u2019s Windows in Cluster 2 that achieved higher revenue. The only similarity between 2 clusters is the Device Browser, which Chrome is widely used.", "Voila! This further segmentation helps us tell which factor (in this case, Channel, Device Browser, Operating System) works better for each cluster, hence we can better evaluate our investment moving forward!", "What is A/B Testing and how can Hypothesis Testing come into place to complement the process?", "A/B Testing is no stranger to those who work in Advertising and Media, since it\u2019s one of the powerful techniques that help improve the performance with more cost efficiency. Particularly, A/B Testing divides the audience into 2 groups: Test vs Control. Then, we expose the ads/show a different design to the Test group only to see if there\u2019s any significant discrepancy between 2 groups: exposed vs un-exposed.", "In Advertising, there are a number of different automatic tools in the market that can easily help do A/B Testing at one click. However, I still wanted to try a different method in Data Science that can do the same: Hypothesis Testing. The methodology is pretty much the same, as Hypothesis Testing compares the Null Hypothesis (H0) and Alternate Hypothesis (H1) and see if there\u2019s any significant discrepancy between the two!", "Assume that I run a promotion campaign that exposes an ad to the Test group. Here\u2019s a quick summary of steps that need to be followed to test the result with Hypothesis Testing:", "For the 1st step, we can rely on Power Analysis which helps determine the sample size to draw from a population. Power Analysis requires 3 parameters: (1) effect size, (2) power and (3) alpha. If you are looking for details on how Power Analysis, please refer to an in-depth article here that I wrote some time ago.", "Below is a quick note to each parameter for your quick understanding:", "After having 3 parameters ready, we use TTestPower() to determine the sample size:", "The result is 279, meaning we need to draw 279 data points from each group: Test and Control. As I don\u2019t have real data, I used np.random.normal to generate a list of revenue data, in this case sample size = 279 for each group:", "Moving to the 2nd step, we need to ensure the samples are (1) normally distributed and (2) independent (not correlated). Again, if you want a refresh on the tests used in this step, refer to my article as above. In short, we are going to use (1) Shapiro as the normality test and (2) Pearson as the correlation test.", "The p-value of Shapiro is 0.129 and 0.539 for Control and Test group respectively, which is > 0.05. Hence, we don\u2019t reject the null hypothesis and are able to say that 2 groups are normally distributed.", "The p-value of Pearson is 0.98, which is >0.05, meaning that 2 groups are independent from each other.", "Final step is here! As there are 2 variables to be tested against each other (Test vs Control group), we use T-Test to see if there\u2019s any significant discrepancy in Revenue after running A/B Testing:", "The result is 0.35, which is > 0.05. Hence, the A/B Test conducted indicates that the Test Group exposed to the ads doesn\u2019t show any superiority over the Control Group with no ad exposure.", "Voila! That\u2019s the end of this project \u2014 Customer Segmentation & A/B Testing! I hope you find this article useful and easy to follow.", "Do look out for my upcoming projects in Data Science and Machine Learning in the near future! In the meantime feel free to check out my Github here for the complete repository:", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "A data analyst, without a higher degree, aspires to master data science skillsets by on-the-side projects."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fbd26a94462dd&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcustomer-segmentation-k-means-clustering-a-b-testing-bd26a94462dd&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcustomer-segmentation-k-means-clustering-a-b-testing-bd26a94462dd&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcustomer-segmentation-k-means-clustering-a-b-testing-bd26a94462dd&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcustomer-segmentation-k-means-clustering-a-b-testing-bd26a94462dd&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----bd26a94462dd--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----bd26a94462dd--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@andrewnguyen07?source=post_page-----bd26a94462dd--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@andrewnguyen07?source=post_page-----bd26a94462dd--------------------------------", "anchor_text": "Andrew Nguyen"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fb7da2b6ca9c2&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcustomer-segmentation-k-means-clustering-a-b-testing-bd26a94462dd&user=Andrew+Nguyen&userId=b7da2b6ca9c2&source=post_page-b7da2b6ca9c2----bd26a94462dd---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fbd26a94462dd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcustomer-segmentation-k-means-clustering-a-b-testing-bd26a94462dd&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fbd26a94462dd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcustomer-segmentation-k-means-clustering-a-b-testing-bd26a94462dd&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@nicotitto?utm_source=medium&utm_medium=referral", "anchor_text": "nrd"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://www.kaggle.com/c/ga-customer-revenue-prediction/data", "anchor_text": "here"}, {"url": "https://productcoalition.com/are-you-segmenting-your-a-b-test-results-c5512c6def65?gi=7b445e5ef457", "anchor_text": "https://productcoalition.com/are-you-segmenting-your-a-b-test-results-c5512c6def65?gi=7b445e5ef457"}, {"url": "https://medium.com/analytics-vidhya/exchange-rate-prediction-part-1-276b6cd5338", "anchor_text": "here"}, {"url": "https://github.com/andrewnguyen07", "anchor_text": "https://github.com/andrewnguyen07"}, {"url": "http://www.linkedin.com/in/andrewnguyen07", "anchor_text": "www.linkedin.com/in/andrewnguyen07"}, {"url": "https://medium.com/tag/data-science?source=post_page-----bd26a94462dd---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----bd26a94462dd---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/tag/k-means?source=post_page-----bd26a94462dd---------------k_means-----------------", "anchor_text": "K Means"}, {"url": "https://medium.com/tag/clustering?source=post_page-----bd26a94462dd---------------clustering-----------------", "anchor_text": "Clustering"}, {"url": "https://medium.com/tag/segmentation?source=post_page-----bd26a94462dd---------------segmentation-----------------", "anchor_text": "Segmentation"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fbd26a94462dd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcustomer-segmentation-k-means-clustering-a-b-testing-bd26a94462dd&user=Andrew+Nguyen&userId=b7da2b6ca9c2&source=-----bd26a94462dd---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fbd26a94462dd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcustomer-segmentation-k-means-clustering-a-b-testing-bd26a94462dd&user=Andrew+Nguyen&userId=b7da2b6ca9c2&source=-----bd26a94462dd---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fbd26a94462dd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcustomer-segmentation-k-means-clustering-a-b-testing-bd26a94462dd&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----bd26a94462dd--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fbd26a94462dd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcustomer-segmentation-k-means-clustering-a-b-testing-bd26a94462dd&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----bd26a94462dd---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----bd26a94462dd--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----bd26a94462dd--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----bd26a94462dd--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----bd26a94462dd--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----bd26a94462dd--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----bd26a94462dd--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----bd26a94462dd--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----bd26a94462dd--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@andrewnguyen07?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@andrewnguyen07?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Andrew Nguyen"}, {"url": "https://medium.com/@andrewnguyen07/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "112 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fb7da2b6ca9c2&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcustomer-segmentation-k-means-clustering-a-b-testing-bd26a94462dd&user=Andrew+Nguyen&userId=b7da2b6ca9c2&source=post_page-b7da2b6ca9c2--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F8c293f8ae6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcustomer-segmentation-k-means-clustering-a-b-testing-bd26a94462dd&newsletterV3=b7da2b6ca9c2&newsletterV3Id=8c293f8ae6&user=Andrew+Nguyen&userId=b7da2b6ca9c2&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}