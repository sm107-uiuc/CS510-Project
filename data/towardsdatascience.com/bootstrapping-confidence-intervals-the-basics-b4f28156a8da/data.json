{"url": "https://towardsdatascience.com/bootstrapping-confidence-intervals-the-basics-b4f28156a8da", "time": 1683007546.455691, "path": "towardsdatascience.com/bootstrapping-confidence-intervals-the-basics-b4f28156a8da/", "webpage": {"metadata": {"title": "Bootstrapping Confidence Intervals: the basics | by Elizaveta Lebedeva | Towards Data Science", "h1": "Bootstrapping Confidence Intervals: the basics", "description": "If you are a data scientist, data analyst, or product manager in a data-driven company, you experiment with your product a lot, and usually, you do lots of AB tests. Let\u2019s assume you have an AB test\u2026"}, "outgoing_paragraph_urls": [{"url": "https://projecteuclid.org/euclid.aos/1176344552#info", "anchor_text": "Bradley Efron", "paragraph_index": 1}, {"url": "https://link.springer.com/book/10.1007/978-0-387-21736-9", "anchor_text": "Wasserman\u2019s \u201cAll of Statistics\u201d book", "paragraph_index": 9}, {"url": "http://www-math.mit.edu/~dav/05.dir/class24-prep-a.pdf", "anchor_text": "this source", "paragraph_index": 12}, {"url": "https://en.wikipedia.org/wiki/Standard_error_of_the_mean", "anchor_text": "standard error of the bootstrap mean", "paragraph_index": 14}, {"url": "https://github.com/LizaLebedeva/bootstrap-experiments", "anchor_text": "here", "paragraph_index": 22}, {"url": "https://en.wikipedia.org/wiki/Bootstrapping_(statistics)", "anchor_text": "Poisson, Gaussian, Block, etc", "paragraph_index": 27}], "all_paragraphs": ["If you are a data scientist, data analyst, or product manager in a data-driven company, you experiment with your product a lot, and usually, you do lots of AB tests. Let\u2019s assume you have an AB test with control and treatment groups. When analysing results, you compare the average number of orders/visits/views (or any other metric) in test groups. Obviously, you can calculate the mean of a metric, you can even say using t-test and p-value if there is a statistically significant difference between two means. But usually, they say don\u2019t look only at p-values, look at confidence intervals. In this blog post, we discover how to calculate confidence intervals using bootstrapping. Bootstrapping is a cool method to estimate confidence intervals because it does not rely on any assumption of data distribution (compared to popular Welch t-test, for example) and it is quite easy to implement by yourself (I share a link to my implementation below).", "The bootstrap is a method for estimating standard errors and computing confidence intervals. Bootstrapping started in 1970th by Bradley Efron; it has already existed for more than 40 years, so many different types and methods of bootstrapping were developed since then.", "But despite many variations, all bootstrap steps look as follows:", "Then the bootstrap principle says that:", "As mentioned, bootstrap can be applied for different goals:", "Each topic deserves a separate post and today we concentrate only on bootstrapping confidence intervals.", "When I researched the topic, I haven\u2019t found a single source with all bootstraps methods at once, every reference has its own types. Most common ones are presented below:", "In a nutshell, this method approximates the difference between bootstrapped means and sample mean.", "Let\u2019s consider an example (it will continue for other methods as well): estimate the mean \u03bc of the underlying distribution and give an 80% bootstrap confidence interval.", "Wasserman\u2019s \u201cAll of Statistics\u201d book provides with the following math notation for empirical bootstrap:", "where x is mean of original data and x* is bootstrap means.", "Instead of computing the differences \u03b4*, the bootstrap percentile method uses the distribu\u00adtion of the bootstrap sample statistic as a direct approximation of the data sample statistic.", "The bootstrap percentile method is quite simple, but it depends on the bootstrap distribution of based on a particular sample being a good approximation to the true distribution of x (because of that reason, this source advises not to use percentile bootstrap).", "Instead of taking percentiles of bootstrapped means, normal bootstrap method calculates confidence intervals for these bootstrapped means.", "where x* is the sample mean from bootstrap means, se is the standard error of the bootstrap means, z* is critical value (found from the distribution table of normal CDF).", "When I compared this method to others, its CI were always very narrow compared to other methods which puzzled me a lot. As I understood, it is because the definition strongly relies on assumption about normal distribution of data.", "Some time later, I stumbled upon slightly different wording of this method in Wasserman\u2019s \u201cAll of Statistics\u201d. Calculation differs by just one parameter, but it gives a huge difference.", "Normal interval bootstrap repeats all steps of normal bootstrap, but use the following formula for CI:", "where se_boot is the bootstrap estimate of the standard error.", "This interval is not accurate unless the distribution of x* is close to Normal.", "Basically, here formula has no division by squared root of n. I haven\u2019t found explanation why it is done in that way. If you have any ideas, please, share them in comments.", "Parametric bootstrap is very close to empirical approach, the only difference is in the source of the bootstrap sample. For the parametric bootstrap, we generate the bootstrap sample from a parametrized distribu\u00adtion. It is often used for the efficient computation of Bayes posterior distributions, not for experimentation analysis, so I will not go into its details here.", "As promised earlier, here you can find Python implementation of all methods. The goal was to estimate 95% bootstrap confidence interval for the mean of target metric. I played with bootstrap methods, number of bootstrap samples and sample size of data itself.", "The main question I had: which bootstrap method would show more reliable results. First of all, normal bootstrap clearly produces too narrow CI (because of normality assumptions). Other 3 methods are usually close to each other given large enough sample. The advantage of percentile and empirical types is that they provide different intervals from left and right sides (in contrast to normal interval bootstrap). Usually, it is better because it accounts for distribution of data. As you can see on plot below, intervals for percentile and empirical bootstraps are greeter from the left side \u2014 on the side where population mean lies.", "Choosing between percentile and empirical methods, I am more inclined towards the percentile approach because of its simplicity. Its results are very close to the empirical method, and at the same time requires one step less in calculations.", "Another important question: how many bootstrap samplings to do. It depends on data size. If there are less than 1000 data points, it is reasonable to take bootstrap number no more than twice less data size (if there are 400 samples, use no more than 200 bootstraps \u2014 further increase doesn\u2019t provide any improvements). If you have more data, the number of bootstraps between 100 and 500 is sufficient (a higher number usually will not increase the accuracy of CI).", "One critical remark one should remember using bootstrapping is that it can\u2019t improve point estimate, meaning the quality of bootstrapping depends on the quality of the collected data. If sample data is biased and doesn\u2019t represent population data well, the same will occur with bootstrap estimates. So, always keep in mind that data collected during experimentation should be a good approximation of the whole population data.", "In this blog post, I described and compared basic bootstrap methods. Actually, there exist many more methods (like Poisson, Gaussian, Block, etc). Also, bootstrap is not only about confidence intervals, it is used for estimation of the standard error of the median, 75% percentiles, hypothesis testing, etc. All of them are good topics for the next blog posts \ud83d\ude42", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Data Scientist with strong background in mathematics, quantitative methods and economics doing yoga every morning"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fb4f28156a8da&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbootstrapping-confidence-intervals-the-basics-b4f28156a8da&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbootstrapping-confidence-intervals-the-basics-b4f28156a8da&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbootstrapping-confidence-intervals-the-basics-b4f28156a8da&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbootstrapping-confidence-intervals-the-basics-b4f28156a8da&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----b4f28156a8da--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----b4f28156a8da--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://elizavetalebedeva.medium.com/?source=post_page-----b4f28156a8da--------------------------------", "anchor_text": ""}, {"url": "https://elizavetalebedeva.medium.com/?source=post_page-----b4f28156a8da--------------------------------", "anchor_text": "Elizaveta Lebedeva"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F5fd9bb990e07&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbootstrapping-confidence-intervals-the-basics-b4f28156a8da&user=Elizaveta+Lebedeva&userId=5fd9bb990e07&source=post_page-5fd9bb990e07----b4f28156a8da---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fb4f28156a8da&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbootstrapping-confidence-intervals-the-basics-b4f28156a8da&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fb4f28156a8da&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbootstrapping-confidence-intervals-the-basics-b4f28156a8da&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://projecteuclid.org/euclid.aos/1176344552#info", "anchor_text": "Bradley Efron"}, {"url": "https://link.springer.com/book/10.1007/978-0-387-21736-9", "anchor_text": "Wasserman\u2019s \u201cAll of Statistics\u201d book"}, {"url": "http://www-math.mit.edu/~dav/05.dir/class24-prep-a.pdf", "anchor_text": "this source"}, {"url": "https://en.wikipedia.org/wiki/Standard_error_of_the_mean", "anchor_text": "standard error of the bootstrap mean"}, {"url": "https://github.com/LizaLebedeva/bootstrap-experiments", "anchor_text": "here"}, {"url": "https://en.wikipedia.org/wiki/Bootstrapping_(statistics)", "anchor_text": "Poisson, Gaussian, Block, etc"}, {"url": "https://projecteuclid.org/euclid.aos/1176344552#info", "anchor_text": "https://projecteuclid.org/euclid.aos/1176344552#info"}, {"url": "http://www-math.mit.edu/~dav/05.dir/class24-prep-a.pdf", "anchor_text": "http://www-math.mit.edu/~dav/05.dir/class24-prep-a.pdf"}, {"url": "https://en.wikipedia.org/wiki/Bootstrapping_(statistics)", "anchor_text": "https://en.wikipedia.org/wiki/Bootstrapping_(statistics)"}, {"url": "https://elizavetalebedeva.com/bootstrapping-confidence-intervals-the-basics/", "anchor_text": "https://elizavetalebedeva.com"}, {"url": "https://medium.com/tag/data-science?source=post_page-----b4f28156a8da---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/ab-testing?source=post_page-----b4f28156a8da---------------ab_testing-----------------", "anchor_text": "Ab Testing"}, {"url": "https://medium.com/tag/bootstrapping?source=post_page-----b4f28156a8da---------------bootstrapping-----------------", "anchor_text": "Bootstrapping"}, {"url": "https://medium.com/tag/statistics?source=post_page-----b4f28156a8da---------------statistics-----------------", "anchor_text": "Statistics"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fb4f28156a8da&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbootstrapping-confidence-intervals-the-basics-b4f28156a8da&user=Elizaveta+Lebedeva&userId=5fd9bb990e07&source=-----b4f28156a8da---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fb4f28156a8da&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbootstrapping-confidence-intervals-the-basics-b4f28156a8da&user=Elizaveta+Lebedeva&userId=5fd9bb990e07&source=-----b4f28156a8da---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fb4f28156a8da&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbootstrapping-confidence-intervals-the-basics-b4f28156a8da&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----b4f28156a8da--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fb4f28156a8da&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbootstrapping-confidence-intervals-the-basics-b4f28156a8da&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----b4f28156a8da---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----b4f28156a8da--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----b4f28156a8da--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----b4f28156a8da--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----b4f28156a8da--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----b4f28156a8da--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----b4f28156a8da--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----b4f28156a8da--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----b4f28156a8da--------------------------------", "anchor_text": ""}, {"url": "https://elizavetalebedeva.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://elizavetalebedeva.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Elizaveta Lebedeva"}, {"url": "https://elizavetalebedeva.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "139 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F5fd9bb990e07&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbootstrapping-confidence-intervals-the-basics-b4f28156a8da&user=Elizaveta+Lebedeva&userId=5fd9bb990e07&source=post_page-5fd9bb990e07--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F67ab67320cdd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbootstrapping-confidence-intervals-the-basics-b4f28156a8da&newsletterV3=5fd9bb990e07&newsletterV3Id=67ab67320cdd&user=Elizaveta+Lebedeva&userId=5fd9bb990e07&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}