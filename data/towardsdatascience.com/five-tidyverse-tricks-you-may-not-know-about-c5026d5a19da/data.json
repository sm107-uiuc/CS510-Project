{"url": "https://towardsdatascience.com/five-tidyverse-tricks-you-may-not-know-about-c5026d5a19da", "time": 1683011017.118015, "path": "towardsdatascience.com/five-tidyverse-tricks-you-may-not-know-about-c5026d5a19da/", "webpage": {"metadata": {"title": "Five Tidyverse Tricks You May Not Know About | by Keith McNulty | Towards Data Science", "h1": "Five Tidyverse Tricks You May Not Know About", "description": "It struck me recently through collaborating with a number of other users of the tidyverse that there are many people who are not aware of all the things that this collection of packages offers them\u2026"}, "outgoing_paragraph_urls": [{"url": "https://www.linkedin.com/in/keith-mcnulty/", "anchor_text": "LinkedIn", "paragraph_index": 18}, {"url": "https://twitter.com/dr_keithmcnulty", "anchor_text": "Twitter", "paragraph_index": 18}, {"url": "http://drkeithmcnulty.com/", "anchor_text": "drkeithmcnulty.com", "paragraph_index": 18}, {"url": "http://keithmcnulty.org", "anchor_text": "keithmcnulty.org", "paragraph_index": 20}], "all_paragraphs": ["It struck me recently through collaborating with a number of other users of the tidyverse that there are many people who are not aware of all the things that this collection of packages offers them to help with their day to day data wrangling. In particular, two critical packages have had major updates in the past year, and have introduced new features which I regard as transformative \u2014 allowing users to step up a gear in the control of their data and in the efficiency of their code.", "In late 2019, tidyr 1.0.0 was released. Of many updates, the key ones were the introduction of the functions pivot_longer() and pivot_wider() to better manage and control transformations of dataframes from wide to long form - one of the most common data-wrangling tasks. Replacing gather() and spread(), these new functions introduced more capability to manage the specifics of the transformation, cutting time for users in terms of how they tailor their outputs.", "In early 2020, dplyr 1.0.0 was released. There was a vast scope to the new functionality that came into play with this release, but in particular the introduction of across() and c_across() as adverbs to be used with summarise() and mutate() simplified the number of scoped variants that users needed to work with and, like the tidyr changes, allowed greater control of what the output looked like.", "Both of these updates took advantage of major new innovations in the R ecosystem, including updates in rlang, vctrs and glue among others.", "So if you haven\u2019t checked out these updates, it\u2019s a good time to check back in with the tidyverse packages. In this article I want to show you how they can make your life significantly easier and how you can use them to wrangle data with less code. I\u2019ll do this by showing five simple examples of things you can do which you may not know about.", "The whole idea of pivot_wider() is that you want to take data that is in long form and transform it to wide form. For example, let's say your data looks like this:", "Now let\u2019s say that you are interested in seeing the mean and median pressure by year for each storm status. You can use pivot_wider() which cleverly knows what you are trying to do and pastes column names together by default:", "You also have the benefit of the names_glue argument, which allows you to structure the combined column names as you wish using glue syntax which is simple and intuitive:", "If you have wide data representing multiple dimensions, you can transform it to long data and break out an arbitrary number of dimensions from the column names using regex in the names_pattern argument of pivot_longer(). So for example to move out previous table back to long form we would do this:", "across() is a new adverb in dplyr that allows you to flexibly work with an arbitrary number of columns and better control your output. Previously if you wanted to do numerous operations on numerous columns, you would need to use scoped variants of summarise() and mutate() to achieve this, and the default output was not easy to control. For example:", "Now the adverb across() can be used for all cases to achieve the same goal, so you no longer need to use the _if, _at and _all variants. It acts as a selecting function to be used inside summarise() or mutate(), and provides an easy use of the .names argument to control the columns names of the output using glue syntax:", "It\u2019s very common to need to perform operations on subsets of a dataframe, and this requires you to nest the data according to certain variables. Previously this was only possible by combining functions like tidyr::nest(), dplyr::group_by() and dplyr::rowwise(), but the new dplyr::nest_by() function now takes care of all that and cuts down the amount of code you need to type.", "Let\u2019s say you want to run a linear model over mtcars, but you want to do it separately for different cylinder models. This is a perfect job for nest_by(). When you use nest_by(), a 'list column' of nested dataframes is generated in a column called data, like this:", "You can then refer to this column in further commands, allowing you to do quite sophisticated things like run models, or execute your own functions:", "Now to make our output more pretty and user friendly we can use some of the tricks we learned earlier:", "The beauty of list columns is that you can store many different things in them, not just values. This now allows you to use our old friends summarise() and mutate() to generate columns containing not just values, but dataframes, models and even plots.", "In this example I create some simple functions to generate scatter and box plots using ggplot2. I then nest my data and mutate new columns that generate these plots.", "As you can see, all the plots are now stored inside the two list columns we have created. We can now easily pull them out and use them at our convenience. For example, using patchwork:", "Originally I was a Pure Mathematician, then I became a Psychometrician and a Data Scientist. I am passionate about applying the rigor of all those disciplines to complex people questions. I\u2019m also a coding geek and a massive fan of Japanese RPGs. Find me on LinkedIn or on Twitter. Also check out my blog on drkeithmcnulty.com.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Expert and Author in Applied Mathematics, Data Science, Statistics. Also writes History, Science, Culture. Find me on Twitter or keithmcnulty.org"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fc5026d5a19da&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffive-tidyverse-tricks-you-may-not-know-about-c5026d5a19da&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffive-tidyverse-tricks-you-may-not-know-about-c5026d5a19da&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffive-tidyverse-tricks-you-may-not-know-about-c5026d5a19da&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffive-tidyverse-tricks-you-may-not-know-about-c5026d5a19da&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----c5026d5a19da--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----c5026d5a19da--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://keith-mcnulty.medium.com/?source=post_page-----c5026d5a19da--------------------------------", "anchor_text": ""}, {"url": "https://keith-mcnulty.medium.com/?source=post_page-----c5026d5a19da--------------------------------", "anchor_text": "Keith McNulty"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fa859aab532a0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffive-tidyverse-tricks-you-may-not-know-about-c5026d5a19da&user=Keith+McNulty&userId=a859aab532a0&source=post_page-a859aab532a0----c5026d5a19da---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fc5026d5a19da&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffive-tidyverse-tricks-you-may-not-know-about-c5026d5a19da&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fc5026d5a19da&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffive-tidyverse-tricks-you-may-not-know-about-c5026d5a19da&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://www.linkedin.com/in/keith-mcnulty/", "anchor_text": "LinkedIn"}, {"url": "https://twitter.com/dr_keithmcnulty", "anchor_text": "Twitter"}, {"url": "http://drkeithmcnulty.com/", "anchor_text": "drkeithmcnulty.com"}, {"url": "https://medium.com/tag/data-science?source=post_page-----c5026d5a19da---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/programming?source=post_page-----c5026d5a19da---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/tag/analytics?source=post_page-----c5026d5a19da---------------analytics-----------------", "anchor_text": "Analytics"}, {"url": "https://medium.com/tag/data?source=post_page-----c5026d5a19da---------------data-----------------", "anchor_text": "Data"}, {"url": "https://medium.com/tag/learning?source=post_page-----c5026d5a19da---------------learning-----------------", "anchor_text": "Learning"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fc5026d5a19da&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffive-tidyverse-tricks-you-may-not-know-about-c5026d5a19da&user=Keith+McNulty&userId=a859aab532a0&source=-----c5026d5a19da---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fc5026d5a19da&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffive-tidyverse-tricks-you-may-not-know-about-c5026d5a19da&user=Keith+McNulty&userId=a859aab532a0&source=-----c5026d5a19da---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fc5026d5a19da&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffive-tidyverse-tricks-you-may-not-know-about-c5026d5a19da&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----c5026d5a19da--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fc5026d5a19da&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffive-tidyverse-tricks-you-may-not-know-about-c5026d5a19da&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----c5026d5a19da---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----c5026d5a19da--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----c5026d5a19da--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----c5026d5a19da--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----c5026d5a19da--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----c5026d5a19da--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----c5026d5a19da--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----c5026d5a19da--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----c5026d5a19da--------------------------------", "anchor_text": ""}, {"url": "https://keith-mcnulty.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://keith-mcnulty.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Keith McNulty"}, {"url": "https://keith-mcnulty.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "11K Followers"}, {"url": "http://keithmcnulty.org", "anchor_text": "keithmcnulty.org"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fa859aab532a0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffive-tidyverse-tricks-you-may-not-know-about-c5026d5a19da&user=Keith+McNulty&userId=a859aab532a0&source=post_page-a859aab532a0--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F7991b3dbcee9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ffive-tidyverse-tricks-you-may-not-know-about-c5026d5a19da&newsletterV3=a859aab532a0&newsletterV3Id=7991b3dbcee9&user=Keith+McNulty&userId=a859aab532a0&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://peopleanalytics-regression-book.org/", "anchor_text": "Handbook of Regression Modeling in People Analytics2021"}, {"url": "https://ona-book.org", "anchor_text": "Handbook of Graphs and Networks in People Analytics2022"}, {"url": "https://medium.com/@keith-mcnulty/books?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "See all (2)"}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}