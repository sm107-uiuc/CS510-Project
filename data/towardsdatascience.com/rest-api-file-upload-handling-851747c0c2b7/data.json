{"url": "https://towardsdatascience.com/rest-api-file-upload-handling-851747c0c2b7", "time": 1683016982.2443461, "path": "towardsdatascience.com/rest-api-file-upload-handling-851747c0c2b7/", "webpage": {"metadata": {"title": "REST API: File Upload Handling. Parse a raw file or a file in HTML\u2026 | by Girija Shankar Behera | Towards Data Science", "h1": "REST API: File Upload Handling", "description": "In this article we will explore how to handle file uploads in REST API frameworks. Earlier I have published a few articles related to REST APIs where we have covered all the Basics, and the\u2026"}, "outgoing_paragraph_urls": [{"url": "https://towardsdatascience.com/tagged/programming-rest-apis", "anchor_text": "REST APIs", "paragraph_index": 0}, {"url": "https://towardsdatascience.com/rest-api-the-basics-d91859537c9d", "anchor_text": "Basics", "paragraph_index": 0}, {"url": "https://towardsdatascience.com/rest-api-the-architectural-constraints-fc4876b41e3d", "anchor_text": "Constraints", "paragraph_index": 0}, {"url": "https://towardsdatascience.com/rest-api-building-a-book-catalogue-api-part-i-cf8599d63ca4", "anchor_text": "Part 1", "paragraph_index": 0}, {"url": "https://towardsdatascience.com/rest-api-building-a-book-catalogue-api-part-ii-c4ef2dca7090", "anchor_text": "Part 2", "paragraph_index": 0}, {"url": "https://towardsdatascience.com/rest-api-building-a-book-catalogue-api-part-iii-287578b84229", "anchor_text": "Part 3", "paragraph_index": 0}], "all_paragraphs": ["In this article we will explore how to handle file uploads in REST API frameworks. Earlier I have published a few articles related to REST APIs where we have covered all the Basics, and the Constraints to make an API Restful, and then a couple of hands-on (Part 1, Part 2 and Part 3).", "This time, we are going to see something different. This does not really impact on the RestFul-ness of the API, but a useful feature to have while building an API system. i.e. handling of file uploads via an API request. This article is going to be short as there\u2019s not much to explore in it. I\u2019ve used Django REST Framework to develop the APIs and Postman to test them.", "Okay this is what the API looks like. Simple one, only a post method which accepts a request and returns the data in the request itself.", "Hitting the above API, if we send raw data in JSON format (with Content-Type header set to application/json), the output contains exactly the same data that we are sending in the request. But when we hit the API with a file in the request (with Content-Type header set to image/jpeg), the response is \u2018Unsupported Media type \u2018image/jpeg\u2019 in request\u2019. So basically, API was able to understand the JSON data in the request, but not a file type of data.", "An API by Django REST Framework has a default set of parsers that it uses to detect the type of the data in the request. The list of parsers in are JSONParser, FormParser, MultiPartParser, and FileUploadParser. JSONParser parses the JSON data in a request, FormParser parses the HTML form data in a request, MultiPartParser parses the HTML form data with file in a request, and FileUploadParser parses the file data in raw format. In this article, we are going to explore the MultiPartParser and the FileUploadParser.", "Well, let\u2019s take a look at the default list of parsers that the API is using to understand the request type.", "The default parsers here in our API are JSONParser, FormParser and MultiPartParser. API determines the parser to use by looking into the Content-Type field in the header of the request. i.e. The API looked into the Content-Type for the first request, which was application/json and hence selected the JSONParser, whereas for the second request with Content-Type image/jpeg, the API had no parser in the default list available. That\u2019s why it threw the message saying \u2018Unsupported media type\u2019.", "Well, there was a MultiPartParser available, but it did not solve our purpose. Let\u2019s see why.", "This parser is used to handle file uploads in a HTML form. This is different from our case above, as in our case the request had a raw file, not a HTML form.", "The API above is debugged at runtime to see how MultiPartParser works. This parser is enabled by default, so if we hit the API with a file in a form-data, then the backend will be able to understand the content type in the request. Hence, request.data produces the querydict with filename and its format in the output.", "Well, if we are uploading a file from the web, then this is the way to go. But what I was looking for was uploading a Raw file.", "For a raw file, we need to use FileUploadParser in our API. And as it\u2019s not there in the default set of parsers, and we need to tell our API manually to use this.", "In the code snippet, we see that the default parser is changed to a list containing only FileUploadParser now. And there was no error as well, as the API was able to understand the data in the request. Still I had to do one more update here in the client side, i.e. there is no way the API is going to get the name of the file, so it won\u2019t be able to access the file, unless we have a way of providing the name externally. So we add another header for the file name like this: \u2018Content-Disposition: attachment; filename=healthy_leaves_1.png\u2019.", "This made sure that the API gets to know the name of the file, and gets access to it from the request.", "Well, this only ensures that the API knows that the request has a file type of data in it. Backend still needs to handle the specific file uploads depending on their types. Like in the request above, we are sending an image file. To read this, we still need to use the Image libraries available in Python.", "Well, that\u2019s it for this article. This was again a part of the REST API series that I have published earlier. We explored two different ways to handle file uploads in a REST API, MultiPartParser, which can be used to handle a file upload from the web, and FileUploadParser, which can be used to handle raw file uploads.", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F851747c0c2b7&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Frest-api-file-upload-handling-851747c0c2b7&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Frest-api-file-upload-handling-851747c0c2b7&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Frest-api-file-upload-handling-851747c0c2b7&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Frest-api-file-upload-handling-851747c0c2b7&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----851747c0c2b7--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----851747c0c2b7--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://gshbehera.medium.com/?source=post_page-----851747c0c2b7--------------------------------", "anchor_text": ""}, {"url": "https://gshbehera.medium.com/?source=post_page-----851747c0c2b7--------------------------------", "anchor_text": "Girija Shankar Behera"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F15521c3a84a9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Frest-api-file-upload-handling-851747c0c2b7&user=Girija+Shankar+Behera&userId=15521c3a84a9&source=post_page-15521c3a84a9----851747c0c2b7---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F851747c0c2b7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Frest-api-file-upload-handling-851747c0c2b7&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F851747c0c2b7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Frest-api-file-upload-handling-851747c0c2b7&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://towardsdatascience.com/tagged/programming-rest-apis", "anchor_text": "PROGRAMMING REST APIS"}, {"url": "https://towardsdatascience.com/tagged/programming-rest-apis", "anchor_text": "REST APIs"}, {"url": "https://towardsdatascience.com/rest-api-the-basics-d91859537c9d", "anchor_text": "Basics"}, {"url": "https://towardsdatascience.com/rest-api-the-architectural-constraints-fc4876b41e3d", "anchor_text": "Constraints"}, {"url": "https://towardsdatascience.com/rest-api-building-a-book-catalogue-api-part-i-cf8599d63ca4", "anchor_text": "Part 1"}, {"url": "https://towardsdatascience.com/rest-api-building-a-book-catalogue-api-part-ii-c4ef2dca7090", "anchor_text": "Part 2"}, {"url": "https://towardsdatascience.com/rest-api-building-a-book-catalogue-api-part-iii-287578b84229", "anchor_text": "Part 3"}, {"url": "https://www.django-rest-framework.org/api-guide/parsers/", "anchor_text": "Parsers in Django REST Framework"}, {"url": "https://medium.com/tag/programming-rest-apis?source=post_page-----851747c0c2b7---------------programming_rest_apis-----------------", "anchor_text": "Programming Rest Apis"}, {"url": "https://medium.com/tag/django-rest-framework?source=post_page-----851747c0c2b7---------------django_rest_framework-----------------", "anchor_text": "Django Rest Framework"}, {"url": "https://medium.com/tag/rest-api?source=post_page-----851747c0c2b7---------------rest_api-----------------", "anchor_text": "Rest Api"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F851747c0c2b7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Frest-api-file-upload-handling-851747c0c2b7&user=Girija+Shankar+Behera&userId=15521c3a84a9&source=-----851747c0c2b7---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F851747c0c2b7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Frest-api-file-upload-handling-851747c0c2b7&user=Girija+Shankar+Behera&userId=15521c3a84a9&source=-----851747c0c2b7---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F851747c0c2b7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Frest-api-file-upload-handling-851747c0c2b7&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----851747c0c2b7--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F851747c0c2b7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Frest-api-file-upload-handling-851747c0c2b7&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----851747c0c2b7---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----851747c0c2b7--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----851747c0c2b7--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----851747c0c2b7--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----851747c0c2b7--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----851747c0c2b7--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----851747c0c2b7--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----851747c0c2b7--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----851747c0c2b7--------------------------------", "anchor_text": ""}, {"url": "https://gshbehera.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://gshbehera.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Girija Shankar Behera"}, {"url": "https://gshbehera.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "141 Followers"}, {"url": "https://www.linkedin.com/in/girija-shankar-behera-449179111/", "anchor_text": "https://www.linkedin.com/in/girija-shankar-behera-449179111/"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F15521c3a84a9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Frest-api-file-upload-handling-851747c0c2b7&user=Girija+Shankar+Behera&userId=15521c3a84a9&source=post_page-15521c3a84a9--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fd8cdf5a3d59&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Frest-api-file-upload-handling-851747c0c2b7&newsletterV3=15521c3a84a9&newsletterV3Id=d8cdf5a3d59&user=Girija+Shankar+Behera&userId=15521c3a84a9&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}