{"url": "https://towardsdatascience.com/extract-annotations-from-cvat-xml-file-into-mask-files-in-python-bb69749c4dc9", "time": 1683012185.216363, "path": "towardsdatascience.com/extract-annotations-from-cvat-xml-file-into-mask-files-in-python-bb69749c4dc9/", "webpage": {"metadata": {"title": "Extract annotations from CVAT XML file into mask files in Python | by Oleksii Sheremet | Towards Data Science", "h1": "Extract annotations from CVAT XML file into mask files in Python", "description": "The Computer Vision Annotation Tool (CVAT) is a well-known image annotation tool. The results of the data labelers work can be imported in XML file. This XML file contains all the necessary\u2026"}, "outgoing_paragraph_urls": [{"url": "https://github.com/opencv/cvat", "anchor_text": "Computer Vision Annotation Tool (CVAT)", "paragraph_index": 0}, {"url": "https://lxml.de/", "anchor_text": "lxml", "paragraph_index": 2}, {"url": "https://tqdm.github.io/", "anchor_text": "tqdm", "paragraph_index": 3}, {"url": "https://lxml.de/", "anchor_text": "lxml \u2014 XML and HTML with Python", "paragraph_index": 15}, {"url": "https://realpython.com/run-python-scripts/", "anchor_text": "How to Run Your Python Scripts", "paragraph_index": 16}, {"url": "https://www.researchgate.net/profile/Oleksii_Sheremet", "anchor_text": "https://www.researchgate.net/profile/Oleksii_Sheremet", "paragraph_index": 18}], "all_paragraphs": ["The Computer Vision Annotation Tool (CVAT) is a well-known image annotation tool. The results of the data labelers work can be imported in XML file. This XML file contains all the necessary information about the markup. However, for image segmentation task it is necessary to have masks in the form of image files (JPEG, GIF, PNG, etc.). In other words, having the markup coordinates in the CVAT XML file, you need to draw the corresponding masks.", "If the data labelers worked with images in a higher resolution than it is supposed to be used for training, then the task will become more complicated. It is necessary to take into account the influence of the image compression factor on the numerical values of the cue points presented in the XML file.", "All code for extracting annotations is implemented as a script in Python. The lxml library is used for parsing XML. It is a fast and flexible solution for handling XML and HTML markup The lxml package has XPath and XSLT support, including an API for SAX and an API for compatibility with C modules.", "The tqdm package is used as a progress bar to illustrate the processing of a large number of files.", "Let\u2019s take a closer look. Import libraries:", "A useful function for creating a new directory and recursively deleting the contents of an existing one:", "The arguments for the script in question are the following data: directory with input images, input file with CVAT annotation in XML format, directory for output masks and scale factor for images. A function for parsing arguments from the command line:", "For understanding how the extracting function works, let\u2019s take a closer look at the section of the CVAT XML file:", "At first, it is necessary to find in the XML file the area corresponding to the currently processed image. The easiest way to do this is by the file name (\u20187.jpg\u2019 in the example). Next, you need to find the tags \u2018polygon\u2019 or \u2018box\u2019 and extract the necessary data from them (in this example, roofs are marked on the basis of polygons). You can use the following function to obtain markup results from CVAT XML:", "Next, we need to create mask files. Draw the sides of the mask polygons in white, and the inner content in red (as shown in the picture above). The following function allows you to do this:", "And in the end, the main function:", "When we execute file as command to the python interpreter, we must add the following construct:", "That\u2019s all. To run the script, you should run the following command (scale factor is 1 by default when after markup you don\u2019t resize images):", "The mask obtained as a result of the script:", "The considered approach allows obtaining more complex mask files from the data contained in the CVAT XML. You can extract individual polygons or highlight polygons with different colors depending on the number of vertices. In addition, after a little revision, the considered script will allow cutting polygonal sections from the original images in accordance with the marking contour.", "lxml \u2014 XML and HTML with Python", "How to Run Your Python Scripts", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Doctor of Engineering, Professor. Data Scientist at AI Labs | https://www.researchgate.net/profile/Oleksii_Sheremet"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fbb69749c4dc9&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fextract-annotations-from-cvat-xml-file-into-mask-files-in-python-bb69749c4dc9&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fextract-annotations-from-cvat-xml-file-into-mask-files-in-python-bb69749c4dc9&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fextract-annotations-from-cvat-xml-file-into-mask-files-in-python-bb69749c4dc9&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fextract-annotations-from-cvat-xml-file-into-mask-files-in-python-bb69749c4dc9&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----bb69749c4dc9--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----bb69749c4dc9--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@dynamic_phlox_coyote_991?source=post_page-----bb69749c4dc9--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@dynamic_phlox_coyote_991?source=post_page-----bb69749c4dc9--------------------------------", "anchor_text": "Oleksii Sheremet"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fc3f778e21722&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fextract-annotations-from-cvat-xml-file-into-mask-files-in-python-bb69749c4dc9&user=Oleksii+Sheremet&userId=c3f778e21722&source=post_page-c3f778e21722----bb69749c4dc9---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fbb69749c4dc9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fextract-annotations-from-cvat-xml-file-into-mask-files-in-python-bb69749c4dc9&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fbb69749c4dc9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fextract-annotations-from-cvat-xml-file-into-mask-files-in-python-bb69749c4dc9&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://github.com/opencv/cvat", "anchor_text": "Computer Vision Annotation Tool (CVAT)"}, {"url": "https://www.adobe.com/ru/products/photoshop.html", "anchor_text": "Adobe Photoshop"}, {"url": "https://lxml.de/", "anchor_text": "lxml"}, {"url": "https://tqdm.github.io/", "anchor_text": "tqdm"}, {"url": "http://twitter.com/name", "anchor_text": "@name"}, {"url": "https://www.google.com.ua/intl/en/earth/", "anchor_text": "Google Earth"}, {"url": "https://opencv.org/", "anchor_text": "OpenCV"}, {"url": "https://github.com/opencv/cvat", "anchor_text": "Computer Vision Annotation Tool (CVAT)"}, {"url": "https://lxml.de/", "anchor_text": "lxml \u2014 XML and HTML with Python"}, {"url": "https://opencv.org/", "anchor_text": "OpenCV"}, {"url": "https://realpython.com/run-python-scripts/", "anchor_text": "How to Run Your Python Scripts"}, {"url": "https://medium.com/tag/xml?source=post_page-----bb69749c4dc9---------------xml-----------------", "anchor_text": "Xml"}, {"url": "https://medium.com/tag/data-labeling?source=post_page-----bb69749c4dc9---------------data_labeling-----------------", "anchor_text": "Data Labeling"}, {"url": "https://medium.com/tag/labelling?source=post_page-----bb69749c4dc9---------------labelling-----------------", "anchor_text": "Labelling"}, {"url": "https://medium.com/tag/annotations?source=post_page-----bb69749c4dc9---------------annotations-----------------", "anchor_text": "Annotations"}, {"url": "https://medium.com/tag/image-segmentation?source=post_page-----bb69749c4dc9---------------image_segmentation-----------------", "anchor_text": "Image Segmentation"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fbb69749c4dc9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fextract-annotations-from-cvat-xml-file-into-mask-files-in-python-bb69749c4dc9&user=Oleksii+Sheremet&userId=c3f778e21722&source=-----bb69749c4dc9---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fbb69749c4dc9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fextract-annotations-from-cvat-xml-file-into-mask-files-in-python-bb69749c4dc9&user=Oleksii+Sheremet&userId=c3f778e21722&source=-----bb69749c4dc9---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fbb69749c4dc9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fextract-annotations-from-cvat-xml-file-into-mask-files-in-python-bb69749c4dc9&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----bb69749c4dc9--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fbb69749c4dc9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fextract-annotations-from-cvat-xml-file-into-mask-files-in-python-bb69749c4dc9&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----bb69749c4dc9---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----bb69749c4dc9--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----bb69749c4dc9--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----bb69749c4dc9--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----bb69749c4dc9--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----bb69749c4dc9--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----bb69749c4dc9--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----bb69749c4dc9--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----bb69749c4dc9--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@dynamic_phlox_coyote_991?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@dynamic_phlox_coyote_991?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Oleksii Sheremet"}, {"url": "https://medium.com/@dynamic_phlox_coyote_991/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "41 Followers"}, {"url": "https://www.researchgate.net/profile/Oleksii_Sheremet", "anchor_text": "https://www.researchgate.net/profile/Oleksii_Sheremet"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fc3f778e21722&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fextract-annotations-from-cvat-xml-file-into-mask-files-in-python-bb69749c4dc9&user=Oleksii+Sheremet&userId=c3f778e21722&source=post_page-c3f778e21722--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F19953c66acb8&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fextract-annotations-from-cvat-xml-file-into-mask-files-in-python-bb69749c4dc9&newsletterV3=c3f778e21722&newsletterV3Id=19953c66acb8&user=Oleksii+Sheremet&userId=c3f778e21722&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}