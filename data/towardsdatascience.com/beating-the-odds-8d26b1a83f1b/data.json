{"url": "https://towardsdatascience.com/beating-the-odds-8d26b1a83f1b", "time": 1683006574.977004, "path": "towardsdatascience.com/beating-the-odds-8d26b1a83f1b/", "webpage": {"metadata": {"title": "Beating the Odds. Using Data Science to Find the NBA\u2019s\u2026 | by Alex Muhr | Towards Data Science", "h1": "Beating the Odds", "description": "This is the first installment in my weekly sports themed series. Each week I\u2019ll demonstrate applications of data science and seek to provide thoughtful analysis and insight into the games we love to\u2026"}, "outgoing_paragraph_urls": [{"url": "https://www.sports-reference.com/", "anchor_text": "Sports Reference", "paragraph_index": 2}, {"url": "https://sportsreference.readthedocs.io/en/stable/sportsreference.html", "anchor_text": "python API", "paragraph_index": 2}], "all_paragraphs": ["This is the first installment in my weekly sports themed series. Each week I\u2019ll demonstrate applications of data science and seek to provide thoughtful analysis and insight into the games we love to watch.", "In this article, I determine teams throughout NBA history that overachieved. Teams that the numbers suggest shouldn\u2019t have been very good, but nonetheless defied their statistical odds. Without further ado, let\u2019s tip this off.", "To begin, we\u2019re going to need some data. Thankfully, Sports Reference has provided a free to use python API that allows for easy access to over half a century of basketball data. The API can also be used to access datasets for Football, Baseball, Hockey, and Soccer; it\u2019s a great starting point for nearly any sports related data project. To begin using the Sports Reference API you will need to install it just like any other python package using pip or conda.", "With the sports reference API installed, let\u2019s begin by grabbing data for the teams that we want to include in our analysis. I chose to look at all teams from 1980 to present day. The code below uses the Sports Reference Teams module to build a pandas dataframe where each row represents one season of one team. It will also set the index to a column named \u2018id\u2019, simply a combination of team abbreviation and year, which serves as a unique identifier. This \u2018id\u2019 index will come in handy later when merging to other dataframes.", "The result of the code above is the following 1134 x 47 dataframe.", "Using the command all_team_df.columns shows all the columns of our dataframe that we have to work with.", "A lot of great data to work with here, however we\u2019re still missing some important information. This dataframe contains nothing at all about wins and losses! As a team\u2019s ultimate measure of success is games won, we\u2019re going to have to collect that data and join it to the dataset we\u2019re building. To do that we\u2019ll use the sports reference Schedule module. As we\u2019ll need to create and iterate through a schedule object for each of our 1134 teams, defining a helper function to do this makes the code a lot cleaner.", "With the dataframe of team records completed, the next step is to merge this with the rest of our data and save the result to a csv file for easy access later.", "Now we can get to the fun part of this analysis, using the data collected to identify the NBA\u2019s greatest overachieving teams. The idea here is to build a model to predict the number of games a team wins, then see which teams most out performed their prediction. Although we have a multitude of data to build a model upon, I\u2019m going to keep things simple and use only a single feature, average margin of victory (MOV). Obviously a team which scores more points than their opponents will tend to do well. Let\u2019s start by opening a new notebook and importing our dataset.", "Although we don\u2019t have a column in our dataset for MOV, this can easily be created using the \u2018points\u2019, \u2018opp_points\u2019, and \u2018games\u2019 columns. We\u2019ll also create a column for regular season win rate to use as our target variable, this helps account for teams that played in lockout shortened seasons. Finally, we\u2019ll split our data into features and targets, feed the data into a linear regression model, and produce a summary table of the regression results.", "The summary table produced here shows that this extremely simple model produces a great fit to our data with R\u00b2 of 0.941. Further, the mean absolute error of this model in terms of number of games won is only 2.4 games. The code below produces a plot of predicted and actual games won vs MOV, as well as a distribution plot of the model residuals.", "Using the results dataframe just created, the greatest overachievers can now be easily picked out by sorting the dataframe on the \u2018error\u2019 column. These are the teams that won the most games over the prediction based on their average margin of victory. Doing so yields the following:", "Ironically, our analysis has just determined that the 1993 Dallas Mavericks, arguably one of the worst teams in NBA history, is also the greatest overachieving team in NBA history. This is a team that lost 42 games by more than 15 points, 26 games by more than 20 points, and one game by 58 points. It\u2019s hard to say that this team \u2018overachieved\u2019 at anything except losing. So what\u2019s really going on here? Why is our model that produced such a great fit leading us to such a non-sensical result?", "It turns out that this is a great example of why a simple linear regression should never be used to model a proportion. Theoretically, a linear model can output any real number while a proportion is constrained between 0 and 1. Had the 1993 Mavericks posted a slightly worse MOV our model would have predicted a negative win rate! We\u2019ve created a model that tends to pick very bad teams as overachievers and very good teams as underachievers.", "The fix is to use logistic regression instead of linear regression. Unfortunately, the convenient logistic regression module in sklearn is designed to only fit to categorical data, not actual proportions. This means that we\u2019ll have to do a bit of extra work to convert our linear regression to logistic regression.", "At its core, logistic regression is just linear regression on the log-odds of a proportion, probability, or classification. Therefore the first step is to define functions to convert our target variable \u2018win_rate\u2019 to log-odds and back again. These functions are commonly known as the logit and sigmoid functions and can be easily defined in our python notebook as follows:", "We\u2019ll then repeat our process used to produce the linear regression with only a few minor changes.", "As expected, this logistic regression model produces a slightly better fit to our data with an R\u00b2 of 0.944 and mean absolute error of only 2.3 games. Although this is only slightly better than our previous model, plotting the results shows a much better fit to teams with more extreme positive or negative MOV values. These plots can be produced using nearly the exact same code as used previously.", "Now we can actually determine the NBA\u2019s greatest overachieving teams. To get even more compelling results, let\u2019s also filter the output to only include teams which won at least 4 playoff games.", "There you have it, the NBA\u2019s greatest overachievers were the 1987 Golden State Warriors. Led by Joe Barry Carroll, Sleepy Floyd, and Chris Mullin, the 1986\u201387 Warriors posted a rather poor -2.3 MOV. While this would typically lead to a disappointing season, the 1986\u201387 Warriors scraped together 42 wins, well above their predicted 34 wins and good for 5th place in the Western Conference. The team managed to do this by posting a 63% win rate in two possession games, while also managing to lose 30 games by 10 or more points. In the playoffs, the Warriors took out the 4th seed Utah Jazz in 5 games (3\u20132) before losing to the Showtime Lakers, a team widely considered one of the best of all time, in 5 games (1\u20134).", "Thanks for reading, and I hope to have you back next week.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Using data science to uncover new perspectives, solve practical problems, and have some fun along the way."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F8d26b1a83f1b&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbeating-the-odds-8d26b1a83f1b&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbeating-the-odds-8d26b1a83f1b&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbeating-the-odds-8d26b1a83f1b&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbeating-the-odds-8d26b1a83f1b&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----8d26b1a83f1b--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----8d26b1a83f1b--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@acmuhr?source=post_page-----8d26b1a83f1b--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@acmuhr?source=post_page-----8d26b1a83f1b--------------------------------", "anchor_text": "Alex Muhr"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fd932be500623&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbeating-the-odds-8d26b1a83f1b&user=Alex+Muhr&userId=d932be500623&source=post_page-d932be500623----8d26b1a83f1b---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F8d26b1a83f1b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbeating-the-odds-8d26b1a83f1b&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F8d26b1a83f1b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbeating-the-odds-8d26b1a83f1b&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@markusspiske", "anchor_text": "Markus Spiske"}, {"url": "https://unsplash.com/photos/BfphcCvhl6E", "anchor_text": "Unsplash"}, {"url": "https://www.sports-reference.com/", "anchor_text": "Sports Reference"}, {"url": "https://sportsreference.readthedocs.io/en/stable/sportsreference.html", "anchor_text": "python API"}, {"url": "https://github.com/alexmuhr/Over_Under_Achiever_Analysis.git", "anchor_text": "Link to Github"}, {"url": "https://medium.com/tag/data-science?source=post_page-----8d26b1a83f1b---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/regression?source=post_page-----8d26b1a83f1b---------------regression-----------------", "anchor_text": "Regression"}, {"url": "https://medium.com/tag/sports?source=post_page-----8d26b1a83f1b---------------sports-----------------", "anchor_text": "Sports"}, {"url": "https://medium.com/tag/basketball?source=post_page-----8d26b1a83f1b---------------basketball-----------------", "anchor_text": "Basketball"}, {"url": "https://medium.com/tag/logistic-regression?source=post_page-----8d26b1a83f1b---------------logistic_regression-----------------", "anchor_text": "Logistic Regression"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F8d26b1a83f1b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbeating-the-odds-8d26b1a83f1b&user=Alex+Muhr&userId=d932be500623&source=-----8d26b1a83f1b---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F8d26b1a83f1b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbeating-the-odds-8d26b1a83f1b&user=Alex+Muhr&userId=d932be500623&source=-----8d26b1a83f1b---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F8d26b1a83f1b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbeating-the-odds-8d26b1a83f1b&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----8d26b1a83f1b--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F8d26b1a83f1b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbeating-the-odds-8d26b1a83f1b&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----8d26b1a83f1b---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----8d26b1a83f1b--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----8d26b1a83f1b--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----8d26b1a83f1b--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----8d26b1a83f1b--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----8d26b1a83f1b--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----8d26b1a83f1b--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----8d26b1a83f1b--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----8d26b1a83f1b--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@acmuhr?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@acmuhr?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Alex Muhr"}, {"url": "https://medium.com/@acmuhr/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "179 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fd932be500623&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbeating-the-odds-8d26b1a83f1b&user=Alex+Muhr&userId=d932be500623&source=post_page-d932be500623--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F459ab5d3c363&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbeating-the-odds-8d26b1a83f1b&newsletterV3=d932be500623&newsletterV3Id=459ab5d3c363&user=Alex+Muhr&userId=d932be500623&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}