{"url": "https://towardsdatascience.com/how-to-refactor-a-jupyter-notebook-ed531b6a17", "time": 1683006796.256604, "path": "towardsdatascience.com/how-to-refactor-a-jupyter-notebook-ed531b6a17/", "webpage": {"metadata": {"title": "How to refactor a Jupyter notebook | by David | Towards Data Science", "h1": "How to refactor a Jupyter notebook", "description": "What starts as an awesome ML model easily becomes a big blob of code that\u2019s hard to understand. Modifying code becomes painful and error-prone, and it becomes increasingly difficult for ML\u2026"}, "outgoing_paragraph_urls": [{"url": "https://www.thoughtworks.com/insights/blog/coding-habits-data-scientists", "anchor_text": "this article", "paragraph_index": 3}, {"url": "https://www.refactoring.com/", "anchor_text": "Refactoring", "paragraph_index": 4}, {"url": "https://github.com/davified/clean-code-ml", "anchor_text": "code smells", "paragraph_index": 9}, {"url": "https://www.youtube.com/watch?v=e8_v2O7CRtE&list=PLO9pkowc_99ZhP2yuPU8WCfFNYEx2IkwR&index=3", "anchor_text": "demo", "paragraph_index": 14}, {"url": "https://github.com/davified/clean-code-ml/blob/master/notebooks/titanic-notebook-0.ipynb", "anchor_text": "messy, hard-to-read notebook", "paragraph_index": 20}, {"url": "https://github.com/davified/clean-code-ml/blob/master/src/train.py", "anchor_text": "tested and modular codebase", "paragraph_index": 20}, {"url": "https://www.youtube.com/watch?v=AQKe5yCnFkA&list=PLO9pkowc_99ZhP2yuPU8WCfFNYEx2IkwR&index=13", "anchor_text": "this demo", "paragraph_index": 23}, {"url": "https://www.youtube.com/watch?v=Edn6XxWmtEs&list=PLO9pkowc_99ZhP2yuPU8WCfFNYEx2IkwR&index=2", "anchor_text": "Coding Habits for Data Scientists", "paragraph_index": 24}], "all_paragraphs": ["In the ML world, code can get messy, quickly.", "What starts as an awesome ML model easily becomes a big blob of code that\u2019s hard to understand. Modifying code becomes painful and error-prone, and it becomes increasingly difficult for ML practitioners to evolve their ML solutions to satisfy new {business requirements, feature engineering strategies, data}.", "In this article, I will share with you my process of refactoring a Jupyter notebook, and show you how I take it from an unmaintainable state to a {readable, tested, maintainable} state. Once our codebase is comprehensively tested and is easily understandable, it\u2019ll be much easier to extend and evolve our ML solution.", "Note: If you\u2019re not convinced of the need to refactor your Jupyter notebooks, check out this article \ud83d\udc7b", "Refactoring is changing code to make it easier to understand and modify, without changing its observable behaviour. (Paraphrased from Refactoring \u2014 Martin Fowler)", "For a long time, I\u2019ve stared at my Jupyter notebooks and thought about how I could make it better. I know I should be writing tests and refactoring my code. But there are some boulders preventing me from taking my first step: (i) fear that I might break something, (ii) fear that I might delete code that someone else needs, (iii) cumbersome mechanics of refactoring in Jupyter notebooks (e.g. try renaming a variable).", "After running this refactoring workshop twice, I\u2019ve come to discover six preparatory steps that enable and accelerate refactoring:", "2. Make a copy of the original notebook.", "3. Convert Jupyter notebook into a plain Python file.", "5. Read notebook and list code smells.", "6. Define refactoring boundary and add a characterisation test.", "In the refactoring recycle, we incrementally and iteratively improve our code by (i) adding unit tests and (ii) abstracting complex implementation details into modular and readable functions.", "The refactoring cycle is as follows:", "1. Identify a block of code that can be extracted into a pure function (i.e. a function that returns the exact same output for a given input, no matter when or where it\u2019s run).", "2. Write a unit test. (see demo)", "4. In the notebook, replace original code block with the newly defined function.", "5. Ensure characterisation tests are still passing.", "6. Commit your changes to git.", "Now, if you feel that the code that you just extracted could be improved some more, you can refactor it further with the safety net of your new unit test.", "Otherwise, you can repeat the refactoring cycle on another code block in the Jupyter notebook, and repeat until the codebase is comprehensively tested and refactored into a readable and maintainable state.", "In a nutshell, you can go from a messy, hard-to-read notebook to a tested and modular codebase. \ud83c\udf89\ud83c\udf89\ud83c\udf89", "The combination of automated tests and refactoring can go a long way to help us in:", "Thank you for reading this far! I hope this has been helpful for you \ud83d\ude80\ud83d\ude80\ud83d\ude80", "To see a hands-on example of how I refactor a Jupyter notebook, check out this demo!", "This is part of a tutorial series, Coding Habits for Data Scientists, which aims to help data scientists become more productive by learning good programming habits.", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fed531b6a17&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-refactor-a-jupyter-notebook-ed531b6a17&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-refactor-a-jupyter-notebook-ed531b6a17&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-refactor-a-jupyter-notebook-ed531b6a17&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-refactor-a-jupyter-notebook-ed531b6a17&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----ed531b6a17--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----ed531b6a17--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://davified.medium.com/?source=post_page-----ed531b6a17--------------------------------", "anchor_text": ""}, {"url": "https://davified.medium.com/?source=post_page-----ed531b6a17--------------------------------", "anchor_text": "David"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F1f3c1dbd7daa&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-refactor-a-jupyter-notebook-ed531b6a17&user=David&userId=1f3c1dbd7daa&source=post_page-1f3c1dbd7daa----ed531b6a17---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fed531b6a17&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-refactor-a-jupyter-notebook-ed531b6a17&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fed531b6a17&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-refactor-a-jupyter-notebook-ed531b6a17&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://www.thoughtworks.com/insights/blog/coding-habits-data-scientists", "anchor_text": "this article"}, {"url": "https://www.refactoring.com/", "anchor_text": "Refactoring"}, {"url": "https://github.com/davified/clean-code-ml/blob/master/notebooks/titanic-notebook-0.ipynb", "anchor_text": "disastrous fashion"}, {"url": "https://www.youtube.com/watch?v=KUvqDINDzFE&list=PLO9pkowc_99ZhP2yuPU8WCfFNYEx2IkwR&index=6", "anchor_text": "more efficient"}, {"url": "https://github.com/davified/clean-code-ml", "anchor_text": "code smells"}, {"url": "https://github.com/davified/clean-code-ml-exercise/blob/master/notebooks/titanic-notebook-refactoring-starter.ipynb", "anchor_text": "example"}, {"url": "https://www.youtube.com/watch?v=SVRdF6P5gek&list=PLO9pkowc_99ZhP2yuPU8WCfFNYEx2IkwR&index=4", "anchor_text": "this demo"}, {"url": "https://www.youtube.com/watch?v=e8_v2O7CRtE&list=PLO9pkowc_99ZhP2yuPU8WCfFNYEx2IkwR&index=3", "anchor_text": "demo"}, {"url": "https://github.com/davified/clean-code-ml/blob/master/notebooks/titanic-notebook-0.ipynb", "anchor_text": "messy, hard-to-read notebook"}, {"url": "https://github.com/davified/clean-code-ml/blob/master/src/train.py", "anchor_text": "tested and modular codebase"}, {"url": "https://www.youtube.com/watch?v=AQKe5yCnFkA&list=PLO9pkowc_99ZhP2yuPU8WCfFNYEx2IkwR&index=13", "anchor_text": "this demo"}, {"url": "https://www.youtube.com/watch?v=Edn6XxWmtEs&list=PLO9pkowc_99ZhP2yuPU8WCfFNYEx2IkwR&index=2", "anchor_text": "Coding Habits for Data Scientists"}, {"url": "https://medium.com/tag/python?source=post_page-----ed531b6a17---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/data-science?source=post_page-----ed531b6a17---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----ed531b6a17---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/tag/ds-in-the-real-world?source=post_page-----ed531b6a17---------------ds_in_the_real_world-----------------", "anchor_text": "Ds In The Real World"}, {"url": "https://medium.com/tag/artificial-intelligence?source=post_page-----ed531b6a17---------------artificial_intelligence-----------------", "anchor_text": "Artificial Intelligence"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fed531b6a17&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-refactor-a-jupyter-notebook-ed531b6a17&user=David&userId=1f3c1dbd7daa&source=-----ed531b6a17---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fed531b6a17&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-refactor-a-jupyter-notebook-ed531b6a17&user=David&userId=1f3c1dbd7daa&source=-----ed531b6a17---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fed531b6a17&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-refactor-a-jupyter-notebook-ed531b6a17&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----ed531b6a17--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fed531b6a17&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-refactor-a-jupyter-notebook-ed531b6a17&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----ed531b6a17---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----ed531b6a17--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----ed531b6a17--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----ed531b6a17--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----ed531b6a17--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----ed531b6a17--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----ed531b6a17--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----ed531b6a17--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----ed531b6a17--------------------------------", "anchor_text": ""}, {"url": "https://davified.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://davified.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "David"}, {"url": "https://davified.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "238 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F1f3c1dbd7daa&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-refactor-a-jupyter-notebook-ed531b6a17&user=David&userId=1f3c1dbd7daa&source=post_page-1f3c1dbd7daa--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F3148001d9627&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-refactor-a-jupyter-notebook-ed531b6a17&newsletterV3=1f3c1dbd7daa&newsletterV3Id=3148001d9627&user=David&userId=1f3c1dbd7daa&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}