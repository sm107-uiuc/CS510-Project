{"url": "https://towardsdatascience.com/diving-into-gremlin-queries-in-azure-cosmos-db-83eb1d7c6350", "time": 1683004341.742024, "path": "towardsdatascience.com/diving-into-gremlin-queries-in-azure-cosmos-db-83eb1d7c6350/", "webpage": {"metadata": {"title": "Diving into Gremlin queries in Azure Cosmos DB | by Will Velida | Towards Data Science", "h1": "Diving into Gremlin queries in Azure Cosmos DB", "description": "Thanks to the Gremlin API offering of Azure Cosmos DB, we can build globally distributed databases that store and operate on graph data. We can perform graph queries in Cosmos DB using the Gremlin\u2026"}, "outgoing_paragraph_urls": [{"url": "https://docs.microsoft.com/en-us/azure/cosmos-db/graph-introduction", "anchor_text": "Gremlin API offering of Azure Cosmos DB", "paragraph_index": 0}, {"url": "https://tinkerpop.apache.org/gremlin.html", "anchor_text": "Gremlin query language", "paragraph_index": 0}, {"url": "https://azure.microsoft.com/en-us/free/search/?&ef_id=Cj0KCQiAtOjyBRC0ARIsAIpJyGOI7zkc0-5H_AIx-DTNAIFceyFTzbj-0QuLR3KABrICZ98KG6qJagkaAngdEALw_wcB:G:s&OCID=AID2000101_SEM_mOdqImR2&MarinID=mOdqImR2_324818828064_%2Bazure%20%2Bsubscription_b_c__69066121910_aud-397602258452:kwd-301997157783&lnkd=Google_Azure_Brand&dclid=CjgKEAiAtOjyBRDM1YzS7I6N1RQSJADOz68DSttG5JBrHK-Te2XPUhH5dsDv_2pGP1dSCHujbiH-rvD_BwE", "anchor_text": "link", "paragraph_index": 2}, {"url": "https://github.com/willvelida", "anchor_text": "https://github.com/willvelida", "paragraph_index": 35}], "all_paragraphs": ["Thanks to the Gremlin API offering of Azure Cosmos DB, we can build globally distributed databases that store and operate on graph data. We can perform graph queries in Cosmos DB using the Gremlin query language.", "In this article, I\u2019m going to show you how to set up a Cosmos DB account that supports the Gremlin API and how you can perform some simple graph queries in that account.", "If you want to follow along, you\u2019ll need to set up an Azure subscription. Check out this link on how to do that. Otherwise, let\u2019s begin!", "Let\u2019s start with creating our graph database. Head to your Azure Portal and click \u201cCreate a new resource\u201d. Search for Azure Cosmos DB and click \u201c\u2018Create New\u201d.", "In order to create our graph database, we\u2019ll need to provide some basic information:", "Look at the screenshot below for an example:", "Click \u201cReview + Create\u201d and you\u2019ll be redirected to a validation page. We don\u2019t need to worry about networking or tags just for the moment. If your configuration is valid, you\u2019ll be shown a success message and you can click \u201cCreate \u201dto provision your graph database!", "For this tutorial, we\u2019re going to use the sample graph that the Cosmos DB provides for all new Graph accounts. In order to do this, click \u201cQuick Start\u201d. You\u2019ll be asked to choose a platform for creating a sample app, but all we\u2019re doing here is creating a container with some sample data.", "The Cosmos DB team have a Persons container that we can use, so click on Create \u2018Persons\u2019 container and that should be enough.", "Click on \u201cData Explorer\u201d to navigate to your graph.", "This is new? They\u2019ve changed the way that the data explorer works! It looks like we have to add our current IP address to our firewall rules in order to see our data? (Very Azure SQL, if you\u2019ve used Azure SQL before).", "Click on the notification and you\u2019ll be redirected to the firewall settings tab. Your IP address should be prepopulated in the Firewall section below, so just click \u201cSave \u201dto add your IP address to the allow access list. After a few minutes you should be good to go.", "Once this is all done, navigate back to the Data Explorer and we should see our new Persons Graph in our Cosmos DB account.", "Alright, that\u2019s all the admin setup that we need to do, let\u2019s start diving into some awesome graph queries!", "Performing queries in our Graph Database", "Let\u2019s start by inserting a couple of items into our Persons Graph. Head to your data explorer and you should see a text box that allows us to execute Gremlin queries.", "Let\u2019s start by adding 5 people to our graph. Type in the following Gremlin queries:", "What we\u2019ve done here is added 5 people vertices. Vertices are discrete entities in our graphs. In this example, we have used People as our vertices, but they could be places or events.", "Let\u2019s take a bit of a deeper dive as to what each Gremlin command is doing:", "Now let\u2019s add some relationships between our vertices. These are referred to as edges in graph databases. Let\u2019s write the following queries:", "Let\u2019s examine the new Gremlin queries:", "We can update our vertices with a command like so:", "Let\u2019s try filtering our Persons collection. Let\u2019s retrieve all the vertices that have an age less than 30:", "Here, we get two results back:", "We can refine this query further to return just the name properties:", "Finally, let\u2019s perform a simple traversal in our graph to find out all the people that Alex knows:", "As we can see, he knows 1 person, Mike Jones:", "This is pretty cool stuff, but I can already hear some of you say \u2018how can I measure the performance of these queries?\u2019.", "The Gremlin query language has a method called executionProfile() that allows us to look at metrics on how our query performed. Let\u2019s append this method to our previous query and see how it performs:", "This is the response we get back:", "Let\u2019s go through the following properties:", "In this post, we set up a new Cosmos DB Graph database and perform some basic queries in it. We also looked at how we can assess the performance of those queries. If you\u2019re done with this graph db, feel free to delete it. Otherwise, why not add some more properties and take a look at the Cosmos DB Graph documentation to discover what else you can do with Gremlin queries.", "In a future post, I\u2019ll talk about how we can model our data for graph databases and look at some best practices. I\u2019ll also talk about how we can apply these concepts in the context of developing applications for Azure Cosmos DB.", "If you have any questions, please feel free to ask them in the comment section below.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Customer Engineer at Microsoft working in the Fast Track for Azure team. GitHub: https://github.com/willvelida"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F83eb1d7c6350&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdiving-into-gremlin-queries-in-azure-cosmos-db-83eb1d7c6350&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdiving-into-gremlin-queries-in-azure-cosmos-db-83eb1d7c6350&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdiving-into-gremlin-queries-in-azure-cosmos-db-83eb1d7c6350&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdiving-into-gremlin-queries-in-azure-cosmos-db-83eb1d7c6350&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----83eb1d7c6350--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----83eb1d7c6350--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://willvelida.medium.com/?source=post_page-----83eb1d7c6350--------------------------------", "anchor_text": ""}, {"url": "https://willvelida.medium.com/?source=post_page-----83eb1d7c6350--------------------------------", "anchor_text": "Will Velida"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F47ee50278c96&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdiving-into-gremlin-queries-in-azure-cosmos-db-83eb1d7c6350&user=Will+Velida&userId=47ee50278c96&source=post_page-47ee50278c96----83eb1d7c6350---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F83eb1d7c6350&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdiving-into-gremlin-queries-in-azure-cosmos-db-83eb1d7c6350&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F83eb1d7c6350&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdiving-into-gremlin-queries-in-azure-cosmos-db-83eb1d7c6350&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://docs.microsoft.com/en-us/azure/cosmos-db/graph-introduction", "anchor_text": "Gremlin API offering of Azure Cosmos DB"}, {"url": "https://tinkerpop.apache.org/gremlin.html", "anchor_text": "Gremlin query language"}, {"url": "https://azure.microsoft.com/en-us/free/search/?&ef_id=Cj0KCQiAtOjyBRC0ARIsAIpJyGOI7zkc0-5H_AIx-DTNAIFceyFTzbj-0QuLR3KABrICZ98KG6qJagkaAngdEALw_wcB:G:s&OCID=AID2000101_SEM_mOdqImR2&MarinID=mOdqImR2_324818828064_%2Bazure%20%2Bsubscription_b_c__69066121910_aud-397602258452:kwd-301997157783&lnkd=Google_Azure_Brand&dclid=CjgKEAiAtOjyBRDM1YzS7I6N1RQSJADOz68DSttG5JBrHK-Te2XPUhH5dsDv_2pGP1dSCHujbiH-rvD_BwE", "anchor_text": "link"}, {"url": "https://medium.com/tag/nosql?source=post_page-----83eb1d7c6350---------------nosql-----------------", "anchor_text": "NoSQL"}, {"url": "https://medium.com/tag/azure?source=post_page-----83eb1d7c6350---------------azure-----------------", "anchor_text": "Azure"}, {"url": "https://medium.com/tag/software-development?source=post_page-----83eb1d7c6350---------------software_development-----------------", "anchor_text": "Software Development"}, {"url": "https://medium.com/tag/data-science?source=post_page-----83eb1d7c6350---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/database?source=post_page-----83eb1d7c6350---------------database-----------------", "anchor_text": "Database"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F83eb1d7c6350&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdiving-into-gremlin-queries-in-azure-cosmos-db-83eb1d7c6350&user=Will+Velida&userId=47ee50278c96&source=-----83eb1d7c6350---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F83eb1d7c6350&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdiving-into-gremlin-queries-in-azure-cosmos-db-83eb1d7c6350&user=Will+Velida&userId=47ee50278c96&source=-----83eb1d7c6350---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F83eb1d7c6350&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdiving-into-gremlin-queries-in-azure-cosmos-db-83eb1d7c6350&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----83eb1d7c6350--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F83eb1d7c6350&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdiving-into-gremlin-queries-in-azure-cosmos-db-83eb1d7c6350&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----83eb1d7c6350---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----83eb1d7c6350--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----83eb1d7c6350--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----83eb1d7c6350--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----83eb1d7c6350--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----83eb1d7c6350--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----83eb1d7c6350--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----83eb1d7c6350--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----83eb1d7c6350--------------------------------", "anchor_text": ""}, {"url": "https://willvelida.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://willvelida.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Will Velida"}, {"url": "https://willvelida.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "542 Followers"}, {"url": "https://github.com/willvelida", "anchor_text": "https://github.com/willvelida"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F47ee50278c96&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdiving-into-gremlin-queries-in-azure-cosmos-db-83eb1d7c6350&user=Will+Velida&userId=47ee50278c96&source=post_page-47ee50278c96--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F8da54f101bbd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdiving-into-gremlin-queries-in-azure-cosmos-db-83eb1d7c6350&newsletterV3=47ee50278c96&newsletterV3Id=8da54f101bbd&user=Will+Velida&userId=47ee50278c96&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}