{"url": "https://towardsdatascience.com/beating-the-dealer-with-simple-statistics-71b5e3701638", "time": 1683000297.9348931, "path": "towardsdatascience.com/beating-the-dealer-with-simple-statistics-71b5e3701638/", "webpage": {"metadata": {"title": "Can you Beat Blackjack with Python Programming | Marco Santos | Towards Data Science", "h1": "Can you Beat Blackjack with Python Programming?", "description": "I simulated thousands of Blackjack games using different card counting strategies in Python programming. Get to 21 with some code and data science."}, "outgoing_paragraph_urls": [{"url": "https://marco-santos.medium.com/membership", "anchor_text": "Sign up for a Medium Membership here to gain unlimited access and support content like mine! With your support I earn a small portion of the membership fee. Thanks!", "paragraph_index": 3}, {"url": "https://towardsdatascience.com/questions-96667b06af5", "anchor_text": "rules and guidelines", "paragraph_index": 26}, {"url": "https://towardsdatascience.com/readers-terms-b5d780a700a4", "anchor_text": "Reader Terms", "paragraph_index": 26}, {"url": "http://linkedin.com/in/marco-s-santos", "anchor_text": "linkedin.com/in/marco-s-santos", "paragraph_index": 28}], "all_paragraphs": ["Blackjack is one of the simplest games to play at a casino. It is also one of the easiest games to learn. The goal is simple; just try to get as close to the value of 21 as best as you can without going over. You can either beat the dealer, lose to the dealer, or tie with the dealer. The outcomes of Blackjack are very straightforward. However, the weight of those outcomes is entirely up to you because you can risk to lose a lot of money in just one hand. No one wants to lose and losing in Blackjack can hurt depending on your bet size. In order to tilt the odds against the casino or the house, Blackjack players have developed numerous card counting strategies to decrease their chances of losing.", "Card counting may appear difficult at first, but it is actually quite simple. The concept of card counting involves assigning each card in the deck a value such as +1, -1, or 0. Then, you add them all together and this total value becomes the count. Card counters use this count to determine whether to hit or stay depending on whether the count is high or low. Many different strategies for card counting exist and these strategies implement different values for each card. For example, one strategy may count the Ace as -1 and another strategy will count it as 0. There are many more differences between the strategies than just the card values but we cannot cover them all. It is important to note that these card counting strategies at most, give a 0.5% edge to the player. For the game of Blackjack, that is all it takes.", "So what if we wanted to implement a card counting strategy into our Blackjack games? Which one should we choose? Well, one option we could do is to implement each strategy ourselves, go and play Blackjack several times, then record the results. That option can be extremely time consuming and inaccurate in actually showing the probability and effectiveness of the strategy. Another option can be to code out a game of Blackjack, simulate the game, then record the results after a desired number of simulations. This option is what we will be demonstrating in order to determine the most effective card counting strategy.", "Sign up for a Medium Membership here to gain unlimited access and support content like mine! With your support I earn a small portion of the membership fee. Thanks!", "Let\u2019s begin the journey of simulating Blackjack by coding it all out in Python. We won\u2019t be going over every single line of code for the sake of brevity but the Github for the code will be available at the end of this article. It\u2019s very likely that something like this has been done before, perhaps even done better, but let\u2019s try it out anyways.", "First, in order to simulate a game of Blackjack, we would need to code out a Blackjack game with all the necessary rules and regulations that come with it. To keep things simple, we would leave out options such as splitting, doubling down, surrendering, etc. Let\u2019s keep the player options limited to hit or stay. Also, since we are measuring wins versus losses, we can eliminate the need for betting. However, betting size in a normal Blackjack game is important to know.", "Let\u2019s start by constructing several functions to help our Blackjack game run properly:", "Each function serves an important purpose for running the game. In order to simulate the creation of a playing card deck, we created the create_deck() function which incorporates random to \u201cshuffle\u201d the list of cards we created. Dealing a card is handled in deal_card() which appends a new card by using the .pop() method to mimic the dealing of a card from the deck. The check_ace() function reassigns the value of the ace from 11 to 1 in case the player or dealer goes over 21. These are probably the most notable functions from above, but that doesn\u2019t mean the game can run without the rest.", "This dealer_turn() function deals cards to the dealer if the player decided to stay. This function follows the rules of every Blackjack dealer. It deals until the dealer reaches a value between 17 to 21 or until the dealer busts. It eventually compares the hand of the dealer to the hand of the player to determine who won.", "Next, in order to count cards during the game, we created a Pandas DataFrame of the different card counting strategies and their specific values for every card:", "In this code to create a DataFrame of card counting values, we exported a pickle of the DataFrame for use later on. Make sure that this pickle file is in the same folder as the Blackjack code in order for it to run properly.", "Then, we added card counting functions to keep track of the count while the game is playing:", "These functions keep track of the count throughout every round of Blackjack in the entire game. card_counter() keeps track of the running count and true_counter() keeps track of the true count, which is what players use to decide whether to hit or stay.", "Now that we have all of our functions ready, we can run Blackjack. The code will allow player inputs so we can play the game to our heart\u2019s content. Feel free to test out the Blackjack game in your own terminal or IDE.", "There are two versions of this game:", "Now that we have a Blackjack game coded out and ready to go, we can finally begin simulating Blackjack games with different card counting strategies 1,000 times each. By simulating the various different strategies, we can narrow down the preferred method of card counting that will benefit us in the best way possible. However, we must temper our expectations for each strategy. We reiterate that each strategy is reported to give the player a 0.5% edge every round. Do not expect to win over 60% or more rounds every game.", "Now let\u2019s get started with the simulations. To simulate a Blackjack game with our code, we will have to alter our previous Blackjack code to compensate for the lack of player input. To make up for it, we\u2019ll enter some preprogrammed decisions in the form of conditionals that will make decisions based on the count and some other basic rules similar to the dealer\u2019s.", "The player_move() function takes care of the choice between hit or stay. This function may require some tweaking to better improve results later on. With that handled, we can move on to simulating the games. We begin the simulation by entering our function for playing Blackjack games into a loop that will iterate through a list of strategies and then play 1,000 games with each strategy. We recorded the last 10 rounds of each game in order to capture the effectiveness of each strategy because those rounds will have a decent count from which a decision could be made.", "Finally, we have simulated over 1,000 games of Blackjack for each different strategy we have listed in the Pandas DataFrame. We shuffled the order of the strategies to be simulated to further increase the randomness. Also, we included draws with our wins because a draw in Blackjack results in no money lost when playing against just the dealer. Now, we just need to graph the results from our simulations. This can be done simply by plotting the results for each strategy in a line graph format using Matplotlib.", "Running this code will give us the following graph:", "Voila! It appears that most of the card counting strategies have similar results but they all seem to beat out having no strategy at all. Why don\u2019t we run the simulations again just to make sure:", "It appears that whatever strategy that runs first in the simulation will result in wildly different values in the beginning. Let\u2019s run it one more time to try to even out the results:", "So our observation was correct in assuming that whatever strategy ran first results in erratically different values. But the overall results for every strategy are very similar.", "If you wanted to possibly improve or change the results, then you might have to alter the conditional logic in the player_move() function.", "As it appears in the graphs before, each strategy can provide a decent edge over the dealer. Implementing either one of these strategies seems to be enough to give you an advantage over the casino or house. There\u2019s also the option of sticking to a rigid set of rules when playing with no strategy at all. This also seems to provide a decent percentage of success as long as the strategy is followed with no deviations.", "It should be noted that we do not endorse gambling as a method of making money. But, card counting can provide you with an edge and it really does not matter which strategy you choose to stick with. However, just know that these simulations were done with a basic hit or stay decision and some of these strategies do actually factor in bet size as well as other factors. Also, please know that these simulations and results were made with relatively simple Python methods and tools. All in all, good luck to those who decide to use these strategies!", "Note from Towards Data Science\u2019s editors: While we allow independent authors to publish articles in accordance with our rules and guidelines, we do not endorse each author\u2019s contribution. You should not rely on an author\u2019s works without seeking professional advice. See our Reader Terms for details.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "NYC Data Scientist specializing in AI/ML with a passion for code | Let\u2019s connect! \u2014 linkedin.com/in/marco-s-santos."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F71b5e3701638&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbeating-the-dealer-with-simple-statistics-71b5e3701638&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbeating-the-dealer-with-simple-statistics-71b5e3701638&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbeating-the-dealer-with-simple-statistics-71b5e3701638&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbeating-the-dealer-with-simple-statistics-71b5e3701638&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----71b5e3701638--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----71b5e3701638--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://marco-santos.medium.com/?source=post_page-----71b5e3701638--------------------------------", "anchor_text": ""}, {"url": "https://marco-santos.medium.com/?source=post_page-----71b5e3701638--------------------------------", "anchor_text": "Marco Santos"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fe06d69ac26aa&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbeating-the-dealer-with-simple-statistics-71b5e3701638&user=Marco+Santos&userId=e06d69ac26aa&source=post_page-e06d69ac26aa----71b5e3701638---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F71b5e3701638&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbeating-the-dealer-with-simple-statistics-71b5e3701638&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F71b5e3701638&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbeating-the-dealer-with-simple-statistics-71b5e3701638&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@sumekler?utm_source=medium&utm_medium=referral", "anchor_text": "Jaros\u0142aw Kwocza\u0142a"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://marco-santos.medium.com/membership", "anchor_text": "Sign up for a Medium Membership here to gain unlimited access and support content like mine! With your support I earn a small portion of the membership fee. Thanks!"}, {"url": "https://gist.github.com/marcosan93/c0d0b41748bb515d7110cd3efccc165f", "anchor_text": "https://gist.github.com/marcosan93/c0d0b41748bb515d7110cd3efccc165f"}, {"url": "https://gist.github.com/marcosan93/7fc6f3c3a4de4ccc36d4405a0df8618c", "anchor_text": "https://gist.github.com/marcosan93/7fc6f3c3a4de4ccc36d4405a0df8618c"}, {"url": "https://gist.github.com/marcosan93/d2723710932b9d52b6c0dceda2a8dd96", "anchor_text": "https://gist.github.com/marcosan93/d2723710932b9d52b6c0dceda2a8dd96"}, {"url": "https://gist.github.com/marcosan93/ad0cb4b62f27749d06ec83d267e7fb31", "anchor_text": "https://gist.github.com/marcosan93/ad0cb4b62f27749d06ec83d267e7fb31"}, {"url": "https://github.com/marcosan93/Blackjack_Simulator/blob/master/blackjack.py", "anchor_text": "Blackjack without counting cards"}, {"url": "https://github.com/marcosan93/Blackjack_Simulator/blob/master/Playing_Blackjack_w_Counter.py", "anchor_text": "Blackjack with counting cards"}, {"url": "https://gist.github.com/marcosan93/550f4643980a0b696f2cf4bf5477f770", "anchor_text": "https://gist.github.com/marcosan93/550f4643980a0b696f2cf4bf5477f770"}, {"url": "https://gist.github.com/marcosan93/28f84b9ba591b78e95ee08fcb8a5e8d8", "anchor_text": "https://gist.github.com/marcosan93/28f84b9ba591b78e95ee08fcb8a5e8d8"}, {"url": "https://gist.github.com/marcosan93/7185c6549128fc329337d027f4a3e16c", "anchor_text": "https://gist.github.com/marcosan93/7185c6549128fc329337d027f4a3e16c"}, {"url": "https://twitter.com/_Marco_Santos_", "anchor_text": "Follow me on Twitter: @_Marco_Santos_"}, {"url": "https://github.com/marcosan93/Blackjack_Simulator", "anchor_text": "marcosan93/Blackjack_SimulatorYou can't perform that action at this time. You signed in with another tab or window. You signed out in another tab or\u2026github.com"}, {"url": "https://towardsdatascience.com/questions-96667b06af5", "anchor_text": "rules and guidelines"}, {"url": "https://towardsdatascience.com/readers-terms-b5d780a700a4", "anchor_text": "Reader Terms"}, {"url": "https://medium.com/tag/gambling?source=post_page-----71b5e3701638---------------gambling-----------------", "anchor_text": "Gambling"}, {"url": "https://medium.com/tag/python?source=post_page-----71b5e3701638---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/programming?source=post_page-----71b5e3701638---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/tag/blackjack?source=post_page-----71b5e3701638---------------blackjack-----------------", "anchor_text": "Blackjack"}, {"url": "https://medium.com/tag/towards-data-science?source=post_page-----71b5e3701638---------------towards_data_science-----------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F71b5e3701638&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbeating-the-dealer-with-simple-statistics-71b5e3701638&user=Marco+Santos&userId=e06d69ac26aa&source=-----71b5e3701638---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F71b5e3701638&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbeating-the-dealer-with-simple-statistics-71b5e3701638&user=Marco+Santos&userId=e06d69ac26aa&source=-----71b5e3701638---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F71b5e3701638&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbeating-the-dealer-with-simple-statistics-71b5e3701638&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----71b5e3701638--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F71b5e3701638&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbeating-the-dealer-with-simple-statistics-71b5e3701638&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----71b5e3701638---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----71b5e3701638--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----71b5e3701638--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----71b5e3701638--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----71b5e3701638--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----71b5e3701638--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----71b5e3701638--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----71b5e3701638--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----71b5e3701638--------------------------------", "anchor_text": ""}, {"url": "https://marco-santos.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://marco-santos.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Marco Santos"}, {"url": "https://marco-santos.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "2.3K Followers"}, {"url": "http://linkedin.com/in/marco-s-santos", "anchor_text": "linkedin.com/in/marco-s-santos"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fe06d69ac26aa&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbeating-the-dealer-with-simple-statistics-71b5e3701638&user=Marco+Santos&userId=e06d69ac26aa&source=post_page-e06d69ac26aa--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fc323f276f5e0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbeating-the-dealer-with-simple-statistics-71b5e3701638&newsletterV3=e06d69ac26aa&newsletterV3Id=c323f276f5e0&user=Marco+Santos&userId=e06d69ac26aa&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}