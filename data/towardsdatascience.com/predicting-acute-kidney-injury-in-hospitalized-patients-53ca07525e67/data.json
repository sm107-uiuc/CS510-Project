{"url": "https://towardsdatascience.com/predicting-acute-kidney-injury-in-hospitalized-patients-53ca07525e67", "time": 1683009977.1161962, "path": "towardsdatascience.com/predicting-acute-kidney-injury-in-hospitalized-patients-53ca07525e67/", "webpage": {"metadata": {"title": "Using ML to Predict Acute Kidney Injury | Towards Data Science", "h1": "Predicting Acute Kidney Injury in Hospitalized Patients Using Machine Learning", "description": "Predicting acute kidney injury in hospitalized patients by forecasting creatinine values with the machine learning algorithm: XGBoost."}, "outgoing_paragraph_urls": [{"url": "https://www.kidney.org/atoz/content/AcuteKidneyInjury", "anchor_text": "\u201c\u2026is a sudden episode of kidney failure or kidney damage that happens within a few hours or a few days.\u201d", "paragraph_index": 2}, {"url": "https://kdigo.org/wp-content/uploads/2016/10/KDIGO-2012-AKI-Guideline-English.pdf", "anchor_text": "KDIGO criteria", "paragraph_index": 3}, {"url": "https://mimic.physionet.org/gettingstarted/access/", "anchor_text": "Physionet website", "paragraph_index": 9}, {"url": "https://doi.org/10.5281/zenodo.821872", "anchor_text": "Physionet\u2019s instruction", "paragraph_index": 10}, {"url": "https://mimic.physionet.org/mimictables/admissions/", "anchor_text": "ADMISSIONS", "paragraph_index": 10}, {"url": "https://mimic.physionet.org/mimictables/chartevents/", "anchor_text": "CHARTEVENTS", "paragraph_index": 10}, {"url": "https://mimic.physionet.org/mimictables/d_items/", "anchor_text": "D_ITEMS", "paragraph_index": 10}, {"url": "https://mimic.physionet.org/mimictables/d_labitems/", "anchor_text": "D_LABITEMS", "paragraph_index": 10}, {"url": "https://mimic.physionet.org/mimictables/inputevents_mv/", "anchor_text": "INPUTEVENTS_MV", "paragraph_index": 10}, {"url": "https://mimic.physionet.org/mimictables/labevents/", "anchor_text": "LABEVENTS", "paragraph_index": 10}, {"url": "https://mimic.physionet.org/mimictables/patients/", "anchor_text": "PATIENTS", "paragraph_index": 10}, {"url": "https://xgboost.ai/", "anchor_text": "XGBoost", "paragraph_index": 19}, {"url": "https://tqchen.com/", "anchor_text": "Tianqi Chen", "paragraph_index": 19}, {"url": "https://homes.cs.washington.edu/~guestrin/", "anchor_text": "Carlos Guestrin", "paragraph_index": 19}, {"url": "https://arxiv.org/pdf/1603.02754.pdf", "anchor_text": "here", "paragraph_index": 19}, {"url": "https://stats.stackexchange.com/questions/202858/xgboost-loss-function-approximation-with-taylor-expansion", "anchor_text": "this post", "paragraph_index": 19}, {"url": "https://vic-cheung.github.io/", "anchor_text": "https://vic-cheung.github.io/", "paragraph_index": 25}], "all_paragraphs": ["Kidneys are vital organs in your body that filter your blood. They are responsible for removing wastes, maintaining and controlling the body\u2019s fluid balance, keeping the right levels of electrolytes etc.", "Sick and hospitalized patients are at high risk of developing kidney injury.", "\u201c\u2026is a sudden episode of kidney failure or kidney damage that happens within a few hours or a few days.\u201d", "AKI is more precisely defined by the KDIGO criteria released in 2012.", "In brief, when kidneys are injured, the following issues arise:", "Doctors measure creatinine, a biomarker produced by the muscles and filtered from the body by the kidneys into urine. Its concentration in your blood can serve as a proxy for kidney health/function. If your kidneys\u2019 ability to filter your blood worsens because of injury, then the creatinine values will go up.", "However, by the time creatinine is rising, the damage to the kidneys has already been done. It would be ideal to be able to predict impending damage to the kidneys before it occurs.", "Since organ systems in the body are interdependent, I reasoned that creatinine values (a proxy for kidney health) are likely dependent on the health of other organs like the heart and liver. The \u201chealth status\u201d of these other organs can be measured through different lab tests specific to those organ systems.", "I developed a predictive clinical calculator using a variety of lab tests and patient demographics as my input features in order to predict the creatinine value for the next day. A worsening creatinine prediction would indicate impending Acute Kidney Injury (AKI) within 24 hours.", "To make this calculator, I used a freely-accessible medical database of de-identified patients called MIMIC-III. Information on accessing the database can be found on the Physionet website.", "After obtaining access to the MIMIC-III database, I transferred the data into a local instance of PostgreSQL per Physionet\u2019s instruction. There are 25 tables provided in the database, of which I queried ADMISSIONS, CHARTEVENTS, D_ITEMS, D_LABITEMS, INPUTEVENTS_MV, LABEVENTS, PATIENTS for my particular project. I consulted with a physician to determine the lab tests I should be including as features in my model \u2014 I ended up with 78 features.", "Clinical health data from a real-life electronic health record used in hospitals is messy. To work with the data, I first SQL joined the necessary tables (the ones listed above) using HADM_ID, ITEMID, SUBJECT_ID.", "Patients under a single SUBJECT_ID can have multiple admissions to the hospital at different time points in which each new admission is listed under HADM_ID. For the purpose of this project, I treated each HADM_ID as a unique event and did not group them together under SUBJECT_ID (though if I had the time, I would do this to account for historical health data \u2014 which would likely improve my model).", "Utilizing the PANDAS DataFrame, I pivoted the tables into a format such that lab values were indexed by the date and time in which they were obtained in YYYY-MM-DD HH:MM:SS format. The reason for doing this is that many patients have multiple labs performed in a single day but at many different time points throughout the day. This would prove to be useful in my data processing pipeline explained later.", "Information such as age needed to be calculated by subtracting the hospital admit time and the charted date of birth. I then integer-encoded categorical variables such as gender and ethnicity. I also had to normalize lab values and their corresponding unit types since they existed as a mixed-type in the dataset.", "Health data is quite sparse and so I interpolated any missing lab values within each patient.", "Labs from each hospital admission can be conceptually \u201cplotted\u201d on a timeline. I took all labs within each 24-hour time window from this timeline as input features and used the creatinine from the next 24-hours as the output \u201ctarget\u201d, which I will try to predict.", "The result is an input matrix X where each row represents 1 day and each column is one of 78 labs I am using as features. The target vector Y contains the creatinine for the following day. Missing features were assigned to a value of NaN.", "I initially did some exploratory data analysis using linear regression. Though linear regression seemed to do a decent job at predicting next-day values, creatinine trends seen in AKI are typically not linear.", "I decided to use XGBoost (eXtreme Gradient Boosting) for its compute speed, accuracy, and scalability. XGBoost is an application of gradient boosted trees by Tianqi Chen and Carlos Guestrin \u2014 you can read more about it in detail here. In short, it combines the concepts gradient boosting, which iteratively builds upon the previous predictor\u2019s pseudo-residuals, and decision trees. It\u2019s accuracy comes from utilizing second order derivatives in it\u2019s log loss metric and having built-in regularization parameters. I found the answer to this post to be helpful in explaining some aspects of XGBoost.", "Since XGBoost cannot process missing data, I filled all the NaN with the median values of each lab test and consulted a physician to verify that this was a reasonable clinical assumption for model development.", "I split my dataset into train, validate, and test sets in an 80/10/10 split.", "XGBoost proved to be incredible in taking high-dimensional lab data and extrapolating relationships from it. Below is a visualization of my final model\u2019s performance and the accompanying hyperparameters.", "In summary, I\u2019ve built a model using XGBoost to predict next-day creatinine values. I hope models like this might one day be integrated into an electronic health record (EHR) to predict future creatinine (and AKI risk) on the fly. This would provide real-time clinical decision support to physicians so they can get ahead of the problem of kidney injury rather than treating it.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "PhD in Genetics. Interested in all things health data science/computational biology/bioinformatics. https://vic-cheung.github.io/"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F53ca07525e67&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpredicting-acute-kidney-injury-in-hospitalized-patients-53ca07525e67&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpredicting-acute-kidney-injury-in-hospitalized-patients-53ca07525e67&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpredicting-acute-kidney-injury-in-hospitalized-patients-53ca07525e67&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpredicting-acute-kidney-injury-in-hospitalized-patients-53ca07525e67&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----53ca07525e67--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----53ca07525e67--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@victoriakcheung?source=post_page-----53ca07525e67--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@victoriakcheung?source=post_page-----53ca07525e67--------------------------------", "anchor_text": "Victoria Cheung"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F7837b8f2a3f5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpredicting-acute-kidney-injury-in-hospitalized-patients-53ca07525e67&user=Victoria+Cheung&userId=7837b8f2a3f5&source=post_page-7837b8f2a3f5----53ca07525e67---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F53ca07525e67&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpredicting-acute-kidney-injury-in-hospitalized-patients-53ca07525e67&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F53ca07525e67&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpredicting-acute-kidney-injury-in-hospitalized-patients-53ca07525e67&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/photos/-szKjHyPq28", "anchor_text": "source"}, {"url": "https://www.kidney.org/atoz/content/AcuteKidneyInjury", "anchor_text": "\u201c\u2026is a sudden episode of kidney failure or kidney damage that happens within a few hours or a few days.\u201d"}, {"url": "https://kdigo.org/wp-content/uploads/2016/10/KDIGO-2012-AKI-Guideline-English.pdf", "anchor_text": "KDIGO criteria"}, {"url": "https://mimic.physionet.org/gettingstarted/access/", "anchor_text": "Physionet website"}, {"url": "https://mimic.physionet.org/gettingstarted/overview/", "anchor_text": "Overview page"}, {"url": "https://doi.org/10.5281/zenodo.821872", "anchor_text": "Physionet\u2019s instruction"}, {"url": "https://mimic.physionet.org/mimictables/admissions/", "anchor_text": "ADMISSIONS"}, {"url": "https://mimic.physionet.org/mimictables/chartevents/", "anchor_text": "CHARTEVENTS"}, {"url": "https://mimic.physionet.org/mimictables/d_items/", "anchor_text": "D_ITEMS"}, {"url": "https://mimic.physionet.org/mimictables/d_labitems/", "anchor_text": "D_LABITEMS"}, {"url": "https://mimic.physionet.org/mimictables/inputevents_mv/", "anchor_text": "INPUTEVENTS_MV"}, {"url": "https://mimic.physionet.org/mimictables/labevents/", "anchor_text": "LABEVENTS"}, {"url": "https://mimic.physionet.org/mimictables/patients/", "anchor_text": "PATIENTS"}, {"url": "https://xgboost.ai/", "anchor_text": "XGBoost"}, {"url": "https://tqchen.com/", "anchor_text": "Tianqi Chen"}, {"url": "https://homes.cs.washington.edu/~guestrin/", "anchor_text": "Carlos Guestrin"}, {"url": "https://arxiv.org/pdf/1603.02754.pdf", "anchor_text": "here"}, {"url": "https://stats.stackexchange.com/questions/202858/xgboost-loss-function-approximation-with-taylor-expansion", "anchor_text": "this post"}, {"url": "http://www.nature.com/articles/sdata201635", "anchor_text": "http://www.nature.com/articles/sdata201635"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----53ca07525e67---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/tag/data-science?source=post_page-----53ca07525e67---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/healthcare?source=post_page-----53ca07525e67---------------healthcare-----------------", "anchor_text": "Healthcare"}, {"url": "https://medium.com/tag/python?source=post_page-----53ca07525e67---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/xgboost?source=post_page-----53ca07525e67---------------xgboost-----------------", "anchor_text": "Xgboost"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F53ca07525e67&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpredicting-acute-kidney-injury-in-hospitalized-patients-53ca07525e67&user=Victoria+Cheung&userId=7837b8f2a3f5&source=-----53ca07525e67---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F53ca07525e67&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpredicting-acute-kidney-injury-in-hospitalized-patients-53ca07525e67&user=Victoria+Cheung&userId=7837b8f2a3f5&source=-----53ca07525e67---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F53ca07525e67&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpredicting-acute-kidney-injury-in-hospitalized-patients-53ca07525e67&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----53ca07525e67--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F53ca07525e67&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpredicting-acute-kidney-injury-in-hospitalized-patients-53ca07525e67&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----53ca07525e67---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----53ca07525e67--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----53ca07525e67--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----53ca07525e67--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----53ca07525e67--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----53ca07525e67--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----53ca07525e67--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----53ca07525e67--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----53ca07525e67--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@victoriakcheung?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@victoriakcheung?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Victoria Cheung"}, {"url": "https://medium.com/@victoriakcheung/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "15 Followers"}, {"url": "https://vic-cheung.github.io/", "anchor_text": "https://vic-cheung.github.io/"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F7837b8f2a3f5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpredicting-acute-kidney-injury-in-hospitalized-patients-53ca07525e67&user=Victoria+Cheung&userId=7837b8f2a3f5&source=post_page-7837b8f2a3f5--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F36b915203252&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpredicting-acute-kidney-injury-in-hospitalized-patients-53ca07525e67&newsletterV3=7837b8f2a3f5&newsletterV3Id=36b915203252&user=Victoria+Cheung&userId=7837b8f2a3f5&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}