{"url": "https://towardsdatascience.com/how-to-explain-and-affect-individual-decisions-with-ice-curves-1-2-f39fd751546f", "time": 1683010971.0484228, "path": "towardsdatascience.com/how-to-explain-and-affect-individual-decisions-with-ice-curves-1-2-f39fd751546f/", "webpage": {"metadata": {"title": "Model-Agnostic Local Explanations using Individual Conditional Expectation (ICE) Plots | by Wai On | Towards Data Science", "h1": "Model-Agnostic Local Explanations using Individual Conditional Expectation (ICE) Plots", "description": "In other words, the explanation you want is one that is specific to you. In particular, you would want to be educated about how your situation contributed to the outcome, and if possible, do\u2026"}, "outgoing_paragraph_urls": [{"url": "https://github.com/slundberg/shap", "anchor_text": "SHAP", "paragraph_index": 2}, {"url": "https://github.com/marcotcr/lime", "anchor_text": "LIME", "paragraph_index": 2}, {"url": "https://towardsdatascience.com/visualizing-ai-8fad4ea70b87", "anchor_text": "SHAP Summary Plot", "paragraph_index": 2}, {"url": "https://medium.com/@waion/how-to-explain-and-affect-individual-decisions-with-ice-curves-2-2-f36036fac1ca", "anchor_text": "part 2", "paragraph_index": 4}, {"url": "https://scikit-learn.org/stable/modules/generated/sklearn.datasets.load_boston.html", "anchor_text": "Boston House Price dataset", "paragraph_index": 8}, {"url": "https://scikit-learn.org/stable/auto_examples/inspection/plot_partial_dependence.html", "anchor_text": "scikit-learn PDP function", "paragraph_index": 8}, {"url": "https://github.com/AustinRochford/PyCEbox", "anchor_text": "Python", "paragraph_index": 12}, {"url": "https://github.com/kapelner/ICEbox", "anchor_text": "R", "paragraph_index": 12}, {"url": "https://github.com/AustinRochford/PyCEbox/blob/master/notebooks/PyCEBox%20Tutorial.ipynb", "anchor_text": "accessing ICE DataFrame", "paragraph_index": 14}, {"url": "https://arxiv.org/abs/1905.03151", "anchor_text": "remedial approaches", "paragraph_index": 21}, {"url": "https://www.kaggle.com/reisel/how-to-handle-correlated-features", "anchor_text": "how to deal with correlations", "paragraph_index": 21}, {"url": "https://arxiv.org/abs/1706.07269", "anchor_text": "Research from Social Science", "paragraph_index": 23}, {"url": "https://towardsdatascience.com/how-to-explain-and-affect-individual-decisions-with-ice-curves-2-2-f36036fac1ca", "anchor_text": "part 2", "paragraph_index": 28}], "all_paragraphs": ["If your loan application is declined, you would probably want to know two things:", "In other words, the explanation you want is one that is specific to you. In particular, you would want to be educated about how your situation contributed to the outcome, and if possible, do something about it. For example, if your chance of getting a loan greatly increases once you have lived in your current address for over a year, then you can confidently apply again in the future!", "This need for an explanation that is meaningful to the individual, or \u201clocal explanation\u201d as it\u2019s known, is applicable whether the decision is made by a human or by a Machine Learning algorithm. In the field of Interpretable Machine Learning, there are a number of well-known techniques for explaining individual decisions (e.g., SHAP and LIME). These techniques not only provide innovative ideas for teasing out the reasons behind individual predictions for \u201cblack box\u201d Machine Learning models, they also help us understand the results by visualizing them in interesting ways (e.g., see my article on the SHAP Summary Plot).", "A popular visualization technique that is not typically associated with local explanations that I think can contribute in this context is the Individual Conditional Expectation\u00b9 (ICE) plot. Traditionally, ICE plots are primarily seen as visualizations for supporting global interpretation; that is, explaining what the model is doing at the population level. However, with some simple modifications in the way they are visualized, I think they can also be valuable at a local explanation level. The advantage of using ICE plots is that it is a simple and easy technique to understand. It also provides an abundance of information that the viewer can use to understand what is going on at the local level and to simulate what may happen if things change.", "The goal of this article is to examine how ICE plots can help explain individual decisions and to help illustrate what is needed to affect them. I will first describe the ICE plot in detail (part 1) before using a modified version of it to explore its utility using a couple of examples (part 2).", "This article is intended for anyone with a basic understanding of statistics and Machine Learning (ML), and is interested in how visualizations can help explain and affect individual ML decisions.", "An ICE plot is an extension of a Partial Dependence Plot\u00b2 (PDP). PDPs visualize how changes in the value of a feature impact the prediction of a ML model. It does this by plotting the average predicted outcomes for different values of a feature you are interested in whilst holding the values of other feature values constant. This is useful because we can then see the relationship between the prediction and the features we are interested in (typically one or two at a time).", "For example, we can answer questions such as:", "The figure shown here is an example of a PDP showing the \u201cRM\u201d (average number of rooms per dwelling) feature from the popular Boston House Price dataset. The x-axis is the average number of bedrooms and the y-axis is the median value in $1000s. The plot is created using the scikit-learn PDP function.", "PDPs are simple and easy to understand. However, their simplicity hides potentially interesting relationships between individual instances. For example, if the feature values of a subset of instances trend positive but another subset trend negative, then the averaging process may cancel them out.", "ICE plots solve this problem. An ICE plot unpacks the curve that is the result of the aggregation process in PDP. Instead of averaging out the prediction, each ICE curve shows the predictions of varying the feature value for an instance. When they are presented together in a single plot, we can see the relationships between subsets of the instances as well as differences in how individual instances behave.", "As shown in the figure below, although the majority of the instances follows the shape of the curve in the PDP shown earlier, there is a small subset at the top of the plot that behaves contrary to the PDP curve; instead of increasing between 6\u20137 on the x-axis, they actually decrease.", "Creating an ICE plot is straightforward. There are a number of packages available (e.g., in Python and R). Of course, it is also possible to create your own.", "ICE plots are traditionally used to understand interactions and differences in data subsets as part of a Partial Dependence (PD) analysis. However, as mentioned earlier, since an ICE plot depict individual observations, there is a potential to use it to focus on a particular instance you are interested in.", "In order to visualize an instance, we need to figure out how to calculate the values of the curve (or be able to locate the instance in a tool that creates ICE plots. E.g., see this tutorial on accessing ICE DataFrame in PyCEbox). Here is a simple example to illustrate the steps for calculating the values of an ICE curve:", "1. Find the instance and the feature you are interested in.", "2. Find the unique values of the feature.", "3. For each of these values, create an instance with the other feature values. In other words, fix the other feature values and permute over the value of the feature of interest.", "4. Make a prediction for each of the combinations.", "5. Take the predicted values for each instance and plot the curve for the predictions.", "A potential problem that needs to be dealt with when using ICE plots (and PDPs) is high correlations between features. This can be problematic in a number of ways:", "A number of researchers have pointed out these issues in detail and have suggested various remedial approaches. In practice, there are some simple approaches to deal with highly correlated variables (e.g. aggregation, step-wise elimination). See the following article for detailed examples on how to deal with correlations.", "For the purpose of explaining and affecting a prediction, there are a number of different ways to visualize an individual instance. Two main approaches are:", "Research from Social Science suggests that people often look for explanations that are contrastive and contextual. So the approach of highlighting the instance of interest in context seems to be of potential benefit and worth exploring further.", "However, most ICE plot tools available show all the instances indiscriminately. If we want to focus on a particular individual instance, we need to make some changes. Two changes in particular are important in this regard:", "The modified ICE plot below shows an instance of interest in the context of a regular ICE/PD plot from the above example.", "A few things to note about this ICE plot:", "By highlighting the instance of interest in the context of an ICE plot, we can see the effects of varying the values of a particular feature on the instance of interest in context of other instances in the dataset. However, it is important to note that this is a simple example for the purpose of illustrating a concept. It remains to be seen if the design decisions made here would cause unmanageable complexity in the interpretation of feature influences on individual decisions.", "In part 2, we will use a couple of more realistic examples to illustrate the prior discussion and to further explore the utility of ICE curves in providing local explanations for a black box ML model.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "AI Researcher, UI Designer, Psychologist, User Researcher, Plastics Climber, and follower of the Bourdain trail."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Ff39fd751546f&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-explain-and-affect-individual-decisions-with-ice-curves-1-2-f39fd751546f&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-explain-and-affect-individual-decisions-with-ice-curves-1-2-f39fd751546f&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-explain-and-affect-individual-decisions-with-ice-curves-1-2-f39fd751546f&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-explain-and-affect-individual-decisions-with-ice-curves-1-2-f39fd751546f&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----f39fd751546f--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----f39fd751546f--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@waion?source=post_page-----f39fd751546f--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@waion?source=post_page-----f39fd751546f--------------------------------", "anchor_text": "Wai On"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fffc520ef72ba&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-explain-and-affect-individual-decisions-with-ice-curves-1-2-f39fd751546f&user=Wai+On&userId=ffc520ef72ba&source=post_page-ffc520ef72ba----f39fd751546f---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ff39fd751546f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-explain-and-affect-individual-decisions-with-ice-curves-1-2-f39fd751546f&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ff39fd751546f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-explain-and-affect-individual-decisions-with-ice-curves-1-2-f39fd751546f&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://www.pexels.com/@karolina-grabowska?utm_content=attributionCopyText&utm_medium=referral&utm_source=pexels", "anchor_text": "Karolina Grabowska"}, {"url": "https://www.pexels.com/photo/tibetan-sculpture-on-heap-of-american-dollars-on-white-background-4386177/?utm_content=attributionCopyText&utm_medium=referral&utm_source=pexels", "anchor_text": "Pexels"}, {"url": "https://github.com/slundberg/shap", "anchor_text": "SHAP"}, {"url": "https://github.com/marcotcr/lime", "anchor_text": "LIME"}, {"url": "https://towardsdatascience.com/visualizing-ai-8fad4ea70b87", "anchor_text": "SHAP Summary Plot"}, {"url": "https://medium.com/@waion/how-to-explain-and-affect-individual-decisions-with-ice-curves-2-2-f36036fac1ca", "anchor_text": "part 2"}, {"url": "https://scikit-learn.org/stable/modules/generated/sklearn.datasets.load_boston.html", "anchor_text": "Boston House Price dataset"}, {"url": "https://scikit-learn.org/stable/auto_examples/inspection/plot_partial_dependence.html", "anchor_text": "scikit-learn PDP function"}, {"url": "https://github.com/AustinRochford/PyCEbox", "anchor_text": "Python"}, {"url": "https://github.com/kapelner/ICEbox", "anchor_text": "R"}, {"url": "https://github.com/AustinRochford/PyCEbox/blob/master/notebooks/PyCEBox%20Tutorial.ipynb", "anchor_text": "accessing ICE DataFrame"}, {"url": "https://arxiv.org/abs/1905.03151", "anchor_text": "remedial approaches"}, {"url": "https://www.kaggle.com/reisel/how-to-handle-correlated-features", "anchor_text": "how to deal with correlations"}, {"url": "https://arxiv.org/abs/1706.07269", "anchor_text": "Research from Social Science"}, {"url": "https://towardsdatascience.com/how-to-explain-and-affect-individual-decisions-with-ice-curves-2-2-f36036fac1ca", "anchor_text": "part 2"}, {"url": "https://arxiv.org/abs/1309.6392", "anchor_text": "arXiv:1309.6392"}, {"url": "https://www.jstor.org/stable/2699986?seq=1", "anchor_text": "The Annals of Statistics"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----f39fd751546f---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/tag/visualization?source=post_page-----f39fd751546f---------------visualization-----------------", "anchor_text": "Visualization"}, {"url": "https://medium.com/tag/explainable-ai?source=post_page-----f39fd751546f---------------explainable_ai-----------------", "anchor_text": "Explainable Ai"}, {"url": "https://medium.com/tag/interpretable-ai?source=post_page-----f39fd751546f---------------interpretable_ai-----------------", "anchor_text": "Interpretable Ai"}, {"url": "https://medium.com/tag/data-visualization?source=post_page-----f39fd751546f---------------data_visualization-----------------", "anchor_text": "Data Visualization"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Ff39fd751546f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-explain-and-affect-individual-decisions-with-ice-curves-1-2-f39fd751546f&user=Wai+On&userId=ffc520ef72ba&source=-----f39fd751546f---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Ff39fd751546f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-explain-and-affect-individual-decisions-with-ice-curves-1-2-f39fd751546f&user=Wai+On&userId=ffc520ef72ba&source=-----f39fd751546f---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ff39fd751546f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-explain-and-affect-individual-decisions-with-ice-curves-1-2-f39fd751546f&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----f39fd751546f--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Ff39fd751546f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-explain-and-affect-individual-decisions-with-ice-curves-1-2-f39fd751546f&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----f39fd751546f---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----f39fd751546f--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----f39fd751546f--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----f39fd751546f--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----f39fd751546f--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----f39fd751546f--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----f39fd751546f--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----f39fd751546f--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----f39fd751546f--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@waion?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@waion?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Wai On"}, {"url": "https://medium.com/@waion/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "36 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fffc520ef72ba&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-explain-and-affect-individual-decisions-with-ice-curves-1-2-f39fd751546f&user=Wai+On&userId=ffc520ef72ba&source=post_page-ffc520ef72ba--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F142465632daa&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-explain-and-affect-individual-decisions-with-ice-curves-1-2-f39fd751546f&newsletterV3=ffc520ef72ba&newsletterV3Id=142465632daa&user=Wai+On&userId=ffc520ef72ba&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}