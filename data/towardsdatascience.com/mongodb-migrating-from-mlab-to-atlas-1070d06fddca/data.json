{"url": "https://towardsdatascience.com/mongodb-migrating-from-mlab-to-atlas-1070d06fddca", "time": 1683016425.268864, "path": "towardsdatascience.com/mongodb-migrating-from-mlab-to-atlas-1070d06fddca/", "webpage": {"metadata": {"title": "MongoDB: Migrating from mLab to Atlas | by Edward Krueger | Towards Data Science", "h1": "MongoDB: Migrating from mLab to Atlas", "description": "In a previous article, we discussed how to detach a mLab database from a Heroku deployment. We did this to buy us some time to develop a more permanent solution for our MongoDB app. Check out that\u2026"}, "outgoing_paragraph_urls": [{"url": "https://www.linkedin.com/in/edkrueger/", "anchor_text": "Edward Krueger", "paragraph_index": 0}, {"url": "https://www.linkedin.com/in/douglas-franklin-1a3a2aa3/", "anchor_text": "Douglas Franklin", "paragraph_index": 0}, {"url": "https://docs.mongodb.com/manual/installation/", "anchor_text": "Mongo\u2019s installation instructions", "paragraph_index": 9}], "all_paragraphs": ["By: Edward Krueger and Douglas Franklin.", "In a previous article, we discussed how to detach a mLab database from a Heroku deployment. We did this to buy us some time to develop a more permanent solution for our MongoDB app. Check out that work below! Hopefully, you've detached by now. If you missed the deadline, mongo says you can still do a password reset. However, we have had no luck with this as the link is broken.", "MongoDB bought mLab in 2018 and has decided to end the service on Nov 10th, 2020. This is an effort to get users to migrate databases to MongoDB Atlas, which we will cover here.", "Mongo provided a guide in the email they sent us; however, we will not follow it in this article. Our methods here will give you more options for migration down the line.", "We are going to use Google Cloud shell to migrate a database from mLab to Atlas. To get started in this guide, we will need a free GCP account. Using cloud shell will be easier than doing the process locally but is not necessary.", "Before we begin, we will need access to MongoDB Altas.", "Now we have an AtlasDB instance ready to go.", "Now we will use Google Cloud shell to set up a mongo client and some mongo tools we will need for our migration. You may need to set up a free account with them if you haven't already.", "We have written a shell script to get the tools for you! Note that these are versioned for Debian 10. This shell script will be nice to reuse when we need to use mongo shell as it adds the files to a location that does not persist.", "This will work on Debian 9 and 10. If you are running another version of Linux, you can find more info in Mongo\u2019s installation instructions.", "This download gets mongo client, mongodump, and mongorestore as well as some other files we don't care about as much.", "We will save our connection strings as environmental variables to make our life a little easier.", "Now we need to add a user to our Altas cloud database to connect to it.", "Next, we need to allow connections to the Atlas Database.", "Keep in mind the security risk here and only add IPs you trust if working with sensitive data.", "Now that we can connect, let's get our connection string from Atlas and save it as an environmental variable.", "Now that we can connect to both databases from our Cloud Shell and have our connection strings as environmental variables, we are ready for the migration. We will use the tools acquired in our shell script to make this process easy!", "Now that we have loaded our new database let's verify that we have done it properly.", "If you see your data, you're done with the migration! Now to get our app running.", "We had to add dnspython to our requirements for the app to connect properly. This is to accommodate the new mongo srv protocol that you can see in our connection string.", "We did this by committing a new Pipfile that had this dependency to Github and then running pipenv install dnspythonto ensure it is in the Pipfile.lock. If you are using requirements.txt, simply add dnspython as a dependency.", "Check your build logs if anything goes wrong with the app! This is where we were alerted of the missing dependency, dnspython.", "This has been a guide to migrating data from mLab to Atlas to keep a Heroku app running.", "We made a Free account with MongoDB to use Atlas. Then configured a google cloud shell to run mongo shell and tools. Once we had our shell configured, we saved our old URI as $MLAB and our new URI as $ATLAS. After all this setup, we were able to use mongodump and mongorestore to easily load the Atlas DB with the data from our mLab DB.", "Once our data was successfully moved, we needed to redeploy our app. Before our app would run with the new connection string, we needed to instruct Heroku to install dnspython.", "We did this by adding the dependency to our Pipfile, running pipenv install, then rebuilding the app from the master branch on Heroku.", "That is how we kept our Heroku app running by migrating our data from mLab to Atlas. Our next guide will cover migrating a database from mLab to Azure Cosmos!", "We\u2019ve published the mLab to Cosmos Guide here!", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Data Scientist, Software Developer and Educator"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F1070d06fddca&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmongodb-migrating-from-mlab-to-atlas-1070d06fddca&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmongodb-migrating-from-mlab-to-atlas-1070d06fddca&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmongodb-migrating-from-mlab-to-atlas-1070d06fddca&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmongodb-migrating-from-mlab-to-atlas-1070d06fddca&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----1070d06fddca--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----1070d06fddca--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.edkruegerdata.com/?source=post_page-----1070d06fddca--------------------------------", "anchor_text": ""}, {"url": "https://medium.edkruegerdata.com/?source=post_page-----1070d06fddca--------------------------------", "anchor_text": "Edward Krueger"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F4889b755e348&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmongodb-migrating-from-mlab-to-atlas-1070d06fddca&user=Edward+Krueger&userId=4889b755e348&source=post_page-4889b755e348----1070d06fddca---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F1070d06fddca&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmongodb-migrating-from-mlab-to-atlas-1070d06fddca&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F1070d06fddca&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmongodb-migrating-from-mlab-to-atlas-1070d06fddca&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://www.linkedin.com/in/edkrueger/", "anchor_text": "Edward Krueger"}, {"url": "https://www.linkedin.com/in/douglas-franklin-1a3a2aa3/", "anchor_text": "Douglas Franklin"}, {"url": "https://towardsdatascience.com/keeping-your-mlab-mongodbs-detaching-from-heroku-173b5c97c715", "anchor_text": "Keeping your mLab MongoDBs: Detaching From HerokuA brief guide to detaching mLab from Heroku to save your data from being deleted on November 10th, 2020.towardsdatascience.com"}, {"url": "https://www.mongodb.com/cloud/atlas/mongodb-google-cloud", "anchor_text": "The Best Way to Run MongoDB on Google Cloud PlatformVadim Supitskiy, Chief Technology Officer at Forbes US: Iowa, Oregon, N. Virginia, South Carolina, Los Angeles, Salt\u2026www.mongodb.com"}, {"url": "https://cloud.google.com/shell", "anchor_text": "Cloud Shell | Google CloudManage your infrastructure and develop your applications from any browser. View documentation for this product. Cloud\u2026cloud.google.com"}, {"url": "https://docs.mongodb.com/manual/installation/", "anchor_text": "Mongo\u2019s installation instructions"}, {"url": "https://towardsdatascience.com/mongodb-migrating-from-mlab-to-azure-cosmos-db-88c508f72d24", "anchor_text": "MongoDB: Migrating from mLab to Azure Cosmos DBHow to migrate your mLab database to Azure Cosmos DB to keep your app running.towardsdatascience.com"}, {"url": "https://medium.com/tag/towards-data-science?source=post_page-----1070d06fddca---------------towards_data_science-----------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/tag/editors-pick?source=post_page-----1070d06fddca---------------editors_pick-----------------", "anchor_text": "Editors Pick"}, {"url": "https://medium.com/tag/mongodb?source=post_page-----1070d06fddca---------------mongodb-----------------", "anchor_text": "Mongodb"}, {"url": "https://medium.com/tag/heroku?source=post_page-----1070d06fddca---------------heroku-----------------", "anchor_text": "Heroku"}, {"url": "https://medium.com/tag/database?source=post_page-----1070d06fddca---------------database-----------------", "anchor_text": "Database"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F1070d06fddca&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmongodb-migrating-from-mlab-to-atlas-1070d06fddca&user=Edward+Krueger&userId=4889b755e348&source=-----1070d06fddca---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F1070d06fddca&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmongodb-migrating-from-mlab-to-atlas-1070d06fddca&user=Edward+Krueger&userId=4889b755e348&source=-----1070d06fddca---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F1070d06fddca&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmongodb-migrating-from-mlab-to-atlas-1070d06fddca&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----1070d06fddca--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F1070d06fddca&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmongodb-migrating-from-mlab-to-atlas-1070d06fddca&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----1070d06fddca---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----1070d06fddca--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----1070d06fddca--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----1070d06fddca--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----1070d06fddca--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----1070d06fddca--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----1070d06fddca--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----1070d06fddca--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----1070d06fddca--------------------------------", "anchor_text": ""}, {"url": "https://medium.edkruegerdata.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.edkruegerdata.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Edward Krueger"}, {"url": "https://medium.edkruegerdata.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "699 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F4889b755e348&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmongodb-migrating-from-mlab-to-atlas-1070d06fddca&user=Edward+Krueger&userId=4889b755e348&source=post_page-4889b755e348--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F1f629c0dbfb9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmongodb-migrating-from-mlab-to-atlas-1070d06fddca&newsletterV3=4889b755e348&newsletterV3Id=1f629c0dbfb9&user=Edward+Krueger&userId=4889b755e348&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}