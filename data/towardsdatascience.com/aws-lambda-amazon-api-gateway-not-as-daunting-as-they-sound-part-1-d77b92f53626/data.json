{"url": "https://towardsdatascience.com/aws-lambda-amazon-api-gateway-not-as-daunting-as-they-sound-part-1-d77b92f53626", "time": 1683007209.721529, "path": "towardsdatascience.com/aws-lambda-amazon-api-gateway-not-as-daunting-as-they-sound-part-1-d77b92f53626/", "webpage": {"metadata": {"title": "AWS Lambda & Amazon API Gateway \u2014 Not as daunting as they sound | by Shirish Gupta | Towards Data Science", "h1": "AWS Lambda & Amazon API Gateway \u2014 Not as daunting as they sound", "description": "\u201cAwesome. You have created a great machine learning algorithm. Am impressed by the accuracy and love the technique. How can we implement it in our system?\u201d \u2014 Is this something you have heard multiple\u2026"}, "outgoing_paragraph_urls": [{"url": "https://signin.aws.amazon.com/", "anchor_text": "https://signin.aws.amazon.com/", "paragraph_index": 4}, {"url": "https://github.com/bweigel", "anchor_text": "Benjamin Genz", "paragraph_index": 15}, {"url": "https://www.postman.com/downloads/", "anchor_text": "https://www.postman.com/downloads/", "paragraph_index": 57}], "all_paragraphs": ["\u201cAwesome. You have created a great machine learning algorithm. Am impressed by the accuracy and love the technique. How can we implement it in our system?\u201d \u2014 Is this something you have heard multiple times during a client or business meeting but never been able to truthfully answer it? Worry not, this is probably faced by 90% (to be conservative) of fellow data scientists. And AWS has many solutions for it. One of them being \u2014 AWS lambda function integrated with Amazon API gateway.", "AWS Lambda is an event-driven, serverless computing platform provided by Amazon as a part of Amazon Web Services. It is a computing service that runs code in response to events and automatically manages the computing resources required by that code. The concept of serverless computing refers to the idea that you don\u2019t need to maintain your own servers to run these functions. Which means you can just upload your codes (Python, Node.js, Go, .NET, Java, Ruby) and Lambda will manage other things like runtime, scaling, load balancing, etc.", "Amazon API Gateway is a fully managed service that makes it easy for developers to create, publish, maintain, monitor, and secure APIs at any scale. APIs act as the front door for applications to access data, business logic, or functionality from your backend services. Using API Gateway, we can create RESTful APIs and WebSocket APIs that enable real-time two-way communication applications. API Gateway supports containerized and serverless workloads, as well as web applications.", "Our plan of action for this blog", "For all those who don\u2019t have an AWS account, please go to  \u2192 Create a new account at \u201chttps://signin.aws.amazon.com/\u201d  \u2192 Remember to add billing details since some of the AWS features won\u2019t work without it. (Don\u2019t worry, AWS gives Free Tier & therefore you won\u2019t be charged unless you exceed that, which is a lot!)", "For more info on limits you can check the following: aws.amazon.com/free", "\u2192 Login to AWS console and search for Lambda in search bar", "\u2192 On the Lambda landing page, there are multiple objects such as Functions, Layers, etc.  \u2192 Click on Create Function", "Assign Function Name, Runtime and Execution Role such as: \u2192 Function name: MLFunction  \u2192 Runtime: Python 3.7  \u2192 Execution Role: Create a new role with basic Lambda permissions", "The code (here: python) that runs on AWS Lambda is uploaded as a Lambda function. It can include libraries, even native ones.", "It has two arguments \u2014 event & context.", "Let\u2019s create a code which does the following:\u2192 Input: Image file(.jpg, .png, etc)\u2192 OpenCV: Read the image\u2192 Tesseract: Perform OCR on the image & print out the text", "Although we have created the lambda function, it won\u2019t execute or run right away. The reason is that we haven\u2019t downloaded or installed the necessary libraries(dependencies) required for the code to run. Like in a normal environment, we need to pip or conda install the libraries, we will need to do the same thing for AWS lambda. We do that by adding layers to our AWS lambda. It is defined as:", "A ZIP archive that contains libraries, a custom runtime, or other dependencies. With layers, you can use libraries in your function without needing to include them in your deployment package.", "If any of us have used tesseract earlier, we know how difficult it is to install this library.", "Benjamin Genz has done a great job in easing the whole process.", "\u2192 Go to you terminal and clone the repo", "Important: 1. Will use docker to install all the libraries so make sure you have it downloaded2. Don\u2019t go through Docker files in detail but make the necessary changes", "This will download tesseract layer for the function", "\u2192 build_py37_pkgs.sh contains the list of additional libraries that need to be installed. Remove \u201cPillow\u201d since we don\u2019t need it.", "\u2192 Go to command & run", "Will take sometime and you will see all the relevant libraries have been downloaded in a zip file.", "\u2192 Go back to AWS lambda console and click on Create Layer", "\u2192 Add Name, Compatible runtime & Upload the zip file", "\u2192 Voila, you have successfully added the pytesseract layer", "\u2192 Repeat the same process to upload OpenCV & Tesseract library via the zip file.", "One last thing before we can start using the uploaded dependencies.", "\u2192 Go back to your MLFuntion and click on Layers", "\u2192 Add pytesseract as the compatible layer", "\u2192 Repeat the same process to add OpenCV & Tesseract as the other layer for this function. Finally you should see both the layers that are to be added to the MLFunction", "Now that we had added the layers, we just need to make sure that these libraries can be read by MLFunction.", "\u2192 Add the following path so that the uploaded layers can be accessed by lambda function", "You may want to add the timeout session since the images might take some time to load and get processed using tesseract", "\u2192 Go to Basic Settings and timeout to 1min", "\u2192 Create a new Event add the following", "This is the base64 encoded version for the following image:", "Tip: Lambda function converts all images(events) to base64. So make sure to decode them before you use them further in your code", "\u2192 Hit Test and you should see the following:", "Not only have you successfully created a new lambda function, but also tested it. Pat your back!", "\u2192 Login to AWS console and search for API in search bar", "\u2192 Choose Rest API (not Private)", "\u2192 Give a name to your API. (Here: OCR API)", "Now you are in your API console. We need to perform couple of actions to configure our App.", "We need to create a POST method so that user can upload an image and pass it through our lambda function.", "\u2192 Go to Resource \u2192 Actions \u2192 Create Method \u2192 Choose POST", "\u2192 Select Use Lambda Proxy integration & choose the lambda function (here: MLFunction) & hit save", "Click Ok to Add Permission to Lambda Function", "\u2192 Make the following changes under HTTP Status:", "NOTE: This means that the API should send lambda function content in the form of image. This is a very important step and unless we make this change, the API will not be able to understand what type of file needs to be flowed to the lambda function. \u2014 In case of other type like HTML or XML, we should change the Response Body to application/html or application/xml", "One more change and then we are good to go.", "We would like the user to upload the file and for that we need enable the Binary option.", "\u2192 Go to Settings under API section", "Add */*in the Binary Media Types & hit on Save Changes. (This means that the user can upload any type of file \u2014 Although it will send to lambda function according to the content-type we defined earlier)", "You are all set to deploy & test your API.", "\u2192 Go to Resources \u2192 Actions \u2192 Deploy API", "\u2192 Give a name to Deployment Stage (here: Test) \u2192 Deploy", "Woah \u2014 You have deployed your API. You should see a URL of your API now.", "We will use Postman to test our API. You can download it from: https://www.postman.com/downloads/", "\u2192 Open Postman and you should be able to see a dashboard", "\u2192 Create a new tab \u2192 Select the POST option \u2192 add the API URL in the Enter Request URL", "\u2192 Select binary in Body & upload the Hello World image file", "Output \u2014 You should get the following output", "Voila \u2014 You have successfully create, deployed and tested your API. Share your URL with your friends and family.", "Separately if you are interested in hosting OpenCV & Tesseract on AWS EC2 instance or Heroku then please read the following blogs.", "The end for now. Have any ideas to improve this or want me to try any new ideas? Please give your suggestions in the comments. Adios.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "I am an Economist by academia, Data Scientist by profession and a Traveler by heart. Here to write simple, interesting blogs that everyone can read!"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fd77b92f53626&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Faws-lambda-amazon-api-gateway-not-as-daunting-as-they-sound-part-1-d77b92f53626&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Faws-lambda-amazon-api-gateway-not-as-daunting-as-they-sound-part-1-d77b92f53626&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Faws-lambda-amazon-api-gateway-not-as-daunting-as-they-sound-part-1-d77b92f53626&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Faws-lambda-amazon-api-gateway-not-as-daunting-as-they-sound-part-1-d77b92f53626&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----d77b92f53626--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----d77b92f53626--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@shirishgupta?source=post_page-----d77b92f53626--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@shirishgupta?source=post_page-----d77b92f53626--------------------------------", "anchor_text": "Shirish Gupta"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F88d9c69bfa1a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Faws-lambda-amazon-api-gateway-not-as-daunting-as-they-sound-part-1-d77b92f53626&user=Shirish+Gupta&userId=88d9c69bfa1a&source=post_page-88d9c69bfa1a----d77b92f53626---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fd77b92f53626&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Faws-lambda-amazon-api-gateway-not-as-daunting-as-they-sound-part-1-d77b92f53626&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fd77b92f53626&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Faws-lambda-amazon-api-gateway-not-as-daunting-as-they-sound-part-1-d77b92f53626&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://signin.aws.amazon.com/", "anchor_text": "https://signin.aws.amazon.com/"}, {"url": "https://github.com/bweigel", "anchor_text": "Benjamin Genz"}, {"url": "https://github.com/amtam0/lambda-tesseract-api.git", "anchor_text": "https://github.com/amtam0/lambda-tesseract-api.git"}, {"url": "https://github.com/hazimora33d/lambda-tesseract-api.git", "anchor_text": "lambda-tesseract-api/"}, {"url": "https://www.postman.com/downloads/", "anchor_text": "https://www.postman.com/downloads/"}, {"url": "https://towardsdatascience.com/deploy-python-tesseract-opencv-fast-api-using-aws-ec2-instance-ed3c0e3f2888", "anchor_text": "Deploy Python + Tesseract + OpenCV Fast API using AWS EC2 InstanceStep by step approach (including screenshots & code) on how to create an AWS EC2 instance and deploy your code for\u2026towardsdatascience.com"}, {"url": "https://towardsdatascience.com/deploy-python-tesseract-ocr-on-heroku-bbcc39391a8d", "anchor_text": "Deploy Python Tesseract OCR on HerokuStep by step approach (including screenshots & code) on how to create a OpenCV + Tesseract OCR on Herokutowardsdatascience.com"}, {"url": "https://medium.com/tag/aws?source=post_page-----d77b92f53626---------------aws-----------------", "anchor_text": "AWS"}, {"url": "https://medium.com/tag/lambda?source=post_page-----d77b92f53626---------------lambda-----------------", "anchor_text": "Lambda"}, {"url": "https://medium.com/tag/api?source=post_page-----d77b92f53626---------------api-----------------", "anchor_text": "API"}, {"url": "https://medium.com/tag/data-science?source=post_page-----d77b92f53626---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----d77b92f53626---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fd77b92f53626&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Faws-lambda-amazon-api-gateway-not-as-daunting-as-they-sound-part-1-d77b92f53626&user=Shirish+Gupta&userId=88d9c69bfa1a&source=-----d77b92f53626---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fd77b92f53626&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Faws-lambda-amazon-api-gateway-not-as-daunting-as-they-sound-part-1-d77b92f53626&user=Shirish+Gupta&userId=88d9c69bfa1a&source=-----d77b92f53626---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fd77b92f53626&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Faws-lambda-amazon-api-gateway-not-as-daunting-as-they-sound-part-1-d77b92f53626&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----d77b92f53626--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fd77b92f53626&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Faws-lambda-amazon-api-gateway-not-as-daunting-as-they-sound-part-1-d77b92f53626&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----d77b92f53626---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----d77b92f53626--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----d77b92f53626--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----d77b92f53626--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----d77b92f53626--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----d77b92f53626--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----d77b92f53626--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----d77b92f53626--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----d77b92f53626--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@shirishgupta?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@shirishgupta?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Shirish Gupta"}, {"url": "https://medium.com/@shirishgupta/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "85 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F88d9c69bfa1a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Faws-lambda-amazon-api-gateway-not-as-daunting-as-they-sound-part-1-d77b92f53626&user=Shirish+Gupta&userId=88d9c69bfa1a&source=post_page-88d9c69bfa1a--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F95e9dc09f689&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Faws-lambda-amazon-api-gateway-not-as-daunting-as-they-sound-part-1-d77b92f53626&newsletterV3=88d9c69bfa1a&newsletterV3Id=95e9dc09f689&user=Shirish+Gupta&userId=88d9c69bfa1a&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}