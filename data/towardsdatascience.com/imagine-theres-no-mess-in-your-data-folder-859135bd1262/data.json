{"url": "https://towardsdatascience.com/imagine-theres-no-mess-in-your-data-folder-859135bd1262", "time": 1683007833.031623, "path": "towardsdatascience.com/imagine-theres-no-mess-in-your-data-folder-859135bd1262/", "webpage": {"metadata": {"title": "Imagine there\u2019s no\u2026 mess in your \u201cdata\u201d folder! | by Ilya Tyutin | Towards Data Science", "h1": "Imagine there\u2019s no\u2026 mess in your \u201cdata\u201d folder!", "description": "Learn how to organize your data folder, how to make your data transformations reproducible, how to be sure how your data was generated."}, "outgoing_paragraph_urls": [{"url": "https://github.com/ityutin/df-and-order/blob/master/examples/How-To.ipynb", "anchor_text": "pretty detailed Jupyter Notebook", "paragraph_index": 31}, {"url": "https://github.com/ityutin/df-and-order", "anchor_text": "df-and-order", "paragraph_index": 32}, {"url": "https://github.com/ityutin/df-and-order/blob/master/examples/How-To.ipynb", "anchor_text": "Checkout the mentioned in-depth notebook for the details", "paragraph_index": 40}, {"url": "https://github.com/ityutin/df-and-order", "anchor_text": "df-and-order", "paragraph_index": 43}], "all_paragraphs": ["First I\u2019m going to introduce Mr. Lemur that will accompany our thought process.", "Say you and your fellow team members have been working on a project with a cool name \u201cChurn Detector X\u201d. All is left is to fit our just as cool model with a proper dataset and then deploy it.", "You look at the \u201cdata\u201d directory and it fills your mind with confusion right away.", "Looks familiar? I know that feel, bro.", "Just imagine a great world where it\u2019s no longer possible to end up with such a mess. Even if you are interested in April\u2019s datasets only, after filtering the rest out you get:", "Is it clear now which one to pick? Hey, Mr. Lemur, what do you say?", "Well, usually we are always in a hurry while working on something exciting. In one of those days you promised yourself that it\u2019s easy to remember which dataset is which. Nonetheless, time flies, you know! The deadline has crept up on you.", "It is absolutely essential that the right data in production must be used. Garbage in \u2014 garbage out, remember? What do you do now?", "First you go over all your notebooks, compare metrics or other calculations, you spend some time, then a little more.. Whew! You are almost 100% sure that user_activity_april_2020_cleaned_df_improved.csv dataset is the one you\u2019re looking for.", "You just remembered that you need to regenerate the dataset using the most fresh data available. The only obstacle is to find the code you used for that. Thankfully, you\u2019ve been using git all along and it took only around an hour to find the roots and test everything. Yeah, I\u2019m being sarcastic. Worst case scenario \u2014 you have nothing relevant in git history.", "As a bonus: how to make reading a dataset from any file or a notebook easy?", "There is an easy way to tackle the first one by providing a verbose detailed filename.", "The second is far more trickier. Obviously, the code responsible for a transformation is always detached, and the data itself is unable to tell us where to find it.", "We will spend the rest of the article trying to find a solution for all of those problems.", "You may say I\u2019m a dreamer, but let\u2019s figure out our options to get away from this:", "Yikes, looks pretty nasty\u2026 So unportable, so error-prone. But: we can do better!", "I\u2019m calling for a brainstorm! What matters now is the interface, not the implementation.", "We specified the project we\u2019re working on and the filename by hiding all the logic of getting to the dataset. Feels better, though I still need to know the exact filename. It is not very convenient.", "The filename hints that the dataset is related to the user_activity_april_2020.csv dataset. Indeed, user_activity_april_2020_cleaned_df_improved.csv is just a transformed version of it. It\u2019s a good idea to separate those in the signature.", "Such a little thing, but the difference it made! Now I can read datasets left and right and everything will just work.", "And finally we\u2019ve come to this:", "In my imagination, brave MagicDfReader has come to save our time and sanity! Looks like magic, indeed. Working on the project, I don\u2019t want to deal with absolute or relative paths where the dataset is stored, I don\u2019t care which format was used to save it. I just need it in memory. I need it now! From any place in the repository. It\u2019s especially desired when working with many fellow team members in the same repository. Note the value for transform_id parameter. It is \u201cmodel_ready\u201d, which is more intuitive rather than \u201ccleaned_df_improved\u201d.", "The inevitable moment has arrived. It\u2019s time to come down to the ground and think about a possible implementation.", "If I were MagicDfReader, I would prefer to have some config file that describes the data and related transformations. Configs are great, they can remember anything to free our time for more important things.", "What useful information could it contain? After thinking a bit, I can sketch the following:", "df_id here is just a reminder which dataset the config belongs to. Then we can put anything in the metadata section. It\u2019d very valuable to know who created the config and when the data was collected. initial_df_format information will be used by MagicDfReader to know how to read it.", "We talked about transformations a lot, didn\u2019t we? They must also be found in the config. I can think of two types of transformations in general:", "As an example we may want to transform date columns to datetime type every time we read the dataset, but there are also columns we want to get rid of permanently. How would it look like in the config?", "How do you like it? Looks pretty self-explanatory.", "We can make it more verbose by adding comments to clarify all the fields:", "If at some point in time you wonder how a dataset was generated \u2014 just take a look at the related config file. You want to regenerate it? No problem, just remove the old file and ask MagicDfReader to get it for you. It will follow the recipe you gave it in the config. If your colleague is responsible for some transformation \u2014 you don\u2019t even need to know how it\u2019s done. MagicDfReader delivers, baby. Yet there are still gaps to be filled. For example, what exactly are the actions? to_date and drop_cols, where are they implemented?", "Once my imagination had finally led me to a keyboard, I made a library that works almost the way I described. I prepared a pretty detailed Jupyter Notebook with the details of its internals, so I don\u2019t want to bother you with a lot of code here.", "The library is called df-and-order. Just like Law & Order. You know, I like order in all of its manifestations, and the order in my \u201cdata\u201d folder is a must since I have such a library.", "Let me show you the main components of the lib and how the true config looks like.", "The real DfReader is quite humble as well and doesn\u2019t have anything related to magic in the name.", "There are two parameters needed for creating an instance of DfReader. As you see, it doesn\u2019t know anything about your projects, it expects to get a \u201cdata\u201d folder path. But don\u2019t worry, nothing can be easier than creating your own DfReader sublcass that can generate dir_path dynamically. So a few lines of code and you get MagicDfReader we talked about earlier! format_to_cache_map parameter leads us to another class.", "Should be subclassed, contains a logic of how to read & save dataframes for a specific format. Just take a look at the example subclass and everything should become clear!", "Yeah, it ended up being a simple wrapper around pandas\u2019s built-in methods. Here\u2019s an example of format_to_cache_map parameter value:", "Now DfReader knows how to deal with those formats.", "How about the real config for the lib?", "Looks almost the same as before! module_path is the reference to a file with a code that is responsible for a transformation. You write some code, then expose all the parameters needed to the config file and everything becomes clear and reproducible. Checkout the mentioned in-depth notebook for the details.", "The lib was written with pandas.DataFrame in mind, but it could easily be framework-agnostic tool if needed. It could be also modified to work with not local files as well. DfCache subclass could access some external resource etc.", "The lib is in the early stages of development, so the journey has just begun.", "df-and-order is about organising your data files and simplifying access to them using basic transformations, not a true data pipeline framework.", "Even if you won\u2019t try the result of my humble attempt to tame the chaos \u2014 maybe the article helped you to put things in perspective. Reproducibility is very important in data business, so do not ignore that aspect until it\u2019s too late.", "I hope some day you\u2019ll join the repo! Feel free to leave comments, open issues etc! I\u2019ll be delighted to communicate with you.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "iOS -> Data Science -> what's next? Trying to make data useful."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F859135bd1262&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fimagine-theres-no-mess-in-your-data-folder-859135bd1262&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fimagine-theres-no-mess-in-your-data-folder-859135bd1262&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fimagine-theres-no-mess-in-your-data-folder-859135bd1262&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fimagine-theres-no-mess-in-your-data-folder-859135bd1262&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----859135bd1262--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----859135bd1262--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@emmarrgghh?source=post_page-----859135bd1262--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@emmarrgghh?source=post_page-----859135bd1262--------------------------------", "anchor_text": "Ilya Tyutin"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F1ef94d8b755d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fimagine-theres-no-mess-in-your-data-folder-859135bd1262&user=Ilya+Tyutin&userId=1ef94d8b755d&source=post_page-1ef94d8b755d----859135bd1262---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F859135bd1262&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fimagine-theres-no-mess-in-your-data-folder-859135bd1262&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F859135bd1262&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fimagine-theres-no-mess-in-your-data-folder-859135bd1262&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@isaacquesada?utm_source=medium&utm_medium=referral", "anchor_text": "Isaac Quesada"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://unsplash.com/@veverkolog?utm_source=medium&utm_medium=referral", "anchor_text": "Du\u0161an Smetana"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://unsplash.com/@amybethreed?utm_source=medium&utm_medium=referral", "anchor_text": "Amy Reed"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://unsplash.com/@travelingtater?utm_source=medium&utm_medium=referral", "anchor_text": "Branden Tate"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://unsplash.com/@soberanes?utm_source=medium&utm_medium=referral", "anchor_text": "Uriel Soberanes"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://github.com/ityutin/df-and-order/blob/master/examples/How-To.ipynb", "anchor_text": "pretty detailed Jupyter Notebook"}, {"url": "https://github.com/ityutin/df-and-order", "anchor_text": "df-and-order"}, {"url": "https://github.com/ityutin/df-and-order/blob/master/examples/How-To.ipynb", "anchor_text": "Checkout the mentioned in-depth notebook for the details"}, {"url": "https://github.com/ityutin/df-and-order", "anchor_text": "df-and-order"}, {"url": "https://github.com/ityutin/df-and-order", "anchor_text": "df-and-order"}, {"url": "https://github.com/ityutin/df-and-order", "anchor_text": "df-and-order"}, {"url": "https://unsplash.com/@nimaro?utm_source=medium&utm_medium=referral", "anchor_text": "Ramin Nieuwenhuis"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://medium.com/tag/pandas?source=post_page-----859135bd1262---------------pandas-----------------", "anchor_text": "Pandas"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----859135bd1262---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/tag/data-science?source=post_page-----859135bd1262---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/python?source=post_page-----859135bd1262---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/best-practices?source=post_page-----859135bd1262---------------best_practices-----------------", "anchor_text": "Best Practices"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F859135bd1262&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fimagine-theres-no-mess-in-your-data-folder-859135bd1262&user=Ilya+Tyutin&userId=1ef94d8b755d&source=-----859135bd1262---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F859135bd1262&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fimagine-theres-no-mess-in-your-data-folder-859135bd1262&user=Ilya+Tyutin&userId=1ef94d8b755d&source=-----859135bd1262---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F859135bd1262&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fimagine-theres-no-mess-in-your-data-folder-859135bd1262&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----859135bd1262--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F859135bd1262&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fimagine-theres-no-mess-in-your-data-folder-859135bd1262&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----859135bd1262---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----859135bd1262--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----859135bd1262--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----859135bd1262--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----859135bd1262--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----859135bd1262--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----859135bd1262--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----859135bd1262--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----859135bd1262--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@emmarrgghh?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@emmarrgghh?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Ilya Tyutin"}, {"url": "https://medium.com/@emmarrgghh/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "41 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F1ef94d8b755d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fimagine-theres-no-mess-in-your-data-folder-859135bd1262&user=Ilya+Tyutin&userId=1ef94d8b755d&source=post_page-1ef94d8b755d--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F211554dd7dc&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fimagine-theres-no-mess-in-your-data-folder-859135bd1262&newsletterV3=1ef94d8b755d&newsletterV3Id=211554dd7dc&user=Ilya+Tyutin&userId=1ef94d8b755d&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}