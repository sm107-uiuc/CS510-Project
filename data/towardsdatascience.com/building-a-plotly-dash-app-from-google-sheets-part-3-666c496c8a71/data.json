{"url": "https://towardsdatascience.com/building-a-plotly-dash-app-from-google-sheets-part-3-666c496c8a71", "time": 1683014409.30101, "path": "towardsdatascience.com/building-a-plotly-dash-app-from-google-sheets-part-3-666c496c8a71/", "webpage": {"metadata": {"title": "Building a Plotly Dash App from Google Sheets \u2014 Part 2 | by Derrick Lewis | Towards Data Science", "h1": "Building a Plotly Dash App from Google Sheets \u2014 Part 2", "description": "So far we have created a free, user-friendly data store and connected to it through the Google Python API. Next, we will use the data to build our dashboard for the field marketing team to track\u2026"}, "outgoing_paragraph_urls": [{"url": "https://medium.com/p/d37dc41ece10", "anchor_text": "Design and ETL Process using Google and code.gs", "paragraph_index": 1}, {"url": "https://dash.plotly.com", "anchor_text": "docs on Plotly Dash", "paragraph_index": 4}, {"url": "https://dash.plotly.com/dash-html-components", "anchor_text": "HTML library", "paragraph_index": 10}, {"url": "https://dash.plotly.com/dash-core-components", "anchor_text": "Dash Core Components", "paragraph_index": 10}, {"url": "https://dash.plotly.com/datatable", "anchor_text": "Dash Data Table", "paragraph_index": 10}, {"url": "http://127.0.0.1:8050/", "anchor_text": "http://127.0.0.1:8050/", "paragraph_index": 12}, {"url": "https://medium.com/@derrickjameslewis/building-a-plotly-dash-app-from-google-sheets-part-1-d37dc41ece10", "anchor_text": "Part 1", "paragraph_index": 17}, {"url": "https://dash.plotly.com/datatable", "anchor_text": "dash_table.DataTable()", "paragraph_index": 38}], "all_paragraphs": ["So far we have created a free, user-friendly data store and connected to it through the Google Python API.", "Part 1 \u2014 Design and ETL Process using Google and code.gs", "Next, we will use the data to build our dashboard for the field marketing team to track their activities and progress toward a bonus.", "Dash is an open source tool from Plotly to allow data scientists and other front-end-ignorant folks like myself the opportunity to put together an interactive web app to show off their Plotly charts with just a few lines of python.", "The docs on Plotly Dash are fantastic and get right to the point with great examples.", "Open a terminal and create a new environment for our project.", "conda install plotly dash pandas numpy flask", "And from Part 1, we will need the Google API libraries:", "Start a new project folder and create a file named app.py. We\u2019re ready to build our Dash app.", "That\u2019s it. With those 4 core pieces, you now have a working app.", "The core of Dash is that all of the visual components of the app are Python classes. There are specific libraries to import for the types of components you might use, such as the HTML library for the basic HTML items such as div and image, the user friendly Dash Core Components library, with classes for pre-built dropdowns, lists, buttons, graphs(!), and many other typical web components, and finally the Dash Data Table library to display and manipulate a large table of data on the page.", "Run python app.py from the working directory in your terminal.", "If there are no errors you should see the above. This means your computer is now running the app. Open a browser and go to http://127.0.0.1:8050/ (or whatever the response is for you above). You\u2019ll see the app running and displaying the <h2> message from your layout. Also notice the blue circle that will appear in your browser in the lower right. This will be handy for debugging and following callbacks in the future.", "Another very important step in understanding how our app will function is the callback. After we start Flask, create a Dash object, and design the layout our app can respond to changes such as selecting a value in a dropdown, clicking a button or sorting a table.", "The basic structure of a callback in Dash looks like this:", "Dash will now listen for any changes in our component named \u201cdropdown\u201d. It will run the function connected to the callback when something has changed. Then return the output of the function to the component listed. Thus, updating the page with our selection.", "Plotly has incredible docs for it\u2019s Dash app and visualization library. So, I\u2019ll let you find the particular tools you would like to use and move ahead to discuss how we will connect our Google Sheet to be used in the dashboard.", "First we need to add our two functions to get Google Data from Part 1 to our app.py script. This will fetch the data from our Google Sheet and convert it into a Pandas DataFrame.", "Next we will build the layout of our Dash App. The idea of Dash is that it is a tool for folks who know very little about front-end development, React, or Javacript. There are two points I will highlight below for other beginners like myself.", "Bootstrap is popular CSS framework for responsive sites viewed on mobile and other screens.", "In building my first few Dash Apps, I struggled to make adjustments to the layout. Simple tasks such as centering a piece of text or adding margins was difficult and rarely had the results I wanted.", "Dash Bootstrap Components is third party library to incorporate bootstrap CSS into dash. The documentation is wonderful and I learned much of how the layout works from their visuals. Take a look:", "The library adds Python classes for Containers, Rows and Columns to the layout of the page. Using this structure with your components will allow for the site to respond much better to other screens. For me the Python classes made it simple to adjust sizing and justification", "Install Dash Bootstrap Components in your environment:", "Data Tables are a component of Dash for viewing, editing, and exploring large datasets. The tables allow for our app users to filter, sort and select data that can be directly inputed into our visualizations.", "They are incredibly powerful, but finicky. Building tables, columns and headers is straight foward, but understanding how each style setting interacts with others can take some time to understand and cause unexpected layouts.", "I had trouble with the fixed row headers matching the cells below, as well as certain CSS settings cutting off the left and right most pixels of the data.", "First tip, is to understand the order of priority for all of the style settings:", "This means adjusting a setting like minWidth=60 to \u201cstyle_data\u201d, will override any overlapping setting of maxWidth=50 in \u201cstyle_cell\u201d.", "The next tip I have when using a Dash Data Table is to build a separate file for all the style settings. In many examples and tutorials I found online, each column of data is added using a for loop, even some of the conditionally formatted columns and data. While it\u2019s not the most efficient, using a separate file and building each column manually allowed me to debug, test, and adjust data quickly and easily. So, while learning to build Dash Apps with tables, it\u2019s a good idea to be explicit. You can test and learn how to change data formats, colors, and columns widths. Here is the example I used with this dashboard:", "Notice in the third list \u201cbonus_data_cond\u201d, I can set a conditional style to check if our employees have exceed their bonus goals. The script then sets the background color accordingly.", "I import all of these variables in our main script, app.py, and assign them in the table layout above like so: style_cell_conditional=bonus_cell_cond", "Next we will add callbacks for each visualization and interactive component. We\u2019re going to build:", "We\u2019ll start with something interesting that I did not find in many tutorials. While testing the app, commonly the data would not refresh when loading the page. Additionally, I found several sources which mention a best practice of creating a callback which stores the data to an html.Div() as a string instead of letting the python script just store the data in a Pandas DataFrame as a global variable that each function could use. For this data store html.Div() we will set style={'display':'none'}", "This does a few things for us. First, it forces the page to update the data on each load. Secondly, each visual component will be built using the data stored in this hidden component. The API call and some of the more computationally expensive data transformation will happen just once. Changes to the visualizations happen quicker as the data is already clean an only needs to be filtered. Finally, I read this practice has a slightly security beenfit if the data is not intended to be seen or read.", "So, during our first page load this function will be run by the hidden html.Div(). The primary data transformation will happen here, dates converted and numbers stored as integers. Then 2 responsive Callbacks will use this clean data to filter for their purposes. All data is stored in string format inside a .Div() component instead of in memory on the server. Fortunatly, this project will never work with very large data sets. If that is your scenario you should find a alternative that keeps the memory usage low.", "I\u2019m actually going to set up two of these data gathering Callbacks. The reason is to allow the Dashboard to independently set a time frame between the main map and the employee bonus table.", "Here we dive into some of Plotly\u2019s core visualization strengths. We input the data from our hidden data component and convert it from a string back to a Pandas DF for some manipulation before we return a scatterGeo figure to be rendered in the app layout above.", "Most of the tedious work setting up a Dash Data Table is done in the layout and styling, here we use Pandas to do some aggregations on each field marketing employee and return a data in string format to be read by the dash_table.DataTable() component in the layout.", "This is one of my favorite parts of many dashboard projects. Data Tables offer the flexibility of selecting rows, highlight, deleting, filtering. All of those adjustments to the table can be sent as input to resulting visualizations (or better\u2026 Machine Learning predictions!)", "Why is this my favorite part? Because I like to give Dashboards as much flexibility as possible. The user may want to know the answer to a very specific question, \u201cHow many widgets were sold in the eastern region in April?\u201d A good dashboard design gives the user that flexibility and Dash Data Tables do that inherently.", "Here we will take input from selected rows in the above table and build 4 bar charts.", "Important to highlight here that callbacks can not only take multiple inputs, but Outputs can also be set as a list and sent to multiple components.", "Nice and simple, this callback reports the clear metrics given the time frame set in our initial Date Picker component. Most business users want rapid cognition. This reports the key numbers, with lots of room.", "All the pieces above combined into one Dash App.", "The Github repository below contains the core pieces above along with a few bonus maps, additional filters and a few images.", "This was the big step that requires a lot of tedious trial and error in design, but is the place you can make your project stand out and add a lot of value to the users.", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F666c496c8a71&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuilding-a-plotly-dash-app-from-google-sheets-part-3-666c496c8a71&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuilding-a-plotly-dash-app-from-google-sheets-part-3-666c496c8a71&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuilding-a-plotly-dash-app-from-google-sheets-part-3-666c496c8a71&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuilding-a-plotly-dash-app-from-google-sheets-part-3-666c496c8a71&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----666c496c8a71--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----666c496c8a71--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://derrickjameslewis.medium.com/?source=post_page-----666c496c8a71--------------------------------", "anchor_text": ""}, {"url": "https://derrickjameslewis.medium.com/?source=post_page-----666c496c8a71--------------------------------", "anchor_text": "Derrick Lewis"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Ff4d893d1df69&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuilding-a-plotly-dash-app-from-google-sheets-part-3-666c496c8a71&user=Derrick+Lewis&userId=f4d893d1df69&source=post_page-f4d893d1df69----666c496c8a71---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F666c496c8a71&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuilding-a-plotly-dash-app-from-google-sheets-part-3-666c496c8a71&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F666c496c8a71&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuilding-a-plotly-dash-app-from-google-sheets-part-3-666c496c8a71&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://medium.com/p/d37dc41ece10", "anchor_text": "Design and ETL Process using Google and code.gs"}, {"url": "https://dash.plotly.com", "anchor_text": "docs on Plotly Dash"}, {"url": "https://dash.plotly.com/dash-html-components", "anchor_text": "HTML library"}, {"url": "https://dash.plotly.com/dash-core-components", "anchor_text": "Dash Core Components"}, {"url": "https://dash.plotly.com/datatable", "anchor_text": "Dash Data Table"}, {"url": "http://127.0.0.1:8050/", "anchor_text": "http://127.0.0.1:8050/"}, {"url": "https://medium.com/@derrickjameslewis/building-a-plotly-dash-app-from-google-sheets-part-1-d37dc41ece10", "anchor_text": "Part 1"}, {"url": "https://dash-bootstrap-components.opensource.faculty.ai", "anchor_text": "https://dash-bootstrap-components.opensource.faculty.ai"}, {"url": "https://dash.plotly.com/datatable", "anchor_text": "dash_table.DataTable()"}, {"url": "https://github.com/lewi0332/google_dashboard", "anchor_text": "lewi0332/google_dashboardPlotly Dash app connected to Google Sheets API. Contribute to lewi0332/google_dashboard development by creating an\u2026github.com"}, {"url": "https://medium.com/tag/data-science?source=post_page-----666c496c8a71---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/data-analytics?source=post_page-----666c496c8a71---------------data_analytics-----------------", "anchor_text": "Data Analytics"}, {"url": "https://medium.com/tag/plotly?source=post_page-----666c496c8a71---------------plotly-----------------", "anchor_text": "Plotly"}, {"url": "https://medium.com/tag/dash?source=post_page-----666c496c8a71---------------dash-----------------", "anchor_text": "Dash"}, {"url": "https://medium.com/tag/dashboard?source=post_page-----666c496c8a71---------------dashboard-----------------", "anchor_text": "Dashboard"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F666c496c8a71&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuilding-a-plotly-dash-app-from-google-sheets-part-3-666c496c8a71&user=Derrick+Lewis&userId=f4d893d1df69&source=-----666c496c8a71---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F666c496c8a71&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuilding-a-plotly-dash-app-from-google-sheets-part-3-666c496c8a71&user=Derrick+Lewis&userId=f4d893d1df69&source=-----666c496c8a71---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F666c496c8a71&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuilding-a-plotly-dash-app-from-google-sheets-part-3-666c496c8a71&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----666c496c8a71--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F666c496c8a71&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuilding-a-plotly-dash-app-from-google-sheets-part-3-666c496c8a71&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----666c496c8a71---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----666c496c8a71--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----666c496c8a71--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----666c496c8a71--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----666c496c8a71--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----666c496c8a71--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----666c496c8a71--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----666c496c8a71--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----666c496c8a71--------------------------------", "anchor_text": ""}, {"url": "https://derrickjameslewis.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://derrickjameslewis.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Derrick Lewis"}, {"url": "https://derrickjameslewis.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "11 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Ff4d893d1df69&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuilding-a-plotly-dash-app-from-google-sheets-part-3-666c496c8a71&user=Derrick+Lewis&userId=f4d893d1df69&source=post_page-f4d893d1df69--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fusers%2Ff4d893d1df69%2Flazily-enable-writer-subscription&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuilding-a-plotly-dash-app-from-google-sheets-part-3-666c496c8a71&user=Derrick+Lewis&userId=f4d893d1df69&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}