{"url": "https://towardsdatascience.com/python-for-data-journalists-get-your-data-from-the-web-c0cee664d17", "time": 1683007642.2844448, "path": "towardsdatascience.com/python-for-data-journalists-get-your-data-from-the-web-c0cee664d17/", "webpage": {"metadata": {"title": "Python for Data Journalists: Get Your Data from the Web | by Alan Jones | Towards Data Science", "h1": "Python for Data Journalists: Get Your Data from the Web", "description": "As a journalist, your job is to tell a story that your readers will find compelling, entertaining and informative. As a data journalist, you find that story in data that you can access from the Web\u2026"}, "outgoing_paragraph_urls": [], "all_paragraphs": ["As a journalist, your job is to tell a story that your readers will find compelling, entertaining and informative. As a data journalist, you find that story in data that you can access from the Web. You find the data, study it and come to conclusions that inform your narrative. Maybe you produce some interesting charts or illustrations, too.", "There is a vast amount of data out there if you know where to look and have the skills to retrieve it, manipulate it and analyse it.", "We are going to discover how to find, read, analyse and visualize that data.", "Many governments and organizations have opened their data for anyone to access. The US and UK governments, for example, have open data that cover all aspects of government, the economy and society. The EU has similar resources.", "Large non-government, as well as private, organizations also provide data either free or for a fee. Among these are the World Bank, the World Economic Forum, the World Health Organisation and the United Nations. There are academic sources of data, too. Our World in Data, which is based in the University of Oxford in the UK, is a good example, and the Covid-19 dashboard at Johns Hopkins University in the US provides up-to-date data on the pandemic (although these are not directly downloadable).", "But if you are not sure where to start, a good place to get going is Google\u2019s Public Data Explorer where you can search for data from a particular provider or on a specific topic.", "You\u2019ll find that data comes in a number of formats. Probably the most common is the downloadable spreadsheet. These are generally in Excel format or CSV files.", "APIs (application programming interfaces) are also useful sources of data and these data often come in the form of either CSV or JSON. APIs sometimes restrict the data that you can retrieve and they often require you to register. It\u2019s not unusual for an API to use a \u2018freemium\u2019 model where limited access is provided free but, if you want access to large volumes of data, a fee is payable.", "We are going to look at how you deal with different types of data and how to use Python and Pandas to tidy, analyse and visualize that data.", "To provide a focus we are going to look at population data for the UK. We will track how the population has grown over the last few decades and how immigration has affected it, if at all. We will use two different data sources and will join them to see if there is any relation between the numbers.", "You need very little programming knowledge to use data on the web but you do need to be a little familiar with the basics of Python and Pandas, or at least willing to learn them.", "In the code below I will be using a Jupyter Notebook (you could use a standard Python editor or IDE but I find Jupyter easier for prototyping these simple routines).", "If you don\u2019t have the Python tools on your computer yet, I suggest that you install Anaconda. With Anaconda you get Python along with a whole lot of useful libraries like Pandas, Jupyter Notebooks and code editors all in one package. See the article below for instructions of how to get it:", "On the assumption that you have your tools and are ready to go, let\u2019s get started.", "I\u2019m going to present each bit of code as a Jupyter Notebook code cell and I suggest that you do the same.", "So, the first thing we need to do is input the Python libraries that we are going to use.", "This is pretty much a standard set of libraries that we need for manipulating data and producing visualizations.", "If for any reason you do not have these already installed, you will need, from the command line, install with either conda or pip, e.g.", "Note that if you are not using Anaconda, you may need to use the command pip3 rather than pip for your installation.", "Let\u2019s start our exploration with spreadsheet data, CSV and Excel files.", "Whenever you find a data source that provides you with an Excel file to download, you will often find that they provide a CSV alternative, too. It doesn\u2019t matter greatly which we use for simple spreadsheets.", "Having said that, CSV files are more easily readable by a human \u2014 they are plain text tables with each value or header in the table separated with a comma (or other characters). You can open them with a spreadsheet, of course, but you can also edit them with a simple text editor if you need to.", "Excel files, on the other hand, are a proprietary format which needs to be viewed or edited with a Excel compatible spreadsheet program.", "Spreadsheet files are sometimes readable directly from a url, others you must download manually from your browser.", "To make things easier for our purposes here, I\u2019ve copied the files that we will use into a repository that you can access directly from within your program.", "First of all we are going to look at how the UK population has grown over the last 50 years, or so. We\u2019ll be using data from the UK\u2019s Office for National Statistics.", "You can download the file here:", "Save it in the same directory as your notebook or program.", "The following program fragment loads this data into a Pandas dataframe. The real work is done by pd.read_csv which reads the file from your directory and the second line displays the first 10 lines of the table.", "When I downloaded the file it was called series-100520.csv", "However, when you download the file you will likely get a file name that reflects the date on which you downloaded it. So check the file name and adjust the code appropriately.", "Ok, so here we have the dataframe that has been loaded from the CSV file and we\u2019ve executed the command data.head(10) which displays the first 10 lines of the datatable. It\u2019s basically two columns: the year and the population for that year but with some comments about the file included in it.", "This is a bit of a problem. Those extra lines might be useful for a human reader but they are not terrifically useful for our analysis. Also, we would like the headings for the two columns to make sense. Maybe we could call them \u2018Year\u2019 and \u2018Pop\u2019.", "This is easily fixed. We just skip the first few lines, the header and the ones numbered 0 to 6, and define what the headers are going to be ourselves.", "Here is the code to read the file again but with some additional parameters that will do exactly what we want.", "That\u2019s better. A simple table with two columns and sensible column headers. And we told Pandas that we will use the first column as the index for the dataframe (otherwise Pandas would add an additional numbered index).", "Now we can do something useful with it. For example, we could draw a graph like this.", "There we have a simple line graph of the increase in population from 1971 to 2018. The code is fairly self explanatory, we just call the plot function and it automatically uses the index (the year) as the X axis and plots the \u2018Pop\u2019 column as the Y value.", "We can see that there has been a gradually rising increase in this period.", "Another thing that we can easily do is to see what the actual increase has been. The table has 48 rows labelled 1971 to 2018, so we can access the first value for a population like this: data[\u2018Pop\u2019][1971] and the last one like this data[\u2018Pop\u2019][2018]. So the change in population is one minus the other.", "And the result that we get is", "That\u2019s more than a 10 million increase in 48 years. Or as a percentage:", "So now we know how many people live in the UK and how the population has grown over the last few decades.", "Now we are going to use a different data source from the House of Commons Library. This data is free and downloadable according to the Open Parliament License which you can find here:", "This time the data is in the form of an Excel spreadsheet. This is similar to reading a CSV file but there are a few differences in the parameters that we can specify. For example, this spreadsheet has a number of different sheets within it and in order or to read it into a Pandas dataframe we need to specify which one.", "The sheet we are interested in is called \u2018Summary\u2019.", "So download the file from this url", "and save in in your working directory, as before.", "Again, this file contains a few lines that are not useful, so we specify the header as line 2, make the index the first column (as before) and skip the last 10 lines of the table (using skipfooter).", "The resulting dataframe looks like the illustration below. It\u2019s ok but has a few columns that we don\u2019t need. It doesn\u2019t matter too much,though, because what we are going to do is copy the data we are interested in into our original dataframe which holds the population data.", "Essentially, we are going to copy part of the column for Net migration and paste it into a new column in the dataframe data.", "To do this we use a function called iloc. This allows us to select a rectangular part of a dataframe using the location of rows and columns. iloc[x,y], for example, would select row x from column y.", "But x and y can be ranges, so iloc[x1:x2,y1:y2 would select the rows x1 to x2 for the columns y1 to y2.", "To be more concrete, the code immData.iloc[0:10, 2:4] would select the part of immData from row 0 to row 10, and across the columns from column 2 to column 4. Or iloc[0:10,5] would select rows 1 to 10 but only for column 5.", "What we want is the Net migration which is column 5, but because we want to paste it into the data dataframe it needs to be the same size as data , so we only want the numbers from 1971 to 2018. 1971 is row 8 and 2018 is one up from the bottom of the table, we can represent this selection as [8:-1,5] where the -1 means \u2018one back from the last row\u2019.", "We are going to create a new column in data calle Imm and paste the iloced copy into it like this:", "and the result is the original table with the new column added. We are multiplying by 1000 to get the immigration data into the same form as the population data.", "Let\u2019s plot the increase in immigration on a graph. It\u2019s pretty much the same thing that we have seen before but we have specified the Y value to be \u2018Imm\u2019.", "You can see that, although there have been ups and downs, the net immigration to the UK has been increasing over that period.", "Another interesting thing we might do is to represent the immigration figure as a percentage of the overall population. Here we are creating another new column and filling it with the percentage.", "You can see that as a percentage of the overall population the percentage increase in immigration is pretty small. But that percentage is also rising.", "So it seems like there might be a relationship between the number of immigrants each year and the total population size. Let\u2019s investigate that by drawing a scatter diagram of the total population and the level of immigration.", "Well, yes it seems that there is a linear-ish relationship. As the population increases, so does immigration.", "The increase in total population that is due to immigration appears very small, so there must be something else going on. Maybe the more immigrants there are the more immigration there is because the current immigrants tend to bring their families to live with then. We haven\u2019t looked at that relationship and we are not going to!", "I think we\u2019ve met our goals for this article. We have seen how to download and read data in the form of a CSV file or an Excel spreadsheet. We\u2019ve manipulated that data to provide some information which might be worth investigating and we have looked at relationships between different data. We have also drawn some illustrative graphs as we went along.", "I hope that this has been useful and that you will find the techniques used here are relevant to your future work. Thanks for reading.", "You can find more about plotting graphs with Pandas here:", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fc0cee664d17&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpython-for-data-journalists-get-your-data-from-the-web-c0cee664d17&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpython-for-data-journalists-get-your-data-from-the-web-c0cee664d17&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpython-for-data-journalists-get-your-data-from-the-web-c0cee664d17&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpython-for-data-journalists-get-your-data-from-the-web-c0cee664d17&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://me.dm/@alanjones", "anchor_text": "Mastodon"}, {"url": "https://towardsdatascience.com/?source=post_page-----c0cee664d17--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----c0cee664d17--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@alan-jones?source=post_page-----c0cee664d17--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@alan-jones?source=post_page-----c0cee664d17--------------------------------", "anchor_text": "Alan Jones"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F7d3f5fb94faa&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpython-for-data-journalists-get-your-data-from-the-web-c0cee664d17&user=Alan+Jones&userId=7d3f5fb94faa&source=post_page-7d3f5fb94faa----c0cee664d17---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fc0cee664d17&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpython-for-data-journalists-get-your-data-from-the-web-c0cee664d17&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fc0cee664d17&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpython-for-data-journalists-get-your-data-from-the-web-c0cee664d17&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@claybanks?utm_source=medium&utm_medium=referral", "anchor_text": "Clay Banks"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://towardsdatascience.com/setting-up-jupyter-notebooks-for-data-visualisation-e287e2688af6", "anchor_text": "Setting Up Jupyter Notebooks for Data VisualisationJupyter Notebooks are a great and fairly simple way to explore data and create visualizations in an interactive\u2026towardsdatascience.com"}, {"url": "https://www.ons.gov.uk/generator?format=csv&uri=/peoplepopulationandcommunity/populationandmigration/populationestimates/timeseries/ukpop/pop", "anchor_text": "https://www.ons.gov.uk/generator?format=csv&uri=/peoplepopulationandcommunity/populationandmigration/populationestimates/timeseries/ukpop/pop"}, {"url": "https://www.parliament.uk/site-information/copyright/open-parliament-licence/", "anchor_text": "https://www.parliament.uk/site-information/copyright/open-parliament-licence/"}, {"url": "http://researchbriefings.files.parliament.uk/documents/SN06077/CBP06077-data.xlsx", "anchor_text": "http://researchbriefings.files.parliament.uk/documents/SN06077/CBP06077-data.xlsx"}, {"url": "https://towardsdatascience.com/plotting-with-pandas-an-introduction-to-data-visualization-8bd7c0831650", "anchor_text": "Plotting with Pandas: An Introduction to Data VisualizationIf you are a budding Data Scientist or Data Journalist, being able to visualize your data gives you the ability to\u2026towardsdatascience.com"}, {"url": "https://medium.com/tag/data-journalism?source=post_page-----c0cee664d17---------------data_journalism-----------------", "anchor_text": "Data Journalism"}, {"url": "https://medium.com/tag/data-science?source=post_page-----c0cee664d17---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/python?source=post_page-----c0cee664d17---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/pandas?source=post_page-----c0cee664d17---------------pandas-----------------", "anchor_text": "Pandas"}, {"url": "https://medium.com/tag/open-data?source=post_page-----c0cee664d17---------------open_data-----------------", "anchor_text": "Open Data"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fc0cee664d17&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpython-for-data-journalists-get-your-data-from-the-web-c0cee664d17&user=Alan+Jones&userId=7d3f5fb94faa&source=-----c0cee664d17---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fc0cee664d17&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpython-for-data-journalists-get-your-data-from-the-web-c0cee664d17&user=Alan+Jones&userId=7d3f5fb94faa&source=-----c0cee664d17---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fc0cee664d17&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpython-for-data-journalists-get-your-data-from-the-web-c0cee664d17&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----c0cee664d17--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fc0cee664d17&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpython-for-data-journalists-get-your-data-from-the-web-c0cee664d17&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----c0cee664d17---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----c0cee664d17--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----c0cee664d17--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----c0cee664d17--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----c0cee664d17--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----c0cee664d17--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----c0cee664d17--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----c0cee664d17--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----c0cee664d17--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@alan-jones?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@alan-jones?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Alan Jones"}, {"url": "https://medium.com/@alan-jones/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "2K Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F7d3f5fb94faa&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpython-for-data-journalists-get-your-data-from-the-web-c0cee664d17&user=Alan+Jones&userId=7d3f5fb94faa&source=post_page-7d3f5fb94faa--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Ffc3a6cdb7554&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpython-for-data-journalists-get-your-data-from-the-web-c0cee664d17&newsletterV3=7d3f5fb94faa&newsletterV3Id=fc3a6cdb7554&user=Alan+Jones&userId=7d3f5fb94faa&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}