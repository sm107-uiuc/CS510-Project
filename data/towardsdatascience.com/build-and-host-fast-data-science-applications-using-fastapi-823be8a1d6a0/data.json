{"url": "https://towardsdatascience.com/build-and-host-fast-data-science-applications-using-fastapi-823be8a1d6a0", "time": 1683010539.83466, "path": "towardsdatascience.com/build-and-host-fast-data-science-applications-using-fastapi-823be8a1d6a0/", "webpage": {"metadata": {"title": "Build And Host Fast Data Science Applications Using FastAPI | by Farhad Malik | Towards Data Science", "h1": "Build And Host Fast Data Science Applications Using FastAPI", "description": "I have recently hosted a number of production-ready data science applications as Restful web services using the FastAPI web framework. I found FastAPI to be stable and easy to use and for those\u2026"}, "outgoing_paragraph_urls": [{"url": "https://fastapi.tiangolo.com/#performance", "anchor_text": "ne of the fastest Python frameworks available", "paragraph_index": 7}, {"url": "https://pydantic-docs.helpmanual.io/", "anchor_text": "ydantic", "paragraph_index": 14}, {"url": "https://github.com/OAI/OpenAPI-Specification", "anchor_text": "OpenAPI", "paragraph_index": 16}, {"url": "http://json-schema.org/", "anchor_text": "JSON Schema", "paragraph_index": 16}, {"url": "https://fastapi.tiangolo.com/alternatives/#flask", "anchor_text": "here", "paragraph_index": 19}, {"url": "https://fastapi.tiangolo.com/tutorial/", "anchor_text": "website", "paragraph_index": 80}], "all_paragraphs": ["I have recently hosted a number of production-ready data science applications as Restful web services using the FastAPI web framework.", "I found FastAPI to be stable and easy to use and for those reasons, I have decided to write an article on FastAPI library outlining the steps we can follow to host a data science application.", "FastAPI was released in 2018 and is becoming the de facto choice for building high performant data science applications.", "This article will explain what FastAPI is, why it\u2019s superior to its competitors, along with a step by step guide on how to host a data science application using the FastAPI.", "Think of FastAPI as a wrapper around a data science application to expose its functionality as a RESTFUL microservice", "This article will provide an overview of the following topics:", "This article will build a real-life data science application to demonstrate how to use the FastAPI in your data science project", "As the name implies, FastAPI is a high performant web framework. Its performance can be compared with NodeJS and Go and it is rated as one of the fastest Python frameworks available.", "Netflix, Uber, Microsoft amongst many other corporations are using the FastAPI library.", "FastAPI can help us build APIs with Python 3.6+.", "It is based on standard Python type hints. Not only is FastAPI intuitive and straight-forward to use in projects, but the FastAPI code also has 100% test coverage hence it\u2019s production-ready robust code.", "Having used Flask for quite some time now, I have noticed that FastAPI is as simple to use as Flask. Matter of fact, FastAPI has adapted its simplicity from the Flask API. Subsequently, in general, I recommend exploring FastAPI for future projects.", "FastAPI is built on the Starlette and Pydantic libraries.", "The diagram illustrates that the FastAPI uses Starlette for its web parts and Pydantic for the data parts.", "Pydantic is a Python library to perform data validation, documentation along with serialisation. Pydantic uses the standard library typing types as defined in PEP 484 to define complex objects.", "Let\u2019s explore the features of FastAPI.", "The FastAPI is based on the open standards for OpenAPI and JSON Schema. As a result, it can automatically build a SwaggerUI for our web API without any additional coding as long as we use the appropriate Pydantic data types. SwaggerUI is interactive in nature and allows us to test an API directly from the browser. The automatic documentation has been inspired by the APISpec.", "I will demonstrate how we can build automatic data model documentation with JSON schema using the FastAPI later in this article.", "The FastAPI also lets us validate the input data from the external callers and generates automatic errors to the clients when it receives invalid data. The documentation feature has been inspired by the Django REST framework.", "The OpenAPI automatically generates a schema for the application. FastAPI also supports data serialisation and input data parsing which have been inspired by Marshmallow and Webargs. Read more about it here", "It\u2019s vital to build a web API that does not block its callers whilst it is performing operations. The asyncio library in Python offers a large number of async capabilities.", "The FastAPI library supports Async IO operations. This has been possible due to the fact that the FastAPI is based on the Starlette library.", "The Starlette library itself sits on top of the Uvicorn. Uvicorn is a lightning-fast ASGI server that supports asyncio frameworks.", "Starlette is a lightweight ASGI framework that enables us to build high-performant asyncio services.", "Unlike a WSGI server, ASGI servers can support HTTP/2 and WebSockets. With the help of Uvicorn, we can build a web API that can achieve high throughput in IO-bound contexts.", "Starlette uses the newer async IO ASGI server and supports background tasks too. Hence, we can build low latent fast web APIs using the FastAPI", "Flask users have to install the Flask-restplus package to create REST endpoints for their data science application.", "The FastAPI supports the GET, PUT, POST, DELETE, OPTIONS, HEAD, PATCH and TRACE Rest operations without any additional packages. All of the routes along with their operations are automatically generated in the documentation.", "I have noticed a pattern in the industry recently. It\u2019s becoming vital to bring a data science solution to the market fast. Plus data science applications are one component of a large ecosystem and they need to interact with a number of services and interfaces. This means it\u2019s extremely important to be able to quickly deploy an application as a web service so that it can be used by the end-users.", "The FastAPI is simple to use. It literally takes minutes to host a data science application as a microservice and expose the Rest endpoints that other applications can call. The validation, error handling amongst other API features come out of the box which can help in improving customer satisfaction and reliability on the application.", "This brings us to the last section of the article where I will demonstrate the steps to host a data science application.", "Let\u2019s start with a real use case to build a Smart data science application.", "The first step is to create a virtual environment and activate it.", "The next step is to install the required modules.", "As a result, it will also install the required dependencies such as starlette==0.13.4 and pydantic==1.5.1.", "Now to scrape the web pages, I am going to use the Pandas library. Therefore, the next step is to install pandas:", "Let's create the folder structure now.", "For the sake of simplicity, let\u2019s create the following folder structure.", "We have created two folders: SmartApp and src within SmartApp folder. Additionally, let\u2019s create the following three empty Python files:", "If you want to create a production-ready solution then I recommend using the cookie-cutter python project. There are many templates available, including one aimed at FastAPI.", "Ensure the virtual environment is activated.", "The next step involves implementing the Python code.", "Open the models.py file and add the following code:", "Also note, I have added a function get_url() that will return the URL for the chosen index.", "Now that the models have been implemented, let\u2019s add the code to the workflow_runner.py. This is the core of our data science application.", "This file will contain the code to perform the following two steps:", "Note that the run() method of the workflow_controller has been declared as async to illustrate how we can create a non-blocking async IO operation.", "I am using the pandas.read_html(url) function. It returns all of the tables from the webpage. Therefore, I am selecting the appropriate table from the webpage. As each web page has a different structure, I have registered the index name with the url in the companies map. At runtime, the workflow runner will choose the appropriate url and create instances of the company class by executing the index specific function.", "If we select Dow Jone, it will raise an exception. This will help me demonstrate how we can display user-friendly errors to the users.", "We are ready to integrate FastAPI now.", "Finally, we are going to add the code to the main.py file", "Then create a FastAPI() instance and declare it as the app variable.", "We are giving it a title, description, and a version. This information will be automatically displayed in the documentation.", "Expose the GET endpoint to handle the request that calls the workflow_runner.run():", "Notice how I am awaiting on the run function.", "Essentially, the @app.get is the REST path operation. It handles the requests with the path \u201c/\u201d and GET operation. It calls the async get_result() function. The parameter index is now a query parameter.", "We can also mark query parameters as optional and the documentation will be automatically reflected to accommodate the change. We have declared a title metadata value for the path parameter index. This will appear in the automatic documentation.", "We can also add validation rule within the Path() such as gt=0, le=1000 for the integers parameters.", "Note, the function get_result() is declared as async. It allows us to serve requests without blocking other calls.", "As a result, this feature enables the application to serve requests concurrently.", "The last point to note is that all of the exceptions are caught and then MyException is raised.", "Although the best practice is to explicitly catch the exceptions and deal with them individually but for the demo purpose, I am catching all exceptions with the wide try/except Exception.", "Lastly, for error handling, we define an endpoint that can handle the exceptions of type MyException.", "Now, whenever we get an exception of type MyException, it will display the message \u201cError occurred! Please contact the system admin.\u201d. This has been possible because of the app.exception_handler path. FastAPI also lets us create our own exception handlers.", "Finally, add the code to run the uvicorn server.", "We are done with the implementation.", "Let\u2019s run the application. Navigate to the folder where main.py is and execute the following line in the terminal:", "The reload will enable us to restart the server after code changes which enable fast development during development.", "Firstly, let\u2019s review the automatic API documentation", "It will display the Swagger UI.", "Clicking on the Index shows the list of indexes:", "Running it shows the company names in the response:", "Let\u2019s select Dow Jones and see if we get a user-friendly error:", "It has been done automatically by FastAPI.", "We can call it from Curl:", "We can open a browser and navigate to the url to view the response:", "You can download the openAPI specification by navigating to the url:", "We can see the validation has been built-in along with the acceptable index values as shown below. The OpenAPI schema powers the Swagger UI. It includes the API and data schema as shown below:", "This is the OpenAPI documentation for the API automatically built by the FastAPI. We can send it to the callers of the API so that they can easily integrate their services with our solution.", "Note the index enum members appear in the OpenAPI documentation along with the parameter title and the validation rules.", "That\u2019s all it is. If you want to know more about FastAPI, do visit their website for further information.", "FastAPI is a high performant web framework. FastAPI was released in 2018 and is becoming the de facto choice for building high performant data science applications.", "This article explained what FastAPI is, what its key features are along with a step by step guide on how to use to wrap a data science application into a Restful microservice.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "My personal blog, aiming to explain complex mathematical, financial and technological concepts in simple terms. Contact: FarhadMalik84@googlemail.com"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F823be8a1d6a0&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuild-and-host-fast-data-science-applications-using-fastapi-823be8a1d6a0&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuild-and-host-fast-data-science-applications-using-fastapi-823be8a1d6a0&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuild-and-host-fast-data-science-applications-using-fastapi-823be8a1d6a0&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuild-and-host-fast-data-science-applications-using-fastapi-823be8a1d6a0&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----823be8a1d6a0--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----823be8a1d6a0--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@farhadmalik?source=post_page-----823be8a1d6a0--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@farhadmalik?source=post_page-----823be8a1d6a0--------------------------------", "anchor_text": "Farhad Malik"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fd9b237bc89f0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuild-and-host-fast-data-science-applications-using-fastapi-823be8a1d6a0&user=Farhad+Malik&userId=d9b237bc89f0&source=post_page-d9b237bc89f0----823be8a1d6a0---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F823be8a1d6a0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuild-and-host-fast-data-science-applications-using-fastapi-823be8a1d6a0&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F823be8a1d6a0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuild-and-host-fast-data-science-applications-using-fastapi-823be8a1d6a0&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://fastapi.tiangolo.com/#performance", "anchor_text": "ne of the fastest Python frameworks available"}, {"url": "https://pydantic-docs.helpmanual.io/", "anchor_text": "ydantic"}, {"url": "https://github.com/OAI/OpenAPI-Specification", "anchor_text": "OpenAPI"}, {"url": "http://json-schema.org/", "anchor_text": "JSON Schema"}, {"url": "https://fastapi.tiangolo.com/alternatives/#flask", "anchor_text": "here"}, {"url": "http://127.0.0.1:8000/redoc", "anchor_text": "http://127.0.0.1:8000/redoc"}, {"url": "http://localhost:8000/FTSE%20100", "anchor_text": "http://localhost:8000/FTSE%20100"}, {"url": "http://localhost:8000/openapi.json", "anchor_text": "http://localhost:8000/openapi.json"}, {"url": "https://fastapi.tiangolo.com/tutorial/", "anchor_text": "website"}, {"url": "https://medium.com/tag/python?source=post_page-----823be8a1d6a0---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/programming?source=post_page-----823be8a1d6a0---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/tag/technology?source=post_page-----823be8a1d6a0---------------technology-----------------", "anchor_text": "Technology"}, {"url": "https://medium.com/tag/fintech?source=post_page-----823be8a1d6a0---------------fintech-----------------", "anchor_text": "Fintech"}, {"url": "https://medium.com/tag/data-science?source=post_page-----823be8a1d6a0---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F823be8a1d6a0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuild-and-host-fast-data-science-applications-using-fastapi-823be8a1d6a0&user=Farhad+Malik&userId=d9b237bc89f0&source=-----823be8a1d6a0---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F823be8a1d6a0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuild-and-host-fast-data-science-applications-using-fastapi-823be8a1d6a0&user=Farhad+Malik&userId=d9b237bc89f0&source=-----823be8a1d6a0---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F823be8a1d6a0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuild-and-host-fast-data-science-applications-using-fastapi-823be8a1d6a0&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----823be8a1d6a0--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F823be8a1d6a0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuild-and-host-fast-data-science-applications-using-fastapi-823be8a1d6a0&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----823be8a1d6a0---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----823be8a1d6a0--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----823be8a1d6a0--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----823be8a1d6a0--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----823be8a1d6a0--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----823be8a1d6a0--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----823be8a1d6a0--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----823be8a1d6a0--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----823be8a1d6a0--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@farhadmalik?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@farhadmalik?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Farhad Malik"}, {"url": "https://medium.com/@farhadmalik/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "9.1K Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fd9b237bc89f0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuild-and-host-fast-data-science-applications-using-fastapi-823be8a1d6a0&user=Farhad+Malik&userId=d9b237bc89f0&source=post_page-d9b237bc89f0--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F7beb1a74b028&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuild-and-host-fast-data-science-applications-using-fastapi-823be8a1d6a0&newsletterV3=d9b237bc89f0&newsletterV3Id=7beb1a74b028&user=Farhad+Malik&userId=d9b237bc89f0&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}