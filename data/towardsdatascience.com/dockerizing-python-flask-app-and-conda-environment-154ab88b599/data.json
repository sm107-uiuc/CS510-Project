{"url": "https://towardsdatascience.com/dockerizing-python-flask-app-and-conda-environment-154ab88b599", "time": 1682995451.183042, "path": "towardsdatascience.com/dockerizing-python-flask-app-and-conda-environment-154ab88b599/", "webpage": {"metadata": {"title": "Dockerizing Python Flask app and Conda environment | by Vedran Markulj | Towards Data Science", "h1": "Dockerizing Python Flask app and Conda environment", "description": "Use Docker to package your Python Flask app and your Conda environment. Dockerize your Python Flask app and recreate your Conda Python environment."}, "outgoing_paragraph_urls": [{"url": "https://www.linkedin.com/in/vedranmarkulj/", "anchor_text": "https://www.linkedin.com/in/vedranmarkulj/", "paragraph_index": 31}, {"url": "https://medium.com/@vedranmarkulj", "anchor_text": "Medium", "paragraph_index": 32}, {"url": "https://www.linkedin.com/in/vedranmarkulj/", "anchor_text": "LinkedIn", "paragraph_index": 32}], "all_paragraphs": ["This post will describe how to dockerize your Python Flask app and recreate your Conda Python environment.", "So you are developing a Python Flask app, and you have set up a Conda virtual environment up on your local machine to run your app. Now you want to put your Python Flask app in a Docker image.", "Wouldn\u2019t it be nice if you could export your current Conda environment as a .yml file, describing what Python version your application is using and which Python libraries are required to run your application. Furthermore, use the exported .yml file to build a similar environment in a Docker image and run your Flask app in that environment.", "The following will describe exactly how you can accomplish all the above mentioned.", "Throughout this post, I will use the following mini Flask application.", "Create a folder where you want your project files to be. I have created a folder called \u2018docker_conda_template\u2019 on my local machine. In that folder, I have created a file called \u2018api.py\u2019 which contains the above Python code.", "To recreate a Conda python environment in the docker image, which corresponds to the Conda python environment we have created on our local machine, we first need to export an environment.yml file from our local Conda Python environment.", "To do that you first need to cd into the folder where you want your environment.yml file to be created.", "Now we want to activate a Conda environment which has the necessary Python version installed and has all the libraries installed required to run our app. I assume you are familiar with the Conda CLI, therefore this post will not explain how to use Conda.", "In order to export your environment into a .yml file run the following command.", "This will create the file \u2018environment.yml\u2019 in your current folder. The file will look something like this.", "The file contains three pieces of information. The name of the environment when it is created, what channels the libraries will be downloaded from and finally what Python version and libraries to install.", "The Dockerfile is where we put it all together and this is also the file which Docker will use to create an image with your Python application and all the requirements it needs to run e.g. our Conda environment as defined in our environment.yml file.", "The following is the final Dockerfile:", "We are not going to define how to install Conda on the image, for that purpose we will download and use an existing image which already has Conda installed and set up. This image is provided by continuum, it has Miniconda installed and set up. We will use their image as a basis for building ours. In order to use their image as a base image, we must state that in the Dockerfile. This is done in the first line \u201cFROM continuumio/miniconda:latest\u201d.", "To define a working directory in your image, we state \u201cWORKDIR /home/docker_conda_template\u201d.", "We also want to copy files such as our code and environment.yml file into the image. The following lines copy the file into the Docker image.", "We haven\u2019t yet created and discussed the file \u201cboot.sh\u201d. We will create and discuss this in a moment.", "The following lines in the Dockerfile run two commands then set an environment path to the Conda environment which will be set up based on our environment.yml file and finally exposes port 5000, meaning we will be able to interact with our Flask routes through that port.", "The first run command creates a Conda environment as specified in the environment.yml file. The second run command activates the created Conda environment.", "However, there are a few lines which we have been ignoring thus far. The last line in Dockerfile is an entry point. Meaning this will be run after the image is created, furthermore, this will be executed from a non-privileged user.", "In the entry point statement, we reference a file called booth.sh. The file contains the following.", "This file is a script which executes one command. This command starts the Gunicorn webserver, binds port 5000 to 80 and specifies that the Flask application to be run is in file api.", "Alternatively, we might drop this part entirely and just run the Flask web server by executing the api.py file. However, as Flask documentation states it, they are not recommending using the Flask built-in web server in production. Therefore, we want to run a production-ready webserver which Gunicorn is.", "In order to make this work, you need to create a file called boot.sh copy the above lines of code and save the file in the root folder, in my case this would be inside the folder \u2018docker_conda_template\u2019.", "Finally, there are two remaining lines in the Dockerfile to explain:", "The first line simply copies the boot.sh file into the docker image in the root folder which would be your working directory as specified in the Dockerfile. The second line runs a command which modifies the boot.sh file so it can be recognized as an executable file.", "To sum up now you should have the following folder/file structure.", "In order to build the docker image, you need to execute the following command.", "Start the Docker image by running the following command.", "Open a browser and visit localhost or localhost/test and you should get a response as defined in your api.py file.", "If you are interested to know more about me. Please visit my personal profile on LinkedIn https://www.linkedin.com/in/vedranmarkulj/", "Thanks for reading. If you are interested in future posts about Machine Learning and similar topics written by me, follow me on Medium and LinkedIn. More articles are on the way.", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F154ab88b599&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdockerizing-python-flask-app-and-conda-environment-154ab88b599&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdockerizing-python-flask-app-and-conda-environment-154ab88b599&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdockerizing-python-flask-app-and-conda-environment-154ab88b599&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdockerizing-python-flask-app-and-conda-environment-154ab88b599&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----154ab88b599--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----154ab88b599--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@vedranmarkulj?source=post_page-----154ab88b599--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@vedranmarkulj?source=post_page-----154ab88b599--------------------------------", "anchor_text": "Vedran Markulj"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F14ed4aa95158&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdockerizing-python-flask-app-and-conda-environment-154ab88b599&user=Vedran+Markulj&userId=14ed4aa95158&source=post_page-14ed4aa95158----154ab88b599---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F154ab88b599&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdockerizing-python-flask-app-and-conda-environment-154ab88b599&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F154ab88b599&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdockerizing-python-flask-app-and-conda-environment-154ab88b599&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "http://www.easy-analysis.com/dockerizing-python-flask-app-and-conda-environment/", "anchor_text": "www.easy-analysis.com"}, {"url": "https://docs.docker.com/engine/reference/commandline/docker/", "anchor_text": "here"}, {"url": "https://conda.readthedocs.io/en/latest/", "anchor_text": "here"}, {"url": "https://www.linkedin.com/in/vedranmarkulj/", "anchor_text": "https://www.linkedin.com/in/vedranmarkulj/"}, {"url": "https://medium.com/@vedranmarkulj", "anchor_text": "Medium"}, {"url": "https://www.linkedin.com/in/vedranmarkulj/", "anchor_text": "LinkedIn"}, {"url": "https://medium.com/tag/docker?source=post_page-----154ab88b599---------------docker-----------------", "anchor_text": "Docker"}, {"url": "https://medium.com/tag/python-flask?source=post_page-----154ab88b599---------------python_flask-----------------", "anchor_text": "Python Flask"}, {"url": "https://medium.com/tag/conda?source=post_page-----154ab88b599---------------conda-----------------", "anchor_text": "Conda"}, {"url": "https://medium.com/tag/environment?source=post_page-----154ab88b599---------------environment-----------------", "anchor_text": "Environment"}, {"url": "https://medium.com/tag/anaconda?source=post_page-----154ab88b599---------------anaconda-----------------", "anchor_text": "Anaconda"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F154ab88b599&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdockerizing-python-flask-app-and-conda-environment-154ab88b599&user=Vedran+Markulj&userId=14ed4aa95158&source=-----154ab88b599---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F154ab88b599&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdockerizing-python-flask-app-and-conda-environment-154ab88b599&user=Vedran+Markulj&userId=14ed4aa95158&source=-----154ab88b599---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F154ab88b599&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdockerizing-python-flask-app-and-conda-environment-154ab88b599&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----154ab88b599--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F154ab88b599&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdockerizing-python-flask-app-and-conda-environment-154ab88b599&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----154ab88b599---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----154ab88b599--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----154ab88b599--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----154ab88b599--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----154ab88b599--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----154ab88b599--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----154ab88b599--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----154ab88b599--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----154ab88b599--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@vedranmarkulj?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@vedranmarkulj?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Vedran Markulj"}, {"url": "https://medium.com/@vedranmarkulj/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "68 Followers"}, {"url": "https://softwarejargon.com/", "anchor_text": "https://softwarejargon.com/"}, {"url": "https://www.linkedin.com/in/vedranmarkulj/", "anchor_text": "https://www.linkedin.com/in/vedranmarkulj/"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F14ed4aa95158&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdockerizing-python-flask-app-and-conda-environment-154ab88b599&user=Vedran+Markulj&userId=14ed4aa95158&source=post_page-14ed4aa95158--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fusers%2F14ed4aa95158%2Flazily-enable-writer-subscription&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdockerizing-python-flask-app-and-conda-environment-154ab88b599&user=Vedran+Markulj&userId=14ed4aa95158&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}