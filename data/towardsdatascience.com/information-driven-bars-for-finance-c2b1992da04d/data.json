{"url": "https://towardsdatascience.com/information-driven-bars-for-finance-c2b1992da04d", "time": 1683002791.7362921, "path": "towardsdatascience.com/information-driven-bars-for-finance-c2b1992da04d/", "webpage": {"metadata": {"title": "Information-Driven Bars for Finance | by Mirko Savasta | Towards Data Science", "h1": "Information-Driven Bars for Finance", "description": "As you may know, raw financial data is made of ticks, which represent market transactions. Every market transaction is characterized, among other things, by a date, a time, a price and the number of\u2026"}, "outgoing_paragraph_urls": [{"url": "https://www.amazon.com/dp/1119482089", "anchor_text": "Advances in Financial Machine Learning", "paragraph_index": 4}, {"url": "https://towardsdatascience.com/information-driven-bars-for-financial-machine-learning-imbalance-bars-dda9233058f0", "anchor_text": "interesting article", "paragraph_index": 21}], "all_paragraphs": ["As you may know, raw financial data is made of ticks, which represent market transactions. Every market transaction is characterized, among other things, by a date, a time, a price and the number of contracts or shares that have been exchanged.", "To represent financial time series you normally use bars, which are aggregations of ticks. But there are several ways to aggregate information; for this reason, many kinds of bars exist (time bars are the most common).", "Observe the market for 5 minutes, note down the first observed price (open), the lowest price (low), the highest price (high) and the price of the last tick that belongs to the chosen time interval (close) and you will have built a 5 minute bar!", "However, markets, unlike humans, do not follow a time clock. They do not process information at constant time intervals. They rather do so event by event, transaction by transaction. So, what if we abandoned the time clock and started sampling market prices using a different logic? We could use the volume clock to build volume bars for example; or we could build tick bars and sample prices every time we observe a given amount of new transactions. Volume and tick bars are known sampling methods and I do not think they deserve an entire article as you can find plenty of information on the web.", "But, what happens if we use an information clock? What if we sampled prices every time an unexpected amount of information comes to the market? Well, this is precisely the idea behind information-driven bars. Interesting, isn\u2019t it? We are going to introduce the simplest kind of information-driven bars: tick imbalance bars. Marcos Lopez De Prado presents them in his book Advances in Financial Machine Learning (AFML).", "In a few words, to build this kind of bars we assume that tick imbalance represents informed trading (tick imbalance will be defined soon). So, whenever we observe an unexpected amount of imbalance we sample market prices and create a new bar. Using De Prado\u2019s words:", "The purpose of information-driven bars is to sample more frequently when new information arrives to the market. In this context, the word \u201cinformation\u201d is used in a market microstructural sense. [\u2026] By synchronizing sampling with the arrival of informed traders, we may be able to make decisions before prices reach a new equilibrium level.", "Consider a sequence of ticks {(p_t, v_t)} for t=1, \u2026, T, where p_t and v_t represent price and volume at time t. The tick-rule defines a sequence of tick signs {b_t} for t=1, \u2026, T where b_t can either be 1 or -1.", "Next, the tick imbalance can be defined as a partial sum of tick signs over T ticks.", "Now, we should sample bars whenever tick imbalances exceed our expectations. This means we must compute a running imbalance for each bar and compare it with our expectation. We will close the bar when the absolute value of the current imbalance is greater than the absolute expected imbalance.", "The book defines expected imbalance at the beginning of each bar as the product between the expected number of ticks per bar (T) and the unconditional expectation of the tick sign (b_t). Furthermore, the book states that we can estimate these moments using exponentially weighted moving averages (EWMAs).", "Marcos Lopez De Prado points out that we should use the information clock to sample market prices. Tick Imbalance bars are just the simplest application of this concept and we should build on that to uncover interesting insights. We should come up with new definitions of information and expected information. After all, Marcos Lopez De Prado has just shown us the way and, probably, we should not take his implementation details too seriously. Why?", "First of all, the proposed bar generating mechanism is heavily affected by how you initialize its parameters \u2014 to produce imbalance bars you must initialize the expected number of ticks per bar (init_T below), the unconditional expectation of the tick sign (E[b_t]) and the alphas that define the two exponential averages used to update our expectations.", "The following plot represents results obtained with more than a thousand simulations. It shows that the number of bars produced for the same time interval decreases as the alpha that defines EWMA(T) increases. In addition, the number of bars decreases when we increase the value of T used to initialize the mechanism.", "Naturally enough, the higher is the number of resulting bars, the lower is the amount of information we incorporate in each bar.", "This means that when we choose how to initialize the bar generating mechanism we are roughly choosing the imbalance threshold we will use to close our bars.", "The plots above only show cases in which the mechanism produced at least 3 bars. It\u2019s important to acknowledge that if the initialized expected imbalance is too high the mechanism will produce only a few bars or will even have a hard time generating a single bar; if it is too low we will instead produce too many bars. Our mechanism does not automatically adjust when your choice of initial parameters is completely wrong.", "Secondly, although I like the idea that our expectations are dynamic, I do not really understand the suggested implementation. If we sample the market following AFML, we get heterogeneous bars: each bar has a different information content. And this may be great but the point is that the amount of information we enclose in each bar and its dynamics are almost out of our control.", "Have another look at the definition of expected imbalance above. The absolute value of the unconditional expectation of b_t can assume values in [0, 1] so what really defines the expected imbalance is the expected number of ticks. This means that the expected imbalance of the next bar could be higher (lower) if it took more (less) ticks to form the last bars. But how can you justify this idea? Why should your imbalance expectations increase if it just took a lot of ticks to reach the imbalance level you were expecting before closing the last bar?", "The threshold at which you close a bar should be determined by other things. Ideally, I would like to close a bar when the current imbalance reaches a significant threshold, a threshold that tells me that prices will be somehow affected in the next X volume bars for example. Whether this significant threshold should be constant or not is a matter of research.", "In light of the points mentioned above, I decided (for now) to stick with an implementation characterized by constant imbalance expectations. This means that every time I want to build TIBs I must specify the imbalance threshold that will be used to close every bar.", "As Gerald Martinez wrote in his interesting article about imbalance bars, \u201cthe objective of imbalance bars is to early detect a shift in the directionality of the market before a new equilibrium is reached\u201d. With this objective in mind, I will keep studying to understand how to improve my understanding of the concept. In particular, I would like to understand if significant thresholds exist and whether or not they can be specified dynamically.", "I wrote this article to share my thoughts and start a discussion. Hence, if you have any question or doubt your comments are welcome.", "The probability of achieving an imbalance level depends on the tick horizon (the number of ticks you are calculating your imbalance on). The plot below shows the empirical distributions of rolling imbalances for different tick horizons.", "Below you find a plot of TIBs created with a constant expected imbalance paradigm. The blue dots are prices sampled with a volume clock.", "Every plot is based on tick data for the DAX futures contract with expiration December 2019. I used one month of ticks from 01/11/19 to 30/11/19. You may obtain different results with different data.", "Below you find some spaghetti code to replicate my analysis and even create imbalance bars with your tick data. If you modify the spaghetti script a bit, you will be able to create bar ids using a constant expected imbalance paradigm.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "AI enthusiast with a Growth Mindset, a passion for Lifelong Learning, Economics and Innovative ideas."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fc2b1992da04d&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Finformation-driven-bars-for-finance-c2b1992da04d&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Finformation-driven-bars-for-finance-c2b1992da04d&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Finformation-driven-bars-for-finance-c2b1992da04d&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Finformation-driven-bars-for-finance-c2b1992da04d&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----c2b1992da04d--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----c2b1992da04d--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@savastamirko?source=post_page-----c2b1992da04d--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@savastamirko?source=post_page-----c2b1992da04d--------------------------------", "anchor_text": "Mirko Savasta"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F9fff65a0aeb3&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Finformation-driven-bars-for-finance-c2b1992da04d&user=Mirko+Savasta&userId=9fff65a0aeb3&source=post_page-9fff65a0aeb3----c2b1992da04d---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fc2b1992da04d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Finformation-driven-bars-for-finance-c2b1992da04d&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fc2b1992da04d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Finformation-driven-bars-for-finance-c2b1992da04d&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://www.pexels.com/@lorenzocafaro?utm_content=attributionCopyText&utm_medium=referral&utm_source=pexels", "anchor_text": "Lorenzo"}, {"url": "https://www.pexels.com/photo/black-and-white-business-chart-computer-241544/?utm_content=attributionCopyText&utm_medium=referral&utm_source=pexels", "anchor_text": "Pexels"}, {"url": "https://www.amazon.com/dp/1119482089", "anchor_text": "Advances in Financial Machine Learning"}, {"url": "https://towardsdatascience.com/information-driven-bars-for-financial-machine-learning-imbalance-bars-dda9233058f0", "anchor_text": "interesting article"}, {"url": "https://medium.com/tag/information-driven-bars?source=post_page-----c2b1992da04d---------------information_driven_bars-----------------", "anchor_text": "Information Driven Bars"}, {"url": "https://medium.com/tag/trading?source=post_page-----c2b1992da04d---------------trading-----------------", "anchor_text": "Trading"}, {"url": "https://medium.com/tag/de-prado-advances-in-ml?source=post_page-----c2b1992da04d---------------de_prado_advances_in_ml-----------------", "anchor_text": "De Prado Advances In Ml"}, {"url": "https://medium.com/tag/financial-data-sampling?source=post_page-----c2b1992da04d---------------financial_data_sampling-----------------", "anchor_text": "Financial Data Sampling"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fc2b1992da04d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Finformation-driven-bars-for-finance-c2b1992da04d&user=Mirko+Savasta&userId=9fff65a0aeb3&source=-----c2b1992da04d---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fc2b1992da04d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Finformation-driven-bars-for-finance-c2b1992da04d&user=Mirko+Savasta&userId=9fff65a0aeb3&source=-----c2b1992da04d---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fc2b1992da04d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Finformation-driven-bars-for-finance-c2b1992da04d&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----c2b1992da04d--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fc2b1992da04d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Finformation-driven-bars-for-finance-c2b1992da04d&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----c2b1992da04d---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----c2b1992da04d--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----c2b1992da04d--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----c2b1992da04d--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----c2b1992da04d--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----c2b1992da04d--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----c2b1992da04d--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----c2b1992da04d--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----c2b1992da04d--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@savastamirko?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@savastamirko?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Mirko Savasta"}, {"url": "https://medium.com/@savastamirko/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "71 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F9fff65a0aeb3&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Finformation-driven-bars-for-finance-c2b1992da04d&user=Mirko+Savasta&userId=9fff65a0aeb3&source=post_page-9fff65a0aeb3--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fusers%2F9fff65a0aeb3%2Flazily-enable-writer-subscription&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Finformation-driven-bars-for-finance-c2b1992da04d&user=Mirko+Savasta&userId=9fff65a0aeb3&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}