{"url": "https://towardsdatascience.com/pid-controller-intro-26fda41aaa59", "time": 1683002244.4705532, "path": "towardsdatascience.com/pid-controller-intro-26fda41aaa59/", "webpage": {"metadata": {"title": "PID Controller Intro. Controlling a Self-Driving Car to\u2026 | by Jeremy Zhang | Towards Data Science", "h1": "PID Controller Intro", "description": "PID controller is a way to regulate an application to smoothly follow a value or a path. I first learnt the idea here, which introduced how to drive a car to follow a specific path. Although a full\u2026"}, "outgoing_paragraph_urls": [{"url": "https://classroom.udacity.com/courses/cs373/lessons/48743150/concepts/487283450923", "anchor_text": "here", "paragraph_index": 0}, {"url": "https://github.com/MJeremy2017/Machine-Learning-Models/blob/master/Control/PID.ipynb", "anchor_text": "here", "paragraph_index": 4}, {"url": "https://github.com/MJeremy2017/Machine-Learning-Models/blob/master/Control/PID.ipynb", "anchor_text": "full implementation", "paragraph_index": 23}], "all_paragraphs": ["PID controller is a way to regulate an application to smoothly follow a value or a path. I first learnt the idea here, which introduced how to drive a car to follow a specific path. Although a full application explanation can be extensively complex, it summarised the math behind it in a super elegant and concise way, and made the idea can easily extended to many real life problems. In this post, let\u2019s follow the key structure and explore how PID controller works.", "In this post, we will follow the path:", "Let\u2019s learn the idea through an implementation of a problem. Suppose we have a robot car object, and we hope the car to control itself to follow a path, which is going to be a straight line in this case, and the only way for the car to control itself is by adjusting its steering or direction so that it can gradually and gracefully approaching the path and follow that path once reach there. In a nutshell, the problem is to:", "Control a self-driving car to follow a straight line by changing its steering", "The full implementation of the car object is here(explanation of the whole object is behind our scope). Basically the robot object follows the structure:", "The set function sets the car\u2019s initial coordinates and direction. And what we need to know of the object is that each time we need to give instruction of steering to the robot so that it can adjust itself to approach the path.", "P stands for proportional. The thing is that our robot sits in a 2 dimensional world with coordinates (x, y) . Assume the goal path is y = 0 , then the current error towards the goal is y \u2014 0 = y , and based on the error, we should adjust the car\u2019s steering accordingly. So how to adjust the steering so that we can decrease the error quickly? What would you do if you are driving a car which is away from your target path?", "One straight forward way is to adjust steering proportionally to error, which means the further you are away from the target the larger angle you steer your car. With this in mind, we have our first solution:", "We adjust the car in n steps, and in each step we steer the car proportionally to error robot.y :", "where tau is the weight we assign to the error. (Note: the car moves with speed = 1 , and since timestamp is 1, so distance = speed * 1 = speed )", "Let\u2019s plot the trajectory of the car:", "We set our robot start from (0, 1) heading horizontally. The trajectory oscillates through out the target path. It looks like that our steering is too drastic that the car overshoots our target and when it tries to steer back it overshoots again. Clearly it gonna be a headache sitting inside such a car. So can we decrease our steering angle when we approach the target?", "The question leads to PD control, where D stands for derivative. The idea is that as the error reduces, our car should counter steers in order to avoid overshooting instead of constantly steering down which results in oscillating.", "So the new term we should add into our controlling process is \u03b4y/\u03b4t , where \u03b4t is 1, so \u03b4y = current_y \u2014 last_y . The implementation would be:", "The derivative term here is dev = robot.y \u2014 prev_cte and tau_d is the weight of it. Result trajectory would look like:", "Looks perfect! Now everything looks all good, but in fact this model is not robust. What I mean is what if there is an inherent system defect? What if your wheel at the beginning has a little glitch and always shift to another direction, is PD able to overcome this?", "The answer is no. Let\u2019s get to an example:", "Here we set_steering_drift adds some noise to the car\u2019s orientation, the result turns to be:", "It oscillates far away from our target path. The reason is that although our car is steering towards the goal, but it can not offset the inherent system bias.", "To overcome the problem, we need the third term I, which stands for integral, it helps to monitor the error, and if the error is not reduced in a certain period of time, the car should add more steering.", "The integral in our case is actually summation of errors over each step, and the implementation would be:", "At each step, current error robot.y is added to sum_cte and tau_i is the weight of this term. So by adding this term, the car avoids the chance of oscillating in somewhere far away the target as this term will continuously grow larger and the steering angle would adjust accordingly.", "With the same steering noise, this time the robot car is still able to make its way to the goal.", "Another thing that need to notice is the weights of P, I and D. These parameters need to be tuned carefully, and different weight selection can result in significant different performance. You can test and play it out yourself by looking into the full implementation.", "All in all, PID controller is actually quite interesting, especially being explained in such intuitive and simple way. You can think of the three components P, I, and D as three different persons in charge of three different aspects of one task:", "Lastly, application of PID controller definitely not just limited for this use case and you can apply and explore more fun!", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Hmm\u2026I am a data scientist looking to catch up the tide\u2026"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F26fda41aaa59&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpid-controller-intro-26fda41aaa59&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpid-controller-intro-26fda41aaa59&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpid-controller-intro-26fda41aaa59&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpid-controller-intro-26fda41aaa59&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----26fda41aaa59--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----26fda41aaa59--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://meatba11.medium.com/?source=post_page-----26fda41aaa59--------------------------------", "anchor_text": ""}, {"url": "https://meatba11.medium.com/?source=post_page-----26fda41aaa59--------------------------------", "anchor_text": "Jeremy Zhang"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Ff37783fc8c26&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpid-controller-intro-26fda41aaa59&user=Jeremy+Zhang&userId=f37783fc8c26&source=post_page-f37783fc8c26----26fda41aaa59---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F26fda41aaa59&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpid-controller-intro-26fda41aaa59&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F26fda41aaa59&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpid-controller-intro-26fda41aaa59&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://classroom.udacity.com/courses/cs373/lessons/48743150/concepts/487283450923", "anchor_text": "here"}, {"url": "https://github.com/MJeremy2017/Machine-Learning-Models/blob/master/Control/PID.ipynb", "anchor_text": "here"}, {"url": "https://github.com/MJeremy2017/Machine-Learning-Models/blob/master/Control/PID.ipynb", "anchor_text": "full implementation"}, {"url": "https://classroom.udacity.com/courses/cs373/lessons/48743150/concepts/4a5b7329-1df6-48d0-9f5b-146f9e58ad22", "anchor_text": "https://classroom.udacity.com/courses/cs373/lessons/48743150/concepts/4a5b7329-1df6-48d0-9f5b-146f9e58ad22"}, {"url": "https://medium.com/tag/self-driving-cars?source=post_page-----26fda41aaa59---------------self_driving_cars-----------------", "anchor_text": "Self Driving Cars"}, {"url": "https://medium.com/tag/machine-learning-ai?source=post_page-----26fda41aaa59---------------machine_learning_ai-----------------", "anchor_text": "Machine Learning Ai"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----26fda41aaa59---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F26fda41aaa59&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpid-controller-intro-26fda41aaa59&user=Jeremy+Zhang&userId=f37783fc8c26&source=-----26fda41aaa59---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F26fda41aaa59&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpid-controller-intro-26fda41aaa59&user=Jeremy+Zhang&userId=f37783fc8c26&source=-----26fda41aaa59---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F26fda41aaa59&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpid-controller-intro-26fda41aaa59&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----26fda41aaa59--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F26fda41aaa59&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpid-controller-intro-26fda41aaa59&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----26fda41aaa59---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----26fda41aaa59--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----26fda41aaa59--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----26fda41aaa59--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----26fda41aaa59--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----26fda41aaa59--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----26fda41aaa59--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----26fda41aaa59--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----26fda41aaa59--------------------------------", "anchor_text": ""}, {"url": "https://meatba11.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://meatba11.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Jeremy Zhang"}, {"url": "https://meatba11.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "1.1K Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Ff37783fc8c26&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpid-controller-intro-26fda41aaa59&user=Jeremy+Zhang&userId=f37783fc8c26&source=post_page-f37783fc8c26--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fcdbd8b83c584&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpid-controller-intro-26fda41aaa59&newsletterV3=f37783fc8c26&newsletterV3Id=cdbd8b83c584&user=Jeremy+Zhang&userId=f37783fc8c26&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}