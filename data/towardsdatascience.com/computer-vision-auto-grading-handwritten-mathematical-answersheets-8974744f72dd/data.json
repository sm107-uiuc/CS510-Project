{"url": "https://towardsdatascience.com/computer-vision-auto-grading-handwritten-mathematical-answersheets-8974744f72dd", "time": 1683002426.778454, "path": "towardsdatascience.com/computer-vision-auto-grading-handwritten-mathematical-answersheets-8974744f72dd/", "webpage": {"metadata": {"title": "Computer Vision \u2014 Auto grading Handwritten Mathematical Answersheets | by Divyaprabha M | Towards Data Science", "h1": "Computer Vision \u2014 Auto grading Handwritten Mathematical Answersheets", "description": "Grading is an essential part of education. Assessing each answer sheet manually, offering fair, unbiased and valid grade is difficult most of the time. This article is about my internship project\u2026"}, "outgoing_paragraph_urls": [{"url": "https://medium.com/u/9adb8b8d7e98?source=post_page-----8974744f72dd--------------------------------", "anchor_text": "Bijon Guha", "paragraph_index": 0}, {"url": "https://github.com/divyaprabha123/Autograding-handwritten-mathematical-worksheets/", "anchor_text": "GitHub", "paragraph_index": 4}, {"url": "https://opencv.org/", "anchor_text": "openCV", "paragraph_index": 8}, {"url": "https://docs.opencv.org/3.4/d4/d73/tutorial_py_contours_begin.html", "anchor_text": "drawContours()", "paragraph_index": 15}, {"url": "https://github.com/divyaprabha123/Autograding-handwritten-mathematical-worksheets/blob/d074738c2e1db6b4619e9930f576439b309d1f37/utils_functions.py#L426-L570", "anchor_text": "extract_line", "paragraph_index": 23}, {"url": "https://github.com/divyaprabha123/Autograding-handwritten-mathematical-worksheets/blob/d074738c2e1db6b4619e9930f576439b309d1f37/utils_functions.py#L636-L725", "anchor_text": "text_segment", "paragraph_index": 24}, {"url": "http://yann.lecun.com/exdb/mnist/", "anchor_text": "MNIST", "paragraph_index": 26}, {"url": "https://www.kaggle.com/xainano/handwrittenmathsymbols", "anchor_text": "Kaggle\u2019s Handwritten Mathematical symbols", "paragraph_index": 26}, {"url": "https://pdfs.semanticscholar.org/d80b/4375171d97a8c8b7daa8a1b9170429126f5d.pdf", "anchor_text": "Deep Columnar Convolutional Neural Network (DCCNN)", "paragraph_index": 28}, {"url": "https://github.com/divyaprabha123/Autograding-handwritten-mathematical-worksheets/blob/d074738c2e1db6b4619e9930f576439b309d1f37/DCCNN%20-%20training.ipynb", "anchor_text": "DCCNN_training.ipynb", "paragraph_index": 29}, {"url": "https://github.com/divyaprabha123/Autograding-handwritten-mathematical-worksheets/blob/d074738c2e1db6b4619e9930f576439b309d1f37/utils_functions.py#L573-L634", "anchor_text": "evaluation", "paragraph_index": 33}], "all_paragraphs": ["Grading is an essential part of education. Assessing each answer sheet manually, offering fair, unbiased and valid grade is difficult most of the time. This article is about my internship project with my mentor Bijon Guha on building a computer vision model that will automatically evaluate the answer sheets thereby ensuring that the grades are based solely on the student\u2019s performance.", "Below are the sample worksheets we are going to examine and grade.", "Each of these worksheets was written by different people. There will be variations in line width, character style in the same page, pen nib width and character spacing, etc.", "The idea is to correct each line in the worksheet and mark the lines with boxes. Where the green box represents that the line is correct and the red box represents the line is in-correct.", "( Note: I have not added all the code here, if you want to check you can visit my GitHub where I have the tutorial in a ipynb notebook )", "There are two modules in the workflow Workspace detection module and Analysis Module. Workspace Detection module is responsible for detecting multiple work spaces in a given sheet of paper.", "Analysis module is responsible for detecting and localizing characters in lines in any given single workspace, and mathematically analyzing them and then drawing red, green boxes depending upon their correctness.", "Workspace detection module assumes that there are valid rectangular boxes in the given scanned worksheet. This image below shows the worksheet design. Three largest rectangular boxes in this worksheet are the work-spaces.", "Workspace detection module is done using openCV. We will first find the rectangular boxes, then sort them based on their positions in the worksheet. Since there are many rectangles in the worksheet, we will have to select the valid work-spaces among the other rectangles. Let\u2019s see how each step is done", "Rectangles are formed by two horizontal and vertical lines. So the first step is to find all the horizontal and vertical lines ignoring digits, symbols or anything that is written on the worksheet.", "This code below will first create a binary image called \u201cvertical_lines_img\u201d which contains all the vertical lines that are present in the worksheet, then another binary image called \u201chorizontal_lines_img\u201d which contains all horizontal lines that are present in the worksheet.", "Next, we have to add image \u201cvertical_lines_img\u201d with \u201chorizontal_lines_img\u201d to get the final image.", "Contours are defined as the line joining all the points along the boundary of an image that are having the same intensity.", "OpenCV has findContour() function that helps in extracting the contours from the image. Each individual contour is a Numpy array of (x,y) coordinates of boundary points of the object. We can use that to find all the objects in the final image (Only objects in the final image are the rectangles).", "Since final image is just the binary version of the original image coordinates of the rectangles in the final image is equal to the coordinates of the rectangles in the original image.", "Now we know the coordinates lets draw them on the original image using openCV\u2019s drawContours() function.", "Now we have found all the rectangles, its time to sort them top-to-bottom based on their coordinates. This code below will do that for us.", "sort_contours function will return contours and bounding boxes(top-left and bottom-right coordinates) sorted in the method we have given. In this case method is top to bottom.", "There are many rectangles, but we only need the three largest ones. How can we select the three largest rectangles?\u2026. One answer is to find the area of the rectangles, then choose the top 3 rectangles which have the maximum area.", "These selected rectangles are the work-spaces that are then extracted from the worksheet and sent to the Analysis Module.", "Analysis module as explained above will first detect the lines, predict the characters in each line and finally forms an equation with the predicted characters then evaluate them by marking boxes.", "Detecting the lines is the tricky part, everyone has their way of solving equations some solve step by step, some can solve in just one line, some might write steps for pages and some writes exponents way away from the equation confusing the module to treat those exponents as a separate line.", "Our line detection module assumes that there is a sufficient gap between lines and there is some intersection between exponential characters and line. First, the detected work-spaces are converted to binary images then compressed in a single array to take the forward derivative. Wherever there is a line there will be a change in the derivative.", "The above code is just a glimpse of how line extraction works. To see complete code click extract_line.", "After detecting all the lines we have to send the extracted line images to the text_segment function which will use openCV\u2019s find contours to segment the characters and sort them using the function sort_contours described above where method is now set to left-to-right.", "It\u2019s easy for us to say whether the given number is an exponent or not but for the model it\u2019s not that easy. Assuming that the exponents are at-least above half of the line, we can drew a baseline at the center of the image any character which is above the baseline is considered as an exponent.", "We can use MNIST dataset for digits (28*28 pixels) and Kaggle\u2019s Handwritten Mathematical symbols dataset for symbols(45*45 pixels) to train the model.", "Images of symbols are preprocessed in the same way as MNIST digits before training. The reason for preprocessing is that the two data-sets we have chosen have different characteristics like dimensions, thickness and line width this makes hard for the deep learning model to find the patterns. Preprocessing helps us reduce the variations among digits and symbols.", "Almost 60,000 images of digits and preprocessed symbols were trained on Deep Columnar Convolutional Neural Network (DCCNN) a single deep and wide neural network architecture that offers near state-of-the-art performance like ensemble models on various image classification challenges, such as MNIST, CIFAR-10, and CIFAR-100 datasets. This model achieved atmost 96 % accuracy.", "To see training code click DCCNN_training.ipynb", "Evaluation is the last and the most important part. To solve any equation we can use python\u2019s eval method.", "The eval method parses the expression passed to it and runs python expression(code) within the program", "This is an example of how eval works", "Steps involved in evaluation process are,", "Let\u2019s take an example, say the question is to solve the equation A*x\u00b2 + B*y", "A green box indicates the line is correct, whereas red indicates the line is wrong.", "The first and the last line is correct, on solving these lines we get 595 which matches with the actual answer.", "The third line (595 + 92) is also wrong, on solving this line we get 684 which again is not equal to 595.", "Let\u2019s summarize, the scanned worksheet is sent to the work-spaces detection module it will return all the rectangular work-spaces in the given worksheet, then the detected work-spaces are passed to line extraction module to extract all the lines. The extracted lines are then sent to character segmentation module it will segment the character and the deep learning model DCCNN will predict the digit/symbol. Finally, evaluation module will assess the line and draw red/green bounding box.", "Automating grading process not only helps the teachers and also creates a comfortable learning experience for the students. This solution can be made even cooler by recognizing more complex mathematical equations like differential integral equations, recognition of cursive handwriting where the character is not separated, detecting plagiarism and recognizing chemical equations.", "Thanks for reading till the end !!... If you have enjoyed this post let me know by clapping and I\u2019d be very grateful if you\u2019d help it spread by sharing with your friends :). \u270c\ufe0f", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F8974744f72dd&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcomputer-vision-auto-grading-handwritten-mathematical-answersheets-8974744f72dd&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcomputer-vision-auto-grading-handwritten-mathematical-answersheets-8974744f72dd&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcomputer-vision-auto-grading-handwritten-mathematical-answersheets-8974744f72dd&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcomputer-vision-auto-grading-handwritten-mathematical-answersheets-8974744f72dd&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----8974744f72dd--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----8974744f72dd--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@dhivyaprabhamurugesan?source=post_page-----8974744f72dd--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@dhivyaprabhamurugesan?source=post_page-----8974744f72dd--------------------------------", "anchor_text": "Divyaprabha M"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Ff4a1bef0b5d9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcomputer-vision-auto-grading-handwritten-mathematical-answersheets-8974744f72dd&user=Divyaprabha+M&userId=f4a1bef0b5d9&source=post_page-f4a1bef0b5d9----8974744f72dd---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F8974744f72dd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcomputer-vision-auto-grading-handwritten-mathematical-answersheets-8974744f72dd&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F8974744f72dd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcomputer-vision-auto-grading-handwritten-mathematical-answersheets-8974744f72dd&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@jeswinthomas?utm_source=medium&utm_medium=referral", "anchor_text": "Jeswin Thomas"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://medium.com/u/9adb8b8d7e98?source=post_page-----8974744f72dd--------------------------------", "anchor_text": "Bijon Guha"}, {"url": "https://github.com/divyaprabha123/Autograding-handwritten-mathematical-worksheets/", "anchor_text": "GitHub"}, {"url": "https://opencv.org/", "anchor_text": "openCV"}, {"url": "https://docs.opencv.org/3.4/d4/d73/tutorial_py_contours_begin.html", "anchor_text": "drawContours()"}, {"url": "https://www.pyimagesearch.com/2015/04/20/sorting-contours-using-python-and-opencv/", "anchor_text": "Code Reference"}, {"url": "https://github.com/divyaprabha123/Autograding-handwritten-mathematical-worksheets/blob/d074738c2e1db6b4619e9930f576439b309d1f37/utils_functions.py#L426-L570", "anchor_text": "extract_line"}, {"url": "https://github.com/divyaprabha123/Autograding-handwritten-mathematical-worksheets/blob/d074738c2e1db6b4619e9930f576439b309d1f37/utils_functions.py#L636-L725", "anchor_text": "text_segment"}, {"url": "http://yann.lecun.com/exdb/mnist/", "anchor_text": "MNIST"}, {"url": "https://www.kaggle.com/xainano/handwrittenmathsymbols", "anchor_text": "Kaggle\u2019s Handwritten Mathematical symbols"}, {"url": "https://pdfs.semanticscholar.org/d80b/4375171d97a8c8b7daa8a1b9170429126f5d.pdf", "anchor_text": "Deep Columnar Convolutional Neural Network (DCCNN)"}, {"url": "https://github.com/divyaprabha123/Autograding-handwritten-mathematical-worksheets/blob/d074738c2e1db6b4619e9930f576439b309d1f37/DCCNN%20-%20training.ipynb", "anchor_text": "DCCNN_training.ipynb"}, {"url": "https://github.com/divyaprabha123/Autograding-handwritten-mathematical-worksheets/blob/d074738c2e1db6b4619e9930f576439b309d1f37/utils_functions.py#L573-L634", "anchor_text": "evaluation"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----8974744f72dd---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/tag/computer-vision?source=post_page-----8974744f72dd---------------computer_vision-----------------", "anchor_text": "Computer Vision"}, {"url": "https://medium.com/tag/deep-learning?source=post_page-----8974744f72dd---------------deep_learning-----------------", "anchor_text": "Deep Learning"}, {"url": "https://medium.com/tag/image-processing?source=post_page-----8974744f72dd---------------image_processing-----------------", "anchor_text": "Image Processing"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F8974744f72dd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcomputer-vision-auto-grading-handwritten-mathematical-answersheets-8974744f72dd&user=Divyaprabha+M&userId=f4a1bef0b5d9&source=-----8974744f72dd---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F8974744f72dd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcomputer-vision-auto-grading-handwritten-mathematical-answersheets-8974744f72dd&user=Divyaprabha+M&userId=f4a1bef0b5d9&source=-----8974744f72dd---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F8974744f72dd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcomputer-vision-auto-grading-handwritten-mathematical-answersheets-8974744f72dd&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----8974744f72dd--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F8974744f72dd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcomputer-vision-auto-grading-handwritten-mathematical-answersheets-8974744f72dd&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----8974744f72dd---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----8974744f72dd--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----8974744f72dd--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----8974744f72dd--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----8974744f72dd--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----8974744f72dd--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----8974744f72dd--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----8974744f72dd--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----8974744f72dd--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@dhivyaprabhamurugesan?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@dhivyaprabhamurugesan?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Divyaprabha M"}, {"url": "https://medium.com/@dhivyaprabhamurugesan/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "54 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Ff4a1bef0b5d9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcomputer-vision-auto-grading-handwritten-mathematical-answersheets-8974744f72dd&user=Divyaprabha+M&userId=f4a1bef0b5d9&source=post_page-f4a1bef0b5d9--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F36fac00bf048&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcomputer-vision-auto-grading-handwritten-mathematical-answersheets-8974744f72dd&newsletterV3=f4a1bef0b5d9&newsletterV3Id=36fac00bf048&user=Divyaprabha+M&userId=f4a1bef0b5d9&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}