{"url": "https://towardsdatascience.com/creating-a-fully-automated-daily-fantasy-sports-strategy-6842d2e1ccb6", "time": 1683003052.325391, "path": "towardsdatascience.com/creating-a-fully-automated-daily-fantasy-sports-strategy-6842d2e1ccb6/", "webpage": {"metadata": {"title": "Creating a fully automated daily fantasy sports strategy | by Nate Harner | Towards Data Science", "h1": "Creating a fully automated daily fantasy sports strategy", "description": "In late 2018, I (with help from my brother Zach) set out to create a fully automated daily fantasy sports (DFS) strategy. The goal was more to work on a fun side project over the holiday break than\u2026"}, "outgoing_paragraph_urls": [{"url": "https://en.wikipedia.org/wiki/Directed_acyclic_graph", "anchor_text": "Directed Acyclic Graph", "paragraph_index": 6}, {"url": "https://en.wikipedia.org/wiki/Linear_regression", "anchor_text": "Linear Regression", "paragraph_index": 11}, {"url": "https://en.wikipedia.org/wiki/XGBoost", "anchor_text": "XGB model", "paragraph_index": 12}, {"url": "https://www.kaggle.com/", "anchor_text": "Kaggle", "paragraph_index": 12}, {"url": "https://rotogrinders.com/resultsdb", "anchor_text": "RotoGrinders ResultsDB", "paragraph_index": 16}], "all_paragraphs": ["In late 2018, I (with help from my brother Zach) set out to create a fully automated daily fantasy sports (DFS) strategy. The goal was more to work on a fun side project over the holiday break than to make any money \u2014 I had never played any daily fantasy, but I\u2019m a semi-hardcore basketball fan, and a hardcore data fan.", "Here\u2019s the story of how, over the course of two months in late 2018, I developed a DFS strategy that, while not-quite profitable, was completely hands-off, and outperformed the average DraftKings player with an overall win rate of 40% and was profitable during the first 2 of 5 months of the 2018\u201319 NBA season.", "From the outset, I laid out a few requirements for the project. I initially limited the scope to NBA double-up and 50/50 competitions on DraftKings.", "Here\u2019s an overview of the steps the pipeline would take for \u201cLive-Mode\u201d, or the process that runs every day to enter fantasy leagues. \u201cSimulation-Mode\u201d (backtesting) is simply a reorganization and looping of some of these steps \u2014 we\u2019ll get into that later.", "In the following sections, I\u2019ll go into some (hopefully) interesting details on specific steps in the pipeline.", "In an ideal world, we could give a learning algorithm raw data, and out would pop the information we want (fantasy point predictions). This is the current state-of-the-art in many domains such as image recognition and natural language processing. Although this may very well be possible for this problem, I took the approach of creating handcrafted features that \u201cmanually\u201d extract higher order information ahead of time, rather than having the learning algorithm do this.", "To create these features, I built a tool called the \u201cFeature Framework\u201d that allows our features to be expressed as a Directed Acyclic Graph (DAG). Note that this is not my novel idea and is a common paradigm in research-driven trading. There are two main advantages of this approach:", "We define \u201cDefense vs Position\u201d (DVP) as the historical points allowed by an opponent in a given position over a pre-defined time horizon. This can be interesting in NBA DFS if an opponent typically allows an outsized amount of points against a given position (imagine the Horford v. Jokic matchup).", "When we are finished with the feature creation process, we will have a two-dimensional matrix of (player-game by feature) to use in the learning algorithm:", "The model\u2019s purpose is to take in Features (specifically, aspects of a player\u2019s performance historically) and produce predictions of how many fantasy points they will score in a given game. We fit this model using all available historical data, which for the 2018\u201319 season constitutes about 60,000 rows (using 2017\u201318 data as well).", "It\u2019s important to note that we are trying to minimize (PredictedFantasyPoints -RealizedFantasyPoints) in this formulation of the problem. This has at least two potential drawbacks:", "Here\u2019s an example of the output weights from a Linear Regression on the previous 5 games of trailing fantasy points, which is about as simple as we can make the model. The cross-validated mean-average-error (MAE) is 6.4 FantasyPoints.", "We can drastically improve on these fit results by using a more modern, and most importantly, non-linear fitting algorithm. After trying many non-linear models, such as SVM, Neural Networks, and Decision Trees, the XGB model performed the best. This isn\u2019t too surprising, as XGB is regularly used in Kaggle winning entries concerning tabular data. Even on this same set of simple features, XGB lowers the cross-validated MAE to roughly 6.2. On the full set of features, we can achieve an average error of only 5.38 FantasyPoints per player using XGBoost. For comparison, FanDuel\u2019s stock predictions have an error closer to 6.0, and when evaluating paid-subscription models, I could not find any that get lower than 5.5.", "Prediction is the pipeline step of applying the previously-fit model to day-of data to get fantasy point predictions. For the Linear Regression Model, the computation is a simple dot-product:", "XGB predictions are made by traversing a decision tree. Here\u2019s a breakdown of the XGB model\u2019s prediction (27.6) for Al Horford\u2019s FantasyPoints on Jan 30th 2019.", "One pitfall in the approach that many (usually much better than me) DFS players take is the inability to evaluate if changes to their strategy are successful. Without the ability to backtest, there may not be enough data to confidently say that changes are beneficial. To address this concern, I made sure that every part of the pipeline could be rerun for any date in the past (without looking into the future of course). Here are the steps of the simulation:", "To determine the cash lines for past contests, we can use the RotoGrinders ResultsDB to get historical cash lines from DraftKings \u201cdouble-up\u201d contests. Note that when I was working on the pipeline, I used private results from Fanduel 50/50 contests that I participated in.", "The backtesting workflow is as follows:", "Although I didn\u2019t document the improvements as I made them, the backtesting framework allows us to iteratively add-back features to see how they improve our performance. From these results, we can validate that:", "In the end, the best our model achieves is a 39% win rate over the season, where 50% is profitable in the double-up cash lines we are evaluating (the cutoff is ~56% in 50/50 competitions). We also do much better during the first two months of the season. I\u2019d speculate that features that the algorithm doesn\u2019t account for, such as player matchups, become more and more important towards the end of the season.", "If you\u2019ve come to this article to learn how to be a profitable DFS player, I unfortunately can\u2019t get you there \u2014 but I can share some of the things I learned that seem necessary to be (somewhat) competitive. It\u2019s likely that with some additional \u201csecret-sauce\u201d or tweaking of predictions, a seasoned player could become profitable under a mostly-automated system.", "Currently, the DFS problem probably requires a lot of manual effort to solve. Although we could achieve performance that surpassed the average human player on DraftKings, we are still quite far way from a profitable strategy. More than anything else, I had a lot of fun building this project and learned a lot about DFS and practical applications of machine learning. If any readers have questions about the project, please feel free to reach out!", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F6842d2e1ccb6&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreating-a-fully-automated-daily-fantasy-sports-strategy-6842d2e1ccb6&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreating-a-fully-automated-daily-fantasy-sports-strategy-6842d2e1ccb6&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreating-a-fully-automated-daily-fantasy-sports-strategy-6842d2e1ccb6&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreating-a-fully-automated-daily-fantasy-sports-strategy-6842d2e1ccb6&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----6842d2e1ccb6--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----6842d2e1ccb6--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@nateharner01?source=post_page-----6842d2e1ccb6--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@nateharner01?source=post_page-----6842d2e1ccb6--------------------------------", "anchor_text": "Nate Harner"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fb911c9f82757&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreating-a-fully-automated-daily-fantasy-sports-strategy-6842d2e1ccb6&user=Nate+Harner&userId=b911c9f82757&source=post_page-b911c9f82757----6842d2e1ccb6---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F6842d2e1ccb6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreating-a-fully-automated-daily-fantasy-sports-strategy-6842d2e1ccb6&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F6842d2e1ccb6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreating-a-fully-automated-daily-fantasy-sports-strategy-6842d2e1ccb6&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://www.basketball-reference.com/", "anchor_text": "basketball-reference"}, {"url": "https://selenium.dev/", "anchor_text": "Selenium"}, {"url": "https://en.wikipedia.org/wiki/Directed_acyclic_graph", "anchor_text": "Directed Acyclic Graph"}, {"url": "https://en.wikipedia.org/wiki/Linear_regression", "anchor_text": "Linear Regression"}, {"url": "https://en.wikipedia.org/wiki/XGBoost", "anchor_text": "XGB model"}, {"url": "https://www.kaggle.com/", "anchor_text": "Kaggle"}, {"url": "https://rotogrinders.com/resultsdb", "anchor_text": "RotoGrinders ResultsDB"}, {"url": "https://medium.com/tag/daily-fantasy-sports?source=post_page-----6842d2e1ccb6---------------daily_fantasy_sports-----------------", "anchor_text": "Daily Fantasy Sports"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----6842d2e1ccb6---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/tag/sports?source=post_page-----6842d2e1ccb6---------------sports-----------------", "anchor_text": "Sports"}, {"url": "https://medium.com/tag/technology?source=post_page-----6842d2e1ccb6---------------technology-----------------", "anchor_text": "Technology"}, {"url": "https://medium.com/tag/automation?source=post_page-----6842d2e1ccb6---------------automation-----------------", "anchor_text": "Automation"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F6842d2e1ccb6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreating-a-fully-automated-daily-fantasy-sports-strategy-6842d2e1ccb6&user=Nate+Harner&userId=b911c9f82757&source=-----6842d2e1ccb6---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F6842d2e1ccb6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreating-a-fully-automated-daily-fantasy-sports-strategy-6842d2e1ccb6&user=Nate+Harner&userId=b911c9f82757&source=-----6842d2e1ccb6---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F6842d2e1ccb6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreating-a-fully-automated-daily-fantasy-sports-strategy-6842d2e1ccb6&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----6842d2e1ccb6--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F6842d2e1ccb6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreating-a-fully-automated-daily-fantasy-sports-strategy-6842d2e1ccb6&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----6842d2e1ccb6---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----6842d2e1ccb6--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----6842d2e1ccb6--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----6842d2e1ccb6--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----6842d2e1ccb6--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----6842d2e1ccb6--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----6842d2e1ccb6--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----6842d2e1ccb6--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----6842d2e1ccb6--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@nateharner01?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@nateharner01?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Nate Harner"}, {"url": "https://medium.com/@nateharner01/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "25 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fb911c9f82757&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreating-a-fully-automated-daily-fantasy-sports-strategy-6842d2e1ccb6&user=Nate+Harner&userId=b911c9f82757&source=post_page-b911c9f82757--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F3928fa1d5aad&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcreating-a-fully-automated-daily-fantasy-sports-strategy-6842d2e1ccb6&newsletterV3=b911c9f82757&newsletterV3Id=3928fa1d5aad&user=Nate+Harner&userId=b911c9f82757&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}