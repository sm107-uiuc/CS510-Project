{"url": "https://towardsdatascience.com/adding-style-to-pandas-in-just-a-few-lines-of-code-be942f65b3a5", "time": 1683006103.13469, "path": "towardsdatascience.com/adding-style-to-pandas-in-just-a-few-lines-of-code-be942f65b3a5/", "webpage": {"metadata": {"title": "Adding Style to Pandas (in just a few lines of code!) | by Nik Piepenbreier | Towards Data Science", "h1": "Adding Style to Pandas (in just a few lines of code!)", "description": "Pandas is the quintessential tool for data analysis in Python, but it\u2019s not always the easiest to make data look presentable. For that, many analysts still turn to Excel to add data styles (such as\u2026"}, "outgoing_paragraph_urls": [{"url": "https://datagy.io/python-pivot-tables/", "anchor_text": "checking out my tutorial", "paragraph_index": 5}, {"url": "https://matplotlib.org/tutorials/colors/colormaps.html", "anchor_text": "this Matplotlib guide", "paragraph_index": 22}], "all_paragraphs": ["Pandas is the quintessential tool for data analysis in Python, but it\u2019s not always the easiest to make data look presentable. For that, many analysts still turn to Excel to add data styles (such as currencies) or conditional formatting before sharing the data with our broader audiences. In this post, we\u2019ll explore how to take these features that are commonplace in Excel and demonstrate how to take these on using the Pandas Style API!", "Our end goal should be to make the data easier for our readers to understand while maintaining the usability of the underlying data available in the dataframe. For example, 10% may be easier to understand than the value 0.10, but keeping the proportion of 0.10 is more usable for further analysis.", "Pandas developed the styling API in 2019 and it\u2019s gone through active development since then. The API returns a new Styler object, which has useful methods to apply formatting and styling to dataframes. The end styling is accomplished with CSS, through style-functions that are applied to scalars, series, or entire dataframes, via attribute:value pairs.", "The Styler object has two key methods:", "Let\u2019s get started by loading our data first.", "We\u2019ll use the same dataset that\u2019s available in my pivot table tutorial and we\u2019ll use some of the steps we outlined there. If you\u2019re not familiar with Pivot Tables in Pandas, we recommend checking out my tutorial.", "We can see that we have a number of sales, providing information on Region, Type, # of Units Sold and the Total Sales Cost.", "Let\u2019s create a pivot table out of this, following my previous tutorial:", "Now that we have our data loaded and stored in a dataframe called pivot, we can start styling our data in Pandas.", "In our dataframe pivot, the columns Sales represents the total number of sales in dollars. This isn\u2019t immediately clear to the reader, however, as there is no dollar sign and the thousand values aren\u2019t separated by commas. Let\u2019s explore how to do this:", "We can see that the data is immediately easier to understand!", "String formats can be applied in different ways. Some other examples include:", "If we wanted to pass formatting in for multiple columns, it might be easier to define a dictionary that can be passed onto the styling function. For example, we could write a dictionary, like below:", "Which could then be passed onto an object like below:", "Conditional formatting is a great tool easily available in Excel. It allows us to easily identify values based on their content. It\u2019s equally easy in Pandas, but hidden away a little bit. We\u2019ll show just how easy it is to achieve conditional formatting in Pandas.", "For example, if we wanted to highlight any number of sales that exceed $50,000 (say, they were eligible for a bonus after that point). We can do this using the applymap method. Before we begin, we\u2019ll define a function we can pass onto the applymap method.", "We can now pass this function into the applymap method:", "We can also chain the data styling with our conditional formatting:", "Chaining methods is an incredibly useful feature in Python, but it\u2019s not always the easiest to read. We can split the chain across multiple lines by using the \\ character, as shown below:", "Now, say we wanted to highlight the maximum and minimum values, we can achieve this with another Styler object. While we could accomplish this using functions and the applymap method, Pandas thankfully has methods built-in directly to highlight the maximum and minimum values. In the example below, we provide named-colors, but you can also provide hex values to be more specific.", "Sometimes we will want to identify the values within a column relative to one another. This is where color scales come into play. We can accomplish this quite easy as a style method using the background_gradient method. Let\u2019s give this a shot:", "This returns a dataframe like below:", "You can also use different cmaps. To learn more about cmaps, check out this Matplotlib guide.", "Let\u2019s now generate a pivot table that has multiple columns of values:", "This creates a pivot table that looks like this:", "Now, let\u2019s apply the background_gradient method:", "If we wanted to limit this to only one column, we can use the subset parameter, as shown below:", "Another illustrative way to add context to the size of a value in a column is to add color bars. This is an incredibly easy way to provide visuals that are also easy to print out. We can accomplish this using Python by using the code below:", "Color bars allow us to see the scale more easily. We can also use the align=center parameter, to have the bars show on the left if values are negative and on the right if they are positive.", "After you\u2019ve spent some time creating a style you really like, you may want to reuse it. Thankfully, Pandas makes it easy without having to duplicate the code you meticulously created. You use the .use method on the Style object of another datagram. For example, if we have two dataframes, style1 and style 2, we can reuse the style of style1 by using the following:", "Since we\u2019re talking about getting data ready for displaying, let\u2019s talk about another piece that Excel makes quite easy: hiding columns. We can accomplish this in Pandas using styler objects as well. If we wanted to hide the index, we could write:", "Similarly, if we wanted to hide a column, we could write:", "I mentioned earlier in the article that the Style API is Pandas is still experimental. We can\u2019t export all of these methods currently, but can currently export background-color and color. For example, if we wanted to export the following dataframe:", "We could use the .to_excel method to extract our styled dataframe to an Excel workbook:", "Finally, there may just be instances where taking your data to Excel could end up being more efficient? In that case, you can just use the df.to_clipboard() method to copy your entire dataframe to your clipboard!", "In this post, we learned how to style a Pandas dataframe using the Pandas Style API. We learned how to add data type styles, conditional formatting, color scales, and color bars. Similar to the styles found in Excel, Pandas makes it easy to apply styling to dataframes. This allows us to better represent data and find trends within the data visually.", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fbe942f65b3a5&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fadding-style-to-pandas-in-just-a-few-lines-of-code-be942f65b3a5&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fadding-style-to-pandas-in-just-a-few-lines-of-code-be942f65b3a5&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fadding-style-to-pandas-in-just-a-few-lines-of-code-be942f65b3a5&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fadding-style-to-pandas-in-just-a-few-lines-of-code-be942f65b3a5&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----be942f65b3a5--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----be942f65b3a5--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@nik.piepenbreier?source=post_page-----be942f65b3a5--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@nik.piepenbreier?source=post_page-----be942f65b3a5--------------------------------", "anchor_text": "Nik Piepenbreier"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F634ffd0ea2aa&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fadding-style-to-pandas-in-just-a-few-lines-of-code-be942f65b3a5&user=Nik+Piepenbreier&userId=634ffd0ea2aa&source=post_page-634ffd0ea2aa----be942f65b3a5---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fbe942f65b3a5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fadding-style-to-pandas-in-just-a-few-lines-of-code-be942f65b3a5&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fbe942f65b3a5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fadding-style-to-pandas-in-just-a-few-lines-of-code-be942f65b3a5&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://datagy.io/python-pivot-tables/", "anchor_text": "checking out my tutorial"}, {"url": "https://matplotlib.org/tutorials/colors/colormaps.html", "anchor_text": "this Matplotlib guide"}, {"url": "https://datagy.io/pandas-style/", "anchor_text": "https://datagy.io"}, {"url": "https://medium.com/tag/python?source=post_page-----be942f65b3a5---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/data-science?source=post_page-----be942f65b3a5---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/programming?source=post_page-----be942f65b3a5---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/tag/software-development?source=post_page-----be942f65b3a5---------------software_development-----------------", "anchor_text": "Software Development"}, {"url": "https://medium.com/tag/analytics?source=post_page-----be942f65b3a5---------------analytics-----------------", "anchor_text": "Analytics"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fbe942f65b3a5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fadding-style-to-pandas-in-just-a-few-lines-of-code-be942f65b3a5&user=Nik+Piepenbreier&userId=634ffd0ea2aa&source=-----be942f65b3a5---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fbe942f65b3a5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fadding-style-to-pandas-in-just-a-few-lines-of-code-be942f65b3a5&user=Nik+Piepenbreier&userId=634ffd0ea2aa&source=-----be942f65b3a5---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fbe942f65b3a5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fadding-style-to-pandas-in-just-a-few-lines-of-code-be942f65b3a5&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----be942f65b3a5--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fbe942f65b3a5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fadding-style-to-pandas-in-just-a-few-lines-of-code-be942f65b3a5&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----be942f65b3a5---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----be942f65b3a5--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----be942f65b3a5--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----be942f65b3a5--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----be942f65b3a5--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----be942f65b3a5--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----be942f65b3a5--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----be942f65b3a5--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----be942f65b3a5--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@nik.piepenbreier?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@nik.piepenbreier?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Nik Piepenbreier"}, {"url": "https://medium.com/@nik.piepenbreier/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "2.8K Followers"}, {"url": "https://datagy.io", "anchor_text": "https://datagy.io"}, {"url": "https://bit.ly/2AptX91", "anchor_text": "https://bit.ly/2AptX91"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F634ffd0ea2aa&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fadding-style-to-pandas-in-just-a-few-lines-of-code-be942f65b3a5&user=Nik+Piepenbreier&userId=634ffd0ea2aa&source=post_page-634ffd0ea2aa--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F1f5adc4c309f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fadding-style-to-pandas-in-just-a-few-lines-of-code-be942f65b3a5&newsletterV3=634ffd0ea2aa&newsletterV3Id=1f5adc4c309f&user=Nik+Piepenbreier&userId=634ffd0ea2aa&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}