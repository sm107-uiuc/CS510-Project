{"url": "https://towardsdatascience.com/bigquery-and-data-studio-for-model-monitoring-7ce9062a2ab1", "time": 1682997479.2534819, "path": "towardsdatascience.com/bigquery-and-data-studio-for-model-monitoring-7ce9062a2ab1/", "webpage": {"metadata": {"title": "BigQuery and Data Studio for Model Monitoring | by Joel Quesada | Towards Data Science", "h1": "BigQuery and Data Studio for Model Monitoring", "description": "This post will discuss one stage inside Machine Learning (ML) Model's lifecycle: the model's performance monitoring. This is one of the things you face when dealing with simple online systems that\u2026"}, "outgoing_paragraph_urls": [{"url": "https://airflow.apache.org/", "anchor_text": "Airflow", "paragraph_index": 8}, {"url": "https://pandas-gbq.readthedocs.io/en/latest/", "anchor_text": "pandas-gbq", "paragraph_index": 9}, {"url": "https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.to_gbq.html", "anchor_text": "pandas.DataFrame.to_gbq", "paragraph_index": 9}, {"url": "https://cloud.google.com/bigquery/docs/pandas-gbq-migration?hl=en-419", "anchor_text": "google-cloud-bigquery", "paragraph_index": 9}, {"url": "https://datastudio.google.com/u/0/navigation/reporting", "anchor_text": "Data Studio", "paragraph_index": 11}, {"url": "https://support.google.com/datastudio/answer/7020039?hl=en", "anchor_text": "google documentation", "paragraph_index": 11}], "all_paragraphs": ["This post will discuss one stage inside Machine Learning (ML) Model's lifecycle: the model's performance monitoring. This is one of the things you face when dealing with simple online systems that need to be continuously maintained. In many places, you can see that the ML model lifecycle ends once you have evaluated the model offline. However, in most actual use cases, this is not true.", "We live in a dynamic world where data distributions vary from time to time, which involves that a model you validated to be good two months ago might not be good any longer. Let's take as an instance sales forecasting: people's behavior changes every time, and external variables that alter your sales can happen all the time. Another simple example would be to predict the weather, and a model trained one year ago might not perform as well as a fresher one with new data. The same happens with many forecast applications. Therefore, we need some way to monitor all these changes continuously and, if necessary, retrain our models on updated data.", "In this post, we will show a straightforward way to monitor our model's performance by following two simple steps: scheduling and reporting.", "If you read this post, you have already trained and validated a model offline. You have already gone through a lot of work: data exploration, data cleaning, data processing, feature engineering, model optimization, etc. But you still feel you have not finished the job. You might be wondering when you should retrain your model.Let me assume then that we have already something we can run like:", "and we can get whatever predictions are needed. This is great! We already have the most important thing. Now it's time to schedule these predictions and store them in BigQuery.", "To schedule our predictions, I suggest two possibilities: one simple and good and another one more complex but better for many cases. Let's start with the simplest one.", "Cron. The most well-known scheduler is used in UNIX systems. With a straightforward syntax, you can schedule any process you want. In your UNIX machine, run crontab -e and add something like this.", "Following the previous example, you can schedule your predictor with a simple syntax. This docker container would be triggered every 15 minutes. This is very useful if your processes are lightweight and straightforward. However, the more complex our workflows are, the more intricate it becomes to maintain cron jobs. So we move to our second candidate, a workflow orchestrator.", "Workflow orchestrator. The second option would be to use some workflow orchestrator such as Airflow. If your use case is more complex is better to use a tool to schedule and monitor workflows. For instance, you want to monitor your data pipelines and where and why some crashed. With Airflow, we can develop our data pipelines as Directed Acyclic Graphs, schedule them and monitor them using its GUI. This is very useful and covers more use cases than a cron scheduler, especially in data science.", "Let's store our data on BigQuery. Data Studio is compatible with more Data sources, not just BigQuery, but in this post, we will just use BigQuery. Here I have good news, saving data into BigQuery is as easy as exporting a pandas DataFrame to CSV!Pandas' library has already implemented a function to dump our data frame into BigQuery directly. We will need to install the python package pandas-gbq and its dependencies. And then use the function pandas.DataFrame.to_gbq. If you want to do more than just storing data into BigQuery, I recommend using the package google-cloud-bigquery.", "Now we have all our predictions ready to be explored in BigQuery. Just a tiny step before diving into the dashboard. We need to create a view of our processed data. In BigQuery, this is very easy since it provides a website IDE to generate SQL queries. We need to make our SQL query and produce a view. Now, we are ready to visualize our data!", "Let's move now to Data Studio. There are some templates that we could follow to create our dashboard. I encourage you to start a report from scratch, though. In just a few hours, we will be masters of Data Studio and be able to create valuable reports. We can use multiple data sources to build our dashboard. If we have followed this post, we will probably need to choose BigQuery and our view. If our data is already imported, we need to know that Data Studio will cache it, and we can start playing without the fear of thinking that it is querying BigQuery every time. We can decide how often our data will be refreshed: every 12 hours (default), every 4 hours, or every hour. You can also restore the data manually, of course\u2014more info about how it works internally in the google documentation.We have our data imported, and it is time to start playing around and creating our dashboards. We have multiple ways to visualize our data: dynamic tables, bubble plots, bar plots, etc. I encourage you to use the ones that suit our use case best!", "The previous image shows an example from an actual case where we evaluate our sales forecasting models for finished sales. The predictions are stored in BigQuery and used for analysis afterward. The difference between this dashboard and some offline evaluations is that this will keep updated with new sales daily. We will be able to see if our performance decreases through time or if our models are stable or not.", "Finally, another helpful feature from Data Studio is report scheduling. We can schedule an email with our report, so our team never misses anything!", "This post explains a simple but powerful way to monitor our model's performance. We do not discuss the model's system health monitoring here; this is out of the scope of this post, and Data Studio might not be our best tool.", "Do you monitor our model's performance over time? Do you have automated training and deployments? I look forward to reading our comments on our experience on the topic.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Computer Scientist, MSc in Artificial Intelligence. Currently working as a Data Scientist at Vente-privee."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F7ce9062a2ab1&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbigquery-and-data-studio-for-model-monitoring-7ce9062a2ab1&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbigquery-and-data-studio-for-model-monitoring-7ce9062a2ab1&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbigquery-and-data-studio-for-model-monitoring-7ce9062a2ab1&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbigquery-and-data-studio-for-model-monitoring-7ce9062a2ab1&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----7ce9062a2ab1--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----7ce9062a2ab1--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@joelqv8?source=post_page-----7ce9062a2ab1--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@joelqv8?source=post_page-----7ce9062a2ab1--------------------------------", "anchor_text": "Joel Quesada"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F1ec3efd0d566&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbigquery-and-data-studio-for-model-monitoring-7ce9062a2ab1&user=Joel+Quesada&userId=1ec3efd0d566&source=post_page-1ec3efd0d566----7ce9062a2ab1---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F7ce9062a2ab1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbigquery-and-data-studio-for-model-monitoring-7ce9062a2ab1&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F7ce9062a2ab1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbigquery-and-data-studio-for-model-monitoring-7ce9062a2ab1&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://airflow.apache.org/", "anchor_text": "Airflow"}, {"url": "https://pandas-gbq.readthedocs.io/en/latest/", "anchor_text": "pandas-gbq"}, {"url": "https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.to_gbq.html", "anchor_text": "pandas.DataFrame.to_gbq"}, {"url": "https://cloud.google.com/bigquery/docs/pandas-gbq-migration?hl=en-419", "anchor_text": "google-cloud-bigquery"}, {"url": "https://datastudio.google.com/u/0/navigation/reporting", "anchor_text": "Data Studio"}, {"url": "https://support.google.com/datastudio/answer/7020039?hl=en", "anchor_text": "google documentation"}, {"url": "https://medium.com/tag/big-data?source=post_page-----7ce9062a2ab1---------------big_data-----------------", "anchor_text": "Big Data"}, {"url": "https://medium.com/tag/data-science?source=post_page-----7ce9062a2ab1---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----7ce9062a2ab1---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F7ce9062a2ab1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbigquery-and-data-studio-for-model-monitoring-7ce9062a2ab1&user=Joel+Quesada&userId=1ec3efd0d566&source=-----7ce9062a2ab1---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F7ce9062a2ab1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbigquery-and-data-studio-for-model-monitoring-7ce9062a2ab1&user=Joel+Quesada&userId=1ec3efd0d566&source=-----7ce9062a2ab1---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F7ce9062a2ab1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbigquery-and-data-studio-for-model-monitoring-7ce9062a2ab1&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----7ce9062a2ab1--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F7ce9062a2ab1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbigquery-and-data-studio-for-model-monitoring-7ce9062a2ab1&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----7ce9062a2ab1---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----7ce9062a2ab1--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----7ce9062a2ab1--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----7ce9062a2ab1--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----7ce9062a2ab1--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----7ce9062a2ab1--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----7ce9062a2ab1--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----7ce9062a2ab1--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----7ce9062a2ab1--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@joelqv8?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@joelqv8?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Joel Quesada"}, {"url": "https://medium.com/@joelqv8/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "41 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F1ec3efd0d566&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbigquery-and-data-studio-for-model-monitoring-7ce9062a2ab1&user=Joel+Quesada&userId=1ec3efd0d566&source=post_page-1ec3efd0d566--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fusers%2F1ec3efd0d566%2Flazily-enable-writer-subscription&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbigquery-and-data-studio-for-model-monitoring-7ce9062a2ab1&user=Joel+Quesada&userId=1ec3efd0d566&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}