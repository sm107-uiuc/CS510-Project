{"url": "https://towardsdatascience.com/market-basket-analysis-with-pandas-246fb8ee10a5", "time": 1683014809.9624362, "path": "towardsdatascience.com/market-basket-analysis-with-pandas-246fb8ee10a5/", "webpage": {"metadata": {"title": "Market Basket Analysis with Pandas | by Soner Y\u0131ld\u0131r\u0131m | Towards Data Science", "h1": "Market Basket Analysis with Pandas", "description": "Market basket analysis is a common data science practice implemented by retailers. The goal is to discover the associations among items. It is very important to have an idea of what people tend to\u2026"}, "outgoing_paragraph_urls": [{"url": "https://www.kaggle.com/heeraldedhia/groceries-dataset", "anchor_text": "dataset", "paragraph_index": 2}, {"url": "http://linkedin.com/in/soneryildirim/", "anchor_text": "linkedin.com/in/soneryildirim/", "paragraph_index": 34}, {"url": "http://twitter.com/snr14", "anchor_text": "twitter.com/snr14", "paragraph_index": 34}], "all_paragraphs": ["Market basket analysis is a common data science practice implemented by retailers. The goal is to discover the associations among items. It is very important to have an idea of what people tend to buy together.", "Having a decent market basket analysis provides useful insight for aisle organizations, sales, marketing campaigns, and more.", "In this post, we will analyze the grocery dataset available on Kaggle. Let\u2019s start with reading the dataset.", "The dataset is organized in a way that each row represents an item purchased on a given day by a particular customer.", "Before starting on the analysis, we should check the data types, and if there are any missing values.", "There is no missing value but the data type of \u201cDate\u201d column should be converted to datetime which can be done with the to_datetime function of pandas.", "Let\u2019s first check the average number of items sold per day. One way to do this is group items by date and count the items. We can then plot the result.", "It\u2019d look better if we downsample it. We can use the resample function to decrease the frequency.", "It seems like business is getting better because item quantities follow a general increasing trend.", "Each row in the dataset represents an item purchased by a customer on a given day. If a customer buys three items at one shopping, there will be three rows with same customer number and date but with different item description.", "Another measure is the average number of items per shopping which can be calculated by grouping the items by customer number and date.", "Item_qty dataframe shows the number of items in each shopping. For instance, customer 1000 purchased 3 items on 2014\u201306\u201324.", "The average number of items per shopping is around 2.5 .", "Let\u2019s also check the distribution of the number of items per shopping.", "Customers are most likely to buy 2\u20133 items together.", "The main focus of market basket analysis is what items are purchased together. One common technique is association rule learning which is a machine learning method to discover relationships among variables. Apriori algorithm is a frequently used algorithm for association rule learning.", "We will not go in detail about apriori algorithm or association rule learning in this post. Instead, I will show you a simple way to check which items are frequent purchased together.", "Let\u2019s first create a dataframe that contains the items list per shopping.", "We need to determine which items frequently exist in the same rows in \u201citemDescription\u201d column.", "One way is to create combinations of items in each row and count the occurrences of each combination. The itertools of python can be used to accomplish this task.", "Here is an example for the first row.", "There are 3 items in the first row so we have 3 combinations of pairs. Itertools.combinations do not return repeated combinations (e.g. (\u2018pastry\u2019, \u2018pastry\u2019)) which is what we need.", "The following code will to this operation on each row and add the combinations to a list.", "We have created a list of lists:", "We can create a list from this list of lists by using the explode function of pandas but we need to first convert it to a pandas series.", "We can now count the number of occurrences of each combination using the value_counts function. Here are the ten most frequent combinations:", "The first one is a surprise because it is repeating one. We have made the combinations with no repeated elements. The dataset might contain repating elements. For instance, if a customer buys 2 whole milks at one shopping, there must be two rows of whole milk for that shopping.", "We can confirm it by counting the number of whole milks at each shopping.", "It seems like what we suspect is correct. For instance, customer 1994 purchased 4 whole milks on 2015\u201311\u201303. Thus, it totally makes sense to see the most frequent combination is whole milk and whole milk.", "We should focus on non-repeating combinations. For instance, the second most frequent combination is whole milk and rolls/buns. The whole milk seems to be dominating the shopping lists.", "We have done a simple and basic market basket analysis. The big retailers are doing much more complicated ones and they may approach the analysis from many different perspectives.", "However, the overall goal is usually the same which is to be able to predict customers purchasing behaviour.", "Thank you for reading. Please let me know if you have any feedback.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Data Scientist | Top 10 Writer in AI and Data Science | linkedin.com/in/soneryildirim/ | twitter.com/snr14"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F246fb8ee10a5&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmarket-basket-analysis-with-pandas-246fb8ee10a5&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmarket-basket-analysis-with-pandas-246fb8ee10a5&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmarket-basket-analysis-with-pandas-246fb8ee10a5&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmarket-basket-analysis-with-pandas-246fb8ee10a5&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----246fb8ee10a5--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----246fb8ee10a5--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://sonery.medium.com/?source=post_page-----246fb8ee10a5--------------------------------", "anchor_text": ""}, {"url": "https://sonery.medium.com/?source=post_page-----246fb8ee10a5--------------------------------", "anchor_text": "Soner Y\u0131ld\u0131r\u0131m"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F2cf6b549448&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmarket-basket-analysis-with-pandas-246fb8ee10a5&user=Soner+Y%C4%B1ld%C4%B1r%C4%B1m&userId=2cf6b549448&source=post_page-2cf6b549448----246fb8ee10a5---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F246fb8ee10a5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmarket-basket-analysis-with-pandas-246fb8ee10a5&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F246fb8ee10a5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmarket-basket-analysis-with-pandas-246fb8ee10a5&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@nathaliarosa?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Nath\u00e1lia Rosa"}, {"url": "https://unsplash.com/s/photos/grocery-store?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Unsplash"}, {"url": "https://www.kaggle.com/heeraldedhia/groceries-dataset", "anchor_text": "dataset"}, {"url": "https://medium.com/tag/data-science?source=post_page-----246fb8ee10a5---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/artificial-intelligence?source=post_page-----246fb8ee10a5---------------artificial_intelligence-----------------", "anchor_text": "Artificial Intelligence"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----246fb8ee10a5---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/tag/programming?source=post_page-----246fb8ee10a5---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/tag/pandas?source=post_page-----246fb8ee10a5---------------pandas-----------------", "anchor_text": "Pandas"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F246fb8ee10a5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmarket-basket-analysis-with-pandas-246fb8ee10a5&user=Soner+Y%C4%B1ld%C4%B1r%C4%B1m&userId=2cf6b549448&source=-----246fb8ee10a5---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F246fb8ee10a5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmarket-basket-analysis-with-pandas-246fb8ee10a5&user=Soner+Y%C4%B1ld%C4%B1r%C4%B1m&userId=2cf6b549448&source=-----246fb8ee10a5---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F246fb8ee10a5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmarket-basket-analysis-with-pandas-246fb8ee10a5&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----246fb8ee10a5--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F246fb8ee10a5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmarket-basket-analysis-with-pandas-246fb8ee10a5&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----246fb8ee10a5---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----246fb8ee10a5--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----246fb8ee10a5--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----246fb8ee10a5--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----246fb8ee10a5--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----246fb8ee10a5--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----246fb8ee10a5--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----246fb8ee10a5--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----246fb8ee10a5--------------------------------", "anchor_text": ""}, {"url": "https://sonery.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://sonery.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Soner Y\u0131ld\u0131r\u0131m"}, {"url": "https://sonery.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "21K Followers"}, {"url": "http://linkedin.com/in/soneryildirim/", "anchor_text": "linkedin.com/in/soneryildirim/"}, {"url": "http://twitter.com/snr14", "anchor_text": "twitter.com/snr14"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F2cf6b549448&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmarket-basket-analysis-with-pandas-246fb8ee10a5&user=Soner+Y%C4%B1ld%C4%B1r%C4%B1m&userId=2cf6b549448&source=post_page-2cf6b549448--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F7cdf5377373a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmarket-basket-analysis-with-pandas-246fb8ee10a5&newsletterV3=2cf6b549448&newsletterV3Id=7cdf5377373a&user=Soner+Y%C4%B1ld%C4%B1r%C4%B1m&userId=2cf6b549448&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}