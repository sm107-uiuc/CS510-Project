{"url": "https://towardsdatascience.com/twitter-sentiment-analysis-a-tale-of-stream-processing-8fd92e19a6e6", "time": 1683005930.691076, "path": "towardsdatascience.com/twitter-sentiment-analysis-a-tale-of-stream-processing-8fd92e19a6e6/", "webpage": {"metadata": {"title": "Twitter Sentiment Analysis: A tale of Stream Processing | by Redouane Achouri | Towards Data Science", "h1": "Twitter Sentiment Analysis: A tale of Stream Processing", "description": "In this article, we will get our hands dirty with building a micro-services architecture comprised of setting-up a stream processing pipe to fetch tweets from Twitter\u2019s public API, queue it into a\u2026"}, "outgoing_paragraph_urls": [{"url": "https://monkeylearn.com/sentiment-analysis/", "anchor_text": "MonkeyLearn", "paragraph_index": 3}, {"url": "https://github.com/redouane-dev/twitter-sentiment-analysis", "anchor_text": "twitter-sentiment-analysis", "paragraph_index": 4}, {"url": "https://developer.twitter.com/en/docs/labs/sampled-stream/overview", "anchor_text": "official API Sampled Stream documentation", "paragraph_index": 7}, {"url": "https://cloud.google.com/compute", "anchor_text": "Google Cloud Platform", "paragraph_index": 10}, {"url": "https://github.com/redouane-dev/twitter-sentiment-analysis/blob/master/docker-compose.yaml", "anchor_text": "docker-compose.yaml", "paragraph_index": 12}, {"url": "https://github.com/redouane-dev/twitter-sentiment-analysis/blob/master/docker-compose.yaml", "anchor_text": "docker-compose.yaml", "paragraph_index": 13}, {"url": "https://github.com/redouane-dev/twitter-sentiment-analysis/blob/master/model/twitter-sentiment-analysis.ipynb", "anchor_text": "notebook here", "paragraph_index": 15}, {"url": "https://www.nltk.org/book/ch05.html", "anchor_text": "part-of-speech tagger", "paragraph_index": 19}, {"url": "https://www.ling.upenn.edu/courses/Fall_2003/ling001/penn_treebank_pos.html", "anchor_text": "full list of possible tags", "paragraph_index": 19}, {"url": "https://github.com/redouane-dev/twitter-sentiment-analysis/blob/master/model/twitter-sentiment-analysis.ipynb", "anchor_text": "notebook here", "paragraph_index": 24}, {"url": "https://www.buymeacoffee.com/redouaneachouri", "anchor_text": "buying me a coffee", "paragraph_index": 32}, {"url": "http://www.redouaneachouri.com", "anchor_text": "www.redouaneachouri.com", "paragraph_index": 35}], "all_paragraphs": ["In this article, we will get our hands dirty with building a micro-services architecture comprised of setting-up a stream processing pipe to fetch tweets from Twitter\u2019s public API, queue it into a Kafka topic, and digest it with Natural Language Processing to get the polarity of each tweet. The final result will then be visualized on a dashboard with all the fancy charts I can think of ;-)", "Twitter is a place where people share their thoughts and emotions on actual trends. It is also a strategic ground where all sorts of marketing operations happen, and where brands, including companies and public personalities, can get a generous insight on the audience\u2019s perception from analyzing what people are tweeting about them.", "With sentiment analysis, we can detect if a piece of text conveys a positive or a negative message. It is called polarity, and this is a game-changer when it comes to gathering consumer feedback from a massive amount of data and in a short stretch of time.", "To learn more about Sentiment Analysis and its applications, checkout this excellent article on MonkeyLearn.", "With no further due, let\u2019s dive into the technicalities!Full source code available on GitHub: twitter-sentiment-analysis.", "In order to start collecting all those tweets, we will need a Twitter Developer account. I will briefly describe here the steps taken from creating an account till obtaining an OAuth2 Bearer Token for our first app.", "The Sampled Stream endpoint delivers a roughly 1% random sample of all Tweet data, in real time, through a streaming connection.", "4. The official API Sampled Stream documentation offers a solid basis to learn how to authenticate, and sample code snippets to start getting the flow of real-time tweets.", "The architecture of this project is pretty straightforward, from the Twitter API to the Grafana dashboard, passing by the Kafka pipe and producer/consumer pair.", "All architectures have their weaknesses, including this one, and this includes network failures, memory issues, bugs, misformatted text, \u2026 I try to tackle these problems by making main components such as the Producer and Consumer as resilient as possible to failures by taking measures such as:", "N.B. Live deployment is done on a virtual machine in the Compute Engine of GCP \u2014 Google Cloud Platform.", "Following is the description of each component:", "Full configuration of Kafka can be found in the docker-compose.yaml file of this project.", "Full description of this architecture is available in the project\u2019s docker-compose.yaml file.", "Steps taken to reduce dimensionality, complexity, and noise in the data. This is required as the tweets 1) are in a sequential multi-line text that can\u2019t be processed by a simple model, and 2) contain irrelevant information such as connecting words and URLs that add complexity and can bias the model", "For implementation details please check notebook here.", "A text is a sequence of characters separated by whitespaces and punctuation that carries a meaning understandable by the human brain, but that makes no sense to a computer. However, we can split the text into smaller strings or words, which are called tokens, based on the whitespace and punctuation separators.", "We use a pre-trained NLTK model available in the package Punkt, which takes into consideration titles such as Dr. and Mr., and periods in names such as J.Doe.", "Words in a text can take different forms. Verbs can be conjugated \u2014 \u201carise\u201d, \u201carose\u201d, \u201carisen\u201d, and nouns can be set to feminine and plural\u2014 \u201cauthor\u201d, \u201cauthoress\u201d, \u201cauthors\u201d, \u201cauthoresses\u201d. Thus normalization can help group together words that have the same meaning by bringing them to their canonical form.There are 2 popular types of normalization:", "Lemmatization is slower but more accurate than Stemming, and since this slowness is not a big impediment to our real-time processing, we can afford to use Lemmatization for normalization.Before using a lemmatizer however we need to determine the context of each word in the text, and for this we use a part-of-speech tagger. Check this link for a full list of possible tags.", "Noise is all data that doesn\u2019t add information, but consumes time and resources, and could add bias to the model. Following is what we consider as noise in this project:", "We use Regular Expressions and dictionaries of stopwords and punctuation of the English language in order to perform the filtering.", "By doing a quick detour, we can find what words are the most associated with positive or negative sentiments in our tweets dataset:", "N.B. The Word Density is implicitly calculated by our modeling algorithm, so we don\u2019t need to include this as a part of the pre-processing.", "For implementation details please check notebook here.", "Here comes the part where we build a supervised learning model that can classify tweets into positive or negative, the two labels we have for our data.", "For simplicity, and for the limited amount of data we have at our disposal (10k records), we will use a Naive Bayes Classifier.", "Here are the training and testing metrics (accuracy), and a table of the 10 most informative features. Each row represents the ratio between the occurrences of a word in positive vs. negative tweets.", "By testing our model on custom tweets, we can see that it fails at classifying sarcasm as it considers it a positive sentiment instead of negative.This is because our model lacks the data complexity to discern more evolved emotions, and thus we can work on this aspect by using a more advanced classification algorithm that can cope with the complexity of a dataset containing evolved emotions such as Joy, Excitement, Sadness, and Fear.", "In this article, I provided you with my 2 cents on how to design and create a micro-services architecture that can fetch a continuous stream of tweets from Twitter\u2019s real-time API, then pipe it through Kafka before processing it to extract the polarity of each tweet. We then saw how to store the result in a time-series database for further analysis and visualization.", "We also saw how to pre-process and extract features from the data before building a classification model that can infer the polarity of each tweet.", "As a final outcome, we concluded that in order to be able to discriminate more evolved emotions such as Joy and Sarcasm, we\u2019d need a more complex dataset and a classification algorithm that could cope with this complexity.", "If you find this tutorial useful and you\u2019d like to support the making of quality articles, consider buying me a coffee!", "You can click on the \u201cFollow\u201d button to get my latest articles and posts!", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Curious about engineering and tech, I build projects based on my inspirations and needs around #webapps #devops #aws www.redouaneachouri.com"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F8fd92e19a6e6&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftwitter-sentiment-analysis-a-tale-of-stream-processing-8fd92e19a6e6&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftwitter-sentiment-analysis-a-tale-of-stream-processing-8fd92e19a6e6&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftwitter-sentiment-analysis-a-tale-of-stream-processing-8fd92e19a6e6&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftwitter-sentiment-analysis-a-tale-of-stream-processing-8fd92e19a6e6&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----8fd92e19a6e6--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----8fd92e19a6e6--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@redouane.achouri?source=post_page-----8fd92e19a6e6--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@redouane.achouri?source=post_page-----8fd92e19a6e6--------------------------------", "anchor_text": "Redouane Achouri"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fe058a5afdc88&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftwitter-sentiment-analysis-a-tale-of-stream-processing-8fd92e19a6e6&user=Redouane+Achouri&userId=e058a5afdc88&source=post_page-e058a5afdc88----8fd92e19a6e6---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F8fd92e19a6e6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftwitter-sentiment-analysis-a-tale-of-stream-processing-8fd92e19a6e6&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F8fd92e19a6e6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftwitter-sentiment-analysis-a-tale-of-stream-processing-8fd92e19a6e6&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@adamjang?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Adam Jang"}, {"url": "https://unsplash.com/?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Unsplash"}, {"url": "https://grafana.redouaneachouri.com/d/twitter-sentiment-analysis/twitter-sentiment-analysis", "anchor_text": "grafana.redouaneachouri.com"}, {"url": "https://github.com/redouane-dev/twitter-sentiment-analysis", "anchor_text": "twitter-sentiment-analysis"}, {"url": "https://github.com/redouane-dev/twitter-sentiment-analysis/blob/master/model/twitter-sentiment-analysis.ipynb", "anchor_text": "this notebook"}, {"url": "https://monkeylearn.com/sentiment-analysis/#sentiment-analysis-use-cases-and-applications", "anchor_text": "Source"}, {"url": "https://monkeylearn.com/sentiment-analysis/", "anchor_text": "MonkeyLearn"}, {"url": "https://github.com/redouane-dev/twitter-sentiment-analysis", "anchor_text": "twitter-sentiment-analysis"}, {"url": "https://developer.twitter.com", "anchor_text": "Twitter Developer page"}, {"url": "https://developer.twitter.com/en/docs/labs/sampled-stream/overview", "anchor_text": "official API Sampled Stream documentation"}, {"url": "https://cloud.google.com/compute", "anchor_text": "Google Cloud Platform"}, {"url": "https://api.twitter.com/oauth2/token.", "anchor_text": "https://api.twitter.com/oauth2/token"}, {"url": "https://api.twitter.com/oauth2/token.", "anchor_text": "."}, {"url": "https://github.com/dpkp/kafka-python", "anchor_text": "Kafka-python"}, {"url": "https://hub.docker.com/r/wurstmeister/zookeeper", "anchor_text": "Zookeeper:3.4.6"}, {"url": "https://hub.docker.com/r/wurstmeister/kafka", "anchor_text": "Kafka:2.4.0"}, {"url": "https://kafka.apache.org/documentation/", "anchor_text": "official Kafka docs"}, {"url": "https://hub.docker.com/r/wurstmeister/kafka", "anchor_text": "Wurstmeister\u2019s Kafka docs"}, {"url": "https://github.com/redouane-dev/twitter-sentiment-analysis/blob/master/docker-compose.yaml", "anchor_text": "docker-compose.yaml"}, {"url": "https://github.com/dpkp/kafka-python", "anchor_text": "Kafka-python"}, {"url": "https://www.influxdata.com/products/influxdb-overview/", "anchor_text": "InfluxDB"}, {"url": "https://grafana.redouaneachouri.com/d/twitter-sentiment-analysis/twitter-sentiment-analysis", "anchor_text": "grafana.redouaneachouri.com"}, {"url": "https://github.com/redouane-dev/twitter-sentiment-analysis/blob/master/docker-compose.yaml", "anchor_text": "docker-compose.yaml"}, {"url": "https://github.com/redouane-dev/twitter-sentiment-analysis/blob/master/model/twitter-sentiment-analysis.ipynb", "anchor_text": "notebook here"}, {"url": "https://www.nltk.org/book/ch05.html", "anchor_text": "part-of-speech tagger"}, {"url": "https://www.ling.upenn.edu/courses/Fall_2003/ling001/penn_treebank_pos.html", "anchor_text": "full list of possible tags"}, {"url": "https://developer.twitter.com/en/docs/basics/tco", "anchor_text": "t.co"}, {"url": "https://github.com/redouane-dev/twitter-sentiment-analysis/blob/master/model/twitter-sentiment-analysis.ipynb", "anchor_text": "notebook here"}, {"url": "https://www.buymeacoffee.com/redouaneachouri", "anchor_text": "buying me a coffee"}, {"url": "https://monkeylearn.com/sentiment-analysis/", "anchor_text": "MokeyLearn"}, {"url": "https://developer.twitter.com/en/docs", "anchor_text": "Twitter Developer portal"}, {"url": "https://kafka.apache.org/documentation/", "anchor_text": "Apache Kafka"}, {"url": "https://en.wikipedia.org/wiki/Stemming", "anchor_text": "Wikipedia"}, {"url": "https://en.wikipedia.org/wiki/Lemmatisation", "anchor_text": "Wikipedia"}, {"url": "https://www.digitalocean.com/community/tutorials/how-to-perform-sentiment-analysis-in-python-3-using-the-natural-language-toolkit-nltk", "anchor_text": "DigitalOcean"}, {"url": "https://medium.com/tag/twitter?source=post_page-----8fd92e19a6e6---------------twitter-----------------", "anchor_text": "Twitter"}, {"url": "https://medium.com/tag/sentiment-analysis?source=post_page-----8fd92e19a6e6---------------sentiment_analysis-----------------", "anchor_text": "Sentiment Analysis"}, {"url": "https://medium.com/tag/python?source=post_page-----8fd92e19a6e6---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/nlp?source=post_page-----8fd92e19a6e6---------------nlp-----------------", "anchor_text": "NLP"}, {"url": "https://medium.com/tag/kafka?source=post_page-----8fd92e19a6e6---------------kafka-----------------", "anchor_text": "Kafka"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F8fd92e19a6e6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftwitter-sentiment-analysis-a-tale-of-stream-processing-8fd92e19a6e6&user=Redouane+Achouri&userId=e058a5afdc88&source=-----8fd92e19a6e6---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F8fd92e19a6e6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftwitter-sentiment-analysis-a-tale-of-stream-processing-8fd92e19a6e6&user=Redouane+Achouri&userId=e058a5afdc88&source=-----8fd92e19a6e6---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F8fd92e19a6e6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftwitter-sentiment-analysis-a-tale-of-stream-processing-8fd92e19a6e6&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----8fd92e19a6e6--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F8fd92e19a6e6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftwitter-sentiment-analysis-a-tale-of-stream-processing-8fd92e19a6e6&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----8fd92e19a6e6---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----8fd92e19a6e6--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----8fd92e19a6e6--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----8fd92e19a6e6--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----8fd92e19a6e6--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----8fd92e19a6e6--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----8fd92e19a6e6--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----8fd92e19a6e6--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----8fd92e19a6e6--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@redouane.achouri?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@redouane.achouri?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Redouane Achouri"}, {"url": "https://medium.com/@redouane.achouri/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "66 Followers"}, {"url": "http://www.redouaneachouri.com", "anchor_text": "www.redouaneachouri.com"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fe058a5afdc88&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftwitter-sentiment-analysis-a-tale-of-stream-processing-8fd92e19a6e6&user=Redouane+Achouri&userId=e058a5afdc88&source=post_page-e058a5afdc88--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fe299b4e3079f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftwitter-sentiment-analysis-a-tale-of-stream-processing-8fd92e19a6e6&newsletterV3=e058a5afdc88&newsletterV3Id=e299b4e3079f&user=Redouane+Achouri&userId=e058a5afdc88&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}