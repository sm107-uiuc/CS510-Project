{"url": "https://towardsdatascience.com/easy-fixes-for-sql-queries-ff9d8867a617", "time": 1683003348.798192, "path": "towardsdatascience.com/easy-fixes-for-sql-queries-ff9d8867a617/", "webpage": {"metadata": {"title": "Easy Fixes For SQL Queries. Rules of thumb for querying any\u2026 | by Kovid Rathee | Towards Data Science", "h1": "Easy Fixes For SQL Queries", "description": "SQL is a powerful tool for any role. Data drives all decisions at a company. And Data speaks only one language and that language is SQL. Writing SQL (or speaking, if you are a nerd) is simple. Most\u2026"}, "outgoing_paragraph_urls": [{"url": "https://medium.com/u/2236cf1a63ba?source=post_page-----ff9d8867a617--------------------------------", "anchor_text": "Pramono Winata", "paragraph_index": 5}, {"url": "https://dev.mysql.com/doc/refman/5.5/en/cast-functions.html#function_cast", "anchor_text": "CAST()", "paragraph_index": 8}, {"url": "https://www.percona.com/blog/2007/08/16/how-much-overhead-is-caused-by-on-disk-temporary-tables/", "anchor_text": "query data will happen on disk", "paragraph_index": 10}, {"url": "http://norvig.com/21-days.html#answers", "anchor_text": "latency becomes a performance killer", "paragraph_index": 10}, {"url": "https://news.ycombinator.com/item?id=17908403", "anchor_text": "this amazing video", "paragraph_index": 10}, {"url": "https://linktr.ee/kovid", "anchor_text": "This is not an exhaustive list", "paragraph_index": 16}, {"url": "https://kovidrathee.medium.com/membership", "anchor_text": "https://kovidrathee.medium.com/membership", "paragraph_index": 18}], "all_paragraphs": ["SQL is a powerful tool for any role. Data drives all decisions at a company. And Data speaks only one language and that language is SQL. Writing SQL (or speaking, if you are a nerd) is simple. Most people can do it. Only some do it well. This will be super short and super useful.", "Irrespective of the relational database management system or RDBMS (MySQL, PostgreSQL, SQL Server, Oracle) you are using, some rules of thumb apply to all of these. Here are the rules for doingSELECT on your database", "In other words, fetch only the data that you absolutely need \u2014 which can be done by using the good oldWHERE clause. Only in rare cases, you\u2019d find that not using an index gets you better performance. Don\u2019t worry about the rare cases. Indexes force the data to do a binary search (although binary search implementations are different in different databases). Essentially, you will be able to SELECT your data in logarithmic time rather than linear time.", "Fetch only the data you absolutely, most definitely need", "For example, a query on a table with 1 billion records not using an index might take as many as 1 billion passes to get the record you want. However, a query using an index on the column you are searching on will take less number of passes and will get the result more quickly as the log of 1 billion to the base 2 is about 30 (to be precise, 29.897352854). This is an oversimplification of the search process.", "Thanks for correcting on the log to the base 2 value was incorrect Pramono Winata.", "Issues can arise when the query engine is not able to use an index. This will result in the slowness of the query. The slowness will depend on the volume of the data being scanned by the query. The issues usually arise when the query engine is not able to understand or map the character set of the searched value (in a WHERE clause or a JOIN) with the table data definition. In such cases, explicit type casting usually helps.", "Use explicit casting when indexes are not being used", "For comparisons of a string column with a number, MySQL cannot use an index on the column to look up the value quickly. One way to avoid such problems is to use CAST().", "It\u2019s pretty much similar in all databases. The severity of the issue depends on the implementation of the query engine in any database.", "In many databases, using subqueries will enforce the data to be copied to disk and the calculations on your query data will happen on disk (the data will be fetched and written to disk time and again) rather than in-memory. If that happens, it becomes a severe overhead if the data is large. The latency becomes a performance killer when this happens. Check this amazing video by Admiral Grace Hopper about what a nanosecond means. Latency is usually measured in nanoseconds.", "Beware about subqueries and the usage of disk", "In fact, use anything wisely that creates (forces a creation) a temporary table on disk \u2014", "Sort operations are extremely costly. Every database has its own implementation of a sorting algorithm. They might have used one of the traditional sorting algorithms or they might have come up with their own. In any case, as this is a very resource intensive operation which, again, involves pushing data to and pulling data from disk, sorting should be used shrewdly.", "Traditional relational databases can lead to contention issues when you are querying data for too long. And that\u2019s exactly what happens when you do LIKE queries. They affect the performance of the whole database and other running queries. There are alternatives to using LIKE \u2014", "Use full-text capabilities of your relational database or use something like Elasticsearch for text searches", "This is not an exhaustive list. There are more relating to the use of DISTINCT and OR and EXISTS and IN clauses but the ones I have selected seem to be the most problematic and easy to fix. These are only some of the general rules of thumb that you should keep in mind while writing and rewriting queries.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "I write about tech, Indian classical music, literature, and the workplace among other things. 1x engineer on weekdays. https://kovidrathee.medium.com/membership"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fff9d8867a617&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Feasy-fixes-for-sql-queries-ff9d8867a617&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Feasy-fixes-for-sql-queries-ff9d8867a617&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Feasy-fixes-for-sql-queries-ff9d8867a617&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Feasy-fixes-for-sql-queries-ff9d8867a617&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://me.dm/@kovidrathee", "anchor_text": "Mastodon"}, {"url": "https://towardsdatascience.com/?source=post_page-----ff9d8867a617--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----ff9d8867a617--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://kovidrathee.medium.com/?source=post_page-----ff9d8867a617--------------------------------", "anchor_text": ""}, {"url": "https://kovidrathee.medium.com/?source=post_page-----ff9d8867a617--------------------------------", "anchor_text": "Kovid Rathee"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F13d513db037&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Feasy-fixes-for-sql-queries-ff9d8867a617&user=Kovid+Rathee&userId=13d513db037&source=post_page-13d513db037----ff9d8867a617---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fff9d8867a617&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Feasy-fixes-for-sql-queries-ff9d8867a617&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fff9d8867a617&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Feasy-fixes-for-sql-queries-ff9d8867a617&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@thoughtcatalog?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Thought Catalog"}, {"url": "https://unsplash.com/s/photos/improvement?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Unsplash"}, {"url": "https://use-the-index-luke.com/sql/where-clause", "anchor_text": "WHERE"}, {"url": "https://medium.com/u/2236cf1a63ba?source=post_page-----ff9d8867a617--------------------------------", "anchor_text": "Pramono Winata"}, {"url": "https://dataschool.com/sql-optimization/how-indexing-works/", "anchor_text": "INDEXES"}, {"url": "https://dev.mysql.com/doc/refman/5.5/en/cast-functions.html#function_cast", "anchor_text": "CAST()"}, {"url": "https://dataschool.com/how-to-teach-people-sql/how-sql-subqueries-work/", "anchor_text": "Subqueries"}, {"url": "https://www.percona.com/blog/2007/08/16/how-much-overhead-is-caused-by-on-disk-temporary-tables/", "anchor_text": "query data will happen on disk"}, {"url": "http://norvig.com/21-days.html#answers", "anchor_text": "latency becomes a performance killer"}, {"url": "https://news.ycombinator.com/item?id=17908403", "anchor_text": "this amazing video"}, {"url": "https://use-the-index-luke.com/sql/sorting-grouping", "anchor_text": "Ordering/Sorting"}, {"url": "https://mode.com/sql-tutorial/sql-like/", "anchor_text": "LIKE"}, {"url": "https://linktr.ee/kovid", "anchor_text": "This is not an exhaustive list"}, {"url": "https://medium.com/tag/database?source=post_page-----ff9d8867a617---------------database-----------------", "anchor_text": "Database"}, {"url": "https://medium.com/tag/optimization?source=post_page-----ff9d8867a617---------------optimization-----------------", "anchor_text": "Optimization"}, {"url": "https://medium.com/tag/data-science?source=post_page-----ff9d8867a617---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/data-analysis?source=post_page-----ff9d8867a617---------------data_analysis-----------------", "anchor_text": "Data Analysis"}, {"url": "https://medium.com/tag/analytics?source=post_page-----ff9d8867a617---------------analytics-----------------", "anchor_text": "Analytics"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fff9d8867a617&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Feasy-fixes-for-sql-queries-ff9d8867a617&user=Kovid+Rathee&userId=13d513db037&source=-----ff9d8867a617---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fff9d8867a617&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Feasy-fixes-for-sql-queries-ff9d8867a617&user=Kovid+Rathee&userId=13d513db037&source=-----ff9d8867a617---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fff9d8867a617&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Feasy-fixes-for-sql-queries-ff9d8867a617&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----ff9d8867a617--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fff9d8867a617&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Feasy-fixes-for-sql-queries-ff9d8867a617&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----ff9d8867a617---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----ff9d8867a617--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----ff9d8867a617--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----ff9d8867a617--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----ff9d8867a617--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----ff9d8867a617--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----ff9d8867a617--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----ff9d8867a617--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----ff9d8867a617--------------------------------", "anchor_text": ""}, {"url": "https://kovidrathee.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://kovidrathee.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Kovid Rathee"}, {"url": "https://kovidrathee.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "3.1K Followers"}, {"url": "https://kovidrathee.medium.com/membership", "anchor_text": "https://kovidrathee.medium.com/membership"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F13d513db037&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Feasy-fixes-for-sql-queries-ff9d8867a617&user=Kovid+Rathee&userId=13d513db037&source=post_page-13d513db037--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F8154c41b0f77&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Feasy-fixes-for-sql-queries-ff9d8867a617&newsletterV3=13d513db037&newsletterV3Id=8154c41b0f77&user=Kovid+Rathee&userId=13d513db037&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}