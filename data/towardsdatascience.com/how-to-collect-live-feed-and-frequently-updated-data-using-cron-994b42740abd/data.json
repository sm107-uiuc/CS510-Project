{"url": "https://towardsdatascience.com/how-to-collect-live-feed-and-frequently-updated-data-using-cron-994b42740abd", "time": 1683016968.4811468, "path": "towardsdatascience.com/how-to-collect-live-feed-and-frequently-updated-data-using-cron-994b42740abd/", "webpage": {"metadata": {"title": "How to Collect Live Feed and Frequently Updated Data Using Cron | by Mitchell Krieger | Towards Data Science", "h1": "How to Collect Live Feed and Frequently Updated Data Using Cron", "description": "A major concern when collecting time series data is ensuring that all data is collected at equal time intervals. Without equal time intervals, you will be unable to use most methods for time series\u2026"}, "outgoing_paragraph_urls": [{"url": "https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.to_csv.html", "anchor_text": "documentation found here", "paragraph_index": 3}, {"url": "https://crontab.guru/", "anchor_text": "Crontab Guru", "paragraph_index": 11}], "all_paragraphs": ["A major concern when collecting time series data is ensuring that all data is collected at equal time intervals. Without equal time intervals, you will be unable to use most methods for time series analysis. Unfortunately, not all data comes so clean and evenly spaced. Whether you are webscraping or using an API to collect your data, you may be stuck with a live feed of current data when evenly spaced historical data is unavailable. Or perhaps, you need to repeatedly grab the most up-to-date data for your dashboard or project. Both of the situations can be handled well by cron.", "Cron is a tool that you can use in your terminal/console to schedule tasks, called \u201ccronjobs\u201d, repeatedly at a specified time interval. These tasks can be anything you can do from terminal, but for the typical data scientist using python, it\u2019s great for running a .py script that webscrapes or interfaces with an API repeatedly. This way you can choose the time interval at which you want to fetch your new data thus either adding to your live feed data collection or updating your dataset with the most recent information. Here\u2019s how to implement it:", "Before we even get started with chron, identify what you want to do, and make sure you know how to execute it through terminal. If you are webscraping or interfacing with an API to create a time-sensitive dataset, create your .py script, and be sure it executes properly in terminal with the command:", "Also, if you are collecting data, it is important that your script outputs the information collected and stores it in a place for later. For example, let\u2019s say I am collecting a dataset of tweets using Twitter\u2019s API and want to make sure it has the most up recent tweets of a particular hashtag. After receiving tweets from the API, I need to store these tweets somewhere. Having the script output a simple text file may do or if I\u2019ve converted the data into a pandas DataFrame, its easy enough to use the to_csv() method (documentation found here). However you are storing your data, be sure that your script saves these new files to a predetermined location.", "A crontab is a file that contains a list of cronjobs and how often you want to execute them. To open/edit a crontab simply use the command:", "The -e is for edit. This should open a vim window that contains all of your cronjobs. If you\u2019ve never used cron before it should look something like this:", "In your crontab you\u2019ll enter in the cron job you want to execute. Hit the i button to insert your first cronjob.", "The syntax of a cronjob can be a little confusing. Here\u2019s a recent one of mine:", "Let\u2019s break this down piece by piece. A simplified sudocode cron job would look like this:", "Time interval: The first part records how often you want the cronjob to run. It consists of five slots for the minute, hour, day of month, month and day of week respectively:", "There are 4 main special characters for the cron time interval:", "So, if you wanted to run the cronjob every 30 minutes from 9am \u2014 5pm every other month, every October you would put 0,30 9-17 * */2 * , where 0,30indicates the 0th and 30th minute of every hour, 9\u201317indicates 9am \u2014 5pm, the first * is any day of the month */2 is every other month and the last * is any day of the week. Note that for day of week, Sunday is 0. The Crontab Guru is a helpful tool that translates the cron time format into an English phrase if you are worried about hitting your desired interval with this syntax.", "Cronjob: This section is what you are executing from terminal. In my above example, I\u2019m first navigating to where the director where script is on my computer cd ~/Desktop/live_data and then executing it. The&& indicates an the additional execution action. White, the long filepath is navigating to where my python3 executable is installed. If you don\u2019t know where this is try the which python command in terminal and it should output this path. I lastly call the name of my script (bikecron.py) to have python execute it.", "Where to log: This is optional, but the last piece tells cron where to log information about any potential issues/errors that may be helpful in troubleshooting. I told it to log errors in a text file called log.txt found in that file path. The 2>&1 means take the standard error (2), redirect it (>) to the file path indicated (&) and store the standard out (1). Without this piece cron may email you if there\u2019s an issue with some job. I highly recommend using it.", "After you\u2019ve created your cronjob in crontab, save it by hitting esc and then typing :wq and hit enter. This window may pop up:", "Hit OK. At this point you may be all set to go, but for some macs the security preferences may prevent cron from executing. You\u2019ll know if this happens because an errno1 operation not permitted error will be logged in the log.txt file by crontab. To fix this, go to System Preference > Security & Privacy > Privacy. Scroll down to Full Disk Access and grant access to cron:", "If you don\u2019t see cron use the + symbol to find chron. If you don\u2019t know where cron is try,command+shift+G to open finder\u2019s Go to Folder\u2026 feature, and type /usr/sbin/cron and hit Enter .", "Be careful with this step. Malware on your computer could try to use cron to create cronjobs and when cron is checked off as it is above, it has full untethered access to everything on your computer. If you are not actively running cron, I recommend denying Full Disk Access to cron by unchecking it.", "After that, you should be all set and cron will execute your cronjob at the interval you told it to, effectively collecting evenly spaced time series data and/or updating to the newest data at regular intervals. I recommend checking after the first couple intervals to make sure everything is set up correctly.", "Other useful cron commands as you continue to use it:", "Cron will only run while your computer is awake, so you\u2019ll either need to set your computer to stay awake or wake up at regular intervals.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Mitch Krieger lives in NYC | Data Scientist @ Middesk | Formerly NYU, BlockFi, L!FE Leaders, CITYterm | Hampshire College Alum"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F994b42740abd&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-collect-live-feed-and-frequently-updated-data-using-cron-994b42740abd&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-collect-live-feed-and-frequently-updated-data-using-cron-994b42740abd&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-collect-live-feed-and-frequently-updated-data-using-cron-994b42740abd&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-collect-live-feed-and-frequently-updated-data-using-cron-994b42740abd&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----994b42740abd--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----994b42740abd--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://mitchellkrieger.medium.com/?source=post_page-----994b42740abd--------------------------------", "anchor_text": ""}, {"url": "https://mitchellkrieger.medium.com/?source=post_page-----994b42740abd--------------------------------", "anchor_text": "Mitchell Krieger"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F8ba082c644e6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-collect-live-feed-and-frequently-updated-data-using-cron-994b42740abd&user=Mitchell+Krieger&userId=8ba082c644e6&source=post_page-8ba082c644e6----994b42740abd---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F994b42740abd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-collect-live-feed-and-frequently-updated-data-using-cron-994b42740abd&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F994b42740abd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-collect-live-feed-and-frequently-updated-data-using-cron-994b42740abd&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@nick604?utm_source=medium&utm_medium=referral", "anchor_text": "Nick Chong"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.to_csv.html", "anchor_text": "documentation found here"}, {"url": "https://crontab.guru/", "anchor_text": "Crontab Guru"}, {"url": "https://medium.com/tag/data-science?source=post_page-----994b42740abd---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/cron?source=post_page-----994b42740abd---------------cron-----------------", "anchor_text": "Cron"}, {"url": "https://medium.com/tag/data-collection?source=post_page-----994b42740abd---------------data_collection-----------------", "anchor_text": "Data Collection"}, {"url": "https://medium.com/tag/python?source=post_page-----994b42740abd---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/terminal?source=post_page-----994b42740abd---------------terminal-----------------", "anchor_text": "Terminal"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F994b42740abd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-collect-live-feed-and-frequently-updated-data-using-cron-994b42740abd&user=Mitchell+Krieger&userId=8ba082c644e6&source=-----994b42740abd---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F994b42740abd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-collect-live-feed-and-frequently-updated-data-using-cron-994b42740abd&user=Mitchell+Krieger&userId=8ba082c644e6&source=-----994b42740abd---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F994b42740abd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-collect-live-feed-and-frequently-updated-data-using-cron-994b42740abd&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----994b42740abd--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F994b42740abd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-collect-live-feed-and-frequently-updated-data-using-cron-994b42740abd&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----994b42740abd---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----994b42740abd--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----994b42740abd--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----994b42740abd--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----994b42740abd--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----994b42740abd--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----994b42740abd--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----994b42740abd--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----994b42740abd--------------------------------", "anchor_text": ""}, {"url": "https://mitchellkrieger.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://mitchellkrieger.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Mitchell Krieger"}, {"url": "https://mitchellkrieger.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "183 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F8ba082c644e6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-collect-live-feed-and-frequently-updated-data-using-cron-994b42740abd&user=Mitchell+Krieger&userId=8ba082c644e6&source=post_page-8ba082c644e6--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fbd6f9ed6fbf5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-collect-live-feed-and-frequently-updated-data-using-cron-994b42740abd&newsletterV3=8ba082c644e6&newsletterV3Id=bd6f9ed6fbf5&user=Mitchell+Krieger&userId=8ba082c644e6&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}