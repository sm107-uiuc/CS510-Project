{"url": "https://towardsdatascience.com/stacked-bar-charts-with-pythons-matplotlib-f4020e4eb4a7", "time": 1683016889.982251, "path": "towardsdatascience.com/stacked-bar-charts-with-pythons-matplotlib-f4020e4eb4a7/", "webpage": {"metadata": {"title": "Stacked Bar Charts with Python\u2019s Matplotlib | by Thiago Carvalho | Towards Data Science", "h1": "Stacked Bar Charts with Python\u2019s Matplotlib", "description": "Bar charts are by far my favourite visualization technique. They are very versatile, usually easy to read, and relatively straightforward to build. Just like any visualization, they do have some\u2026"}, "outgoing_paragraph_urls": [{"url": "https://www.kaggle.com/gregorut/videogamesales", "anchor_text": "dataset", "paragraph_index": 5}, {"url": "https://linktr.ee/thiagobc23", "anchor_text": "More Tutorials", "paragraph_index": 37}, {"url": "https://twitter.com/thiagobc231", "anchor_text": "Twitter", "paragraph_index": 37}], "all_paragraphs": ["Bar charts are by far my favourite visualization technique. They are very versatile, usually easy to read, and relatively straightforward to build.", "Just like any visualization, they do have some disadvantages as well. For example, they struggle with scalability.", "Too many bars in a bar chart make it confusing and hard to read. That is more than ordinary when we\u2019re working with hierarchical categories \u2014 In other words, when we have groups and subgroups that we need to visualize.", "Stacked bars are a great alternative in those cases, allowing us to compare and analyze those groups' composition.", "In this article, we\u2019ll explore how to build those visualizations with Python\u2019s Matplotlib.", "I\u2019ll be using a simple dataset that holds data on video game copies sold worldwide. The dataset is quite outdated, but it\u2019s suitable for the following examples.", "Let\u2019s read and get a look at it.", "I want to visualize the total number of copies sold by platform and analyze the regions where they were sold.", "Having the regions already separated into columns helps a lot; we only need to group the records by \u2018Platform\u2019 and sum the values from NA_Sales to Global_Sales.", "Groupby \u2192 Sum \u2192 Select Fields", "That is too many values; even considering the empty records, there will be too many bars in our chart.", "Let\u2019s plot a bar for each platform and region and get a look at the result.", "As expected, the chart is hard to read. Let\u2019s try the stacked bar chart and add a few adjustments.", "First, we can sort the values before plotting, giving us a better sense of order and making it easier to compare the bars. We\u2019ll do so with the \u2018Global Sales\u2019 column since it has the total.", "Earlier, to build a clustered bar chart, we used a plot for each region where the width parameter and adjustments in the x-axis helped us fit each platform's four areas.", "Similarly, for plotting stack bar charts, we\u2019ll use a plot for each region. This time we\u2019ll use the bottom/left parameter to tell Matplotlib what comes before the bars we\u2019re drawing.", "Cool. We can use a loop to plot the bars, passing a list of zeros for the \u2018bottom\u2019 parameter in the first set and accumulating the following values for the next regions.", "Great, this is way more readable than the last one.", "It\u2019s important to remember the purpose of this chart before trying to extract any insights. The idea here is to compare the platforms' total sales and understand each platform's composition.", "Comparing totals across fields and comparing regions inside one bar is ok. Comparing regions from different bars, on the other hand, can be very misleading.", "In this case, we can compare the NA region across the bars since it has the same starting point for every bar, but it isn't so easy to compare the others. Take the X360, for example, it has a lower value for JP than the PS2, but it\u2019s hard to compare if the Others value is higher or lower than the Wii.", "Suppose we change the stack's order, with Other Sales as the first bar, and sort the records by Other Sales. It should be easier to tell which is more significant.", "There are two essential elements in this visualization, the order of the categories in the stack of bars and the rows' order.", "If we want to emphasize one region, we can sort the records with the chosen field and use it as the left-most bar.", "If we don\u2019t, we can sort the records by the total and order the stacks with the categories that have higher values first.", "Stacked bar charts are excellent for comparing categories and visualizing their composition, but we can take even more advantage of them.", "We can focus on displaying parts of a whole. To achieve that we\u2019ll have to prepare our data and calculate the proportion of sales for each region.", "Now we can pretty much repeat what we did earlier with some small tweaks. Let\u2019s also get our code into a method so we can reuse it.", "That\u2019s a great way to visualize the proportion of sales for each region. It\u2019s also easier to compare the Others category since all the bars end at the same point.", "In my opinion, visualizing proportion with 100% stacked bar charts looks even better when we have only two categories. Since we have a fixed start for the first and a fixed end for the other, it\u2019s effortless to visualize the differences and compare the values.", "Lastly, let\u2019s try building a stacked bar chart with both positive and negative values.", "We\u2019ll create a dummy data frame for this example.", "The plan is to have a positive bar, divided into sales and interest revenue, and a negative bar, divided into fixed and variable costs, for each month.", "We want interest_revenue on top, so we use sales_revenue as the \u2018bottom\u2019 argument when plotting.", "We want fixed_costs at the top for the negative values, but instead, we\u2019ll plot variable_costs with fixed_costs as the \u2018bottom\u2019 argument.", "Again, the rest is very similar to what we already did.", "That\u2019s it. We stacked many bars and tried different applications for this convenient visualization technique.", "Thanks for reading my article!More Tutorials | Twitter", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Ff4020e4eb4a7&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fstacked-bar-charts-with-pythons-matplotlib-f4020e4eb4a7&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fstacked-bar-charts-with-pythons-matplotlib-f4020e4eb4a7&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fstacked-bar-charts-with-pythons-matplotlib-f4020e4eb4a7&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fstacked-bar-charts-with-pythons-matplotlib-f4020e4eb4a7&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----f4020e4eb4a7--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----f4020e4eb4a7--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://thiago-bernardes-carvalho.medium.com/?source=post_page-----f4020e4eb4a7--------------------------------", "anchor_text": ""}, {"url": "https://thiago-bernardes-carvalho.medium.com/?source=post_page-----f4020e4eb4a7--------------------------------", "anchor_text": "Thiago Carvalho"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F7af498f86142&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fstacked-bar-charts-with-pythons-matplotlib-f4020e4eb4a7&user=Thiago+Carvalho&userId=7af498f86142&source=post_page-7af498f86142----f4020e4eb4a7---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ff4020e4eb4a7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fstacked-bar-charts-with-pythons-matplotlib-f4020e4eb4a7&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ff4020e4eb4a7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fstacked-bar-charts-with-pythons-matplotlib-f4020e4eb4a7&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://www.kaggle.com/gregorut/videogamesales", "anchor_text": "dataset"}, {"url": "https://linktr.ee/thiagobc23", "anchor_text": "More Tutorials"}, {"url": "https://twitter.com/thiagobc231", "anchor_text": "Twitter"}, {"url": "https://matplotlib.org/3.3.3/api/_as_gen/matplotlib.pyplot.bar.html", "anchor_text": "Matplotlib Bar"}, {"url": "https://matplotlib.org/3.1.1/gallery/lines_bars_and_markers/bar_stacked.html", "anchor_text": "Matplotlib Gallery Stacked Bar"}, {"url": "https://matplotlib.org/3.1.1/gallery/lines_bars_and_markers/barh.html", "anchor_text": "Matplotlib Gallery Horizontal Bar"}, {"url": "https://medium.com/tag/python?source=post_page-----f4020e4eb4a7---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/matplotlib?source=post_page-----f4020e4eb4a7---------------matplotlib-----------------", "anchor_text": "Matplotlib"}, {"url": "https://medium.com/tag/data-visualization?source=post_page-----f4020e4eb4a7---------------data_visualization-----------------", "anchor_text": "Data Visualization"}, {"url": "https://medium.com/tag/data-science?source=post_page-----f4020e4eb4a7---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/bar-chart?source=post_page-----f4020e4eb4a7---------------bar_chart-----------------", "anchor_text": "Bar Chart"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Ff4020e4eb4a7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fstacked-bar-charts-with-pythons-matplotlib-f4020e4eb4a7&user=Thiago+Carvalho&userId=7af498f86142&source=-----f4020e4eb4a7---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Ff4020e4eb4a7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fstacked-bar-charts-with-pythons-matplotlib-f4020e4eb4a7&user=Thiago+Carvalho&userId=7af498f86142&source=-----f4020e4eb4a7---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ff4020e4eb4a7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fstacked-bar-charts-with-pythons-matplotlib-f4020e4eb4a7&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----f4020e4eb4a7--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Ff4020e4eb4a7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fstacked-bar-charts-with-pythons-matplotlib-f4020e4eb4a7&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----f4020e4eb4a7---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----f4020e4eb4a7--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----f4020e4eb4a7--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----f4020e4eb4a7--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----f4020e4eb4a7--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----f4020e4eb4a7--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----f4020e4eb4a7--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----f4020e4eb4a7--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----f4020e4eb4a7--------------------------------", "anchor_text": ""}, {"url": "https://thiago-bernardes-carvalho.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://thiago-bernardes-carvalho.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Thiago Carvalho"}, {"url": "https://thiago-bernardes-carvalho.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "1.7K Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F7af498f86142&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fstacked-bar-charts-with-pythons-matplotlib-f4020e4eb4a7&user=Thiago+Carvalho&userId=7af498f86142&source=post_page-7af498f86142--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F10a0f4458714&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fstacked-bar-charts-with-pythons-matplotlib-f4020e4eb4a7&newsletterV3=7af498f86142&newsletterV3Id=10a0f4458714&user=Thiago+Carvalho&userId=7af498f86142&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}