{"url": "https://towardsdatascience.com/web-scraping-yahoo-finance-477fe3daa852", "time": 1683003424.6595619, "path": "towardsdatascience.com/web-scraping-yahoo-finance-477fe3daa852/", "webpage": {"metadata": {"title": "Web Scraping Yahoo Finance. Pull financial statements and stock\u2026 | by Randy Macaraeg | Towards Data Science", "h1": "Web Scraping Yahoo Finance", "description": "In the business world, it\u2019s important to know the financial health of a company. Looking at the financial statements is a great way to get some insight into how well a company is doing. In this blog\u2026"}, "outgoing_paragraph_urls": [{"url": "https://github.com/rmacaraeg/yahoo_finance", "anchor_text": "GitHub", "paragraph_index": 0}], "all_paragraphs": ["The code to this blog can be found on my GitHub.", "In the business world, it\u2019s important to know the financial health of a company. Looking at the financial statements is a great way to get some insight into how well a company is doing.", "In this blog, I\u2019ll go over pulling the financial statements from Yahoo Finance for any company in their database in Python. Because Yahoo Finance uses JavaScript, we utilize a combination of BeautifulSoup and Selenium", "Let\u2019s start with the necessary libraries:", "I prefer using Chrome as my web browser, but feel free to use whatever you\u2019re most comfortable with (Firefox, Safari, etc.). I\u2019m also using Apple as my example company, but you can change the AAPL ticker in the link to another company\u2019s stock ticker to change the data.", "The above code will open the page in a dummy browser and pull all of the data within the body of the website. Since Yahoo Finance operates on JavaScript, running the code through this method pulls all of the data and saves it as if it were a static website. This is important for pulling the stock price, as those are dynamic items on the webpage and can refresh/update at regular intervals.", "To pull the stock data, we start by getting the location of the stock prices. By hovering over the stock price we can use the Inspect tool to find the exact syntax for the stock price.", "Transferring this information into Python, the code would look like this:", "This code searches for the \u2018span\u2019 tag within all of the HTML code and looks for the class attribute that matches the one entered. Luckily this pulls only one number, which is the stock price at the close.", "Now that we have this we can move on to the financial statements.", "Continuing on with the scraping, we search the page to find all of the div containers, and dive in a bit further to find the features we want to work with. I found that each row of the financial data is stored within a div container with a common class attribute of \u2018D(tbr)\u2019. In the example below there are additional pieces of data in the class attribute, but as long as the first portion matches what we\u2019re searching it will pull that data.", "This will pull a lot of messy looking data which confused me for a while. After digging into the data pulled, I used a find function to see where each line of data was that I wanted. After a lot of trial and error, I was able to produce the code to pull only the financial data:", "The headers were separated from the rest of the data since it was causing some issues when putting all of the data together. After creating a list of the headers and multiple lists for the data within the financial statements, it combines everything together to produce a copy!", "It looks just like Apple\u2019s income statement (minus formatting), but while it looks complete, the next issue is that all of the numbers on the page are saved as strings. If we want to do any future calculations on it, we\u2019d have to change them all to integers:", "With a quick for loop, we can turn all of the number strings into integers:", "This converts all numbered strings into actual numbers, and for all NaNs it is replaced by a dash.", "The final product looks pretty good and can now be used for calculations!", "While this pulls only the income statement from Apple, if you use Yahoo Finance\u2019s link on the balance sheet or statement of cash flows, the code should pull everything fine and put the statement together just like the above.", "I\u2019m sure there\u2019s a lot of additional work that can be done to clean this up and I\u2019d love to make it look more like an official statement in the near future. While continuing to work on this, I\u2019d like to go over some deep dives into the data to find basic financial ratios and go over things like company valuation, investment analysis, and other trends/findings I can dig out from this data. Stay tuned!", "I hope this code helps, and if you have any feedback or suggestions I\u2019d love to hear it!", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F477fe3daa852&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fweb-scraping-yahoo-finance-477fe3daa852&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fweb-scraping-yahoo-finance-477fe3daa852&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fweb-scraping-yahoo-finance-477fe3daa852&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fweb-scraping-yahoo-finance-477fe3daa852&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----477fe3daa852--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----477fe3daa852--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@randysm?source=post_page-----477fe3daa852--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@randysm?source=post_page-----477fe3daa852--------------------------------", "anchor_text": "Randy Macaraeg"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F41571626b7fd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fweb-scraping-yahoo-finance-477fe3daa852&user=Randy+Macaraeg&userId=41571626b7fd&source=post_page-41571626b7fd----477fe3daa852---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F477fe3daa852&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fweb-scraping-yahoo-finance-477fe3daa852&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F477fe3daa852&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fweb-scraping-yahoo-finance-477fe3daa852&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@markusspiske?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Markus Spiske"}, {"url": "https://unsplash.com/s/photos/finance?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Unsplash"}, {"url": "https://github.com/rmacaraeg/yahoo_finance", "anchor_text": "GitHub"}, {"url": "https://finance.yahoo.com/quote/AAPL/financials?p=AAPL'", "anchor_text": "https://finance.yahoo.com/quote/AAPL/financials?p=AAPL'"}, {"url": "https://medium.com/tag/finance?source=post_page-----477fe3daa852---------------finance-----------------", "anchor_text": "Finance"}, {"url": "https://medium.com/tag/python?source=post_page-----477fe3daa852---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/web-scraping?source=post_page-----477fe3daa852---------------web_scraping-----------------", "anchor_text": "Web Scraping"}, {"url": "https://medium.com/tag/accounting?source=post_page-----477fe3daa852---------------accounting-----------------", "anchor_text": "Accounting"}, {"url": "https://medium.com/tag/stock-market?source=post_page-----477fe3daa852---------------stock_market-----------------", "anchor_text": "Stock Market"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F477fe3daa852&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fweb-scraping-yahoo-finance-477fe3daa852&user=Randy+Macaraeg&userId=41571626b7fd&source=-----477fe3daa852---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F477fe3daa852&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fweb-scraping-yahoo-finance-477fe3daa852&user=Randy+Macaraeg&userId=41571626b7fd&source=-----477fe3daa852---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F477fe3daa852&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fweb-scraping-yahoo-finance-477fe3daa852&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----477fe3daa852--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F477fe3daa852&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fweb-scraping-yahoo-finance-477fe3daa852&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----477fe3daa852---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----477fe3daa852--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----477fe3daa852--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----477fe3daa852--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----477fe3daa852--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----477fe3daa852--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----477fe3daa852--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----477fe3daa852--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----477fe3daa852--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@randysm?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@randysm?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Randy Macaraeg"}, {"url": "https://medium.com/@randysm/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "276 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F41571626b7fd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fweb-scraping-yahoo-finance-477fe3daa852&user=Randy+Macaraeg&userId=41571626b7fd&source=post_page-41571626b7fd--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F6290336f38d1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fweb-scraping-yahoo-finance-477fe3daa852&newsletterV3=41571626b7fd&newsletterV3Id=6290336f38d1&user=Randy+Macaraeg&userId=41571626b7fd&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}