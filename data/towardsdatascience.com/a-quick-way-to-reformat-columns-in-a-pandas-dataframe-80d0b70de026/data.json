{"url": "https://towardsdatascience.com/a-quick-way-to-reformat-columns-in-a-pandas-dataframe-80d0b70de026", "time": 1683010846.5291982, "path": "towardsdatascience.com/a-quick-way-to-reformat-columns-in-a-pandas-dataframe-80d0b70de026/", "webpage": {"metadata": {"title": "A Quick Way to Reformat Columns in a Pandas DataFrame | by Byron Dolon | Towards Data Science", "h1": "A Quick Way to Reformat Columns in a Pandas DataFrame", "description": "Pre-processing data can be made a lot easier with the in-built Pandas function \"DataFrame.melt()\". Check out how in this 4 minute guide with examples."}, "outgoing_paragraph_urls": [{"url": "https://www.kaggle.com/gregorut/videogamesales", "anchor_text": "this", "paragraph_index": 8}], "all_paragraphs": ["It may be tempting to dive straight into analysis, but an important step before any of that is pre-processing.", "Pandas offers a lot of built-in functionality that allows you to reformat a DataFrame just the way you need it. Most data sets require some form of reshaping before you can perform calculations or create visualizations.", "In this piece, we\u2019ll be looking at how you can use one the df.melt function to combine the values of many columns into one.", "This means you\u2019re changing a DataFrame from a \u201cwide\u201d format to a \u201clong\u201d format. This is helpful when you have many columns that technically have the same type of values.", "For example, say you owned a coffee shop and started with two types of drinks. To keep track of the ingredients for each drink, you made a table that looked like this:", "This might work for now, but what if you wanted to include a drink with three ingredients? You\u2019d have to create another column like \u201cIngredient 3\u201d, but what if you wanted a drink with 4, 5 or even 10 ingredients? Making new columns every time you need to enter more data isn\u2019t the most elegant of solutions.", "Instead, it would be great if you had a table like this:", "Now, your table is a lot more flexible. Your drinks can have as many or as little ingredients as you want, and you don\u2019t need to alter the table structure for different kinds of data entries.", "Let\u2019s take a look at how to do this with df.melt on a more complicated example. We\u2019ll be using a modified version of this video game sales data, so download the csv file if you want to follow along. I\u2019ve loaded and pre-processed it for this exercise, so you can use the code below to get started.", "Side note: if you\u2019re unfamiliar with the df.loc[] functionality, you can check out this piece I wrote on it and other vectorized Pandas solutions below.", "You can see in the table above we have several aggregated sales values for different regions. While this is easy to read, it\u2019s not the best table structure possible.", "Our goal is to put all the sales values into one column, and all the sales regions into another column.", "Before we do that, let\u2019s briefly introduce the df.melt function. The function has four key parameters:", "For our table, we need to identify each row with the \u201cPlatform\u201d column, so we\u2019ll pass that into id_vars. Our value columns will be all the sales columns except for \u201cGlobal Sales\u201d, because that\u2019s not technically a region category. We\u2019ll pass a list of the column names into value_vars to implement this.", "To improve readability, we\u2019ll also name our two new columns \u201cSales Region\u201d and \u201cSales (millions)\u201d by including them in the var_name and value_name parameters respectively.", "The final code looks like this:", "And there it is! We\u2019ve moved all the old columns names into a new category column and combined their values into a single values column.", "For better presentation, we can also sort the table with one additional line of code:", "I hope you found this quick look at df.melt useful for your work with Pandas! Without going into too much detail, you can also implement this technique to create tables that can satisfy 1NF and better structure the inputs to a relational database.", "Pandas also has a lot more to offer in terms of sorting than the method I used above, so if you\u2019d like to see more, you can check out this piece:", "Good luck on your adventures with Pandas!", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Medium has become a place to store my \u201chow to do tech stuff\u201d type guides. Come check out my notes on data-related shenanigans!"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F80d0b70de026&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-quick-way-to-reformat-columns-in-a-pandas-dataframe-80d0b70de026&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-quick-way-to-reformat-columns-in-a-pandas-dataframe-80d0b70de026&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-quick-way-to-reformat-columns-in-a-pandas-dataframe-80d0b70de026&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-quick-way-to-reformat-columns-in-a-pandas-dataframe-80d0b70de026&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----80d0b70de026--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----80d0b70de026--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://byrondolon.medium.com/?source=post_page-----80d0b70de026--------------------------------", "anchor_text": ""}, {"url": "https://byrondolon.medium.com/?source=post_page-----80d0b70de026--------------------------------", "anchor_text": "Byron Dolon"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F6b5d063df5dd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-quick-way-to-reformat-columns-in-a-pandas-dataframe-80d0b70de026&user=Byron+Dolon&userId=6b5d063df5dd&source=post_page-6b5d063df5dd----80d0b70de026---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F80d0b70de026&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-quick-way-to-reformat-columns-in-a-pandas-dataframe-80d0b70de026&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F80d0b70de026&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-quick-way-to-reformat-columns-in-a-pandas-dataframe-80d0b70de026&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://www.kaggle.com/gregorut/videogamesales", "anchor_text": "this"}, {"url": "https://towardsdatascience.com/you-dont-always-have-to-loop-through-rows-in-pandas-22a970b347ac", "anchor_text": "You Don\u2019t Always Have to Loop Through Rows in Pandas!A look at alternatives to \u201cfor loops\u201d with vectorized solutions.towardsdatascience.com"}, {"url": "https://towardsdatascience.com/4-different-ways-to-efficiently-sort-a-pandas-dataframe-9aba423f12db", "anchor_text": "4 Different Ways to Efficiently Sort a Pandas DataFrameProperly exploring, understanding, and organizing your data.towardsdatascience.com"}, {"url": "https://medium.com/tag/python?source=post_page-----80d0b70de026---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/programming?source=post_page-----80d0b70de026---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/tag/data-science?source=post_page-----80d0b70de026---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/technology?source=post_page-----80d0b70de026---------------technology-----------------", "anchor_text": "Technology"}, {"url": "https://medium.com/tag/pandas?source=post_page-----80d0b70de026---------------pandas-----------------", "anchor_text": "Pandas"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F80d0b70de026&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-quick-way-to-reformat-columns-in-a-pandas-dataframe-80d0b70de026&user=Byron+Dolon&userId=6b5d063df5dd&source=-----80d0b70de026---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F80d0b70de026&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-quick-way-to-reformat-columns-in-a-pandas-dataframe-80d0b70de026&user=Byron+Dolon&userId=6b5d063df5dd&source=-----80d0b70de026---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F80d0b70de026&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-quick-way-to-reformat-columns-in-a-pandas-dataframe-80d0b70de026&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----80d0b70de026--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F80d0b70de026&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-quick-way-to-reformat-columns-in-a-pandas-dataframe-80d0b70de026&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----80d0b70de026---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----80d0b70de026--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----80d0b70de026--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----80d0b70de026--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----80d0b70de026--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----80d0b70de026--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----80d0b70de026--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----80d0b70de026--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----80d0b70de026--------------------------------", "anchor_text": ""}, {"url": "https://byrondolon.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://byrondolon.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Byron Dolon"}, {"url": "https://byrondolon.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "1.2K Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F6b5d063df5dd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-quick-way-to-reformat-columns-in-a-pandas-dataframe-80d0b70de026&user=Byron+Dolon&userId=6b5d063df5dd&source=post_page-6b5d063df5dd--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fb2ea4b269407&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-quick-way-to-reformat-columns-in-a-pandas-dataframe-80d0b70de026&newsletterV3=6b5d063df5dd&newsletterV3Id=b2ea4b269407&user=Byron+Dolon&userId=6b5d063df5dd&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}