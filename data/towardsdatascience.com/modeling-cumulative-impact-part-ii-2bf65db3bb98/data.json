{"url": "https://towardsdatascience.com/modeling-cumulative-impact-part-ii-2bf65db3bb98", "time": 1682995296.497306, "path": "towardsdatascience.com/modeling-cumulative-impact-part-ii-2bf65db3bb98/", "webpage": {"metadata": {"title": "Modeling cumulative impact \u2014 Part II | by Ben Ogorek | Towards Data Science", "h1": "Modeling cumulative impact \u2014 Part II", "description": "In Modeling cumulative impact \u2014 Part I, the fitness-fatigue model explained the mean performance of our simulated hammer thrower, called \u201cH.T.,\u201d via the expected value equation: In the expectation\u2026"}, "outgoing_paragraph_urls": [{"url": "https://towardsdatascience.com/modeling-cumulative-impact-part-i-f7ef490ed5e3", "anchor_text": "Modeling cumulative impact \u2014 Part I", "paragraph_index": 0}, {"url": "https://github.com/baogorek/Miscellaneous/blob/master/R-code/sports/fitness-fatigue-convolution.ipynb", "anchor_text": "Jupyter notebook", "paragraph_index": 3}, {"url": "https://gist.github.com/baogorek/fd8044630383e6cb4f34b32cccd6c0a8", "anchor_text": "this Gist", "paragraph_index": 3}, {"url": "https://towardsdatascience.com/modeling-cumulative-impact-part-i-f7ef490ed5e3", "anchor_text": "Part I", "paragraph_index": 16}, {"url": "https://towardsdatascience.com/modeling-cumulative-impact-part-i-f7ef490ed5e3", "anchor_text": "Part I", "paragraph_index": 19}, {"url": "https://gist.github.com/baogorek/fd8044630383e6cb4f34b32cccd6c0a8", "anchor_text": "following comparative plots", "paragraph_index": 22}, {"url": "https://www.researchgate.net/publication/20910238_Modeling_human_performance_in_running", "anchor_text": "Modeling human performance in running", "paragraph_index": 27}, {"url": "https://www.researchgate.net/profile/Robin_Candau/publication/15242395_Fatigue_and_fitness_modelled_from_the_effects_of_training_on_performance/links/55720f2608ae7536374cdc09/Fatigue-and-fitness-modelled-from-the-effects-of-training-on-performance.pdf", "anchor_text": "Fatigue and fitness modelled from the effects of training on performance", "paragraph_index": 28}], "all_paragraphs": ["In Modeling cumulative impact \u2014 Part I, the fitness-fatigue model explained the mean performance of our simulated hammer thrower, called \u201cH.T.,\u201d via the expected value equation:", "In the expectation above, \u201cperformance\u201d p_n is calibrated such that 0 to 1000 covers able-bodied individual to world record [1], and w_i is and intensity-weighted training volume as defined by researchers of H.T.\u2019s performance, Busso, Candau, and Lacour [2]. This equation can be written conceptually as:", "where fitness and fatigue are convolutions of training intensities, w_i, with exponential decay. Part I explains this in detail, but the R code in Code Block 1 completes the performance simulation and is sufficient to catch up:", "Additionally, a Jupyter notebook has the code for both Part I and Part II together. For concision, the ggplot2 code used for plotting is omitted from the Code Blocks but can be found in the notebook or this Gist.", "While the fitness-fatigue model does an adequate job explaining performance for many real-world athletes, how do we know that the data will always support dual antagonistic exponentials? To prepare for this question, Part II of Modeling Cumulative Impact develops a flexible spline-based model of training and performance. To test it out, we\u2019ll use it to recover the theoretical model used to simulate H.T.\u2019s data, and in the next part we\u2019ll try it on some real athletes.", "Parametric B-splines are represented as \u03b7(t) = \u03b8_1 + \u03a3 \u03b8_j g_j(t) for basis functions g_j(t), t = 2, \u2026, p. Using the ns() function from R\u2019s splines package, the basis functions are completely determined from the choice of knot placement. Given a reasonable set of knots, if we can estimate \u03b8_1, \u2026\u03b8_j from data, we\u2019ll have a new model with a flexible impulse response.", "Since convolution is distributive over addition, substituting the fitness and fatigue constructs with \u03b7(t) just works, and at the end we are left with p convolution-based variables instead of two in a performance regression. See the following embed for the algebra:", "The result of the math above is that, instead of convolving training intensities with exponential decay, we\u2019re convolving them with spline basis functions and a constant offset. These new convolution variables are:", "and these enter the performance regression formula just like fitness and fatigue in Part I.", "To procure our basis functions g_j, we\u2019ll have to face the knot-selection problem associated with parametric splines. Knots are the \u201cbreakpoints\u201d where two approximating cubic polynomials meet and they should be chosen to capture important non-linear behavior. But how do you know the important non-linear behavior without knowing the to-be-estimated function in the first place?", "To start this chicken-and-egg problem with chicken, we\u2019ll use a nearly ideal knot placement for our simulated data. In the fitness-fatigue model, the combined impulse response is a linear combination of the fitness and fatigue exponentials:", "Convolving this single function with training intensity is the same as convolving the two separate exponentials, and our eventual goal will be to estimate \u03d5(t) with our spline approach from data. This function reflects the true impulse response for a training event considering both fitness and fatigue simultaneously.", "Examining the graph of \u03d5(t) (Figure 1) in relation to H.T.\u2019s performance, we see that in the initial days following a training event, there is a net negative effect on H.T.\u2019s performance. By around day 25 after the training event, the net negative impact has been neutralized. At around day 40 after the event, with fatigue having dissipated at fitness still strong, H.T. is enjoying maximum benefit from the original training session. After day 40, the slow exponential decline of fitness gradually brings the benefit of the one workout to zero impact after around 200 days.", "In this article we do not see \u03d5(t) directly but will estimate it in a flexible manner via our B-spline \u03b7(t), which itself depends on estimated parameters. A B-spline with only three interior knots about nails the approximation, if you put the knots in the right places, say at 14 days, 40 days, and 100 days, but even then there will be bias. Figure 1 also shows \u03b7*(t), or our spline fit directly to the true function \u03d5(t) via linear regression, which is darn close. The regression code is shown below in Code Block 2:", "Aside from visually showing us how close \u03b7(t) can come to \u03d5(t) with perfect information, the \u03b7*(t) regression gives us the best parameter values, \u03b8_1, \u2026, \u03b8_p, for approximating \u03d5(t). If we can get close to these coefficient values using training and performance data, we\u2019re on the right track.", "It\u2019s time to estimate \u03d5(t) with our B-spline \u03b7(t) from actual training and performance data. In this article, we will bring along one more thing: our perfectly chosen knots. This is for simplicity of illustration and is \u201ccheating\u201d given our knowledge of the simulated world. In the next part of this series, we\u2019ll work with performance data of real swimmers where we will not have this luxury.", "Recall from Part I that estimating \u03d5(t) via the antagonistic fitness and fatigue constructs was a numerical effort requiring either direct nonlinear estimation or a grid search in the time constants followed by OLS regression. An added benefit to the flexibility afforded by the spline convolution approach is that it\u2019s entirely linear.", "The following 20 lines of code depends only on the the simulated data in train_dfand completes the spline-based convolution estimation:", "The regression coefficient estimates match those of the \u03b7*(t) regression above, up to estimation error at least. Notice that the variable z_1 actually corresponds to the intercept of the \u03b7*(t) regression, since that variable was created via a convolution of a column of ones with training intensity. The new intercept is just the performance baseline and is conceptually the same as in the fitness-fatigue model.", "For the purposes of prediction, there\u2019s no need to reconstruct the estimate of \u03d5(t) and reconvolve with the data. The convolution-based features are already in the regression and the predictions are the fitted values stored in train_aug_df$perf_hat. From a modeling and prediction standpoint, our job of replacing the theory-driven fitness-fatigue model with an empirically driven alternative is done. Just like in Part I, we have performance predictions based on past training sessions and the recipe to reconstruct the total impulse response function.", "To fully close the loop, Code Block 4 does the following things:", "Note that the get_eta_hat function discards the first coefficient, the performance baseline, and adds it back in on line 23. The second coefficient is also an intercept, the constant term in \u03b7(t), explaining the column of ones appended to the spline variables.", "The computations above lead to the following comparative plots of the spline-based method with the fitness-fatigue model used to simulate the data.", "While exponential decay is widely applicable, there are many other interesting decay profiles. The moving average model in time series, for instance, says that a random shock has influence for a fixed number of time periods before dropping off completely. Or perhaps the impact of an event decays down to a non-zero level, as we\u2019d like to believe is true of fitness. The spline-based method shown in this article accommodates these departures from exponential decay.", "This article, Part II of Modeling Cumulative Impact, still relied on simulated data and was able to choose knots based on an unrealistic knowledge of the world. The next part will investigate this method on real athletes where there is missing data and dynamics that happen on a different time scale.", "While the method loses the intuitive appeal of fitness and fatigue as model constructs, the closed-form solution and lack of a need for starting values makes it an attractive alternative. The method makes performance predictions that are very similar to its theory-driven, fully parametric counterpart and delivers an estimate of the impulse response that continues to have an intuitive subject matter interpretation.", "In the next article, we \u201cdrop the hammer\u201d and hit the water with five real swimmers to test out this method in practice. It\u2019s coming in Part III of Modeling Cumulative Impact.", "[1] R. Morton, R. Fitz-Clarke, E. Banister, Modeling human performance in running(1985), Journal of Applied Physiology", "[2] T. Busso, R. Candau, and J. Lacour, Fatigue and fitness modelled from the effects of training on performance (1994), European Journal of Applied Physiology", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Data Scientist who enjoys learning and writing about methods. @benogorek on Twitter"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F2bf65db3bb98&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmodeling-cumulative-impact-part-ii-2bf65db3bb98&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmodeling-cumulative-impact-part-ii-2bf65db3bb98&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmodeling-cumulative-impact-part-ii-2bf65db3bb98&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmodeling-cumulative-impact-part-ii-2bf65db3bb98&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----2bf65db3bb98--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----2bf65db3bb98--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@baogorek?source=post_page-----2bf65db3bb98--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@baogorek?source=post_page-----2bf65db3bb98--------------------------------", "anchor_text": "Ben Ogorek"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fa7ecfd165396&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmodeling-cumulative-impact-part-ii-2bf65db3bb98&user=Ben+Ogorek&userId=a7ecfd165396&source=post_page-a7ecfd165396----2bf65db3bb98---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F2bf65db3bb98&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmodeling-cumulative-impact-part-ii-2bf65db3bb98&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F2bf65db3bb98&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmodeling-cumulative-impact-part-ii-2bf65db3bb98&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "http://www.army.mil/-news/2009/07/09/24147-fort-lewis-soldier-nails-down-spot-at-12th-world-track-and-field-championships/", "anchor_text": "Fort Lewis Soldier\u2026"}, {"url": "https://commons.wikimedia.org/w/index.php?curid=8280370", "anchor_text": "Wikimedia"}, {"url": "https://towardsdatascience.com/modeling-cumulative-impact-part-i-f7ef490ed5e3", "anchor_text": "Modeling cumulative impact \u2014 Part I"}, {"url": "https://github.com/baogorek/Miscellaneous/blob/master/R-code/sports/fitness-fatigue-convolution.ipynb", "anchor_text": "Jupyter notebook"}, {"url": "https://gist.github.com/baogorek/fd8044630383e6cb4f34b32cccd6c0a8", "anchor_text": "this Gist"}, {"url": "https://github.com/baogorek/Miscellaneous/blob/master/R-code/sports/fitness-fatigue-convolution.ipynb", "anchor_text": "Jupyter notebook"}, {"url": "https://towardsdatascience.com/modeling-cumulative-impact-part-i-f7ef490ed5e3", "anchor_text": "Part I"}, {"url": "https://towardsdatascience.com/modeling-cumulative-impact-part-i-f7ef490ed5e3", "anchor_text": "Part I"}, {"url": "https://gist.github.com/baogorek/fd8044630383e6cb4f34b32cccd6c0a8", "anchor_text": "following comparative plots"}, {"url": "https://www.researchgate.net/publication/20910238_Modeling_human_performance_in_running", "anchor_text": "Modeling human performance in running"}, {"url": "https://www.researchgate.net/profile/Robin_Candau/publication/15242395_Fatigue_and_fitness_modelled_from_the_effects_of_training_on_performance/links/55720f2608ae7536374cdc09/Fatigue-and-fitness-modelled-from-the-effects-of-training-on-performance.pdf", "anchor_text": "Fatigue and fitness modelled from the effects of training on performance"}, {"url": "https://medium.com/tag/data-science?source=post_page-----2bf65db3bb98---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/athletic-performance?source=post_page-----2bf65db3bb98---------------athletic_performance-----------------", "anchor_text": "Athletic Performance"}, {"url": "https://medium.com/tag/predictive-analytics?source=post_page-----2bf65db3bb98---------------predictive_analytics-----------------", "anchor_text": "Predictive Analytics"}, {"url": "https://medium.com/tag/predictive-modeling?source=post_page-----2bf65db3bb98---------------predictive_modeling-----------------", "anchor_text": "Predictive Modeling"}, {"url": "https://medium.com/tag/towards-data-science?source=post_page-----2bf65db3bb98---------------towards_data_science-----------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F2bf65db3bb98&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmodeling-cumulative-impact-part-ii-2bf65db3bb98&user=Ben+Ogorek&userId=a7ecfd165396&source=-----2bf65db3bb98---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F2bf65db3bb98&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmodeling-cumulative-impact-part-ii-2bf65db3bb98&user=Ben+Ogorek&userId=a7ecfd165396&source=-----2bf65db3bb98---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F2bf65db3bb98&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmodeling-cumulative-impact-part-ii-2bf65db3bb98&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----2bf65db3bb98--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F2bf65db3bb98&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmodeling-cumulative-impact-part-ii-2bf65db3bb98&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----2bf65db3bb98---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----2bf65db3bb98--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----2bf65db3bb98--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----2bf65db3bb98--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----2bf65db3bb98--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----2bf65db3bb98--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----2bf65db3bb98--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----2bf65db3bb98--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----2bf65db3bb98--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@baogorek?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@baogorek?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Ben Ogorek"}, {"url": "https://medium.com/@baogorek/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "177 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fa7ecfd165396&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmodeling-cumulative-impact-part-ii-2bf65db3bb98&user=Ben+Ogorek&userId=a7ecfd165396&source=post_page-a7ecfd165396--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F536bc54ba88c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmodeling-cumulative-impact-part-ii-2bf65db3bb98&newsletterV3=a7ecfd165396&newsletterV3Id=536bc54ba88c&user=Ben+Ogorek&userId=a7ecfd165396&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}