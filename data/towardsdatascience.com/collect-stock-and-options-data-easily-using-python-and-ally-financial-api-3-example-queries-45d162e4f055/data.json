{"url": "https://towardsdatascience.com/collect-stock-and-options-data-easily-using-python-and-ally-financial-api-3-example-queries-45d162e4f055", "time": 1683003571.4345798, "path": "towardsdatascience.com/collect-stock-and-options-data-easily-using-python-and-ally-financial-api-3-example-queries-45d162e4f055/", "webpage": {"metadata": {"title": "Collect Stock and Options Data Easily using Python and Ally Financial API \u2014 3 Example Queries | by Eric Kleppen | Towards Data Science", "h1": "Collect Stock and Options Data Easily using Python and Ally Financial API \u2014 3 Example Queries", "description": "My cheat sheet for using Ally Financial API to collect stock and option data using Python. Thee examples. Options Quotes. Stock Time and Sales. Download Stock data using Python and Ally Financial."}, "outgoing_paragraph_urls": [{"url": "https://towardsdatascience.com/enter-analytics-from-boot-camp-to-working-in-data-science-8a5a6f563d7d", "anchor_text": "I put my self on a path to learn data analysis and get into Data Science", "paragraph_index": 0}, {"url": "https://www.kaggle.com/bendgame/options-market-trades", "anchor_text": "collect stock and options data,", "paragraph_index": 1}, {"url": "https://www.google.com/search?q=What+is+an+API&oq=What+is+an+API", "anchor_text": "check out some of these resources", "paragraph_index": 2}, {"url": "http://oauth.net/code/", "anchor_text": "here", "paragraph_index": 4}, {"url": "https://en.wikipedia.org/wiki/JSON", "anchor_text": "json", "paragraph_index": 8}, {"url": "https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.resample.html", "anchor_text": "resampled", "paragraph_index": 10}, {"url": "https://www.investopedia.com/terms/m/marketdepth.asp", "anchor_text": "market depth", "paragraph_index": 12}, {"url": "https://docs.python.org/2/library/sqlite3.html", "anchor_text": "SQLite", "paragraph_index": 17}, {"url": "https://www.alphavantage.co/", "anchor_text": "Alphavantage", "paragraph_index": 19}, {"url": "https://github.com/bendgame/Ally-API-Cheat-Sheet/blob/master/Ally_API_Cheat_Sheet.ipynb", "anchor_text": "Find the cheat sheet with documentation on my github", "paragraph_index": 20}, {"url": "http://pythondashboards.com", "anchor_text": "pythondashboards.com", "paragraph_index": 23}, {"url": "http://www.linkedin.com/in/erickleppen01/", "anchor_text": "www.linkedin.com/in/erickleppen01/", "paragraph_index": 23}], "all_paragraphs": ["For a period of my life, I was obsessed with financial markets and wanted to be a day trader. I worked nights, so it was easy to spend my mornings surrounded by computer monitors displaying everything from stocks, options, news and trade chat-rooms. Spoiler alert\u2026 I gave up on day trading, but not on investing. Ultimately, I learned that I loved analyzing data more than trading, and then I put my self on a path to learn data analysis and get into Data Science.", "When I was exploring ways to collect stock and options data, I checked out the API offered by one of my brokers, Ally Financial. It was free to use and easy to code. This is the cheat-sheet I put together for using the Ally Financial API to collect the following:", "If you\u2019re not familiar with an API, check out some of these resources. It is possible to automate trades through their API, but I never got that far into it. Explore all the functionality in their documentation.", "You can find the complete cheat sheet at the bottom of the article or on my GitHub!", "Connecting to the API uses OAuth1. You can find a list of OAuth clients on the OAuth site here. I use the OAuth library requests_oauthlib. Use pip install requests-oauthlib as needed.", "Notice I use a config file to import api_key, secret, oath_token, oath_secret. That way I don\u2019t need to include those personal tokens in the code.", "I pass the imported tokens to OAuth1. This will be used when we make the request to the API.", "This API call will return time and sales quote data based on a symbol passed as a query parameter. For a list of all the query parameters, check out the documentation. The example URL consists of the base url, api route, and query.", "Notice I pass the URL and oAuth values into requests and return the response as json. This is an example of the response:", "I put the quote data into a Panda\u2019s DataFrame and format the data types.", "The date time values need to be converted so they can be resampled. Resampling allows you to manipulate the frequency of a time series. According to the documentation, the Object must have a datetime-like index (DatetimeIndex, PeriodIndex, or TimedeltaIndex), or pass datetime-like values to the on or level keyword.", "Notice the datetime increments by 30 minutes instead of 1 minute after the resampling.", "This api call provides market depth for options. This call will return the full list of available option strikes for a given symbol. While this request type is GET, POST can also be used and is recommended for longer queries.", "lt : less thangt : greater thangte : greater than or equal tolte : less than or equal toeq : equal to", "This route works for stocks, but this is an example of an option call since they are a bit more complex. This call will return quotes for a symbol or list of symbols passed as a query parameter.", "Underlying symbol \u2014 MSFT2 digit expiration year \u2014 192 digit expiration month \u2014 062 digit expiration day \u2014 07\u201cC\u201d for Call or \u201cP\u201d for Put \u2014 C8 digit strike price \u2014 00140000Specify desired fields in the query as needed using fids:i.e. fids=ask,bid,vol", "Although the naming convention has several components, it is fairly straight forward after a few examples. In the mean time, use the example image provided in the documentation or this cheat-sheet!", "Using Pandas, it is easy to save the data to CSV or an SQL database. If you\u2019re not familiar with SQLite, it is extremely easy to use. To quote the documentation:", "SQLite is a C library that provides a lightweight disk-based database that doesn\u2019t require a separate server process and allows accessing the database using a nonstandard variant of the SQL query language.", "Using these three queries, it is easy to start collecting stock and options data using the Ally Financial API. Putting the data into a Panda\u2019s dataframe makes it easy to understand the JSON information and store the data as a CSV or SQLite file. If you want to explore other APIs for stock data, check out Alphavantage too.", "Find the cheat sheet with documentation on my github!", "Check out my other tutorials for more python and sql!", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Product Manager at Kipsu. Learn dashboards at pythondashboards.com Top writer. www.linkedin.com/in/erickleppen01/"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F45d162e4f055&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcollect-stock-and-options-data-easily-using-python-and-ally-financial-api-3-example-queries-45d162e4f055&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcollect-stock-and-options-data-easily-using-python-and-ally-financial-api-3-example-queries-45d162e4f055&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcollect-stock-and-options-data-easily-using-python-and-ally-financial-api-3-example-queries-45d162e4f055&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcollect-stock-and-options-data-easily-using-python-and-ally-financial-api-3-example-queries-45d162e4f055&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----45d162e4f055--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----45d162e4f055--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://erickleppen.medium.com/?source=post_page-----45d162e4f055--------------------------------", "anchor_text": ""}, {"url": "https://erickleppen.medium.com/?source=post_page-----45d162e4f055--------------------------------", "anchor_text": "Eric Kleppen"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F1e2ea32699c9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcollect-stock-and-options-data-easily-using-python-and-ally-financial-api-3-example-queries-45d162e4f055&user=Eric+Kleppen&userId=1e2ea32699c9&source=post_page-1e2ea32699c9----45d162e4f055---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F45d162e4f055&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcollect-stock-and-options-data-easily-using-python-and-ally-financial-api-3-example-queries-45d162e4f055&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F45d162e4f055&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcollect-stock-and-options-data-easily-using-python-and-ally-financial-api-3-example-queries-45d162e4f055&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://www.pikrepo.com/fytmc/businessman-working-finance-trading-stock-concept-in-the-office", "anchor_text": "Provided by pikrepo"}, {"url": "https://towardsdatascience.com/enter-analytics-from-boot-camp-to-working-in-data-science-8a5a6f563d7d", "anchor_text": "I put my self on a path to learn data analysis and get into Data Science"}, {"url": "https://www.kaggle.com/bendgame/options-market-trades", "anchor_text": "collect stock and options data,"}, {"url": "https://www.google.com/search?q=What+is+an+API&oq=What+is+an+API", "anchor_text": "check out some of these resources"}, {"url": "https://www.ally.com/api/invest/documentation/getting-started/", "anchor_text": "Ally Invest API DocumentationBuild your application to connect to our investment platform and the 250,000 traders connected to it\u2026www.ally.com"}, {"url": "https://github.com/bendgame/Ally-API-Cheat-Sheet", "anchor_text": "bendgame/Ally-API-Cheat-SheetGetting Started with Ally Financial API. Contribute to bendgame/Ally-API-Cheat-Sheet development by creating an account\u2026github.com"}, {"url": "http://oauth.net/code/", "anchor_text": "here"}, {"url": "https://api.tradeking.com/", "anchor_text": "https://api.tradeking.com/"}, {"url": "https://www.ally.com/api/invest/documentation/market-timesales-get/", "anchor_text": "https://www.ally.com/api/invest/documentation/market-timesales-get/"}, {"url": "https://en.wikipedia.org/wiki/JSON", "anchor_text": "json"}, {"url": "https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.resample.html", "anchor_text": "resampled"}, {"url": "https://www.pxfuel.com/en/search?q=stock+market+data", "anchor_text": "Provided by pxfuel"}, {"url": "https://www.investopedia.com/terms/m/marketdepth.asp", "anchor_text": "market depth"}, {"url": "https://www.ally.com/api/invest/documentation/market-options-search-get-post/", "anchor_text": "https://www.ally.com/api/invest/documentation/market-options-search-get-post/"}, {"url": "https://api.tradeking.com/", "anchor_text": "https://api.tradeking.com/"}, {"url": "https://www.ally.com/api/invest/documentation/market-ext-quotes-get-post/", "anchor_text": "https://www.ally.com/api/invest/documentation/market-ext-quotes-get-post/"}, {"url": "https://docs.python.org/2/library/sqlite3.html", "anchor_text": "SQLite"}, {"url": "https://www.flickr.com/photos/nodstrum/28511200247", "anchor_text": "Provided by Flickr"}, {"url": "https://www.alphavantage.co/", "anchor_text": "Alphavantage"}, {"url": "https://github.com/bendgame/Ally-API-Cheat-Sheet/blob/master/Ally_API_Cheat_Sheet.ipynb", "anchor_text": "Find the cheat sheet with documentation on my github"}, {"url": "https://medium.com/@erickleppen", "anchor_text": "follow me on Medium"}, {"url": "https://erickleppen.medium.com/membership", "anchor_text": "Get FULL ACCESS and help support my content by subscribing"}, {"url": "https://www.linkedin.com/in/erickleppen01/", "anchor_text": "LinkedIn"}, {"url": "https://pythondashboards.com/", "anchor_text": "website"}, {"url": "http://pythondashboards.com/", "anchor_text": "\u2014 Eric Kleppen"}, {"url": "https://medium.com/@erickleppen01/learn-sql-techniques-selecting-data-and-more-in-sql-server-624f81dd16b2", "anchor_text": "Learn SQL Techniques: Selecting Data and More in SQL ServerIntro to SQL Statements and Query to find Duplicate Data. Learn SQLmedium.com"}, {"url": "https://medium.com/swlh/dashboards-in-python-for-beginners-and-everyone-else-using-dash-f0a045a86644", "anchor_text": "Dashboards in Python for Beginners and Everyone Else using DashBuild a basic and advanced dashboard with this beginner tutorial on Dash in Pythonmedium.com"}, {"url": "https://medium.com/tag/finance?source=post_page-----45d162e4f055---------------finance-----------------", "anchor_text": "Finance"}, {"url": "https://medium.com/tag/work?source=post_page-----45d162e4f055---------------work-----------------", "anchor_text": "Work"}, {"url": "https://medium.com/tag/programming?source=post_page-----45d162e4f055---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/tag/data-science?source=post_page-----45d162e4f055---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/trading?source=post_page-----45d162e4f055---------------trading-----------------", "anchor_text": "Trading"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F45d162e4f055&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcollect-stock-and-options-data-easily-using-python-and-ally-financial-api-3-example-queries-45d162e4f055&user=Eric+Kleppen&userId=1e2ea32699c9&source=-----45d162e4f055---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F45d162e4f055&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcollect-stock-and-options-data-easily-using-python-and-ally-financial-api-3-example-queries-45d162e4f055&user=Eric+Kleppen&userId=1e2ea32699c9&source=-----45d162e4f055---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F45d162e4f055&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcollect-stock-and-options-data-easily-using-python-and-ally-financial-api-3-example-queries-45d162e4f055&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----45d162e4f055--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F45d162e4f055&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcollect-stock-and-options-data-easily-using-python-and-ally-financial-api-3-example-queries-45d162e4f055&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----45d162e4f055---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----45d162e4f055--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----45d162e4f055--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----45d162e4f055--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----45d162e4f055--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----45d162e4f055--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----45d162e4f055--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----45d162e4f055--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----45d162e4f055--------------------------------", "anchor_text": ""}, {"url": "https://erickleppen.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://erickleppen.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Eric Kleppen"}, {"url": "https://erickleppen.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "3.1K Followers"}, {"url": "http://pythondashboards.com", "anchor_text": "pythondashboards.com"}, {"url": "http://www.linkedin.com/in/erickleppen01/", "anchor_text": "www.linkedin.com/in/erickleppen01/"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F1e2ea32699c9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcollect-stock-and-options-data-easily-using-python-and-ally-financial-api-3-example-queries-45d162e4f055&user=Eric+Kleppen&userId=1e2ea32699c9&source=post_page-1e2ea32699c9--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F3968dec87f6a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcollect-stock-and-options-data-easily-using-python-and-ally-financial-api-3-example-queries-45d162e4f055&newsletterV3=1e2ea32699c9&newsletterV3Id=3968dec87f6a&user=Eric+Kleppen&userId=1e2ea32699c9&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}