{"url": "https://towardsdatascience.com/building-an-interactive-computer-vision-demo-in-a-few-hours-on-aws-deeplens-38ff48c7ddbd", "time": 1682994740.9681869, "path": "towardsdatascience.com/building-an-interactive-computer-vision-demo-in-a-few-hours-on-aws-deeplens-38ff48c7ddbd/", "webpage": {"metadata": {"title": "Building an interactive computer vision demo in a few hours on AWS DeepLens and Slack | by Ryan Gross | Towards Data Science", "h1": "Building an interactive computer vision demo in a few hours on AWS DeepLens and Slack", "description": "A couple months ago, I posted an article on explaining my job as a technology consultant to my daughter\u2019s preschool class of 3-year-olds. One of the more understandable parts of what I\u2019m doing these\u2026"}, "outgoing_paragraph_urls": [{"url": "https://medium.com/@ryano144/teaching-3-year-olds-about-technology-consulting-9e1547c05bf", "anchor_text": "posted an article", "paragraph_index": 0}, {"url": "https://github.com/svdgraaf", "anchor_text": "Sander van de Graaf", "paragraph_index": 1}, {"url": "https://github.com/svdgraaf/doorman", "anchor_text": "Doorman entry", "paragraph_index": 1}, {"url": "https://awsdeeplens.devpost.com/", "anchor_text": "AWS DeepLens challenge", "paragraph_index": 1}, {"url": "https://aws.amazon.com/deeplens/", "anchor_text": "DeepLens", "paragraph_index": 2}, {"url": "https://aws.amazon.com/greengrass/", "anchor_text": "GreenGrass", "paragraph_index": 2}, {"url": "https://aws.amazon.com/api-gateway/", "anchor_text": "API Gateway", "paragraph_index": 2}, {"url": "https://aws.amazon.com/rekognition/", "anchor_text": "AWS Rekognition", "paragraph_index": 2}, {"url": "https://aws.amazon.com/polly/", "anchor_text": "AWS Polly", "paragraph_index": 2}, {"url": "https://aws.amazon.com/cloud9/", "anchor_text": "AWS Cloud9", "paragraph_index": 5}, {"url": "https://help.github.com/articles/adding-a-new-ssh-key-to-your-github-account/#platform-linux", "anchor_text": "add it to your GitHub account", "paragraph_index": 6}, {"url": "https://slack.com/", "anchor_text": "Slack", "paragraph_index": 7}, {"url": "https://api.slack.com/slack-apps#creating_apps", "anchor_text": "create an app on the Slack API", "paragraph_index": 7}, {"url": "https://console.aws.amazon.com/cloudformation/home", "anchor_text": "CloudFormation Console", "paragraph_index": 17}, {"url": "https://www.amazon.com/dp/B075Y3CK37", "anchor_text": "get one on Amazon", "paragraph_index": 19}, {"url": "https://aws.amazon.com/greengrass/", "anchor_text": "AWS GreenGrass", "paragraph_index": 19}, {"url": "https://aws.amazon.com/lambda/", "anchor_text": "AWS Lambda", "paragraph_index": 19}, {"url": "https://docs.aws.amazon.com/deeplens/latest/dg/deeplens-getting-started-set-up.html", "anchor_text": "setup guide", "paragraph_index": 19}, {"url": "https://docs.aws.amazon.com/deeplens/latest/dg/deeplens-viewing-device-output-in-browser.html", "anchor_text": "capture the client certificate", "paragraph_index": 19}, {"url": "https://console.aws.amazon.com/deeplens/home", "anchor_text": "DeepLens Console", "paragraph_index": 20}, {"url": "https://docs.aws.amazon.com/deeplens/latest/dg/deeplens-create-deploy-sample-project.html", "anchor_text": "Create a Project", "paragraph_index": 20}], "all_paragraphs": ["A couple months ago, I posted an article on explaining my job as a technology consultant to my daughter\u2019s preschool class of 3-year-olds. One of the more understandable parts of what I\u2019m doing these days is working on computer vision problems. People (even the toddler crowd) inherently understand the idea of recognizing what is in front of you. Interestingly, as I would learn through this experience, computer vision is actually easier for a toddler to understand than most of the readers of this article. My daughter\u2019s generation will be the first to grow up with the expectation that they can interact with computers in the same way that they interact with each other. The complete lack of surprise that kids had when the computer could say their names was shocking to me.", "With today\u2019s advancements in deep learning, cloud platforms, and IOT camera technology, we are able to bring this capability to computers quickly and easily. In this article, I\u2019ll go through the architecture and code I used to build a real-time computer vision system to greet people. Most of the credit for this idea, architecture, and code goes to Sander van de Graaf and his Doorman entry to the AWS DeepLens challenge. I\u2019m going to assume that you understand coding principles, and my goal is that you can follow along to build your own demo. Lets get started\u2026", "This system uses a host of AWS Serverless technology (no networks or operating systems to configure here). The DeepLens is already integrated with AWS Lambda through the GreenGrass interface that runs the function code onto the device. The remainder of the architecture uses cloud-native, event-driven processing. The images of people uploaded from the DeepLens are moved around in S3, which triggers the appropriate actions using Lambda functions. This has the nice side effect of sorting the images for downstream debugging and analytics purposes. Similarly, API Gateway handles inbound HTTP requests from the Slack API, again delegating to lambda functions for processing. The actual person detection functionality is handled by AWS Rekognition, which provides a fully automated Machine Learning service for Facial Recognition. An SNS topic and SQS queue allow additional applications to react to detected people. In this example, a console application uses AWS Polly to speak to the person discovered.", "The actual workflow goes something like this:", "First you\u2019ll need to have the following for your development environment:", "The instructions below should work on AWS Cloud9. It comes pre-installed with NodeJS, Python, and the AWS CLI (update to your email):", "You will now need to copy paste the resulting token to add it to your GitHub account so you can authenticate your Cloud9 environment. Note that this will allow anyone on your Cloud9 environment to access your GitHub account, so be careful using the Cloud9 sharing features.", "Finally, you will need access to Slack. If you don\u2019t already use it for work, you can set up a free account to test out this functionality (as of when I\u2019m writing this, you just enter your email and click Get Started). You will then need to create an app on the Slack API associated to your workspace. For now, all you need is a name and pointer to the workspace you\u2019ll be using. Later on in the post, you will configure the Slack app to point to your AWS backend.", "You will need to activate Incoming Webhooks. This will allow the app to post to Slack.", "You will then need to go to the OAuth and Permissions section and select the following scopes (channels:read, chat:write:bot, incoming-webhook, users:read):", "Next, you will need to Install the App to your workspace:", "This will bring you to a screen where you can install the app. You will need to remember the the slack channel that you select for the app.", "Security Note: the app will gain access to all user profile information in your workspace. This will allow you to select a user for each picture that is uploaded by the DeepLens camera. Only the opaque Slack User ID will be sent to AWS Rekognition, but with your access token, a user can get additional profile information from the slack API. Moral of the story: be sure to protect your Slack API Token. For added security, if Slack finds your access token on a public site like GitHub, they will automatically deactivate it for you.", "Once you have the OAuth permissions set, you can copy your Access Token from either the Install App or OAuth & Permissions Page.", "The Serverless deployment package uses several environment variables to allow the same code to be deployed pointing to multiple accounts. To simplify deployments, you can create a shell script. I call mine environment.sh, and will reference it in the script below. You will see references to <name> in many scripts", "Security Note: do not commit this file to source control. Also, if you are using a shared Cloud9 Environment, then you should only enter the slack API token environment variable directly in the terminal.", "Follow the guides linked above, you should have a working development environment. You can test it by running the following commands to deploy the full architecture to AWS:", "Once you have that deployed, you can browse to the CloudFormation Console to view the resources. You will now need to update your Slack App and deploy your Lambda function to the DeepLens. For the slack app, you will need to capture the API Gateway URL, which should appear on the console after the successful deployment:", "You will then need to update this URL in the Slack app and Reinstall it from the Install App screen.", "The last thing you\u2019ll need is to have a DeepLens camera from Amazon. If you attended re:Invent 2017 and went to any ML sessions, you likely have one. If you didn\u2019t you can get one on Amazon for about $250. The camera is a pre-packaged bundle that is essentially a mini-computer running AWS GreenGrass attached to a video camera. The camera makes it easy to deploy Computer Vision models to run over live streaming video, especially if you\u2019re already familiar with AWS Lambda. I\u2019m going to assume you\u2019ve followed the setup guide and your DeepLens is now connected to the internet. You should definitely capture the client certificate in order to view the video feed in a browser.", "Once you have completed these steps, you should browse to the DeepLens Console. You will need to Create a Project using the Object Detection template. Once you choose this, you will click through to create the App, and then edit it to associate the find-person lambda function. Next, you select it in the list of projects and click Deploy to Device. From there, select the DeepLens that you registered and push it to the device. When this is complete, you will see a green bar across the top of the DeepLens console letting you know that the Project has been deployed successfully.", "Congratulations! You should have a fully functional system at this point. At this point, you can connect to the local video feed for your device. To do this, first find the IP address on the Device Details page, then browse to https://<ip-address-here>:4000 to view the video feed. If a person steps in front of the camera, it should put a box around them in the feed. Once you\u2019ve seen this happen, you can browse to the Slack channel you were sending messages to and look for the image upload with a prompt to select the user to associate.", "If it isn\u2019t working for you, feel free to ask questions in the comments below. If there are enough questions, I\u2019ll post a follow up with details on debugging these types of applications on AWS.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Emerging Tech & Data Leader | Interested in how people & machines learn, and how to bring them together."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F38ff48c7ddbd&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuilding-an-interactive-computer-vision-demo-in-a-few-hours-on-aws-deeplens-38ff48c7ddbd&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuilding-an-interactive-computer-vision-demo-in-a-few-hours-on-aws-deeplens-38ff48c7ddbd&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuilding-an-interactive-computer-vision-demo-in-a-few-hours-on-aws-deeplens-38ff48c7ddbd&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuilding-an-interactive-computer-vision-demo-in-a-few-hours-on-aws-deeplens-38ff48c7ddbd&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----38ff48c7ddbd--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----38ff48c7ddbd--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://ryanwgross.medium.com/?source=post_page-----38ff48c7ddbd--------------------------------", "anchor_text": ""}, {"url": "https://ryanwgross.medium.com/?source=post_page-----38ff48c7ddbd--------------------------------", "anchor_text": "Ryan Gross"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F613f8e8dee5c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuilding-an-interactive-computer-vision-demo-in-a-few-hours-on-aws-deeplens-38ff48c7ddbd&user=Ryan+Gross&userId=613f8e8dee5c&source=post_page-613f8e8dee5c----38ff48c7ddbd---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F38ff48c7ddbd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuilding-an-interactive-computer-vision-demo-in-a-few-hours-on-aws-deeplens-38ff48c7ddbd&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F38ff48c7ddbd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuilding-an-interactive-computer-vision-demo-in-a-few-hours-on-aws-deeplens-38ff48c7ddbd&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://medium.com/@ryano144/teaching-3-year-olds-about-technology-consulting-9e1547c05bf", "anchor_text": "posted an article"}, {"url": "https://github.com/svdgraaf", "anchor_text": "Sander van de Graaf"}, {"url": "https://github.com/svdgraaf/doorman", "anchor_text": "Doorman entry"}, {"url": "https://awsdeeplens.devpost.com/", "anchor_text": "AWS DeepLens challenge"}, {"url": "https://aws.amazon.com/deeplens/", "anchor_text": "DeepLens"}, {"url": "https://aws.amazon.com/greengrass/", "anchor_text": "GreenGrass"}, {"url": "https://aws.amazon.com/api-gateway/", "anchor_text": "API Gateway"}, {"url": "https://aws.amazon.com/rekognition/", "anchor_text": "AWS Rekognition"}, {"url": "https://aws.amazon.com/polly/", "anchor_text": "AWS Polly"}, {"url": "https://docs.aws.amazon.com/rekognition/latest/dg/API_Emotion.html", "anchor_text": "Emotion Detection"}, {"url": "https://aws.amazon.com/polly/", "anchor_text": "AWS Polly"}, {"url": "https://help.github.com/articles/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent/#platform-linux", "anchor_text": "generate an SSH key"}, {"url": "https://nodejs.org/en/download/package-manager/#nvm", "anchor_text": "NodeJS"}, {"url": "https://docs.python-guide.org/starting/installation/", "anchor_text": "Python3"}, {"url": "https://serverless.com/framework/docs/providers/aws/guide/installation/", "anchor_text": "serverless framework"}, {"url": "https://docs.aws.amazon.com/cli/latest/userguide/installing.html", "anchor_text": "AWS CLI"}, {"url": "https://aws.amazon.com/cloud9/", "anchor_text": "AWS Cloud9"}, {"url": "https://help.github.com/articles/adding-a-new-ssh-key-to-your-github-account/#platform-linux", "anchor_text": "add it to your GitHub account"}, {"url": "https://slack.com/", "anchor_text": "Slack"}, {"url": "https://api.slack.com/slack-apps#creating_apps", "anchor_text": "create an app on the Slack API"}, {"url": "http://169.254.169.254/latest/dynamic/instance-identity/document", "anchor_text": "http://169.254.169.254/latest/dynamic/instance-identity/document"}, {"url": "https://console.aws.amazon.com/cloudformation/home", "anchor_text": "CloudFormation Console"}, {"url": "https://www.amazon.com/dp/B075Y3CK37", "anchor_text": "get one on Amazon"}, {"url": "https://aws.amazon.com/greengrass/", "anchor_text": "AWS GreenGrass"}, {"url": "https://aws.amazon.com/lambda/", "anchor_text": "AWS Lambda"}, {"url": "https://docs.aws.amazon.com/deeplens/latest/dg/deeplens-getting-started-set-up.html", "anchor_text": "setup guide"}, {"url": "https://docs.aws.amazon.com/deeplens/latest/dg/deeplens-viewing-device-output-in-browser.html", "anchor_text": "capture the client certificate"}, {"url": "https://console.aws.amazon.com/deeplens/home", "anchor_text": "DeepLens Console"}, {"url": "https://docs.aws.amazon.com/deeplens/latest/dg/deeplens-create-deploy-sample-project.html", "anchor_text": "Create a Project"}, {"url": "https://medium.com/tag/aws?source=post_page-----38ff48c7ddbd---------------aws-----------------", "anchor_text": "AWS"}, {"url": "https://medium.com/tag/computer-vision?source=post_page-----38ff48c7ddbd---------------computer_vision-----------------", "anchor_text": "Computer Vision"}, {"url": "https://medium.com/tag/slack?source=post_page-----38ff48c7ddbd---------------slack-----------------", "anchor_text": "Slack"}, {"url": "https://medium.com/tag/towards-data-science?source=post_page-----38ff48c7ddbd---------------towards_data_science-----------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F38ff48c7ddbd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuilding-an-interactive-computer-vision-demo-in-a-few-hours-on-aws-deeplens-38ff48c7ddbd&user=Ryan+Gross&userId=613f8e8dee5c&source=-----38ff48c7ddbd---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F38ff48c7ddbd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuilding-an-interactive-computer-vision-demo-in-a-few-hours-on-aws-deeplens-38ff48c7ddbd&user=Ryan+Gross&userId=613f8e8dee5c&source=-----38ff48c7ddbd---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F38ff48c7ddbd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuilding-an-interactive-computer-vision-demo-in-a-few-hours-on-aws-deeplens-38ff48c7ddbd&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----38ff48c7ddbd--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F38ff48c7ddbd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuilding-an-interactive-computer-vision-demo-in-a-few-hours-on-aws-deeplens-38ff48c7ddbd&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----38ff48c7ddbd---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----38ff48c7ddbd--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----38ff48c7ddbd--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----38ff48c7ddbd--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----38ff48c7ddbd--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----38ff48c7ddbd--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----38ff48c7ddbd--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----38ff48c7ddbd--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----38ff48c7ddbd--------------------------------", "anchor_text": ""}, {"url": "https://ryanwgross.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://ryanwgross.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Ryan Gross"}, {"url": "https://ryanwgross.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "617 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F613f8e8dee5c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuilding-an-interactive-computer-vision-demo-in-a-few-hours-on-aws-deeplens-38ff48c7ddbd&user=Ryan+Gross&userId=613f8e8dee5c&source=post_page-613f8e8dee5c--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fb6ab5d5b93be&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuilding-an-interactive-computer-vision-demo-in-a-few-hours-on-aws-deeplens-38ff48c7ddbd&newsletterV3=613f8e8dee5c&newsletterV3Id=b6ab5d5b93be&user=Ryan+Gross&userId=613f8e8dee5c&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}