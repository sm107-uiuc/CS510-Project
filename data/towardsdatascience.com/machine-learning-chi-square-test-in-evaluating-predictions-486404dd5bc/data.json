{"url": "https://towardsdatascience.com/machine-learning-chi-square-test-in-evaluating-predictions-486404dd5bc", "time": 1683017274.9850051, "path": "towardsdatascience.com/machine-learning-chi-square-test-in-evaluating-predictions-486404dd5bc/", "webpage": {"metadata": {"title": "Machine Learning: Chi Square Test In Evaluating Predictions | by Joseph Cohen | Towards Data Science", "h1": "Machine Learning: Chi Square Test In Evaluating Predictions", "description": "The chi square test is a useful, simple, and easy test to conduct to help gauge the unexpectedness or expectedness of outcomes in data. Included in this post will be the background and circumstances\u2026"}, "outgoing_paragraph_urls": [{"url": "https://www.kaggle.com/shivam2503/diamonds", "anchor_text": "link", "paragraph_index": 9}, {"url": "https://www.youtube.com/watch?v=2QeDRsxSF9M&ab_channel=ProfessorLeonard", "anchor_text": "https://www.youtube.com/watch?v=2QeDRsxSF9M&ab_channel=ProfessorLeonard", "paragraph_index": 12}], "all_paragraphs": ["The chi square test is a useful, simple, and easy test to conduct to help gauge the unexpectedness or expectedness of outcomes in data. Included in this post will be the background and circumstances of when we use the chi square test, a description of the input and explanation of output, as well as code to show you how you can leverage and perform a chi square test on your own.", "The chi square is generally used to determine if a particular predictive classification model performs well or struggles to correctly make predictions. The test, in particular, measures the expected distribution of data points into various labels against the actual distribution of those data points. No percentages are involved; only actual numbers. Also, unless you binned continuous data, like we actually see below, the chi square test is not used for continuous data and is mainly used for categorical data.", "The first input, as with most analytical tools that relate to hypothesis testing, is a level of significance, which we will call alpha. Before we discuss alpha, though, let\u2019s talk about the other inputs. The next inputs are a series of quotients. For each quotient, our numerator is composed of the expected outcome subtracted from the true outcome. The numerator is then squared and divided by the expected outcome. All of these quotients are added together. Keep in mind that the inputs refer to the number of observations per label based on expected distributions compared to actual number of observations per label. The final input is degrees of freedom, which is equal to 1 subtracted from the number of labels. As the chi square test relates to the chi square probability distribution, degrees of freedom is quite important as the graph representing the chi square distribution will change shape based on degrees of freedom. Below, we will further explain this importance.", "Using our degrees of freedom and significance level, alpha, we look at a chi square table or chi square calculator (I have links to both in resources). Using the chi square table, we find something called a \u201cchi square statistic\u201d which we will then use as a threshold to measure against our data and our \u201ctest statistic\u201d. If you remember above, we added a couple quotients together. The result of that sum is the test statistic we use to compare against our chi square statistic. Our baseline assumption going into a chi square test is that our data is consistent with the expected distribution. If the test statistic described above is judged to be more extreme than the chi square statistic given at the table, we can assume that our predictions were likely not that accurate (I\u2019m going to try to avoid all the hypothesis testing jargon). Otherwise, we can be more confident in our predictions.", "In a chi square test, we usually look at the right end of that graph and pick our chi square statistic to be at the point where we have already covered 100% minus alpha% of the area in the graph. In other words, if alpha is five, we pick a point where we have already covered 95% of the area (representing probability) on our particular chi square graph. This means that 5% remains to the right of our chi square statistic. Since we are focusing on the right end of the graph, if our test statistic is lower than our chi square statistic, we are to the left of the point that demarcates 95% of probability covered, meaning that the area covered up to our test statistic is less than 95% and the area covered past our test statistic is greater than 5%. On the other hand, if the test statistic is to the right of the 5% region, we are getting more extreme in the opposite direction and are covering less than 5% past our test statistic. Remember that all these percents reference probabilities. In particular, we call this probability a p-value. If we are covering more probability (p-value > alpha), we can trust that our expectations match actual data well and if we cover less probability (p-value < alpha), we are likely witnessing something not in line with expectations.", "In the visual below, data was randomly generated that does not relate to the chi square distribution. The x values represent the particular values for which we are measuring probability of, but I wouldn\u2019t worry about them and only use them as a reference point. The data past the red line represents alpha and in this case looks like it represents around 25%-35% of total probability if we were to measure from 175 to infinity. This is obviously a very large alpha value. When we move away from this random distribution toward the chi square distribution, all that changes is the shape of the graph and therefore how much probability is covered up to certain points. I hope the visual helps.", "I\u2019d understand if you\u2019re not 100% on board with these concepts yet, but I think a simple real-life example will help. Let\u2019s take a look at the NHL draft. We\u2019ll start by setting alpha equal to 5%, by the way. Next, we can actually look at the data. Based on a studies of the 1990s, a first round draft pick has a 63% chance of becoming an NHL career player; someone who plays for a decent amount of time regardless of production and accomplishments (Fitzpatrick, 2018). We\u2019re going to leverage this study for a chi square test. In particular, we will look at the 2000 NHL draft which I picked at random because it was long ago enough to be relevant to this inquiry. I should mention that this draft was not a strong draft and the most infamous player contract in NHL history was actually signed by the first player selected in this draft.", "The first round had 30 picks back in 2000. Based on the assumption above, we can assume that 0.6 times 30 = ~19 players from the first round become career NHL players and 30\u201319=11 don\u2019t succeed in the NHL. Let\u2019s assume (and this is pure conjecture) that a career NHL player plays a minimum of 8 years with some injuries. 82 games a year times 8 years minus injury time equals ~600 games. Let\u2019s scale this number by 0.6 to account for goalies and it becomes ~360 games. Using these standards, the first round produced around 14 career NHL players (I decided to be liberal with a couple players since this draft was so bad). We will label success as 1 and failure as 0. According to the numbers above, we have 14 actual vs 19 expected in label 1 and 16 actual vs 11 expected in label 0. (14\u201319)\u00b2/19 + (16\u201311)\u00b2/11 = 3.59. Using our table, we find that the chi square statistic for alpha = 5% and 1 degree of freedom is 3.84. Since 3.59 is slightly less than 3.84, we can in fact assume this draft fits the expected distribution. If we relax alpha, however, to be something like 10%, we no longer have such strong confidence in this conclusion.", "One limitation of the chi square test is that it does not work well when expected values in a table are less than five. A more generalized rule is with large tables of data, no more than 20% of the data can display frequencies that are less than 5. The chi square test is also sensitive to sample size and may give misleading results as sample size grows. Also, as mentioned above it only applies by categorical data.", "The data I will be using for this demonstration can be found at kaggle.com at this link and deals with diamond price prediction with target feature as price", "We are going to revisit the data above, but will continue in the code by showing the basics of python\u2019s chi square package", "This post discussed situations in which to use the chi square test, how to execute the test and interpret its results, and how to use the test in the context of machine learning. The NHL example we saw was a simple example while the machine learning example was much different. The chi square test is also a good hypothesis testing tool, as it could be used in a variety of situations. I hope this post can help readers get a better understanding of the chi square test and when it can help them solve problems and answer questions using data.", "Pearson\u2019s chi square test (goodness of fit) | probability and statistics | Khan Academy. Retrieved from https://www.youtube.com/watch?v=2QeDRsxSF9M&ab_channel=ProfessorLeonard", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Data scientist and machine learning engineer with a passion for telling data-driven stories and solving real world problems using data."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F486404dd5bc&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmachine-learning-chi-square-test-in-evaluating-predictions-486404dd5bc&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmachine-learning-chi-square-test-in-evaluating-predictions-486404dd5bc&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmachine-learning-chi-square-test-in-evaluating-predictions-486404dd5bc&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmachine-learning-chi-square-test-in-evaluating-predictions-486404dd5bc&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----486404dd5bc--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----486404dd5bc--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@arieljosephcohen?source=post_page-----486404dd5bc--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@arieljosephcohen?source=post_page-----486404dd5bc--------------------------------", "anchor_text": "Joseph Cohen"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fd1d523a49c4e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmachine-learning-chi-square-test-in-evaluating-predictions-486404dd5bc&user=Joseph+Cohen&userId=d1d523a49c4e&source=post_page-d1d523a49c4e----486404dd5bc---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F486404dd5bc&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmachine-learning-chi-square-test-in-evaluating-predictions-486404dd5bc&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F486404dd5bc&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmachine-learning-chi-square-test-in-evaluating-predictions-486404dd5bc&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@beatthegrind", "anchor_text": "Andrew Schultz"}, {"url": "https://unsplash.com/photos/USncr9ads6k", "anchor_text": "Unsplash"}, {"url": "http://f1e1", "anchor_text": "Resources"}, {"url": "https://www.kaggle.com/shivam2503/diamonds", "anchor_text": "link"}, {"url": "https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.cut.html", "anchor_text": "documentation"}, {"url": "https://scikit-learn.org/stable/modules/generated/sklearn.preprocessing.LabelEncoder.html", "anchor_text": "documentation"}, {"url": "https://scikit-learn.org/stable/modules/generated/sklearn.model_selection.train_test_split.html", "anchor_text": "documentation"}, {"url": "https://towardsdatascience.com/machine-learning-target-feature-label-imbalance-problem-and-solutions-98c5ae89ad0#ceab", "anchor_text": "https://towardsdatascience.com/machine-learning-target-feature-label-imbalance-problem-and-solutions-98c5ae89ad0#ceab"}, {"url": "https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.chisquare.html", "anchor_text": "documentation"}, {"url": "https://xgboost.readthedocs.io/en/latest/python/python_api.html", "anchor_text": "documentation"}, {"url": "https://scikit-learn.org/stable/modules/generated/sklearn.metrics.classification_report.html", "anchor_text": "documentation"}, {"url": "https://unsplash.com/@aaronburden", "anchor_text": "Aaron Burden"}, {"url": "https://unsplash.com/photos/zunGugEsJCE", "anchor_text": "Unsplash"}, {"url": "https://www.kaggle.com/fuzzywizard/diamonds-in-depth-analysis", "anchor_text": "https://www.kaggle.com/fuzzywizard/diamonds-in-depth-analysis"}, {"url": "https://www.liveabout.com/nhl-draft-picks-2779293", "anchor_text": "https://www.liveabout.com/nhl-draft-picks-2779293"}, {"url": "https://en.wikipedia.org/wiki/2000_NHL_Entry_Draft", "anchor_text": "https://en.wikipedia.org/wiki/2000_NHL_Entry_Draft"}, {"url": "https://medium.com/swlh/what-is-chi-square-test-how-does-it-work-3b7f22c03b01", "anchor_text": "https://medium.com/swlh/what-is-chi-square-test-how-does-it-work-3b7f22c03b01"}, {"url": "https://www.youtube.com/watch?v=zOvUQWOzTlc&ab_channel=KhanAcademy", "anchor_text": "https://www.youtube.com/watch?v=zOvUQWOzTlc&ab_channel=KhanAcademy"}, {"url": "https://www.youtube.com/watch?v=2QeDRsxSF9M&ab_channel=ProfessorLeonard", "anchor_text": "https://www.youtube.com/watch?v=2QeDRsxSF9M&ab_channel=ProfessorLeonard"}, {"url": "https://www.statisticssolutions.com/chi-square-goodness-of-fit-test/", "anchor_text": "https://www.statisticssolutions.com/chi-square-goodness-of-fit-test/"}, {"url": "https://stattrek.com/chi-square-test/goodness-of-fit.aspx", "anchor_text": "https://stattrek.com/chi-square-test/goodness-of-fit.aspx"}, {"url": "https://www.socscistatistics.com/tests/chisquare2/default2.aspx", "anchor_text": "https://www.socscistatistics.com/tests/chisquare2/default2.aspx"}, {"url": "https://web.ma.utexas.edu/users/davis/375/popecol/tables/chisq.html", "anchor_text": "https://web.ma.utexas.edu/users/davis/375/popecol/tables/chisq.html"}, {"url": "https://www.mtholyoke.edu/courses/etownsle/qr/Chi%20square%20limitations.htm#:~:text=First%2C%20chi%2Dsquare%20is%20highly,proportion%20of%20the%20expected%20value.&text=Generally%20when%20the%20expected%20frequency,can%20lead%20to%20erroneous%20conclusions", "anchor_text": "https://www.mtholyoke.edu/courses/etownsle/qr/Chi%20square%20limitations.htm#:~:text=First%2C%20chi%2Dsquare%20is%20highly,proportion%20of%20the%20expected%20value.&text=Generally%20when%20the%20expected%20frequency,can%20lead%20to%20erroneous%20conclusions"}, {"url": "https://soc.utah.edu/sociology3112/chi-square.php", "anchor_text": "https://soc.utah.edu/sociology3112/chi-square.php"}, {"url": "https://towardsdatascience.com/machine-learning-target-feature-label-imbalance-problem-and-solutions-98c5ae89ad0#ceab", "anchor_text": "https://towardsdatascience.com/machine-learning-target-feature-label-imbalance-problem-and-solutions-98c5ae89ad0#ceab"}, {"url": "https://people.richland.edu/james/lecture/m170/tbl-chi.html", "anchor_text": "https://people.richland.edu/james/lecture/m170/tbl-chi.html"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----486404dd5bc---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/tag/statistics?source=post_page-----486404dd5bc---------------statistics-----------------", "anchor_text": "Statistics"}, {"url": "https://medium.com/tag/probability?source=post_page-----486404dd5bc---------------probability-----------------", "anchor_text": "Probability"}, {"url": "https://medium.com/tag/hypothesis-testing?source=post_page-----486404dd5bc---------------hypothesis_testing-----------------", "anchor_text": "Hypothesis Testing"}, {"url": "https://medium.com/tag/chi-square-test?source=post_page-----486404dd5bc---------------chi_square_test-----------------", "anchor_text": "Chi Square Test"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F486404dd5bc&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmachine-learning-chi-square-test-in-evaluating-predictions-486404dd5bc&user=Joseph+Cohen&userId=d1d523a49c4e&source=-----486404dd5bc---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F486404dd5bc&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmachine-learning-chi-square-test-in-evaluating-predictions-486404dd5bc&user=Joseph+Cohen&userId=d1d523a49c4e&source=-----486404dd5bc---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F486404dd5bc&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmachine-learning-chi-square-test-in-evaluating-predictions-486404dd5bc&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----486404dd5bc--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F486404dd5bc&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmachine-learning-chi-square-test-in-evaluating-predictions-486404dd5bc&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----486404dd5bc---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----486404dd5bc--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----486404dd5bc--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----486404dd5bc--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----486404dd5bc--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----486404dd5bc--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----486404dd5bc--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----486404dd5bc--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----486404dd5bc--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@arieljosephcohen?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@arieljosephcohen?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Joseph Cohen"}, {"url": "https://medium.com/@arieljosephcohen/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "45 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fd1d523a49c4e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmachine-learning-chi-square-test-in-evaluating-predictions-486404dd5bc&user=Joseph+Cohen&userId=d1d523a49c4e&source=post_page-d1d523a49c4e--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F102db26a100d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmachine-learning-chi-square-test-in-evaluating-predictions-486404dd5bc&newsletterV3=d1d523a49c4e&newsletterV3Id=102db26a100d&user=Joseph+Cohen&userId=d1d523a49c4e&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}