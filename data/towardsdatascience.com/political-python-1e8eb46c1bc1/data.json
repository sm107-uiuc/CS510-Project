{"url": "https://towardsdatascience.com/political-python-1e8eb46c1bc1", "time": 1682996836.550551, "path": "towardsdatascience.com/political-python-1e8eb46c1bc1/", "webpage": {"metadata": {"title": "Political Python. Scraping Congressional documents with\u2026 | by Ray Johns | Towards Data Science", "h1": "Political Python", "description": "The 2020 Democratic candidates for President will face off in debates starting Wednesday. Many of them are current or former members of Congress. All of them are vying to lead the country. As voters\u2026"}, "outgoing_paragraph_urls": [{"url": "https://www.washingtonpost.com/politics/2019/05/17/which-candidates-have-made-democratic-debate-stage/?utm_term=.a739a1f8a25a", "anchor_text": "Many of them", "paragraph_index": 0}, {"url": "https://www.djangoproject.com/", "anchor_text": "Django", "paragraph_index": 6}, {"url": "https://www.guru99.com/xpath-selenium.html", "anchor_text": "learn to use XPath", "paragraph_index": 16}, {"url": "https://github.com/chrismattmann/tika-python", "anchor_text": "Tika", "paragraph_index": 17}], "all_paragraphs": ["The 2020 Democratic candidates for President will face off in debates starting Wednesday. Many of them are current or former members of Congress. All of them are vying to lead the country.", "As voters, wouldn\u2019t it be extraordinary if we had a record of everything that they had said on the floor of the Senate or the House, over the course of their careers as politicians?", "And as data scientists, wouldn\u2019t we like to extract their words, analyze them, and use them to make judgments or predictions about these Congresspeople as Presidential candidates?", "Yes, we can. The Constitution requires Congress to keep a journal of its proceedings. The Government Publishing Office thus prints (and digitally posts) the Congressional Record, which contains the daily official proceedings of the legislature\u2019s two chambers, including:", "Although the data live in the public domain, getting them out of the website and into a usable format poses a bit of a challenge. Without access to pricy legal databases, web scraping is the best option for an enterprising member of the public, and Scrapy makes it relatively painless to get a lot of information quickly.", "Scrapy allows for asynchronous web scraping with python. You can use it to extract data using APIs, integrate it with BeautifulSoup and Selenium, and extend its capabilities in as many ways as a spider web has filaments.", "Scrapy\u2019s central conceit is copying Django a \u201cdon\u2019t repeat yourself\u201d framework, meaning it provides a way to reuse code and easily scale projects up to a larger scope. The component parts of the crawler, such as the items, middlewares, pipelines, and settings, live in separate scripts, and multiple \u201cspiders\u201d that crawl different websites can use them within the same \u201cproject\u201d.", "The spiders themselves, naturally, rely on object-oriented programming (each is of the class \u201cSpider\u201d):", "One of Scrapy\u2019s most useful features is the Scrapy shell, which allows you to explore the website you are scraping in real time to test your assumptions. Essentially, you get to try your code out in sandbox mode before you deploy it (and find out it doesn\u2019t work).", "When you\u2019re working with something as complex as XPath, this addition vastly reduces the time and frustration of drilling down into the structure of a website to extract the content you need. For instance, I needed to fetch partial URLs and text from particular elements within the HTML on the Congress.gov website. The Scrapy shell let me ensure my XPath syntax did not return empty lists before I copied and pasted the resultant syntax into my code.", "A note on \u201ccopy XPath\u201d from DevTools: While you may find it enticing to simply right-click on an HTML element in DevTools and select \u201cCopy XPath\u201d from the menu that appears, do not succumb to temptation. If, like Congress, your site is organized in tables, you\u2019ll fail to retrieve everything you want. In my case, the PDFs I wanted are located in the far right column of the page:", "Clicking \u201cCopy XPath\u201d gives me the following:", "This is just describing a position within a table.", "Here\u2019s what that returns in the shell:", "Here\u2019s what my actual XPath expression is:", "And here\u2019s what it returns, for a given page:", "You must learn to use XPath to select the meaningful content, rather than rely on automatically generated expressions, which \u2014 rather like the governmental body in question \u2014 often table function in favor of form.", "Once I had written the spider, it wasted remarkably little time in downloading 25 years\u2019 worth of the Congressional Record to my hard drive. Not too much additional code later, and I had extracted the text with Tika, a python library that processes PDFs.", "I created a regular expression to split out individual speeches:", "And tried out some very preliminary sentiment analysis:", "What\u2019s next for Congress, now that their words are laid bare? Analysis and data mining, Natural(Language Processing)ly. While much ado has been made about Twitter, hardly a covfefe has yet been raised about what Senators and Representatives have said on the floor of Congress, whether because of the difficulty of obtaining the data, the trickiness of training the models, the lack of legal literacy, or all of the above. But with the proper tools and domain knowledge, I hope to provide some valuable insights ahead of the 2020 election season.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Opinions are my own. Machine Learning, AI, Linguistics, NLP with Deep Learning | { B.A. : Dartmouth; J.D. : Yale; M.S. : Simmons; CS Graduate Courses: Stanford}"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F1e8eb46c1bc1&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpolitical-python-1e8eb46c1bc1&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpolitical-python-1e8eb46c1bc1&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpolitical-python-1e8eb46c1bc1&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpolitical-python-1e8eb46c1bc1&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----1e8eb46c1bc1--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----1e8eb46c1bc1--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@rayljohns?source=post_page-----1e8eb46c1bc1--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@rayljohns?source=post_page-----1e8eb46c1bc1--------------------------------", "anchor_text": "Ray Johns"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F304c3bcee737&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpolitical-python-1e8eb46c1bc1&user=Ray+Johns&userId=304c3bcee737&source=post_page-304c3bcee737----1e8eb46c1bc1---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F1e8eb46c1bc1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpolitical-python-1e8eb46c1bc1&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F1e8eb46c1bc1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpolitical-python-1e8eb46c1bc1&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://www.washingtonpost.com/politics/2019/05/17/which-candidates-have-made-democratic-debate-stage/?utm_term=.a739a1f8a25a", "anchor_text": "Many of them"}, {"url": "https://www.djangoproject.com/", "anchor_text": "Django"}, {"url": "https://www.guru99.com/xpath-selenium.html", "anchor_text": "learn to use XPath"}, {"url": "https://github.com/chrismattmann/tika-python", "anchor_text": "Tika"}, {"url": "https://www.espritdecorpus.com/posts/political-python-scrapy/", "anchor_text": "https://www.espritdecorpus.com"}, {"url": "https://medium.com/tag/python?source=post_page-----1e8eb46c1bc1---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/web-scraping?source=post_page-----1e8eb46c1bc1---------------web_scraping-----------------", "anchor_text": "Web Scraping"}, {"url": "https://medium.com/tag/data-science?source=post_page-----1e8eb46c1bc1---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/justice?source=post_page-----1e8eb46c1bc1---------------justice-----------------", "anchor_text": "Justice"}, {"url": "https://medium.com/tag/politics?source=post_page-----1e8eb46c1bc1---------------politics-----------------", "anchor_text": "Politics"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F1e8eb46c1bc1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpolitical-python-1e8eb46c1bc1&user=Ray+Johns&userId=304c3bcee737&source=-----1e8eb46c1bc1---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F1e8eb46c1bc1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpolitical-python-1e8eb46c1bc1&user=Ray+Johns&userId=304c3bcee737&source=-----1e8eb46c1bc1---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F1e8eb46c1bc1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpolitical-python-1e8eb46c1bc1&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----1e8eb46c1bc1--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F1e8eb46c1bc1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpolitical-python-1e8eb46c1bc1&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----1e8eb46c1bc1---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----1e8eb46c1bc1--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----1e8eb46c1bc1--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----1e8eb46c1bc1--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----1e8eb46c1bc1--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----1e8eb46c1bc1--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----1e8eb46c1bc1--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----1e8eb46c1bc1--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----1e8eb46c1bc1--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@rayljohns?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@rayljohns?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Ray Johns"}, {"url": "https://medium.com/@rayljohns/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "656 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F304c3bcee737&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpolitical-python-1e8eb46c1bc1&user=Ray+Johns&userId=304c3bcee737&source=post_page-304c3bcee737--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F199f98e22d81&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpolitical-python-1e8eb46c1bc1&newsletterV3=304c3bcee737&newsletterV3Id=199f98e22d81&user=Ray+Johns&userId=304c3bcee737&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}