{"url": "https://towardsdatascience.com/predict-nba-player-lines-with-monte-carlo-simulation-58a1c006a6e2", "time": 1683009501.485847, "path": "towardsdatascience.com/predict-nba-player-lines-with-monte-carlo-simulation-58a1c006a6e2/", "webpage": {"metadata": {"title": "Predict NBA Player Lines with Monte Carlo Simulation | by Carter Bouley | Towards Data Science", "h1": "Predict NBA Player Lines with Monte Carlo Simulation", "description": "Predict NBA Player Lines with Monte Carlo Simulation betting value professional sports betting game simulation sports trading basketball profitable gambling"}, "outgoing_paragraph_urls": [{"url": "https://www.basketball-reference.com/", "anchor_text": "https://www.basketball-reference.com", "paragraph_index": 11}, {"url": "https://github.com/Carterbouley/nba_simulation/blob/master/Version_3.ipynb", "anchor_text": "Github", "paragraph_index": 27}, {"url": "https://github.com/Carterbouley/nba_simulation/blob/master/Version_3.ipynb", "anchor_text": "GitHub", "paragraph_index": 35}, {"url": "https://www.linkedin.com/in/carterbouley/", "anchor_text": "Linkedin", "paragraph_index": 38}], "all_paragraphs": ["I do not in any way encourage gambling. I do not encourage the use of my model, in fact, I actively discourage it. This is purely for educational use and should not be used or relied upon with any real money. Seriously.", "My previous experience as a professional sports bettor relied heavily on efficient market hypothesis. It suggests that asset prices reflect all available information. In sports betting terms, in a free market (such as an exchange like Betfair exchange) the prices on any event accurately reflects that events chance of occurring.", "This theory\u2019s origins come from the early 1900s (and wasn\u2019t popularised till decades later), and one story explains it well. In 1906 the great statistician Francis Galton observed a competition to guess the weight of an ox at a country fair. Eight hundred people entered. Galton, being the kind of man he was, ran statistical tests on the numbers. While some individual guesses were far too high, and others very low, he discovered that the average guess (1,197lb) was extremely close to the actual weight (1,198lb) of the ox. This story was told by James Surowiecki, in his entertaining book The Wisdom of Crowds. I highly recommend it.", "But there lie several difficulties with using these assumptions to find value, and place bets:", "These limitations led me to explore developing techniques to predict sporting event outcomes that do not rely on the wisdom of the crowd.", "Monte Carlo simulations are a broad range of tools which rely on repeated sampling to obtain numerical results. They are often used in physics or maths when it is difficult to use other approaches. They are particularly helpful when looking at predicting events where randomness plays a significant role (I.E. sports events).", "This is because instead of giving a deterministic result with a degree of uncertainty, as most typical machine learning algorithms do, Monte Carlo simulations invert this. It solves a deterministic problem using only a range of probabilities. Instead of simply giving us the result, it will output the probability distribution of all the potential results. This is fantastic for sports betting. If we manage to accurately simulate a game, it is possible to create a set of odds, or build fair lines. This result can then be compared to the market and various bookmakers, and we can decide if we have value.", "Sports contains a huge amount of randomness and variation, and on top of that there is limited amount of data to work with. Lineups change regularly, teams that played well last season may perform poorly next season. Historical data is largely irrelevant for this reason.", "There is so much randomness in games that looking at one prediction of a game result is not particularly helpful. Just like looking at one spin of a roulette wheel is not very helpful \u2014 casino\u2019s don\u2019t care about what happens in one spin. They don\u2019t even care what happens in 100, or 1000 spins. They only care about understanding how their games generate an edge over the millions of spins that occur in the casino\u2019s lifetime. This limits how well we can train traditional machine learning models.", "Casinos make money by understanding that their edge is realised over the long run, so sharp sports bettors should do the same. However, with only 82 games per team each season in the NBA and even less this season due to coronavirus we have limited data to base our predictions off. Therefore we want the ability to simulate games en masse, thousands of times, if not millions to build an accurate range of outcomes and probabilities.", "When applied to sports, what we can essentially do is sample from several known distributions (previous games results) and produce a new, unknown distribution (a new games result and probability distribution).", "The data I used was scraped from https://www.basketball-reference.com. It provides game by game statistics on every player in the NBA, and I used data from 2013 onwards.", "There are several insights I discovered early on when exploring the data, which will affect how I design my model. Firstly, players in different positions score a different average number of points. Secondly, there is a home advantage in points scoring in every position.", "This is hardly surprising, as it\u2019s an assumption that even the most basic sports fan can make. However they are important to check when considering how to build a simulation of the game. Given that a home advantage exists, and positional differences occur, we need to include this information in any simulation.", "Another relatively simple assumption I checked, was the effect minutes played has on the number of points scored. It makes sense, that the longer a player is on the court, the more time they have to score points. Below is a regression plot to show the nature of this relationship, as it is difficult to see the density of the scatter points. This correlation carries through to other metrics, which makes sense \u2014 more time, more assists, steals, blocks, points, etc.", "This is the information I use to build the distributions from which I will sample from. There is a large assumption I make about the metrics, and that is they are in general, normally distributed.", "Below is the distribution of minutes played for Nick Young, and while not exactly normally distributed, is close enough for my purposes.", "Points scored is certainly more of a stretch, and this should certainly be noted as a limitation to think about adjusting later on.", "There are several methodologies for building distributions to repeatedly sample from which I considered:", "Bootstrapping: Sampling repeatedly from these known distributions, with replacement. If we repeatedly sampled from the points scored distribution above, there would never be a simulation showing Nick Young scoring 35 points. In the past, he has scored around 29 points and 38 points so it is a situation that is clearly possible, and we want to reflect that.", "Build a Poisson distribution: Another option I considered is building a poisson distribution. It forces all numbers to be integers above zero, which is helpful for our purposes. However in a poisson distribution, the mean and standard deviation are the same number. I could then sample from this artificially built distribution", "Build a Normal distribution with tweaks: The option I went with is to generate a normal distribution using the mean and standard deviation of the players statistics, and repeatedly sample from that. I then force numbers to be integers, and negative numbers to be zeros. This helps to combat both limitations of the above methodologies.", "I generated a distribution of a players game results, using the statistics of his history. This allows me to build a distribution of thousands of games, rather than just the limited historical data that exists.", "The new distribution looks as follows. While different to the original, it effectively tackled the issue outlined above, and the shape is broadly similar.", "Now finally to the fun part.", "I built several functions to perform the simulations.", "This first function simply finds the team lineup from the recent season (as we don\u2019t care about players that aren\u2019t in the team) and returns a dictionary with their position, for easy reference later on.", "The next function contains a lot of code, so I\u2019ll explain it in words and feel free to skip through it. It is also on my Github.", "For the number of simulations requested, and for an individual player, the function randomly samples from the distributions I have built for them. It takes one sample of how long they played, multiplied by one sample of how many points they score per minute, plus a sample on the number of points the opposing team concedes from players in that position. This whole process is one game\u2019s simulation", "This number is divided by 2, so offensive and defensive statistics are taken into account, and that score is entered into a list.", "The result of running this on one particular player (Stephen Curry) against the Toronto Raptors, gives the following result (I have converted the list to a histogram for easier viewing. This shows his expected points distribution over 10,000 games.", "So in essence what I have built is a new distribution of Stephen Curry scoring ability\u2019s, but with some adjustment based on the defensive ability of the opposing team, namely their ability to defend from players in Stephen Curry\u2019s position.", "For simplicity, this first iteration of the simulation of the model is to find fair lines for even money. If we can find fair lines (accurately), then we can search for prices better than the probability we expect, and think about if they provide value. The following function orders the simulated scores, and finds the median value.", "Its output is for this set of results is 17. What this means is that our simulations suggest that, half the time vs the Toronto Raptors Stephen Curry scores above 17, and the other half, below 17.", "For sports betting purposes, it means if we can find somewhere offering us better than evens for this line (SC to score over or under 17 points), based purely off this model we may believe it to be a value bet. However a word of warning \u2014 this is highly hypothetical. There is likely much more granularity that could go into defining this process before placing any money on it, it was just a simple pet project. I urge you highly NOT to use this for real money bets, nor do I encourage gambling in any way. It is simply a starting point to begin building your own model.", "The full simulation model is on my GitHub so feel free to take a look, but the final result produces player lines for every player on both teams. It is however too much code to post on medium, but this is the output of 10,000 simulations (which takes less than 40 seconds)for Golden State Warrior lines vs Toronto Raptors.", "This model has not been tested on any previous games, and I am currently looking at different ways to test its accuracy.", "If anyone has any inputs please reach out, this is an active pet project of mine, so I would be grateful to hear any comments from more experienced data scientists or those with an interest in basketball!", "This article has been inspiring to write, and I am actively looking at applying similar models to other sports that are in action during Lockdown. I am currently looking for sports data on all sports. I am also job searching for an immediate start, so if you would like to reach out for either of those reasons or another, please do so either through the comments, my Linkedin, or my email at carterbouley@gmail.com.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Data Scientist with a background in Economics \u2014 London"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F58a1c006a6e2&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpredict-nba-player-lines-with-monte-carlo-simulation-58a1c006a6e2&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpredict-nba-player-lines-with-monte-carlo-simulation-58a1c006a6e2&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpredict-nba-player-lines-with-monte-carlo-simulation-58a1c006a6e2&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpredict-nba-player-lines-with-monte-carlo-simulation-58a1c006a6e2&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----58a1c006a6e2--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----58a1c006a6e2--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@carterbouley?source=post_page-----58a1c006a6e2--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@carterbouley?source=post_page-----58a1c006a6e2--------------------------------", "anchor_text": "Carter Bouley"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F5bafa8e14c09&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpredict-nba-player-lines-with-monte-carlo-simulation-58a1c006a6e2&user=Carter+Bouley&userId=5bafa8e14c09&source=post_page-5bafa8e14c09----58a1c006a6e2---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F58a1c006a6e2&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpredict-nba-player-lines-with-monte-carlo-simulation-58a1c006a6e2&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F58a1c006a6e2&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpredict-nba-player-lines-with-monte-carlo-simulation-58a1c006a6e2&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@tjdragotta?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "TJ Dragotta"}, {"url": "https://unsplash.com/s/photos/basketball?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Unsplash"}, {"url": "https://www.basketball-reference.com/", "anchor_text": "https://www.basketball-reference.com"}, {"url": "https://github.com/Carterbouley/nba_simulation/blob/master/Version_3.ipynb", "anchor_text": "Github"}, {"url": "https://github.com/Carterbouley/nba_simulation/blob/master/Version_3.ipynb", "anchor_text": "GitHub"}, {"url": "https://www.linkedin.com/in/carterbouley/", "anchor_text": "Linkedin"}, {"url": "https://unsplash.com/@buningmendoza", "anchor_text": "Christian Mendoza"}, {"url": "https://unsplash.com/s/photos/basketball?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Unsplash"}, {"url": "https://medium.com/tag/data-science?source=post_page-----58a1c006a6e2---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/sports?source=post_page-----58a1c006a6e2---------------sports-----------------", "anchor_text": "Sports"}, {"url": "https://medium.com/tag/sports-betting?source=post_page-----58a1c006a6e2---------------sports_betting-----------------", "anchor_text": "Sports Betting"}, {"url": "https://medium.com/tag/basketball?source=post_page-----58a1c006a6e2---------------basketball-----------------", "anchor_text": "Basketball"}, {"url": "https://medium.com/tag/python?source=post_page-----58a1c006a6e2---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F58a1c006a6e2&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpredict-nba-player-lines-with-monte-carlo-simulation-58a1c006a6e2&user=Carter+Bouley&userId=5bafa8e14c09&source=-----58a1c006a6e2---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F58a1c006a6e2&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpredict-nba-player-lines-with-monte-carlo-simulation-58a1c006a6e2&user=Carter+Bouley&userId=5bafa8e14c09&source=-----58a1c006a6e2---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F58a1c006a6e2&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpredict-nba-player-lines-with-monte-carlo-simulation-58a1c006a6e2&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----58a1c006a6e2--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F58a1c006a6e2&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpredict-nba-player-lines-with-monte-carlo-simulation-58a1c006a6e2&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----58a1c006a6e2---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----58a1c006a6e2--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----58a1c006a6e2--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----58a1c006a6e2--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----58a1c006a6e2--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----58a1c006a6e2--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----58a1c006a6e2--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----58a1c006a6e2--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----58a1c006a6e2--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@carterbouley?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@carterbouley?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Carter Bouley"}, {"url": "https://medium.com/@carterbouley/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "71 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F5bafa8e14c09&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpredict-nba-player-lines-with-monte-carlo-simulation-58a1c006a6e2&user=Carter+Bouley&userId=5bafa8e14c09&source=post_page-5bafa8e14c09--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F943b53c93eeb&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpredict-nba-player-lines-with-monte-carlo-simulation-58a1c006a6e2&newsletterV3=5bafa8e14c09&newsletterV3Id=943b53c93eeb&user=Carter+Bouley&userId=5bafa8e14c09&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}