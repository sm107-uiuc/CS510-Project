{"url": "https://towardsdatascience.com/what-makes-a-song-great-part-2-e82a44be659c", "time": 1683011591.520952, "path": "towardsdatascience.com/what-makes-a-song-great-part-2-e82a44be659c/", "webpage": {"metadata": {"title": "What Makes a Song Great? Part 2. Analyzing Rolling Stone\u2019s 500 Greatest\u2026 | by Bernardino Sassoli | Towards Data Science", "h1": "What Makes a Song Great? Part 2", "description": "In Part 1, we looked at how to retrieve data from the web. In this article, we will focus more on interacting with an API and on using Pandas."}, "outgoing_paragraph_urls": [{"url": "https://towardsdatascience.com/tagged/what-makes-a-song-great", "anchor_text": "series of three articles", "paragraph_index": 0}, {"url": "https://towardsdatascience.com/rollingstone-for-medium-f1f638b9568e", "anchor_text": "Part 1", "paragraph_index": 1}, {"url": "https://developer.spotify.com/", "anchor_text": "Spotify\u2019s API", "paragraph_index": 2}, {"url": "https://developer.spotify.com/dashboard/applications", "anchor_text": "dashboard", "paragraph_index": 4}, {"url": "https://spotipy.readthedocs.io/en/2.13.0/", "anchor_text": "Here", "paragraph_index": 5}, {"url": "https://medium.com/@samlupton/spotipy-get-features-from-your-favourite-songs-in-python-6d71f0172df0.", "anchor_text": "https://medium.com/@samlupton/spotipy-get-features-from-your-favourite-songs-in-python-6d71f0172df0.", "paragraph_index": 5}, {"url": "https://www.w3schools.com/whatis/whatis_json.asp", "anchor_text": "JSON object", "paragraph_index": 8}, {"url": "https://www.programiz.com/python-programming/exception-handling", "anchor_text": "handle the exceptions", "paragraph_index": 9}, {"url": "https://docs.python.org/3/tutorial/datastructures.html#list-comprehensions", "anchor_text": "list comprehension", "paragraph_index": 12}, {"url": "https://developer.spotify.com/documentation/web-api/reference/tracks/get-audio-features/", "anchor_text": "here", "paragraph_index": 12}], "all_paragraphs": ["[This is the second in a series of three articles]", "In Part 1, we looked at how to retrieve data from the web. In this article, we will focus more on interacting with an API and on using Pandas.", "Previously we used web scraping to get a dataframe containing all of Rolling Stone\u2019s 500 greatest songs of all time. What if we wanted to create a Spotify playlist? Or, better yet, get more data from Spotify to supplement ours? We can do that by querying and posting to Spotify\u2019s API. In the simplest terms, an Application Programming Interface (or \u2018API\u2019) is just the part of a server that your browser or app interacts with when sending and retrieving data from the Internet. When you add a song to a playlist in Spotify or look at how long a song lasts, you\u2019re interacting with its API.", "This is a good starting point to learn more:", "Head to Spotify\u2019s API dashboard, log in with your standard account and click on \u2018create an app\u2019. From there you should copy the client id and the client secret. These will be the credentials you need to log in to the API. It\u2019s a good idea to paste them in a .txt file (mine is called Spotify.txt - see below).Now we can connect to the API as follows (the with open (file, 'r') as f line is a neat way to avoid forgetting to close the file):", "Python has a great library called spotipy (that's the sp in the code above) which makes this much easier than usual. Here you can read the documentation. Or, like I did, you can get acquainted by reading an article here on Medium - I suggest this one: https://medium.com/@samlupton/spotipy-get-features-from-your-favourite-songs-in-python-6d71f0172df0.", "Now let\u2019s get to the fun part. In order to download data from Spotify we first retrieve the track id for each one of our 500 songs. Let's try this out for one example, My Girl by The Temptations.", "We will extract the artist and the song's title from our dataframe and pass the results to spotipy's .search() method.", "While this may look scary, it\u2019s a JSON object and it behaves pretty much like a Python dictionary. A little inspection shows us that, for example, the actual id is nested as the value of the key id within the first item if a list which is itself the value of the key items inside the first key-value pair (e.g. {tracks : ...}). Similarly, a little digging allows us to find the song's popularity attibute.", "Now we can put everything into a function. Because some of the searches might not have a result, we\u2019ll handle the exceptions with a try... except... block. Note the use of the .zip() function in line 4 to avoid more complex iterations. We then retrieve the data and add it to our dataframe.", "Good. Let\u2019s also check whether our function has returned any missing values using pandas\u2019 .isnull():", "We have 13 items that were not returned by our query. For brevity\u2019s sake I will just drop those from the dataframe. I may add a workaround at a later stage.", "Spotify also tracks audio features such as danceability, time signature, tempo. We can access those with spotipy's by passing a track's id to it's audio_features method. I will show you two ways to do it. In the first, I use Python's list comprehension, a slightly more advanced feature that allows you to create lists iteratively in a very succinct way. But you can use a standard for loop if it feels more comfortable. To find out more about Spotify's audio features head here.", "We have a list of lists, each corresponding to a song and containing a dictionary. Here\u2019s how we are going to add each of the features to a corresponding column in the dataframe:", "Because we won\u2019t be needing some of the columns I will just get rid of them and take a look at our dataframe.", "We\u2019re all set. In the next article, we are going to finally start to explore and visualize our dataset. I hope you enjoyed and learned some useful tools.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Intellectual omnivore. Philosopher by training, management consultant by trade."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fe82a44be659c&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-makes-a-song-great-part-2-e82a44be659c&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-makes-a-song-great-part-2-e82a44be659c&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-makes-a-song-great-part-2-e82a44be659c&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-makes-a-song-great-part-2-e82a44be659c&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----e82a44be659c--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----e82a44be659c--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://sassoli.medium.com/?source=post_page-----e82a44be659c--------------------------------", "anchor_text": ""}, {"url": "https://sassoli.medium.com/?source=post_page-----e82a44be659c--------------------------------", "anchor_text": "Bernardino Sassoli"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F64ab339d120f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-makes-a-song-great-part-2-e82a44be659c&user=Bernardino+Sassoli&userId=64ab339d120f&source=post_page-64ab339d120f----e82a44be659c---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fe82a44be659c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-makes-a-song-great-part-2-e82a44be659c&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fe82a44be659c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-makes-a-song-great-part-2-e82a44be659c&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://towardsdatascience.com/tagged/what-makes-a-song-great", "anchor_text": "What Makes a Song Great"}, {"url": "https://unsplash.com/@john_matychuk?utm_source=medium&utm_medium=referral", "anchor_text": "John Matychuk"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://towardsdatascience.com/tagged/what-makes-a-song-great", "anchor_text": "series of three articles"}, {"url": "https://towardsdatascience.com/rollingstone-for-medium-f1f638b9568e", "anchor_text": "Part 1"}, {"url": "https://developer.spotify.com/", "anchor_text": "Spotify\u2019s API"}, {"url": "https://medium.com/@perrysetgo/what-exactly-is-an-api-69f36968a41f", "anchor_text": "What exactly IS an API?Have you ever heard the word \u201cAPI\u201d batted about, and wondered exactly what an this is? Do you have a vague idea, but\u2026medium.com"}, {"url": "https://developer.spotify.com/dashboard/applications", "anchor_text": "dashboard"}, {"url": "https://spotipy.readthedocs.io/en/2.13.0/", "anchor_text": "Here"}, {"url": "https://medium.com/@samlupton/spotipy-get-features-from-your-favourite-songs-in-python-6d71f0172df0.", "anchor_text": "https://medium.com/@samlupton/spotipy-get-features-from-your-favourite-songs-in-python-6d71f0172df0."}, {"url": "https://www.w3schools.com/whatis/whatis_json.asp", "anchor_text": "JSON object"}, {"url": "https://www.programiz.com/python-programming/exception-handling", "anchor_text": "handle the exceptions"}, {"url": "https://docs.python.org/3/tutorial/datastructures.html#list-comprehensions", "anchor_text": "list comprehension"}, {"url": "https://developer.spotify.com/documentation/web-api/reference/tracks/get-audio-features/", "anchor_text": "here"}, {"url": "https://medium.com/tag/python?source=post_page-----e82a44be659c---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/data-science?source=post_page-----e82a44be659c---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/music?source=post_page-----e82a44be659c---------------music-----------------", "anchor_text": "Music"}, {"url": "https://medium.com/tag/spotify?source=post_page-----e82a44be659c---------------spotify-----------------", "anchor_text": "Spotify"}, {"url": "https://medium.com/tag/what-makes-a-song-great?source=post_page-----e82a44be659c---------------what_makes_a_song_great-----------------", "anchor_text": "What Makes A Song Great"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fe82a44be659c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-makes-a-song-great-part-2-e82a44be659c&user=Bernardino+Sassoli&userId=64ab339d120f&source=-----e82a44be659c---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fe82a44be659c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-makes-a-song-great-part-2-e82a44be659c&user=Bernardino+Sassoli&userId=64ab339d120f&source=-----e82a44be659c---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fe82a44be659c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-makes-a-song-great-part-2-e82a44be659c&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----e82a44be659c--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fe82a44be659c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-makes-a-song-great-part-2-e82a44be659c&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----e82a44be659c---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----e82a44be659c--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----e82a44be659c--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----e82a44be659c--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----e82a44be659c--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----e82a44be659c--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----e82a44be659c--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----e82a44be659c--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----e82a44be659c--------------------------------", "anchor_text": ""}, {"url": "https://sassoli.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://sassoli.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Bernardino Sassoli"}, {"url": "https://sassoli.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "30 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F64ab339d120f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-makes-a-song-great-part-2-e82a44be659c&user=Bernardino+Sassoli&userId=64ab339d120f&source=post_page-64ab339d120f--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F9f83c916c40a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhat-makes-a-song-great-part-2-e82a44be659c&newsletterV3=64ab339d120f&newsletterV3Id=9f83c916c40a&user=Bernardino+Sassoli&userId=64ab339d120f&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}