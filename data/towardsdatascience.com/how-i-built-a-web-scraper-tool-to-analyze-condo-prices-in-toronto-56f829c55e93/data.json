{"url": "https://towardsdatascience.com/how-i-built-a-web-scraper-tool-to-analyze-condo-prices-in-toronto-56f829c55e93", "time": 1683013979.0218198, "path": "towardsdatascience.com/how-i-built-a-web-scraper-tool-to-analyze-condo-prices-in-toronto-56f829c55e93/", "webpage": {"metadata": {"title": "Building a web scraper tool to analyze condo prices in Toronto | by Karan Singh | Towards Data Science", "h1": "Building a web scraper tool to analyze condo prices in Toronto", "description": "Condos have always fascinated me and in the city, I live, they are perhaps the first (or realistic) option that comes to the mind of many first-time home-buyers. Unless you have been living under a\u2026"}, "outgoing_paragraph_urls": [{"url": "https://condos.ca/", "anchor_text": "Condos.ca", "paragraph_index": 1}, {"url": "https://www.freecodecamp.org/news/how-to-scrape-websites-with-python-and-beautifulsoup-5946935d93fe/", "anchor_text": "Here", "paragraph_index": 4}, {"url": "https://selenium-python.readthedocs.io/installation.html#introduction", "anchor_text": "Selenium", "paragraph_index": 6}, {"url": "https://www.crummy.com/software/BeautifulSoup/bs4/doc/", "anchor_text": "BeautifulSoup", "paragraph_index": 11}, {"url": "https://plotly.com/python/", "anchor_text": "Plotly", "paragraph_index": 23}, {"url": "https://condos.ca/", "anchor_text": "condos.ca", "paragraph_index": 29}], "all_paragraphs": ["Condos have always fascinated me and in the city, I live, they are perhaps the first (or realistic) option that comes to the mind of many first-time home-buyers. Unless you have been living under a rock, you would be aware that house prices in Toronto have jumped manyfold over the last decade, and more so in the last 5 years. More recently, it has been the condo market that is on fire. So if you, like me, are looking for a condo to buy, you are in the right place.", "Being a highly data-driven person, I built a web-scraper tool that helps me analyze the condo prices in Toronto. My go-to website is Condos.ca. It has a good user interface and provides market intelligence (which I thought would be useful in validating my results). At the time of writing this article, it has listings spanning over 80 web pages, and I shall extract data from the first 50 pages as described later in the article.", "The objective of this undertaking was 2-fold:", "I extracted the information displayed on every listing such as the price, the street address, the number of bedrooms, bathrooms, whether it has parking or not, the size range and, the maintenance fees. (Note: Many other parameters affect condo prices such as the age of the building, property tax, Floor number, images, etc., but I have left these for simplicity)", "It\u2019s worth mentioning here that I had limited to no experience with HTML before performing this exercise. But here lies the beauty of web scraping. You don\u2019t need an advanced understanding of HTML. I simply learned how to extract the required value from the waterfall of tags within the HTML code. And the rest is all python! Here is a useful resource on how to scrape websites.", "We begin by importing the necessary modules.", "As soon as I made the request to scrape the website, I ran into an error. This is because many websites try to block users from scraping any data and it may be illegal depending on what one plans to do with the data (I had however obtained permission from condos.ca). To navigate through this issue, I used an API called Selenium. It\u2019s an API that allows you to programmatically interact with a browser the way a real user would. Although Selenium is primarily used to help test a web application, it can be used for any task where you need browser automation.", "Running the previous code opens up a new browser and loads the website, and helps you interact with the website as if a real user would. For example, instead of manually clicking on the website to select filters such as the no. of bedrooms, or home type, or provide a price range, Selenium does that easily by passing in a couple of lines of command. The model gives the user the ability to select multiple filters.For example, to get 2 bedroom options, I use the following code to click on the button:", "Similarly, to get all the results with Gym, I simply use the following code:", "Defining a function to iterate over multiple pages", "Because I want to be able to do this analysis for other cities, I define a function that creates a beautiful soup object using parameters of \u2018city\u2019, \u2018mode\u2019, and \u2018page no\u2019. Here, the \u2018mode\u2019 parameter takes in \u2018Sale\u2019 or \u2018Rent\u2019 as values, giving the user the ability to analyze rental prices as well!", "The function utilizes the module called BeautifulSoup and returns an object called soup for a given webpage. It also loads up the requested webpage. (Later I shall iterate over all the webpages to extract the soup object for all pages)", "Now that we have the soup object, we can extract some useful information such as the total number of listings, total listings per page, etc., by parsing through the webpage HTML. It\u2019s not as difficult as it sounds! We use soup.find() to obtain the relevant tags. A useful approach is to start by extracting the data on the first page. If you can do that successfully, rest is simply iterating the process over all the pages!", "Extracting some relevant information on listings from the first page.", "Now that we are a little comfortable with this, we can be a bit more ambitious and extract all the prices on page 1.", "To make things simpler, I defined a variable called condo_container that would hold all the relevant data (price, location, size, etc.) of all the listings on a page", "Now, all we have to do is extract price and other data from this condo_container. See the example below:", "Rinse and repeat the above process for all variables and we got all the lists that we would need to construct a data-frame (see sample code below). The process gets a little bit tricky while trying to extract parameters such as bathrooms, size, and parking, etc owing to the HTML structure but with a little bit of effort, it can be done! (I am not sharing the complete code on purpose so as to avoid the reproduction of code).", "Now that we have all the lists, we simply append them onto a dictionary called data defined below. Some of the tags get a little confusing but that\u2019s because they have been formatted from string type to integer wherever required.", "Once we have the dictionary ready, we convert it into a pandas data-frame for further processing and EDA. The resulting data-frame has 2031 rows.", "A quick look at the dataset tells us that Bedrooms, Bathrooms, Maintenance fees, and Size are object type variables because they had been stored as string type in the HTML.", "These variables were cleaned and converted into an integer or float type. Moreover, I created a variable, Avg_Size from the Size variable. Through further data inspection, I found error values which I replaced with the mean of the respective columns. I also engineered a Street Address variable from the Location variable in case I want to perform some kind of location analysis later on. The dataset was treated for outliers, which were skewing my averages (expensive condos can get well expensive! ). The missing values were imputed with average or most occurring values in their respective columns.", "Now, that our dataset looks nice and clean, we can go ahead with some basic exploratory analysis!", "I was curious, how the average price and size varied by the number of bedrooms, which I think would be the first thing on the mind of any buyer! So I created some plots using Plotly (see sample code below).", "The average price per square foot (taking in only 1,2 and 3 bedrooms in the subset) was calculated at $ 897, a little higher than the quoted average of $827/sq. ft on the day of my analysis (Note: There has been a gradual decline in average prices since the onset of COVID so the values shown here may be different from the current values).", "I was also able to analyze average maintenance values by the number of bedrooms. An interesting insight was that maintenance fees can make or break your investment in a condo since it could account for almost 25% of your monthly mortgage value! (something to keep in mind and not just focus on that hefty price tag)", "Below, I analyzed the number of listings by average sizes and found that most condos on sale fall in the 600\u2013699 sq. ft category.", "These were some of the interesting insights I derived from this web scraping exercise. I am sure that armed with this knowledge now, I would fall into the category of an \u2018informed buyer\u2019\u2019.", "If you have any interesting points to share, I would love to hear your comments down below.", "Thanks to the team at condos.ca for giving me permission to carry out this interesting and valuable exercise!", "Disclaimer: Please note that the views, thoughts, and opinions expressed in the text belong solely to the author, and not necessarily to the author\u2019s employer, organization, committee, or other group or individual. This is not investment advice and the author does not intend to use the data for any commercial purposes but for personal reasons only.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "I like to write about analytics , marketing, social sciences and education | MSc | Analyst, Data Science | \ud83d\udccdToronto \ud83c\udde8\ud83c\udde6"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F56f829c55e93&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-i-built-a-web-scraper-tool-to-analyze-condo-prices-in-toronto-56f829c55e93&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-i-built-a-web-scraper-tool-to-analyze-condo-prices-in-toronto-56f829c55e93&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-i-built-a-web-scraper-tool-to-analyze-condo-prices-in-toronto-56f829c55e93&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-i-built-a-web-scraper-tool-to-analyze-condo-prices-in-toronto-56f829c55e93&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----56f829c55e93--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----56f829c55e93--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://karansingh11.medium.com/?source=post_page-----56f829c55e93--------------------------------", "anchor_text": ""}, {"url": "https://karansingh11.medium.com/?source=post_page-----56f829c55e93--------------------------------", "anchor_text": "Karan Singh"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F6512592717b8&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-i-built-a-web-scraper-tool-to-analyze-condo-prices-in-toronto-56f829c55e93&user=Karan+Singh&userId=6512592717b8&source=post_page-6512592717b8----56f829c55e93---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F56f829c55e93&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-i-built-a-web-scraper-tool-to-analyze-condo-prices-in-toronto-56f829c55e93&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F56f829c55e93&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-i-built-a-web-scraper-tool-to-analyze-condo-prices-in-toronto-56f829c55e93&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@schuh?utm_source=medium&utm_medium=referral", "anchor_text": "Sandro Schuh"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://condos.ca/", "anchor_text": "Condos.ca"}, {"url": "https://condos.ca/", "anchor_text": "Condos.ca"}, {"url": "https://www.freecodecamp.org/news/how-to-scrape-websites-with-python-and-beautifulsoup-5946935d93fe/", "anchor_text": "Here"}, {"url": "https://selenium-python.readthedocs.io/installation.html#introduction", "anchor_text": "Selenium"}, {"url": "https://condos.ca", "anchor_text": "https://condos.ca"}, {"url": "https://www.crummy.com/software/BeautifulSoup/bs4/doc/", "anchor_text": "BeautifulSoup"}, {"url": "https://plotly.com/python/", "anchor_text": "Plotly"}, {"url": "https://condos.ca/", "anchor_text": "Condos.ca"}, {"url": "https://condos.ca/", "anchor_text": "condos.ca"}, {"url": "https://medium.com/tag/real-estate?source=post_page-----56f829c55e93---------------real_estate-----------------", "anchor_text": "Real Estate"}, {"url": "https://medium.com/tag/web-scraping?source=post_page-----56f829c55e93---------------web_scraping-----------------", "anchor_text": "Web Scraping"}, {"url": "https://medium.com/tag/python?source=post_page-----56f829c55e93---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/analytics?source=post_page-----56f829c55e93---------------analytics-----------------", "anchor_text": "Analytics"}, {"url": "https://medium.com/tag/data-science?source=post_page-----56f829c55e93---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F56f829c55e93&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-i-built-a-web-scraper-tool-to-analyze-condo-prices-in-toronto-56f829c55e93&user=Karan+Singh&userId=6512592717b8&source=-----56f829c55e93---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F56f829c55e93&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-i-built-a-web-scraper-tool-to-analyze-condo-prices-in-toronto-56f829c55e93&user=Karan+Singh&userId=6512592717b8&source=-----56f829c55e93---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F56f829c55e93&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-i-built-a-web-scraper-tool-to-analyze-condo-prices-in-toronto-56f829c55e93&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----56f829c55e93--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F56f829c55e93&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-i-built-a-web-scraper-tool-to-analyze-condo-prices-in-toronto-56f829c55e93&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----56f829c55e93---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----56f829c55e93--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----56f829c55e93--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----56f829c55e93--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----56f829c55e93--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----56f829c55e93--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----56f829c55e93--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----56f829c55e93--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----56f829c55e93--------------------------------", "anchor_text": ""}, {"url": "https://karansingh11.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://karansingh11.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Karan Singh"}, {"url": "https://karansingh11.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "34 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F6512592717b8&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-i-built-a-web-scraper-tool-to-analyze-condo-prices-in-toronto-56f829c55e93&user=Karan+Singh&userId=6512592717b8&source=post_page-6512592717b8--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fd3a15f0c0f00&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-i-built-a-web-scraper-tool-to-analyze-condo-prices-in-toronto-56f829c55e93&newsletterV3=6512592717b8&newsletterV3Id=d3a15f0c0f00&user=Karan+Singh&userId=6512592717b8&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}