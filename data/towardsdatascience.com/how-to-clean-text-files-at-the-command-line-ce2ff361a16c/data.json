{"url": "https://towardsdatascience.com/how-to-clean-text-files-at-the-command-line-ce2ff361a16c", "time": 1683015277.540799, "path": "towardsdatascience.com/how-to-clean-text-files-at-the-command-line-ce2ff361a16c/", "webpage": {"metadata": {"title": "How to Clean Text Data at the Command Line | by Ezzeddin Abdullah | Towards Data Science", "h1": "How to Clean Text Data at the Command Line", "description": "Cleaning data is like cleaning the walls in your house, you clear any scribble, remove the dust, and filter out what is unnecessary that makes your walls ugly and get rid of it. The same thing\u2026"}, "outgoing_paragraph_urls": [{"url": "https://hub.docker.com/r/ezzeddin/clean-data", "anchor_text": "pull that image", "paragraph_index": 1}, {"url": "https://www.ezzeddinabdullah.com/posts/penguins-in-docker-a-tutorial-on-why-we-use-docker", "anchor_text": "why we use docker tutorial", "paragraph_index": 2}, {"url": "https://github.com/bhargaviparanjape/clickbait/tree/master/dataset", "anchor_text": "clickbait and non clickbait", "paragraph_index": 3}, {"url": "https://people.mpi-sws.org/~achakrab/papers/chakraborty_clickbait_asonam16.pdf", "anchor_text": "Stop Clickbait: Detecting and Preventing Clickbaits in Online News Media", "paragraph_index": 3}, {"url": "https://people.mpi-sws.org/~achakrab/papers/chakraborty_clickbait_asonam16.pdf", "anchor_text": "paper", "paragraph_index": 28}, {"url": "https://amzn.to/33y5EkR", "anchor_text": "Data Science at the Command Line", "paragraph_index": 38}, {"url": "https://www.datascienceatthecommandline.com/", "anchor_text": "its website", "paragraph_index": 40}, {"url": "https://amzn.to/33y5EkR", "anchor_text": "order an ebook or paperback", "paragraph_index": 40}, {"url": "https://ezzeddin.gumroad.com/l/cleaner-python", "anchor_text": "https://ezzeddin.gumroad.com/l/cleaner-python", "paragraph_index": 42}], "all_paragraphs": ["Cleaning data is like cleaning the walls in your house, you clear any scribble, remove the dust, and filter out what is unnecessary that makes your walls ugly and get rid of it. The same thing happens when cleaning your data, it\u2019s filtering what we want and removing what we don\u2019t want to make the raw data useful and not raw anymore. You can do the cleaning with Python, R, or whatever language you prefer but in this tutorial, I\u2019m going to explain how you can clean your text files at the command line files by giving insights from a paper researching clickbait and non-clickbait data.", "To remove the hassle of downloading files we deal with and dependencies we need, I\u2019ve made a docker image for you that has all you need. You just pull it from docker hub and you\u2019ll find what you need to play with to let you focus on the cleaning part. So let\u2019s pull that image and then run it interactively to enter the shell and write some command-lines.", "If using docker is still unclear for you, you can see why we use docker tutorial", "Let\u2019s clean two text files containing clickbait and non clickbait headlines for 16,000 articles each. This data is used from a paper titled: Stop Clickbait: Detecting and Preventing Clickbaits in Online News Media at 2016 IEEE/ACM International Conference on Advances in Social Networks Analysis and Mining (ASONAM). Our goal here is to get the most common words used in both clickbait and non-clickbait headlines.", "If you list what\u2019s inside the container you\u2019ll see two text files called clickbait_data and non_clickbait_data. Let\u2019s see what the final output first that we want to get. For the clickbait data, we want the most common 20 words to be represented like this with their counts:", "And for the most 20 common words of non-clickbait headlines:", "Let\u2019s see how we can get these histograms through the command line by taking it step by step. After running the docker image, we\u2019re now in a new shell with the new environment Let\u2019s first see what the clickbait_data file has by getting the first 10 lines of it:", "So it seems this file has headlines that are labeled as clickbait as you can see:", "And if you use head for getting the first lines of non_clickbait_data you\u2019ll find:", "We\u2019re interested in words here not phrases, so we can get words starting from 3 letters to more with:", "head clickbait_data is used here because we\u2019re doing statistics here on the couple of headlines at the top of the file which is piped to the next grep command grep -oE \u2018\\w{3,}\u2019", "In order to get the counts of each word we need to first get the unique words which we can get by uniq command with the option -c to give you counts, but to let uniq delete duplicate words you need to sort first:", "This command is done on the first 10 lines, let\u2019s do it across the entire clickbait headlines:", "Here is the output of the previous command:", "Looks like we\u2019re close now to be in a good shape, let\u2019s see what we can do to better clean that up.", "If we get a deeper look", "We can see we\u2019re missing small letters and all caps letters. For example, for the \u2018You\u2019 word we\u2019re missing \u2018you\u2019 and we\u2019re also missing \u2018YOU\u2019. Let\u2019s try to see if these words already exist:", "We\u2019re missing 2 words that each can contribute to our counts to the \u2018You\u2019 occurrence and \u2018Your\u2019 to make them 5540 and 2540 respectively.", "What we need to do first is to convert each capital letter into small ones using tr which is a command-line utility that translates characters:", "tr \u2018[:upper:]\u2019 \u2018[:lower:]\u2019 here translates the contents of clickbait_data into lower-case. [\u2018upper\u2019] is a character class that represents all upper case characters and [\u2018lower\u2019] is a character class that represents all lower case characters.", "To prepend these values with the header, we can use sed to put two column names to represent each column:", "sed \u20181i count,word\u2019 so we\u2019re having count representing the number of occurrences and word obviously representing the word", "1i is used here to write these two words at the first line and the change in the file will be in-place", "In order to print that in a pretty shape we can use csvlook which will get us this:", "which is not pretty at all. The reason this happened is that csvlook works as its name indicates to a better look for a CSV file so we should have a CSV (Comma Separated Value) file first. We should then find a way to separate each value at each line with a comma. At this point, we can use awk which is a pattern-directed scanning and processing language:", "It seems we\u2019re in much better shape now:", "If we want to get the word column in the first field and the count column in the second field, we just need to reverse the order in the awk and sed command:", "In order to get the same output for the non-clickbait data, we just need to change the filename:", "In this study as reported by the paper, it addresses the clickbait and non-clickbait headlines to be able to detect both as", "Most of the online news media outlets rely heavily on the revenues generated from the clicks made by their readers, and due to the presence of numerous such outlets, they need to compete with each other for reader attention.", "So what\u2019s in this tutorial is a way to clean up data through the command-line so that we can get some insights about the result of this paper and see if we can get some points claimed by the paper through their research.", "Again, let\u2019s see the final distribution of the most 20 common words for clickbait headlines for this data is:", "we can obviously see the excessive use of the possessive case you and not using the third person references like he, she, or a specific name", "and also your as it might appear in phrases commonly used in clickbait like in \u2018Will Blow Your Mind\u2019. Also, we can find common words of determiners like this, that, which that", "make the user inquisitive about object being referenced and persuade them to pursue the article further.", "On the other hand, the distribution for the most 20 common words for non-clickbait headlines is:", "We can see here non-possessives like australian, president, obama and some other words that can happen in both.", "The clickbait paper suggests much deeper investigations than we did here, but we could get some valuable insights with just one line of code at the command line. We learned how to use tr to translate characters, used grep to filter out words starting from 3 letters, used sort and uniq to get a histogram of word occurrences, used awk to print fields in our desired positions, used sed to put the header to the file we\u2019re processing.", "This tutorial is mainly motivated by Data Science at the Command Line.", "Disclosure: The Amazon links for the book (in this section) are paid links so if you buy the book, I will have a small commission", "This book tries to catch your attention on the ability of the command line when you do data science tasks \u2014 meaning you can obtain your data, manipulate it, explore it, and make your prediction on it using the command line. If you are a data scientist, aspiring to be, or want to know more about it, I highly recommend this book. You can read it online for free from its website or order an ebook or paperback. In this tutorial, we\u2019re gonna focus on using the command line to clean our data.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Helping you build better habits & level up your Python, SQL, and data analysis skills. Get my free ebook: https://ezzeddin.gumroad.com/l/cleaner-python"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fce2ff361a16c&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-clean-text-files-at-the-command-line-ce2ff361a16c&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-clean-text-files-at-the-command-line-ce2ff361a16c&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-clean-text-files-at-the-command-line-ce2ff361a16c&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-clean-text-files-at-the-command-line-ce2ff361a16c&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://me.dm/@ezzeddinabdullah", "anchor_text": "Mastodon"}, {"url": "https://towardsdatascience.com/?source=post_page-----ce2ff361a16c--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----ce2ff361a16c--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://ezzeddinabdullah.medium.com/?source=post_page-----ce2ff361a16c--------------------------------", "anchor_text": ""}, {"url": "https://ezzeddinabdullah.medium.com/?source=post_page-----ce2ff361a16c--------------------------------", "anchor_text": "Ezzeddin Abdullah"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fce79ac4911cd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-clean-text-files-at-the-command-line-ce2ff361a16c&user=Ezzeddin+Abdullah&userId=ce79ac4911cd&source=post_page-ce79ac4911cd----ce2ff361a16c---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fce2ff361a16c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-clean-text-files-at-the-command-line-ce2ff361a16c&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fce2ff361a16c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-clean-text-files-at-the-command-line-ce2ff361a16c&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@jeshoots?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "JESHOOTS.COM"}, {"url": "https://unsplash.com/s/photos/cleaning-kitchen?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Unsplash"}, {"url": "https://hub.docker.com/r/ezzeddin/clean-data", "anchor_text": "pull that image"}, {"url": "https://www.ezzeddinabdullah.com/posts/penguins-in-docker-a-tutorial-on-why-we-use-docker", "anchor_text": "why we use docker tutorial"}, {"url": "https://medium.com/swlh/penguins-in-docker-a-tutorial-on-why-we-use-docker-ce67cebf65f9", "anchor_text": "Penguins in Docker \u2014 A Tutorial on Why We Use DockerA basic tutorial about docker and how to build a Dockerfile and mount a volume and run a docker imagemedium.com"}, {"url": "https://github.com/bhargaviparanjape/clickbait/tree/master/dataset", "anchor_text": "clickbait and non clickbait"}, {"url": "https://people.mpi-sws.org/~achakrab/papers/chakraborty_clickbait_asonam16.pdf", "anchor_text": "Stop Clickbait: Detecting and Preventing Clickbaits in Online News Media"}, {"url": "https://unsplash.com/@dtravisphd?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "David Travis"}, {"url": "https://unsplash.com/s/photos/glasses?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText", "anchor_text": "Unsplash"}, {"url": "https://people.mpi-sws.org/~achakrab/papers/chakraborty_clickbait_asonam16.pdf", "anchor_text": "paper"}, {"url": "https://people.mpi-sws.org/~achakrab/papers/chakraborty_clickbait_asonam16.pdf", "anchor_text": "Abhijnan Chakraborty, Bhargavi Paranjape, Sourya Kakarla, and Niloy Ganguly. \u201cStop Clickbait: Detecting and Preventing Clickbaits in Online News Media\u201d. In Proceedings of the 2016 IEEE/ACM International Conference on Advances in Social Networks Analysis and Mining (ASONAM), San Fransisco, US, August 2016"}, {"url": "https://github.com/bhargaviparanjape/clickbait/tree/master/dataset", "anchor_text": "clickbait and non-clickbait dataset"}, {"url": "https://www.amazon.com/Data-Science-Command-Line-Time-Tested/dp/1491947853", "anchor_text": "Data Science at the Command Line"}, {"url": "https://opensource.com/article/17/2/command-line-tools-data-analysis-linux", "anchor_text": "10 command-line tools for data analysis in Linux"}, {"url": "https://bicorner.com/2015/11/10/infographic-steps-to-perform-text-data-cleaning-in-python/", "anchor_text": "INFOGRAPHIC: Steps To Perform Text Data Cleaning in Python"}, {"url": "https://amzn.to/33y5EkR", "anchor_text": "Data Science at the Command Line"}, {"url": "https://amzn.to/33y5EkR", "anchor_text": "Amazon Product"}, {"url": "https://www.datascienceatthecommandline.com/", "anchor_text": "its website"}, {"url": "https://amzn.to/33y5EkR", "anchor_text": "order an ebook or paperback"}, {"url": "https://www.ezzeddinabdullah.com/posts/how-to-clean-text-data-at-the-command-line", "anchor_text": "How to Clean Text Data at the Command Line by EzzEddin AbdullahCleaning data is like cleaning the walls in your house, you clear any scribble, remove the dust, and filter out what is\u2026www.ezzeddinabdullah.com"}, {"url": "https://medium.com/tag/data-science?source=post_page-----ce2ff361a16c---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/data?source=post_page-----ce2ff361a16c---------------data-----------------", "anchor_text": "Data"}, {"url": "https://medium.com/tag/command-line?source=post_page-----ce2ff361a16c---------------command_line-----------------", "anchor_text": "Command Line"}, {"url": "https://medium.com/tag/bash?source=post_page-----ce2ff361a16c---------------bash-----------------", "anchor_text": "Bash"}, {"url": "https://medium.com/tag/docker?source=post_page-----ce2ff361a16c---------------docker-----------------", "anchor_text": "Docker"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fce2ff361a16c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-clean-text-files-at-the-command-line-ce2ff361a16c&user=Ezzeddin+Abdullah&userId=ce79ac4911cd&source=-----ce2ff361a16c---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fce2ff361a16c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-clean-text-files-at-the-command-line-ce2ff361a16c&user=Ezzeddin+Abdullah&userId=ce79ac4911cd&source=-----ce2ff361a16c---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fce2ff361a16c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-clean-text-files-at-the-command-line-ce2ff361a16c&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----ce2ff361a16c--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fce2ff361a16c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-clean-text-files-at-the-command-line-ce2ff361a16c&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----ce2ff361a16c---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----ce2ff361a16c--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----ce2ff361a16c--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----ce2ff361a16c--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----ce2ff361a16c--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----ce2ff361a16c--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----ce2ff361a16c--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----ce2ff361a16c--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----ce2ff361a16c--------------------------------", "anchor_text": ""}, {"url": "https://ezzeddinabdullah.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://ezzeddinabdullah.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Ezzeddin Abdullah"}, {"url": "https://ezzeddinabdullah.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "350 Followers"}, {"url": "https://ezzeddin.gumroad.com/l/cleaner-python", "anchor_text": "https://ezzeddin.gumroad.com/l/cleaner-python"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fce79ac4911cd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-clean-text-files-at-the-command-line-ce2ff361a16c&user=Ezzeddin+Abdullah&userId=ce79ac4911cd&source=post_page-ce79ac4911cd--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fd36a098e56b6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-clean-text-files-at-the-command-line-ce2ff361a16c&newsletterV3=ce79ac4911cd&newsletterV3Id=d36a098e56b6&user=Ezzeddin+Abdullah&userId=ce79ac4911cd&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}