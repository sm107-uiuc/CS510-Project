{"url": "https://towardsdatascience.com/how-to-capture-and-store-tweets-in-real-time-with-apache-spark-and-apache-kafka-e5ccd17afb32", "time": 1682993959.218804, "path": "towardsdatascience.com/how-to-capture-and-store-tweets-in-real-time-with-apache-spark-and-apache-kafka-e5ccd17afb32/", "webpage": {"metadata": {"title": "How to capture and store tweets in Real Time with Apache Spark and Apache Kafka. Using cloud Platforms such as Databricks and GCP (Part 1) | by Jes\u00fas M\u00e9ndez Galvez | Towards Data Science", "h1": "How to capture and store tweets in Real Time with Apache Spark and Apache Kafka. Using cloud Platforms such as Databricks and GCP (Part 1)", "description": "Hi everyone, on this opportunity I\u2019d like to share an example on how to capture and store Twitter information in real time Spark Streaming and Apache Kafka as open source tool, using Cloud platforms\u2026"}, "outgoing_paragraph_urls": [{"url": "https://databricks.com/signup#signup/community", "anchor_text": "Databricks", "paragraph_index": 5}, {"url": "https://mvnrepository.com/artifact/org.apache.bahir/spark-streaming-twitter_2.11/2.2.1", "anchor_text": "TwitterLibrary", "paragraph_index": 6}, {"url": "https://mvnrepository.com/artifact/org.apache.bahir/spark-streaming-twitter_2.11/2.2.1", "anchor_text": "KafkaLibrary", "paragraph_index": 6}, {"url": "https://docs.databricks.com/user-guide/libraries.html", "anchor_text": "https://docs.databricks.com/user-guide/libraries.html", "paragraph_index": 7}, {"url": "https://www.datasciencecentral.com/profiles/blogs/setting-up-your-first-kafka-development-environment-in-google", "anchor_text": "Kafka-Cloud", "paragraph_index": 13}, {"url": "https://databricks-prod-cloudfront.cloud.databricks.com/public/4027ec902e239c93eaaa8714f173bcfc/2128544101033400/1904549159880935/6372373427624332/latest.html", "anchor_text": "jmgcode", "paragraph_index": 19}], "all_paragraphs": ["Hi everyone, on this opportunity I\u2019d like to share an example on how to capture and store Twitter information in real time Spark Streaming and Apache Kafka as open source tool, using Cloud platforms such as Databricks and Google Cloud Platform.", "This time we\u2019ll use Spark to interact with to Twitter and through Producer\u2019s API we\u2019ll take the data to a Kafka topic.", "Before jumping into development, it\u2019s mandatory to understand some basic concepts:", "Spark Streaming: It\u2019s an extension of Apache Spark core API, which responds to data procesing in near real time (micro batch) in a scalable way. Spark Streaming can connect with different tools such as Apache Kafka, Apache Flume, Amazon Kinesis, Twitter and IOT sensors.", "Apache Kafka: It\u2019s a fast , scalable, durable, and fault-tolerant publication-subscription messaging system. Kafka is generally used in real-time architectures that use stream data to provide real-time analysis.", "2. Spark Databricks: Databricks Platform allows us to create a free Spark-Scala cluster. We must sign up to Databricks, then create a scala notebook where we\u2019ll write our code.", "Before writing our code we must create a cluster and import two libraries, TwitterLibrary will allow us to use the Twitter API with Spark and KafkaLibrary which helps us connect with Apache Kafka.", "Here the documentation of how to import libraries using Maven: https://docs.databricks.com/user-guide/libraries.html", "Then, we must select the option: Import Library", "Then, we select Marvel Coordinate as the source and write the name of the library: spark-streaming-kafka-0\u201310_2.11.", "After that, we do the same for spark-streaming-twitter_2.11", "Now, we only need to enable our Kafka cluster to start with the execution of our development.", "3. Apache Kafka in Google Cloud Platform: to create the cluster we must follow the following steps", "a) Create an instance in GCP and install Kafka, follow the next Kafka-Cloud tutorial.", "b) Enable and create rules to expose the ports 2181(zookeeper) and 9092(kafka). From the ssh console of our virtual machine enter the following commands: (Remenber to change the variable NAME_VM)", "c) Configure Kafka properties file to expose its services, add the followings parameters in the next configuration file server.properties, from the SSH.", "d) Finally, restart Kafka services to take the changes made.", "Now we are ready to consume data from Twitter and store it in a topic of Apache Kafka, Let\u2019s go !", "In our notebook we enter the following codes:", "You can download the full notebook from: jmgcode", "To see the messages in Kafka you can launch the following command within the GCP environment: By SSH", "Within Databricks we can do follow the tweets that we process:", "That\u2019s all for now, In the second part we will see how to do some tranformation of this information in RT and store the results in a database like Apache Hbase, Cassandra or Apache Kudu.", "See you in the next post :) \u2026.", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fe5ccd17afb32&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-capture-and-store-tweets-in-real-time-with-apache-spark-and-apache-kafka-e5ccd17afb32&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-capture-and-store-tweets-in-real-time-with-apache-spark-and-apache-kafka-e5ccd17afb32&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-capture-and-store-tweets-in-real-time-with-apache-spark-and-apache-kafka-e5ccd17afb32&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-capture-and-store-tweets-in-real-time-with-apache-spark-and-apache-kafka-e5ccd17afb32&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----e5ccd17afb32--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----e5ccd17afb32--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@lalitoxd?source=post_page-----e5ccd17afb32--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@lalitoxd?source=post_page-----e5ccd17afb32--------------------------------", "anchor_text": "Jes\u00fas M\u00e9ndez Galvez"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F8f042b78edb6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-capture-and-store-tweets-in-real-time-with-apache-spark-and-apache-kafka-e5ccd17afb32&user=Jes%C3%BAs+M%C3%A9ndez+Galvez&userId=8f042b78edb6&source=post_page-8f042b78edb6----e5ccd17afb32---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fe5ccd17afb32&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-capture-and-store-tweets-in-real-time-with-apache-spark-and-apache-kafka-e5ccd17afb32&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fe5ccd17afb32&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-capture-and-store-tweets-in-real-time-with-apache-spark-and-apache-kafka-e5ccd17afb32&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://apps.twitter.com/", "anchor_text": "TwitterDevs"}, {"url": "https://databricks.com/signup#signup/community", "anchor_text": "Databricks"}, {"url": "https://mvnrepository.com/artifact/org.apache.bahir/spark-streaming-twitter_2.11/2.2.1", "anchor_text": "TwitterLibrary"}, {"url": "https://mvnrepository.com/artifact/org.apache.bahir/spark-streaming-twitter_2.11/2.2.1", "anchor_text": "KafkaLibrary"}, {"url": "https://docs.databricks.com/user-guide/libraries.html", "anchor_text": "https://docs.databricks.com/user-guide/libraries.html"}, {"url": "https://www.datasciencecentral.com/profiles/blogs/setting-up-your-first-kafka-development-environment-in-google", "anchor_text": "Kafka-Cloud"}, {"url": "https://databricks-prod-cloudfront.cloud.databricks.com/public/4027ec902e239c93eaaa8714f173bcfc/2128544101033400/1904549159880935/6372373427624332/latest.html", "anchor_text": "jmgcode"}, {"url": "https://github.com/jmendezgal/kafka-twitter-spark-streaming-cloud/blob/master/KafkaTwitterSparkStreaming.scala", "anchor_text": "jmendezgal/kafka-twitter-spark-streaming-cloudContribute to jmendezgal/kafka-twitter-spark-streaming-cloud development by creating an account on GitHub.github.com"}, {"url": "https://medium.com/tag/apache-spark?source=post_page-----e5ccd17afb32---------------apache_spark-----------------", "anchor_text": "Apache Spark"}, {"url": "https://medium.com/tag/google-cloud-platform?source=post_page-----e5ccd17afb32---------------google_cloud_platform-----------------", "anchor_text": "Google Cloud Platform"}, {"url": "https://medium.com/tag/databricks?source=post_page-----e5ccd17afb32---------------databricks-----------------", "anchor_text": "Databricks"}, {"url": "https://medium.com/tag/apache-kafka?source=post_page-----e5ccd17afb32---------------apache_kafka-----------------", "anchor_text": "Apache Kafka"}, {"url": "https://medium.com/tag/twitter?source=post_page-----e5ccd17afb32---------------twitter-----------------", "anchor_text": "Twitter"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fe5ccd17afb32&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-capture-and-store-tweets-in-real-time-with-apache-spark-and-apache-kafka-e5ccd17afb32&user=Jes%C3%BAs+M%C3%A9ndez+Galvez&userId=8f042b78edb6&source=-----e5ccd17afb32---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fe5ccd17afb32&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-capture-and-store-tweets-in-real-time-with-apache-spark-and-apache-kafka-e5ccd17afb32&user=Jes%C3%BAs+M%C3%A9ndez+Galvez&userId=8f042b78edb6&source=-----e5ccd17afb32---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fe5ccd17afb32&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-capture-and-store-tweets-in-real-time-with-apache-spark-and-apache-kafka-e5ccd17afb32&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----e5ccd17afb32--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fe5ccd17afb32&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-capture-and-store-tweets-in-real-time-with-apache-spark-and-apache-kafka-e5ccd17afb32&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----e5ccd17afb32---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----e5ccd17afb32--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----e5ccd17afb32--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----e5ccd17afb32--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----e5ccd17afb32--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----e5ccd17afb32--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----e5ccd17afb32--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----e5ccd17afb32--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----e5ccd17afb32--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@lalitoxd?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@lalitoxd?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Jes\u00fas M\u00e9ndez Galvez"}, {"url": "https://medium.com/@lalitoxd/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "115 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F8f042b78edb6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-capture-and-store-tweets-in-real-time-with-apache-spark-and-apache-kafka-e5ccd17afb32&user=Jes%C3%BAs+M%C3%A9ndez+Galvez&userId=8f042b78edb6&source=post_page-8f042b78edb6--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F570a4d217947&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-capture-and-store-tweets-in-real-time-with-apache-spark-and-apache-kafka-e5ccd17afb32&newsletterV3=8f042b78edb6&newsletterV3Id=570a4d217947&user=Jes%C3%BAs+M%C3%A9ndez+Galvez&userId=8f042b78edb6&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}