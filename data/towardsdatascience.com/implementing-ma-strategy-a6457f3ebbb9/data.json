{"url": "https://towardsdatascience.com/implementing-ma-strategy-a6457f3ebbb9", "time": 1683009853.927111, "path": "towardsdatascience.com/implementing-ma-strategy-a6457f3ebbb9/", "webpage": {"metadata": {"title": "The Crossover: A Profitable Intersection of Asset Prices | by Andrew Cole | Towards Data Science", "h1": "The Crossover: A Profitable Intersection of Asset Prices", "description": "As someone who comes from an economics background, I can\u2019t help but think of the world through a financial lens. When I decided to transition towards technical analysis I still wanted to incorporate\u2026"}, "outgoing_paragraph_urls": [{"url": "https://github.com/andrewcole33/market_analysis", "anchor_text": "here", "paragraph_index": 0}, {"url": "https://towardsdatascience.com/questions-96667b06af5", "anchor_text": "rules and guidelines", "paragraph_index": 22}, {"url": "https://towardsdatascience.com/readers-terms-b5d780a700a4", "anchor_text": "Reader Terms", "paragraph_index": 22}], "all_paragraphs": ["As someone who comes from an economics background, I can\u2019t help but think of the world through a financial lens. When I decided to transition towards technical analysis I still wanted to incorporate my financial domain knowledge in to the technical components. Technical Analysis in trading is a very hot area for many in my position, so I wanted to build a quantitative trading strategy with backtesting to combine the two areas. The full repository for this project can be found here.", "Our trading strategy will employ various versions of a moving average formula to adapt our trade decisions towards the behavior of asset prices in a portfolio. We will begin by choosing a diversified asset portfolio: Tesla ($TSLA), Johnson & Johnson ($JNJ), and Apple ($AAPL). These three assets are blue-chip equities which are among the lead drivers of the automotive, healthcare, and technology sectors, respectively. We begin by using the yfinance library to web-scrape the historic price data from a determined start-point and end-point. These are brought in as individual series and then merged into one DataFrame with a datetime index.", "We now have just over five years of closing prices (1377 entries) for our portfolio for use in our strategy.", "As this is my first technical trading strategy that I have built, I wanted to start off with one of the oldest and straight-forward methods where we will use the price\u2019s moving average timeseries against the trend of the actual price. By taking the moving average of a timeseries, we are able to greatly reduce the noise, or variance, in the series. This will allow for us to understand the long term behavior of the asset in a much simpler way.", "Trading can take place within fractions of a second, using high-frequency algorithms, or over the course of many years in a long-term approach. We will take the moving averages of a short and long term period.", "Let\u2019s take a look at how these variations of the same timeseries look over time for one of the assets in our portfolio: Tesla. Note how the simple moving average (SMA) line smooths as the length of time increases which indicates the reduction of variability in our price movements.", "It is important to keep in mind that when we are using an SMA timeseries we are actually lagging the original price series. Notice how the orange 20-day SMA begins slightly after the 01/15 start date of the gray TSLA price line. The teal 100-day SMA begins even later. The lag is due to the mathematical nature of a simple moving average but we cannot simply ignore the presence of this lag as time is of the utmost sensitivity when it comes to trading. So how do we account for this lag? The Exponential Moving Average (EMA).", "The EMA is very similar to the SMA, except that it takes in an additional decay parameter, \u03b1 (alpha). EMA helps restrict the lag by putting more weight on recent observations. SMA simply weights the observations evenly.", "We can see that using the EMA allows for a more synchronized and precise capture of a reduced-variance timeseries. Now that we have a good construction of our data, we will move to develop our trading strategy.", "As we stated above, both the EMA and the SMA lag the actual price of the assets. In other words, the actual price of the asset changes much quicker than the moving averages do. Because the actual price is more sensitive, we can use the intersection of the two (actual price and EMA) to signal a short (sell) position or a long (buy) position.", "Note: We are not considering size of position. We are assuming that our available capital is being completely used and that it is evenly distributed (1/3) among our portfolio\u2019s three assets. In the long condition, each asset would be weighted = 1/3, while the short condition would take a weight of -1/3.", "We take the difference between original prices and the EMA series to signify that all of our capital is being used regardless of long or short position.", "This will give us a new DataFrame containing price differences, but we really want to reflect that price difference as a signal towards \u201cbuy\u201d or \u201csell\u201d. We can use a numpy method to assign these.", "IMPORTANT: Because we are using the \u2018Close\u2019 price of our assets in the original timeseries, we don\u2019t actually statistically know that the price is greater than the EMA price. Assuming that we have a long position would actually be inconsistent with the math of our model. We can only assume that we will go long at the close, which means that tomorrow\u2019s opening position will also be long. Tomorrow being a long position can be represented by shifting our positions one day forward.", "Let\u2019s take a look at what our EMA looks like with our original asset price alongside. We will also plot the timeseries of our signals to get a look at how our positions change over the course of the date window.", "Remember, our long, buy position is represented by positive 1/3 (0.333) while our sell position is negative 1/3 (-0.333). We now have a visual representation of our portfolio trade positions throughout the entire series.", "Our strategy treats each asset independently and our positions of one asset do not impact the positions of the other assets. We will use this information to obtain our portfolio returns using a difference of consecutive logarithm observations.", "Our overall returns for the entire time period requires us to multiply our positions DataFrame with the asset\u2019s logarithmic returns DataFrame.", "Our dataframe now contains the returns for each individual entry, but we must use a cumulative sum to see overall returns. We then transform those returns to relative returns using numpy. We will then plot each of our asset\u2019s cumulative log-returns as well as their relative returns.", "We will add all log-returns and then transform these to a relative return to get a statistically accurate return approximation. When plotting, keep in mind that these values represent percentages so don\u2019t forget to multiply your series y-values by 100 to get accurate numbers.", "Now that we have our returns, we can now use compounding return assumptions to return our lifetime portfolio return as well as our average yearly return.", "Since 1962, US stocks have average annual returns of approximately 11% (per marketwatch.com). This means that our moving average strategy would allow for \u201caverage\u201d returns on your investment portfolio annually. Now, these ere just three of the largest market-cap equities in the market. A real portfolio would be much more diversified and requires due-diligence to promise strong returns. Our trading strategy also made lots of assumptions and can be improved upon, but hopefully this serves as a strong starting point for performing technical analysis on a financial instrument.", "Note from Towards Data Science\u2019s editors: While we allow independent authors to publish articles in accordance with our rules and guidelines, we do not endorse each author\u2019s contribution. You should not rely on an author\u2019s works without seeking professional advice. See our Reader Terms for details.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Using Data Science to drive curiosity."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fa6457f3ebbb9&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fimplementing-ma-strategy-a6457f3ebbb9&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fimplementing-ma-strategy-a6457f3ebbb9&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fimplementing-ma-strategy-a6457f3ebbb9&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fimplementing-ma-strategy-a6457f3ebbb9&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----a6457f3ebbb9--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----a6457f3ebbb9--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@andrewcole.817?source=post_page-----a6457f3ebbb9--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@andrewcole.817?source=post_page-----a6457f3ebbb9--------------------------------", "anchor_text": "Andrew Cole"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fcb2c8eb9bc8&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fimplementing-ma-strategy-a6457f3ebbb9&user=Andrew+Cole&userId=cb2c8eb9bc8&source=post_page-cb2c8eb9bc8----a6457f3ebbb9---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fa6457f3ebbb9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fimplementing-ma-strategy-a6457f3ebbb9&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fa6457f3ebbb9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fimplementing-ma-strategy-a6457f3ebbb9&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://github.com/andrewcole33/market_analysis", "anchor_text": "here"}, {"url": "https://unsplash.com/@jsnbrsc?utm_source=medium&utm_medium=referral", "anchor_text": "Jason Briscoe"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://towardsdatascience.com/questions-96667b06af5", "anchor_text": "rules and guidelines"}, {"url": "https://towardsdatascience.com/readers-terms-b5d780a700a4", "anchor_text": "Reader Terms"}, {"url": "https://medium.com/tag/data-science?source=post_page-----a6457f3ebbb9---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/fintech?source=post_page-----a6457f3ebbb9---------------fintech-----------------", "anchor_text": "Fintech"}, {"url": "https://medium.com/tag/technical-analysis?source=post_page-----a6457f3ebbb9---------------technical_analysis-----------------", "anchor_text": "Technical Analysis"}, {"url": "https://medium.com/tag/trading?source=post_page-----a6457f3ebbb9---------------trading-----------------", "anchor_text": "Trading"}, {"url": "https://medium.com/tag/python?source=post_page-----a6457f3ebbb9---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fa6457f3ebbb9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fimplementing-ma-strategy-a6457f3ebbb9&user=Andrew+Cole&userId=cb2c8eb9bc8&source=-----a6457f3ebbb9---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fa6457f3ebbb9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fimplementing-ma-strategy-a6457f3ebbb9&user=Andrew+Cole&userId=cb2c8eb9bc8&source=-----a6457f3ebbb9---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fa6457f3ebbb9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fimplementing-ma-strategy-a6457f3ebbb9&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----a6457f3ebbb9--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fa6457f3ebbb9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fimplementing-ma-strategy-a6457f3ebbb9&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----a6457f3ebbb9---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----a6457f3ebbb9--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----a6457f3ebbb9--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----a6457f3ebbb9--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----a6457f3ebbb9--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----a6457f3ebbb9--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----a6457f3ebbb9--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----a6457f3ebbb9--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----a6457f3ebbb9--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@andrewcole.817?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@andrewcole.817?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Andrew Cole"}, {"url": "https://medium.com/@andrewcole.817/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "233 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fcb2c8eb9bc8&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fimplementing-ma-strategy-a6457f3ebbb9&user=Andrew+Cole&userId=cb2c8eb9bc8&source=post_page-cb2c8eb9bc8--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F39e7de80b84b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fimplementing-ma-strategy-a6457f3ebbb9&newsletterV3=cb2c8eb9bc8&newsletterV3Id=39e7de80b84b&user=Andrew+Cole&userId=cb2c8eb9bc8&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}