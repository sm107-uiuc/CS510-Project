{"url": "https://towardsdatascience.com/covid-19-sentiment-analysis-series-part-2-hypothesis-testing-3db511875165", "time": 1683008924.4255948, "path": "towardsdatascience.com/covid-19-sentiment-analysis-series-part-2-hypothesis-testing-3db511875165/", "webpage": {"metadata": {"title": "COVID-19 Sentiment Analysis Series, Part 2: Hypothesis Testing | by Noah Muluberhan-Berhe | Towards Data Science", "h1": "COVID-19 Sentiment Analysis Series, Part 2: Hypothesis Testing", "description": "In this series, we will be using Londoners\u2019 tweets to understand how emotions evolved in the COVID-19 lockdown, and which public figures and businesses were the winners and losers in their eyes. In\u2026"}, "outgoing_paragraph_urls": [{"url": "https://towardsdatascience.com/covid-19-sentiment-analysis-series-part-1-getting-started-70892122630c", "anchor_text": "Part 1: \u201cGetting Started\u201d", "paragraph_index": 1}, {"url": "https://en.wikipedia.org/wiki/Type_I_and_type_II_errors", "anchor_text": "Type I error", "paragraph_index": 6}, {"url": "https://en.wikipedia.org/wiki/Pooled_variance", "anchor_text": "pooled variance", "paragraph_index": 13}, {"url": "https://en.wikipedia.org/wiki/Welch%27s_t-test", "anchor_text": "Welch\u2019s t-test", "paragraph_index": 14}, {"url": "https://en.wikipedia.org/wiki/Chi-squared_test", "anchor_text": "chi-squared test", "paragraph_index": 35}, {"url": "https://en.wikipedia.org/wiki/Student%27s_t-test#Dependent_t-test_for_paired_samples", "anchor_text": "paired-means test", "paragraph_index": 39}, {"url": "https://en.wikipedia.org/wiki/Wilcoxon_signed-rank_test", "anchor_text": "Wilcoxon Signed-Rank", "paragraph_index": 44}], "all_paragraphs": ["In this series, we will be using Londoners\u2019 tweets to understand how emotions evolved in the COVID-19 lockdown, and which public figures and businesses were the winners and losers in their eyes.", "In Part 1: \u201cGetting Started\u201d we got our Twitter data and processed it, using entity recognition and sentiment scoring.", "Today in Part 2, we will look at the data and through hypothesis testing verify that statistically significant differences exist in the sentiment scores for different entities. But first\u2026", "Underpinning hypothesis testing is the following thought process:", "2. Setting up the test: To test if this sample mean is different to another sample mean (let\u2019s say 2, but it can be any number), we would calculate how many standard deviations (or, in sampling statistics, standard errors) would separate the two if they were part of the same distribution. That is to say, we would hypothesise they were not derived from different distributions of sentiment but from the same distribution:", "3. Standardising the Norm: Visualising this operation, what we are doing is shifting the normal distribution by -2 along the x-axis and dividing by the standard error. It becomes a Standard Normal distribution centred on 2, and the equation can be rewritten:", "3. Student\u2019s t-distribution. In the following tests, we will be calling the z-score a t-statistic. This is because we\u2019ll be assuming a Student\u2019s t-distribution, which is fatter-tailed than the standard normal, thereby introducing some conservatism against a Type I error, due to having a finite number of observations:", "We start by looking at two entities that will be well represented in the data: the Government and the NHS.", "Sentiment for the NHS appears to be more positive with the distribution more heavily-weighted to the right, which we can confirm by looking at the means:", "You may be wondering why there\u2019s a 2nd spike in the NHS histogram at ~0.5. I thought these were repeated tweets, however, found they were scored the same because they all used the phrase \u201cTHANK YOU\u201d, e.g\u2026.", "A BIG THANK YOU TO hollandandbarret & @ray_electronica FOR TODAY\u2019S EASTER EGG DONATION @ST GEORGES HOSPITAL #NHS #NHSWorkers #LondonNHS #FrontlineNHS #MedicalTeam #StayAtHome #coronavirus\u2026", "THANK YOU NHS biglovenhs #thankyounhs #clappingfornhs #covid19 #weareinittogether #stayathome #bandanavixenv @Surbiton, London", "we also confirm this using NumPy:", "Confirming the validity of this assumption enables us to use a pooled variance approach so that implementation of SciPy\u2019s 2 sample t-test boils down to:", "Had standard deviations been different, we would have used Welch\u2019s t-test to calculate the standard deviation across both samples. In practise, this would have meant simply setting equal_var =False.", "Recall the sample means we were comparing\u2026", "A p-value~0 tells us that it\u2019s highly improbable a Student\u2019s t-distribution centred on a mean of -0.036, would also contain an observation of 0.171. Put another way, the test statistic calculated above is stating that a mean of 0.171 would lie 43 standard errors away from the mean of -0.036", "Verdict: Reject the Null. We can say with a high degree of confidence that sentiment towards the NHS is more favourable than for the Government.", "We saw a difference in average sentiment for the entire 3 month period, but when did this start to diverge?", "We can plot the daily difference in average sentiment, however, we would need to adjust for the sample size and the standard deviation of the data for each day to measure our confidence in our daily sample means.", "Instead, we can calculate 95% confidence intervals for the daily differences in average sentiment which incorporates our confidence in our sampling process: we create an upper bound and a lower bound which we\u2019re 95% confident will contain the true difference in average sentiment for that day.", "Each vertical black line is a confidence interval constructed for that day. Each day\u2019s confidence interval marks the region where we\u2019re 95% confident that the true difference in Government vs NHS sentiment lies (because of course our data is inherently just a sample of an overall population).", "At the start of the observation period, there were relatively few tweets made per day. These small daily sample sizes gave rise to larger standard errors because:", "and therefore wider confidence intervals. As time progressed, the daily sample sizes increased allowing our confidence intervals to narrow.", "The confidence intervals were for the most part completely below the red dashed zero line, indicating a 95% confidence that average sentiment towards the government was lower than for the NHS throughout this entire period. There are some rare moments, like the end of April, when the intervals crossed over the zero line\u2026 for those days we can\u2019t say with the confidence level we have chosen that government sentiment was lower than for the NHS.", "We saw there was a difference in average sentiment, but was this due to more positivity towards the NHS (compound > 0.05), or negativity towards the Government (compound < -0.05)?", "Visually it appears both statements could be true, but we will test for this:", "The difference in the ratios is 0.159, ie. the NHS has a 0.159 higher ratio of positive tweets than the Government.", "We can test this difference for statistical significance by running a \u201cdifference of two proportions test\u201d, which again will rely on calculating a t-statistic for the hypothesis that both ratios came from the same distribution:", "where, the standard error for a difference in proportions p_hat is:", "so we can easily manually calculate the t-stat and associated p-value:", "Verdict: Reject the Null. The alternate hypothesis (NHS\u2019s ratio of positive tweets) lies 47 standard errors away from the null (the Government\u2019s ratio), and with a p-value of 0, we say it\u2019s highly unlikely that both came from the same population.", "We repeat the analysis for negative tweets:", "We can see that the Government\u2019s negative tweets ratio is 0.14 higher than the NHS\u2019s, and we test to see if the difference is statistically significant:", "Verdict: Reject the Null. Like with the positive ratio, the difference is statistically significant.", "Alternatively, we could have used the Pandas crosstab function to create a table that shows the number of tweets in each category. Then applied the chi-squared test to verify if any row contains an imbalance in the number of pos, neu, or neg tweets:", "This returns:- the chi_squared statistic- the p-value- the degrees of freedom- the expected frequencies for an even distribution", "We can tell from this that the distribution of tweets are imbalanced compared to what an even distribution would look like for both positive and negative.", "Were some users tweeting more positively about the NHS, while others were more negative pointing to a split amongst Londoners? Or was this favourable view of the NHS also true at the individual user level, and therefore held by each of us?", "This is also a simple test to set up called a paired-means test, where we start with using Pandas crosstab again to create a user level view of average sentiment:", "As with the other parametric tests, we rely on the assumption of normality in the distribution of the variable of interest (in this case the differences column), which we can see roughly holds:", "We use the same framework to calculate the t-statistic:", "except now the Alternate Hypothesis is the mean of differences column, the Null Hypothesis is that there is no overall difference (ie, zero), and as with Hypothesis 1 (which was a 2 sample means test) the standard error is calculated by scaling the standard deviation (this time of the differences):", "Verdict: Reject the Null. Even at the individual user level, we detect diverging sentiment towards the Government and the NHS. It appears we weren\u2019t divided in holding these divergent views.", "Note: we didn\u2019t need the normality assumption to be able to test for this, the non-parametric analogue of the paired-means test (the Wilcoxon Signed-Rank test) could have been used instead which looks at the median, not the mean:", "While we now know that public sentiment was warmer towards the NHS than the Government, it\u2019s hard to discern what emotions exactly were stirred when the public thought about one vs. the other. We can use a wordcloud to visualise what words were used:", "We are no clearer as the picture is obscured because the most frequently occurring words were neutral and didn\u2019t contribute to the valence. We need to filter the Government and NHS corpora for the most emotive words:", "We now have a clearer picture of why the NHS was seen more positively than the Government:", "Government: tweeters referenced the Government when highlighting perceived failures more often than when referencing the NHS:", "NHS: tweets generally refer to the NHS as heroes for the support and care they gave in such trying circumstances.", "It\u2019s interesting therefore that despite ostensibly working towards a common goal, the public it seems saw the NHS as fighting its battles better than the Government did.", "How did this NHS sentiment evolve over time? Did the public grow to love the NHS, or did positivity-fatigue set in?", "There were 3 noticeable weekly peaks most clearly seen in the number of tweets but also apparent in the compound sentiment score around the end of March/start of April, coinciding with the start of the #ClapforCarers campaign.", "While sentiment towards the NHS was positively impacted at this time these weekly peaks have since largely subsided, perhaps Londoners have been feeling #ClapforCarers fatigue?", "We\u2019ve shown how you can apply hypothesis testing to make statistically robust inferences about Twitter sentiment data. We\u2019ve demonstrated how different types of hypothesis tests can help shed more light on the nature of any differences in sentiment, a recap:", "In the next (and final) blog in this series, we will be casting the net wider to find more winners and losers of the lockdown period. We will take it step-by-step going deeper into Machine Learning territory to develop interesting ways to approach this problem\u2026", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Data Science | Finance | Management Consulting"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F3db511875165&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcovid-19-sentiment-analysis-series-part-2-hypothesis-testing-3db511875165&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcovid-19-sentiment-analysis-series-part-2-hypothesis-testing-3db511875165&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcovid-19-sentiment-analysis-series-part-2-hypothesis-testing-3db511875165&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcovid-19-sentiment-analysis-series-part-2-hypothesis-testing-3db511875165&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----3db511875165--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----3db511875165--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@noah.berhe?source=post_page-----3db511875165--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@noah.berhe?source=post_page-----3db511875165--------------------------------", "anchor_text": "Noah Muluberhan-Berhe"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F36db8d98670a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcovid-19-sentiment-analysis-series-part-2-hypothesis-testing-3db511875165&user=Noah+Muluberhan-Berhe&userId=36db8d98670a&source=post_page-36db8d98670a----3db511875165---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F3db511875165&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcovid-19-sentiment-analysis-series-part-2-hypothesis-testing-3db511875165&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F3db511875165&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcovid-19-sentiment-analysis-series-part-2-hypothesis-testing-3db511875165&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@sctgrhm?utm_source=medium&utm_medium=referral", "anchor_text": "Scott Graham"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://towardsdatascience.com/covid-19-sentiment-analysis-series-part-1-getting-started-70892122630c", "anchor_text": "Part 1: \u201cGetting Started\u201d"}, {"url": "https://towardsdatascience.com/central-limit-theorem-explained-with-examples-4c10377ee58c", "anchor_text": "Central Limit Theorem"}, {"url": "https://en.wikipedia.org/wiki/Standard_normal_table#Table_examples", "anchor_text": "known"}, {"url": "https://en.wikipedia.org/wiki/Type_I_and_type_II_errors", "anchor_text": "Type I error"}, {"url": "https://en.wikipedia.org/wiki/Student%27s_t-distribution#Table_of_selected_values", "anchor_text": "known"}, {"url": "https://unsplash.com/@groovelanddesigns?utm_source=medium&utm_medium=referral", "anchor_text": "Grooveland Designs"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://en.wikipedia.org/wiki/Pooled_variance", "anchor_text": "pooled variance"}, {"url": "https://en.wikipedia.org/wiki/Welch%27s_t-test", "anchor_text": "Welch\u2019s t-test"}, {"url": "https://en.wikipedia.org/wiki/Chi-squared_test", "anchor_text": "chi-squared test"}, {"url": "https://en.wikipedia.org/wiki/Student%27s_t-test#Dependent_t-test_for_paired_samples", "anchor_text": "paired-means test"}, {"url": "https://en.wikipedia.org/wiki/Wilcoxon_signed-rank_test", "anchor_text": "Wilcoxon Signed-Rank"}, {"url": "https://towardsdatascience.com/covid-19-sentiment-analysis-series-part-1-getting-started-70892122630c", "anchor_text": "Part 1"}, {"url": "https://medium.com/@noah.berhe/covid-19-sentiment-analysis-series-part-3-winners-and-losers-c00f384080a8?source=friends_link&sk=f5436c1fd12af1e4e948880dae09c3cd", "anchor_text": "Part 3"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----3db511875165---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/tag/nlp?source=post_page-----3db511875165---------------nlp-----------------", "anchor_text": "NLP"}, {"url": "https://medium.com/tag/data-science?source=post_page-----3db511875165---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/programming?source=post_page-----3db511875165---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/tag/mathematics?source=post_page-----3db511875165---------------mathematics-----------------", "anchor_text": "Mathematics"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F3db511875165&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcovid-19-sentiment-analysis-series-part-2-hypothesis-testing-3db511875165&user=Noah+Muluberhan-Berhe&userId=36db8d98670a&source=-----3db511875165---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F3db511875165&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcovid-19-sentiment-analysis-series-part-2-hypothesis-testing-3db511875165&user=Noah+Muluberhan-Berhe&userId=36db8d98670a&source=-----3db511875165---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F3db511875165&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcovid-19-sentiment-analysis-series-part-2-hypothesis-testing-3db511875165&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----3db511875165--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F3db511875165&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcovid-19-sentiment-analysis-series-part-2-hypothesis-testing-3db511875165&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----3db511875165---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----3db511875165--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----3db511875165--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----3db511875165--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----3db511875165--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----3db511875165--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----3db511875165--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----3db511875165--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----3db511875165--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@noah.berhe?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@noah.berhe?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Noah Muluberhan-Berhe"}, {"url": "https://medium.com/@noah.berhe/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "33 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F36db8d98670a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcovid-19-sentiment-analysis-series-part-2-hypothesis-testing-3db511875165&user=Noah+Muluberhan-Berhe&userId=36db8d98670a&source=post_page-36db8d98670a--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Ff406dbc34969&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcovid-19-sentiment-analysis-series-part-2-hypothesis-testing-3db511875165&newsletterV3=36db8d98670a&newsletterV3Id=f406dbc34969&user=Noah+Muluberhan-Berhe&userId=36db8d98670a&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}