{"url": "https://towardsdatascience.com/build-an-interactive-choropleth-map-with-plotly-and-dash-1de0de00dce0", "time": 1683002297.035244, "path": "towardsdatascience.com/build-an-interactive-choropleth-map-with-plotly-and-dash-1de0de00dce0/", "webpage": {"metadata": {"title": "Build an Interactive Choropleth Map with Plotly and Dash | by Jun | Towards Data Science", "h1": "Build an Interactive Choropleth Map with Plotly and Dash", "description": "Last week, I finished my final assignment in IBM Data Science course, which is to find an ideal suburb for opening an Italian restaurant based on location data. During the process, I web-scrapped\u2026"}, "outgoing_paragraph_urls": [{"url": "https://medium.com/swlh/running-python-and-r-within-jupyter-lab-from-remote-server-d9dfbc4f9a85", "anchor_text": "my previous post", "paragraph_index": 2}, {"url": "https://www.mapbox.com/gallery/", "anchor_text": "Mapbox", "paragraph_index": 3}, {"url": "https://github.com/Perishleaf/data-visualisation-scripts/tree/master/dash_project_medium", "anchor_text": "github", "paragraph_index": 3}, {"url": "https://github.com/Perishleaf/data-visualisation-scripts/blob/master/dash_project_medium/dash_project_medium.py", "anchor_text": "script", "paragraph_index": 4}, {"url": "http://127.0.0.1:8050/", "anchor_text": "http://127.0.0.1:8050/", "paragraph_index": 4}, {"url": "https://www.linkedin.com/in/jun-ye-29aaa769/", "anchor_text": "Linkedin", "paragraph_index": 14}, {"url": "http://junye0798.com", "anchor_text": "junye0798.com", "paragraph_index": 16}], "all_paragraphs": ["Last week, I finished my final assignment in IBM Data Science course, which is to find an ideal suburb for opening an Italian restaurant based on location data. During the process, I web-scrapped property median price (i.e. House buy/rent and Unit buy/rent) for each suburb in Sydney and plotted them on Choropleth maps, respectively.", "However, I was wondering if it is possible to combine all these maps in one and select one of them just by clicking name from a dropdown menu. In addition, I want to add one more plot next to the map to show the top 10 suburbs with the highest median prices accordingly. These add-ons will make the map more informative and user-friendly. In this post, I will share my notes about how to create an interactive dashboard with a choropleth map and bar plot using Plotly and Dash. In addition, I assume that you have prior experience with Plotly.", "Install plotly, dash, and pandas on the system. I created a virtual environment using conda to keep the system organised and avoid mess up with other packages in the system. I have introduced conda virtual environment in my previous post if you want to know more about conda env. The following code will create a virtual environment that have all required packages for plotly and dash .", "To be able to draw a map in plotly, we also need a token from Mapbox, which provides various nice map styles and most importantly is for free. In addition, two datasets were used in this dashboard and they can be download from my github (\u2190 You can also find the dash app code here).", "If you want to explore the dash app now, after finishing above steps, you need to assign your Mapbox token to mapbox_accesstoken in this script and run it in the same directory with the two datasets. Once the following message popped up, just open this address http://127.0.0.1:8050/ in your preferred browser and dash will be loading in there.", "As shown in the following figure, I have labelled the key functions used in the script for creating corresponding elements in the dashboard.", "The general principle in building this dashboard via plotly and dash is to 1) arrange and combine different elements together on a defined canvas; 2) compile all elements in one container:fig=go.Figure(data=trace2 + trace1, layout=layout) ; 3) pass this container to dcc.Graph, in which dcc is the dash core components, and dash will create a html-based web application for the dashboard.", "A key function of this dashboard is to show a specific parameter (i.e. House_buy, House_rent, Unit_buy and Unit_rent) in the two traces (choropleth map and bar plot) via the dropdown menu. My method is to create four layers with an argument visible=False for each trace. Then use the buttons feature of updatemenus to turn visible=True for a given parameter.", "Thus, there are four figure layers in each trace and only one is visible depends on which button is clicked in a given time point.", "Since map are not plotted on a cartesian system of coordinates (x/y), which is the coordinates system used in the bar plot, I set up two coordinates systems in the dashboard for the map and bar plot, respectively. As for the bar plot(trace2), its axes are assigned to xaxis='x2', yaxis='y2'. Instead, the map (trace1) has its own features within Layout, which was assigned to the variable mapbox1, the numbers following mapbox and x/y is arbitrary. Having said this, you can assign as many coordinates systems as you want, just make sure you anchor the right system to its trace in the Layout.", "Then within the Layout settings, we do adjustments for these two coordinates systems individually. Such as the position of traces in the dashboard via domain, the appearance of ticks on each axis via showticklabels, and the ascending order of bar via autorange.", "After concatenating all elements within fig=go.Figure, I assigned fig to dcc.Graph, wrapped up all codes as a py file, and run it. Boom, here comes my first interactive dashboard.", "I should note that I only used very basic Dash structure here, most of the codes are still written in Plotly. One drawback of my method is that stacking all four layers onto the same trace may slow down the app, this is because all data need to be loaded when the dash app is initialising. It will be more efficient to do real-time updating when a clicking dropdown menu event happened. Hopefully, further learning with advanced Dash code will find me a solution.", "Here are some resources for learning Dash:", "As always, I welcome feedback, constructive criticism, and hearing about your data science projects. I can be reached on Linkedin.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Data Analyst @Canva | PhD | Inspired by data | junye0798.com | Opinions are my own"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F1de0de00dce0&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuild-an-interactive-choropleth-map-with-plotly-and-dash-1de0de00dce0&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuild-an-interactive-choropleth-map-with-plotly-and-dash-1de0de00dce0&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuild-an-interactive-choropleth-map-with-plotly-and-dash-1de0de00dce0&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuild-an-interactive-choropleth-map-with-plotly-and-dash-1de0de00dce0&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://me.dm/@jun_ye", "anchor_text": "Mastodon"}, {"url": "https://towardsdatascience.com/?source=post_page-----1de0de00dce0--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----1de0de00dce0--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@jun_ye?source=post_page-----1de0de00dce0--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@jun_ye?source=post_page-----1de0de00dce0--------------------------------", "anchor_text": "Jun"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fd8f76324bf51&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuild-an-interactive-choropleth-map-with-plotly-and-dash-1de0de00dce0&user=Jun&userId=d8f76324bf51&source=post_page-d8f76324bf51----1de0de00dce0---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F1de0de00dce0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuild-an-interactive-choropleth-map-with-plotly-and-dash-1de0de00dce0&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F1de0de00dce0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuild-an-interactive-choropleth-map-with-plotly-and-dash-1de0de00dce0&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://medium.com/swlh/running-python-and-r-within-jupyter-lab-from-remote-server-d9dfbc4f9a85", "anchor_text": "my previous post"}, {"url": "https://www.mapbox.com/gallery/", "anchor_text": "Mapbox"}, {"url": "https://github.com/Perishleaf/data-visualisation-scripts/tree/master/dash_project_medium", "anchor_text": "github"}, {"url": "https://github.com/Perishleaf/data-visualisation-scripts/blob/master/dash_project_medium/dash_project_medium.py", "anchor_text": "script"}, {"url": "http://127.0.0.1:8050/", "anchor_text": "http://127.0.0.1:8050/"}, {"url": "http://127.0.0.1:8050/", "anchor_text": "http://127.0.0.1:8050/"}, {"url": "https://dash.plot.ly/", "anchor_text": "Dash User Guide"}, {"url": "https://www.datacamp.com/community/tutorials/learn-build-dash-python", "anchor_text": "Dash for beginners"}, {"url": "https://community.plot.ly/c/dash", "anchor_text": "Dash Community Forum"}, {"url": "https://github.com/ucg8j/awesome-dash", "anchor_text": "Awesome Dash Resource Guide on Github"}, {"url": "https://towardsdatascience.com/how-to-build-a-complex-reporting-dashboard-using-dash-and-plotl-4f4257c18a7f", "anchor_text": "A detailed Dashboard building post"}, {"url": "https://www.linkedin.com/in/jun-ye-29aaa769/", "anchor_text": "Linkedin"}, {"url": "https://medium.com/tag/data-visualization?source=post_page-----1de0de00dce0---------------data_visualization-----------------", "anchor_text": "Data Visualization"}, {"url": "https://medium.com/tag/plotly?source=post_page-----1de0de00dce0---------------plotly-----------------", "anchor_text": "Plotly"}, {"url": "https://medium.com/tag/dashboard?source=post_page-----1de0de00dce0---------------dashboard-----------------", "anchor_text": "Dashboard"}, {"url": "https://medium.com/tag/dash?source=post_page-----1de0de00dce0---------------dash-----------------", "anchor_text": "Dash"}, {"url": "https://medium.com/tag/python3?source=post_page-----1de0de00dce0---------------python3-----------------", "anchor_text": "Python3"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F1de0de00dce0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuild-an-interactive-choropleth-map-with-plotly-and-dash-1de0de00dce0&user=Jun&userId=d8f76324bf51&source=-----1de0de00dce0---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F1de0de00dce0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuild-an-interactive-choropleth-map-with-plotly-and-dash-1de0de00dce0&user=Jun&userId=d8f76324bf51&source=-----1de0de00dce0---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F1de0de00dce0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuild-an-interactive-choropleth-map-with-plotly-and-dash-1de0de00dce0&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----1de0de00dce0--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F1de0de00dce0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuild-an-interactive-choropleth-map-with-plotly-and-dash-1de0de00dce0&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----1de0de00dce0---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----1de0de00dce0--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----1de0de00dce0--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----1de0de00dce0--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----1de0de00dce0--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----1de0de00dce0--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----1de0de00dce0--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----1de0de00dce0--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----1de0de00dce0--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@jun_ye?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@jun_ye?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Jun"}, {"url": "https://medium.com/@jun_ye/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "441 Followers"}, {"url": "http://junye0798.com", "anchor_text": "junye0798.com"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fd8f76324bf51&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuild-an-interactive-choropleth-map-with-plotly-and-dash-1de0de00dce0&user=Jun&userId=d8f76324bf51&source=post_page-d8f76324bf51--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fe51a61d93066&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuild-an-interactive-choropleth-map-with-plotly-and-dash-1de0de00dce0&newsletterV3=d8f76324bf51&newsletterV3Id=e51a61d93066&user=Jun&userId=d8f76324bf51&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}