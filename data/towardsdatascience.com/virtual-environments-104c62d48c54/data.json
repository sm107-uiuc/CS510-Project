{"url": "https://towardsdatascience.com/virtual-environments-104c62d48c54", "time": 1682996359.744537, "path": "towardsdatascience.com/virtual-environments-104c62d48c54/", "webpage": {"metadata": {"title": "A Guide to Python\u2019s Virtual Environments | by Matthew Sarmiento | Towards Data Science", "h1": "A Guide to Python\u2019s Virtual Environments", "description": "\u2604 In this guide we\u2019ll cover the basics of virtual environments and how to use them. Then we\u2019ll peek under the hood and take a closer look at how virtual environments actually work. \u2022 Why Use Virtual\u2026"}, "outgoing_paragraph_urls": [{"url": "https://medium.com/p/104c62d48c54#ee81", "anchor_text": "Why Use Virtual Environments?", "paragraph_index": 3}, {"url": "https://medium.com/p/104c62d48c54#e923", "anchor_text": "What the Virtualenv?!", "paragraph_index": 3}, {"url": "https://medium.com/p/104c62d48c54#8025", "anchor_text": "Using Virtual Environments", "paragraph_index": 3}, {"url": "https://medium.com/p/104c62d48c54#15be", "anchor_text": "Managing Environments", "paragraph_index": 3}, {"url": "https://medium.com/p/104c62d48c54#1839", "anchor_text": "How Virtual Environments Do Their Thing", "paragraph_index": 3}, {"url": "https://medium.com/p/104c62d48c54#9762", "anchor_text": "Further Reading", "paragraph_index": 3}, {"url": "https://packaging.python.org/tutorials/installing-packages/#creating-virtual-environments", "anchor_text": "host of potential problems", "paragraph_index": 4}, {"url": "https://medium.com/@msarmi9/a-guide-to-conda-environments-bc6180fc533", "anchor_text": "Conda environments", "paragraph_index": 5}, {"url": "https://docs.python.org/3/library/venv.html", "anchor_text": "venv", "paragraph_index": 11}, {"url": "https://guides.github.com", "anchor_text": "GitHub", "paragraph_index": 29}, {"url": "https://stackoverflow.com/questions/6590688/is-it-bad-to-have-my-virtualenv-directory-inside-my-git-repository", "anchor_text": "can cause headaches", "paragraph_index": 30}, {"url": "https://en.wikipedia.org/wiki/Dependency_hell", "anchor_text": "Dependency Hell", "paragraph_index": 35}, {"url": "https://en.wikipedia.org/wiki/Inferno_(Dante)#Seventh_Circle_(Violence)", "anchor_text": "seventh level", "paragraph_index": 35}, {"url": "https://en.wikipedia.org/wiki/PATH_(variable)", "anchor_text": "PATH", "paragraph_index": 39}, {"url": "https://docs.python.org/3/library/site.html#site.getsitepackages", "anchor_text": "site", "paragraph_index": 41}, {"url": "https://realpython.com/python-virtual-environments-a-primer/", "anchor_text": "primer on virtual environments", "paragraph_index": 50}, {"url": "https://en.wikipedia.org/wiki/Inferno_(Dante)", "anchor_text": "Inferno", "paragraph_index": 50}, {"url": "https://twitter.com/msarmi9", "anchor_text": "follow me on twitter", "paragraph_index": 51}], "all_paragraphs": ["Python\u2019s virtual environments make life easier. A lot easier.", "\u2604 In this guide we\u2019ll cover the basics of virtual environments and how to use them. Then we\u2019ll peek under the hood and take a closer look at how virtual environments actually work.", "\u26a0\ufe0f Note: We\u2019ll be using the latest version of Python 3.7.x on macOS Mojave throughout this guide.", "\u2022 Why Use Virtual Environments?\u2022 What the Virtualenv?!\u2022 Using Virtual Environments\u2022 Managing Environments\u2022 How Virtual Environments Do Their Thing\u2022 Further Reading", "Virtual environments provide a simple solution to a host of potential problems. In particular, they help you to:", "Sounds pretty handy, no? As you begin to build more sophisticated projects and collaborate with others you\u2019ll come to see just how essential virtual environments are. And if you\u2019re a data scientist like me, you\u2019ll also want to familiarize yourself with their multilingual cousins, Conda environments.", "What exactly is a virtual environment?", "A virtual environment is a Python tool for dependency management and project isolation. They allow Python site packages (third party libraries) to be installed locally in an isolated directory for a particular project, as opposed to being installed globally (i.e. as part of a system-wide Python).", "Great. That all sounds nice, but what is a virtual environment really? Well, a virtual environment is just a directory with three important components:", "The last bit is where all the s*** goes down. We\u2019ll take a closer look later on, but for now let\u2019s just see how we actually use virtual environments.", "Say we wanted to create a virtual environment for a project we\u2019re working on called test-project/, which has the following directory tree.", "All we need to do is execute the venv module, which is part of the Python standard library.", "\u26a0\ufe0f Note: You can replace \u201cvenv/\u201d with a different name for your environment.", "Voil\u00e0! A virtual environment has been born. Now our project looks like this:", "\u267b\ufe0f Reminder: A virtual environment is itself a directory.", "The only thing left to do is to \u201cactivate\u201d our environment by running the scripts we mentioned earlier.", "We\u2019re now inside an active virtual environment (indicated by the command prompt prefixed with the name of the active environment).", "At this point we would work on our project as usual, safe in the knowledge that our project is completely isolated from the rest of our system. Inside our environment we cannot access system-wide site packages and any packages we install will not be accessible outside of our environment.", "When we\u2019re done working on our project, we can exit the environment with", "By default, only pip and setuptools are installed inside a new environment.", "If we want to install a specific version of a third party library, say v1.15.3 of numpy, we can just use pip as usual.", "Now we can import numpy in a script or active Python shell. For instance, say our project contains a script tests/imports-test.py with the following lines.", "When we run this script directly from the command-line, we get:", "Success. Our script imported numpy without a hitch \ud83e\udd73.", "The easiest way to make our work reproducible by others is to include a requirements file in our project\u2019s root directory (top directory). To do so, we\u2019ll run pip freeze, which lists installed third party packages along with their version numbers,", "And write the output to a file, which we\u2019ll call requirements.txt.", "We can use this same command to rewrite our requirements file whenever we update a package or install a new one.", "Now anyone we share our project with will be able to run our project on their system by duplicating our environment using our requirements.txt file.", "Wait \u2014 how exactly do we do that?", "Imagine our teammate Sara has pulled down our test-project/ from our team\u2019s GitHub repository. On her system the project\u2019s directory tree looks like:", "Notice anything slightly \u2014 unusual? Yep, that\u2019s right. There\u2019s no venv/ folder. We\u2019ve excluded it from our team\u2019s GitHub repository because including it can cause headaches.", "This is one reason having a requirements.txt file is essential to reproducing your project\u2019s code.", "To run our test-project/ on her machine, all Sara needs to do is to create a virtual environment inside the project\u2019s root directory", "And install the project\u2019s dependencies inside an active virtual environment with the incantation pip install -r requirements.txt.", "Now the project\u2019s environment on Sara\u2019s system is exactly the same as on our system. Pretty neat, huh?", "Sadly, things don\u2019t always go according to plan. Eventually you will run into problems. Maybe you\u2019ve updated a particular site package by mistake and now find yourself in the ninth level of Dependency Hell, unable to run a single line of your project\u2019s code. Then again, maybe it\u2019s not that bad. Maybe you only find yourself in the seventh level.", "Whatever level you find yourself in, the easiest way to escape the flames and see the sun shine again is to re-create your project\u2019s virtual environment.", "That\u2019s it. Thanks to your requirements.txt file you\u2019re back in business. Yet another reason to always include a requirements file in your projects.", "So you want to know more about virtual environments, eh? Like how an active environment knows how to use the right Python interpreter and how to find the right third party libraries.", "It all comes down to the value of PATH, which tells your shell what instance of Python to use and where to look for site packages. In your base shell PATH will look more or less like this.", "When you invoke a Python interpreter or run a .py script, your shell searches the directories listed in PATH in order until it encounters a Python instance. To see which Python instance PATH finds first, run which python3.", "It\u2019s also easy to see where this Python instance looks for site packages with the site module, which is part of the Python standard library.", "Running the script venv/bin/activate modifies PATH so that our shell searches through our project\u2019s local binaries before searching through our system\u2019s global binaries.", "Now our shell knows to use our project\u2019s local Python instance", "And where to find our project\u2019s local site packages.", "Remember our tests/imports-test.py script from before? It looked like this.", "We were able to run this script from inside our active environment with no problems because our environment\u2019s Python instance was able to access our project\u2019s local site packages.", "What happens if we run the same script from outside our project\u2019s virtual environment?", "Yep, we get an error \u2014 as we should. If we didn\u2019t, it would mean we were able to access our project\u2019s local site packages from outside our project, defeating the entire purpose of having a virtual environment. The fact that we get an error is proof our project is completely isolated from the rest of our system.", "One thing that helps me keep all of this information organised in my head is having a clear picture of what an environment\u2019s directory tree looks like.", "If your curiosity hasn\u2019t been satisfied and you still want to know more about virtual environments, I highly recommend Real Python\u2019s terrific primer on virtual environments. And if you find yourself in thrall to the remarkable illustrations of Gustave Dor\u00e9, I highly recommend reading Dante\u2019s Inferno.", "Other than that, that about does it for us. If you\u2019d like to stay up to date with my data science-y postings, feel free to follow me on twitter.", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F104c62d48c54&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvirtual-environments-104c62d48c54&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvirtual-environments-104c62d48c54&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvirtual-environments-104c62d48c54&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvirtual-environments-104c62d48c54&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----104c62d48c54--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----104c62d48c54--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@msarmi9?source=post_page-----104c62d48c54--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@msarmi9?source=post_page-----104c62d48c54--------------------------------", "anchor_text": "Matthew Sarmiento"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F79ad6523fbe&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvirtual-environments-104c62d48c54&user=Matthew+Sarmiento&userId=79ad6523fbe&source=post_page-79ad6523fbe----104c62d48c54---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F104c62d48c54&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvirtual-environments-104c62d48c54&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F104c62d48c54&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvirtual-environments-104c62d48c54&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://commons.wikimedia.org/wiki/File:Gustave_Dor\u00e9_-_Dante_Alighieri_-_Inferno_-_Plate_8_(Canto_III_-_Abandon_all_hope_ye_who_enter_here).jpg", "anchor_text": "Illustration"}, {"url": "https://en.wikipedia.org/wiki/Gustave_Dor\u00e9", "anchor_text": "Gustave Dor\u00e9"}, {"url": "https://medium.com/p/104c62d48c54#ee81", "anchor_text": "Why Use Virtual Environments?"}, {"url": "https://medium.com/p/104c62d48c54#e923", "anchor_text": "What the Virtualenv?!"}, {"url": "https://medium.com/p/104c62d48c54#8025", "anchor_text": "Using Virtual Environments"}, {"url": "https://medium.com/p/104c62d48c54#15be", "anchor_text": "Managing Environments"}, {"url": "https://medium.com/p/104c62d48c54#1839", "anchor_text": "How Virtual Environments Do Their Thing"}, {"url": "https://medium.com/p/104c62d48c54#9762", "anchor_text": "Further Reading"}, {"url": "https://packaging.python.org/tutorials/installing-packages/#creating-virtual-environments", "anchor_text": "host of potential problems"}, {"url": "https://medium.com/@msarmi9/a-guide-to-conda-environments-bc6180fc533", "anchor_text": "Conda environments"}, {"url": "https://en.wikipedia.org/wiki/Symbolic_link", "anchor_text": "Symlinks"}, {"url": "https://en.wikipedia.org/wiki/Shell_script", "anchor_text": "Scripts"}, {"url": "https://commons.wikimedia.org/wiki/File:Inferno_Canto_6_lines_24-26.jpg", "anchor_text": "Illustration"}, {"url": "https://docs.python.org/3/library/venv.html", "anchor_text": "venv"}, {"url": "https://commons.wikimedia.org/wiki/File:Inferno_Canto_8_verses_27-29.jpg", "anchor_text": "Illustration"}, {"url": "https://guides.github.com", "anchor_text": "GitHub"}, {"url": "https://stackoverflow.com/questions/6590688/is-it-bad-to-have-my-virtualenv-directory-inside-my-git-repository", "anchor_text": "can cause headaches"}, {"url": "https://en.wikipedia.org/wiki/Dependency_hell", "anchor_text": "Dependency Hell"}, {"url": "https://en.wikipedia.org/wiki/Inferno_(Dante)#Seventh_Circle_(Violence)", "anchor_text": "seventh level"}, {"url": "https://commons.wikimedia.org/wiki/File:Gustave_Dore_Inferno32.jpg", "anchor_text": "Illustration"}, {"url": "https://en.wikipedia.org/wiki/PATH_(variable)", "anchor_text": "PATH"}, {"url": "https://docs.python.org/3/library/site.html#site.getsitepackages", "anchor_text": "site"}, {"url": "https://commons.wikimedia.org/wiki/File:Inferno_Canto_34_verses_127-129.jpg", "anchor_text": "Illustration"}, {"url": "https://realpython.com/python-virtual-environments-a-primer/", "anchor_text": "primer on virtual environments"}, {"url": "https://en.wikipedia.org/wiki/Inferno_(Dante)", "anchor_text": "Inferno"}, {"url": "https://twitter.com/msarmi9", "anchor_text": "follow me on twitter"}, {"url": "https://medium.com/tag/python?source=post_page-----104c62d48c54---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/technology?source=post_page-----104c62d48c54---------------technology-----------------", "anchor_text": "Technology"}, {"url": "https://medium.com/tag/data-science?source=post_page-----104c62d48c54---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/programming?source=post_page-----104c62d48c54---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/tag/towards-data-science?source=post_page-----104c62d48c54---------------towards_data_science-----------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F104c62d48c54&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvirtual-environments-104c62d48c54&user=Matthew+Sarmiento&userId=79ad6523fbe&source=-----104c62d48c54---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F104c62d48c54&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvirtual-environments-104c62d48c54&user=Matthew+Sarmiento&userId=79ad6523fbe&source=-----104c62d48c54---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F104c62d48c54&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvirtual-environments-104c62d48c54&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----104c62d48c54--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F104c62d48c54&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvirtual-environments-104c62d48c54&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----104c62d48c54---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----104c62d48c54--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----104c62d48c54--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----104c62d48c54--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----104c62d48c54--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----104c62d48c54--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----104c62d48c54--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----104c62d48c54--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----104c62d48c54--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@msarmi9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@msarmi9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Matthew Sarmiento"}, {"url": "https://medium.com/@msarmi9/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "311 Followers"}, {"url": "https://msarmi9.github.io", "anchor_text": "https://msarmi9.github.io"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F79ad6523fbe&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvirtual-environments-104c62d48c54&user=Matthew+Sarmiento&userId=79ad6523fbe&source=post_page-79ad6523fbe--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F56c0d3c50de6&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvirtual-environments-104c62d48c54&newsletterV3=79ad6523fbe&newsletterV3Id=56c0d3c50de6&user=Matthew+Sarmiento&userId=79ad6523fbe&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}