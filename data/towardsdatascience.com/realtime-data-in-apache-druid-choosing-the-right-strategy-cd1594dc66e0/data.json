{"url": "https://towardsdatascience.com/realtime-data-in-apache-druid-choosing-the-right-strategy-cd1594dc66e0", "time": 1683001992.818771, "path": "towardsdatascience.com/realtime-data-in-apache-druid-choosing-the-right-strategy-cd1594dc66e0/", "webpage": {"metadata": {"title": "Realtime Data in Apache Druid \u2014 Choosing the Right Strategy | by Kartik Khare | Towards Data Science", "h1": "Realtime Data in Apache Druid \u2014 Choosing the Right Strategy", "description": "Since Apache Druid introduced production grade Kafka indexing service a while later, people have been using Tranquility till date to update realtime data. It\u2019s time to change that."}, "outgoing_paragraph_urls": [{"url": "https://hive.apache.org/", "anchor_text": "Hive", "paragraph_index": 0}, {"url": "https://prestodb.io/", "anchor_text": "Presto", "paragraph_index": 0}, {"url": "https://www.elastic.co/what-is/elasticsearch", "anchor_text": "Elasticsearch", "paragraph_index": 0}, {"url": "https://www.elastic.co/products/kibana", "anchor_text": "Kibana", "paragraph_index": 0}, {"url": "https://druid.apache.org/", "anchor_text": "Apache Druid", "paragraph_index": 1}, {"url": "https://druid.apache.org/docs/latest/ingestion/tranquility.html", "anchor_text": "Tranquility", "paragraph_index": 3}, {"url": "https://github.com/druid-io/tranquility/blob/master/docs/overview.md", "anchor_text": "official documentation", "paragraph_index": 7}, {"url": "https://druid.apache.org/docs/latest/development/extensions-core/kafka-ingestion.html", "anchor_text": "Apache Kafka Ingestion", "paragraph_index": 18}], "all_paragraphs": ["Storing data in real-time data streams has always been a challenge. The solution depends on your use cases. If you want to store data for daily or monthly analytics, you can use a distributed file system and run Hive or Presto on top of it. If you\u2019re going to run some simple real-time analytics, you can store the recent data in Elasticsearch and run Kibana for charts.", "Apache Druid was made to address both of the above use cases at the same time. It can serve as a durable data store for daily or monthly analytics. It can also serve as the fast queryable data store, which allows you to push and retrieve data in real-time.", "The issue, however, with earlier versions of Apache druid was ingesting the data from streams in the database. Let\u2019s take a look at what challenges the developers faced earlier.", "Tranquility is a package provided by Apache Druid to ingest real-time data. Tranquility is not exactly but equivalent to JDBC or Cassandra drivers. It handles partitioning, replication, service discovery, and schema rollover for you. The user needs to be concerned with the data and the data source he needs to use.", "Tranquility addresses a lot of the problems which a user might face. However, it comes bundled with its own set of challenges.", "Tranquility can create duplicate records in some instances. It doesn\u2019t provide any exactly-once guarantee. In the case of scenarios, such as timeouts in POST request for data or not receiving the ack, Tranquility can produce duplicate records.", "This situation leaves the user with the responsibility of de-duplication the data. It can even lead to incorrect graphs in Apache superset if you are using one.", "The most concerning issue with Tranquility is the data drop. There are various circumstances under which Tranquility intentionally or due to an error fails to insert the data. Some of these cases listed in the official documentation are \u2014", "The worst part is in most of these cases, you wouldn\u2019t even know that your data has been dropped till the time you query.", "Since Tranquility daemon runs inside your JVM, it\u2019s the responsibility of the application to handle errors such as timeouts. In the case of applications such as Apache Flink, not managing one of these errors effectively, can lead to unwanted restarts.", "On top of all these issues, Tranquility is built for druid 0.9.2. Using it with current druid version 0.16.0 can create unidentified problems.", "To address all of the above problems, Apache druid added Kafka Indexer in version 0.9.1. The indexer remained in the experimental state until version 0.14.", "Kafka Indexing Service first starts a supervisor according to the config specified by you. The supervisor then periodically starts new indexing tasks, which are responsible for consuming data from Kafka and publishing it in Druid.", "Unlike Tranquility, Kafka Indexing Tasks can be long-running. Multiple segments can be published after a minimum no. of rows or bytes have reached without starting a new task.", "Kafka Indexer aims to solve various challenges that its predecessors faced.", "The Kafka indexer provides an exactly-once guarantee to the user. This guarantee is possible since the default Kafka consumer since Kafka 0.11.x provides out of the box support for this semantics.", "Kafka indexer is designed to publish delayed data. It\u2019s not subjected to the windowPeriod considerations of Tranquility. This ability gives a user the freedom to backfill data from a particular offset in Kafka to Druid.", "Although Tranquility also supports schema updates, it\u2019s much easier to do in Kafka Indexer. You just need to submit a POST request containing the new schema and the supervisor will spawn new tasks with the updated schema. You don\u2019t require any changes on the producer end.In case you add new columns, the older rows will show empty values in those columns, but the rows will still be queryable.", "Kafka Indexer services solved a lot of issues that the developers faced when they were using Tranquility. If you want to get started with the Kafka Indexing service, you can refer to the Apache Kafka Ingestion in official Druid documentation.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Software Engineer @StarTree | Previously @WalmartLabs, @Olacabs | Committer @ApachePinot"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fcd1594dc66e0&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Frealtime-data-in-apache-druid-choosing-the-right-strategy-cd1594dc66e0&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Frealtime-data-in-apache-druid-choosing-the-right-strategy-cd1594dc66e0&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Frealtime-data-in-apache-druid-choosing-the-right-strategy-cd1594dc66e0&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Frealtime-data-in-apache-druid-choosing-the-right-strategy-cd1594dc66e0&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----cd1594dc66e0--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----cd1594dc66e0--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@kharekartik?source=post_page-----cd1594dc66e0--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@kharekartik?source=post_page-----cd1594dc66e0--------------------------------", "anchor_text": "Kartik Khare"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F2c9d8b2edb6e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Frealtime-data-in-apache-druid-choosing-the-right-strategy-cd1594dc66e0&user=Kartik+Khare&userId=2c9d8b2edb6e&source=post_page-2c9d8b2edb6e----cd1594dc66e0---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fcd1594dc66e0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Frealtime-data-in-apache-druid-choosing-the-right-strategy-cd1594dc66e0&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fcd1594dc66e0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Frealtime-data-in-apache-druid-choosing-the-right-strategy-cd1594dc66e0&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://unsplash.com/@lukechesser?utm_source=medium&utm_medium=referral", "anchor_text": "Luke Chesser"}, {"url": "https://unsplash.com?utm_source=medium&utm_medium=referral", "anchor_text": "Unsplash"}, {"url": "https://hive.apache.org/", "anchor_text": "Hive"}, {"url": "https://prestodb.io/", "anchor_text": "Presto"}, {"url": "https://www.elastic.co/what-is/elasticsearch", "anchor_text": "Elasticsearch"}, {"url": "https://www.elastic.co/products/kibana", "anchor_text": "Kibana"}, {"url": "https://druid.apache.org/", "anchor_text": "Apache Druid"}, {"url": "https://druid.apache.org/docs/latest/ingestion/tranquility.html", "anchor_text": "Tranquility"}, {"url": "https://github.com/druid-io/tranquility/blob/master/docs/overview.md", "anchor_text": "official documentation"}, {"url": "https://druid.apache.org/docs/latest/development/extensions-core/kafka-ingestion.html", "anchor_text": "Apache Kafka Ingestion"}, {"url": "https://medium.com/tag/big-data?source=post_page-----cd1594dc66e0---------------big_data-----------------", "anchor_text": "Big Data"}, {"url": "https://medium.com/tag/software?source=post_page-----cd1594dc66e0---------------software-----------------", "anchor_text": "Software"}, {"url": "https://medium.com/tag/programming?source=post_page-----cd1594dc66e0---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/tag/data-engineering?source=post_page-----cd1594dc66e0---------------data_engineering-----------------", "anchor_text": "Data Engineering"}, {"url": "https://medium.com/tag/data?source=post_page-----cd1594dc66e0---------------data-----------------", "anchor_text": "Data"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fcd1594dc66e0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Frealtime-data-in-apache-druid-choosing-the-right-strategy-cd1594dc66e0&user=Kartik+Khare&userId=2c9d8b2edb6e&source=-----cd1594dc66e0---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fcd1594dc66e0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Frealtime-data-in-apache-druid-choosing-the-right-strategy-cd1594dc66e0&user=Kartik+Khare&userId=2c9d8b2edb6e&source=-----cd1594dc66e0---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fcd1594dc66e0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Frealtime-data-in-apache-druid-choosing-the-right-strategy-cd1594dc66e0&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----cd1594dc66e0--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fcd1594dc66e0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Frealtime-data-in-apache-druid-choosing-the-right-strategy-cd1594dc66e0&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----cd1594dc66e0---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----cd1594dc66e0--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----cd1594dc66e0--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----cd1594dc66e0--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----cd1594dc66e0--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----cd1594dc66e0--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----cd1594dc66e0--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----cd1594dc66e0--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----cd1594dc66e0--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@kharekartik?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@kharekartik?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Kartik Khare"}, {"url": "https://medium.com/@kharekartik/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "1K Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F2c9d8b2edb6e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Frealtime-data-in-apache-druid-choosing-the-right-strategy-cd1594dc66e0&user=Kartik+Khare&userId=2c9d8b2edb6e&source=post_page-2c9d8b2edb6e--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fc2535e6ef270&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Frealtime-data-in-apache-druid-choosing-the-right-strategy-cd1594dc66e0&newsletterV3=2c9d8b2edb6e&newsletterV3Id=c2535e6ef270&user=Kartik+Khare&userId=2c9d8b2edb6e&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}