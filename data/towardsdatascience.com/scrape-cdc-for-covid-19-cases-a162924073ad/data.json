{"url": "https://towardsdatascience.com/scrape-cdc-for-covid-19-cases-a162924073ad", "time": 1683005146.492385, "path": "towardsdatascience.com/scrape-cdc-for-covid-19-cases-a162924073ad/", "webpage": {"metadata": {"title": "Scrape CDC for COVID-19 cases. How to scrape javascript generated\u2026 | by Angela Kunanbaeva | Towards Data Science", "h1": "Scrape CDC for COVID-19 cases", "description": "In light of recent events, I thought it would be a good idea to get the data of confirmed cases in the US on a state level. Although, CDC website received certain critique for not being updated\u2026"}, "outgoing_paragraph_urls": [{"url": "https://chromedriver.chromium.org/downloads", "anchor_text": "here", "paragraph_index": 1}], "all_paragraphs": ["In light of recent events, I thought it would be a good idea to get the data of confirmed cases in the US on a state level. Although, CDC website received certain critique for not being updated promptly and lagging behind actual spread and cases, but since it\u2019s the only official source of confirmed cases, it\u2019s still a great source to collect data on a daily basis.", "We\u2019ll need a few libraries: the usual requests and beautiful soup and selenium since the table on CDC website is javascript generated. Also in addition to selenium we\u2019ll need a driver, I prefer Chrome as it\u2019s easier for me to inspect a website using chrome. You can download chromedriver here, make sure to download the version compatible with your chrome browser. Also regex to clean up the data and pandas to create a dataframe and save as csv.", "Let\u2019s start by declaring the url and driver variable with an explicit path to the chrome driver. The beautiful soup will parse through driver\u2019s page_source and get_info function will return a dictionary with total us cases and updated dated.", "Here\u2019s the function to get this data:", "Bear in mind that the function might need to be changed if the class name changes for example. The output of this function:", "I ran the scraper first on March 17th, let\u2019s compare:", "OMG, the numbers are terrifying, in only 7 days numbers of Coronavirus cases rose ten-fold and the number of deaths rose 8 times. To think the numbers maybe lagging behind the actual number of confirmed cases and that there\u2019s a staggering number of people with coronavirus symptoms who cannot take tests due to being in a low risk group. But I got sidetracked, so in order to get the number of all cases in the US on a state level, we need to click a button that will unfold the table, the one circled in green:", "As this is an iframe object we need to switch to frame, wait for the data to become visible and then we need to scroll down the page, so that we can collect the data we\u2019re looking for:", "In the code snippet above after the driver scrolls down to view the table, it collects the table header and the data grabbing by xpath. Xpaths do not change easily and this allows to build more robust scraper script and selenium allows us to do that. Don\u2019t forget to quit the webdriver even of your code raises exceptions, so here\u2019s the full code:", "The result of this query will be a list that would need to be cleaned and saved into csv. The number on March 24th are these:", "Thank you for your time and reading my post. As always, your feedback and suggestions are always welcome.", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fa162924073ad&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fscrape-cdc-for-covid-19-cases-a162924073ad&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fscrape-cdc-for-covid-19-cases-a162924073ad&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fscrape-cdc-for-covid-19-cases-a162924073ad&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fscrape-cdc-for-covid-19-cases-a162924073ad&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----a162924073ad--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----a162924073ad--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@kunanba?source=post_page-----a162924073ad--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@kunanba?source=post_page-----a162924073ad--------------------------------", "anchor_text": "Angela Kunanbaeva"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F5ffa1b2f4da5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fscrape-cdc-for-covid-19-cases-a162924073ad&user=Angela+Kunanbaeva&userId=5ffa1b2f4da5&source=post_page-5ffa1b2f4da5----a162924073ad---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fa162924073ad&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fscrape-cdc-for-covid-19-cases-a162924073ad&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fa162924073ad&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fscrape-cdc-for-covid-19-cases-a162924073ad&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://chromedriver.chromium.org/downloads", "anchor_text": "here"}, {"url": "https://www.cdc.gov/coronavirus/2019-ncov/cases-in-us.html'", "anchor_text": "https://www.cdc.gov/coronavirus/2019-ncov/cases-in-us.html'"}, {"url": "http://twitter.com/id", "anchor_text": "@id"}, {"url": "http://twitter.com/id", "anchor_text": "@id"}, {"url": "http://twitter.com/id", "anchor_text": "@id"}, {"url": "http://twitter.com/id", "anchor_text": "@id"}, {"url": "https://medium.com/tag/covid-19?source=post_page-----a162924073ad---------------covid_19-----------------", "anchor_text": "Covid-19"}, {"url": "https://medium.com/tag/scrape?source=post_page-----a162924073ad---------------scrape-----------------", "anchor_text": "Scrape"}, {"url": "https://medium.com/tag/python?source=post_page-----a162924073ad---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/data-science?source=post_page-----a162924073ad---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/script?source=post_page-----a162924073ad---------------script-----------------", "anchor_text": "Script"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fa162924073ad&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fscrape-cdc-for-covid-19-cases-a162924073ad&user=Angela+Kunanbaeva&userId=5ffa1b2f4da5&source=-----a162924073ad---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fa162924073ad&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fscrape-cdc-for-covid-19-cases-a162924073ad&user=Angela+Kunanbaeva&userId=5ffa1b2f4da5&source=-----a162924073ad---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fa162924073ad&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fscrape-cdc-for-covid-19-cases-a162924073ad&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----a162924073ad--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fa162924073ad&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fscrape-cdc-for-covid-19-cases-a162924073ad&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----a162924073ad---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----a162924073ad--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----a162924073ad--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----a162924073ad--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----a162924073ad--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----a162924073ad--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----a162924073ad--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----a162924073ad--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----a162924073ad--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@kunanba?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@kunanba?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Angela Kunanbaeva"}, {"url": "https://medium.com/@kunanba/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "40 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F5ffa1b2f4da5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fscrape-cdc-for-covid-19-cases-a162924073ad&user=Angela+Kunanbaeva&userId=5ffa1b2f4da5&source=post_page-5ffa1b2f4da5--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fde7514cb14b1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fscrape-cdc-for-covid-19-cases-a162924073ad&newsletterV3=5ffa1b2f4da5&newsletterV3Id=de7514cb14b1&user=Angela+Kunanbaeva&userId=5ffa1b2f4da5&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}