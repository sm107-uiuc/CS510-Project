{"url": "https://towardsdatascience.com/animating-regression-models-in-r-using-broom-and-ggplot2-da798e6638be", "time": 1682994057.198726, "path": "towardsdatascience.com/animating-regression-models-in-r-using-broom-and-ggplot2-da798e6638be/", "webpage": {"metadata": {"title": "Animating regression models in R using broom and ggplot2 | by Chris Bow | Towards Data Science", "h1": "Animating regression models in R using broom and ggplot2", "description": "My first article in Towards Data Science was the result of a little exercise I set myself to keep the little grey cells ticking over. This is something of a similar exercise, albeit a bit more\u2026"}, "outgoing_paragraph_urls": [{"url": "https://towardsdatascience.com/keeping-your-data-science-skills-primed-ready-and-growing-dc6977a4f32a", "anchor_text": "first article in Towards Data Science", "paragraph_index": 0}, {"url": "https://twitter.com/chrisBowdata", "anchor_text": "follow Chris on Twitter", "paragraph_index": 5}, {"url": "https://www.case.org/Samples_Research_and_Tools/Benchmarking_and_Research/Surveys_and_Studies/Ross-CASE_Survey/Ross-CASE_2018_Report.html", "anchor_text": "Ross-CASE reports", "paragraph_index": 8}, {"url": "https://blog.markgrowth.com/the-roas-might-look-like-0-but-is-your-display-campaign-actually-working-192f5e132f2a", "anchor_text": "parallel slopes", "paragraph_index": 17}, {"url": "https://github.com/chrisBow/animated-case", "anchor_text": "ound on GitHub", "paragraph_index": 21}], "all_paragraphs": ["My first article in Towards Data Science was the result of a little exercise I set myself to keep the little grey cells ticking over. This is something of a similar exercise, albeit a bit more relevant to a project I\u2019ve been working on. As I spend my time working in a marketing department, I have to get used to wearing [at least] two hats.", "Often, these hats are mutually exclusive. In this case, the disagreement is in the form of another piece of animated data visualisation. As with the animated Scottish rugby champions graph, this example doesn\u2019t really benefit from adding the animation as another dimension to the plot.", "The graph is simply to show the trends for some metrics to do with UK university fundraising over time. I only really need x and y to represent the value and the year, but where\u2019s the fun in that? That\u2019s the sort of thing we can plot ridiculously easily using ggplot2:", "Why not use this as a bit more of a learning exercise? I\u2019ve played about with the gganimate package before, but never really spent any quality time with it. This seemed like a good opportunity.", "And that brings us on to the butting of hats. I don\u2019t think that an animated plot is the best way to represent these data. I don\u2019t know if it technically counts as non-data ink, but you get the idea: it\u2019s just not necessary. If x and y were already taken and I wanted to show how those two values changed over time, animation presents those changes in a way that\u2019s easy to understand. In this case, it\u2019s redundant.", "For further adventures where marketing meets data science, follow Chris on Twitter.", "However, a lot of graphs are made not to represent the data as simply and accurately as possible, but to get attention. In many cases, particularly in the world of the marketing agency, there is a tendency to turn what could be presented as a clear, straightforward bar chart, into a full-on novelty infographic. Tourist footfall over time represented as a cartoon foot with the size of the toe representing the value for each year anyone? But that\u2019s a story for another day.", "The truth is, animation catches the eye, and it can increase the dwell time, allowing the reader time to take in the title, axes labelling, legends and the message. Possibly. As well as increasing exposure to any branding. I do have some principles though, so I wouldn\u2019t ever intentionally set out to make a graph that was misleading. Playing with the colour schemes and layout to make it look a bit sleeker? Absolutely, but the data has to come first.", "I had been doing some university fundraising work looking at historic Ross-CASE reports, and thought it would be interesting to look at how some of the key performance indicators had changed over time. I\u2019d looked at some of the main ones before, but hadn\u2019t looked at a few others, and thought it might be interesting to look at them together. And it would be some good ggplot2 and gganimate practice. So let us begin.", "n.b. As the aim of this exercise was to compare underlying trends and spend more time with gganimate, not to produce a publication-quality figure, hence a somewhat \u2018cavalier\u2019 attitude to y axis labelling!", "As ever, importing my pre-made dataset and having a quick look was first on the agenda:", "Okay, we have a dataset that seems to look how I would expect it to from previous work, so hopefully I\u2019ve not screwed things up at the first hurdle. Onward!", "As the values for contactable_alumni were a couple of orders of magnitude away from the rest of the values, I created a new column where those were multiplied by 100 to put them on the same scale. I then gathered the data into a tidy, \u2018long\u2019, format:", "With the data transformed, we were ready to create our first animated plot, remembering to start by filtering out out original contactable_alumni variable:", "And we\u2019re off. But is that as good as it could be? I don\u2019t think so. The main thing for me is that, as we\u2019re interested in trends, we should have trendlines on there as well. How to go about that\u2026?", "To do that in a non-animated way, we\u2019d simply add a geom_smooth() to our plotting code:", "But can we simply do that and add the transition_reveal() line to animate that in the same way? Not in any convenient way I could find and believe me, there were some impressive plots produced during the course of my failures. There may very well be an easy way to do it with geom_smooth(), but five minutes searching Stackoverflow didn\u2019t find it, and I had another idea. My next thought was to create the trendlines as a separate stage in the process, building another dataframe from which to build my animated plot:", "Oh dear, of course, that hasn\u2019t worked. Well, the animation part has worked exactly as we wanted, but the trendlines are wrong. Due to the way we built the model, we have have created a parallel slopes type of linear regression. In doing that, we\u2019ve lost the key finding of the data: that the number of fundraising staff is rising faster than the acquisition of new funds.", "In order to get what we want, we\u2019ll have to build a separate model for each KPI. This is very easy to do using tidy principles in R. By grouping by KPI and nesting in a tibble, we can build multiple models quickly and easily using the map function from the purrr package.", "An alternative would be to create a separate dataframe per KPI, build and augment models separately, then bind them back together. That\u2019s a great solution, but not really scalable. That said, it\u2019s what I did first before I decided to bite the bullet and try and do it the \u2018proper\u2019 way:", "And that\u2019s about what we want. I\u2019ve added a separate geom_point() for a bit of aesthetic niceness, and there are a few more things we could do to make things a bit prettier, but, generally, mission accomplished and knowledge reinforced!", "The code in this article can be found on GitHub.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Former immunologist turned data scientist and marketer. Proponent of applying scientific thinking to non-scientific problems. Consultant for Cairney & Company."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fda798e6638be&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fanimating-regression-models-in-r-using-broom-and-ggplot2-da798e6638be&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fanimating-regression-models-in-r-using-broom-and-ggplot2-da798e6638be&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fanimating-regression-models-in-r-using-broom-and-ggplot2-da798e6638be&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fanimating-regression-models-in-r-using-broom-and-ggplot2-da798e6638be&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----da798e6638be--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----da798e6638be--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@chrisBow?source=post_page-----da798e6638be--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@chrisBow?source=post_page-----da798e6638be--------------------------------", "anchor_text": "Chris Bow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F3e5d439e810b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fanimating-regression-models-in-r-using-broom-and-ggplot2-da798e6638be&user=Chris+Bow&userId=3e5d439e810b&source=post_page-3e5d439e810b----da798e6638be---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fda798e6638be&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fanimating-regression-models-in-r-using-broom-and-ggplot2-da798e6638be&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fda798e6638be&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fanimating-regression-models-in-r-using-broom-and-ggplot2-da798e6638be&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://towardsdatascience.com/keeping-your-data-science-skills-primed-ready-and-growing-dc6977a4f32a", "anchor_text": "first article in Towards Data Science"}, {"url": "https://twitter.com/chrisBowdata", "anchor_text": "follow Chris on Twitter"}, {"url": "https://www.case.org/Samples_Research_and_Tools/Benchmarking_and_Research/Surveys_and_Studies/Ross-CASE_Survey/Ross-CASE_2018_Report.html", "anchor_text": "Ross-CASE reports"}, {"url": "https://blog.markgrowth.com/the-roas-might-look-like-0-but-is-your-display-campaign-actually-working-192f5e132f2a", "anchor_text": "parallel slopes"}, {"url": "https://twitter.com/chrisBowdata", "anchor_text": "ollow Chris on Twitter"}, {"url": "https://github.com/chrisBow/animated-case", "anchor_text": "ound on GitHub"}, {"url": "https://medium.com/tag/data-science?source=post_page-----da798e6638be---------------data_science-----------------", "anchor_text": "Data Science"}, {"url": "https://medium.com/tag/data-visualization?source=post_page-----da798e6638be---------------data_visualization-----------------", "anchor_text": "Data Visualization"}, {"url": "https://medium.com/tag/higher-education?source=post_page-----da798e6638be---------------higher_education-----------------", "anchor_text": "Higher Education"}, {"url": "https://medium.com/tag/statistics?source=post_page-----da798e6638be---------------statistics-----------------", "anchor_text": "Statistics"}, {"url": "https://medium.com/tag/rstudio?source=post_page-----da798e6638be---------------rstudio-----------------", "anchor_text": "Rstudio"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fda798e6638be&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fanimating-regression-models-in-r-using-broom-and-ggplot2-da798e6638be&user=Chris+Bow&userId=3e5d439e810b&source=-----da798e6638be---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fda798e6638be&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fanimating-regression-models-in-r-using-broom-and-ggplot2-da798e6638be&user=Chris+Bow&userId=3e5d439e810b&source=-----da798e6638be---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fda798e6638be&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fanimating-regression-models-in-r-using-broom-and-ggplot2-da798e6638be&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----da798e6638be--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fda798e6638be&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fanimating-regression-models-in-r-using-broom-and-ggplot2-da798e6638be&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----da798e6638be---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----da798e6638be--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----da798e6638be--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----da798e6638be--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----da798e6638be--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----da798e6638be--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----da798e6638be--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----da798e6638be--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----da798e6638be--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@chrisBow?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@chrisBow?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Chris Bow"}, {"url": "https://medium.com/@chrisBow/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "472 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F3e5d439e810b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fanimating-regression-models-in-r-using-broom-and-ggplot2-da798e6638be&user=Chris+Bow&userId=3e5d439e810b&source=post_page-3e5d439e810b--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fusers%2F3e5d439e810b%2Flazily-enable-writer-subscription&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fanimating-regression-models-in-r-using-broom-and-ggplot2-da798e6638be&user=Chris+Bow&userId=3e5d439e810b&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}