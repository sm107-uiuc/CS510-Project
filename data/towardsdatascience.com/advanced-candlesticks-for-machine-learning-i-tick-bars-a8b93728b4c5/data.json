{"url": "https://towardsdatascience.com/advanced-candlesticks-for-machine-learning-i-tick-bars-a8b93728b4c5", "time": 1682995936.017022, "path": "towardsdatascience.com/advanced-candlesticks-for-machine-learning-i-tick-bars-a8b93728b4c5/", "webpage": {"metadata": {"title": "Advanced candlesticks for machine learning (i): tick bars | by Gerard Mart\u00ednez | Towards Data Science", "h1": "Advanced candlesticks for machine learning (i): tick bars", "description": "In a previous article we explored why traditional time-based candlesticks are not the most suitable price data format if we are planning to train a machine learning (ML) algorithm. Namely: (1)\u2026"}, "outgoing_paragraph_urls": [{"url": "https://www.investopedia.com/terms/t/tick.asp", "anchor_text": "investopedia", "paragraph_index": 2}, {"url": "https://cryptodatum.io", "anchor_text": "CryptoDatum.io,", "paragraph_index": 10}, {"url": "https://www3.nd.edu/~rwilliam/stats2/l26.pdf", "anchor_text": "here", "paragraph_index": 12}, {"url": "https://www.dummies.com/education/economics/econometrics/patterns-of-autocorrelation/", "anchor_text": "here", "paragraph_index": 15}, {"url": "https://en.wikipedia.org/wiki/Skewness", "anchor_text": "skewness", "paragraph_index": 21}, {"url": "https://en.wikipedia.org/wiki/Kurtosis", "anchor_text": "kurtosis", "paragraph_index": 21}, {"url": "https://cryptodatum.io", "anchor_text": "CryptoDatum.io", "paragraph_index": 26}, {"url": "https://cryptodatum.io", "anchor_text": "CryptoDatum.io", "paragraph_index": 30}, {"url": "https://cryptodatum.io.", "anchor_text": "https://cryptodatum.io", "paragraph_index": 30}, {"url": "http://CryptoDatum.io", "anchor_text": "CryptoDatum.io", "paragraph_index": 32}], "all_paragraphs": ["In a previous article we explored why traditional time-based candlesticks are not the most suitable price data format if we are planning to train a machine learning (ML) algorithm. Namely: (1) time-based candlesticks over-sample low activity periods and under-sample high activity periods, (2) markets are increasingly controlled by trading algorithms that no longer follow any human-related daylight cycle, (3) the use of time-based candlesticks is ubiquitous among traders and trading bots, which increases the competition and, as we will see in this article, (4) time-based candlesticks offer poorer statistical properties. Find the link to the article below in case you missed the update.", "In this article we will explore one of the alternative bars that were proposed: tick bars. Let\u2019s dig into them.", "There are at least two main definitions of what a tick is. Quoting investopedia:", "A tick is a measure of the minimum upward or downward movement in the price of a security. A tick can also refer to the change in the price of a security from trade to trade.", "In the case of tick bars, the definition we care about is the second one: in the scope of tick bars, a tick is essentially a trade and the price at which the trade was made in the exchange. A tick bar or a tick candle is simply the aggregation of a predefined number of ticks. For instance, if we want to generate 100-tick bars we must keep a store of all trades and every time we \u201creceive\u201d 100 trades from the exchange we build a bar or candlestick. Candlesticks are then built by calculating the Open, High, Low, Close and Volume values (they are usually shortened to OHLCV).", "The open and close values correspond to the price of the first and last trade, respectively. The high and the low are the max and min price of all the trades in the candle (may overlap with the open and close). Finally the volume is the sum of all exchanged assets (for instance in the ETH-USD pair, the volume is measured as the number of Ethereums exchanged during the candle). The convention is that when a candle closes at a higher price than its open price we color them green (or keep it empty) while if the close price is lower than the open price we then color them red (or filled with black).", "Here\u2019s a very simple but fast Python implementation to generate tick candlesticks:", "And here a visualization of how the tick bars look in comparison to standard time-based candlesticks. In this case we show 4-hour and 1000-tick bars for the BTC-USD trading pair, as well as the price of all trades comprised between 21\u201301\u20132017 and 02\u201320\u20132017. Notice that for the candlesticks we also show an asterisk every time we sample a bar.", "Two main observations about these plots:", "So what about their statistical properties? Are they any better than their traditional time-based counterparts?", "We\u2019ll be looking at two different properties: (1) serial correlation and (2) normality of returns for each of the 15 cryptocurrency pairs offered in CryptoDatum.io, including all historical bars of the Bitfinex exchange, and for each of the time-based and tick candle-stick sizes:", "Serial correlation measures how much each value of a time series is correlated with the following one (for lag=1) or between any value i and any other value i+n (lag=n). In our case, we will calculate the serial correlation of the log returns, which are calculated as the first-difference of the log of candles close prices.", "Ideally, each data point of our series should be an independent observation. If serial correlation exists it means that they are not independent (they depend on each other at lag=1 or higher) and this will have consequences when building regressive models because the errors we will observe in our regression will be smaller or bigger than the true errors, which will mislead our interpretations and predictions. You can see a very visual explanation of the problem here.", "In order to measure the serial correlation we will calculate the Pearson correlation of the series respect the shifted self (lag=1, a.k.a. first-order correlation). Here are the results:", "It turns out that tick bars (labelled as tick-*) have generally lower auto-correlation than time-based candlesticks (labelled as time-*) \u2014 this is, the Pearson auto-correlation is closer to 0. The difference seems to be less evident for the bigger time bars (4h, 12h, 1d) but interestingly even the smallest tick bars (50-tick and 100-tick) yield a very low auto-correlation, which does not hold true for the smaller time-bars (1-min, 5-min).", "Finally, is interesting to see how several cryptocurrencies (BTC, LTC, ZEC and ZIL) express fairly strong negative auto-correlation in few of the time-bars. Roberto Pedace comments here about negative auto-correlations:", "Autocorrelation, also known as serial correlation, may exist in a regression model when the order of the observations in the data is relevant or important. In other words, with time-series (and sometimes panel or logitudinal) data, autocorrelation is a concern. [\u2026] No autocorrelation refers to a situation in which no identifiable relationship exists between the values of the error term. [\u2026] Although unlikely, negative autocorrelation is also possible. Negative autocorrelation occurs when an error of a given sign tends to be followed by an error of the opposite sign. For instance, positive errors are usually followed by negative errors and negative errors are usually followed by positive errors.", "We will perform an additional statistic test called the Durbin-Watson (DB) test that also diagnoses the existence of serial correlation. The DB statistic lies in the 0\u20134 range and its interpretation is the following:", "Essentially, the closest to 2, the lowest the serial correlation is. Here are the results:", "Results are in line with the Pearson autocorrelation test, which gives strength to the narrative that tick bars display a slightly lower autocorrelation than time-based candlesticks.", "Another statistic we can look at is the normality of returns, this is whether the distribution of our log returns follows or not a normal (a.k.a Gaussian) distribution.", "There are several tests we can run to check the normality \u2014 we will perform 2 of them: the Jarque-Bera test, which tests whether the data has the skewness and kurtosis matching a normal distribution, and the Shapiro-Wilk test, which is one of the most classical tests to check if a sample follows a Gaussian distribution.", "In both cases, the null hypothesis is that the sample follows a normality. If the null hypothesis is rejected (p-value lower than the significance level \u2014 usually < 0.05) there is compelling evidence that the sample does not follow a normal distribution.", "Let\u2019s look at the p-values for the Jarque-Bera first:", "The results are almost unanimous: log returns do not follow a Gaussian distribution (most p-values < 0.05) . Two cryptocurrency pairs (Stellar and Zilliqa) seem to actually follow a Gaussian if we set our significance level at 0.05. Let\u2019s take a look at their distributions (kernel density estimates):", "Fair enough, some of them could look Gaussian (at least visually). However, notice that the number of samples (n) is very small (e.g. for XLM-USD candle_tick_1000 n=195) so I suspect that one of the reasons may just be the lack of sampling, which provides Jarque-Bera not enough evidence to reject the null hypothesis of normality.", "In fact, a quick look at the CryptoDatum.io database shows that XLM-USD and ZIL-USD trading pairs were just released May and July last year (2018), respectively, and they seem to have quite low volume...", "Let\u2019s now run the Shapiro-Wilk test to see if it agrees with the previous results:", "Damn, Shapiro, didn\u2019t they teach you not to copy during a test at school? Non-normality of returns seems to be the rule regardless of bar type.", "Thanks for reading. In the following weeks we will be talking about other type of advanced bars such as volume bars, dollar bars and (my favorite) imbalance bars. So, if you liked this article: stay tuned!", "This project is part of our research at CryptoDatum.io, a cryptocurrency data API that aims to provide plug-and-play datasets to train machine learning algorithms. If you liked the data we showed in this article, get your free API key and play with it yourself at https://cryptodatum.io", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Trading strategy developer at Primer Quant Firm \u2014 Founder of CryptoDatum.io"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fa8b93728b4c5&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fadvanced-candlesticks-for-machine-learning-i-tick-bars-a8b93728b4c5&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fadvanced-candlesticks-for-machine-learning-i-tick-bars-a8b93728b4c5&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fadvanced-candlesticks-for-machine-learning-i-tick-bars-a8b93728b4c5&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fadvanced-candlesticks-for-machine-learning-i-tick-bars-a8b93728b4c5&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----a8b93728b4c5--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----a8b93728b4c5--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@gerardmartnez?source=post_page-----a8b93728b4c5--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@gerardmartnez?source=post_page-----a8b93728b4c5--------------------------------", "anchor_text": "Gerard Mart\u00ednez"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fa21c8bce638f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fadvanced-candlesticks-for-machine-learning-i-tick-bars-a8b93728b4c5&user=Gerard+Mart%C3%ADnez&userId=a21c8bce638f&source=post_page-a21c8bce638f----a8b93728b4c5---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fa8b93728b4c5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fadvanced-candlesticks-for-machine-learning-i-tick-bars-a8b93728b4c5&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fa8b93728b4c5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fadvanced-candlesticks-for-machine-learning-i-tick-bars-a8b93728b4c5&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://towardsdatascience.com/financial-machine-learning-practitioners-have-been-using-the-wrong-candlesticks-heres-why-7a3fb85b5629", "anchor_text": "Financial Machine Learning practitioners have been using the wrong candlesticks: here\u2019s whyIn this article we will explore why traditional time-based candlesticks are an inefficient method to aggregate price\u2026towardsdatascience.com"}, {"url": "https://www.investopedia.com/terms/t/tick.asp", "anchor_text": "investopedia"}, {"url": "https://cryptodatum.io", "anchor_text": "CryptoDatum.io,"}, {"url": "https://www3.nd.edu/~rwilliam/stats2/l26.pdf", "anchor_text": "here"}, {"url": "https://www.dummies.com/education/economics/econometrics/patterns-of-autocorrelation/", "anchor_text": "here"}, {"url": "https://en.wikipedia.org/wiki/Skewness", "anchor_text": "skewness"}, {"url": "https://en.wikipedia.org/wiki/Kurtosis", "anchor_text": "kurtosis"}, {"url": "https://cryptodatum.io", "anchor_text": "CryptoDatum.io"}, {"url": "https://cryptodatum.io", "anchor_text": "CryptoDatum.io"}, {"url": "https://cryptodatum.io.", "anchor_text": "https://cryptodatum.io"}, {"url": "https://cryptodatum.io", "anchor_text": ""}, {"url": "https://medium.com/tag/cryptocurrency?source=post_page-----a8b93728b4c5---------------cryptocurrency-----------------", "anchor_text": "Cryptocurrency"}, {"url": "https://medium.com/tag/towards-data-science?source=post_page-----a8b93728b4c5---------------towards_data_science-----------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/tag/python?source=post_page-----a8b93728b4c5---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/finance?source=post_page-----a8b93728b4c5---------------finance-----------------", "anchor_text": "Finance"}, {"url": "https://medium.com/tag/machine-learning?source=post_page-----a8b93728b4c5---------------machine_learning-----------------", "anchor_text": "Machine Learning"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fa8b93728b4c5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fadvanced-candlesticks-for-machine-learning-i-tick-bars-a8b93728b4c5&user=Gerard+Mart%C3%ADnez&userId=a21c8bce638f&source=-----a8b93728b4c5---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fa8b93728b4c5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fadvanced-candlesticks-for-machine-learning-i-tick-bars-a8b93728b4c5&user=Gerard+Mart%C3%ADnez&userId=a21c8bce638f&source=-----a8b93728b4c5---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fa8b93728b4c5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fadvanced-candlesticks-for-machine-learning-i-tick-bars-a8b93728b4c5&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----a8b93728b4c5--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fa8b93728b4c5&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fadvanced-candlesticks-for-machine-learning-i-tick-bars-a8b93728b4c5&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----a8b93728b4c5---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----a8b93728b4c5--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----a8b93728b4c5--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----a8b93728b4c5--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----a8b93728b4c5--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----a8b93728b4c5--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----a8b93728b4c5--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----a8b93728b4c5--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----a8b93728b4c5--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@gerardmartnez?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@gerardmartnez?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Gerard Mart\u00ednez"}, {"url": "https://medium.com/@gerardmartnez/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "1.4K Followers"}, {"url": "http://CryptoDatum.io", "anchor_text": "CryptoDatum.io"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fa21c8bce638f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fadvanced-candlesticks-for-machine-learning-i-tick-bars-a8b93728b4c5&user=Gerard+Mart%C3%ADnez&userId=a21c8bce638f&source=post_page-a21c8bce638f--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F4ae84817a9e0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fadvanced-candlesticks-for-machine-learning-i-tick-bars-a8b93728b4c5&newsletterV3=a21c8bce638f&newsletterV3Id=4ae84817a9e0&user=Gerard+Mart%C3%ADnez&userId=a21c8bce638f&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}