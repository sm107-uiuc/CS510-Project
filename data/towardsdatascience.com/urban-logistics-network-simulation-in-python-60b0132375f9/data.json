{"url": "https://towardsdatascience.com/urban-logistics-network-simulation-in-python-60b0132375f9", "time": 1683005974.232773, "path": "towardsdatascience.com/urban-logistics-network-simulation-in-python-60b0132375f9/", "webpage": {"metadata": {"title": "Urban Logistics Network Simulation in Python | by Wladimir Hofmann | Towards Data Science", "h1": "Urban Logistics Network Simulation in Python", "description": "OSM-based logistics network simulation modelling with Python, OSMnx, SimPy, and Leaflet.js"}, "outgoing_paragraph_urls": [{"url": "https://www.anylogic.com/", "anchor_text": "Anylogic", "paragraph_index": 0}, {"url": "https://fladdimir.github.io/publication/i3m2017/", "anchor_text": "project", "paragraph_index": 0}, {"url": "https://www.anylogistix.com/", "anchor_text": "anyLogistix", "paragraph_index": 1}, {"url": "http://www.die-patisserie.de/de_DE", "anchor_text": "Die Patisserie", "paragraph_index": 4}, {"url": "https://www.hamburg.de/altona/fundbuero/", "anchor_text": "Zentrales Fundb\u00fcro", "paragraph_index": 5}, {"url": "https://www.monkeys-hamburg.de/", "anchor_text": "Monkeys Music Club", "paragraph_index": 5}, {"url": "https://www.carlsen.de/node/18749", "anchor_text": "Carlsen Verlag", "paragraph_index": 5}, {"url": "https://github.com/gboeing/osmnx", "anchor_text": "OSMnx", "paragraph_index": 9}, {"url": "https://networkx.github.io/", "anchor_text": "networkx", "paragraph_index": 9}, {"url": "https://pypi.org/project/casymda/", "anchor_text": "Casymda", "paragraph_index": 13}, {"url": "https://pypi.org/project/simpy/", "anchor_text": "SimPy", "paragraph_index": 13}, {"url": "https://flask.palletsprojects.com/en/1.1.x/", "anchor_text": "flask", "paragraph_index": 15}, {"url": "https://fladdimir.github.io/post/casymda/", "anchor_text": "this post", "paragraph_index": 15}, {"url": "https://leafletjs.com/", "anchor_text": "Leaflet", "paragraph_index": 16}, {"url": "https://github.com/bbecquet/Leaflet.RotatedMarker", "anchor_text": "Rotated.Marker-plugin", "paragraph_index": 16}, {"url": "http://localhost:5000/", "anchor_text": "http://localhost:5000", "paragraph_index": 17}, {"url": "https://fladdimir.github.io/", "anchor_text": "https://fladdimir.github.io/", "paragraph_index": 20}], "all_paragraphs": ["Anylogic is probably one of the most popular simulation packages for logistics applications which is out there. A really nice and quite unique feature is the possibility to include GIS-maps into simulation models. It allows to place simulated elements on a map and move them along existing routes, based on real spatial information. This is cool because it can be used to simulate entire supply chains, including means to provide a great, tangible visualization for complex problems. That project, for example, uses Anylogic to evaluate different designs and delivery schemes for a more sustainable urban logistics network in the city center of Grenoble in France. The data-driven simulation model allows calculating KPIs for various transshipment node locations and different types of transport equipment in a multi-tier supply-chain network.", "Following the success of the feature, the guys from Anylogic even built anyLogistix, combining pre-built & customizable simulation models with a commercial solver for integrated supply chain planning & optimization.", "Obviously, those commercial features come at a price, so let\u2019s see whether this kind of model can also be realized with different means.", "The simulation model of this post will be based on a mini-case-study.", "Facing the fact that humanity gets more and more used to home-delivery of even everyday necessities, the small (but awesome) French bakery Die Patisserie in Hamburg-Altona wants to deliver sweet pastries to nearby customers.", "3 major purchasers were identified: the lost-and-found office Zentrales Fundb\u00fcro, Monkeys Music Club, and the publishing house Carlsen Verlag.", "Coordinates of the different locations (latitude, longitude):", "For the sake of simplicity, the order in which nodes are visited is assumed to be fixed. The tour starts & ends at the patisserie (1.):", "The simulation model for the simplistic scenario is created with:", "The awesome OSMnx package provides the possibility to obtain a networkx-graph representation of a street-network from OpenStreetMap with a single line of code. A relevant section for our scenario can be obtained by specifying center and distance for OSM-nodes to be included:", "OSMnx lets us pick the nearest OSM-node for each of the 4 locations of the tour, and also offers convenient means to plot the network. Blue dots represent OSM-nodes, connected by edges. The 4 relevant locations are shown in red:", "To prepare all information needed by the simulation model, now all shortest paths between the 4 relevant nodes in the network are computed with networkx, and detailed information on all piece-wise linear segments for each route is included. The results are pickled and saved to disk to avoid fetching and recalculation for each run of the model (and of course its kind to keep the load for the OSM-servers as low as possible).", "The above-described approach could be improved, e.g. by automatically determining the area to be loaded from the given relevant locations. Instead of just picking the closest OSM-node for each relevant location, it would be more precise to first go for the closest edge in the network. And as the network size grows, it might be a better idea to directly query the shortest path between relevant nodes from the OSM-server, instead of fetching the network as a whole (the way Anylogic seems to do it).", "Casymda provides block-based modelling of discrete-event-simulation models on top of SimPy.Our model can be characterized by a simple process:", "A truck-entity is created at a parameterized Source and then processed at a custom DriveTour-block, which contains the logic for elapsing time according to the length of a route and the movement speed of the truck. It also provides the option to calculate intermediate entity positions for animation (at an interval depending on the real-time factor at which the simulation is running). The simulation model might as well be run without scheduling any animation-related behavior to minimize the execution time. The nodes to be visited and their order are specified via the text-annotation stops=[\"ZFB\", \"MMC\", \"CAV\"].", "The animation is implemented by exposing information and resources via flask (similar to the tile-map-based animation described in this post).", "To visualize the location of nodes and entities on a map, Leaflet only requires a few lines. For setting the rotation angle, there is a Rotated.Marker-plugin serving our needs.", "To run the simulation via http://localhost:5000 from the cloned repository:", "The screencast below shows a complete tour of a truck visiting all nodes in the defined order (Patisserie \u2014 Lost-and-found \u2014 Monkey\u2019s \u2014 Carlsen Publishing \u2014 Patisserie). One-way streets are correctly taken into account, e.g. when moving from Monkeys Music Club (3., right-most node) to Carlsen Verlag (4., left-most node) along the V\u00f6lckersstra\u00dfe.", "Your home for data science. A Medium publication sharing concepts, ideas and codes.", "Software Developer from Hamburg, Germany \u2014 https://fladdimir.github.io/"], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F60b0132375f9&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Furban-logistics-network-simulation-in-python-60b0132375f9&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Furban-logistics-network-simulation-in-python-60b0132375f9&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Furban-logistics-network-simulation-in-python-60b0132375f9&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Furban-logistics-network-simulation-in-python-60b0132375f9&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----60b0132375f9--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----60b0132375f9--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@fladdi.mir?source=post_page-----60b0132375f9--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@fladdi.mir?source=post_page-----60b0132375f9--------------------------------", "anchor_text": "Wladimir Hofmann"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F8616a4cedfb1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Furban-logistics-network-simulation-in-python-60b0132375f9&user=Wladimir+Hofmann&userId=8616a4cedfb1&source=post_page-8616a4cedfb1----60b0132375f9---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F60b0132375f9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Furban-logistics-network-simulation-in-python-60b0132375f9&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F60b0132375f9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Furban-logistics-network-simulation-in-python-60b0132375f9&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://www.anylogic.com/", "anchor_text": "Anylogic"}, {"url": "https://fladdimir.github.io/publication/i3m2017/", "anchor_text": "project"}, {"url": "https://www.anylogistix.com/", "anchor_text": "anyLogistix"}, {"url": "https://github.com/fladdimir/csa-streetmap", "anchor_text": "Get the repo from github."}, {"url": "http://www.die-patisserie.de/de_DE", "anchor_text": "Die Patisserie"}, {"url": "https://www.hamburg.de/altona/fundbuero/", "anchor_text": "Zentrales Fundb\u00fcro"}, {"url": "https://www.monkeys-hamburg.de/", "anchor_text": "Monkeys Music Club"}, {"url": "https://www.carlsen.de/node/18749", "anchor_text": "Carlsen Verlag"}, {"url": "https://github.com/gboeing/osmnx", "anchor_text": "OSMnx"}, {"url": "https://networkx.github.io/", "anchor_text": "networkx"}, {"url": "https://pypi.org/project/casymda/", "anchor_text": "Casymda"}, {"url": "https://pypi.org/project/simpy/", "anchor_text": "SimPy"}, {"url": "https://flask.palletsprojects.com/en/1.1.x/", "anchor_text": "flask"}, {"url": "https://fladdimir.github.io/post/casymda/", "anchor_text": "this post"}, {"url": "https://leafletjs.com/", "anchor_text": "Leaflet"}, {"url": "https://github.com/bbecquet/Leaflet.RotatedMarker", "anchor_text": "Rotated.Marker-plugin"}, {"url": "http://localhost:5000/", "anchor_text": "http://localhost:5000"}, {"url": "https://medium.com/tag/discrete-event-simulation?source=post_page-----60b0132375f9---------------discrete_event_simulation-----------------", "anchor_text": "Discrete Event Simulation"}, {"url": "https://medium.com/tag/python?source=post_page-----60b0132375f9---------------python-----------------", "anchor_text": "Python"}, {"url": "https://medium.com/tag/animation?source=post_page-----60b0132375f9---------------animation-----------------", "anchor_text": "Animation"}, {"url": "https://medium.com/tag/openstreetmap?source=post_page-----60b0132375f9---------------openstreetmap-----------------", "anchor_text": "Openstreetmap"}, {"url": "https://medium.com/tag/urban-logistics?source=post_page-----60b0132375f9---------------urban_logistics-----------------", "anchor_text": "Urban Logistics"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F60b0132375f9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Furban-logistics-network-simulation-in-python-60b0132375f9&user=Wladimir+Hofmann&userId=8616a4cedfb1&source=-----60b0132375f9---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F60b0132375f9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Furban-logistics-network-simulation-in-python-60b0132375f9&user=Wladimir+Hofmann&userId=8616a4cedfb1&source=-----60b0132375f9---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F60b0132375f9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Furban-logistics-network-simulation-in-python-60b0132375f9&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----60b0132375f9--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2F60b0132375f9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Furban-logistics-network-simulation-in-python-60b0132375f9&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----60b0132375f9---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----60b0132375f9--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----60b0132375f9--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----60b0132375f9--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----60b0132375f9--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----60b0132375f9--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----60b0132375f9--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----60b0132375f9--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----60b0132375f9--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@fladdi.mir?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@fladdi.mir?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Wladimir Hofmann"}, {"url": "https://medium.com/@fladdi.mir/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "43 Followers"}, {"url": "https://fladdimir.github.io/", "anchor_text": "https://fladdimir.github.io/"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F8616a4cedfb1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Furban-logistics-network-simulation-in-python-60b0132375f9&user=Wladimir+Hofmann&userId=8616a4cedfb1&source=post_page-8616a4cedfb1--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F1bfefda0b9b9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Furban-logistics-network-simulation-in-python-60b0132375f9&newsletterV3=8616a4cedfb1&newsletterV3Id=1bfefda0b9b9&user=Wladimir+Hofmann&userId=8616a4cedfb1&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}