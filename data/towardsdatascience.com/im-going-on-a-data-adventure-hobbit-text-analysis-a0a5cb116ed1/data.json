{"url": "https://towardsdatascience.com/im-going-on-a-data-adventure-hobbit-text-analysis-a0a5cb116ed1", "time": 1683006193.03685, "path": "towardsdatascience.com/im-going-on-a-data-adventure-hobbit-text-analysis-a0a5cb116ed1/", "webpage": {"metadata": {"title": "I\u2019m going on a (data) adventure! \u2014 Hobbit text analysis | by Dorota Mierzwa | Towards Data Science", "h1": "I\u2019m going on a (data) adventure! \u2014 Hobbit text analysis", "description": "In this article I\u2019m analysing the full text of J. R. R. Tolkien book \u2014 The Hobbit Or There And Back Again. My main focus is on extracting information regarding book sentiment as well as getting\u2026"}, "outgoing_paragraph_urls": [{"url": "http://countwordsworth.com/blog/what-is-a-good-average-sentence-length/", "anchor_text": "here", "paragraph_index": 2}, {"url": "https://github.com/cjhutto/vaderSentiment/blob/master/vaderSentiment/vader_lexicon.txt", "anchor_text": "lexicon", "paragraph_index": 3}, {"url": "https://github.com/dorotamierzwa/ministryofdata/blob/master/Hobbit%20Or%20There%20And%20Back%20Again%20-%20Text%20analysis.ipynb", "anchor_text": "here", "paragraph_index": 27}, {"url": "https://ministryofdata.fandom.com/wiki/I%27m_going_on_a_%28data%29_adventure%21", "anchor_text": "Ministry of data wiki", "paragraph_index": 28}], "all_paragraphs": ["In this article I\u2019m analysing the full text of J. R. R. Tolkien book \u2014 The Hobbit Or There And Back Again. My main focus is on extracting information regarding book sentiment as well as getting comfortable with one of NLP\u2019s techniques \u2014 text chunking. We\u2019re going to answer who are the top characters of the book, how the sentiment changes with each chapter as well as \u2014 which dwarf pair has the most occurrences together!", "A quick overall look at the data is always due. It helps to get to know what we\u2019re dealing with, verify data quality, but also allows for some initial insights. By tokenizing sentences I got their total number to be 4915. They are split into 18 chapters.", "Sentence count per chapter varies greatly. The shortest chapter being 150 sentences long, the longest \u2014 more than triple that. We can see that \u201cplot thickens\u201d gradually, when chapters get longer from the third to the tenth. Then with two sharp changes, their length decreases towards the end. Looking at sentence length there\u2019s much more stability. The biggest difference between the lowest average and highest average sentence length is around 30% (chapters with shortest sentences averaging around 45 and longest around 60 words). If we look closely though, the slight differences show a similar pattern as chapter length \u2014 the longest sentences are in chapter eighth to tenth. The shortest \u2014 third, eleventh, fourteenth and the last one. I did a small research on sentence lengths in prose, and it is recommended (e.g. here) that the average length should be between 15\u201320 words. If we treat this as a reference, Tolkien\u2019s style of writing stands out as visibly different.", "I started with getting a sentiment score for each of the sentences in the text. For this purpose I used an approach called VADER, that\u2019s available in nltk.sentiment package. By calling polarity_scores on SentimentIntensityAnalyzer we get 4 scores: compound, pos, neg and neu. Compound score is a unidimensional, normalised sentence score based on ratings of the words in lexicon. It takes value from -1 to 1. By the standard, a sentence is considered a neutral one with a compound score between -0.05 and 0.05 \u2014 all that\u2019s above is positive, all that\u2019s below is negative. Pos, neg and neu are proportions of text that can be assigned into each category and sum to 1.", "For the purpose of this analysis I will use compound score, but before an analysis \u2014 let\u2019s see how that works on Hobbit text (the four numbers are respectively: compound, pos, neg and neu scores):", "I found the following scoring funny:", "I totally support it, everyone should always have a choice. But on the other hand it shows flaws of this approach. It seems that because this sentence is so short, it got heavily impacted by the presence of \u201cno\u201d, while the sentence itself is a completely neutral statement. Knowing that on average the sentences are at least 40 words long, I feel confident enough to move forward using this approach in the analysis.", "Looking at the above plot, we can see that the novel starts with a positive sentiment, possibly an excitement for the starting journey. It then stays mostly within neutral range, reaching a negative score only once, just before ending again on a positive note.", "Let\u2019s take a more detailed look into each chapter and the percent of sentences by their sentiment. In general, positive sentences cover between 25% and 40%, and negative sentences around 30% of all sentences. Although there are no strong fluctuations in the ratio of each sentiment group by chapter, I found an interesting pattern in the percentage of positive sentences. With one exception, each increase is followed by a decrease in percent of positive sentences, and the other way around. Could it be teasing the reader with the ever changing atmosphere throughout the book? That\u2019s a very long shot, but the plot tells a nice story.", "By definition, chunking takes multitoken sequences in order to segment and label them. The idea gets simple when shown on an example.", "In the first attempt we\u2019ll extract named entities from the text in an automated way \u2014 I know the characters from the book and could list them, but it\u2019s easy to miss something important. This task is made even simpler, as there is a nltk.ne_chunk() function serving this purpose provided in the library.", "For the input we need to prepare a sentence where each word is turned to a tuple of a word and its part-of-speech tag, e.g.:", "When feeding each word of the sentence to nltk.ne_chunk(), we get a nltk.Tree object as a result, which in a clear graphical way shows which part matches the chunk criteria. In this example that means being a NNP \u2014 singular proper noun, which is met by \u201cOin\u201d and \u201cGloin\u201d.", "I found the nltk.ne_chunk to work with my data well enough. Additional work was needed though. Many common words were counted as named entities because of being written with capital letter e.g. \u201cHill\u201d. My idea to limit the list was to remove all the chunks where word\u2019s lemma written in lower case was included in corpora of English words.", "For this purpose I used nltk.corpus.words.words(). It still can be a bit tricky and requires some domain knowledge (i.e. reading the book of course), as for example this method would exclude Bilbo from the named entities.", "There were then only a few words that I decided to remove manually, e.g.: \u201cTralalalally\u201d and \u201cBlimey\u201d. Resulting list of top 15 named entities (based on their occurrence count) from the whole book looks like below.", "We can go a step further and analyse occurrences of the top characters by chapter in which they occurred the most. The three major characters \u2014 Bilbo, Thorin and Gandalf, to no surprise, had their presence throughout the whole story. Although Gandalf was definitely more present in the first chapters. Gollum stands out as a one-chapter character. Smaug on the other hand gets most attention towards the end of the book, still we can see that he\u2019s been announced in the first chapters already.", "We can also match the extracted named entities with sentiment scores of sentences from the previous analysis part and see whether some characters appeared in positive sentences more often than in negative ones.", "Except for Elrond, the distribution of sentiment does not differ greatly between characters. From the previous plot we know that Elrond has a relatively small number of occurrences in the book, so his result might be skewed.", "This does not necessarily say anything about character being bad or good as it turns out. And it also makes sense, as the sentiment score is being calculated both on the base on the things the character says himself, as well as when he is being described. A happy bad guy may not surface on such a plot. We do know though that none of the Hobbit characters is put in good/bad surroundings only.", "For learning purposes I wanted to define my own chunking rules. In the first attempt it was done automatically by the already existing function nltk.ne_chunks, but we can choose any set of part-of-speech tags in any configuration to be extracted from the text.", "Following grammar consists of 4 NNPs \u2014 singular proper nouns. Two middle ones are mandatory, remaining two optional, which is indicated by \u201c?\u201d. They are all joined by optional CC (Coordinating conjunction), TO, VBD (Verb, past tense), or IN (Preposition or subordinating conjunction).", "My goal was to get any groups of entities connected by a verb like \u201ctalked to\u201d as well as a simple \u201cand\u201d. In practice it results in such 4 chunks extracted from a following sentence:", "Soon Dwalin lay by Balin, and Fili and Kili together, and Dori and Nori and Ori all in a heap, and Oin and Gloin and Bifur and Bofur and Bombur piled uncomfortably near the fire.", "\u201clay\u201d is considered a NN in terms of part-of-speech, that\u2019s why Dwalin was unfortunately left out by this logic. I counted how many each of these named entity chunks appear together.", "We now know which dwarves pair had the most occurrences together \u2014 it was Kili and Fili and with no close runner-ups! We also see that there is only one group of dwarf and non-dwarf characters \u2014 Bilbo and Balin. There are also pairs of first and last name for the same character (e.g. Bilbo Baggins), this is because any words between nouns are optional in my definition above.", "With a few tools we can get a fun insight about a whole book. Although they may not be very accurate \u2014 I think it\u2019s very difficult to summarise art with data analysis \u2014 it\u2019s a great way to learn new techniques.", "The code for the analysis can be found here.", "This article was primarily published on Ministry of data wiki.", "Your home for data science. A Medium publication sharing concepts, ideas and codes."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fa0a5cb116ed1&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fim-going-on-a-data-adventure-hobbit-text-analysis-a0a5cb116ed1&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fim-going-on-a-data-adventure-hobbit-text-analysis-a0a5cb116ed1&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fim-going-on-a-data-adventure-hobbit-text-analysis-a0a5cb116ed1&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fim-going-on-a-data-adventure-hobbit-text-analysis-a0a5cb116ed1&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://towardsdatascience.com/?source=post_page-----a0a5cb116ed1--------------------------------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----a0a5cb116ed1--------------------------------", "anchor_text": "Towards Data Science"}, {"url": "https://medium.com/@dorotamierzwa?source=post_page-----a0a5cb116ed1--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@dorotamierzwa?source=post_page-----a0a5cb116ed1--------------------------------", "anchor_text": "Dorota Mierzwa"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F49a44684a451&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fim-going-on-a-data-adventure-hobbit-text-analysis-a0a5cb116ed1&user=Dorota+Mierzwa&userId=49a44684a451&source=post_page-49a44684a451----a0a5cb116ed1---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fa0a5cb116ed1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fim-going-on-a-data-adventure-hobbit-text-analysis-a0a5cb116ed1&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fa0a5cb116ed1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fim-going-on-a-data-adventure-hobbit-text-analysis-a0a5cb116ed1&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://www.warnerbros.com/movies/hobbit-unexpected-journey/", "anchor_text": "The Hobbit: An Unexpected Journey"}, {"url": "http://countwordsworth.com/blog/what-is-a-good-average-sentence-length/", "anchor_text": "here"}, {"url": "https://github.com/cjhutto/vaderSentiment/blob/master/vaderSentiment/vader_lexicon.txt", "anchor_text": "lexicon"}, {"url": "https://github.com/dorotamierzwa/ministryofdata/blob/master/Hobbit%20Or%20There%20And%20Back%20Again%20-%20Text%20analysis.ipynb", "anchor_text": "here"}, {"url": "https://ministryofdata.fandom.com/wiki/I%27m_going_on_a_%28data%29_adventure%21", "anchor_text": "Ministry of data wiki"}, {"url": "https://medium.com/tag/nlp?source=post_page-----a0a5cb116ed1---------------nlp-----------------", "anchor_text": "NLP"}, {"url": "https://medium.com/tag/text-analysis?source=post_page-----a0a5cb116ed1---------------text_analysis-----------------", "anchor_text": "Text Analysis"}, {"url": "https://medium.com/tag/sentiment-analysis?source=post_page-----a0a5cb116ed1---------------sentiment_analysis-----------------", "anchor_text": "Sentiment Analysis"}, {"url": "https://medium.com/tag/data-analysis?source=post_page-----a0a5cb116ed1---------------data_analysis-----------------", "anchor_text": "Data Analysis"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fa0a5cb116ed1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fim-going-on-a-data-adventure-hobbit-text-analysis-a0a5cb116ed1&user=Dorota+Mierzwa&userId=49a44684a451&source=-----a0a5cb116ed1---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fa0a5cb116ed1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fim-going-on-a-data-adventure-hobbit-text-analysis-a0a5cb116ed1&user=Dorota+Mierzwa&userId=49a44684a451&source=-----a0a5cb116ed1---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fa0a5cb116ed1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fim-going-on-a-data-adventure-hobbit-text-analysis-a0a5cb116ed1&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://towardsdatascience.com/?source=post_page-----a0a5cb116ed1--------------------------------", "anchor_text": "More from Towards Data Science"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science%2Fa0a5cb116ed1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fim-going-on-a-data-adventure-hobbit-text-analysis-a0a5cb116ed1&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page-----a0a5cb116ed1---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://towardsdatascience.com/?source=post_page-----a0a5cb116ed1--------------------------------", "anchor_text": "Read more from Towards Data Science"}, {"url": "https://medium.com/?source=post_page-----a0a5cb116ed1--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----a0a5cb116ed1--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----a0a5cb116ed1--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----a0a5cb116ed1--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----a0a5cb116ed1--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----a0a5cb116ed1--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----a0a5cb116ed1--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@dorotamierzwa?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/@dorotamierzwa?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Dorota Mierzwa"}, {"url": "https://medium.com/@dorotamierzwa/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "32 Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F49a44684a451&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fim-going-on-a-data-adventure-hobbit-text-analysis-a0a5cb116ed1&user=Dorota+Mierzwa&userId=49a44684a451&source=post_page-49a44684a451--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fb6ee28b60eeb&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fim-going-on-a-data-adventure-hobbit-text-analysis-a0a5cb116ed1&newsletterV3=49a44684a451&newsletterV3Id=b6ee28b60eeb&user=Dorota+Mierzwa&userId=49a44684a451&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}