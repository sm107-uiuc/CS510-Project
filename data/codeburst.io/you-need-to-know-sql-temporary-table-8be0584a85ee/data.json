{"url": "https://codeburst.io/you-need-to-know-sql-temporary-table-8be0584a85ee", "time": 1682993049.0844312, "path": "codeburst.io/you-need-to-know-sql-temporary-table-8be0584a85ee/", "webpage": {"metadata": {"title": "You Need to Know SQL Temporary Table | by Changhui Xu | codeburst", "h1": "You Need to Know SQL Temporary Table", "description": "The discussion here focuses on SQL Server, but the concept of Temporary Table is applicable to most relational database providers. Temporary tables are short-lived tables in database servers, and\u2026"}, "outgoing_paragraph_urls": [{"url": "https://jasonstrate.com/2013/05/21/security-questions-what-permissions-are-required-to-create-temporary-tables/", "anchor_text": "link", "paragraph_index": 3}, {"url": "https://jasonstrate.com/", "anchor_text": "Jason Strate", "paragraph_index": 3}], "all_paragraphs": ["The discussion here focuses on SQL Server, but the concept of Temporary Table is applicable to most relational database providers. Temporary tables are short-lived tables in database servers, and they allow us to store and process intermediate results by using the same selection, update, and join operations we employ on regular relational database tables.", "We have been warned to NOT write any business logic in databases using triggers, stored procedures, and so on. It doesn\u2019t mean we don\u2019t need to know database systems. Being competent in database systems could save us a lot of work. For example, managers or customers often send us an email or a short notice asking for some one-off reports. Then we need to quickly log into the database servers and generate reports with either a list of parameters or a CSV file from requesters.", "In this article, we will learn about or refresh our mind regarding temporary tables in SQL Server.", "In an article \u201cWhat permissions are required to create temporary tables?\u201d (link), Jason Strate tells us that any login with the most basic permissions can have full rights to create and manage temporary tables.", "We usually replicate our transactional databases to read-only servers for reporting purposes or for the sake of read/write segregation. In a read-only database server, without permissions to insert external data into regular tables, we can use temporary tables to store data for further usage.", "There are two types of temporary tables: local and global temporary tables. Both of them share similar behaviors, except that the global temporary tables are visible across sessions. Moreover, the two types of temporary tables have different naming rules: local temporary tables should have names that start with a hash symbol (#); while the names of global temporary tables should start with two hash symbols (##).", "All temporary tables are stored in System Databases -> tempdb -> Temporary Tables. The following screenshot shows two temporary tables saved in a database. One is a global temporary table (##temp), and the other is a local temporary table (#temp).", "The local temporary table has a generated name in order to avoid name collision, because each session could have a #temp table. The actual names of local temporary tables are different, but we can refer each of them as #temp in their scoped session.", "On the other hand, the global temporary table has a unique name, because it can be referenced in all live sessions.", "A temporary table will be automatically dropped once its creation session is closed, for example, when we close the query editor tab or when we disconnect the database server.", "There are two ways to create a temporary table. One is using the SELECT INTO statement, and the other is using the CREATE TABLE statement.", "The first method is usually used to save intermediate results for repetitive use at later times. For example, the following query saves \u201cmale students\u201d into a temporary table. Then, we can use the #temp table multiple times in order to reduce redundant queries in the same session.", "The CREATE TABLE method uses the same syntax as creating a regular table. The following SQL script shows an example.", "Line 1 checks if a temporary table (#temp) has been created in the current session or not. If the temporary table already exists, then line 2 will drop this table, so that we will have a clean state. Then we can create the table with our desired DDL. After the #temp table is created, we can insert values into the table and use the #temp table as if it is a regular table. This method is useful when we work on database tables together with a list of values from external sources.", "We usually need to join the data in a database with the data from an existing CSV file. In this case, we have to load data from the CSV file into the database. If we want to save the CSV records to a temporary table, then we can either use an editor to convert CSV records to SQL INSERT statements, or import the CSV file directly using BULK INSERT statement.", "Here, let\u2019s take the second approach. The following SQL script shows an example that imports a CSV file from the local disk to a temporary table in a database.", "Note: in order to import data from a CSV file to a SQL database, the user needs to have the bulkadmin permission.", "The sections above have summarized commonly-seen scenarios of creating temporary tables. With temporary tables being created, we can conveniently manipulate the data in the temporary tables and other regular tables/views in databases.", "That\u2019s all for today. Thanks for reading.", "Bursts of code to power through your day. Web Development articles, tutorials, and news.", "Lead Application Developer. MBA. I write blogs about .NET, Angular, JavaScript/TypeScript, Docker, AWS, DDD, and many others."], "all_outgoing_urls": [{"url": "https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F8be0584a85ee&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---two_column_layout_nav----------------------------------", "anchor_text": "Open in app"}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fcodeburst.io%2Fyou-need-to-know-sql-temporary-table-8be0584a85ee&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Fcodeburst.io%2Fyou-need-to-know-sql-temporary-table-8be0584a85ee&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://medium.com/?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---two_column_layout_nav-----------------------new_post_sidenav-----------", "anchor_text": "Write"}, {"url": "https://medium.com/search?source=---two_column_layout_nav----------------------------------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fcodeburst.io%2Fyou-need-to-know-sql-temporary-table-8be0584a85ee&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign up"}, {"url": "https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Fcodeburst.io%2Fyou-need-to-know-sql-temporary-table-8be0584a85ee&source=post_page---two_column_layout_nav-----------------------global_nav-----------", "anchor_text": "Sign In"}, {"url": "https://codeburst.io/?source=post_page-----8be0584a85ee--------------------------------", "anchor_text": ""}, {"url": "https://codeburst.io/?source=post_page-----8be0584a85ee--------------------------------", "anchor_text": "codeburst"}, {"url": "https://changhuixu.medium.com/?source=post_page-----8be0584a85ee--------------------------------", "anchor_text": ""}, {"url": "https://changhuixu.medium.com/?source=post_page-----8be0584a85ee--------------------------------", "anchor_text": "Changhui Xu"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fff7bf05cfcab&operation=register&redirect=https%3A%2F%2Fcodeburst.io%2Fyou-need-to-know-sql-temporary-table-8be0584a85ee&user=Changhui+Xu&userId=ff7bf05cfcab&source=post_page-ff7bf05cfcab----8be0584a85ee---------------------follow_byline-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F8be0584a85ee&operation=register&redirect=https%3A%2F%2Fcodeburst.io%2Fyou-need-to-know-sql-temporary-table-8be0584a85ee&source=--------------------------bookmark_header-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F8be0584a85ee&operation=register&redirect=https%3A%2F%2Fcodeburst.io%2Fyou-need-to-know-sql-temporary-table-8be0584a85ee&source=--------------------------bookmark_header-----------", "anchor_text": "Save"}, {"url": "https://jasonstrate.com/2013/05/21/security-questions-what-permissions-are-required-to-create-temporary-tables/", "anchor_text": "link"}, {"url": "https://jasonstrate.com/", "anchor_text": "Jason Strate"}, {"url": "https://gist.github.com/changhuixu/88eaeb792b28518f15e986ade41f6b18", "anchor_text": "gist link"}, {"url": "https://gist.github.com/changhuixu/1a3a5e205bd82f518b98f78ebee6f82c", "anchor_text": "gist link"}, {"url": "https://gist.github.com/changhuixu/c2d4f4bc3166d4060184d11ddf36308c", "anchor_text": "gist link"}, {"url": "https://medium.com/tag/database?source=post_page-----8be0584a85ee---------------database-----------------", "anchor_text": "Database"}, {"url": "https://medium.com/tag/sql?source=post_page-----8be0584a85ee---------------sql-----------------", "anchor_text": "Sql"}, {"url": "https://medium.com/tag/technology?source=post_page-----8be0584a85ee---------------technology-----------------", "anchor_text": "Technology"}, {"url": "https://medium.com/tag/programming?source=post_page-----8be0584a85ee---------------programming-----------------", "anchor_text": "Programming"}, {"url": "https://medium.com/tag/reporting?source=post_page-----8be0584a85ee---------------reporting-----------------", "anchor_text": "Reporting"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Fcodeburst%2F8be0584a85ee&operation=register&redirect=https%3A%2F%2Fcodeburst.io%2Fyou-need-to-know-sql-temporary-table-8be0584a85ee&user=Changhui+Xu&userId=ff7bf05cfcab&source=-----8be0584a85ee---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Fcodeburst%2F8be0584a85ee&operation=register&redirect=https%3A%2F%2Fcodeburst.io%2Fyou-need-to-know-sql-temporary-table-8be0584a85ee&user=Changhui+Xu&userId=ff7bf05cfcab&source=-----8be0584a85ee---------------------clap_footer-----------", "anchor_text": ""}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F8be0584a85ee&operation=register&redirect=https%3A%2F%2Fcodeburst.io%2Fyou-need-to-know-sql-temporary-table-8be0584a85ee&source=--------------------------bookmark_footer-----------", "anchor_text": ""}, {"url": "https://codeburst.io/?source=post_page-----8be0584a85ee--------------------------------", "anchor_text": "More from codeburst"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Fcodeburst%2F8be0584a85ee&operation=register&redirect=https%3A%2F%2Fcodeburst.io%2Fyou-need-to-know-sql-temporary-table-8be0584a85ee&collection=codeburst&collectionId=61061eb0c96b&source=post_page-----8be0584a85ee---------------------follow_footer-----------", "anchor_text": "Follow"}, {"url": "https://codeburst.io/?source=post_page-----8be0584a85ee--------------------------------", "anchor_text": "Read more from codeburst"}, {"url": "https://medium.com/?source=post_page-----8be0584a85ee--------------------------------", "anchor_text": ""}, {"url": "https://medium.com/about?autoplay=1&source=post_page-----8be0584a85ee--------------------------------", "anchor_text": "About"}, {"url": "https://help.medium.com/hc/en-us?source=post_page-----8be0584a85ee--------------------------------", "anchor_text": "Help"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----8be0584a85ee--------------------------------", "anchor_text": "Terms"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----8be0584a85ee--------------------------------", "anchor_text": "Privacy"}, {"url": "https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8&ct=post_page&source=post_page-----8be0584a85ee--------------------------------", "anchor_text": ""}, {"url": "https://play.google.com/store/apps/details?id=com.medium.reader&source=post_page-----8be0584a85ee--------------------------------", "anchor_text": ""}, {"url": "https://changhuixu.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": ""}, {"url": "https://changhuixu.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Changhui Xu"}, {"url": "https://changhuixu.medium.com/followers?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "1.3K Followers"}, {"url": "https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fff7bf05cfcab&operation=register&redirect=https%3A%2F%2Fcodeburst.io%2Fyou-need-to-know-sql-temporary-table-8be0584a85ee&user=Changhui+Xu&userId=ff7bf05cfcab&source=post_page-ff7bf05cfcab--two_column_layout_sidebar-----------------------follow_profile-----------", "anchor_text": "Follow"}, {"url": "https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F11abe3d69a09&operation=register&redirect=https%3A%2F%2Fcodeburst.io%2Fyou-need-to-know-sql-temporary-table-8be0584a85ee&newsletterV3=ff7bf05cfcab&newsletterV3Id=11abe3d69a09&user=Changhui+Xu&userId=ff7bf05cfcab&source=---two_column_layout_sidebar-----------------------subscribe_user-----------", "anchor_text": ""}, {"url": "https://help.medium.com/hc/en-us?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Help"}, {"url": "https://medium.statuspage.io/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Status"}, {"url": "https://about.medium.com/creators/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Writers"}, {"url": "https://blog.medium.com/?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Blog"}, {"url": "https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Careers"}, {"url": "https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Privacy"}, {"url": "https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Terms"}, {"url": "https://medium.com/about?autoplay=1&source=---two_column_layout_sidebar----------------------------------", "anchor_text": "About"}, {"url": "https://speechify.com/medium?source=---two_column_layout_sidebar----------------------------------", "anchor_text": "Text to speech"}]}, "scrape_status": {"code": "1"}}